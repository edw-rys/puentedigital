(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{qdgq:function(t,e,i){"use strict";i.r(e),i.d(e,"LoginModule",(function(){return U}));var o=i("fXoL"),s=i("ofXK"),a=i("3Pt+"),c=i("TEn/"),n=i("tyNb"),r=i("p9xo"),l=i("m8mU"),g=i("8GrQ"),d=i("bJsC"),m=i("Gs5E"),u=i("sYmb");function b(t,e){1&t&&(o.gc(0,"span"),o.ed(1),o.tc(2,"translate"),o.fc()),2&t&&(o.Lb(1),o.fd(o.uc(2,1,"pages.resetPassword.recover")))}let p=(()=>{class t{constructor(t,e,i,o,s,a,c){this.rutaActiva=t,this.passService=e,this.redirectService=i,this.controlErroresService=o,this.translate=s,this.publicService=a,this.router=c,this.form={email:"",password:"",password_confirmation:"",token:""},this.login_image=r.i.appimg,this.loadImageBack=!1,this.submitted={submit:!1},s.setDefaultLang(r.e.lang),this.form.token=this.rutaActiva.snapshot.params.token,this.loadData()}loadData(){this.submitted.submit=!0,this.passService.getData(this.form.token).subscribe(t=>{this.submitted.submit=!1,this.form.email=t.email},t=>{this.submitted.submit=!1,this.redirectService.redirect(t.error.message,r.h.login,"error")})}ngOnInit(){}onRecorverSubmit(){this.submitted.submit=!0,this.passService.resetPassword(this.form).subscribe(t=>{this.submitted.submit=!1,this.redirectService.redirect(t.message,r.h.login,"success",5e3)},t=>{this.submitted.submit=!1,this.controlErroresService.control(t)})}getImage(t=1){this.publicService.getProfileImage().subscribe(t=>{this.loadImageBack=!0,this.login_image=t.data.file_path},e=>{t<=3&&this.getImage(t+1)})}}return t.\u0275fac=function(e){return new(e||t)(o.ac(n.a),o.ac(g.a),o.ac(m.a),o.ac(l.a),o.ac(u.e),o.ac(d.a),o.ac(n.f))},t.\u0275cmp=o.Ub({type:t,selectors:[["app-recover-password"]],decls:24,vars:20,consts:[[1,""],[1,"all-img-background"],[1,"h-screen","xl:h-auto","flex","py-5","xl:py-0","xl:my-0",2,"height","100vh"],[1,"my-auto","mx-auto","xl:ml-20","dark:bg-dark-1","xl:bg-transparent","px-5","sm:px-8","py-8","xl:p-0","rounded-md","w-full","sm:w-3/4","lg:w-2/4","w-auto"],["action",""],[1,"flex","flex-center"],["alt","--","src","assets/images/masterlogo.svg",1,"text-center","w-1/2","-mt-16"],[1,"intro-x","font-bold","text-2xl","xl:text-3xl","text-center","xl:text-left","text-white"],[1,"text-center"],[1,"intro-x","mt-8"],["type","password","name","email",1,"intro-x","login__input","form-control","py-3","px-4","border-gray-300","block",3,"ngModel","placeholder","ngModelChange"],[1,"intro-x","mt-5","xl:mt-8","text-center","xl:text-left"],["type","submit",1,"btn","btn-primary","xl:w-32","xl:mr-3","align-top",3,"disabled","ngClass","click"],[4,"ngIf"],["routerLink","/auth/login",1,"btn","xl:ml-2","btn-secondary","xl:w-32","xl:mt-0","align-top"]],template:function(t,e){1&t&&(o.gc(0,"ion-content",0),o.gc(1,"div",1),o.gc(2,"div",2),o.gc(3,"div",3),o.gc(4,"form",4),o.gc(5,"div",5),o.bc(6,"img",6),o.fc(),o.gc(7,"h2",7),o.ed(8),o.tc(9,"translate"),o.fc(),o.gc(10,"p",8),o.ed(11),o.fc(),o.gc(12,"div",9),o.gc(13,"input",10),o.oc("ngModelChange",(function(t){return e.form.password=t})),o.tc(14,"translate"),o.fc(),o.fc(),o.gc(15,"div",9),o.gc(16,"input",10),o.oc("ngModelChange",(function(t){return e.form.password_confirmation=t})),o.tc(17,"translate"),o.fc(),o.fc(),o.gc(18,"div",11),o.gc(19,"button",12),o.oc("click",(function(){return e.onRecorverSubmit()})),o.cd(20,b,3,3,"span",13),o.fc(),o.gc(21,"button",14),o.ed(22),o.tc(23,"translate"),o.fc(),o.fc(),o.fc(),o.fc(),o.fc(),o.fc(),o.fc()),2&t&&(o.Lb(1),o.ad("background-image: url("+e.login_image+");"),o.Lb(7),o.gd(" ",o.uc(9,12,"pages.resetPassword.reset")," "),o.Lb(3),o.fd(e.form.email),o.Lb(2),o.Bc("placeholder",o.uc(14,14,"forms.password")),o.Ac("ngModel",e.form.password),o.Lb(3),o.Bc("placeholder",o.uc(17,16,"forms.password_confirm")),o.Ac("ngModel",e.form.password_confirmation),o.Lb(3),o.Ac("disabled",e.submitted.submit)("ngClass",e.submitted.submit?"loading":""),o.Lb(1),o.Ac("ngIf",!e.submitted.submit),o.Lb(2),o.fd(o.uc(23,18,"pages.login.login_title")))},directives:[c.u,a.H,a.s,a.t,a.c,a.r,a.u,s.q,s.t,c.Kb,n.g],pipes:[u.d],styles:[""]}),t})();var f=i("X+KH");function h(t,e){1&t&&(o.gc(0,"span"),o.ed(1),o.tc(2,"translate"),o.fc()),2&t&&(o.Lb(1),o.fd(o.uc(2,1,"pages.resetPassword.recover")))}let x=(()=>{class t{constructor(t,e,i){this.translate=t,this.publicService=e,this.userData=i,this.form={email:""},this.submitted={submit:!1},this.login_image=r.i.appimg,this.loadImageBack=!1,t.setDefaultLang(r.e.lang)}ngOnInit(){}onRecorverSubmit(){this.submitted.submit=!0,this.userData.recoveryPassword(this.form,this.submitted)}getImage(t=1){this.publicService.getProfileImage().subscribe(t=>{this.loadImageBack=!0,this.login_image=t.data.file_path},e=>{t<=3&&this.getImage(t+1)})}}return t.\u0275fac=function(e){return new(e||t)(o.ac(u.e),o.ac(d.a),o.ac(f.a))},t.\u0275cmp=o.Ub({type:t,selectors:[["app-reset-password"]],decls:18,vars:15,consts:[[1,""],[1,"all-img-background"],[1,"h-screen","xl:h-auto","flex","py-5","xl:py-0","xl:my-0",2,"height","100vh"],[1,"my-auto","mx-auto","xl:ml-20","dark:bg-dark-1","xl:bg-transparent","px-5","sm:px-8","py-8","xl:p-0","rounded-md","w-full","sm:w-3/4","lg:w-2/4","w-auto"],[1,"intro-x","font-bold","text-2xl","xl:text-3xl","text-center","xl:text-left","text-white"],[1,"flex","flex-center"],["alt","--","src","assets/images/masterlogo.svg",1,"text-center","w-1/2","-mt-16"],[1,"intro-x","mt-8"],["type","text","name","email",1,"intro-x","login__input","form-control","py-3","px-4","border-gray-300","block",3,"ngModel","placeholder","ngModelChange"],[1,"intro-x","mt-5","xl:mt-8","text-center","xl:text-left"],["type","submit",1,"btn","btn-primary","xl:w-32","xl:mr-3","align-top",3,"disabled","ngClass","click"],[4,"ngIf"],["routerLink","/auth/login",1,"btn","btn-secondary","xl:w-32","xl:mt-0","align-top"]],template:function(t,e){1&t&&(o.gc(0,"ion-content",0),o.gc(1,"div",1),o.gc(2,"div",2),o.gc(3,"div",3),o.gc(4,"h2",4),o.gc(5,"div",5),o.bc(6,"img",6),o.fc(),o.ed(7),o.tc(8,"translate"),o.fc(),o.gc(9,"div",7),o.gc(10,"input",8),o.oc("ngModelChange",(function(t){return e.form.email=t})),o.tc(11,"translate"),o.fc(),o.fc(),o.gc(12,"div",9),o.gc(13,"button",10),o.oc("click",(function(){return e.onRecorverSubmit()})),o.cd(14,h,3,3,"span",11),o.fc(),o.gc(15,"button",12),o.ed(16),o.tc(17,"translate"),o.fc(),o.fc(),o.fc(),o.fc(),o.fc(),o.fc()),2&t&&(o.Lb(1),o.ad("background-image: url("+e.login_image+");"),o.Lb(6),o.gd(" ",o.uc(8,9,"pages.resetPassword.title")," "),o.Lb(3),o.Bc("placeholder",o.uc(11,11,"forms.email")),o.Ac("ngModel",e.form.email),o.Lb(3),o.Ac("disabled",e.submitted.submit)("ngClass",e.submitted.submit?"loading":""),o.Lb(1),o.Ac("ngIf",!e.submitted.submit),o.Lb(2),o.fd(o.uc(17,13,"pages.login.login_title")))},directives:[c.u,a.c,a.r,a.u,s.q,s.t,c.Kb,n.g],pipes:[u.d],styles:[""]}),t})();var v,w=i("mrSG"),k=i("EYf3"),y=i("cxbk");function L(t,e){1&t&&(o.gc(0,"span"),o.ed(1),o.tc(2,"translate"),o.fc()),2&t&&(o.Lb(1),o.fd(o.uc(2,1,"pages.login.login")))}function _(t,e){1&t&&(o.gc(0,"span",26),o.ed(1),o.tc(2,"translate"),o.fc()),2&t&&(o.Lb(1),o.fd(o.uc(2,1,"pages.login.login_submit")))}function I(t,e){1&t&&(o.gc(0,"span"),o.ed(1),o.tc(2,"translate"),o.fc()),2&t&&(o.Lb(1),o.fd(o.uc(2,1,"pages.login.login")))}v=r.f?y.a.google.recaptcha.site_key:"6Lfn17UhAAAAAOP6JwWfIiZIih_2HensIbKIti9b";const S=[{path:"login",component:(()=>{class t{constructor(t,e,i,o,s){this.userData=t,this.darkService=e,this.publicService=i,this.router=o,this.translate=s,this.login={email:"",password:"",remember_me:!1},this.submitted={submit:!1},this.robot=!0,this.loadImageBack=!1,this.login_image=r.i.appimg,this.description_image="Unos pocos clics m\xe1s para iniciar sesi\xf3n en su cuenta",this.key_recaptcha=v,this.dark=!1,s.setDefaultLang(r.e.lang);let a=localStorage.getItem(r.d.email);a&&(this.login.email=a),localStorage.getItem("dark-mode")&&(this.dark=!0)}onLogin(t){this.submitted.submit=!0,this.login.remember_me&&localStorage.setItem(r.d.email,this.login.email),t.valid&&this.userData.login(this.login,this.submitted)}onSignup(){this.router.navigateByUrl("/signup")}toggleButton(){this.dark=!this.dark,this.darkService.changeDarkMode(this.dark)}initGoogleAuth(){return Object(w.b)(this,void 0,void 0,(function*(){return new Promise(t=>{gapi.load("auth2",t)}).then(()=>Object(w.b)(this,void 0,void 0,(function*(){yield gapi.auth2.init({client_id:y.a.google.client_id}).then(t=>{this.gapiSetup=!0,this.authInstance=t})})))}))}authenticateGoogleProvider(){return Object(w.b)(this,void 0,void 0,(function*(){}))}authenticateGoogle(){return Object(w.b)(this,void 0,void 0,(function*(){return this.gapiSetup||(yield this.initGoogleAuth()),new Promise(()=>Object(w.b)(this,void 0,void 0,(function*(){yield this.authInstance.signIn().then(t=>{this.userGoogle=t,console.log(this.userGoogle),this.userData.authWithProvider({provider:y.a.provider,provider_id:this.userGoogle.getId(),email:this.userGoogle.getBasicProfile().getEmail()},{provider:"GOOGLE",provider_id:this.userGoogle.getId(),email:this.userGoogle.getBasicProfile().getEmail(),name:t.getBasicProfile().getName(),last_name:t.getBasicProfile().getFamilyName()})},t=>this.error=t)})))}))}checkIfUserAuthenticated(){return Object(w.b)(this,void 0,void 0,(function*(){return this.gapiSetup||(yield this.initGoogleAuth()),this.authInstance.isSignedIn.get()}))}getImage(t=1){this.publicService.getProfileImage().subscribe(t=>{this.loadImageBack=!0,this.login_image=t.data.file_path,this.description_image=t.data.description},e=>{t<=3&&this.getImage(t+1)})}resolved(t){console.log("Resolved captcha with response: "+t)}}return t.\u0275fac=function(e){return new(e||t)(o.ac(f.a),o.ac(k.a),o.ac(d.a),o.ac(n.f),o.ac(u.e))},t.\u0275cmp=o.Ub({type:t,selectors:[["page-login"]],decls:40,vars:32,consts:[[1,""],[1,"all-img-background"],[1,"h-screen","xl:h-auto","flex","py-5","xl:py-0","xl:my-0",2,"height","100vh"],[1,"my-auto","mx-auto","xl:ml-20","dark:bg-dark-1","xl:bg-transparent","px-5","sm:px-8","py-8","xl:p-0","rounded-md","w-full","sm:w-3/4","lg:w-2/4","w-auto"],["novalidate","",1,"app-form-mb-em-4"],["loginForm","ngForm"],[1,"flex","flex-center"],["alt","--","src","assets/images/masterlogo.svg",1,"text-center","w-2/3","-mt-16"],[1,"intro-x","font-bold","text-2xl","xl:text-3xl","text-center","xl:text-left","text-white"],[1,"intro-x","mt-2"],["type","text","name","email",1,"intro-x","login__input","form-control","py-3","px-4","border-gray-300","block",3,"ngModel","placeholder","ngModelChange"],["type","password","name","password",1,"intro-x","login__input","form-control","py-3","px-4","border-gray-300","block","mt-2",3,"ngModel","placeholder","ngModelChange"],[1,"intro-x","flex","text-gray-700","dark:text-gray-600","text-xs","sm:text-sm","mt-2"],[1,"flex","items-center","mr-auto"],["id","remember-me","name","remember-me","type","checkbox",1,"form-check-input","border","mr-2",2,"margin-top","-5px",3,"ngModel","ngModelChange"],["for","remember-me",1,"cursor-pointer","select-none","text-white"],["routerLink","/auth/reset-password",1,"text-white"],[1,"intro-x","xl:mt-5","text-center","xl:text-left"],["type","submit",1,"d-none",3,"disabled","click"],[4,"ngIf"],["type","submit","color","primary","size","small",1,"no-uppercase",3,"disabled","click"],["class","loading",4,"ngIf"],["routerLink","/signup","size","small","color","light",1,"no-uppercase"],[1,"intro-x","mt-8","text-center","xl:text-left"],["size","small","color","danger",3,"disabled","click"],["name","logo-google"],[1,"loading"]],template:function(t,e){if(1&t){const t=o.hc();o.gc(0,"ion-content",0),o.gc(1,"div",1),o.gc(2,"div",2),o.gc(3,"div",3),o.gc(4,"form",4,5),o.gc(6,"div",6),o.bc(7,"img",7),o.fc(),o.gc(8,"h2",8),o.ed(9),o.tc(10,"translate"),o.fc(),o.gc(11,"div",9),o.gc(12,"input",10),o.oc("ngModelChange",(function(t){return e.login.email=t})),o.tc(13,"translate"),o.fc(),o.gc(14,"input",11),o.oc("ngModelChange",(function(t){return e.login.password=t})),o.tc(15,"translate"),o.fc(),o.fc(),o.gc(16,"div",12),o.gc(17,"div",13),o.gc(18,"input",14),o.oc("ngModelChange",(function(t){return e.login.remember_me=t})),o.fc(),o.gc(19,"label",15),o.ed(20),o.tc(21,"translate"),o.fc(),o.fc(),o.gc(22,"a",16),o.ed(23),o.tc(24,"translate"),o.fc(),o.fc(),o.gc(25,"div",17),o.gc(26,"button",18),o.oc("click",(function(){o.Sc(t);const i=o.Oc(5);return e.onLogin(i)})),o.cd(27,L,3,3,"span",19),o.fc(),o.gc(28,"ion-button",20),o.oc("click",(function(){o.Sc(t);const i=o.Oc(5);return e.onLogin(i)})),o.cd(29,_,3,3,"span",21),o.cd(30,I,3,3,"span",19),o.fc(),o.gc(31,"ion-button",22),o.ed(32),o.tc(33,"translate"),o.fc(),o.fc(),o.gc(34,"div",23),o.gc(35,"ion-button",24),o.oc("click",(function(){return e.authenticateGoogle()})),o.gc(36,"span"),o.bc(37,"ion-icon",25),o.ed(38),o.tc(39,"translate"),o.fc(),o.fc(),o.fc(),o.fc(),o.fc(),o.fc(),o.fc(),o.fc()}2&t&&(o.Lb(1),o.ad("background-image: url("+e.login_image+");"),o.Lb(8),o.gd(" ",o.uc(10,18,"pages.login.login_title")," "),o.Lb(3),o.Bc("placeholder",o.uc(13,20,"forms.email")),o.Ac("ngModel",e.login.email),o.Lb(2),o.Bc("placeholder",o.uc(15,22,"forms.password")),o.Ac("ngModel",e.login.password),o.Lb(4),o.Ac("ngModel",e.login.remember_me),o.Lb(2),o.fd(o.uc(21,24,"remember_me")),o.Lb(3),o.fd(o.uc(24,26,"forgot_password")),o.Lb(3),o.Ac("disabled",e.submitted.submit),o.Lb(1),o.Ac("ngIf",!e.submitted.submit),o.Lb(1),o.Ac("disabled",e.submitted.submit),o.Lb(1),o.Ac("ngIf",e.submitted.submit),o.Lb(1),o.Ac("ngIf",!e.submitted.submit),o.Lb(2),o.fd(o.uc(33,28,"pages.signup.signup")),o.Lb(3),o.Ac("disabled",e.submitted.submit),o.Lb(3),o.gd(" ",o.uc(39,30,"pages.login.login_with_google"),""))},directives:[c.u,a.H,a.s,a.t,a.c,a.r,a.u,a.a,n.i,c.Kb,s.t,c.k,n.g,c.C],pipes:[u.d],styles:[""]}),t})()},{path:"reset-password",component:x},{path:"recover-password/:token",component:p}];let A=(()=>{class t{}return t.\u0275mod=o.Yb({type:t}),t.\u0275inj=o.Xb({factory:function(e){return new(e||t)},imports:[[n.j.forChild(S)],n.j]}),t})();var M=i("tk/3"),B=i("vkF9"),C=i.n(B),P=i("tAZD"),G=i.n(P),O=i("1Ssm"),j=i("5eHb"),D=i("vvyD");Object(s.L)(C.a,"es-Ec"),Object(s.L)(G.a,"en");const E=localStorage.getItem("languaje")?localStorage.getItem("languaje"):"es";let U=(()=>{class t{}return t.\u0275mod=o.Yb({type:t}),t.\u0275inj=o.Xb({factory:function(e){return new(e||t)},providers:[{provide:M.a,useClass:O.a,multi:!0},{provide:o.z,useValue:"es"==E?"es-Ec":"en"}],imports:[[s.c,a.l,c.Bb,a.B,A,M.c,u.c,D.a,j.a.forRoot()]]}),t})()}}]);