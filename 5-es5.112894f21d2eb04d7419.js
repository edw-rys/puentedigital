function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _createForOfIteratorHelper(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,a=function(){};return{s:a,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,i=!0,r=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){r=!0,c=t},f:function(){try{i||null==n.return||n.return()}finally{if(r)throw c}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _get(t,e,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=_superPropBase(t,e);if(o){var a=Object.getOwnPropertyDescriptor(o,e);return a.get?a.get.call(n):a.value}})(t,e,n||t)}function _superPropBase(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_getPrototypeOf(t)););return t}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var n,o=_getPrototypeOf(t);if(e){var a=_getPrototypeOf(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"1yaQ":function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return d})),n.d(e,"c",(function(){return l}));var o=n("fXoL"),a=n("FKr1"),c=n("wd/R"),i=n.n(c).a||c,r=new o.u("MAT_MOMENT_DATE_ADAPTER_OPTIONS",{providedIn:"root",factory:function(){return{useUtc:!1}}});function s(t,e){for(var n=Array(t),o=0;o<t;o++)n[o]=e(o);return n}var l=function(){var t=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,o){var a;return _classCallCheck(this,n),(a=e.call(this))._options=o,a.setLocale(t||i.locale()),a}return _createClass(n,[{key:"setLocale",value:function(t){var e=this;_get(_getPrototypeOf(n.prototype),"setLocale",this).call(this,t);var o=i.localeData(t);this._localeData={firstDayOfWeek:o.firstDayOfWeek(),longMonths:o.months(),shortMonths:o.monthsShort(),dates:s(31,(function(t){return e.createDate(2017,0,t+1).format("D")})),longDaysOfWeek:o.weekdays(),shortDaysOfWeek:o.weekdaysShort(),narrowDaysOfWeek:o.weekdaysMin()}}},{key:"getYear",value:function(t){return this.clone(t).year()}},{key:"getMonth",value:function(t){return this.clone(t).month()}},{key:"getDate",value:function(t){return this.clone(t).date()}},{key:"getDayOfWeek",value:function(t){return this.clone(t).day()}},{key:"getMonthNames",value:function(t){return"long"==t?this._localeData.longMonths:this._localeData.shortMonths}},{key:"getDateNames",value:function(){return this._localeData.dates}},{key:"getDayOfWeekNames",value:function(t){return"long"==t?this._localeData.longDaysOfWeek:"short"==t?this._localeData.shortDaysOfWeek:this._localeData.narrowDaysOfWeek}},{key:"getYearName",value:function(t){return this.clone(t).format("YYYY")}},{key:"getFirstDayOfWeek",value:function(){return this._localeData.firstDayOfWeek}},{key:"getNumDaysInMonth",value:function(t){return this.clone(t).daysInMonth()}},{key:"clone",value:function(t){return t.clone().locale(this.locale)}},{key:"createDate",value:function(t,e,n){if(e<0||e>11)throw Error('Invalid month index "'.concat(e,'". Month index has to be between 0 and 11.'));if(n<1)throw Error('Invalid date "'.concat(n,'". Date has to be greater than 0.'));var o=this._createMoment({year:t,month:e,date:n}).locale(this.locale);if(!o.isValid())throw Error('Invalid date "'.concat(n,'" for month with index "').concat(e,'".'));return o}},{key:"today",value:function(){return this._createMoment().locale(this.locale)}},{key:"parse",value:function(t,e){return t&&"string"==typeof t?this._createMoment(t,e,this.locale):t?this._createMoment(t).locale(this.locale):null}},{key:"format",value:function(t,e){if(t=this.clone(t),!this.isValid(t))throw Error("MomentDateAdapter: Cannot format invalid date.");return t.format(e)}},{key:"addCalendarYears",value:function(t,e){return this.clone(t).add({years:e})}},{key:"addCalendarMonths",value:function(t,e){return this.clone(t).add({months:e})}},{key:"addCalendarDays",value:function(t,e){return this.clone(t).add({days:e})}},{key:"toIso8601",value:function(t){return this.clone(t).format()}},{key:"deserialize",value:function(t){var e;if(t instanceof Date)e=this._createMoment(t).locale(this.locale);else if(this.isDateInstance(t))return this.clone(t);if("string"==typeof t){if(!t)return null;e=this._createMoment(t,i.ISO_8601).locale(this.locale)}return e&&this.isValid(e)?this._createMoment(e).locale(this.locale):_get(_getPrototypeOf(n.prototype),"deserialize",this).call(this,t)}},{key:"isDateInstance",value:function(t){return i.isMoment(t)}},{key:"isValid",value:function(t){return this.clone(t).isValid()}},{key:"invalid",value:function(){return i.invalid()}},{key:"_createMoment",value:function(t,e,n){var o=this._options||{},a=o.strict;return o.useUtc?i.utc(t,e,n,a):i(t,e,n,a)}}]),n}(a.c);return t.\u0275fac=function(e){return new(e||t)(o.kc(a.f,8),o.kc(r,8))},t.\u0275prov=o.Wb({token:t,factory:t.\u0275fac}),t}(),d={parse:{dateInput:"l"},display:{dateInput:"l",monthYearLabel:"MMM YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"MMMM YYYY"}}},g37K:function(t,e,n){"use strict";var o,a,c;n.r(e),n.d(e,"MainReportsPageModule",(function(){return xa}));var i,r=n("ofXK"),s=n("3Pt+"),l=n("TEn/"),d=n("tyNb"),u=n("3WHO"),g=n("cxbk"),f=n("m8mU"),p=n("p9xo"),b=n("fXoL"),h=n("tk/3"),m=((i=function(){function t(e){_classCallCheck(this,t),this.httpClient=e,this.url=p.i.reports}return _createClass(t,[{key:"buildQueryParams",value:function(t){var e="params_nxtime";return t.page&&null!=t.page&&(e+="&page="+t.page),t.have_connect_days&&null!=t.have_connect_days&&(e+="&have_connect_days="+t.have_connect_days),t.role_id&&null!=t.role_id&&(e+="&role_id="+t.role_id),t.start_date&&null!=t.start_date&&(e+="&start_date="+t.start_date),t.end_date&&null!=t.end_date&&(e+="&end_date="+t.end_date),t.q&&null!=t.q&&(e+="&q="+t.q),t.country_id&&null!=t.country_id&&(e+="&country_id="+t.country_id),t.province_id&&null!=t.province_id&&(e+="&province_id="+t.province_id),t.city_id&&null!=t.city_id&&(e+="&city_id="+t.city_id),t.school_id&&null!=t.school_id&&(e+="&school_id="+t.school_id),t.sort&&null!=t.sort&&(e+="&sort="+t.sort),t.order&&null!=t.order&&(e+="&order="+t.order),t.role_id&&null!=t.role_id&&(e+="&role_id="+t.role_id),t.end_date&&null!=t.end_date&&(e+="&end_date="+t.end_date),t.start_date&&null!=t.start_date&&(e+="&start_date="+t.start_date),t.count_min_pines&&null!=t.count_min_pines&&(e+="&count_min_pines="+t.count_min_pines),t.count_max_pines&&null!=t.count_max_pines&&(e+="&count_max_pines="+t.count_max_pines),t.count_max_libraries&&null!=t.count_max_libraries&&(e+="&count_max_libraries="+t.count_max_libraries),t.count_min_libraries&&null!=t.count_min_libraries&&(e+="&count_min_libraries="+t.count_min_libraries),t.mode_library_or_book&&null!=t.mode_library_or_book&&(e+="&mode_library_or_book="+t.mode_library_or_book),t.county_id&&null!=t.county_id&&(e+="&county_id="+t.county_id),t.state_id&&null!=t.state_id&&(e+="&state_id="+t.state_id),t.city_id&&null!=t.city_id&&(e+="&city_id="+t.city_id),t.status&&null!=t.status&&(e+="&status="+t.status),t.last_name&&null!=t.last_name&&(e+="&last_name="+t.last_name),t.first_name&&null!=t.first_name&&(e+="&first_name="+t.first_name),t.busqueda&&(e+="&busqueda="+t.busqueda),t.get_libraries_count&&(e+="&get-libraries-count="+t.get_libraries_count),t.get_allow_libraries_count&&(e+="&get-allow-libraries-count="+t.get_allow_libraries_count),e}},{key:"getInformation",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.httpClient.get(this.url+"get-users-reports?"+this.buildQueryParams(t))}},{key:"getInformationReportWeek",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.httpClient.get(this.url+"activity/get-week-reports?"+this.buildQueryParams(t))}},{key:"getTimeSeries",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.httpClient.get(this.url+"activity/get-report-qualificated?"+this.buildQueryParams(t))}},{key:"exportTimeSeries",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.httpClient.get(this.url+"activity/get-report-qualificated-export?"+this.buildQueryParams(t),{responseType:"blob"})}},{key:"getTimeSeriesDownload",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.httpClient.get(this.url+"activity/get-report-qualificated-download?"+this.buildQueryParams(t),{responseType:"blob"})}},{key:"getAvgGroupQualifications",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.httpClient.get(this.url+"activity/get-report-by-type-range/"+t+"?"+this.buildQueryParams(e))}},{key:"downloadAvgGroupQualifications",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.httpClient.get(this.url+"activity/download-report-by-type-range/"+t+"?"+this.buildQueryParams(e),{responseType:"blob"})}},{key:"exportAvgGroupQualifications",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.httpClient.get(this.url+"activity/export-report-by-type-range/"+t+"?"+this.buildQueryParams(e),{responseType:"blob"})}},{key:"downloadAvgGroupQualificationsBook",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.httpClient.get(this.url+"download-avg-qualifications/book/"+t+"?"+this.buildQueryParams(e),{responseType:"blob"})}},{key:"exportAvgGroupQualificationsBook",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.httpClient.get(this.url+"export-avg-qualifications/book/"+t+"?"+this.buildQueryParams(e),{responseType:"blob"})}},{key:"getInformationReportMonthly",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.httpClient.get(this.url+"activity/get-month-reports?"+this.buildQueryParams(t))}},{key:"exportData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.httpClient.get(this.url+"export-data-list?"+this.buildQueryParams(t),{responseType:"blob"})}},{key:"downloadData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.httpClient.get(this.url+"download-data-list?"+this.buildQueryParams(t),{responseType:"blob"})}},{key:"getBooks",value:function(t){return this.httpClient.get(this.url+"all_books?"+this.buildQueryParams(t))}},{key:"avgQualificationBook",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.httpClient.get(this.url+"avg-qualifications/book/"+t+"?"+this.buildQueryParams(e))}}]),t}()).\u0275fac=function(t){return new(t||i)(b.kc(h.b))},i.\u0275prov=b.Wb({token:i,factory:i.\u0275fac,providedIn:"root"}),i),_=n("Iab2"),v=n("bO4D"),y=n("6f/U"),k=n("7EHt"),x=n("wd/R"),C=n("bVrE"),w=n("bJsC"),M=n("kmnG"),L=n("qFsG"),O=n("d3UM"),P=n("FKr1"),A=n("iadO"),S=n("NFeN"),I=n("ZOsW"),D=n("sYmb");function z(t,e){if(1&t){var n=b.hc();b.gc(0,"ion-col",10),b.gc(1,"mat-form-field",11),b.gc(2,"mat-label"),b.ed(3),b.tc(4,"translate"),b.fc(),b.gc(5,"input",12),b.oc("ngModelChange",(function(t){return b.Sc(n),b.sc(2).form.last_name=t})),b.tc(6,"translate"),b.fc(),b.fc(),b.fc()}if(2&t){var o=b.sc(2);b.Lb(3),b.fd(b.uc(4,3,"forms.last_names")),b.Lb(2),b.Ac("placeholder",b.uc(6,5,"forms.last_name"))("ngModel",o.form.last_name)}}function q(t,e){if(1&t){var n=b.hc();b.gc(0,"ion-col",10),b.gc(1,"mat-form-field",11),b.gc(2,"mat-label"),b.ed(3),b.tc(4,"translate"),b.fc(),b.gc(5,"input",12),b.oc("ngModelChange",(function(t){return b.Sc(n),b.sc(2).form.first_name=t})),b.tc(6,"translate"),b.fc(),b.fc(),b.fc()}if(2&t){var o=b.sc(2);b.Lb(3),b.fd(b.uc(4,3,"forms.names")),b.Lb(2),b.Ac("placeholder",b.uc(6,5,"forms.first_name"))("ngModel",o.form.first_name)}}function R(t,e){if(1&t&&(b.gc(0,"mat-option",16),b.ed(1),b.fc()),2&t){var n=e.$implicit;b.Ac("value",n.uuid),b.Lb(1),b.fd(n.description)}}function F(t,e){if(1&t){var n=b.hc();b.gc(0,"ion-col",10),b.gc(1,"mat-form-field",11),b.gc(2,"mat-label"),b.ed(3),b.tc(4,"translate"),b.fc(),b.gc(5,"mat-select",13),b.oc("ngModelChange",(function(t){return b.Sc(n),b.sc(2).form.role_id=t})),b.gc(6,"mat-option",14),b.ed(7),b.tc(8,"translate"),b.fc(),b.cd(9,R,2,2,"mat-option",15),b.fc(),b.fc(),b.fc()}if(2&t){var o=b.sc(2);b.Lb(3),b.fd(b.uc(4,4,"pages.messenger.type_users")),b.Lb(2),b.Ac("ngModel",o.form.role_id),b.Lb(2),b.fd(b.uc(8,6,"statuses.all")),b.Lb(2),b.Ac("ngForOf",o.roles)}}function T(t,e){if(1&t){var n=b.hc();b.gc(0,"ion-col",10),b.gc(1,"mat-form-field",11),b.gc(2,"mat-label"),b.ed(3),b.tc(4,"translate"),b.fc(),b.gc(5,"mat-select",13),b.oc("ngModelChange",(function(t){return b.Sc(n),b.sc(2).form.status=t})),b.gc(6,"mat-option",14),b.ed(7),b.tc(8,"translate"),b.fc(),b.gc(9,"mat-option",17),b.ed(10),b.tc(11,"translate"),b.fc(),b.gc(12,"mat-option",18),b.ed(13),b.tc(14,"translate"),b.fc(),b.fc(),b.fc(),b.fc()}if(2&t){var o=b.sc(2);b.Lb(3),b.fd(b.uc(4,5,"statuses.status")),b.Lb(2),b.Ac("ngModel",o.form.status),b.Lb(2),b.fd(b.uc(8,7,"statuses.all")),b.Lb(3),b.fd(b.uc(11,9,"statuses.active")),b.Lb(3),b.fd(b.uc(14,11,"statuses.inactive"))}}function B(t,e){if(1&t){var n=b.hc();b.gc(0,"ion-col",10),b.gc(1,"mat-form-field",11),b.gc(2,"mat-label"),b.ed(3),b.tc(4,"translate"),b.fc(),b.gc(5,"input",19),b.oc("ngModelChange",(function(t){return b.Sc(n),b.sc(2).form.filter_start_date=t})),b.fc(),b.bc(6,"mat-datepicker-toggle",20),b.bc(7,"mat-datepicker",null,21),b.fc(),b.fc()}if(2&t){var o=b.Oc(8),a=b.sc(2);b.Lb(3),b.fd(b.uc(4,4,"forms.start_date")),b.Lb(2),b.Ac("matDatepicker",o)("ngModel",a.form.filter_start_date),b.Lb(1),b.Ac("for",o)}}function j(t,e){if(1&t){var n=b.hc();b.gc(0,"ion-col",10),b.gc(1,"mat-form-field",11),b.gc(2,"mat-label"),b.ed(3),b.tc(4,"translate"),b.fc(),b.gc(5,"input",19),b.oc("ngModelChange",(function(t){return b.Sc(n),b.sc(2).form.filter_end_date=t})),b.fc(),b.bc(6,"mat-datepicker-toggle",20),b.bc(7,"mat-datepicker",null,22),b.fc(),b.fc()}if(2&t){var o=b.Oc(8),a=b.sc(2);b.Lb(3),b.fd(b.uc(4,4,"forms.end_date")),b.Lb(2),b.Ac("matDatepicker",o)("ngModel",a.form.filter_end_date),b.Lb(1),b.Ac("for",o)}}function E(t,e){if(1&t){var n=b.hc();b.gc(0,"ion-col",10),b.gc(1,"mat-form-field",11),b.gc(2,"mat-label"),b.ed(3),b.tc(4,"translate"),b.fc(),b.gc(5,"input",23),b.oc("ngModelChange",(function(t){return b.Sc(n),b.sc(2).form.count_min_pines=t})),b.tc(6,"translate"),b.fc(),b.gc(7,"mat-icon",24),b.ed(8,"vpn_key"),b.fc(),b.fc(),b.fc()}if(2&t){var o=b.sc(2);b.Lb(3),b.fd(b.uc(4,3,"forms.count_min_pines")),b.Lb(2),b.Ac("placeholder",b.uc(6,5,"forms.count_min_pines"))("ngModel",o.form.count_min_pines)}}function $(t,e){if(1&t){var n=b.hc();b.gc(0,"ion-col",10),b.gc(1,"mat-form-field",11),b.gc(2,"mat-label"),b.ed(3),b.tc(4,"translate"),b.fc(),b.gc(5,"input",23),b.oc("ngModelChange",(function(t){return b.Sc(n),b.sc(2).form.count_max_pines=t})),b.tc(6,"translate"),b.fc(),b.gc(7,"mat-icon",24),b.ed(8,"vpn_key"),b.fc(),b.fc(),b.fc()}if(2&t){var o=b.sc(2);b.Lb(3),b.fd(b.uc(4,3,"forms.count_max_pines")),b.Lb(2),b.Ac("placeholder",b.uc(6,5,"forms.count_max_pines"))("ngModel",o.form.count_max_pines)}}function H(t,e){if(1&t){var n=b.hc();b.gc(0,"ion-col",10),b.gc(1,"mat-form-field",11),b.gc(2,"mat-label"),b.ed(3),b.tc(4,"translate"),b.fc(),b.gc(5,"input",23),b.oc("ngModelChange",(function(t){return b.Sc(n),b.sc(2).form.count_min_libraries=t})),b.tc(6,"translate"),b.fc(),b.gc(7,"mat-icon",24),b.ed(8,"vpn_key"),b.fc(),b.fc(),b.fc()}if(2&t){var o=b.sc(2);b.Lb(3),b.fd(b.uc(4,3,"forms.count_min_libraries")),b.Lb(2),b.Ac("placeholder",b.uc(6,5,"forms.count_min_libraries"))("ngModel",o.form.count_min_libraries)}}function Y(t,e){if(1&t){var n=b.hc();b.gc(0,"ion-col",10),b.gc(1,"mat-form-field",11),b.gc(2,"mat-label"),b.ed(3),b.tc(4,"translate"),b.fc(),b.gc(5,"input",23),b.oc("ngModelChange",(function(t){return b.Sc(n),b.sc(2).form.count_max_libraries=t})),b.tc(6,"translate"),b.fc(),b.gc(7,"mat-icon",24),b.ed(8,"vpn_key"),b.fc(),b.fc(),b.fc()}if(2&t){var o=b.sc(2);b.Lb(3),b.fd(b.uc(4,3,"forms.count_max_libraries")),b.Lb(2),b.Ac("placeholder",b.uc(6,5,"forms.count_max_libraries"))("ngModel",o.form.count_max_libraries)}}function G(t,e){if(1&t&&(b.gc(0,"ng-option",16),b.ed(1),b.fc()),2&t){var n=e.$implicit;b.Ac("value",n.id),b.Lb(1),b.fd(n.name)}}function U(t,e){if(1&t){var n=b.hc();b.gc(0,"ion-col",10),b.gc(1,"ng-select",25),b.oc("ngModelChange",(function(t){return b.Sc(n),b.sc(2).form.country_id=t}))("change",(function(){b.Sc(n);var t=b.sc(2);return t.getStates(t.form.country_id)})),b.tc(2,"translate"),b.cd(3,G,2,2,"ng-option",15),b.fc(),b.fc()}if(2&t){var o=b.sc(2);b.Lb(1),b.Ac("ngModel",o.form.country_id)("placeholder",b.uc(2,3,"forms.country")),b.Lb(2),b.Ac("ngForOf",o.countries)}}function N(t,e){if(1&t&&(b.gc(0,"ng-option",16),b.ed(1),b.fc()),2&t){var n=e.$implicit;b.Ac("value",n.id),b.Lb(1),b.fd(n.name)}}function Q(t,e){if(1&t){var n=b.hc();b.gc(0,"ion-col",10),b.gc(1,"ng-select",25),b.oc("ngModelChange",(function(t){return b.Sc(n),b.sc(2).form.state_id=t}))("change",(function(){b.Sc(n);var t=b.sc(2);return t.getCities(t.form.state_id)})),b.tc(2,"translate"),b.cd(3,N,2,2,"ng-option",15),b.fc(),b.fc()}if(2&t){var o=b.sc(2);b.Lb(1),b.Ac("ngModel",o.form.state_id)("placeholder",b.uc(2,3,"forms.state")),b.Lb(2),b.Ac("ngForOf",o.states)}}function W(t,e){if(1&t&&(b.gc(0,"ng-option",16),b.ed(1),b.fc()),2&t){var n=e.$implicit;b.Ac("value",n.id),b.Lb(1),b.fd(n.name)}}function Z(t,e){if(1&t){var n=b.hc();b.gc(0,"ion-col",10),b.gc(1,"ng-select",25),b.oc("ngModelChange",(function(t){return b.Sc(n),b.sc(2).form.city_id=t}))("change",(function(){b.Sc(n);var t=b.sc(2);return t.getSchools(t.form.city_id)})),b.tc(2,"translate"),b.cd(3,W,2,2,"ng-option",15),b.fc(),b.fc()}if(2&t){var o=b.sc(2);b.Lb(1),b.Ac("ngModel",o.form.city_id)("placeholder",b.uc(2,3,"forms.city")),b.Lb(2),b.Ac("ngForOf",o.cities)}}function V(t,e){if(1&t&&(b.gc(0,"ng-option",16),b.ed(1),b.fc()),2&t){var n=e.$implicit;b.Ac("value",n.id),b.Lb(1),b.fd(n.name)}}function X(t,e){if(1&t){var n=b.hc();b.gc(0,"ion-col",10),b.gc(1,"ng-select",26),b.oc("ngModelChange",(function(t){return b.Sc(n),b.sc(2).form.school_id=t})),b.tc(2,"translate"),b.cd(3,V,2,2,"ng-option",15),b.fc(),b.fc()}if(2&t){var o=b.sc(2);b.Lb(1),b.Ac("ngModel",o.form.school_id)("placeholder",b.uc(2,3,"forms.school")),b.Lb(2),b.Ac("ngForOf",o.schools)}}function J(t,e){if(1&t){var n=b.hc();b.gc(0,"ion-col",10),b.gc(1,"mat-form-field",11),b.gc(2,"mat-label"),b.ed(3),b.tc(4,"translate"),b.fc(),b.gc(5,"mat-select",13),b.oc("ngModelChange",(function(t){return b.Sc(n),b.sc(2).form.have_connect_days=t})),b.gc(6,"mat-option",14),b.ed(7),b.tc(8,"translate"),b.fc(),b.gc(9,"mat-option",27),b.ed(10),b.tc(11,"translate"),b.fc(),b.gc(12,"mat-option",28),b.ed(13),b.tc(14,"translate"),b.fc(),b.fc(),b.fc(),b.fc()}if(2&t){var o=b.sc(2);b.Lb(3),b.fd(b.uc(4,5,"pages.reports.activity")),b.Lb(2),b.Ac("ngModel",o.form.have_connect_days),b.Lb(2),b.fd(b.uc(8,7,"statuses.all")),b.Lb(3),b.fd(b.uc(11,9,"pages.reports.connect_today")),b.Lb(3),b.fd(b.uc(14,11,"pages.reports.connect_many_day"))}}function K(t,e){if(1&t){var n=b.hc();b.gc(0,"ion-col",10),b.gc(1,"mat-form-field",11),b.gc(2,"mat-label"),b.ed(3),b.tc(4,"translate"),b.fc(),b.gc(5,"mat-select",13),b.oc("ngModelChange",(function(t){return b.Sc(n),b.sc(2).form.mode_library_or_book=t})),b.gc(6,"mat-option",14),b.ed(7),b.tc(8,"translate"),b.fc(),b.gc(9,"mat-option",29),b.ed(10),b.tc(11,"translate"),b.fc(),b.gc(12,"mat-option",30),b.ed(13),b.tc(14,"translate"),b.fc(),b.fc(),b.fc(),b.fc()}if(2&t){var o=b.sc(2);b.Lb(3),b.fd(b.uc(4,5,"pages.reports.mode_library_or_book")),b.Lb(2),b.Ac("ngModel",o.form.mode_library_or_book),b.Lb(2),b.fd(b.uc(8,7,"statuses.all")),b.Lb(3),b.fd(b.uc(11,9,"pages.reports.alone_users_libraries")),b.Lb(3),b.fd(b.uc(14,11,"pages.reports.alone_users_books"))}}function tt(t,e){if(1&t&&b.bc(0,"ion-icon",34),2&t){var n=b.sc().$implicit;b.Ac("name",n.icon)}}function et(t,e){if(1&t){var n=b.hc();b.ec(0),b.gc(1,"ion-button",32),b.oc("click",(function(){b.Sc(n);var t=e.$implicit;return b.sc(3).execBtn(t.mode)})),b.cd(2,tt,1,1,"ion-icon",33),b.ed(3),b.tc(4,"translate"),b.fc(),b.dc()}if(2&t){var o=e.$implicit;b.Lb(1),b.Ac("color",o.color)("disabled",o.disabled)("size",o.size),b.Lb(1),b.Ac("ngIf",o.icon),b.Lb(1),b.gd(" ",b.uc(4,5,o.title),"")}}function nt(t,e){if(1&t&&(b.ec(0),b.cd(1,et,5,7,"ng-container",31),b.dc()),2&t){var n=b.sc(2);b.Lb(1),b.Ac("ngForOf",n.buttons)}}function ot(t,e){if(1&t){var n=b.hc();b.gc(0,"ion-button",35),b.oc("click",(function(){return b.Sc(n),b.sc(2).resetForm()})),b.bc(1,"ion-icon",36),b.ed(2),b.tc(3,"translate"),b.fc()}2&t&&(b.Lb(2),b.gd(" ",b.uc(3,1,"forms.reset"),""))}function at(t,e){if(1&t&&(b.gc(0,"ion-card-content",6),b.gc(1,"ion-grid"),b.gc(2,"ion-row"),b.cd(3,z,7,7,"ion-col",7),b.cd(4,q,7,7,"ion-col",7),b.cd(5,F,10,8,"ion-col",7),b.cd(6,T,15,13,"ion-col",7),b.fc(),b.gc(7,"ion-row"),b.cd(8,B,9,6,"ion-col",7),b.cd(9,j,9,6,"ion-col",7),b.fc(),b.gc(10,"ion-row"),b.cd(11,E,9,7,"ion-col",7),b.cd(12,$,9,7,"ion-col",7),b.cd(13,H,9,7,"ion-col",7),b.cd(14,Y,9,7,"ion-col",7),b.fc(),b.gc(15,"ion-row"),b.cd(16,U,4,5,"ion-col",7),b.cd(17,Q,4,5,"ion-col",7),b.cd(18,Z,4,5,"ion-col",7),b.cd(19,X,4,5,"ion-col",7),b.fc(),b.gc(20,"ion-row"),b.cd(21,J,15,13,"ion-col",7),b.cd(22,K,15,13,"ion-col",7),b.fc(),b.fc(),b.cd(23,nt,2,1,"ng-container",8),b.cd(24,ot,4,3,"ion-button",9),b.fc()),2&t){var n=b.sc();b.Lb(3),b.Ac("ngIf",n.required.last_name),b.Lb(1),b.Ac("ngIf",n.required.first_name),b.Lb(1),b.Ac("ngIf",n.required.roles),b.Lb(1),b.Ac("ngIf",n.required.status),b.Lb(2),b.Ac("ngIf",n.required.start_date),b.Lb(1),b.Ac("ngIf",n.required.end_date),b.Lb(2),b.Ac("ngIf",n.required.count_min_pines),b.Lb(1),b.Ac("ngIf",n.required.count_max_pines),b.Lb(1),b.Ac("ngIf",n.required.count_min_libraries),b.Lb(1),b.Ac("ngIf",n.required.count_max_libraries),b.Lb(2),b.Ac("ngIf",n.required.countries),b.Lb(1),b.Ac("ngIf",n.required.states),b.Lb(1),b.Ac("ngIf",n.required.cities),b.Lb(1),b.Ac("ngIf",n.required.schools),b.Lb(2),b.Ac("ngIf",n.required.have_connect_days),b.Lb(1),b.Ac("ngIf",n.required.mode_library_or_book),b.Lb(1),b.Ac("ngIf",n.buttons),b.Lb(1),b.Ac("ngIf",n.button_reset)}}var ct,it=((ct=function(){function t(e,n,o){_classCallCheck(this,t),this.publicService=e,this.globalService=n,this.applyFiltersModeService=o,this.required={},this.roles=[],this.countries=[],this.states=[],this.cities=[],this.schools=[],this.buttons=[],this.button_reset=!0,this.moment=x,this.form={role_id:null,end_date:null,start_date:null,count_min_pines:null,count_max_pines:null,county_id:null,state_id:null,city_id:null,school_id:null,filter_start_date:null,filter_end_date:null,status:"all",last_name:"",first_name:"",have_connect_days:"all",mode_library_or_book:"all"}}return _createClass(t,[{key:"ngOnInit",value:function(){this.getRequiredForms()}},{key:"getRequiredForms",value:function(){1==this.required.roles&&this.getRoles(),1==this.required.countries&&this.getCountries()}},{key:"getRoles",value:function(){var t=this;this.publicService.getRoles().subscribe((function(e){t.roles=e.data}),(function(t){}))}},{key:"getCountries",value:function(){var t=this;this.globalService.getCountries().subscribe((function(e){t.countries=e.data}))}},{key:"getStates",value:function(t){var e=this;if(1!=this.required.states)return!1;this.globalService.getStates(t).subscribe((function(t){e.states=t.data}))}},{key:"getCities",value:function(t){var e=this;if(1!=this.required.cities)return!1;this.globalService.getCities(t).subscribe((function(t){e.cities=t.data}))}},{key:"getSchools",value:function(t){var e=this;if(1!=this.required.schools)return!1;this.globalService.getSchools(t).subscribe((function(t){e.schools=t.data}))}},{key:"execBtn",value:function(t){this.form.start_date=null,this.form.end_date=null,this.form.filter_start_date&&(this.form.start_date=this.moment(this.form.filter_start_date).format("YYYY-MM-DD")),this.form.filter_end_date&&(this.form.end_date=this.moment(this.form.filter_end_date).format("YYYY-MM-DD")),this.applyFiltersModeService.send({filters:this.form,mode:t})}},{key:"resetForm",value:function(){this.form={role_id:null,end_date:null,start_date:null,count_min_pines:null,count_max_pines:null,county_id:null,state_id:null,city_id:null,school_id:null,filter_start_date:null,filter_end_date:null,status:"all",last_name:"",first_name:"",have_connect_days:"all",mode_library_or_book:"all"}}}]),t}()).\u0275fac=function(t){return new(t||ct)(b.ac(w.a),b.ac(C.a),b.ac(v.a))},ct.\u0275cmp=b.Ub({type:ct,selectors:[["filters-users"]],inputs:{required:"required",buttons:"buttons",button_reset:"button_reset"},decls:9,vars:4,consts:[[1,"mt-2","no-padding-small-500"],["hideToggle",""],[2,"padding","0"],[2,"width","100%"],["name","filter-outline"],["class","padding-small-sm",4,"ngIf"],[1,"padding-small-sm"],["size","12","size-sm","6","size-md","4","size-xl","3",4,"ngIf"],[4,"ngIf"],["color","medium","size","small",3,"click",4,"ngIf"],["size","12","size-sm","6","size-md","4","size-xl","3"],["appearance","legacy"],["matInput","",3,"placeholder","ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],["value","all"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["value","active"],["value","inactive"],["matInput","",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],["pickerStart",""],["pickerEnd",""],["matInput","","type","number",3,"placeholder","ngModel","ngModelChange"],["matSuffix",""],["appendTo","body",3,"ngModel","placeholder","ngModelChange","change"],["appendTo","body",3,"ngModel","placeholder","ngModelChange"],["value","today"],["value","all_days"],["value","libraries"],["value","books"],[4,"ngFor","ngForOf"],[3,"color","disabled","size","click"],[3,"name",4,"ngIf"],[3,"name"],["color","medium","size","small",3,"click"],["name","refresh-outline"]],template:function(t,e){1&t&&(b.gc(0,"ion-card",0),b.gc(1,"mat-expansion-panel",1),b.gc(2,"mat-expansion-panel-header",2),b.gc(3,"mat-panel-title"),b.gc(4,"ion-item",3),b.bc(5,"ion-icon",4),b.ed(6),b.tc(7,"translate"),b.fc(),b.fc(),b.fc(),b.cd(8,at,25,18,"ion-card-content",5),b.fc(),b.fc()),2&t&&(b.Lb(6),b.gd(" ",b.uc(7,2,"forms.filter")," "),b.Lb(2),b.Ac("ngIf",e.required))},directives:[l.m,k.c,k.g,k.h,l.H,l.C,r.t,l.n,l.A,l.gb,l.t,M.c,M.g,L.b,s.c,s.r,s.u,O.a,P.o,r.s,A.f,A.h,M.j,A.d,s.x,S.a,I.a,I.o,l.k],pipes:[D.d],styles:[""]}),ct),rt=n("bv9b"),st=n("YTC1");function lt(t,e){1&t&&b.bc(0,"mat-progress-bar",18)}function dt(t,e){1&t&&b.bc(0,"card-load-animation",19),2&t&&b.Ac("count",1)("all_width",!0)}function ut(t,e){1&t&&b.bc(0,"card-load-animation",19),2&t&&b.Ac("count",1)("all_width",!0)}function gt(t,e){1&t&&b.bc(0,"card-load-animation",19),2&t&&b.Ac("count",1)("all_width",!0)}function ft(t,e){1&t&&b.bc(0,"card-load-animation",19),2&t&&b.Ac("count",1)("all_width",!0)}function pt(t,e){1&t&&b.bc(0,"card-load-animation",19),2&t&&b.Ac("count",1)("all_width",!0)}function bt(t,e){1&t&&b.bc(0,"card-load-animation",19),2&t&&b.Ac("count",1)("all_width",!0)}function ht(t,e){1&t&&b.bc(0,"card-load-animation",19),2&t&&b.Ac("count",1)("all_width",!0)}function mt(t,e){1&t&&(b.gc(0,"h2",8),b.ed(1),b.tc(2,"translate"),b.fc()),2&t&&(b.Lb(1),b.fd(b.uc(2,1,"forms.no_data")))}function _t(t,e){if(1&t&&(b.gc(0,"ion-col",23),b.gc(1,"ion-card",11),b.gc(2,"ion-card-header"),b.gc(3,"ion-card-title"),b.ed(4),b.tc(5,"translate"),b.fc(),b.fc(),b.gc(6,"ion-card-content",12),b.cd(7,ht,1,2,"card-load-animation",13),b.gc(8,"div",14),b.gc(9,"canvas",15),b.ed(10),b.fc(),b.fc(),b.cd(11,mt,3,3,"h2",24),b.fc(),b.fc(),b.fc()),2&t){var n=e.$implicit,o=b.sc(2);b.Lb(4),b.gd(" ",b.uc(5,6,n.title)," "),b.Lb(3),b.Ac("ngIf",o.loading||o.loadingCharts&&null==n.chart_graph),b.Lb(1),b.Ac("ngClass",o.loading||null==n.chart_graph||0==n.data.length?"d-none":""),b.Lb(1),b.Ac("id",n._id),b.Lb(1),b.fd(n.chart_graph),b.Lb(1),b.Ac("ngIf",0==n.data.length)}}function vt(t,e){if(1&t&&(b.gc(0,"ion-row"),b.gc(1,"ion-col",20),b.gc(2,"h3",21),b.ed(3),b.tc(4,"translate"),b.fc(),b.fc(),b.cd(5,_t,12,8,"ion-col",22),b.fc()),2&t){var n=e.$implicit;b.Lb(3),b.fd(b.uc(4,2,n.title)),b.Lb(2),b.Ac("ngForOf",n.items)}}function yt(t,e){1&t&&b.bc(0,"card-load-animation",19),2&t&&b.Ac("count",1)("all_width",!0)}function kt(t,e){1&t&&(b.gc(0,"h2",8),b.ed(1),b.tc(2,"translate"),b.fc()),2&t&&(b.Lb(1),b.fd(b.uc(2,1,"forms.no_data")))}function xt(t,e){if(1&t&&(b.gc(0,"ion-col",23),b.gc(1,"ion-card",11),b.gc(2,"ion-card-header"),b.gc(3,"ion-card-title"),b.ed(4),b.tc(5,"translate"),b.fc(),b.fc(),b.gc(6,"ion-card-content",12),b.cd(7,yt,1,2,"card-load-animation",13),b.gc(8,"div",14),b.gc(9,"canvas",15),b.ed(10),b.fc(),b.fc(),b.cd(11,kt,3,3,"h2",24),b.fc(),b.fc(),b.fc()),2&t){var n=e.$implicit,o=b.sc(2);b.Lb(4),b.gd(" ",b.uc(5,6,n.title)," "),b.Lb(3),b.Ac("ngIf",o.loading||o.loadingCharts&&null==n.chart_graph),b.Lb(1),b.Ac("ngClass",o.loading||null==n.chart_graph||0==n.data.length?"d-none":""),b.Lb(1),b.Ac("id",n._id),b.Lb(1),b.fd(n.chart_graph),b.Lb(1),b.Ac("ngIf",0==n.data.length)}}function Ct(t,e){if(1&t&&(b.gc(0,"ion-row"),b.gc(1,"ion-col",20),b.gc(2,"h3",21),b.ed(3),b.tc(4,"translate"),b.fc(),b.fc(),b.cd(5,xt,12,8,"ion-col",22),b.fc()),2&t){var n=e.$implicit;b.Lb(3),b.fd(b.uc(4,2,n.title)),b.Lb(2),b.Ac("ngForOf",n.items)}}var wt,Mt=((wt=function(){function t(e,n,o){_classCallCheck(this,t),this.reportUserService=e,this.applyFiltersModeService=n,this.controlErroresService=o,this.loading=!1,this.scrollbarStyle=g.a.scrollbarStyle,this.button_donwload_series={color:"danger",size:"small",mode:"download",icon:"cloud-download-outline",disabled:!1,title:"buttons.download"},this.button_export_series={color:"success",size:"small",mode:"export-series",icon:"download-outline",disabled:!1,title:"buttons.export"},this.button_search={color:"warning",size:"small",mode:"search",disabled:!1,title:"buttons.search",icon:"search-outline"},this.button_search_holguin={color:"warning",size:"small",mode:"search-holguin",disabled:!1,title:"buttons.search",icon:"search-outline"},this.button_donwload_holguin={color:"danger",size:"small",mode:"download-holguin",icon:"cloud-download-outline",disabled:!1,title:"buttons.download"},this.button_export_holguin={color:"success",size:"small",mode:"export-holguin",icon:"download-outline",disabled:!1,title:"buttons.export"},this.button_donwload_teacher={color:"danger",size:"small",mode:"download-teacher",icon:"cloud-download-outline",disabled:!1,title:"buttons.download"},this.button_export_teacher={color:"success",size:"small",mode:"export-teacher",icon:"download-outline",disabled:!1,title:"buttons.export"},this.button_search_teacher={color:"warning",size:"small",mode:"search-teacher",disabled:!1,title:"buttons.search",icon:"search-outline"},this.loadingCharts=!1,this.charts={all_qualificated:null,all_unqualified:null,book_qualificated:null,book_unqualified:null,course_qualificated:null,course_unqualified:null,holguin_all:null,holguin_qualificated:null,holguin_unqualified:null,holguin_punctuaction_all:null,holguin_punctuaction_qualificated:null,holguin_punctuaction_unqualified:null,all_teachers_qualificated:null,task_teachers_qualificated:null,quiz_teachers_qualificated:null,videoquiz_teachers_qualificated:null,teachers_punctuaction_all:null,teachers_punctuaction_qualificated:null,teachers_punctuaction_unqualified:null},this.graphsCircles={holguin:[],teacher:[]},this.buttons_filters=[this.button_search,this.button_donwload_series,this.button_export_series],this.buttons_filters_holguin=[this.button_search_holguin,this.button_donwload_holguin,this.button_export_holguin],this.buttons_filters_teacher=[this.button_search_teacher,this.button_donwload_teacher,this.button_export_teacher],this.allowFilters={end_date:1,start_date:1}}return _createClass(t,[{key:"ngOnDestroy",value:function(){this.filtersRxjs.unsubscribe()}},{key:"ngOnInit",value:function(){var t=this;this.filtersRxjs=this.applyFiltersModeService.get$().subscribe((function(e){t.applyFilters(e)})),this.getData({}),this.getAvgGroupQualifications("holguin",{}),this.getAvgGroupQualifications("teacher",{})}},{key:"getData",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.loading=!0,this.reportUserService.getTimeSeries(e).subscribe((function(e){t.loading=!1,t.loadingCharts=!0;var n,o=_createForOfIteratorHelper(e.data);try{for(o.s();!(n=o.n()).done;){var a=n.value;try{t.loadGraficoGeneral(a._el,a.data.map((function(t){return t.date_format})),a.data.map((function(t){return t.avg})),a.title,a._id)}catch(c){}}}catch(i){o.e(i)}finally{o.f()}t.loadingCharts=!1}),(function(e){t.loading=!1,t.controlErroresService.control(e)}))}},{key:"getAvgGroupQualifications",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,this.reportUserService.getAvgGroupQualifications(t,n).subscribe((function(n){e.loading=!1,e.graphsCircles[t]=n.data,e.loadingCharts=!0,setTimeout((function(){var n,o=_createForOfIteratorHelper(e.graphsCircles[t]);try{for(o.s();!(n=o.n()).done;){var a,c=_createForOfIteratorHelper(n.value.items);try{for(c.s();!(a=c.n()).done;){var i=a.value;try{e.loadGraficoGeneralPie(i,i.data.map((function(t){return t.qualification_range})),i.data.map((function(t){return t.count})),i.data.map((function(t){return t.color})))}catch(r){}}}catch(s){c.e(s)}finally{c.f()}}}catch(s){o.e(s)}finally{o.f()}e.loadingCharts=!1}),2e3)}),(function(t){e.loading=!1,e.controlErroresService.control(t)}))}},{key:"applyFilters",value:function(t){if(!t)return!1;if(!t.mode||!t.filters)return!1;switch(t.mode){case"search":this.getData(t.filters);break;case"search-holguin":this.getAvgGroupQualifications("holguin",t.filters);break;case"download":this.downloadData(this.reportUserService.getTimeSeriesDownload(t.filters));break;case"export-series":this.exportDataSeries(this.reportUserService.exportTimeSeries(t.filters));break;case"download-holguin":this.downloadData(this.reportUserService.downloadAvgGroupQualifications("holguin",t.filters));break;case"export-holguin":this.exportDataSeries(this.reportUserService.exportAvgGroupQualifications("holguin",t.filters));break;case"search-teacher":this.getAvgGroupQualifications("teacher",t.filters);break;case"download-teacher":this.downloadData(this.reportUserService.downloadAvgGroupQualifications("teacher",t.filters));break;case"export-teacher":this.exportDataSeries(this.reportUserService.exportAvgGroupQualifications("teacher",t.filters))}}},{key:"exportDataSeries",value:function(t){var e=this;this.button_export_series.disabled=!0,this.loading=!0,t.subscribe((function(t){e.loading=!1,e.button_export_series.disabled=!1;var n=new Blob([t],{type:t.type}),o=e.toExportFileName("Serie de tiempo de la evoluci\xf3n del aprendizaje","xlsx");Object(_.saveAs)(n,o)}),(function(t){e.button_export_series.disabled=!1,e.controlErroresService.control(t),e.loading=!1}))}},{key:"downloadData",value:function(t){var e=this;this.button_donwload_series.disabled=!0,this.loading=!0,t.subscribe((function(t){e.loading=!1;var n=new Blob([t],{type:t.type}),o=e.toExportFileName("Serie de tiempo de la evoluci\xf3n del aprendizaje  ","pdf");e.button_donwload_series.disabled=!1,Object(_.saveAs)(n,o)}),(function(t){e.button_donwload_series.disabled=!1,e.controlErroresService.control(t),e.loading=!1}))}},{key:"toExportFileName",value:function(t,e){return"".concat(t,"_").concat((new Date).getTime(),".").concat(e)}},{key:"loadGraficoGeneral",value:function(t,e,n,o,a){null!=this.charts[t]&&this.charts[t].destroy(),n.length>0&&(console.clear(),console.log(t,e,n,o,a)),this.charts[t]=new u.a(a,{type:"line",data:{labels:e,datasets:[{label:o,data:n,backgroundColor:"rgba(0, 156, 224, 1)",borderColor:"rgba(0, 156, 224, 1)",borderWidth:1}]},options:{scales:{y:{beginAtZero:!0}}}}),this.charts[t].update()}},{key:"loadGraficoGeneralPie",value:function(t,e,n,o){null!=t.chart_graph&&t.chart_graph.destroy(),t.chart_graph=new u.a(t._id,{type:"pie",data:{labels:e,datasets:[{label:t.title,data:n,backgroundColor:o,borderColor:"rgba(0, 156, 224, 1)",borderWidth:1}]},options:{responsive:!0,plugins:{legend:{position:"top"},tooltip:{callbacks:{label:function(t){return t.parsed+""}}}}}}),t.chart_graph.update()}}]),t}()).\u0275fac=function(t){return new(t||wt)(b.ac(m),b.ac(v.a),b.ac(f.a))},wt.\u0275cmp=b.Ub({type:wt,selectors:[["app-activities-report-admin"]],decls:123,vars:79,consts:[["translucent","true"],["slot","start"],["mode","indeterminate",4,"ngIf"],["fullscreen","true",3,"scrollbar"],["hideToggle","","expanded","true"],[2,"padding","0"],[2,"width","100%"],["name","bar-chart-outline"],[1,"text-center"],[3,"required","buttons"],["size","12","size-sm","6"],[1,"mt-2","no-padding-small-500"],[1,"padding-small-sm"],[3,"count","all_width",4,"ngIf"],[3,"ngClass"],[3,"id"],["name","pie-chart-outline"],[4,"ngFor","ngForOf"],["mode","indeterminate"],[3,"count","all_width"],["size","12"],[1,"text-center","bold"],["size","12","size-sm","6","size-md","4","size-xl","3",4,"ngFor","ngForOf"],["size","12","size-sm","6","size-md","4","size-xl","3"],["class","text-center",4,"ngIf"]],template:function(t,e){1&t&&(b.gc(0,"ion-header",0),b.gc(1,"ion-toolbar"),b.gc(2,"ion-buttons",1),b.bc(3,"ion-menu-button"),b.fc(),b.gc(4,"ion-title"),b.ed(5),b.tc(6,"translate"),b.fc(),b.fc(),b.cd(7,lt,1,0,"mat-progress-bar",2),b.fc(),b.gc(8,"ion-content",3),b.gc(9,"mat-expansion-panel",4),b.gc(10,"mat-expansion-panel-header",5),b.gc(11,"mat-panel-title"),b.gc(12,"ion-item",6),b.bc(13,"ion-icon",7),b.ed(14),b.tc(15,"translate"),b.fc(),b.fc(),b.fc(),b.gc(16,"div"),b.gc(17,"h3",8),b.ed(18),b.tc(19,"translate"),b.fc(),b.bc(20,"filters-users",9),b.gc(21,"ion-grid"),b.gc(22,"ion-row"),b.gc(23,"ion-col",10),b.gc(24,"ion-card",11),b.gc(25,"ion-card-header"),b.gc(26,"ion-card-title"),b.ed(27),b.tc(28,"translate"),b.fc(),b.fc(),b.gc(29,"ion-card-content",12),b.cd(30,dt,1,2,"card-load-animation",13),b.gc(31,"div",14),b.gc(32,"canvas",15),b.ed(33),b.fc(),b.fc(),b.fc(),b.fc(),b.fc(),b.gc(34,"ion-col",10),b.gc(35,"ion-card",11),b.gc(36,"ion-card-header"),b.gc(37,"ion-card-title"),b.ed(38),b.tc(39,"translate"),b.fc(),b.fc(),b.gc(40,"ion-card-content",12),b.cd(41,ut,1,2,"card-load-animation",13),b.gc(42,"div",14),b.gc(43,"canvas",15),b.ed(44),b.fc(),b.fc(),b.fc(),b.fc(),b.fc(),b.fc(),b.fc(),b.gc(45,"h3",8),b.ed(46),b.tc(47,"translate"),b.fc(),b.gc(48,"ion-grid"),b.gc(49,"ion-row"),b.gc(50,"ion-col",10),b.gc(51,"ion-card",11),b.gc(52,"ion-card-header"),b.gc(53,"ion-card-title"),b.ed(54),b.tc(55,"translate"),b.fc(),b.fc(),b.gc(56,"ion-card-content",12),b.cd(57,gt,1,2,"card-load-animation",13),b.gc(58,"div",14),b.gc(59,"canvas",15),b.ed(60),b.fc(),b.fc(),b.fc(),b.fc(),b.fc(),b.gc(61,"ion-col",10),b.gc(62,"ion-card",11),b.gc(63,"ion-card-header"),b.gc(64,"ion-card-title"),b.ed(65),b.tc(66,"translate"),b.fc(),b.fc(),b.gc(67,"ion-card-content",12),b.cd(68,ft,1,2,"card-load-animation",13),b.gc(69,"div",14),b.gc(70,"canvas",15),b.ed(71),b.fc(),b.fc(),b.fc(),b.fc(),b.fc(),b.fc(),b.fc(),b.gc(72,"h3",8),b.ed(73),b.tc(74,"translate"),b.fc(),b.gc(75,"ion-grid"),b.gc(76,"ion-row"),b.gc(77,"ion-col",10),b.gc(78,"ion-card",11),b.gc(79,"ion-card-header"),b.gc(80,"ion-card-title"),b.ed(81),b.tc(82,"translate"),b.fc(),b.fc(),b.gc(83,"ion-card-content",12),b.cd(84,pt,1,2,"card-load-animation",13),b.gc(85,"div",14),b.gc(86,"canvas",15),b.ed(87),b.fc(),b.fc(),b.fc(),b.fc(),b.fc(),b.gc(88,"ion-col",10),b.gc(89,"ion-card",11),b.gc(90,"ion-card-header"),b.gc(91,"ion-card-title"),b.ed(92),b.tc(93,"translate"),b.fc(),b.fc(),b.gc(94,"ion-card-content",12),b.cd(95,bt,1,2,"card-load-animation",13),b.gc(96,"div",14),b.gc(97,"canvas",15),b.ed(98),b.fc(),b.fc(),b.fc(),b.fc(),b.fc(),b.fc(),b.fc(),b.fc(),b.fc(),b.gc(99,"mat-expansion-panel",4),b.gc(100,"mat-expansion-panel-header",5),b.gc(101,"mat-panel-title"),b.gc(102,"ion-item",6),b.bc(103,"ion-icon",16),b.ed(104),b.tc(105,"translate"),b.tc(106,"translate"),b.fc(),b.fc(),b.fc(),b.gc(107,"div"),b.bc(108,"filters-users",9),b.gc(109,"ion-grid"),b.cd(110,vt,6,4,"ion-row",17),b.fc(),b.fc(),b.fc(),b.gc(111,"mat-expansion-panel",4),b.gc(112,"mat-expansion-panel-header",5),b.gc(113,"mat-panel-title"),b.gc(114,"ion-item",6),b.bc(115,"ion-icon",16),b.ed(116),b.tc(117,"translate"),b.tc(118,"translate"),b.fc(),b.fc(),b.fc(),b.gc(119,"div"),b.bc(120,"filters-users",9),b.gc(121,"ion-grid"),b.cd(122,Ct,6,4,"ion-row",17),b.fc(),b.fc(),b.fc(),b.fc()),2&t&&(b.Lb(5),b.gd(" ",b.uc(6,49,"pages.reports.activity_reports"),""),b.Lb(2),b.Ac("ngIf",e.loading),b.Lb(1),b.Bc("scrollbar",e.scrollbarStyle),b.Lb(6),b.gd(" ",b.uc(15,51,"pages.reports.title_evolution_time")," "),b.Lb(4),b.fd(b.uc(19,53,"pages.reports.all")),b.Lb(2),b.Ac("required",e.allowFilters)("buttons",e.buttons_filters),b.Lb(7),b.gd(" ",b.uc(28,55,"pages.reports.activities_qualificated")," "),b.Lb(3),b.Ac("ngIf",e.loading||e.loadingCharts&&null==e.charts.all_qualificated),b.Lb(1),b.Ac("ngClass",e.loading||null==e.charts.all_qualificated?"d-none":""),b.Lb(1),b.Ac("id","chart_all_qualificated"),b.Lb(1),b.fd(e.charts.all_qualificated),b.Lb(5),b.gd(" ",b.uc(39,57,"pages.reports.activities_unqualified")," "),b.Lb(3),b.Ac("ngIf",e.loading||e.loadingCharts&&null==e.charts.all_unqualified),b.Lb(1),b.Ac("ngClass",e.loading||null==e.charts.all_unqualified?"d-none":""),b.Lb(1),b.Ac("id","chart_all_unqualified"),b.Lb(1),b.fd(e.charts.all_unqualified),b.Lb(2),b.fd(b.uc(47,59,"pages.reports.books")),b.Lb(8),b.gd(" ",b.uc(55,61,"pages.reports.activities_qualificated")," "),b.Lb(3),b.Ac("ngIf",e.loading||e.loadingCharts&&null==e.charts.book_qualificated),b.Lb(1),b.Ac("ngClass",e.loading||null==e.charts.book_qualificated?"d-none":""),b.Lb(1),b.Ac("id","chart_book_qualificated"),b.Lb(1),b.fd(e.charts.book_qualificated),b.Lb(5),b.gd(" ",b.uc(66,63,"pages.reports.activities_unqualified")," "),b.Lb(3),b.Ac("ngIf",e.loading||e.loadingCharts&&null==e.charts.book_unqualified),b.Lb(1),b.Ac("ngClass",e.loading||null==e.charts.book_unqualified?"d-none":""),b.Lb(1),b.Ac("id","chart_book_unqualified"),b.Lb(1),b.fd(e.charts.book_unqualified),b.Lb(2),b.fd(b.uc(74,65,"pages.reports.teachers")),b.Lb(8),b.gd(" ",b.uc(82,67,"pages.reports.activities_unqualified")," "),b.Lb(3),b.Ac("ngIf",e.loading||e.loadingCharts&&null==e.charts.course_qualificated),b.Lb(1),b.Ac("ngClass",e.loading||null==e.charts.course_qualificated?"d-none":""),b.Lb(1),b.Ac("id","chart_course_qualificated"),b.Lb(1),b.fd(e.charts.course_qualificated),b.Lb(5),b.gd(" ",b.uc(93,69,"pages.reports.activities_qualificated")," "),b.Lb(3),b.Ac("ngIf",e.loading||e.loadingCharts&&null==e.charts.course_unqualified),b.Lb(1),b.Ac("ngClass",e.loading||null==e.charts.course_unqualified?"d-none":""),b.Lb(1),b.Ac("id","chart_course_unqualified"),b.Lb(1),b.fd(e.charts.course_unqualified),b.Lb(6),b.hd(" ",b.uc(105,71,"pages.reports.group_by_qualification")," - ",b.uc(106,73,"pages.reports.admin")," "),b.Lb(4),b.Ac("required",e.allowFilters)("buttons",e.buttons_filters_holguin),b.Lb(2),b.Ac("ngForOf",e.graphsCircles.holguin),b.Lb(6),b.hd(" ",b.uc(117,75,"pages.reports.group_by_qualification")," - ",b.uc(118,77,"pages.reports.teachers")," "),b.Lb(4),b.Ac("required",e.allowFilters)("buttons",e.buttons_filters_teacher),b.Lb(2),b.Ac("ngForOf",e.graphsCircles.teacher))},directives:[l.B,l.zb,l.l,l.R,l.xb,r.t,l.u,y.b,k.c,k.g,k.h,l.H,l.C,it,l.A,l.gb,l.t,l.m,l.o,l.q,l.n,r.q,r.s,rt.a,st.a],pipes:[D.d],styles:[""]}),wt),Lt=n("mrSG"),Ot=n("aa3j");function Pt(t,e){1&t&&b.bc(0,"mat-progress-bar",14)}function At(t,e){1&t&&b.bc(0,"card-load-animation",15),2&t&&b.Ac("count",1)("all_width",!0)}function St(t,e){1&t&&b.bc(0,"card-load-animation",15),2&t&&b.Ac("count",1)("all_width",!0)}function It(t,e){1&t&&b.bc(0,"card-load-animation",15),2&t&&b.Ac("count",1)("all_width",!0)}function Dt(t,e){1&t&&b.bc(0,"card-load-animation",15),2&t&&b.Ac("count",1)("all_width",!0)}function zt(t,e){1&t&&b.bc(0,"card-load-animation",15),2&t&&b.Ac("count",1)("all_width",!0)}var qt,Rt=((qt=function(){function t(e,n,o,a,c){_classCallCheck(this,t),this.navParams=e,this.applyFiltersModeService=n,this.reportService=o,this.controlErroresService=a,this.modalCtrl=c,this.scrollbarStyle=g.a.scrollbarStyle,this.loading=!1,this.buttons_filters=[{color:"warning",size:"small",mode:"find",disabled:!1,title:"buttons.search",icon:"search-outline"},{color:"danger",size:"small",mode:"download",icon:"cloud-download-outline",disabled:!1,title:"buttons.download"},{color:"success",size:"small",mode:"export",icon:"download-outline",disabled:!1,title:"buttons.export"}],this.charts={academic_performance:null,pines:null,views:null,download:null,printing:null},this.chart_father={chart:null},this.loadingCharts=!1,this.loadingBar=!1,this.book_id=e.data.book_id,this.allowFilters={end_date:1,start_date:1}}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.filterRxjs=this.applyFiltersModeService.get$().subscribe((function(e){t.applyFilters(e)})),this.findData()}},{key:"ngOnDestroy",value:function(){this.filterRxjs.unsubscribe()}},{key:"findData",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.loading=!0,this.loadingCharts=!0,this.reportService.avgQualificationBook(this.book_id,e).subscribe((function(e){t.loading=!1,t.book=e.data,t.loadGraficoGeneral("academic_performance",e.data.list_avg.map((function(t){return t.date_format})),e.data.list_avg.map((function(t){return t.count})),"Promedio de calificaciones","chart_academic_performance");try{t.loadGraficoGeneral("pines",e.data.data_month.map((function(t){return t.date_format})),e.data.data_month.map((function(t){return t.count})),"Activaciones","chart_pines_report")}catch(n){}try{t.loadGraficoGeneral("views",e.data.data_views.map((function(t){return t.date_format})),e.data.data_views.map((function(t){return t.count})),"Visualizaciones","chart_views_report")}catch(n){}try{t.loadGraficoGeneral("download",e.data.data_downloads.map((function(t){return t.date_format})),e.data.data_downloads.map((function(t){return t.count})),"Descargas","chart_download_report")}catch(n){}try{t.loadGraficoGeneral("printing",e.data.data_printing.map((function(t){return t.date_format})),e.data.data_printing.map((function(t){return t.count})),"Impresiones","chart_printing_report")}catch(n){}t.loadingCharts=!1}),(function(e){t.loading=!1,t.loadingCharts=!1,t.controlErroresService.control(e),t.dismiss()}))}},{key:"applyFilters",value:function(t){if(!t)return!1;if(!t.mode||!t.filters)return!1;switch(t.mode){case"find":this.findData(t.filters);break;case"download":this.downloadData(t.filters);break;case"export":this.exportData(t.filters)}}},{key:"exportData",value:function(t){var e=this;this.loadingBar=!0,this.reportService.exportAvgGroupQualificationsBook(this.book_id,t).subscribe((function(t){e.loadingBar=!1;var n=new Blob([t],{type:t.type}),o=e.toExportFileName("Estad\xedsticas del libro "+e.book.name,"xlsx");Object(_.saveAs)(n,o)}),(function(t){e.controlErroresService.control(t),e.loadingBar=!1}))}},{key:"downloadData",value:function(t){var e=this;this.loadingBar=!0,this.reportService.downloadAvgGroupQualificationsBook(this.book_id,t).subscribe((function(t){e.loadingBar=!1;var n=new Blob([t],{type:t.type}),o=e.toExportFileName("Estad\xedsticas del libro "+e.book.name,"pdf");Object(_.saveAs)(n,o)}),(function(t){e.controlErroresService.control(t),e.loadingBar=!1}))}},{key:"toExportFileName",value:function(t,e){return"".concat(t,"_").concat((new Date).getTime(),".").concat(e)}},{key:"dismiss",value:function(t){this.modalCtrl.dismiss(t)}},{key:"loadGraficoGeneral",value:function(t,e,n,o,a){null!=this.charts[t]&&this.charts[t].destroy(),this.charts[t]=new u.a(a,{type:"line",data:{labels:e,datasets:[{label:o,data:n,backgroundColor:"rgba(0, 156, 224, 1)",borderColor:"rgba(0, 156, 224, 1)",borderWidth:1}]},options:{scales:{y:{beginAtZero:!0}}}}),this.charts[t].update()}}]),t}()).\u0275fac=function(t){return new(t||qt)(b.ac(l.Fb),b.ac(v.a),b.ac(m),b.ac(f.a),b.ac(l.Db))},qt.\u0275cmp=b.Ub({type:qt,selectors:[["app-report-by-book-qualifications"]],decls:69,vars:43,consts:[["translucent","true"],["slot","end"],[3,"disabled","click"],["name","close-outline"],["mode","indeterminate",4,"ngIf"],["fullscreen","true",3,"scrollbar"],["content",""],[3,"required","buttons"],["size","12","size-sm","6"],[1,"mt-2","no-padding-small-500"],[1,"padding-small-sm"],[3,"count","all_width",4,"ngIf"],[3,"ngClass"],[3,"id"],["mode","indeterminate"],[3,"count","all_width"]],template:function(t,e){1&t&&(b.gc(0,"ion-header",0),b.gc(1,"ion-toolbar"),b.gc(2,"ion-title"),b.ed(3),b.tc(4,"translate"),b.fc(),b.gc(5,"ion-buttons",1),b.gc(6,"ion-button",2),b.oc("click",(function(){return e.dismiss()})),b.bc(7,"ion-icon",3),b.fc(),b.fc(),b.fc(),b.cd(8,Pt,1,0,"mat-progress-bar",4),b.fc(),b.gc(9,"ion-content",5,6),b.bc(11,"filters-users",7),b.gc(12,"ion-grid"),b.gc(13,"ion-row"),b.gc(14,"ion-col",8),b.gc(15,"ion-card",9),b.gc(16,"ion-card-header"),b.gc(17,"ion-card-title"),b.ed(18),b.tc(19,"translate"),b.fc(),b.fc(),b.gc(20,"ion-card-content",10),b.cd(21,At,1,2,"card-load-animation",11),b.gc(22,"div",12),b.gc(23,"canvas",13),b.ed(24),b.fc(),b.fc(),b.fc(),b.fc(),b.fc(),b.gc(25,"ion-col",8),b.gc(26,"ion-card",9),b.gc(27,"ion-card-header"),b.gc(28,"ion-card-title"),b.ed(29),b.tc(30,"translate"),b.fc(),b.fc(),b.gc(31,"ion-card-content",10),b.cd(32,St,1,2,"card-load-animation",11),b.gc(33,"div",12),b.gc(34,"canvas",13),b.ed(35),b.fc(),b.fc(),b.fc(),b.fc(),b.fc(),b.gc(36,"ion-col",8),b.gc(37,"ion-card",9),b.gc(38,"ion-card-header"),b.gc(39,"ion-card-title"),b.ed(40),b.tc(41,"translate"),b.fc(),b.fc(),b.gc(42,"ion-card-content",10),b.cd(43,It,1,2,"card-load-animation",11),b.gc(44,"div",12),b.gc(45,"canvas",13),b.ed(46),b.fc(),b.fc(),b.fc(),b.fc(),b.fc(),b.gc(47,"ion-col",8),b.gc(48,"ion-card",9),b.gc(49,"ion-card-header"),b.gc(50,"ion-card-title"),b.ed(51),b.tc(52,"translate"),b.fc(),b.fc(),b.gc(53,"ion-card-content",10),b.cd(54,Dt,1,2,"card-load-animation",11),b.gc(55,"div",12),b.gc(56,"canvas",13),b.ed(57),b.fc(),b.fc(),b.fc(),b.fc(),b.fc(),b.gc(58,"ion-col",8),b.gc(59,"ion-card",9),b.gc(60,"ion-card-header"),b.gc(61,"ion-card-title"),b.ed(62),b.tc(63,"translate"),b.fc(),b.fc(),b.gc(64,"ion-card-content",10),b.cd(65,zt,1,2,"card-load-animation",11),b.gc(66,"div",12),b.gc(67,"canvas",13),b.ed(68),b.fc(),b.fc(),b.fc(),b.fc(),b.fc(),b.fc(),b.fc(),b.fc()),2&t&&(b.Lb(3),b.gd(" ",null!=e.book?e.book.name:b.uc(4,31,"forms.loading_book")," "),b.Lb(3),b.Ac("disabled",e.loading),b.Lb(2),b.Ac("ngIf",e.loading||e.loadingBar),b.Lb(1),b.Bc("scrollbar",e.scrollbarStyle),b.Lb(2),b.Ac("required",e.allowFilters)("buttons",e.buttons_filters),b.Lb(7),b.gd(" ",b.uc(19,33,"buttons.academic_performance")," "),b.Lb(3),b.Ac("ngIf",e.loading||e.loadingCharts&&null==e.charts.academic_performance),b.Lb(1),b.Ac("ngClass",e.loading||null==e.charts.academic_performance?"d-none":""),b.Lb(1),b.Ac("id","chart_academic_performance"),b.Lb(1),b.fd(e.charts.academic_performance),b.Lb(5),b.gd(" ",b.uc(30,35,"pages.reports.activations_pines")," "),b.Lb(3),b.Ac("ngIf",e.loading||e.loadingCharts&&null==e.charts.pines),b.Lb(1),b.Ac("ngClass",e.loading||null==e.charts.pines?"d-none":""),b.Lb(1),b.Ac("id","chart_pines_report"),b.Lb(1),b.fd(e.charts.pines),b.Lb(5),b.gd(" ",b.uc(41,37,"pages.reports.views")," "),b.Lb(3),b.Ac("ngIf",e.loading||e.loadingCharts&&null==e.charts.views),b.Lb(1),b.Ac("ngClass",e.loading||null==e.charts.views?"d-none":""),b.Lb(1),b.Ac("id","chart_views_report"),b.Lb(1),b.fd(e.charts.views),b.Lb(5),b.gd(" ",b.uc(52,39,"pages.reports.download")," "),b.Lb(3),b.Ac("ngIf",e.loading||e.loadingCharts&&null==e.charts.download),b.Lb(1),b.Ac("ngClass",e.loading||null==e.charts.download?"d-none":""),b.Lb(1),b.Ac("id","chart_download_report"),b.Lb(1),b.fd(e.charts.download),b.Lb(5),b.gd(" ",b.uc(63,41,"pages.reports.pinting")," "),b.Lb(3),b.Ac("ngIf",e.loading||e.loadingCharts&&null==e.charts.printing),b.Lb(1),b.Ac("ngClass",e.loading||null==e.charts.printing?"d-none":""),b.Lb(1),b.Ac("id","chart_printing_report"),b.Lb(1),b.fd(e.charts.printing))},directives:[l.B,l.zb,l.xb,l.l,l.k,l.C,r.t,l.u,y.b,it,l.A,l.gb,l.t,l.m,l.o,l.q,l.n,r.q,rt.a,st.a],pipes:[D.d],styles:[""]}),qt),Ft=n("A9QR"),Tt=n("oOf3");function Bt(t,e){1&t&&(b.gc(0,"ion-buttons",23),b.bc(1,"ion-menu-button"),b.fc())}function jt(t,e){1&t&&(b.gc(0,"ion-title"),b.ed(1),b.tc(2,"translate"),b.fc()),2&t&&(b.Lb(1),b.fd(b.uc(2,1,"pages.reports.post_reports")))}function Et(t,e){if(1&t){var n=b.hc();b.gc(0,"ion-searchbar",24),b.oc("ngModelChange",(function(t){return b.Sc(n),b.sc().queryText=t}))("ionChange",(function(){return b.Sc(n),b.sc().searchItems(!0)}))("ionCancel",(function(){return b.Sc(n),b.sc().showSearchbar=!1})),b.tc(1,"translate"),b.fc()}if(2&t){var o=b.sc();b.Bc("placeholder",b.uc(1,2,"forms.search")),b.Ac("ngModel",o.queryText)}}function $t(t,e){if(1&t){var n=b.hc();b.gc(0,"ion-button",25),b.oc("click",(function(){return b.Sc(n),b.sc().showSearchbar=!0})),b.bc(1,"ion-icon",26),b.fc()}}function Ht(t,e){1&t&&b.bc(0,"mat-progress-bar",27)}function Yt(t,e){1&t&&b.bc(0,"card-load-animation",28),2&t&&b.Ac("count",1)("all_width",!0)}function Gt(t,e){1&t&&(b.gc(0,"div",29),b.bc(1,"img",30),b.fc())}function Ut(t,e){1&t&&(b.gc(0,"div",31),b.gc(1,"div",31),b.bc(2,"books-animations",32),b.tc(3,"translate"),b.fc(),b.fc()),2&t&&(b.Lb(2),b.Ac("$text",b.uc(3,1,"pages.book.books_not_found")))}function Nt(t,e){1&t&&b.bc(0,"card-load-animation",28),2&t&&b.Ac("count",1)("all_width",!0)}var Qt=function(t){return{backgroundImage:t,backgroundSize:"100% 100%"}};function Wt(t,e){if(1&t){var n=b.hc();b.gc(0,"ion-col",38),b.gc(1,"ion-card"),b.gc(2,"ion-card-content"),b.gc(3,"ion-grid"),b.gc(4,"ion-row"),b.gc(5,"ion-col",39),b.gc(6,"div",40),b.gc(7,"div",41),b.gc(8,"div",42),b.gc(9,"div",43),b.bc(10,"div",44),b.fc(),b.bc(11,"div",45),b.bc(12,"div",46),b.fc(),b.fc(),b.fc(),b.gc(13,"div",47),b.gc(14,"h3",48),b.ed(15),b.fc(),b.gc(16,"p",49),b.gc(17,"strong"),b.ed(18),b.tc(19,"translate"),b.fc(),b.ed(20),b.tc(21,"translate"),b.fc(),b.gc(22,"p",49),b.gc(23,"strong"),b.ed(24),b.tc(25,"translate"),b.fc(),b.ed(26),b.tc(27,"translate"),b.fc(),b.gc(28,"p",49),b.ed(29),b.fc(),b.gc(30,"p",49),b.gc(31,"strong"),b.ed(32),b.tc(33,"translate"),b.fc(),b.ed(34),b.fc(),b.gc(35,"ion-button",50),b.oc("click",(function(){b.Sc(n);var t=e.$implicit;return b.sc(2).showBookDetail(t.uuid)})),b.ed(36),b.tc(37,"translate"),b.fc(),b.gc(38,"ion-button",51),b.ed(39),b.tc(40,"translate"),b.fc(),b.gc(41,"ion-button",52),b.oc("click",(function(){b.Sc(n);var t=e.$implicit;return b.sc(2).showAcademicPerformance(t.uuid)})),b.ed(42),b.tc(43,"translate"),b.fc(),b.fc(),b.fc(),b.gc(44,"ion-col",39),b.cd(45,Nt,1,2,"card-load-animation",16),b.gc(46,"div",17),b.gc(47,"canvas",18),b.ed(48),b.fc(),b.fc(),b.fc(),b.fc(),b.fc(),b.fc(),b.fc(),b.fc()}if(2&t){var o=e.$implicit,a=b.sc(2);b.Lb(10),b.Ac("ngStyle",b.Fc(33,Qt,"url("+o.portada+")")),b.Lb(5),b.fd(o.name),b.Lb(3),b.gd("",b.uc(19,17,"pages.book.author"),": "),b.Lb(2),b.fd(o.author||b.uc(21,19,"no_author")),b.Lb(4),b.gd("",b.uc(25,21,"pages.book.editorial"),": "),b.Lb(2),b.fd(o.editorial||b.uc(27,23,"no_editorial")),b.Lb(3),b.fd(o.periodo_escolar),b.Lb(3),b.gd("",b.uc(33,25,"pages.book.pines_actives"),": "),b.Lb(2),b.fd(o.pines_actives_count),b.Lb(2),b.fd(b.uc(37,27,"buttons.details")),b.Lb(2),b.Ac("href",a.route_book+o.uuid),b.Lb(1),b.fd(b.uc(40,29,"buttons.open")),b.Lb(3),b.fd(b.uc(43,31,"pages.reports.statistics")),b.Lb(3),b.Ac("ngIf",a.loadingCharts&&null==o.chart),b.Lb(1),b.Ac("ngClass",null==o.chart?"d-none":""),b.Lb(1),b.Ac("id","chart_general_"+o.uuid),b.Lb(1),b.fd(o.chart)}}var Zt=function(t,e,n){return{id:"foo-paginate-book",itemsPerPage:t,currentPage:e,totalItems:n}};function Vt(t,e){if(1&t){var n=b.hc();b.gc(0,"div",33),b.gc(1,"ion-grid",34),b.gc(2,"ion-row",35),b.cd(3,Wt,49,35,"ion-col",36),b.tc(4,"paginate"),b.fc(),b.fc(),b.gc(5,"div",29),b.gc(6,"pagination-controls",37),b.oc("pageChange",(function(t){return b.Sc(n),b.sc().pageChanged(t)}))("pageBoundsCorrection",(function(t){return b.Sc(n),b.sc().pageChanged(t)})),b.tc(7,"translate"),b.tc(8,"translate"),b.tc(9,"translate"),b.tc(10,"translate"),b.tc(11,"translate"),b.fc(),b.fc(),b.fc()}if(2&t){var o=b.sc();b.Lb(3),b.Ac("ngForOf",b.vc(4,6,o.books,b.Hc(19,Zt,o.pageSize,o.thisPage,o.totalItems))),b.Lb(3),b.Ac("previousLabel",b.uc(7,9,"paginate.previous"))("nextLabel",b.uc(8,11,"paginate.next"))("screenReaderPaginationLabel",b.uc(9,13,"paginate.pagination"))("screenReaderPageLabel",b.uc(10,15,"paginate.page"))("screenReaderCurrentLabel",b.uc(11,17,"paginate.in_your_page"))}}(o=u.a).register.apply(o,_toConsumableArray(u.b));var Xt,Jt,Kt=((Xt=function(){function t(e,n,o,a,c){_classCallCheck(this,t),this.reportService=e,this.controlErroresService=n,this.activeRoute=o,this.modalCtrl=a,this.applyFiltersModeService=c,this.showSearchbar=!1,this.scrollbarStyle=g.a.scrollbarStyle,this.pageSize=1,this.loading=!1,this.queryText="",this.button_search={color:"warning",size:"small",mode:"search",disabled:!1,title:"buttons.search",icon:"search-outline"},this.route_book=p.h.book,this.books=[],this.moment=x,this.loadingBooks=!1,this.datesRange={start_date:null,end_date:null},this.chart_father={chart:null},this.filters_group={},this.buttons_filters=[this.button_search],this.thisPage=1,this.totalPages=0,this.totalItems=0,this.loadingCharts=!1,this.timeoutID=null,this.allowFilters={end_date:1,start_date:1},this.book_id_in=o.snapshot.params.uuid}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.moment.locale("es"),this.loadBooks({page:this.thisPage},!0,!0),this.filtersRxjs=this.applyFiltersModeService.get$().subscribe((function(e){t.applyFilters(e)})),this.book_id_in&&this.showAcademicPerformance(this.book_id_in)}},{key:"ngOnDestroy",value:function(){this.filtersRxjs.unsubscribe()}},{key:"searchItems",value:function(){var t=this;this.timeoutID&&clearTimeout(this.timeoutID),this.filters_group.page=this.thisPage,this.timeoutID=setTimeout((function(){return t.loadBooks(t.filters_group,!0,!0)}),1e3)}},{key:"applyFilters",value:function(t){if(!t)return!1;if(!t.mode||!t.filters)return!1;switch(t.filters.page=this.thisPage,t.filters.busqueda=this.queryText,this.filters_group=t.filters,t.mode){case"search":this.loadBooks(t.filters,!0,!0)}}},{key:"loadBooks",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.loading=!0,this.loadingBooks=!0,this.loadingCharts=!0,n&&(this.books=[]),o&&(this.thisPage=1),this.reportService.getBooks(e).subscribe((function(e){t.loadingBooks=!1,e.data&&e.data.books&&e.data.books.data&&Array.isArray(e.data.books.data)&&(t.books=e.data.books.data,o&&(t.totalPages=e.data.books.last_page,t.totalItems=e.data.books.total,t.pageSize=e.data.number_paginate)),t.datesRange.start_date=e.data.start_date,t.datesRange.end_date=e.data.end_date,setTimeout((function(){t.loadGraficoGeneral(t.chart_father,e.data.report_months.map((function(t){return t.date_format})),e.data.report_months.map((function(t){return t.count})),"chart_father_report"),t.books.forEach((function(e,n){t.loadGraficoGeneral(e,e.data_month.map((function(t){return t.date_format})),e.data_month.map((function(t){return t.count})),"chart_general_"+e.uuid)})),t.loadingCharts=!1}),1e3),t.loading=!1}),(function(e){t.loadingCharts=!1,t.loadingBooks=!1,t.loading=!1,t.controlErroresService.control(e)}))}},{key:"loadGraficoGeneral",value:function(t,e,n,o){null!=t.chart&&t.chart.destroy(),t.chart=new u.a(o,{type:"line",data:{labels:e,datasets:[{label:"Activaciones de pines",data:n,backgroundColor:"rgba(0, 156, 224, 1)",borderColor:"rgba(0, 156, 224, 1)",borderWidth:1}]},options:{scales:{y:{beginAtZero:!0}}}}),t.chart.update()}},{key:"showBookDetail",value:function(t){return Object(Lt.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalCtrl.create({component:Ot.a,cssClass:"modal-fullscreen-100",swipeToClose:!0,componentProps:{uuid:t}});case 2:return n=e.sent,e.next=5,n.present();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"pageChanged",value:function(t){if(t==1/0)return!1;this.thisPage=t,this.filters_group.page=this.thisPage,this.loadBooks(this.filters_group,!0,!1)}},{key:"showAcademicPerformance",value:function(t){return Object(Lt.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalCtrl.create({component:Rt,cssClass:"modal-fullscreen-100",swipeToClose:!0,componentProps:{book_id:t}});case 2:return n=e.sent,e.next=5,n.present();case 5:case"end":return e.stop()}}),e,this)})))}}]),t}()).\u0275fac=function(t){return new(t||Xt)(b.ac(m),b.ac(f.a),b.ac(d.a),b.ac(l.Db),b.ac(v.a))},Xt.\u0275cmp=b.Ub({type:Xt,selectors:[["app-books-report-admin"]],decls:30,vars:19,consts:[["translucent","true"],["slot","start",4,"ngIf"],[4,"ngIf"],["showCancelButton","always",3,"ngModel","placeholder","ngModelChange","ionChange","ionCancel",4,"ngIf"],["slot","end"],[3,"click",4,"ngIf"],["mode","indeterminate",4,"ngIf"],["fullscreen","true",3,"scrollbar"],[3,"required","buttons"],[1,"mt-2","no-padding-small-500"],["hideToggle","",3,"expanded"],[2,"padding","0"],[2,"width","100%"],["name","bar-chart-outline"],[1,"padding-small-sm"],["size","12","size-sm","6",2,"margin","0 auto"],[3,"count","all_width",4,"ngIf"],[3,"ngClass"],[3,"id"],[1,"example-container","mat-elevation-z8","scroll-div-content"],["class","flex flex-center",4,"ngIf"],["class","flex flex-center mt-4",4,"ngIf"],["class","main-wrapper",4,"ngIf"],["slot","start"],["showCancelButton","always",3,"ngModel","placeholder","ngModelChange","ionChange","ionCancel"],[3,"click"],["slot","icon-only","name","search"],["mode","indeterminate"],[3,"count","all_width"],[1,"flex","flex-center"],["src","/assets/js/wow_book/loading.gif","alt","loading"],[1,"flex","flex-center","mt-4"],[3,"$text"],[1,"main-wrapper"],[1,"grid-shuffle"],["id","grid",1,"row"],["size","12","class","book-item small-12 medium-6 columns","data-groups",'["classic"]',"data-date-created","1937","data-title","Of Mice and Men","data-color","var(--ion-color-primary)",4,"ngFor","ngForOf"],["id","foo-paginate-book","maxSize","9","directionLinks","true","autoHide","true","responsive","true",3,"previousLabel","nextLabel","screenReaderPaginationLabel","screenReaderPageLabel","screenReaderCurrentLabel","pageChange","pageBoundsCorrection"],["size","12","data-groups",'["classic"]',"data-date-created","1937","data-title","Of Mice and Men","data-color","var(--ion-color-primary)",1,"book-item","small-12","medium-6","columns"],["size","12","size-sm","6"],[1,"bk-img"],[1,"bk-wrapper"],[1,"bk-book","bk-bookdefault"],[1,"bk-front"],[1,"bk-cover",3,"ngStyle"],[1,"bk-back"],[1,"bk-left"],[1,"item-details","p-0"],[1,"book-item_title"],[1,"author"],["color","primary","size","small",3,"click"],["color","warning","size","small",3,"href"],["color","secondary","size","small",3,"click"]],template:function(t,e){1&t&&(b.gc(0,"ion-header",0),b.gc(1,"ion-toolbar"),b.cd(2,Bt,2,0,"ion-buttons",1),b.cd(3,jt,3,3,"ion-title",2),b.cd(4,Et,2,4,"ion-searchbar",3),b.gc(5,"ion-buttons",4),b.cd(6,$t,2,0,"ion-button",5),b.fc(),b.fc(),b.cd(7,Ht,1,0,"mat-progress-bar",6),b.fc(),b.gc(8,"ion-content",7),b.bc(9,"filters-users",8),b.gc(10,"ion-card",9),b.gc(11,"mat-expansion-panel",10),b.gc(12,"mat-expansion-panel-header",11),b.gc(13,"mat-panel-title"),b.gc(14,"ion-item",12),b.bc(15,"ion-icon",13),b.ed(16),b.tc(17,"translate"),b.fc(),b.fc(),b.fc(),b.gc(18,"ion-card-content",14),b.gc(19,"ion-grid"),b.gc(20,"ion-row"),b.gc(21,"ion-col",15),b.cd(22,Yt,1,2,"card-load-animation",16),b.gc(23,"div",17),b.gc(24,"canvas",18),b.ed(25),b.fc(),b.fc(),b.fc(),b.fc(),b.fc(),b.fc(),b.fc(),b.fc(),b.gc(26,"div",19),b.cd(27,Gt,2,0,"div",20),b.cd(28,Ut,4,3,"div",21),b.cd(29,Vt,12,23,"div",22),b.fc(),b.fc()),2&t&&(b.Lb(2),b.Ac("ngIf",!e.showSearchbar),b.Lb(1),b.Ac("ngIf",!e.showSearchbar),b.Lb(1),b.Ac("ngIf",e.showSearchbar),b.Lb(2),b.Ac("ngIf",!e.showSearchbar),b.Lb(1),b.Ac("ngIf",e.loading),b.Lb(1),b.Bc("scrollbar",e.scrollbarStyle),b.Lb(1),b.Ac("required",e.allowFilters)("buttons",e.buttons_filters),b.Lb(2),b.Ac("expanded",!0),b.Lb(5),b.gd(" ",b.uc(17,17,"forms.graph")," "),b.Lb(6),b.Ac("ngIf",e.loadingBooks||e.loadingCharts&&null==e.chart_father.chart),b.Lb(1),b.Ac("ngClass",e.loadingBooks||null==e.chart_father.chart||e.books&&0==e.books.length?"d-none":""),b.Lb(1),b.Ac("id","chart_father_report"),b.Lb(1),b.fd(e.chart_father.chart),b.Lb(2),b.Ac("ngIf",e.loadingBooks),b.Lb(1),b.Ac("ngIf",0==e.books.length&&!e.loadingBooks),b.Lb(1),b.Ac("ngIf",!e.loadingBooks))},directives:[l.B,l.zb,r.t,l.l,l.u,y.b,it,l.m,k.c,k.g,k.h,l.H,l.C,l.n,l.A,l.gb,l.t,r.q,l.R,l.xb,l.hb,l.Mb,s.r,s.u,l.k,rt.a,st.a,Ft.a,r.s,Tt.c,r.w],pipes:[D.d,Tt.b],styles:['p[_ngcontent-%COMP%]:not(.author){font-size:15px;font-weight:300;line-height:1.4}p.author[_ngcontent-%COMP%]{margin-bottom:10px;letter-spacing:-1px;font-weight:400;color:var(--ion-color-medium-shade)}a.button[_ngcontent-%COMP%]{margin-bottom:0;padding:8px 14px;font-size:14px;font-weight:600;border-radius:3px;background-color:rgba(49,49,49,.5)}a.button[_ngcontent-%COMP%]:focus, a.button[_ngcontent-%COMP%]:hover{background-color:var(--ion-color-primary)}.page-header[_ngcontent-%COMP%]{position:relative;margin-bottom:55px;width:100%;border-bottom:1px solid #d2d6d5;background-color:#fff}@-webkit-keyframes anim-1{50%{opacity:0;transform:translate3d(1em,0,0)}51%{opacity:0;transform:translate3d(-1em,-40%,0)}to{opacity:1;transform:translate3d(0,-40%,0)}}@keyframes anim-1{50%{opacity:0;bottom:24px;transform:translate3d(5em,0,0)}51%{opacity:0;bottom:24px;transform:translate3d(-5em,-40%,0)}to{opacity:1;bottom:24px;transform:translate3d(0,-40%,0)}}.book-item[_ngcontent-%COMP%]{margin:15px 0;padding:15px;list-style-type:none}.book-item[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;right:15px;width:calc(100% - 105px);height:100%;border-radius:3px;z-index:-1;transition:all .25s ease-out}.book-item[_ngcontent-%COMP%]:hover   .item-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{box-shadow:0 0 10px 0 rgba(49,49,49,.25)}.book-item[_ngcontent-%COMP%]:hover   a.button[_ngcontent-%COMP%]{background-color:var(--ion-color-primary)}.book-item[_ngcontent-%COMP%]:hover   .bk-bookdefault[_ngcontent-%COMP%]{transform:rotateY(25deg)}.book-item[_ngcontent-%COMP%]:hover   .bk-back[_ngcontent-%COMP%]{opacity:1}.book-item[_ngcontent-%COMP%]   .item-img[_ngcontent-%COMP%]{display:inline-block;float:left;padding-right:30px}.book-item[_ngcontent-%COMP%]   .item-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{box-shadow:0 0 0 0 transparent;transition:all .25s ease-out}.book-item[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]{padding-right:30px}.book-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:not(.author){display:block;display:-webkit-box;font-size:15px;line-height:1.4;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}.bk-img[_ngcontent-%COMP%]{display:inline-block;padding-right:30px;list-style:none}.bk-img[_ngcontent-%COMP%], .bk-img[_ngcontent-%COMP%]   .bk-wrapper[_ngcontent-%COMP%]{position:relative;float:left}.bk-img[_ngcontent-%COMP%]   .bk-wrapper[_ngcontent-%COMP%]{width:150px;height:215px;z-index:1;perspective:1400px}.bk-img[_ngcontent-%COMP%]   .bk-wrapper[_ngcontent-%COMP%]:last-child{margin-right:0}.bk-img[_ngcontent-%COMP%]   .bk-book[_ngcontent-%COMP%]{position:absolute;width:100%;height:215px;transform-style:preserve-3d;transition:transform .5s}.bk-img[_ngcontent-%COMP%]   .bk-book[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .bk-img[_ngcontent-%COMP%]   .bk-front[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:block;position:absolute}.bk-img[_ngcontent-%COMP%]   .bk-front[_ngcontent-%COMP%]{transform-style:preserve-3d;transform-origin:0 50%;transition:transform .5s;transform:translateZ(20px);z-index:10}.bk-img[_ngcontent-%COMP%]   .bk-front[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{z-index:1;-webkit-backface-visibility:hidden;backface-visibility:hidden;transform-style:preserve-3d;border-radius:0 3px 3px 0;box-shadow:inset 4px 0 10px rgba(0,0,0,.1)}.bk-img[_ngcontent-%COMP%]   .bk-front[_ngcontent-%COMP%]:after{content:"";position:absolute;top:1px;bottom:1px;left:-1px;width:1px}.bk-img[_ngcontent-%COMP%]   .bk-back[_ngcontent-%COMP%], .bk-img[_ngcontent-%COMP%]   .bk-front[_ngcontent-%COMP%], .bk-img[_ngcontent-%COMP%]   .bk-front[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:150px;height:215px}.bk-img[_ngcontent-%COMP%]   .bk-left[_ngcontent-%COMP%], .bk-img[_ngcontent-%COMP%]   .bk-right[_ngcontent-%COMP%]{width:40px;left:-20px}.bk-img[_ngcontent-%COMP%]   .bk-back[_ngcontent-%COMP%]{transform:rotateY(-180deg) translateZ(20px);box-shadow:5px 7px 15px rgba(0,0,0,.3);border-radius:3px 0 0 3px;opacity:0;transition:opacity .25s ease-out}.bk-img[_ngcontent-%COMP%]   .bk-back[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:10px;bottom:0;width:3px;background:rgba(0,0,0,.06);box-shadow:1px 0 3px hsla(0,0%,100%,.1)}.bk-img[_ngcontent-%COMP%]   .bk-left[_ngcontent-%COMP%]{height:215px;transform:rotateY(-90deg)}.bk-img[_ngcontent-%COMP%]   .bk-left[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{width:215px;height:40px;transform-origin:0 0;transform:rotate(90deg) translateY(-40px)}.bk-img[_ngcontent-%COMP%]   .bk-cover[_ngcontent-%COMP%]{background-position:10px 40px}.bk-img[_ngcontent-%COMP%]   .bk-cover[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:10px;bottom:0;width:3px;background:rgba(0,0,0,.06);box-shadow:1px 0 3px hsla(0,0%,100%,.1)}.bk-img[_ngcontent-%COMP%]   .bk-cover[_ngcontent-%COMP%]{background-repeat:no-repeat;background-position:0 0!important}.bk-img[_ngcontent-%COMP%]   .bk-front[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .bk-img[_ngcontent-%COMP%]   .bk-left[_ngcontent-%COMP%]{background-color:var(--ion-color-primary)}.main-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;display:none;background-color:rgba(49,49,49,.65)}.main-overlay[_ngcontent-%COMP%]   .overlay-full[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%}.main-overlay[_ngcontent-%COMP%]   .overlay-details[_ngcontent-%COMP%]{position:absolute;display:block;z-index:1;top:50%;left:50%;width:100%;max-width:800px;max-height:480px;padding:40px;overflow:hidden;border-radius:3px;background-color:#fff;box-shadow:0 2px 1px 2px rgba(0,0,0,.3);transform:translate(-50%,-50%)}.main-overlay[_ngcontent-%COMP%]   .overlay-image[_ngcontent-%COMP%]{display:inline-block;margin-right:30px;max-width:275px;vertical-align:top}.main-overlay[_ngcontent-%COMP%]   .overlay-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:relative;display:inline-block;z-index:1;box-shadow:-12px 12px 15px -5px rgba(0,0,0,.3)}.main-overlay[_ngcontent-%COMP%]   .overlay-image[_ngcontent-%COMP%]   .back-color[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:275px;height:100%;border-top-left-radius:3px;border-bottom-left-radius:3px;background-color:green}.main-overlay[_ngcontent-%COMP%]   .close-overlay-btn[_ngcontent-%COMP%]{position:absolute;top:15px;right:15px;width:30px;height:30px;opacity:.3;text-indent:-9999px;transition:opacity .25s ease-out}.main-overlay[_ngcontent-%COMP%]   .close-overlay-btn[_ngcontent-%COMP%]:hover{opacity:1}.main-overlay[_ngcontent-%COMP%]   .close-overlay-btn[_ngcontent-%COMP%]:after, .main-overlay[_ngcontent-%COMP%]   .close-overlay-btn[_ngcontent-%COMP%]:before{content:" ";position:absolute;left:15px;width:2px;height:33px;background-color:#313131}.main-overlay[_ngcontent-%COMP%]   .close-overlay-btn[_ngcontent-%COMP%]:before{transform:rotate(45deg)}.main-overlay[_ngcontent-%COMP%]   .close-overlay-btn[_ngcontent-%COMP%]:after{transform:rotate(-45deg)}.main-overlay[_ngcontent-%COMP%]   .back-preview-btn[_ngcontent-%COMP%]{position:absolute;top:7px;left:-34px;width:30px;height:30px;opacity:.3;text-indent:-9999px;transition:opacity .25s ease-out}.main-overlay[_ngcontent-%COMP%]   .back-preview-btn[_ngcontent-%COMP%]:hover{opacity:1}.main-overlay[_ngcontent-%COMP%]   .back-preview-btn[_ngcontent-%COMP%]:after, .main-overlay[_ngcontent-%COMP%]   .back-preview-btn[_ngcontent-%COMP%]:before{content:" ";position:absolute;left:15px;width:2px;height:15px;background-color:#313131}.main-overlay[_ngcontent-%COMP%]   .back-preview-btn[_ngcontent-%COMP%]:after{top:10px}.main-overlay[_ngcontent-%COMP%]   .back-preview-btn[_ngcontent-%COMP%]:before{transform:rotate(45deg)}.main-overlay[_ngcontent-%COMP%]   .back-preview-btn[_ngcontent-%COMP%]:after{transform:rotate(-45deg)}.main-overlay[_ngcontent-%COMP%]   .overlay-desc[_ngcontent-%COMP%]{display:inline-block;margin-top:-400px;width:calc(100% - 320px);vertical-align:top;transition:all .5s ease-out}.main-overlay[_ngcontent-%COMP%]   .overlay-desc.activated[_ngcontent-%COMP%]{display:inline-block;margin-top:0}.main-overlay[_ngcontent-%COMP%]   .overlay-preview[_ngcontent-%COMP%]{position:relative;display:inline-block;float:right;margin-top:40px;width:calc(100% - 310px);vertical-align:top;transition:all .5s ease-out}.main-overlay[_ngcontent-%COMP%]   .overlay-preview.activated[_ngcontent-%COMP%]{margin-top:-430px}.main-overlay[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]{padding-right:24px;padding-top:10px;display:block;display:-webkit-box;font-size:15px;line-height:1.5;-webkit-line-clamp:16;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;overflow:scroll;text-overflow:clip;font-weight:400}.main-overlay[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], .main-overlay[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Roboto Slab,serif}.main-overlay[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-weight:700}.main-overlay[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:400}.main-overlay[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:40px;width:100%;height:30px;background:hsla(0,0%,100%,0);background:linear-gradient(0deg,hsla(0,0%,100%,0) 0,hsla(0,0%,100%,0) 0,hsla(0,0%,100%,.8) 30%,#fff 80%)}.main-overlay[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]:after{content:"";position:absolute;left:0;bottom:0;width:100%;height:50px;background:hsla(0,0%,100%,0);background:linear-gradient(180deg,hsla(0,0%,100%,0) 0,hsla(0,0%,100%,0) 0,hsla(0,0%,100%,.8) 30%,#fff 80%)}.overlay-details[_ngcontent-%COMP%]{display:none}#footer[_ngcontent-%COMP%]{margin-top:60px;padding:15px 0 20px;border-top:1px solid #fff;background-color:rgba(49,49,49,.5)}#footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], #footer[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], #footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;font-size:12px;text-align:center}.long-text[_ngcontent-%COMP%], .long-text[_ngcontent-%COMP%] > *[_ngcontent-%COMP%], .long-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .long-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] > *[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{white-space:normal!important;word-wrap:break-word!important}.bold[_ngcontent-%COMP%]{font-weight:900}']}),Xt),te=n("M9IT"),ee=n("Dh3D"),ne=n("VRyK"),oe=n("LRne"),ae=n("JX91"),ce=n("eIep"),ie=n("JIr8"),re=n("lJxs"),se=((Jt=function(){function t(e){_classCallCheck(this,t),this.httpClient=e,this.url=p.i.users}return _createClass(t,[{key:"changePassword",value:function(t){return this.httpClient.post(this.url+"change-password",t)}},{key:"delete",value:function(t){return this.httpClient.delete(this.url+"delete/"+t)}},{key:"find",value:function(t){return this.httpClient.get(this.url+"find/"+t)}},{key:"getListBookPines",value:function(t,e){return this.httpClient.get(this.url+"get-book-pines/"+t+this.buildQUery(e))}},{key:"getListLibraries",value:function(t,e){return this.httpClient.get(this.url+"get-libraries-pines/"+t+this.buildQUery(e))}},{key:"getCoursesById",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"active",n=this.url+"get-course-user/"+t;return e&&(n+="?status="+e),this.httpClient.get(n)}},{key:"getActivitiesByUser",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.httpClient.get(this.url+"get-activities-course-by-user/"+t+"/"+e+this.buildQUery(n))}},{key:"changeDate",value:function(t,e,n){return this.httpClient.post(this.url+"change-date-book/"+t+"/"+e,n)}},{key:"changeDateLibrary",value:function(t,e,n){return this.httpClient.post(this.url+"change-date-library/"+t+"/"+e,n)}},{key:"buildQUery",value:function(t){var e="?";if(t.busqueda&&(e+="&busqueda="+t.busqueda),t.page&&(e+="&page="+t.page),t.book_uuid&&(e+="&book_uuid="+t.book_uuid),t.page_index&&(e+="&page_index="+t.page_index),t.type_id&&(e+="&tipo="+t.type_id),t.q&&(e+="&q="+t.q),t.min_price&&(e+="&min_price="+t.min_price),t.library_id&&(e+="&library_id="+t.library_id),t.producto_servicio&&(e+="&producto_servicio="+t.producto_servicio),t.relevancia&&(e+="&relevancia="+t.relevancia),t.printing&&(e+="&printing="+t.printing),t.min_price&&(e+="&min_price="+t.min_price),t.max_price&&(e+="&max_price="+t.max_price),t.start&&(e+="&start="+t.start),t.end&&(e+="&end="+t.end),t["with-resources"]&&(e+="&with-resources="+t["with-resources"]),t["has-resources"]&&(e+="&has-resources="+t["has-resources"]),t.paginate&&(e+="&paginate="+t.paginate),t.with_all_books&&(e+="&with_all_books="+t.with_all_books),t.alow_my_role&&(e+="&alow_my_role="+t.alow_my_role),t.end_publish_at&&null!=t.end_publish_at&&(e+="&end_publish_at="+t.end_publish_at),t.start_publish_at&&null!=t.start_publish_at&&(e+="&start_publish_at="+t.start_publish_at),t.type_activity&&null!=t.type_activity&&(e+="&type_activity="+t.type_activity),t.end_created_at&&null!=t.end_created_at&&(e+="&end_created_at="+t.end_created_at),t.start_created_at&&null!=t.start_created_at&&(e+="&start_created_at="+t.start_created_at),null!=t.max_qualification_percentage&&null!=t.max_qualification_percentage&&(e+="&max_qualification_percentage="+t.max_qualification_percentage),null!=t.min_qualification_percentage&&null!=t.min_qualification_percentage&&(e+="&min_qualification_percentage="+t.min_qualification_percentage),t.block_id&&null!=t.block_id&&(e+="&block_id="+t.block_id),t.semester_id&&null!=t.semester_id&&(e+="&semester_id="+t.semester_id),t.theme_id&&null!=t.theme_id&&(e+="&theme_id="+t.theme_id),t.title&&null!=t.title&&(e+="&title="+t.title),t.filters&&Array.isArray(t.filters))try{console.log(t.filters);var n,o=_createForOfIteratorHelper(t.filters);try{for(o.s();!(n=o.n()).done;){var a=n.value;a.value&&a.field&&(e+="&"+a.field+"="+a.value)}}catch(c){o.e(c)}finally{o.f()}}catch(i){console.log(i,t.filters)}return e}}]),t}()).\u0275fac=function(t){return new(t||Jt)(b.kc(h.b))},Jt.\u0275prov=b.Wb({token:Jt,factory:Jt.\u0275fac,providedIn:"root"}),Jt),le=n("PkRB"),de=n("DnI1"),ue=n("Qu3c"),ge=n("jK8c");function fe(t,e){1&t&&(b.gc(0,"div",5),b.bc(1,"img",6),b.fc())}function pe(t,e){1&t&&(b.ec(0),b.bc(1,"books-animations",9),b.tc(2,"translate"),b.dc()),2&t&&(b.Lb(1),b.Ac("$text",b.uc(2,1,"pages.book.books_not_found")))}function be(t,e){1&t&&(b.ec(0),b.bc(1,"app-activate-pin",10),b.dc())}function he(t,e){if(1&t&&(b.gc(0,"div",7),b.cd(1,pe,3,3,"ng-container",8),b.cd(2,be,2,0,"ng-container",8),b.fc()),2&t){var n=b.sc();b.Lb(1),b.Ac("ngIf",n.have_books),b.Lb(1),b.Ac("ngIf",!n.have_books)}}function me(t,e){1&t&&(b.gc(0,"span",35),b.ed(1),b.tc(2,"translate"),b.fc()),2&t&&(b.Lb(1),b.fd(b.uc(2,1,"forms.has_expired")))}function _e(t,e){if(1&t&&(b.gc(0,"div"),b.gc(1,"p",30),b.gc(2,"strong"),b.ed(3),b.tc(4,"translate"),b.fc(),b.ed(5),b.cd(6,me,3,3,"span",34),b.fc(),b.gc(7,"p",30),b.gc(8,"strong"),b.ed(9),b.tc(10,"translate"),b.fc(),b.ed(11),b.fc(),b.gc(12,"p",30),b.gc(13,"strong"),b.ed(14),b.tc(15,"translate"),b.fc(),b.ed(16),b.fc(),b.fc()),2&t){var n=b.sc().$implicit,o=b.sc(2);b.Lb(3),b.gd("",b.uc(4,7,"pages.book.pin"),": "),b.Lb(2),b.gd("",n.pin_aux.pin," "),b.Lb(1),b.Ac("ngIf",1==n.pin_aux.has_expired),b.Lb(3),b.gd("",b.uc(10,9,"pages.book.expired_in"),": "),b.Lb(2),b.fd(o.moment(n.pin_aux.date_expired).format("DD/MM/YYYY")),b.Lb(3),b.gd("",b.uc(15,11,"pages.book.expired_in"),": "),b.Lb(2),b.fd(o.moment(n.pin_aux.date_expired).fromNow())}}function ve(t,e){if(1&t){var n=b.hc();b.gc(0,"ion-button",36),b.oc("click",(function(){b.Sc(n);var t=b.sc().$implicit;return b.sc(2).changeDateExpired(t)})),b.ed(1),b.tc(2,"translate"),b.fc()}2&t&&(b.Lb(1),b.fd(b.uc(2,1,"buttons.change_date_expired")))}var ye=function(t){return{backgroundImage:t,backgroundSize:"100% 100%"}};function ke(t,e){if(1&t){var n=b.hc();b.gc(0,"ion-col",16),b.gc(1,"div"),b.gc(2,"ion-grid"),b.gc(3,"ion-row"),b.gc(4,"ion-col"),b.gc(5,"p",17),b.gc(6,"strong",18),b.ed(7),b.tc(8,"translate"),b.fc(),b.fc(),b.fc(),b.fc(),b.gc(9,"ion-row"),b.gc(10,"ion-col",19),b.gc(11,"p",20),b.ed(12),b.tc(13,"translate"),b.bc(14,"br"),b.gc(15,"strong",18),b.ed(16),b.fc(),b.fc(),b.fc(),b.gc(17,"ion-col",19),b.gc(18,"p",20),b.ed(19),b.tc(20,"translate"),b.bc(21,"br"),b.gc(22,"strong",18),b.ed(23),b.fc(),b.fc(),b.fc(),b.gc(24,"ion-col",19),b.gc(25,"p",20),b.ed(26),b.tc(27,"translate"),b.bc(28,"br"),b.gc(29,"strong",18),b.ed(30),b.fc(),b.fc(),b.fc(),b.fc(),b.fc(),b.fc(),b.gc(31,"div",21),b.gc(32,"div",22),b.gc(33,"div",23),b.gc(34,"div",24),b.bc(35,"div",25),b.fc(),b.bc(36,"div",26),b.bc(37,"div",27),b.fc(),b.fc(),b.fc(),b.gc(38,"div",28),b.gc(39,"h3",29),b.ed(40),b.fc(),b.gc(41,"p",30),b.gc(42,"strong"),b.ed(43),b.tc(44,"translate"),b.fc(),b.ed(45),b.tc(46,"translate"),b.fc(),b.gc(47,"p",30),b.gc(48,"strong"),b.ed(49),b.tc(50,"translate"),b.fc(),b.ed(51),b.tc(52,"translate"),b.fc(),b.gc(53,"p",30),b.ed(54),b.fc(),b.cd(55,_e,17,13,"div",8),b.gc(56,"ion-button",31),b.oc("click",(function(){b.Sc(n);var t=e.$implicit;return b.sc(2).showBookDetail(t.uuid)})),b.ed(57),b.tc(58,"translate"),b.fc(),b.gc(59,"ion-button",32),b.ed(60),b.tc(61,"translate"),b.fc(),b.cd(62,ve,3,3,"ion-button",33),b.bc(63,"br"),b.fc(),b.fc()}if(2&t){var o=e.$implicit,a=b.sc(2);b.Lb(7),b.fd(b.uc(8,19,"pages.reports.time_for_book")),b.Lb(5),b.fd(b.uc(13,21,"pages.reports.today")),b.Lb(4),b.fd(a.moment(o.avg_time_today,"HH:mm:ss").format("HH:mm")),b.Lb(3),b.fd(b.uc(20,23,"pages.reports.weeb")),b.Lb(4),b.gd(" ",a.moment(o.avg_time_week,"HH:mm:ss").format("HH:mm"),""),b.Lb(3),b.fd(b.uc(27,25,"pages.reports.month")),b.Lb(4),b.fd(a.moment(o.avg_time_month,"HH:mm:ss").format("HH:mm")),b.Lb(5),b.Ac("ngStyle",b.Fc(39,ye,"url("+o.portada+")")),b.Lb(5),b.fd(o.name),b.Lb(3),b.gd("",b.uc(44,27,"pages.book.author"),": "),b.Lb(2),b.fd(o.author||b.uc(46,29,"no_author")),b.Lb(4),b.gd("",b.uc(50,31,"pages.book.editorial"),": "),b.Lb(2),b.fd(o.editorial||b.uc(52,33,"no_editorial")),b.Lb(3),b.fd(o.periodo_escolar),b.Lb(1),b.Ac("ngIf",o.pin_aux),b.Lb(2),b.fd(b.uc(58,35,"buttons.details")),b.Lb(2),b.Ac("href",a.route_book+o.uuid),b.Lb(1),b.fd(b.uc(61,37,"buttons.open")),b.Lb(2),b.Ac("ngIf",a.show_change_date)}}var xe=function(t,e,n,o){return{id:t,itemsPerPage:e,currentPage:n,totalItems:o}};function Ce(t,e){if(1&t){var n=b.hc();b.gc(0,"div",11),b.gc(1,"ion-grid",12),b.gc(2,"ion-row",13),b.cd(3,ke,64,41,"ion-col",14),b.tc(4,"paginate"),b.fc(),b.fc(),b.gc(5,"div",5),b.gc(6,"pagination-controls",15),b.oc("pageChange",(function(t){return b.Sc(n),b.sc().pageChanged(t)}))("pageBoundsCorrection",(function(t){return b.Sc(n),b.sc().pageChanged(t)})),b.tc(7,"translate"),b.tc(8,"translate"),b.tc(9,"translate"),b.tc(10,"translate"),b.tc(11,"translate"),b.fc(),b.fc(),b.fc()}if(2&t){var o=b.sc();b.Lb(3),b.Ac("ngForOf",b.vc(4,7,o.books,b.Ic(20,xe,o.tableNameId,o.pageSize,o.thisPage,o.totalItems))),b.Lb(3),b.Ac("id",o.tableNameId)("previousLabel",b.uc(7,10,"paginate.previous"))("nextLabel",b.uc(8,12,"paginate.next"))("screenReaderPaginationLabel",b.uc(9,14,"paginate.pagination"))("screenReaderPageLabel",b.uc(10,16,"paginate.page"))("screenReaderCurrentLabel",b.uc(11,18,"paginate.in_your_page"))}}var we,Me=((we=function(){function t(e,n,o,a,c,i,r){_classCallCheck(this,t),this.userService=e,this.controlErroresService=n,this.modalCtrl=o,this.alertController=a,this.bookService=c,this.toastService=i,this.loadingkService=r,this.queryText="",this.pageSize=9,this.thisPage=1,this.totalPages=0,this.totalItems=0,this.thisPageBook=1,this.tableNameId="foo-paginate-book-002repo",this.moment=x,this.books=[],this.loadingBooks=!1,this.have_books=!1,this.timeoutID=null,this.show_change_date=!1,this.route_book=p.h.book}return _createClass(t,[{key:"ngOnInit",value:function(){null!=this.user&&this.getListBookPines(this.user)}},{key:"getListBookPines",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];n&&(this.books=[]),o&&(this.thisPageBook=1),this.loadingBooks=!0,e.library_id=this.library_id,this.userService.getListBookPines(this.user.uuid,e).subscribe((function(e){t.books=e.data.books.data,n&&(t.totalPages=e.data.books.last_page,t.totalItems=e.data.books.total,t.pageSize=e.data.number_paginate),e.data.books.data.length>=1&&a&&(t.have_books=!0),t.loadingBooks=!1}),(function(e){t.controlErroresService.control(e),t.loadingBooks=!1}))}},{key:"searchBooksByText",value:function(t){var e=this;if(this.loadingBooks)return!1;this.timeoutID&&clearTimeout(this.timeoutID),this.timeoutID=setTimeout((function(){e.thisPage=1,e.getListBookPines({page:e.thisPage,busqueda:e.queryText},t,!0)}),1e3)}},{key:"showBookDetail",value:function(t){return Object(Lt.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalCtrl.create({component:Ot.a,cssClass:"modal-fullscreen-100",swipeToClose:!0,componentProps:{uuid:t}});case 2:return n=e.sent,e.next=5,n.present();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"pageChanged",value:function(t){if(console.log(t),t==1/0)return!1;this.thisPage=t,this.getListBookPines({page:this.thisPage},!0,!1)}},{key:"changeDate",value:function(t,e){var n=this;this.loadingkService.change(!0),this.userService.changeDate(this.user.uuid,t.uuid,e).subscribe((function(e){t.pin_aux.date_expired=e.data.date_expired,t.pin_aux.status=e.data.status,t.pin_aux.has_expired=e.data.has_expired,n.toastService.presentToast(e.message,e.status),n.loadingkService.change(!1)}),(function(t){n.controlErroresService.control(t),n.loadingkService.change(!1)}))}},{key:"changeDateExpired",value:function(t){return Object(Lt.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertController.create({cssClass:"",header:"Cambiar fecha de expiraci\xf3n",inputs:[{name:"date_expired",type:"date",placeholder:"Fecha de expiraci\xf3n"}],buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:function(){}},{text:"Cambiar",handler:function(e){o.changeDate(t,e)}}]});case 2:return n=e.sent,e.next=5,n.present();case 5:case"end":return e.stop()}}),e,this)})))}}]),t}()).\u0275fac=function(t){return new(t||we)(b.ac(se),b.ac(f.a),b.ac(l.Db),b.ac(l.b),b.ac(ge.a),b.ac(le.a),b.ac(de.a))},we.\u0275cmp=b.Ub({type:we,selectors:[["book-user-template"]],inputs:{user:"user",library_id:"library_id",show_change_date:"show_change_date"},decls:8,vars:10,consts:[[1,"text-center"],[3,"ngModel","placeholder","ngModelChange","ionChange"],["class","flex flex-center",4,"ngIf"],["class","flex flex-center mt-4",4,"ngIf"],["class","main-wrapper",4,"ngIf"],[1,"flex","flex-center"],["src","/assets/js/wow_book/loading.gif","alt","loading"],[1,"flex","flex-center","mt-4"],[4,"ngIf"],[3,"$text"],[1,"w-100"],[1,"main-wrapper"],[1,"grid-shuffle"],["id","grid",1,"row"],["size","12","size-sm","6","size-md","6","size-xl","4","class","book-item small-12 medium-6 columns","data-groups",'["classic"]',"data-date-created","1937","data-title","Of Mice and Men","data-color","var(--ion-color-primary)",4,"ngFor","ngForOf"],["maxSize","9","directionLinks","true","autoHide","true","responsive","true",3,"id","previousLabel","nextLabel","screenReaderPaginationLabel","screenReaderPageLabel","screenReaderCurrentLabel","pageChange","pageBoundsCorrection"],["size","12","size-sm","6","size-md","6","size-xl","4","data-groups",'["classic"]',"data-date-created","1937","data-title","Of Mice and Men","data-color","var(--ion-color-primary)",1,"book-item","small-12","medium-6","columns"],[1,"mb-0","text-center","bold"],[1,"bold"],["size","4"],[1,"mb-0","text-center"],[1,"bk-img"],[1,"bk-wrapper"],[1,"bk-book","bk-bookdefault"],[1,"bk-front"],[1,"bk-cover",3,"ngStyle"],[1,"bk-back"],[1,"bk-left"],[1,"item-details","p-0"],[1,"book-item_title","m-0"],[1,"author"],["color","primary","size","small",3,"click"],["color","warning","size","small",3,"href"],["color","danger","size","small",3,"click",4,"ngIf"],["class","badge-ng-pers color-deleted",4,"ngIf"],[1,"badge-ng-pers","color-deleted"],["color","danger","size","small",3,"click"]],template:function(t,e){1&t&&(b.gc(0,"h2",0),b.ed(1),b.tc(2,"translate"),b.fc(),b.gc(3,"ion-searchbar",1),b.oc("ngModelChange",(function(t){return e.queryText=t}))("ionChange",(function(){return e.searchBooksByText(!0)})),b.tc(4,"translate"),b.fc(),b.cd(5,fe,2,0,"div",2),b.cd(6,he,3,2,"div",3),b.cd(7,Ce,12,25,"div",4)),2&t&&(b.Lb(1),b.fd(b.uc(2,6,"pages.book.books_activate")),b.Lb(2),b.Bc("placeholder",b.uc(4,8,"forms.search")),b.Ac("ngModel",e.queryText),b.Lb(2),b.Ac("ngIf",e.loadingBooks),b.Lb(1),b.Ac("ngIf",0==e.books.length&&!e.loadingBooks),b.Lb(1),b.Ac("ngIf",!e.loadingBooks))},directives:[l.hb,l.Mb,s.r,s.u,r.t,Ft.a,l.A,l.gb,r.s,Tt.c,l.t,r.w,l.k],pipes:[D.d,Tt.b],styles:['p[_ngcontent-%COMP%]:not(.author){font-size:15px;font-weight:300;line-height:1.4}p.author[_ngcontent-%COMP%]{margin-bottom:10px;letter-spacing:-1px;font-weight:400;color:var(--ion-color-medium-shade)}a.button[_ngcontent-%COMP%]{margin-bottom:0;padding:8px 14px;font-size:14px;font-weight:600;border-radius:3px;background-color:rgba(49,49,49,.5)}a.button[_ngcontent-%COMP%]:focus, a.button[_ngcontent-%COMP%]:hover{background-color:var(--ion-color-primary)}.page-header[_ngcontent-%COMP%]{position:relative;margin-bottom:55px;width:100%;border-bottom:1px solid #d2d6d5;background-color:#fff}@-webkit-keyframes anim-1{50%{opacity:0;transform:translate3d(1em,0,0)}51%{opacity:0;transform:translate3d(-1em,-40%,0)}to{opacity:1;transform:translate3d(0,-40%,0)}}@keyframes anim-1{50%{opacity:0;bottom:24px;transform:translate3d(5em,0,0)}51%{opacity:0;bottom:24px;transform:translate3d(-5em,-40%,0)}to{opacity:1;bottom:24px;transform:translate3d(0,-40%,0)}}.book-item[_ngcontent-%COMP%]{margin:15px 0;padding:15px;list-style-type:none}.book-item[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;right:15px;width:calc(100% - 105px);height:100%;border-radius:3px;z-index:-1;transition:all .25s ease-out}.book-item[_ngcontent-%COMP%]:hover   .item-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{box-shadow:0 0 10px 0 rgba(49,49,49,.25)}.book-item[_ngcontent-%COMP%]:hover   a.button[_ngcontent-%COMP%]{background-color:var(--ion-color-primary)}.book-item[_ngcontent-%COMP%]:hover   .bk-bookdefault[_ngcontent-%COMP%]{transform:rotateY(25deg)}.book-item[_ngcontent-%COMP%]:hover   .bk-back[_ngcontent-%COMP%]{opacity:1}.book-item[_ngcontent-%COMP%]   .item-img[_ngcontent-%COMP%]{display:inline-block;float:left;padding-right:30px}.book-item[_ngcontent-%COMP%]   .item-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{box-shadow:0 0 0 0 transparent;transition:all .25s ease-out}.book-item[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]{padding-right:30px}.book-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:not(.author){display:block;display:-webkit-box;font-size:15px;line-height:1.4;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}.bk-img[_ngcontent-%COMP%]{display:inline-block;padding-right:30px;list-style:none}.bk-img[_ngcontent-%COMP%], .bk-img[_ngcontent-%COMP%]   .bk-wrapper[_ngcontent-%COMP%]{position:relative;float:left}.bk-img[_ngcontent-%COMP%]   .bk-wrapper[_ngcontent-%COMP%]{width:150px;height:215px;z-index:1;perspective:1400px}.bk-img[_ngcontent-%COMP%]   .bk-wrapper[_ngcontent-%COMP%]:last-child{margin-right:0}.bk-img[_ngcontent-%COMP%]   .bk-book[_ngcontent-%COMP%]{position:absolute;width:100%;height:215px;transform-style:preserve-3d;transition:transform .5s}.bk-img[_ngcontent-%COMP%]   .bk-book[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .bk-img[_ngcontent-%COMP%]   .bk-front[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:block;position:absolute}.bk-img[_ngcontent-%COMP%]   .bk-front[_ngcontent-%COMP%]{transform-style:preserve-3d;transform-origin:0 50%;transition:transform .5s;transform:translateZ(20px);z-index:10}.bk-img[_ngcontent-%COMP%]   .bk-front[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{z-index:1;-webkit-backface-visibility:hidden;backface-visibility:hidden;transform-style:preserve-3d;border-radius:0 3px 3px 0;box-shadow:inset 4px 0 10px rgba(0,0,0,.1)}.bk-img[_ngcontent-%COMP%]   .bk-front[_ngcontent-%COMP%]:after{content:"";position:absolute;top:1px;bottom:1px;left:-1px;width:1px}.bk-img[_ngcontent-%COMP%]   .bk-back[_ngcontent-%COMP%], .bk-img[_ngcontent-%COMP%]   .bk-front[_ngcontent-%COMP%], .bk-img[_ngcontent-%COMP%]   .bk-front[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:150px;height:215px}.bk-img[_ngcontent-%COMP%]   .bk-left[_ngcontent-%COMP%], .bk-img[_ngcontent-%COMP%]   .bk-right[_ngcontent-%COMP%]{width:40px;left:-20px}.bk-img[_ngcontent-%COMP%]   .bk-back[_ngcontent-%COMP%]{transform:rotateY(-180deg) translateZ(20px);box-shadow:5px 7px 15px rgba(0,0,0,.3);border-radius:3px 0 0 3px;opacity:0;transition:opacity .25s ease-out}.bk-img[_ngcontent-%COMP%]   .bk-back[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:10px;bottom:0;width:3px;background:rgba(0,0,0,.06);box-shadow:1px 0 3px hsla(0,0%,100%,.1)}.bk-img[_ngcontent-%COMP%]   .bk-left[_ngcontent-%COMP%]{height:215px;transform:rotateY(-90deg)}.bk-img[_ngcontent-%COMP%]   .bk-left[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{width:215px;height:40px;transform-origin:0 0;transform:rotate(90deg) translateY(-40px)}.bk-img[_ngcontent-%COMP%]   .bk-cover[_ngcontent-%COMP%]{background-position:10px 40px}.bk-img[_ngcontent-%COMP%]   .bk-cover[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:10px;bottom:0;width:3px;background:rgba(0,0,0,.06);box-shadow:1px 0 3px hsla(0,0%,100%,.1)}.bk-img[_ngcontent-%COMP%]   .bk-cover[_ngcontent-%COMP%]{background-repeat:no-repeat;background-position:0 0!important}.bk-img[_ngcontent-%COMP%]   .bk-front[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .bk-img[_ngcontent-%COMP%]   .bk-left[_ngcontent-%COMP%]{background-color:var(--ion-color-primary)}.main-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;display:none;background-color:rgba(49,49,49,.65)}.main-overlay[_ngcontent-%COMP%]   .overlay-full[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%}.main-overlay[_ngcontent-%COMP%]   .overlay-details[_ngcontent-%COMP%]{position:absolute;display:block;z-index:1;top:50%;left:50%;width:100%;max-width:800px;max-height:480px;padding:40px;overflow:hidden;border-radius:3px;background-color:#fff;box-shadow:0 2px 1px 2px rgba(0,0,0,.3);transform:translate(-50%,-50%)}.main-overlay[_ngcontent-%COMP%]   .overlay-image[_ngcontent-%COMP%]{display:inline-block;margin-right:30px;max-width:275px;vertical-align:top}.main-overlay[_ngcontent-%COMP%]   .overlay-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:relative;display:inline-block;z-index:1;box-shadow:-12px 12px 15px -5px rgba(0,0,0,.3)}.main-overlay[_ngcontent-%COMP%]   .overlay-image[_ngcontent-%COMP%]   .back-color[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:275px;height:100%;border-top-left-radius:3px;border-bottom-left-radius:3px;background-color:green}.main-overlay[_ngcontent-%COMP%]   .close-overlay-btn[_ngcontent-%COMP%]{position:absolute;top:15px;right:15px;width:30px;height:30px;opacity:.3;text-indent:-9999px;transition:opacity .25s ease-out}.main-overlay[_ngcontent-%COMP%]   .close-overlay-btn[_ngcontent-%COMP%]:hover{opacity:1}.main-overlay[_ngcontent-%COMP%]   .close-overlay-btn[_ngcontent-%COMP%]:after, .main-overlay[_ngcontent-%COMP%]   .close-overlay-btn[_ngcontent-%COMP%]:before{content:" ";position:absolute;left:15px;width:2px;height:33px;background-color:#313131}.main-overlay[_ngcontent-%COMP%]   .close-overlay-btn[_ngcontent-%COMP%]:before{transform:rotate(45deg)}.main-overlay[_ngcontent-%COMP%]   .close-overlay-btn[_ngcontent-%COMP%]:after{transform:rotate(-45deg)}.main-overlay[_ngcontent-%COMP%]   .back-preview-btn[_ngcontent-%COMP%]{position:absolute;top:7px;left:-34px;width:30px;height:30px;opacity:.3;text-indent:-9999px;transition:opacity .25s ease-out}.main-overlay[_ngcontent-%COMP%]   .back-preview-btn[_ngcontent-%COMP%]:hover{opacity:1}.main-overlay[_ngcontent-%COMP%]   .back-preview-btn[_ngcontent-%COMP%]:after, .main-overlay[_ngcontent-%COMP%]   .back-preview-btn[_ngcontent-%COMP%]:before{content:" ";position:absolute;left:15px;width:2px;height:15px;background-color:#313131}.main-overlay[_ngcontent-%COMP%]   .back-preview-btn[_ngcontent-%COMP%]:after{top:10px}.main-overlay[_ngcontent-%COMP%]   .back-preview-btn[_ngcontent-%COMP%]:before{transform:rotate(45deg)}.main-overlay[_ngcontent-%COMP%]   .back-preview-btn[_ngcontent-%COMP%]:after{transform:rotate(-45deg)}.main-overlay[_ngcontent-%COMP%]   .overlay-desc[_ngcontent-%COMP%]{display:inline-block;margin-top:-400px;width:calc(100% - 320px);vertical-align:top;transition:all .5s ease-out}.main-overlay[_ngcontent-%COMP%]   .overlay-desc.activated[_ngcontent-%COMP%]{display:inline-block;margin-top:0}.main-overlay[_ngcontent-%COMP%]   .overlay-preview[_ngcontent-%COMP%]{position:relative;display:inline-block;float:right;margin-top:40px;width:calc(100% - 310px);vertical-align:top;transition:all .5s ease-out}.main-overlay[_ngcontent-%COMP%]   .overlay-preview.activated[_ngcontent-%COMP%]{margin-top:-430px}.main-overlay[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]{padding-right:24px;padding-top:10px;display:block;display:-webkit-box;font-size:15px;line-height:1.5;-webkit-line-clamp:16;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;overflow:scroll;text-overflow:clip;font-weight:400}.main-overlay[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], .main-overlay[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Roboto Slab,serif}.main-overlay[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-weight:700}.main-overlay[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:400}.main-overlay[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:40px;width:100%;height:30px;background:hsla(0,0%,100%,0);background:linear-gradient(0deg,hsla(0,0%,100%,0) 0,hsla(0,0%,100%,0) 0,hsla(0,0%,100%,.8) 30%,#fff 80%)}.main-overlay[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]:after{content:"";position:absolute;left:0;bottom:0;width:100%;height:50px;background:hsla(0,0%,100%,0);background:linear-gradient(180deg,hsla(0,0%,100%,0) 0,hsla(0,0%,100%,0) 0,hsla(0,0%,100%,.8) 30%,#fff 80%)}.overlay-details[_ngcontent-%COMP%]{display:none}#footer[_ngcontent-%COMP%]{margin-top:60px;padding:15px 0 20px;border-top:1px solid #fff;background-color:rgba(49,49,49,.5)}#footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], #footer[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], #footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;font-size:12px;text-align:center}.long-text[_ngcontent-%COMP%], .long-text[_ngcontent-%COMP%] > *[_ngcontent-%COMP%], .long-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .long-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] > *[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{white-space:normal!important;word-wrap:break-word!important}.bold[_ngcontent-%COMP%]{font-weight:900}']}),we);function Le(t,e){1&t&&b.bc(0,"mat-progress-bar",7)}var Oe,Pe=((Oe=function(){function t(e,n){_classCallCheck(this,t),this.navParams=e,this.modalCtrl=n,this.loading=!1,this.scrollbarStyle=g.a.scrollbarStyle,this.library=e.data.library,this.user=e.data.user}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"dismiss",value:function(t){this.modalCtrl.dismiss(t)}}]),t}()).\u0275fac=function(t){return new(t||Oe)(b.ac(l.Fb),b.ac(l.Db))},Oe.\u0275cmp=b.Ub({type:Oe,selectors:[["app-my-books-libraries-modal"]],decls:10,vars:7,consts:[["translucent","true"],["slot","end"],[3,"disabled","click"],["name","close-outline"],["mode","indeterminate",4,"ngIf"],["fullscreen","true",3,"scrollbar"],[3,"user","library_id"],["mode","indeterminate"]],template:function(t,e){1&t&&(b.gc(0,"ion-header",0),b.gc(1,"ion-toolbar"),b.gc(2,"ion-title"),b.ed(3),b.fc(),b.gc(4,"ion-buttons",1),b.gc(5,"ion-button",2),b.oc("click",(function(){return e.dismiss()})),b.bc(6,"ion-icon",3),b.fc(),b.fc(),b.fc(),b.cd(7,Le,1,0,"mat-progress-bar",4),b.fc(),b.gc(8,"ion-content",5),b.bc(9,"book-user-template",6),b.fc()),2&t&&(b.Lb(3),b.hd(" ",null!=e.user?e.user.name:""," - ",null!=e.library?e.library.name:""," "),b.Lb(2),b.Ac("disabled",e.loading),b.Lb(2),b.Ac("ngIf",e.loading),b.Lb(1),b.Bc("scrollbar",e.scrollbarStyle),b.Lb(1),b.Ac("user",e.user)("library_id",e.library.uuid))},directives:[l.B,l.zb,l.xb,l.l,l.k,l.C,r.t,l.u,y.b,Me,rt.a],styles:[""]}),Oe),Ae=n("w3oG");function Se(t,e){1&t&&b.bc(0,"library-loading-animation")}var Ie=function(t){return{"image-active":t}};function De(t,e){if(1&t){var n=b.hc();b.gc(0,"div",17),b.gc(1,"p",18),b.gc(2,"strong"),b.ed(3,"Pin: "),b.fc(),b.ed(4),b.fc(),b.gc(5,"p",18),b.gc(6,"strong"),b.ed(7),b.tc(8,"translate"),b.fc(),b.ed(9),b.fc(),b.gc(10,"p",18),b.gc(11,"strong"),b.ed(12),b.tc(13,"translate"),b.fc(),b.ed(14),b.fc(),b.gc(15,"p",18),b.gc(16,"strong"),b.ed(17),b.tc(18,"translate"),b.fc(),b.ed(19),b.fc(),b.gc(20,"ion-button",19),b.oc("click",(function(){b.Sc(n);var t=e.$implicit;return b.sc(4).changeDateExpired(t)})),b.ed(21),b.tc(22,"translate"),b.fc(),b.fc()}if(2&t){var o=e.$implicit,a=e.index,c=b.sc(2).$implicit,i=b.sc(2);b.Ac("ngClass",b.Fc(17,Ie,c.selectecIndex==a)),b.Lb(4),b.fd(o.pin),b.Lb(3),b.gd("",b.uc(8,9,"pages.book.expired_in"),": "),b.Lb(2),b.fd(i.moment(o.date_expired).format("DD/MM/YYYY")),b.Lb(3),b.gd("",b.uc(13,11,"pages.book.expired_in"),": "),b.Lb(2),b.fd(i.moment(o.date_expired).fromNow()),b.Lb(3),b.gd("",b.uc(18,13,"pages.book.count_publish"),": "),b.Lb(2),b.fd(c.books_count),b.Lb(2),b.fd(b.uc(22,15,"buttons.change_date_expired"))}}var ze=function(t){return{active:t}};function qe(t,e){if(1&t){var n=b.hc();b.gc(0,"span",22),b.oc("click",(function(){b.Sc(n);var t=e.index,o=b.sc(3).$implicit;return b.sc(2).selectImage(o,t)})),b.fc()}if(2&t){var o=e.index,a=b.sc(3).$implicit;b.Ac("ngClass",b.Fc(1,ze,a.selectecIndex==o))}}function Re(t,e){if(1&t&&(b.gc(0,"div",20),b.cd(1,qe,1,3,"span",21),b.fc()),2&t){var n=b.sc(2).$implicit;b.Lb(1),b.Ac("ngForOf",n.pines)}}var Fe=function(t){return{disabled:t}};function Te(t,e){if(1&t){var n=b.hc();b.gc(0,"button",23),b.gc(1,"ion-icon",24),b.oc("click",(function(){b.Sc(n);var t=b.sc(2).$implicit;return b.sc(2).onPrevClick(t,0==t.selectecIndex)})),b.fc(),b.fc()}if(2&t){var o=b.sc(2).$implicit;b.Lb(1),b.Ac("ngClass",b.Fc(1,Fe,0==o.selectecIndex))}}function Be(t,e){if(1&t){var n=b.hc();b.gc(0,"button",25),b.gc(1,"ion-icon",26),b.oc("click",(function(){b.Sc(n);var t=b.sc(2).$implicit;return b.sc(2).onNextClick(t,t.pines.length-1==t.selectecIndex)})),b.fc(),b.fc()}if(2&t){var o=b.sc(2).$implicit;b.Lb(1),b.Ac("ngClass",b.Fc(1,Fe,o.pines.length-1==o.selectecIndex))}}function je(t,e){if(1&t&&(b.gc(0,"div",12),b.cd(1,De,23,19,"div",13),b.cd(2,Re,2,1,"div",14),b.cd(3,Te,2,3,"button",15),b.cd(4,Be,2,3,"button",16),b.fc()),2&t){var n=b.sc().$implicit;b.Lb(1),b.Ac("ngForOf",n.pines),b.Lb(1),b.Ac("ngIf",n.pines.length>1),b.Lb(1),b.Ac("ngIf",n.pines.length>1),b.Lb(1),b.Ac("ngIf",n.pines.length>1)}}var Ee=function(t){return{background:t,backgroundSize:"180px 255px"}};function $e(t,e){if(1&t){var n=b.hc();b.gc(0,"ion-list",8),b.gc(1,"div",9),b.oc("click",(function(){b.Sc(n);var t=e.$implicit;return b.sc(2).openLibraryBook(t)})),b.fc(),b.gc(2,"h3",10),b.gc(3,"strong"),b.ed(4),b.fc(),b.fc(),b.cd(5,je,5,4,"div",11),b.fc()}if(2&t){var o=e.$implicit;b.Lb(1),b.Ac("ngStyle",b.Fc(3,Ee,"url("+o.theme_url+")")),b.Lb(3),b.fd(o.name),b.Lb(1),b.Ac("ngIf",o.pines)}}var He=function(t,e,n){return{id:"foo-paginate-book",itemsPerPage:t,currentPage:e,totalItems:n}};function Ye(t,e){if(1&t&&(b.gc(0,"div",6),b.cd(1,$e,6,5,"ion-list",7),b.tc(2,"paginate"),b.fc()),2&t){var n=b.sc();b.Lb(1),b.Ac("ngForOf",b.vc(2,1,n.libraries,b.Hc(4,He,n.pageSize,n.thisPage,n.totalItems)))}}function Ge(t,e){1&t&&(b.gc(0,"div",27),b.bc(1,"books-animations",28),b.tc(2,"translate"),b.fc()),2&t&&(b.Lb(1),b.Ac("$text",b.uc(2,1,"pages.book.libraries_not_found")))}var Ue,Ne=((Ue=function(){function t(e,n,o,a,c,i){_classCallCheck(this,t),this.userService=e,this.controlErroresService=n,this.loadingkService=o,this.toastService=a,this.alertController=c,this.modalCtrl=i,this.scrollbarStyle=g.a.scrollbarStyle,this.thisPage=1,this.libraries=[],this.loading=!1,this.routeBooks=p.h.library_books+"/",this.pageSize=9,this.totalPages=0,this.totalItems=0,this.moment=x}return _createClass(t,[{key:"ngOnInit",value:function(){null!=this.user&&this.loadLibraries({page:this.thisPage})}},{key:"loadLibraries",value:function(t){var e=this;this.loading=!0,this.userService.getListLibraries(this.user.uuid,t).subscribe((function(t){e.loading=!1,t.data&&t.data.data&&Array.isArray(t.data.data)?(e.libraries=t.data.data,e.totalPages=t.data.last_page,e.totalItems=t.data.last_page*t.data.data.length,e.pageSize=t.data.number_paginate):e.controlErroresService.control({message:"Error al obtener datos"})}),(function(t){e.loading=!1,e.controlErroresService.control(t)}))}},{key:"pageChanged",value:function(t){if(console.log(t),t==1/0)return!1;this.thisPage=t,this.loadLibraries({page:this.thisPage})}},{key:"changeDate",value:function(t,e){var n=this;this.loadingkService.change(!0),this.userService.changeDateLibrary(this.user.uuid,t.uuid,e).subscribe((function(e){t.date_expired=e.data.date_expired,t.has_expired=e.data.has_expired,n.toastService.presentToast(e.message,e.status),n.loadingkService.change(!1)}),(function(t){n.controlErroresService.control(t),n.loadingkService.change(!1)}))}},{key:"changeDateExpired",value:function(t){return Object(Lt.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertController.create({cssClass:"",header:"Cambiar fecha de expiraci\xf3n",inputs:[{name:"date_expired",type:"date",placeholder:"Fecha de expiraci\xf3n"}],buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:function(){}},{text:"Cambiar",handler:function(e){o.changeDate(t,e)}}]});case 2:return n=e.sent,e.next=5,n.present();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"openLibraryBook",value:function(t){return Object(Lt.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalCtrl.create({component:Pe,cssClass:"modal-fullscreen-100",swipeToClose:!0,componentProps:{library:t,user:this.user}});case 2:return n=e.sent,e.next=5,n.present();case 5:return e.next=7,n.onWillDismiss();case 7:case"end":return e.stop()}}),e,this)})))}},{key:"selectImage",value:function(t,e){t.selectecIndex=e}},{key:"onPrevClick",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e||(0==t.selectecIndex?t.selectecIndex=t.pines.length-1:t.selectecIndex--)}},{key:"onNextClick",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e||(t.selectecIndex==t.pines.length-1?t.selectecIndex=0:t.selectecIndex++)}}]),t}()).\u0275fac=function(t){return new(t||Ue)(b.ac(se),b.ac(f.a),b.ac(de.a),b.ac(le.a),b.ac(l.b),b.ac(l.Db))},Ue.\u0275cmp=b.Ub({type:Ue,selectors:[["libraries-user-components"]],inputs:{user:"user"},decls:13,vars:21,consts:[[1,"text-center"],[4,"ngIf"],["class","container",4,"ngIf"],[1,"flex","flex-center"],["id","foo-paginate-book","maxSize","9","directionLinks","true","autoHide","true","responsive","true",3,"previousLabel","nextLabel","screenReaderPaginationLabel","screenReaderPageLabel","screenReaderCurrentLabel","pageChange","pageBoundsCorrection"],["class","flex flex-center mt-4",4,"ngIf"],[1,"container"],["class","box-out",4,"ngFor","ngForOf"],[1,"box-out"],[1,"book","books-1",3,"ngStyle","click"],[1,"text-center",2,"width","90%"],["class","carousel-container container",4,"ngIf"],[1,"carousel-container","container"],["class","panel-carousel-item",3,"ngClass",4,"ngFor","ngForOf"],["class","carousel-dot-container",4,"ngIf"],["class","btn-carousel btn-prev",4,"ngIf"],["class","btn-carousel btn-next",4,"ngIf"],[1,"panel-carousel-item",3,"ngClass"],[1,"author"],["color","danger","size","small",3,"click"],[1,"carousel-dot-container"],["class","dot",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"dot",3,"ngClass","click"],[1,"btn-carousel","btn-prev"],["name","chevron-back-outline",1,"icon-prev","icon-carousel",3,"ngClass","click"],[1,"btn-carousel","btn-next"],["name","chevron-forward-outline",1,"icon-next","icon-carousel",3,"ngClass","click"],[1,"flex","flex-center","mt-4"],[1,"relative",3,"$text"]],template:function(t,e){1&t&&(b.gc(0,"h2",0),b.ed(1),b.tc(2,"translate"),b.fc(),b.cd(3,Se,1,0,"library-loading-animation",1),b.cd(4,Ye,3,8,"div",2),b.gc(5,"div",3),b.gc(6,"pagination-controls",4),b.oc("pageChange",(function(t){return e.pageChanged(t)}))("pageBoundsCorrection",(function(t){return e.pageChanged(t)})),b.tc(7,"translate"),b.tc(8,"translate"),b.tc(9,"translate"),b.tc(10,"translate"),b.tc(11,"translate"),b.fc(),b.fc(),b.cd(12,Ge,3,3,"div",5)),2&t&&(b.Lb(1),b.fd(b.uc(2,9,"menu.library")),b.Lb(2),b.Ac("ngIf",e.loading),b.Lb(1),b.Ac("ngIf",!e.loading),b.Lb(2),b.Ac("previousLabel",b.uc(7,11,"paginate.previous"))("nextLabel",b.uc(8,13,"paginate.next"))("screenReaderPaginationLabel",b.uc(9,15,"paginate.pagination"))("screenReaderPageLabel",b.uc(10,17,"paginate.page"))("screenReaderCurrentLabel",b.uc(11,19,"paginate.in_your_page")),b.Lb(6),b.Ac("ngIf",0==e.libraries.length&&!e.loading))},directives:[r.t,Tt.c,Ae.a,r.s,l.O,r.w,r.q,l.k,l.C,Ft.a],pipes:[D.d,Tt.b],styles:['.container[_ngcontent-%COMP%]{justify-content:center;position:relative}.box-out[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap}.box-out[_ngcontent-%COMP%]{flex-direction:column}.box-inner[_ngcontent-%COMP%]{z-index:99;width:900px;display:flex;align-items:center;position:absolute;top:350px;overflow:hidden;background-color:#fff}.book[_ngcontent-%COMP%]{width:180px;height:255px;background-color:#3e4798;transition:all .3s ease-in-out;transform-origin:left center 0;transform-style:preserve-3d;border-top-right-radius:5px;border-bottom-right-radius:5px;-webkit-backface-visibility:hidden;overflow:hidden}.box-out[_ngcontent-%COMP%]   .book[_ngcontent-%COMP%]:after{content:" ";display:block;opacity:0;width:180px;height:255px;position:relative;left:8px;transition:all .3s ease}.box-out[_ngcontent-%COMP%]   .book[_ngcontent-%COMP%]:before{content:" ";z-index:999;display:block;width:20px;height:100px;opacity:0;position:absolute;top:-12px;right:8px;transition:all .25s;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD8AAABhCAYAAABh23lYAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHCSURBVHgB7dxPTsJAHMXxN7Xu3UhigobxJHACvQFwAr2BcgO8AZxE7uGiDZiQyEIW7oSOUyKbKgLS8u+9b9JNF818fum0XdWUhy9VEDZBGIdBGD6DsFM3bQYgTnjWhGdNeNaEZ0141oRnTXjWhGdNeNaEZ0141oRnTXjWhGdNeNaEZ0141oRnTXjWhGdNeNaEZ0141oRnTXjWhGdNeNaEZ0141oRnTXjWhGdNeNaEZ0141oRnTXjWhGdNeNZ2hR/7o+UcmnCIsaNCbLcU/RR8oB1bO/4+17l8ixoGeIBBBVvMXI0ih+L7Df2j8iiqnvgh+AVVUXDOTZvF4tNb2qC7DJ1tNgSDO78tblFQxeE92l+0NSjZDjaoMowqyYl7hDF15JzL+x+YHtxLgFq/ZO2m8LT4wsb90nUjmMD61XaRc7ng5+jBua29ntsecq6oIWyELxqdLe8h/GvPp+h0T28D/FezZ8Ip7pHgZt3X5NoPvH1BZ5sNIUTDL7C+6hBWxxt0gk+00tsOe96qH0zL8GO4pBtMg/YhoLMtG8Ii/EpfY4fSoiFk8UeFzpYdwhz/jiNGZ0uHEBjUEzftohJFZyAsdX8BM0/amLC3spYAAAAASUVORK5CYII=");background-size:16px;background-repeat:no-repeat}.books-1[_ngcontent-%COMP%]{min-width:180px;margin:10px 15px}.box-inner[_ngcontent-%COMP%]   .book[_ngcontent-%COMP%]{margin-left:90px;position:relative;top:-194px}.book[_ngcontent-%COMP%]:hover{cursor:pointer;transform:rotateY(-28deg) rotate(-2deg) scale(1.02);-webkit-backface-visibility:hidden;box-shadow:1px 3px 2px #353d85,20px 8px 0 #525dc4}.book[_ngcontent-%COMP%]:hover:after{content:" ";display:block;opacity:1;width:172px;height:255px;position:relative;left:8px;background:linear-gradient(-180deg,hsla(0,0%,100%,.1),hsla(0,0%,100%,0) 60%)}.book[_ngcontent-%COMP%]:hover:before{transform:translateY(9px);opacity:1}.dr[_ngcontent-%COMP%]{position:absolute;bottom:16px;right:16px;width:100px}.carousel-container[_ngcontent-%COMP%]{position:relative;margin:auto;text-align:center;border-radius:15px;box-shadow:0 6px 12px #dce1e1}.carousel-container[_ngcontent-%COMP%]   .panel-carousel-item[_ngcontent-%COMP%]{display:none;border-radius:15px}.carousel-container[_ngcontent-%COMP%]   .panel-carousel-item.image-active[_ngcontent-%COMP%]{display:block;width:100%;padding-bottom:20px}.carousel-dot-container[_ngcontent-%COMP%]{position:absolute;right:0;left:0;bottom:0;display:flex;justify-content:center;padding:0;margin-bottom:1 rem}.dot[_ngcontent-%COMP%]{cursor:pointer;height:13px;width:13px;margin:0 5px;background-color:var(--ion-color-primary);border-radius:50%;display:inline-block;transition:opacity .6s;opacity:.6}.active[_ngcontent-%COMP%], .dot[_ngcontent-%COMP%]:hover{opacity:1}.fade[_ngcontent-%COMP%]{-webkit-animation-name:fade;animation-name:fade;-webkit-animation-duration:1.5s;animation-duration:1.5s}.btn-carousel[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;display:flex;align-items:center;justify-content:center;width:15%;padding:0;color:var(--ion-color-primary);text-align:center;background:0 0;border:0;cursor:pointer}.btn-prev[_ngcontent-%COMP%]{left:0}.icon-carousel[_ngcontent-%COMP%]{color:var(--ion-color-primary);opacity:.5;transition:all .15s ease}.icon-carousel.disabled[_ngcontent-%COMP%]{color:var(--ion-color-medium)}.icon-carousel[_ngcontent-%COMP%]:hover{opacity:.9}.icon-carousel[_ngcontent-%COMP%]:active{opacity:.5}.btn-next[_ngcontent-%COMP%], .icon-prev[_ngcontent-%COMP%]{font-size:35px}.btn-next[_ngcontent-%COMP%]{right:0}@-webkit-keyframes fade{0%{opacity:.4}to{opacity:1}}@keyframes fade{0%{opacity:.4}to{opacity:1}}']}),Ue),Qe=n("gcOT"),We=n("w0c1"),Ze=n("qIrB"),Ve=n("NITd"),Xe=["theLastReferencePost"];function Je(t,e){1&t&&b.bc(0,"mat-progress-bar",8)}function Ke(t,e){if(1&t&&b.bc(0,"panel-instructions-activity",18),2&t){var n=e.$implicit,o=b.sc(2);b.Ac("activity",n)("course",o.course)("show_button_open",!1)("expanded_panel",!1)("route_activity",o.route_activity)("show_details_assignments",!0)}}function tn(t,e){1&t&&(b.gc(0,"ion-card"),b.gc(1,"ion-card-header"),b.gc(2,"ion-card-title",19),b.ed(3),b.tc(4,"translate"),b.fc(),b.gc(5,"ion-card-subtitle"),b.bc(6,"ion-icon",20),b.ed(7),b.tc(8,"translate"),b.fc(),b.fc(),b.fc()),2&t&&(b.Lb(3),b.fd(b.uc(4,2,"pages.course.activities_crate_welcome_student")),b.Lb(4),b.gd(" ",b.uc(8,4,"pages.course.response_activities_post")," "))}function en(t,e){if(1&t&&(b.gc(0,"ion-grid",9),b.gc(1,"ion-row",10),b.gc(2,"ion-col",11),b.bc(3,"filters-course",12),b.fc(),b.gc(4,"ion-col",13),b.gc(5,"ion-grid"),b.gc(6,"ion-col",14),b.cd(7,Ke,1,6,"panel-instructions-activity",15),b.bc(8,"span",null,16),b.cd(10,tn,9,6,"ion-card",17),b.fc(),b.fc(),b.fc(),b.fc(),b.fc()),2&t){var n=b.sc();b.Lb(3),b.Ac("required",n.allowFilters)("course_id",n.course.uuid)("buttons",n.buttons_all),b.Lb(4),b.Ac("ngForOf",n.activities),b.Lb(3),b.Ac("ngIf",0==n.activities.length)}}var nn,on=((nn=function(){function t(e,n,o,a){_classCallCheck(this,t),this.navParams=e,this.userService=n,this.modalCtrl=o,this.applyFiltersModeService=a,this.totalPages=0,this.this_page=1,this.activities=[],this.scrollbarStyle=g.a.scrollbarStyle,this.loading=!1,this.button_search_all={color:"warning",size:"small",mode:"search-act",disabled:!1,title:"buttons.search",icon:"search-outline"},this.buttons_all=[this.button_search_all],this.course=e.data.course,this.user=e.data.user,this.paramsFilters={type:"all",block_id:null,semester_id:null},this.allowFilters={start_publish_at:1,end_publish_at:1,end_created_at:1,start_created_at:1,theme:1,block:1,title:1,semester:1,min_qualification_percentage:1,max_qualification_percentage:1,type_activity:1}}return _createClass(t,[{key:"applyFilters",value:function(t){if(!t)return!1;if(!t.mode||!t.filters)return!1;switch(t.mode){case"search-act":this.getItemsActivities(!0,t.filters)}}},{key:"ngOnInit",value:function(){var t=this;this.getItemsActivities(!1,this.paramsFilters),this.applyFiltersModeService.get$().subscribe((function(e){t.applyFilters(e)}))}},{key:"dismiss",value:function(t){this.modalCtrl.dismiss(t)}},{key:"ngAfterViewInit",value:function(){var t=this;setTimeout((function(){t.intersectionObserver(),t.theLastReferencePost.changes.subscribe((function(e){e.last&&t.observer.observe(e.last.nativeElement)}))}))}},{key:"intersectionObserver",value:function(){var t=this;this.observer=new IntersectionObserver((function(e){e[0].isIntersecting&&t.totalPages>=t.this_page&&t.getItemsActivities(!1,t.paramsFilters)}),{root:null,rootMargin:"0px",threshold:.5})}},{key:"getItemsActivities",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,e&&(this.activities=[],this.this_page=1),n.page=this.this_page,this.userService.getActivitiesByUser(this.user.uuid,this.course.uuid,n).subscribe((function(e){t.activities=t.activities.concat(e.data),t.totalPages=e.last_page,t.loading=!1,t.this_page++}),(function(e){t.loading=!1}))}}]),t}()).\u0275fac=function(t){return new(t||nn)(b.ac(l.Fb),b.ac(se),b.ac(l.Db),b.ac(v.a))},nn.\u0275cmp=b.Ub({type:nn,selectors:[["app-activities-course-user"]],viewQuery:function(t,e){var n;1&t&&b.ld(Xe,!0,b.o),2&t&&b.Nc(n=b.pc())&&(e.theLastReferencePost=n)},decls:12,vars:8,consts:[["translucent","true"],["slot","end"],[3,"disabled","click"],["name","close-outline"],["mode","indeterminate",4,"ngIf"],["fullscreen","true",3,"scrollbar"],["content",""],["class","w-100 flex flex-center",4,"ngIf"],["mode","indeterminate"],[1,"w-100","flex","flex-center"],[1,"w-100"],["size","12","size-sm","12"],[3,"required","course_id","buttons"],["size","12","size-sm","12",1,"all-activities-panel"],["size","12"],[3,"activity","course","show_button_open","expanded_panel","route_activity","show_details_assignments",4,"ngFor","ngForOf"],["theLastReferencePost",""],[4,"ngIf"],[3,"activity","course","show_button_open","expanded_panel","route_activity","show_details_assignments"],[2,"color","var(--ion-color-primary)"],["name","chatbox-ellipses-outline"]],template:function(t,e){1&t&&(b.gc(0,"ion-header",0),b.gc(1,"ion-toolbar"),b.gc(2,"ion-title"),b.ed(3),b.tc(4,"translate"),b.fc(),b.gc(5,"ion-buttons",1),b.gc(6,"ion-button",2),b.oc("click",(function(){return e.dismiss()})),b.bc(7,"ion-icon",3),b.fc(),b.fc(),b.fc(),b.cd(8,Je,1,0,"mat-progress-bar",4),b.fc(),b.gc(9,"ion-content",5,6),b.cd(11,en,11,5,"ion-grid",7),b.fc()),2&t&&(b.Lb(3),b.hd(" ",null!=e.user?e.user.name:b.uc(4,6,"forms.loading_user")," - ",null!=e.course?e.course.name+" "+(null!=e.course.section?e.course.section:""):""," "),b.Lb(3),b.Ac("disabled",e.loading),b.Lb(2),b.Ac("ngIf",e.loading),b.Lb(1),b.Bc("scrollbar",e.scrollbarStyle),b.Lb(2),b.Ac("ngIf",e.course))},directives:[l.B,l.zb,l.xb,l.l,l.k,l.C,r.t,l.u,y.b,rt.a,l.A,l.gb,l.t,Ze.a,r.s,Ve.a,l.m,l.o,l.q,l.p],pipes:[D.d],styles:[".fsz-ac-ads[_ngcontent-%COMP%]{font-size:3em;text-align:center;margin:0}.p-2[_ngcontent-%COMP%]{padding:20px}.m-0[_ngcontent-%COMP%]{margin:0}"]}),nn),an=n("wx9n");function cn(t,e){1&t&&b.bc(0,"card-load-animation",11),2&t&&b.Ac("count",8)}function rn(t,e){1&t&&(b.ec(0),b.bc(1,"card-load-animation",14),b.dc()),2&t&&(b.Lb(1),b.Ac("count",1)("all_width",!0))}function sn(t,e){if(1&t&&(b.gc(0,"span"),b.ed(1),b.fc()),2&t){var n=b.sc(2).$implicit;b.Lb(1),b.fd(n.section)}}function ln(t,e){if(1&t){var n=b.hc();b.gc(0,"div"),b.gc(1,"ion-button",28),b.oc("click",(function(){b.Sc(n);var t=b.sc(2).$implicit;return b.sc(2).openCourseQualification(t)})),b.tc(2,"translate"),b.bc(3,"ion-icon",32),b.fc(),b.fc()}2&t&&(b.Lb(1),b.Ac("matTooltip",b.uc(2,1,"pages.course.qualifications")))}function dn(t,e){if(1&t&&(b.gc(0,"ion-button",33),b.tc(1,"translate"),b.gc(2,"a",34),b.bc(3,"ion-icon",35),b.fc(),b.fc()),2&t){var n=b.sc(2).$implicit;b.Bc("href",n.reference_url),b.Ac("matTooltip",b.uc(1,3,"pages.course.virtual_class")),b.Lb(2),b.Bc("href",n.reference_url,b.Vc)}}function un(t,e){if(1&t){var n=b.hc();b.ec(0),b.gc(1,"div",15),b.gc(2,"div",16),b.gc(3,"div",17),b.gc(4,"span",18),b.oc("click",(function(){b.Sc(n);var t=b.sc().$implicit;return b.sc(2).openCourse(t)})),b.ed(5),b.cd(6,sn,2,1,"span",13),b.fc(),b.gc(7,"div",19),b.gc(8,"span",20),b.oc("click",(function(){b.Sc(n);var t=b.sc().$implicit;return b.sc(2).copyCode(t.code)})),b.ed(9),b.fc(),b.gc(10,"span",21),b.ed(11,"\u2022"),b.fc(),b.ed(12),b.fc(),b.fc(),b.fc(),b.gc(13,"div",22),b.gc(14,"div",23),b.bc(15,"img",24),b.fc(),b.gc(16,"span",25),b.oc("click",(function(){b.Sc(n);var t=b.sc().$implicit;return b.sc(2).openCourse(t)})),b.ed(17),b.fc(),b.gc(18,"div",26),b.gc(19,"strong"),b.ed(20),b.tc(21,"translate"),b.fc(),b.ed(22,": "),b.gc(23,"span"),b.ed(24),b.fc(),b.fc(),b.gc(25,"div",26),b.gc(26,"strong"),b.ed(27),b.tc(28,"translate"),b.fc(),b.ed(29,": "),b.gc(30,"span"),b.ed(31),b.fc(),b.fc(),b.gc(32,"div",26),b.gc(33,"strong"),b.ed(34),b.tc(35,"translate"),b.fc(),b.ed(36,": "),b.gc(37,"span"),b.ed(38),b.fc(),b.fc(),b.fc(),b.gc(39,"div",27),b.gc(40,"div"),b.gc(41,"ion-button",28),b.oc("click",(function(){b.Sc(n);var t=b.sc().$implicit;return b.sc(2).openCourse(t)})),b.tc(42,"translate"),b.bc(43,"ion-icon",29),b.fc(),b.fc(),b.cd(44,ln,4,3,"div",13),b.gc(45,"div"),b.gc(46,"ion-button",28),b.oc("click",(function(){b.Sc(n);var t=b.sc().$implicit;return b.sc(2).openCourseDashboard(t)})),b.tc(47,"translate"),b.bc(48,"ion-icon",30),b.fc(),b.fc(),b.gc(49,"div"),b.cd(50,dn,4,5,"ion-button",31),b.fc(),b.fc(),b.fc(),b.dc()}if(2&t){var o=b.sc().$implicit,a=b.sc(2);b.Lb(1),b.Ac("ngClass","border_status_color_"+o.status),b.Lb(4),b.gd("",o.name," "),b.Lb(1),b.Ac("ngIf",o.section),b.Lb(3),b.fd(o.code),b.Lb(3),b.gd(" ",a.moment(o.date_created).format("d/m/Y")," "),b.Lb(3),b.Bc("src",o.theme_url,b.Vc),b.Lb(2),b.fd(o.subject),b.Lb(3),b.fd(b.uc(21,17,"pages.course.count_activities")),b.Lb(4),b.fd(o.activities_count),b.Lb(3),b.fd(b.uc(28,19,"pages.course.avg_course")),b.Lb(4),b.gd("",o.avg_qualification,"%"),b.Lb(3),b.fd(b.uc(35,21,"pages.course.students")),b.Lb(4),b.fd(o.students_count),b.Lb(3),b.Ac("matTooltip",b.uc(42,23,"pages.course.activities")),b.Lb(3),b.Ac("ngIf",o.user_create.uuid!=a.user.uuid),b.Lb(2),b.Ac("matTooltip",b.uc(47,25,"pages.course.dashboard")),b.Lb(4),b.Ac("ngIf",null!=o.reference_url)}}function gn(t,e){if(1&t&&(b.gc(0,"ion-col",12),b.cd(1,rn,2,2,"ng-container",13),b.cd(2,un,51,27,"ng-container",13),b.fc()),2&t){var n=b.sc(2);b.Lb(1),b.Ac("ngIf",n.loadingPresent),b.Lb(1),b.Ac("ngIf",!n.loadingPresent)}}function fn(t,e){if(1&t){var n=b.hc();b.gc(0,"div",2),b.gc(1,"ion-grid",3),b.gc(2,"ion-row",4),b.gc(3,"ion-col",5),b.gc(4,"ion-card",6),b.gc(5,"ion-card-header",7),b.oc("click",(function(){b.Sc(n);var t=b.sc();return t.loadCoursesByUsersId(t.user,"active")})),b.gc(6,"ion-card-title",8),b.ed(7),b.fc(),b.gc(8,"ion-card-subtitle",8),b.ed(9),b.tc(10,"translate"),b.fc(),b.fc(),b.fc(),b.fc(),b.gc(11,"ion-col",5),b.gc(12,"ion-card",6),b.gc(13,"ion-card-header",7),b.oc("click",(function(){b.Sc(n);var t=b.sc();return t.loadCoursesByUsersId(t.user,"archived")})),b.gc(14,"ion-card-title",8),b.ed(15),b.fc(),b.gc(16,"ion-card-subtitle",8),b.ed(17),b.tc(18,"translate"),b.fc(),b.fc(),b.fc(),b.fc(),b.fc(),b.cd(19,cn,1,1,"card-load-animation",9),b.gc(20,"ion-row",4),b.cd(21,gn,3,2,"ion-col",10),b.fc(),b.fc(),b.fc()}if(2&t){var o=b.sc();b.Lb(7),b.fd(o.user.my_courses_active_count),b.Lb(2),b.fd(b.uc(10,6,"pages.reports.courses_actives")),b.Lb(6),b.fd(o.user.my_courses_archived_count),b.Lb(2),b.fd(b.uc(18,8,"pages.reports.courses_archived")),b.Lb(2),b.Ac("ngIf",o.loadingCourses),b.Lb(2),b.Ac("ngForOf",o.courses)}}var pn,bn=Qe.c.Clipboard,hn=((pn=function(){function t(e,n){_classCallCheck(this,t),this.userService=e,this.modalCtrl=n,this.moment=x,this.courses=[],this.loadingCourses=!1}return _createClass(t,[{key:"ngOnInit",value:function(){null!=this.user&&(console.log(this.user,"COURSES"),this.loadCoursesByUsersId(this.user))}},{key:"loadCoursesByUsersId",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"active";this.loadingCourses=!0,this.courses=[],this.userService.getCoursesById(t.uuid,n).subscribe((function(t){e.loadingCourses=!1,e.courses=t.data}),(function(t){e.loadingCourses=!1}))}},{key:"openCourse",value:function(t){return Object(Lt.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalCtrl.create({component:on,cssClass:"modal-fullscreen-100",swipeToClose:!0,componentProps:{user:this.user,course:t}});case 2:return n=e.sent,e.next=5,n.present();case 5:return e.next=7,n.onWillDismiss();case 7:case"end":return e.stop()}}),e,this)})))}},{key:"openCourseQualification",value:function(t){return Object(Lt.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalCtrl.create({component:We.a,cssClass:"modal-fullscreen-100",swipeToClose:!0,componentProps:{course:t,user:this.user}});case 2:return n=e.sent,e.next=5,n.present();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"openCourseDashboard",value:function(t){return Object(Lt.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalCtrl.create({component:an.a,cssClass:"modal-fullscreen-100",swipeToClose:!0,componentProps:{course:t,user:this.user,course_id:t.uuid}});case 2:return n=e.sent,e.next=5,n.present();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"copyCode",value:function(t){return Object(Lt.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bn.write({string:t});case 2:case"end":return e.stop()}}),e)})))}}]),t}()).\u0275fac=function(t){return new(t||pn)(b.ac(se),b.ac(l.Db))},pn.\u0275cmp=b.Ub({type:pn,selectors:[["courses-users-template"]],inputs:{user:"user"},decls:4,vars:4,consts:[[1,"text-center","bold"],["class","container",4,"ngIf"],[1,"container"],[1,"grid-shuffle"],["id","grid",1,"row"],["size","6"],[1,"c-pointer"],[1,"c-pointer",3,"click"],[1,"text-center"],[3,"count",4,"ngIf"],["size","12","size-sm","6","size-md","4","size-xl","3","class","",4,"ngFor","ngForOf"],[3,"count"],["size","12","size-sm","6","size-md","4","size-xl","3",1,""],[4,"ngIf"],[3,"count","all_width"],[1,"intro-y","box",3,"ngClass"],[1,"flex","items-center","border-b","border-gray-200","dark:border-dark-5"],[1,"ml-3","mr-auto"],[1,"text-theme-1","dark:text-theme-10","inline-block","truncate","c-pointer",3,"click"],[1,"flex","text-gray-600","truncate","text-xs","mt-0.5"],[1,"text-theme-1","dark:text-theme-10","inline-block","truncate","c-pointer",2,"font-size","1.2em",3,"click"],[1,"mx-1"],[1,"p-2"],[1,"h-40","xxl:h-56","image-fit"],["alt","--",1,"rounded-md",3,"src"],[1,"text-theme-1","dark:text-theme-10","inline-block","truncate","c-pointer","block","font-medium","text-base","mt-2","ml-2",3,"click"],[1,"text-gray-700","dark:text-gray-600","mt-1"],[1,"flex-center",2,"display","flex","flex-wrap","wrap"],["fill","outline","shape","round","size","small",3,"matTooltip","click"],["name","planet-outline"],["name","pie-chart-outline"],["fill","outline","shape","round","size","small","target","_blank",3,"matTooltip","href",4,"ngIf"],["name","albums-outline"],["fill","outline","shape","round","size","small","target","_blank",3,"matTooltip","href"],["target","_blank",3,"href"],["name","laptop-outline"]],template:function(t,e){1&t&&(b.gc(0,"h2",0),b.ed(1),b.tc(2,"translate"),b.fc(),b.cd(3,fn,22,10,"div",1)),2&t&&(b.Lb(1),b.fd(b.uc(2,2,"pages.course.courses")),b.Lb(2),b.Ac("ngIf",e.user))},directives:[r.t,l.A,l.gb,l.t,l.m,l.o,l.q,l.p,r.s,st.a,r.q,l.k,ue.a,l.C],pipes:[D.d],styles:["@media (max-width:550px){ion-card-header[_ngcontent-%COMP%]{padding:0}}.border_status_color_archived[_ngcontent-%COMP%]{border:1px solid var(--ion-color-warning)}.border_status_color_active[_ngcontent-%COMP%]{border:1px solid var(--ion-color-primary)}"]}),pn);function mn(t,e){1&t&&b.bc(0,"mat-progress-bar",10)}function _n(t,e){if(1&t&&(b.gc(0,"p"),b.gc(1,"strong"),b.ed(2),b.tc(3,"translate"),b.fc(),b.ed(4),b.fc()),2&t){var n=b.sc(3);b.Lb(2),b.gd("",b.uc(3,2,"forms.country"),": "),b.Lb(2),b.gd(" ",n.user.information.country.name,"")}}function vn(t,e){if(1&t&&(b.gc(0,"p"),b.gc(1,"strong"),b.ed(2),b.tc(3,"translate"),b.fc(),b.ed(4),b.fc()),2&t){var n=b.sc(3);b.Lb(2),b.gd("",b.uc(3,2,"forms.state"),": "),b.Lb(2),b.gd(" ",n.user.information.state.name,"")}}function yn(t,e){if(1&t&&(b.gc(0,"p"),b.gc(1,"strong"),b.ed(2),b.tc(3,"translate"),b.fc(),b.ed(4),b.fc()),2&t){var n=b.sc(3);b.Lb(2),b.gd("",b.uc(3,2,"forms.city"),": "),b.Lb(2),b.gd(" ",n.user.information.city.name,"")}}function kn(t,e){if(1&t&&(b.gc(0,"p"),b.gc(1,"strong"),b.ed(2),b.tc(3,"translate"),b.fc(),b.ed(4),b.fc()),2&t){var n=b.sc(3);b.Lb(2),b.gd("",b.uc(3,2,"forms.school"),": "),b.Lb(2),b.gd(" ",n.user.information.school.name,"")}}function xn(t,e){if(1&t&&(b.ec(0),b.cd(1,_n,5,4,"p",7),b.cd(2,vn,5,4,"p",7),b.cd(3,yn,5,4,"p",7),b.cd(4,kn,5,4,"p",7),b.dc()),2&t){var n=b.sc(2);b.Lb(1),b.Ac("ngIf",n.user.information.country),b.Lb(1),b.Ac("ngIf",n.user.information.state),b.Lb(1),b.Ac("ngIf",n.user.information.city),b.Lb(1),b.Ac("ngIf",n.user.information.school)}}var Cn=function(t){return{height:t}};function wn(t,e){if(1&t&&(b.gc(0,"td",29),b.gc(1,"div",30),b.bc(2,"div",31),b.gc(3,"div",32),b.ed(4," ."),b.fc(),b.gc(5,"p",33),b.ed(6),b.fc(),b.gc(7,"p",33),b.ed(8),b.fc(),b.fc(),b.fc()),2&t){var n=e.$implicit,o=b.sc(3);b.Lb(2),b.Ac("ngStyle",b.Fc(5,Cn,300-n.avg_height)),b.Lb(1),b.Ac("ngStyle",b.Fc(7,Cn,n.avg_height+"px"))("matTooltip",(0!=o.moment(n.time_avg,"HH:mm:ss").hour()?o.moment(n.time_avg,"HH:mm:ss").hour()+" hora(s) - ":"")+o.moment(n.time_avg,"HH:mm:ss").minutes()+" min"),b.Lb(3),b.fd(n.day_of_weeK),b.Lb(2),b.fd(o.moment(n.time_avg,"HH:mm:ss").hour()>=1?o.moment(n.time_avg,"HH:mm:ss").hour()+" hora(s)":o.moment(n.time_avg,"HH:mm:ss").minutes()+" min")}}function Mn(t,e){if(1&t&&(b.gc(0,"ion-row"),b.gc(1,"ion-col",26),b.gc(2,"ion-card"),b.gc(3,"ion-card-content"),b.gc(4,"h3",20),b.ed(5),b.tc(6,"translate"),b.fc(),b.gc(7,"ion-grid"),b.gc(8,"ion-row"),b.gc(9,"ion-col",21),b.gc(10,"p"),b.ed(11),b.tc(12,"translate"),b.bc(13,"br"),b.gc(14,"strong"),b.ed(15),b.fc(),b.fc(),b.fc(),b.gc(16,"ion-col",21),b.gc(17,"p"),b.ed(18),b.tc(19,"translate"),b.bc(20,"br"),b.gc(21,"strong"),b.ed(22),b.fc(),b.fc(),b.fc(),b.fc(),b.fc(),b.gc(23,"table",27),b.gc(24,"tr"),b.cd(25,wn,9,9,"td",28),b.fc(),b.fc(),b.fc(),b.fc(),b.fc(),b.fc()),2&t){var n=b.sc(2);b.Lb(5),b.fd(b.uc(6,6,"pages.reports.time_for_day")),b.Lb(6),b.fd(b.uc(12,8,"pages.reports.avg_this_week")),b.Lb(4),b.gd(" ",n.moment(n.user.avg_time_week,"HH:mm:ss").format("HH:mm"),""),b.Lb(3),b.fd(b.uc(19,10,"pages.reports.avg_this_month")),b.Lb(4),b.fd(n.moment(n.user.avg_time_month,"HH:mm:ss").format("HH:mm")),b.Lb(3),b.Ac("ngForOf",n.user.time_week)}}function Ln(t,e){if(1&t&&(b.gc(0,"ion-grid"),b.gc(1,"ion-row"),b.gc(2,"ion-col",11),b.gc(3,"div",12),b.gc(4,"div",13),b.gc(5,"div",14),b.bc(6,"img",15),b.fc(),b.fc(),b.fc(),b.fc(),b.gc(7,"ion-col",11),b.gc(8,"div",16),b.gc(9,"h3",17),b.gc(10,"strong"),b.ed(11),b.fc(),b.fc(),b.gc(12,"p",17),b.gc(13,"strong"),b.ed(14),b.tc(15,"translate"),b.fc(),b.ed(16),b.fc(),b.gc(17,"p",17),b.gc(18,"strong"),b.ed(19),b.tc(20,"translate"),b.fc(),b.gc(21,"span",18),b.ed(22),b.fc(),b.fc(),b.cd(23,xn,5,4,"ng-container",7),b.fc(),b.fc(),b.gc(24,"ion-col",11),b.gc(25,"div"),b.gc(26,"ion-grid"),b.gc(27,"ion-col",19),b.gc(28,"h2",20),b.ed(29),b.tc(30,"translate"),b.fc(),b.fc(),b.fc(),b.gc(31,"ion-grid"),b.gc(32,"ion-row"),b.gc(33,"ion-col",21),b.gc(34,"p",22),b.gc(35,"strong",23),b.ed(36),b.bc(37,"ion-icon",24),b.fc(),b.fc(),b.gc(38,"p",20),b.ed(39),b.tc(40,"translate"),b.fc(),b.fc(),b.gc(41,"ion-col",21),b.gc(42,"p",22),b.gc(43,"strong",23),b.ed(44),b.fc(),b.bc(45,"ion-icon",25),b.fc(),b.gc(46,"p",20),b.ed(47),b.tc(48,"translate"),b.fc(),b.fc(),b.fc(),b.fc(),b.fc(),b.fc(),b.gc(49,"ion-col",11),b.gc(50,"div"),b.gc(51,"ion-grid"),b.gc(52,"ion-grid"),b.gc(53,"ion-col",19),b.gc(54,"h2",20),b.ed(55),b.tc(56,"translate"),b.fc(),b.fc(),b.fc(),b.gc(57,"ion-row"),b.gc(58,"ion-col",21),b.gc(59,"p",22),b.gc(60,"strong",23),b.ed(61),b.fc(),b.bc(62,"ion-icon",24),b.fc(),b.gc(63,"p",20),b.ed(64),b.tc(65,"translate"),b.fc(),b.fc(),b.gc(66,"ion-col",21),b.gc(67,"p",22),b.gc(68,"strong",23),b.ed(69),b.fc(),b.bc(70,"ion-icon",25),b.fc(),b.gc(71,"p",20),b.ed(72),b.tc(73,"translate"),b.fc(),b.fc(),b.fc(),b.fc(),b.fc(),b.fc(),b.fc(),b.cd(74,Mn,26,12,"ion-row",7),b.fc()),2&t){var n=b.sc();b.Lb(6),b.Ac("src",n.user.information&&n.user.information.image_url||n.picture,b.Vc),b.Lb(5),b.hd("",n.user.last_name," ",n.user.first_name,""),b.Lb(3),b.gd("",b.uc(15,20,"forms.email"),": "),b.Lb(2),b.fd(n.user.email),b.Lb(3),b.gd("",b.uc(20,22,"statuses.status"),": "),b.Lb(2),b.Ac("ngClass"," badge-ng-pers color-"+n.user.status),b.Lb(1),b.gd(" ",n.user.status_lang," "),b.Lb(1),b.Ac("ngIf",n.user.information),b.Lb(6),b.fd(b.uc(30,24,"pages.reports.books")),b.Lb(7),b.gd("",n.user.pines_availables_count," "),b.Lb(3),b.fd(b.uc(40,26,"pages.reports.pines_availables_count")),b.Lb(5),b.fd(n.user.pines_expired_count),b.Lb(3),b.fd(b.uc(48,28,"pages.reports.pines_expired_count")),b.Lb(8),b.fd(b.uc(56,30,"pages.reports.libraries")),b.Lb(6),b.fd(n.user.libraries_actives_count),b.Lb(3),b.fd(b.uc(65,32,"pages.reports.pines_availables_count")),b.Lb(5),b.fd(n.user.libraries_inactives_count),b.Lb(3),b.fd(b.uc(73,34,"pages.reports.pines_expired_count")),b.Lb(2),b.Ac("ngIf",n.user.time_week)}}function On(t,e){if(1&t&&b.bc(0,"book-user-template",34),2&t){var n=b.sc();b.Ac("user",n.user)("show_change_date",!0)}}function Pn(t,e){if(1&t&&b.bc(0,"libraries-user-components",35),2&t){var n=b.sc();b.Ac("user",n.user)}}function An(t,e){if(1&t&&(b.gc(0,"div"),b.bc(1,"courses-users-template",35),b.fc()),2&t){var n=b.sc();b.Lb(1),b.Ac("user",n.user)}}var Sn,In=((Sn=function(){function t(e,n,o,a,c,i){var r=this;_classCallCheck(this,t),this.modalCtrl=e,this.navParams=n,this.userService=o,this.reportUserService=a,this.controlErroresService=c,this.loadingkService=i,this.scrollbarStyle=g.a.scrollbarStyle,this.loading=!1,this.picture=g.a.profile,this.loadBooks=!1,this.loadCourses=!1,this.moment=x,this.required_show_templates={},this.loadLibraries=!1,this.user_search=n.data.user_search,i.get$().subscribe((function(t){r.loading=t}));var s=n.data.required_show_templates;s&&(this.required_show_templates=s)}return _createClass(t,[{key:"ngOnInit",value:function(){this.findUser()}},{key:"findUser",value:function(){var t=this;this.loading=!0,this.userService.find(this.user_search.uuid).subscribe((function(e){t.user=e.data,t.user.pines_availables_count+t.user.pines_expired_count>0&&1==t.required_show_templates.books&&(t.loadBooks=!0),1==t.required_show_templates.libraries&&(t.loadLibraries=!0),1==e.data.have_courses&&1==t.required_show_templates.courses&&(t.loadCourses=!0),t.loading=!1}),(function(e){t.loading=!1,t.controlErroresService.control(e),t.dismiss()}))}},{key:"dismiss",value:function(t){this.modalCtrl.dismiss(t)}}]),t}()).\u0275fac=function(t){return new(t||Sn)(b.ac(l.Db),b.ac(l.Fb),b.ac(se),b.ac(m),b.ac(f.a),b.ac(de.a))},Sn.\u0275cmp=b.Ub({type:Sn,selectors:[["app-modal-show-information-user"]],decls:15,vars:10,consts:[["translucent","true"],["slot","end"],[3,"disabled","click"],["name","close-outline"],["mode","indeterminate",4,"ngIf"],["fullscreen","true",3,"scrollbar"],["content",""],[4,"ngIf"],[3,"user","show_change_date",4,"ngIf"],[3,"user",4,"ngIf"],["mode","indeterminate"],["size","12","size-sm","6","size-md","4","size-xl","3"],[1,"w-52","mx-auto","xl:mr-0","xl:ml-6"],[1,"border-2","border-dashed","shadow-sm","border-gray-200","dark:border-dark-5","rounded-md","m-3"],[1,"h-40","relative","image-fit","cursor-pointer","zoom-in","mx-auto"],["alt","--",1,"rounded-sm",3,"src"],[1,"p-3"],[1,"text-center-small"],[1,"badge",3,"ngClass"],["size","12"],[1,"text-center"],["size","6"],[1,"text-center","p-0"],[2,"font-size","1.6em"],["name","key-outline","color","success",1,"button-sm-custom"],["name","key-outline","color","warning",1,"button-sm-custom"],["size","12","size-sm","6","size-md","6"],[2,"width","100%"],["class","col-item-linebar",4,"ngFor","ngForOf"],[1,"col-item-linebar"],[1,"col-line-fx","flex-fend-axis-y","flex-y"],[3,"ngStyle"],[1,"col-line-fx-inter",3,"ngStyle","matTooltip"],[2,"text-align","center","margin","0 auto"],[3,"user","show_change_date"],[3,"user"]],template:function(t,e){1&t&&(b.gc(0,"ion-header",0),b.gc(1,"ion-toolbar"),b.gc(2,"ion-title"),b.ed(3),b.tc(4,"translate"),b.fc(),b.gc(5,"ion-buttons",1),b.gc(6,"ion-button",2),b.oc("click",(function(){return e.dismiss()})),b.bc(7,"ion-icon",3),b.fc(),b.fc(),b.fc(),b.cd(8,mn,1,0,"mat-progress-bar",4),b.fc(),b.gc(9,"ion-content",5,6),b.cd(11,Ln,75,36,"ion-grid",7),b.cd(12,On,1,2,"book-user-template",8),b.cd(13,Pn,1,1,"libraries-user-components",9),b.cd(14,An,2,1,"div",7),b.fc()),2&t&&(b.Lb(3),b.gd(" ",null!=e.user?e.user.name:b.uc(4,8,"forms.loading_user")," "),b.Lb(3),b.Ac("disabled",e.loading),b.Lb(2),b.Ac("ngIf",e.loading),b.Lb(1),b.Bc("scrollbar",e.scrollbarStyle),b.Lb(2),b.Ac("ngIf",e.user),b.Lb(1),b.Ac("ngIf",e.loadBooks&&1==e.required_show_templates.books),b.Lb(1),b.Ac("ngIf",e.loadLibraries&&1==e.required_show_templates.libraries),b.Lb(1),b.Ac("ngIf",e.loadCourses&&1==e.required_show_templates.courses))},directives:[l.B,l.zb,l.xb,l.l,l.k,l.C,r.t,l.u,y.b,rt.a,l.A,l.gb,l.t,r.q,l.m,l.n,r.s,r.w,ue.a,Me,Ne,hn],pipes:[D.d],styles:['@media (max-width:575px){.text-center-small[_ngcontent-%COMP%]{text-align:center}}.col-line-fx[_ngcontent-%COMP%]{min-width:2.5EM;height:300px}.col-item-linebar[_ngcontent-%COMP%]{height:300px}.col-line-fx-inter[_ngcontent-%COMP%]{width:10px;border-radius:5px;background:var(--ion-color-primary);text-align:"center";margin:auto auto 0}.flex-fend-axis-y[_ngcontent-%COMP%]{align-items:flex-end;display:flex}']}),Sn),Dn=n("g31X");function zn(t,e){1&t&&b.bc(0,"mat-progress-bar",11)}function qn(t,e){1&t&&b.bc(0,"card-load-animation",12),2&t&&b.Ac("count",1)("all_width",!0)}var Rn=function(t){return{height:t}};function Fn(t,e){if(1&t&&(b.gc(0,"td",17),b.gc(1,"div",18),b.bc(2,"div",19),b.gc(3,"div",20),b.tc(4,"formatTimeStr"),b.ed(5," ."),b.fc(),b.gc(6,"p",21),b.ed(7),b.fc(),b.gc(8,"p",21),b.ed(9),b.tc(10,"formatTimeStr"),b.fc(),b.fc(),b.fc()),2&t){var n=e.$implicit,o=b.sc(2);b.Lb(2),b.Ac("ngStyle",b.Fc(10,Rn,300-n.avg_height)),b.Lb(1),b.Ac("ngStyle",b.Fc(12,Rn,n.avg_height+"px"))("matTooltip",b.uc(4,5,n.time_avg)),b.Lb(4),b.fd(o.moment(n.date,"YYYY-MM").format("MMM-YYYY")),b.Lb(2),b.fd(b.vc(10,7,n.time_avg,"minimal"))}}function Tn(t,e){if(1&t&&(b.gc(0,"ion-card"),b.gc(1,"ion-card-content"),b.gc(2,"h3",13),b.ed(3),b.tc(4,"translate"),b.fc(),b.gc(5,"ion-grid"),b.gc(6,"ion-row"),b.gc(7,"ion-col",14),b.gc(8,"p"),b.ed(9),b.tc(10,"translate"),b.gc(11,"strong"),b.ed(12),b.fc(),b.ed(13,": "),b.gc(14,"strong"),b.ed(15),b.tc(16,"formatTimeStr"),b.fc(),b.fc(),b.gc(17,"p"),b.ed(18),b.tc(19,"translate"),b.gc(20,"strong"),b.ed(21),b.fc(),b.ed(22,": "),b.gc(23,"strong"),b.ed(24),b.fc(),b.ed(25),b.fc(),b.fc(),b.fc(),b.fc(),b.gc(26,"table",15),b.gc(27,"tr"),b.cd(28,Fn,11,14,"td",16),b.fc(),b.fc(),b.fc(),b.fc()),2&t){var n=b.sc();b.Lb(3),b.fd(b.uc(4,9,"pages.reports.time_hpd")),b.Lb(6),b.gd("",b.uc(10,11,"pages.reports.avg_this_year")," "),b.Lb(3),b.fd(n.timerMonthData.this_year),b.Lb(3),b.fd(b.uc(16,13,n.timerMonthData.avg_time_year)),b.Lb(3),b.gd("",b.uc(19,15,"pages.reports.avg_this_year")," "),b.Lb(3),b.fd(n.timerMonthData.this_year),b.Lb(3),b.fd(n.moment(n.timerMonthData.avg_time_year,"HH:mm:ss").format("HH")),b.Lb(1),b.gd(" - ",n.moment(n.timerMonthData.avg_time_year,"HH:mm:ss").format("mm")," min"),b.Lb(3),b.Ac("ngForOf",n.timerMonthData.time_week)}}function Bn(t,e){1&t&&b.bc(0,"card-load-animation",12),2&t&&b.Ac("count",1)("all_width",!0)}function jn(t,e){if(1&t&&(b.gc(0,"td",17),b.gc(1,"div",18),b.bc(2,"div",19),b.gc(3,"div",20),b.tc(4,"formatTimeStr"),b.ed(5," ."),b.fc(),b.gc(6,"p",21),b.ed(7),b.fc(),b.gc(8,"p",21),b.ed(9),b.tc(10,"formatTimeStr"),b.fc(),b.fc(),b.fc()),2&t){var n=e.$implicit;b.Lb(2),b.Ac("ngStyle",b.Fc(10,Rn,300-n.avg_height)),b.Lb(1),b.Ac("ngStyle",b.Fc(12,Rn,n.avg_height+"px"))("matTooltip",b.uc(4,5,n.time_avg)),b.Lb(4),b.fd(n.day_of_weeK),b.Lb(2),b.fd(b.vc(10,7,n.time_avg,"minimal"))}}function En(t,e){if(1&t&&(b.gc(0,"ion-card"),b.gc(1,"ion-card-content"),b.gc(2,"h3",13),b.ed(3),b.tc(4,"translate"),b.fc(),b.gc(5,"ion-grid"),b.gc(6,"ion-row"),b.gc(7,"ion-col",14),b.gc(8,"p"),b.ed(9),b.tc(10,"translate"),b.bc(11,"br"),b.gc(12,"strong"),b.ed(13),b.tc(14,"formatTimeStr"),b.fc(),b.fc(),b.fc(),b.gc(15,"ion-col",14),b.gc(16,"p"),b.ed(17),b.tc(18,"translate"),b.gc(19,"strong"),b.ed(20),b.fc(),b.bc(21,"br"),b.gc(22,"strong"),b.ed(23),b.tc(24,"formatTimeStr"),b.fc(),b.fc(),b.fc(),b.fc(),b.fc(),b.gc(25,"table",15),b.gc(26,"tr"),b.cd(27,jn,11,14,"td",16),b.fc(),b.fc(),b.fc(),b.fc()),2&t){var n=b.sc();b.Lb(3),b.fd(b.uc(4,7,"pages.reports.time_for_day")),b.Lb(6),b.fd(b.uc(10,9,"pages.reports.avg_this_week")),b.Lb(4),b.gd("",b.uc(14,11,n.timerWeekData.avg_time_week)," "),b.Lb(4),b.gd("",b.uc(18,13,"pages.reports.avg_this_month")," "),b.Lb(3),b.fd(n.timerWeekData.this_month),b.Lb(3),b.gd(" ",b.uc(24,15,n.timerWeekData.avg_time_month)," "),b.Lb(4),b.Ac("ngForOf",n.timerWeekData.time_week)}}var $n,Hn=(($n=function(){function t(e,n,o){_classCallCheck(this,t),this.modalCtrl=e,this.reportUserService=n,this.controlErroresService=o,this.loading=!1,this.scrollbarStyle=g.a.scrollbarStyle,this.moment=x,this.loadingsMode={month:!1,week:!1}}return _createClass(t,[{key:"ngOnInit",value:function(){this.getMonthData(),this.getWeekData()}},{key:"getWeekData",value:function(){var t=this;this.loadingsMode.week=!0,this.reportUserService.getInformationReportWeek().subscribe((function(e){t.loadingsMode.week=!1,t.timerWeekData=e.data}),(function(e){t.loadingsMode.week=!1,t.controlErroresService.control(e)}))}},{key:"getMonthData",value:function(){var t=this;this.loadingsMode.month=!0,this.reportUserService.getInformationReportMonthly().subscribe((function(e){t.loadingsMode.month=!1,t.timerMonthData=e.data}),(function(e){t.loadingsMode.month=!1,t.controlErroresService.control(e)}))}},{key:"dismiss",value:function(t){this.modalCtrl.dismiss(t)}}]),t}()).\u0275fac=function(t){return new(t||$n)(b.ac(l.Db),b.ac(m),b.ac(f.a))},$n.\u0275cmp=b.Ub({type:$n,selectors:[["app-graphs-activity-users"]],decls:19,vars:10,consts:[["translucent","true"],["slot","end"],[3,"disabled","click"],["name","close-outline"],["mode","indeterminate",4,"ngIf"],["fullscreen","true",3,"scrollbar"],["content",""],["size","12"],[3,"count","all_width",4,"ngIf"],[4,"ngIf"],["size","12","size-sm","6","size-md","6"],["mode","indeterminate"],[3,"count","all_width"],[1,"text-center"],["size","6"],[2,"width","100%"],["class","col-item-linebar",4,"ngFor","ngForOf"],[1,"col-item-linebar"],[1,"col-line-fx","flex-fend-axis-y","flex-y"],[3,"ngStyle"],[1,"col-line-fx-inter",3,"ngStyle","matTooltip"],[2,"text-align","center","margin","0 auto"]],template:function(t,e){1&t&&(b.gc(0,"ion-header",0),b.gc(1,"ion-toolbar"),b.gc(2,"ion-title"),b.ed(3),b.tc(4,"translate"),b.fc(),b.gc(5,"ion-buttons",1),b.gc(6,"ion-button",2),b.oc("click",(function(){return e.dismiss()})),b.bc(7,"ion-icon",3),b.fc(),b.fc(),b.fc(),b.cd(8,zn,1,0,"mat-progress-bar",4),b.fc(),b.gc(9,"ion-content",5,6),b.gc(11,"ion-grid"),b.gc(12,"ion-row"),b.gc(13,"ion-col",7),b.cd(14,qn,1,2,"card-load-animation",8),b.cd(15,Tn,29,17,"ion-card",9),b.fc(),b.gc(16,"ion-col",10),b.cd(17,Bn,1,2,"card-load-animation",8),b.cd(18,En,28,17,"ion-card",9),b.fc(),b.fc(),b.fc(),b.fc()),2&t&&(b.Lb(3),b.gd(" ",b.uc(4,8,"pages.reports.data_activity_graph")," "),b.Lb(3),b.Ac("disabled",e.loading),b.Lb(2),b.Ac("ngIf",e.loading),b.Lb(1),b.Bc("scrollbar",e.scrollbarStyle),b.Lb(5),b.Ac("ngIf",e.loadingsMode.month),b.Lb(1),b.Ac("ngIf",e.timerMonthData),b.Lb(2),b.Ac("ngIf",e.loadingsMode.week),b.Lb(1),b.Ac("ngIf",e.timerWeekData))},directives:[l.B,l.zb,l.xb,l.l,l.k,l.C,r.t,l.u,y.b,l.A,l.gb,l.t,rt.a,st.a,l.m,l.n,r.s,r.w,ue.a],pipes:[D.d,Dn.a],styles:['@media (max-width:575px){.text-center-small[_ngcontent-%COMP%]{text-align:center}}.col-line-fx[_ngcontent-%COMP%]{min-width:2.5EM;height:300px}.col-item-linebar[_ngcontent-%COMP%]{height:300px}.col-line-fx-inter[_ngcontent-%COMP%]{width:10px;border-radius:5px;background:var(--ion-color-primary);text-align:"center";margin:auto auto 0}.flex-fend-axis-y[_ngcontent-%COMP%]{align-items:flex-end;display:flex}']}),$n),Yn=n("OMi/"),Gn=n("+0xr"),Un=n("Xa2L");function Nn(t,e){1&t&&(b.gc(0,"ion-buttons",47),b.bc(1,"ion-menu-button"),b.fc())}function Qn(t,e){1&t&&(b.gc(0,"ion-title"),b.ed(1),b.tc(2,"translate"),b.fc()),2&t&&(b.Lb(1),b.fd(b.uc(2,1,"pages.reports.users_reports")))}function Wn(t,e){if(1&t){var n=b.hc();b.gc(0,"ion-searchbar",48),b.oc("ngModelChange",(function(t){return b.Sc(n),b.sc().queryText=t}))("ionChange",(function(){return b.Sc(n),b.sc().searchItems(!0)}))("ionCancel",(function(){return b.Sc(n),b.sc().showSearchbar=!1})),b.tc(1,"translate"),b.fc()}if(2&t){var o=b.sc();b.Bc("placeholder",b.uc(1,2,"forms.search")),b.Ac("ngModel",o.queryText)}}function Zn(t,e){if(1&t){var n=b.hc();b.gc(0,"ion-button",49),b.oc("click",(function(){return b.Sc(n),b.sc().openModalStadistics()})),b.tc(1,"translate"),b.bc(2,"ion-icon",14),b.fc()}2&t&&b.Ac("matTooltip",b.uc(1,1,"pages.reports.data_activity_graph"))}function Vn(t,e){if(1&t){var n=b.hc();b.gc(0,"ion-button",50),b.oc("click",(function(){return b.Sc(n),b.sc().showSearchbar=!0})),b.bc(1,"ion-icon",51),b.fc()}}function Xn(t,e){1&t&&b.bc(0,"mat-progress-bar",52)}function Jn(t,e){1&t&&b.bc(0,"card-load-animation",53),2&t&&b.Ac("count",1)("all_width",!0)}function Kn(t,e){1&t&&b.bc(0,"mat-spinner")}function to(t,e){if(1&t&&(b.gc(0,"div",54),b.cd(1,Kn,1,0,"mat-spinner",2),b.fc()),2&t){var n=b.sc();b.Lb(1),b.Ac("ngIf",n.isLoadingResults)}}function eo(t,e){1&t&&(b.gc(0,"th",55),b.ed(1),b.tc(2,"translate"),b.fc()),2&t&&(b.Lb(1),b.fd(b.uc(2,1,"pages.reports.last_name")))}function no(t,e){if(1&t&&(b.gc(0,"td",56),b.gc(1,"ion-item"),b.gc(2,"div",57),b.bc(3,"img",58),b.fc(),b.gc(4,"div",59),b.gc(5,"span",60),b.ed(6),b.fc(),b.fc(),b.fc(),b.fc()),2&t){var n=e.$implicit,o=b.sc();b.Lb(3),b.Ac("src",null!=n&&null!=n.information?n.information.image_url:o.profile_img_route,b.Vc),b.Lb(3),b.gd("",n.last_name," ")}}function oo(t,e){1&t&&(b.gc(0,"th",61),b.ed(1),b.tc(2,"translate"),b.fc()),2&t&&(b.Lb(1),b.fd(b.uc(2,1,"pages.reports.first_name")))}function ao(t,e){if(1&t&&(b.gc(0,"td",62),b.gc(1,"span",60),b.ed(2),b.fc(),b.fc()),2&t){var n=e.$implicit;b.Lb(2),b.gd(" ",n.first_name," ")}}function co(t,e){1&t&&(b.gc(0,"th",61),b.ed(1),b.tc(2,"translate"),b.fc()),2&t&&(b.Lb(1),b.fd(b.uc(2,1,"pages.reports.email")))}function io(t,e){if(1&t&&(b.gc(0,"td",62),b.ed(1),b.fc()),2&t){var n=e.$implicit;b.Lb(1),b.fd(n.email)}}function ro(t,e){1&t&&(b.gc(0,"th",63),b.ed(1),b.tc(2,"translate"),b.fc()),2&t&&(b.Lb(1),b.fd(b.uc(2,1,"pages.reports.type_user")))}function so(t,e){if(1&t&&(b.gc(0,"span",65),b.ed(1),b.fc()),2&t){var n=e.$implicit;b.Lb(1),b.fd(n.description)}}function lo(t,e){if(1&t&&(b.gc(0,"td",56),b.cd(1,so,2,1,"span",64),b.fc()),2&t){var n=e.$implicit;b.Lb(1),b.Ac("ngForOf",n.roles)}}function uo(t,e){1&t&&(b.gc(0,"th",61),b.ed(1),b.tc(2,"translate"),b.fc()),2&t&&(b.Lb(1),b.fd(b.uc(2,1,"pages.reports.pines_availables_count")))}function go(t,e){if(1&t&&(b.gc(0,"td",66),b.ed(1),b.fc()),2&t){var n=e.$implicit;b.Lb(1),b.gd(" ",n.pines_availables_count,"")}}function fo(t,e){1&t&&(b.gc(0,"th",61),b.ed(1),b.tc(2,"translate"),b.fc()),2&t&&(b.Lb(1),b.gd("",b.uc(2,1,"pages.reports.pines_expired_count")," "))}function po(t,e){if(1&t&&(b.gc(0,"td",66),b.ed(1),b.fc()),2&t){var n=e.$implicit;b.Lb(1),b.gd(" ",n.pines_expired_count,"")}}function bo(t,e){1&t&&(b.gc(0,"th",61),b.ed(1),b.tc(2,"translate"),b.fc()),2&t&&(b.Lb(1),b.gd("",b.uc(2,1,"pages.reports.libraries_count")," "))}function ho(t,e){if(1&t&&(b.gc(0,"td",66),b.ed(1),b.fc()),2&t){var n=e.$implicit;b.Lb(1),b.gd(" ",n.libraries_count,"")}}function mo(t,e){1&t&&(b.gc(0,"th",67),b.ed(1),b.tc(2,"translate"),b.fc()),2&t&&(b.Lb(1),b.gd(" ",b.uc(2,1,"pages.reports.created_at")," "))}function _o(t,e){if(1&t&&(b.gc(0,"td",62),b.ed(1),b.fc()),2&t){var n=e.$implicit,o=b.sc();b.Lb(1),b.gd(" ",o.moment(n.date_created).format("DD/MMMM/YYYY"),"")}}function vo(t,e){1&t&&(b.gc(0,"th",68),b.ed(1),b.tc(2,"translate"),b.fc()),2&t&&(b.Lb(1),b.gd(" ",b.uc(2,1,"statuses.status")," "))}function yo(t,e){if(1&t&&(b.gc(0,"td",62),b.gc(1,"span",69),b.ed(2),b.fc(),b.fc()),2&t){var n=e.$implicit;b.Lb(1),b.Ac("ngClass"," badge-ng-pers color-"+n.status),b.Lb(1),b.gd(" ",n.status_lang," ")}}function ko(t,e){1&t&&(b.gc(0,"th",67),b.ed(1),b.tc(2,"translate"),b.fc()),2&t&&(b.Lb(1),b.gd(" ",b.uc(2,1,"pages.reports.last_activity")," "))}function xo(t,e){if(1&t&&(b.gc(0,"span"),b.ed(1),b.fc()),2&t){var n=b.sc().$implicit,o=b.sc();b.Lb(1),b.gd(" ",o.moment(n.oneview.start_date).format("DD/MM/YYYY HH:mm")," ")}}function Co(t,e){if(1&t&&(b.gc(0,"td",62),b.cd(1,xo,2,1,"span",2),b.fc()),2&t){var n=e.$implicit;b.Lb(1),b.Ac("ngIf",n.oneview)}}function wo(t,e){1&t&&(b.gc(0,"th",68),b.ed(1),b.tc(2,"translate"),b.fc()),2&t&&(b.Lb(1),b.gd(" ",b.uc(2,1,"pages.reports.actions")," "))}function Mo(t,e){if(1&t){var n=b.hc();b.gc(0,"button",70),b.oc("click",(function(){b.Sc(n);var t=b.sc().$implicit;return b.sc().delete(t)})),b.tc(1,"translate"),b.bc(2,"ion-icon",74),b.fc()}2&t&&b.Ac("matTooltip",b.uc(1,1,"buttons.delete"))}function Lo(t,e){if(1&t){var n=b.hc();b.gc(0,"td",62),b.gc(1,"button",70),b.oc("click",(function(){b.Sc(n);var t=e.$implicit;return b.sc().showInformation(t)})),b.tc(2,"translate"),b.bc(3,"ion-icon",71),b.fc(),b.gc(4,"button",70),b.oc("click",(function(){b.Sc(n);var t=e.$implicit;return b.sc().changePassword(t)})),b.tc(5,"translate"),b.bc(6,"ion-icon",72),b.fc(),b.cd(7,Mo,3,3,"button",73),b.fc()}if(2&t){var o=e.$implicit;b.Lb(1),b.Ac("matTooltip",b.uc(2,3,"pages.reports.information")),b.Lb(3),b.Ac("matTooltip",b.uc(5,5,"pages.reports.change-password")),b.Lb(3),b.Ac("ngIf",1!=o.is_protected)}}function Oo(t,e){1&t&&b.bc(0,"tr",75)}function Po(t,e){1&t&&b.bc(0,"tr",76)}(a=u.a).register.apply(a,_toConsumableArray(u.b));var Ao,So=((Ao=function(){function t(e,n,o,a,c,i,r,s,l){_classCallCheck(this,t),this.applyFiltersModeService=e,this.controlErroresService=n,this.reportUserService=o,this.sizePanelService=a,this.alertController=c,this.toastService=i,this.userService=r,this.modalCtrl=s,this.router=l,this.showSearchbar=!1,this.scrollbarStyle=g.a.scrollbarStyle,this.pageSize=1,this.displayedColumns=["last_name","first_name","email","role","pines_availables_count","pines_expired_count","libraries_count","last_activity","created_at","status","actions"],this.data=[],this.profile_img_route="/assets/images/profile-8.jpg",this.loading=!1,this.moment=x,this.queryText="",this.roles=[],this.button_donwload={color:"danger",size:"small",mode:"download",icon:"cloud-download-outline",disabled:!1,title:"buttons.download"},this.button_export={color:"success",size:"small",mode:"export",icon:"download-outline",disabled:!1,title:"buttons.export"},this.button_search={color:"warning",size:"small",mode:"search",disabled:!1,title:"buttons.search",icon:"search-outline"},this.buttons_filters=[this.button_search,this.button_export,this.button_donwload],this.chart_father={chart:null},this.datesRange={start_date:null,end_date:null},this.loadingCharts=!1,this.resultsLength=0,this.isLoadingResults=!0,this.isRateLimitReached=!1,this.timeoutID=null,this.moment.locale("es"),this.allowFilters={end_date:1,start_date:1,roles:1,count_max_pines:1,count_min_pines:1,mode_library_or_book:1,count_max_libraries:1,count_min_libraries:1,countries:1,states:1,cities:1,schools:1,status:1,last_name:1,first_name:1,have_connect_days:1}}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.rxjsFilters=this.applyFiltersModeService.get$().subscribe((function(e){t.applyFilters(e)})),setTimeout((function(){t.sizePanelService.changeSizePanel("2000px")}),2e3)}},{key:"ngAfterViewInit",value:function(){this.loadData(!0)}},{key:"ngOnDestroy",value:function(){this.sizePanelService.changeSizePanel("lg"),this.rxjsFilters.unsubscribe()}},{key:"searchItems",value:function(){var t=this;this.timeoutID&&clearTimeout(this.timeoutID),this.timeoutID=setTimeout((function(){return t.loadData(!0)}),1e3)}},{key:"loadData",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e&&(this.paginator.pageIndex=0),n||(n={}),this.loadingCharts=!0,n.get_libraries_count=1,Object(ne.a)(this.sort.sortChange,this.paginator.page).pipe(Object(ae.a)({}),Object(ce.a)((function(){return n.sort=t.sort.active,n.order=t.sort.direction,n.page=t.paginator.pageIndex+1,n.q=t.queryText,t.isLoadingResults=!0,t.reportUserService.getInformation(n).pipe(Object(ie.a)((function(){return Object(oe.a)(null)})))})),Object(re.a)((function(e){return t.isLoadingResults=!1,t.isRateLimitReached=null===e,null===e?[]:(t.datesRange.start_date=e.start_date,t.datesRange.end_date=e.end_date,t.loadGraficoGeneral(e.report_months.map((function(t){return t.date_format})),e.report_months.map((function(t){return t.count}))),t.loadingCharts=!1,t.resultsLength=e.total_pg,t.pageSize=e.page_size,e.items)}))).subscribe((function(e){return t.data=e}))}},{key:"delete",value:function(t){return Object(Lt.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertController.create({header:"Eliminar",message:"\xbfDesea eliminar este usuario?",buttons:[{text:"Cancelar",role:"cancel"},{text:"Eliminar",role:"destructive",handler:function(){o.userService.delete(t.uuid).subscribe((function(t){o.loadData(!0),o.toastService.presentToast(t.message,t.status)}),(function(t){o.controlErroresService.control(t)}))}}]});case 2:return n=e.sent,e.next=5,n.present();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"showInformation",value:function(t){return Object(Lt.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalCtrl.create({component:In,cssClass:"modal-fullscreen-100",swipeToClose:!0,componentProps:{user_search:t,required_show_templates:{books:1,courses:1,libraries:1}}});case 2:return n=e.sent,e.next=5,n.present();case 5:return e.next=7,n.onWillDismiss();case 7:case"end":return e.stop()}}),e,this)})))}},{key:"changePassword",value:function(t){return Object(Lt.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertController.create({cssClass:"",header:"Cambiar contrase\xf1a",inputs:[{name:"password",type:"password",placeholder:"Contrase\xf1a"}],buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:function(){}},{text:"Cambiar",handler:function(e){o.userService.changePassword({password:e.password,id:t.uuid}).subscribe((function(t){o.toastService.presentToast(t.message,t.status)}),(function(t){o.controlErroresService.control(t)}))}}]});case 2:return n=e.sent,e.next=5,n.present();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"applyFilters",value:function(t){if(!t)return!1;if(!t.mode||!t.filters)return!1;switch(t.mode){case"search":this.loadData(!0,t.filters);break;case"download":this.downloadData(t.filters);break;case"export":this.exportData(t.filters)}}},{key:"openModalStadistics",value:function(){return Object(Lt.b)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.modalCtrl.create({component:Hn,cssClass:"modal-fullscreen-100",swipeToClose:!0,componentProps:{}});case 2:return e=t.sent,t.next=5,e.present();case 5:return t.next=7,e.onWillDismiss();case 7:case"end":return t.stop()}}),t,this)})))}},{key:"exportData",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.button_export.disabled=!0,this.loading=!0,this.reportUserService.exportData(e).subscribe((function(e){t.loading=!1,t.button_export.disabled=!1;var n=new Blob([e],{type:e.type}),o=t.toExportFileName("Listado de usuarios","xlsx");Object(_.saveAs)(n,o)}),(function(e){t.button_export.disabled=!1,t.controlErroresService.control(e),t.loading=!1}))}},{key:"downloadData",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.button_donwload.disabled=!0,this.loading=!0,this.reportUserService.downloadData(e).subscribe((function(e){t.loading=!1;var n=new Blob([e],{type:e.type}),o=t.toExportFileName("Listado de usuarios","pdf");t.button_donwload.disabled=!1,Object(_.saveAs)(n,o)}),(function(e){t.button_donwload.disabled=!1,t.controlErroresService.control(e),t.loading=!1}))}},{key:"toExportFileName",value:function(t,e){return"".concat(t,"_").concat((new Date).getTime(),".").concat(e)}},{key:"loadGraficoGeneral",value:function(t,e){null!=this.chart_father.chart&&this.chart_father.chart.destroy(),this.chart_father.chart=new u.a("chart_father_report",{type:"line",data:{labels:t,datasets:[{label:this.datesRange.start_date+" - "+this.datesRange.end_date,data:e,backgroundColor:"rgba(0, 156, 224, 1)",borderColor:"rgba(0, 156, 224, 1)",borderWidth:1}]},options:{scales:{y:{beginAtZero:!0}}}}),this.chart_father.chart.update()}}]),t}()).\u0275fac=function(t){return new(t||Ao)(b.ac(v.a),b.ac(f.a),b.ac(m),b.ac(Yn.a),b.ac(l.b),b.ac(le.a),b.ac(se),b.ac(l.Db),b.ac(d.f))},Ao.\u0275cmp=b.Ub({type:Ao,selectors:[["app-users-reports-admin"]],viewQuery:function(t,e){var n;1&t&&(b.ld(te.a,!0),b.ld(ee.a,!0)),2&t&&(b.Nc(n=b.pc())&&(e.paginator=n.first),b.Nc(n=b.pc())&&(e.sort=n.first))},decls:69,vars:27,consts:[["translucent","true"],["slot","start",4,"ngIf"],[4,"ngIf"],["showCancelButton","always",3,"ngModel","placeholder","ngModelChange","ionChange","ionCancel",4,"ngIf"],["slot","end"],[3,"matTooltip","click",4,"ngIf"],[3,"click",4,"ngIf"],["mode","indeterminate",4,"ngIf"],["fullscreen","true",3,"scrollbar"],[3,"required","buttons"],[1,"mt-2","no-padding-small-500"],["hideToggle","",3,"expanded"],[2,"padding","0"],[2,"width","100%"],["name","bar-chart-outline"],[1,"padding-small-sm"],["size","12","size-sm","6",2,"margin","0 auto"],[3,"count","all_width",4,"ngIf"],[3,"ngClass"],[3,"id"],[1,"example-container","mat-elevation-z8","scroll-div-content"],["class","example-loading-shade",4,"ngIf"],[1,"example-table-container"],["tabindex","0",1,"example-container","mat-elevation-z8"],["mat-table","","matSort","","matSortActive","created_at","matSortDisableClear","","matSortDirection","asc",1,"example-table",3,"dataSource"],["matColumnDef","last_name","sticky",""],["mat-header-cell","","mat-sort-header","","class","text-center",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","first_name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","","style","padding-right: 20px;",4,"matCellDef"],["matColumnDef","email"],["matColumnDef","role"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","pines_availables_count"],["class","text-center","mat-cell","","style","padding-right: 20px;",4,"matCellDef"],["matColumnDef","pines_expired_count"],["matColumnDef","libraries_count"],["matColumnDef","created_at"],["mat-header-cell","","mat-sort-header","","disableClear","",4,"matHeaderCellDef"],["matColumnDef","status"],["mat-header-cell","","disableClear","",4,"matHeaderCellDef"],["matColumnDef","last_activity"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["aria-label","Resultados",3,"length","pageSize"],["slot","start"],["showCancelButton","always",3,"ngModel","placeholder","ngModelChange","ionChange","ionCancel"],[3,"matTooltip","click"],[3,"click"],["slot","icon-only","name","search"],["mode","indeterminate"],[3,"count","all_width"],[1,"example-loading-shade"],["mat-header-cell","","mat-sort-header","",1,"text-center"],["mat-cell",""],[1,"w-10","h-10","flex-none","image-fit"],["alt","--",1,"rounded-full",3,"src"],[1,"ml-3"],[1,"font-medium"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",2,"padding-right","20px"],["mat-header-cell",""],["style","padding-right: 20px;",4,"ngFor","ngForOf"],[2,"padding-right","20px"],["mat-cell","",1,"text-center",2,"padding-right","20px"],["mat-header-cell","","mat-sort-header","","disableClear",""],["mat-header-cell","","disableClear",""],[1,"badge",3,"ngClass"],[1,"button-sm-custom",3,"matTooltip","click"],["color","primary","name","person-outline"],["color","warning","name","lock-closed-outline"],["class","button-sm-custom",3,"matTooltip","click",4,"ngIf"],["color","danger","name","trash-outline"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(b.gc(0,"ion-header",0),b.gc(1,"ion-toolbar"),b.cd(2,Nn,2,0,"ion-buttons",1),b.cd(3,Qn,3,3,"ion-title",2),b.cd(4,Wn,2,4,"ion-searchbar",3),b.gc(5,"ion-buttons",4),b.cd(6,Zn,3,3,"ion-button",5),b.cd(7,Vn,2,0,"ion-button",6),b.fc(),b.fc(),b.cd(8,Xn,1,0,"mat-progress-bar",7),b.fc(),b.gc(9,"ion-content",8),b.bc(10,"filters-users",9),b.gc(11,"ion-card",10),b.gc(12,"mat-expansion-panel",11),b.gc(13,"mat-expansion-panel-header",12),b.gc(14,"mat-panel-title"),b.gc(15,"ion-item",13),b.bc(16,"ion-icon",14),b.ed(17),b.tc(18,"translate"),b.tc(19,"translate"),b.fc(),b.fc(),b.fc(),b.gc(20,"ion-card-content",15),b.gc(21,"ion-grid"),b.gc(22,"ion-row"),b.gc(23,"ion-col",16),b.cd(24,Jn,1,2,"card-load-animation",17),b.gc(25,"div",18),b.gc(26,"canvas",19),b.ed(27),b.fc(),b.fc(),b.fc(),b.fc(),b.fc(),b.fc(),b.fc(),b.fc(),b.gc(28,"div",20),b.cd(29,to,2,1,"div",21),b.gc(30,"div",22),b.gc(31,"section",23),b.gc(32,"table",24),b.ec(33,25),b.cd(34,eo,3,3,"th",26),b.cd(35,no,7,2,"td",27),b.dc(),b.ec(36,28),b.cd(37,oo,3,3,"th",29),b.cd(38,ao,3,1,"td",30),b.dc(),b.ec(39,31),b.cd(40,co,3,3,"th",29),b.cd(41,io,2,1,"td",30),b.dc(),b.ec(42,32),b.cd(43,ro,3,3,"th",33),b.cd(44,lo,2,1,"td",27),b.dc(),b.ec(45,34),b.cd(46,uo,3,3,"th",29),b.cd(47,go,2,1,"td",35),b.dc(),b.ec(48,36),b.cd(49,fo,3,3,"th",29),b.cd(50,po,2,1,"td",35),b.dc(),b.ec(51,37),b.cd(52,bo,3,3,"th",29),b.cd(53,ho,2,1,"td",35),b.dc(),b.ec(54,38),b.cd(55,mo,3,3,"th",39),b.cd(56,_o,2,1,"td",30),b.dc(),b.ec(57,40),b.cd(58,vo,3,3,"th",41),b.cd(59,yo,3,2,"td",30),b.dc(),b.ec(60,42),b.cd(61,ko,3,3,"th",39),b.cd(62,Co,2,1,"td",30),b.dc(),b.ec(63,43),b.cd(64,wo,3,3,"th",41),b.cd(65,Lo,8,7,"td",30),b.dc(),b.cd(66,Oo,1,0,"tr",44),b.cd(67,Po,1,0,"tr",45),b.fc(),b.fc(),b.fc(),b.bc(68,"mat-paginator",46),b.fc(),b.fc()),2&t&&(b.Lb(2),b.Ac("ngIf",!e.showSearchbar),b.Lb(1),b.Ac("ngIf",!e.showSearchbar),b.Lb(1),b.Ac("ngIf",e.showSearchbar),b.Lb(2),b.Ac("ngIf",!e.showSearchbar),b.Lb(1),b.Ac("ngIf",!e.showSearchbar),b.Lb(1),b.Ac("ngIf",e.loading),b.Lb(1),b.Bc("scrollbar",e.scrollbarStyle),b.Lb(1),b.Ac("required",e.allowFilters)("buttons",e.buttons_filters),b.Lb(2),b.Ac("expanded",!0),b.Lb(5),b.hd(" ",b.uc(18,23,"forms.graph")," - ",b.uc(19,25,"forms.users_per_month")," "),b.Lb(7),b.Ac("ngIf",e.loading||e.loadingCharts&&null==e.chart_father.chart),b.Lb(1),b.Ac("ngClass",e.loading||null==e.chart_father.chart||e.data&&0==e.data.length?"d-none":""),b.Lb(1),b.Ac("id","chart_father_report"),b.Lb(1),b.fd(e.chart_father.chart),b.Lb(2),b.Ac("ngIf",e.isLoadingResults||e.isRateLimitReached),b.Lb(3),b.Ac("dataSource",e.data),b.Lb(34),b.Ac("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",!0),b.Lb(1),b.Ac("matRowDefColumns",e.displayedColumns),b.Lb(1),b.Ac("length",e.resultsLength)("pageSize",e.pageSize))},directives:[l.B,l.zb,r.t,l.l,l.u,y.b,it,l.m,k.c,k.g,k.h,l.H,l.C,l.n,l.A,l.gb,l.t,r.q,Gn.n,ee.a,Gn.c,Gn.i,Gn.b,Gn.k,Gn.m,te.a,l.R,l.xb,l.hb,l.Mb,s.r,s.u,l.k,ue.a,rt.a,st.a,Un.c,Gn.h,ee.b,Gn.a,r.s,Gn.j,Gn.l],pipes:[D.d],styles:[".example-table-container[_ngcontent-%COMP%]{position:relative;height:73vh;overflow:auto}table[_ngcontent-%COMP%]{width:100%}.example-loading-shade[_ngcontent-%COMP%]{position:absolute;top:0;left:0;bottom:56px;right:0;background:rgba(0,0,0,.15);z-index:1;display:flex;align-items:center;justify-content:center}.example-rate-limit-reached[_ngcontent-%COMP%]{max-width:360px;text-align:center}.mat-column-number[_ngcontent-%COMP%], .mat-column-state[_ngcontent-%COMP%]{max-width:64px}.mat-column-created[_ngcontent-%COMP%]{max-width:124px}.button-sm-custom[_ngcontent-%COMP%]{width:25px;border-color:transparent;font-size:18px;height:28px;background-color:transparent}.badge-ng-pers[_ngcontent-%COMP%]{padding:3px 5px;border-radius:5px}.color-inactive[_ngcontent-%COMP%]{color:#fff;background:#ff9f22}.color-active[_ngcontent-%COMP%]{color:#fff;background:#47c100}.color-disabled[_ngcontent-%COMP%]{color:#000;background:#868686}.color-block[_ngcontent-%COMP%]{color:#000;background:#d2d2d2}.color-deleted[_ngcontent-%COMP%]{color:#fff;background:#ff1515}[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px;height:9px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb, [_ngcontent-%COMP%]::-webkit-scrollbar-track{box-shadow:inset 0 0 6px var(--ion-color-primary,#3880ff);border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#41a3ac}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:window-inactive{background-color:#41a3ac}"]}),Ao);function Io(t,e){1&t&&(b.gc(0,"ion-buttons",37),b.bc(1,"ion-menu-button"),b.fc())}function Do(t,e){1&t&&(b.gc(0,"ion-title"),b.ed(1),b.tc(2,"translate"),b.fc()),2&t&&(b.Lb(1),b.fd(b.uc(2,1,"pages.reports.users_library_reports")))}function zo(t,e){if(1&t){var n=b.hc();b.gc(0,"ion-searchbar",38),b.oc("ngModelChange",(function(t){return b.Sc(n),b.sc().queryText=t}))("ionChange",(function(){return b.Sc(n),b.sc().searchItems(!0)}))("ionCancel",(function(){return b.Sc(n),b.sc().showSearchbar=!1})),b.tc(1,"translate"),b.fc()}if(2&t){var o=b.sc();b.Bc("placeholder",b.uc(1,2,"forms.search")),b.Ac("ngModel",o.queryText)}}function qo(t,e){if(1&t){var n=b.hc();b.gc(0,"ion-button",39),b.oc("click",(function(){return b.Sc(n),b.sc().openModalStadistics()})),b.tc(1,"translate"),b.bc(2,"ion-icon",40),b.fc()}2&t&&b.Ac("matTooltip",b.uc(1,1,"pages.reports.data_activity_graph"))}function Ro(t,e){if(1&t){var n=b.hc();b.gc(0,"ion-button",41),b.oc("click",(function(){return b.Sc(n),b.sc().showSearchbar=!0})),b.bc(1,"ion-icon",42),b.fc()}}function Fo(t,e){1&t&&b.bc(0,"mat-progress-bar",43)}function To(t,e){1&t&&b.bc(0,"mat-spinner")}function Bo(t,e){if(1&t&&(b.gc(0,"div",44),b.cd(1,To,1,0,"mat-spinner",2),b.fc()),2&t){var n=b.sc();b.Lb(1),b.Ac("ngIf",n.isLoadingResults)}}function jo(t,e){1&t&&(b.gc(0,"th",45),b.ed(1),b.tc(2,"translate"),b.fc()),2&t&&(b.Lb(1),b.fd(b.uc(2,1,"pages.reports.last_name")))}function Eo(t,e){if(1&t&&(b.gc(0,"td",46),b.gc(1,"ion-item"),b.gc(2,"div",47),b.bc(3,"img",48),b.fc(),b.gc(4,"div",49),b.gc(5,"span",50),b.ed(6),b.fc(),b.fc(),b.fc(),b.fc()),2&t){var n=e.$implicit,o=b.sc();b.Lb(3),b.Ac("src",null!=n&&null!=n.information?n.information.image_url:o.profile_img_route,b.Vc),b.Lb(3),b.gd("",n.last_name," ")}}function $o(t,e){1&t&&(b.gc(0,"th",51),b.ed(1),b.tc(2,"translate"),b.fc()),2&t&&(b.Lb(1),b.fd(b.uc(2,1,"pages.reports.first_name")))}function Ho(t,e){if(1&t&&(b.gc(0,"td",52),b.gc(1,"span",50),b.ed(2),b.fc(),b.fc()),2&t){var n=e.$implicit;b.Lb(2),b.gd(" ",n.first_name," ")}}function Yo(t,e){1&t&&(b.gc(0,"th",51),b.ed(1),b.tc(2,"translate"),b.fc()),2&t&&(b.Lb(1),b.fd(b.uc(2,1,"pages.reports.email")))}function Go(t,e){if(1&t&&(b.gc(0,"td",52),b.ed(1),b.fc()),2&t){var n=e.$implicit;b.Lb(1),b.fd(n.email)}}function Uo(t,e){1&t&&(b.gc(0,"th",53),b.ed(1),b.tc(2,"translate"),b.fc()),2&t&&(b.Lb(1),b.fd(b.uc(2,1,"pages.reports.type_user")))}function No(t,e){if(1&t&&(b.gc(0,"span",55),b.ed(1),b.fc()),2&t){var n=e.$implicit;b.Lb(1),b.fd(n.description)}}function Qo(t,e){if(1&t&&(b.gc(0,"td",46),b.cd(1,No,2,1,"span",54),b.fc()),2&t){var n=e.$implicit;b.Lb(1),b.Ac("ngForOf",n.roles)}}function Wo(t,e){1&t&&(b.gc(0,"th",51),b.ed(1),b.tc(2,"translate"),b.fc()),2&t&&(b.Lb(1),b.gd("",b.uc(2,1,"pages.reports.libraries_count")," "))}function Zo(t,e){if(1&t&&(b.gc(0,"td",56),b.ed(1),b.fc()),2&t){var n=e.$implicit;b.Lb(1),b.gd(" ",n.libraries_count,"")}}function Vo(t,e){1&t&&(b.gc(0,"th",51),b.ed(1),b.tc(2,"translate"),b.fc()),2&t&&(b.Lb(1),b.fd(b.uc(2,1,"pages.reports.libraries_actives_count")))}function Xo(t,e){if(1&t&&(b.gc(0,"td",56),b.ed(1),b.fc()),2&t){var n=e.$implicit;b.Lb(1),b.gd(" ",n.libraries_actives_count,"")}}function Jo(t,e){1&t&&(b.gc(0,"th",51),b.ed(1),b.tc(2,"translate"),b.fc()),2&t&&(b.Lb(1),b.gd("",b.uc(2,1,"pages.reports.libraries_inactives_count")," "))}function Ko(t,e){if(1&t&&(b.gc(0,"td",56),b.ed(1),b.fc()),2&t){var n=e.$implicit;b.Lb(1),b.gd(" ",n.libraries_inactives_count,"")}}function ta(t,e){1&t&&(b.gc(0,"th",57),b.ed(1),b.tc(2,"translate"),b.fc()),2&t&&(b.Lb(1),b.gd(" ",b.uc(2,1,"pages.reports.created_at")," "))}function ea(t,e){if(1&t&&(b.gc(0,"td",52),b.ed(1),b.fc()),2&t){var n=e.$implicit,o=b.sc();b.Lb(1),b.gd(" ",o.moment(n.date_created).format("DD/MMMM/YYYY"),"")}}function na(t,e){1&t&&(b.gc(0,"th",58),b.ed(1),b.tc(2,"translate"),b.fc()),2&t&&(b.Lb(1),b.gd(" ",b.uc(2,1,"statuses.status")," "))}function oa(t,e){if(1&t&&(b.gc(0,"td",52),b.gc(1,"span",59),b.ed(2),b.fc(),b.fc()),2&t){var n=e.$implicit;b.Lb(1),b.Ac("ngClass"," badge-ng-pers color-"+n.status),b.Lb(1),b.gd(" ",n.status_lang," ")}}function aa(t,e){1&t&&(b.gc(0,"th",57),b.ed(1),b.tc(2,"translate"),b.fc()),2&t&&(b.Lb(1),b.gd(" ",b.uc(2,1,"pages.reports.last_activity")," "))}function ca(t,e){if(1&t&&(b.gc(0,"span"),b.ed(1),b.fc()),2&t){var n=b.sc().$implicit,o=b.sc();b.Lb(1),b.gd(" ",o.moment(n.oneview.start_date).format("DD/MM/YYYY HH:mm")," ")}}function ia(t,e){if(1&t&&(b.gc(0,"td",52),b.cd(1,ca,2,1,"span",2),b.fc()),2&t){var n=e.$implicit;b.Lb(1),b.Ac("ngIf",n.oneview)}}function ra(t,e){1&t&&(b.gc(0,"th",58),b.ed(1),b.tc(2,"translate"),b.fc()),2&t&&(b.Lb(1),b.gd(" ",b.uc(2,1,"pages.reports.actions")," "))}function sa(t,e){if(1&t){var n=b.hc();b.gc(0,"button",60),b.oc("click",(function(){b.Sc(n);var t=b.sc().$implicit;return b.sc().delete(t)})),b.tc(1,"translate"),b.bc(2,"ion-icon",64),b.fc()}2&t&&b.Ac("matTooltip",b.uc(1,1,"buttons.delete"))}function la(t,e){if(1&t){var n=b.hc();b.gc(0,"td",52),b.gc(1,"button",60),b.oc("click",(function(){b.Sc(n);var t=e.$implicit;return b.sc().showInformation(t)})),b.tc(2,"translate"),b.bc(3,"ion-icon",61),b.fc(),b.gc(4,"button",60),b.oc("click",(function(){b.Sc(n);var t=e.$implicit;return b.sc().changePassword(t)})),b.tc(5,"translate"),b.bc(6,"ion-icon",62),b.fc(),b.cd(7,sa,3,3,"button",63),b.fc()}if(2&t){var o=e.$implicit;b.Lb(1),b.Ac("matTooltip",b.uc(2,3,"pages.reports.information")),b.Lb(3),b.Ac("matTooltip",b.uc(5,5,"pages.reports.change-password")),b.Lb(3),b.Ac("ngIf",1!=o.is_protected)}}function da(t,e){1&t&&b.bc(0,"tr",65)}function ua(t,e){1&t&&b.bc(0,"tr",66)}(c=u.a).register.apply(c,_toConsumableArray(u.b));var ga,fa,pa,ba=[{path:"",redirectTo:"users",pathMatch:"full"},{path:"users",component:So},{path:"books",component:Kt},{path:"books/:uuid",component:Kt},{path:"account-library",component:(ga=function(){function t(e,n,o,a,c,i,r,s){_classCallCheck(this,t),this.applyFiltersModeService=e,this.controlErroresService=n,this.reportUserService=o,this.alertController=a,this.toastService=c,this.userService=i,this.modalCtrl=r,this.router=s,this.showSearchbar=!1,this.scrollbarStyle=g.a.scrollbarStyle,this.pageSize=1,this.displayedColumns=["last_name","first_name","email","role","libraries_count","libraries_actives_count","libraries_inactives_count","last_activity","created_at","status","actions"],this.data=[],this.profile_img_route="/assets/images/profile-8.jpg",this.loading=!1,this.moment=x,this.queryText="",this.roles=[],this.button_donwload={color:"danger",size:"small",mode:"download",icon:"cloud-download-outline",disabled:!1,title:"buttons.download"},this.button_export={color:"success",size:"small",mode:"export",icon:"download-outline",disabled:!1,title:"buttons.export"},this.button_search={color:"warning",size:"small",mode:"search",disabled:!1,title:"buttons.search",icon:"search-outline"},this.buttons_filters=[this.button_search],this.chart_father={chart:null},this.datesRange={start_date:null,end_date:null},this.loadingCharts=!1,this.resultsLength=0,this.isLoadingResults=!0,this.isRateLimitReached=!1,this.timeoutID=null,this.moment.locale("es"),this.allowFilters={end_date:1,start_date:1,roles:1,count_max_libraries:1,count_min_libraries:1,countries:1,states:1,cities:1,schools:1,status:1,last_name:1,first_name:1,have_connect_days:1}}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.applyFiltersModeService.get$().subscribe((function(e){t.applyFilters(e)}))}},{key:"ngAfterViewInit",value:function(){this.loadData(!0)}},{key:"searchItems",value:function(){var t=this;this.timeoutID&&clearTimeout(this.timeoutID),this.timeoutID=setTimeout((function(){return t.loadData(!0)}),1e3)}},{key:"loadData",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e&&(this.paginator.pageIndex=0),n||(n={}),n.get_libraries_count=1,n.get_allow_libraries_count=1,this.loadingCharts=!0,Object(ne.a)(this.sort.sortChange,this.paginator.page).pipe(Object(ae.a)({}),Object(ce.a)((function(){return n.sort=t.sort.active,n.order=t.sort.direction,n.page=t.paginator.pageIndex+1,n.q=t.queryText,t.isLoadingResults=!0,t.reportUserService.getInformation(n).pipe(Object(ie.a)((function(){return Object(oe.a)(null)})))})),Object(re.a)((function(e){return t.isLoadingResults=!1,t.isRateLimitReached=null===e,null===e?[]:(t.datesRange.start_date=e.start_date,t.datesRange.end_date=e.end_date,t.loadingCharts=!1,t.resultsLength=e.total_pg,t.pageSize=e.page_size,e.items)}))).subscribe((function(e){return t.data=e}))}},{key:"delete",value:function(t){return Object(Lt.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertController.create({header:"Eliminar",message:"\xbfDesea eliminar este usuario?",buttons:[{text:"Cancelar",role:"cancel"},{text:"Eliminar",role:"destructive",handler:function(){o.userService.delete(t.uuid).subscribe((function(t){o.loadData(!0),o.toastService.presentToast(t.message,t.status)}),(function(t){o.controlErroresService.control(t)}))}}]});case 2:return n=e.sent,e.next=5,n.present();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"showInformation",value:function(t){return Object(Lt.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalCtrl.create({component:In,cssClass:"modal-fullscreen-100",swipeToClose:!0,componentProps:{user_search:t,required_show_templates:{libraries:1}}});case 2:return n=e.sent,e.next=5,n.present();case 5:return e.next=7,n.onWillDismiss();case 7:case"end":return e.stop()}}),e,this)})))}},{key:"changePassword",value:function(t){return Object(Lt.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertController.create({cssClass:"",header:"Cambiar contrase\xf1a",inputs:[{name:"password",type:"password",placeholder:"Contrase\xf1a"}],buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:function(){}},{text:"Cambiar",handler:function(e){o.userService.changePassword({password:e.password,id:t.uuid}).subscribe((function(t){o.toastService.presentToast(t.message,t.status)}),(function(t){o.controlErroresService.control(t)}))}}]});case 2:return n=e.sent,e.next=5,n.present();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"applyFilters",value:function(t){if(!t)return!1;if(!t.mode||!t.filters)return!1;switch(t.mode){case"search":this.loadData(!0,t.filters)}}},{key:"openModalStadistics",value:function(){return Object(Lt.b)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.modalCtrl.create({component:Hn,cssClass:"modal-fullscreen-100",swipeToClose:!0,componentProps:{}});case 2:return e=t.sent,t.next=5,e.present();case 5:return t.next=7,e.onWillDismiss();case 7:case"end":return t.stop()}}),t,this)})))}}]),t}(),ga.\u0275fac=function(t){return new(t||ga)(b.ac(v.a),b.ac(f.a),b.ac(m),b.ac(l.b),b.ac(le.a),b.ac(se),b.ac(l.Db),b.ac(d.f))},ga.\u0275cmp=b.Ub({type:ga,selectors:[["app-users-reports-library-admin"]],viewQuery:function(t,e){var n;1&t&&(b.ld(te.a,!0),b.ld(ee.a,!0)),2&t&&(b.Nc(n=b.pc())&&(e.paginator=n.first),b.Nc(n=b.pc())&&(e.sort=n.first))},decls:52,vars:16,consts:[["translucent","true"],["slot","start",4,"ngIf"],[4,"ngIf"],["showCancelButton","always",3,"ngModel","placeholder","ngModelChange","ionChange","ionCancel",4,"ngIf"],["slot","end"],[3,"matTooltip","click",4,"ngIf"],[3,"click",4,"ngIf"],["mode","indeterminate",4,"ngIf"],["fullscreen","true",3,"scrollbar"],[3,"required","buttons"],[1,"example-container","mat-elevation-z8","scroll-div-content"],["class","example-loading-shade",4,"ngIf"],[1,"example-table-container"],["tabindex","0",1,"example-container","mat-elevation-z8"],["mat-table","","matSort","","matSortActive","created_at","matSortDisableClear","","matSortDirection","asc",1,"example-table",3,"dataSource"],["matColumnDef","last_name","sticky",""],["mat-header-cell","","mat-sort-header","","class","text-center",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","first_name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","","style","padding-right: 20px;",4,"matCellDef"],["matColumnDef","email"],["matColumnDef","role"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","libraries_count"],["class","text-center","mat-cell","","style","padding-right: 20px;",4,"matCellDef"],["matColumnDef","libraries_actives_count"],["matColumnDef","libraries_inactives_count"],["matColumnDef","created_at"],["mat-header-cell","","mat-sort-header","","disableClear","",4,"matHeaderCellDef"],["matColumnDef","status"],["mat-header-cell","","disableClear","",4,"matHeaderCellDef"],["matColumnDef","last_activity"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["aria-label","Resultados",3,"length","pageSize"],["slot","start"],["showCancelButton","always",3,"ngModel","placeholder","ngModelChange","ionChange","ionCancel"],[3,"matTooltip","click"],["name","bar-chart-outline"],[3,"click"],["slot","icon-only","name","search"],["mode","indeterminate"],[1,"example-loading-shade"],["mat-header-cell","","mat-sort-header","",1,"text-center"],["mat-cell",""],[1,"w-10","h-10","flex-none","image-fit"],["alt","--",1,"rounded-full",3,"src"],[1,"ml-3"],[1,"font-medium"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",2,"padding-right","20px"],["mat-header-cell",""],["style","padding-right: 20px;",4,"ngFor","ngForOf"],[2,"padding-right","20px"],["mat-cell","",1,"text-center",2,"padding-right","20px"],["mat-header-cell","","mat-sort-header","","disableClear",""],["mat-header-cell","","disableClear",""],[1,"badge",3,"ngClass"],[1,"button-sm-custom",3,"matTooltip","click"],["color","primary","name","person-outline"],["color","warning","name","lock-closed-outline"],["class","button-sm-custom",3,"matTooltip","click",4,"ngIf"],["color","danger","name","trash-outline"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(b.gc(0,"ion-header",0),b.gc(1,"ion-toolbar"),b.cd(2,Io,2,0,"ion-buttons",1),b.cd(3,Do,3,3,"ion-title",2),b.cd(4,zo,2,4,"ion-searchbar",3),b.gc(5,"ion-buttons",4),b.cd(6,qo,3,3,"ion-button",5),b.cd(7,Ro,2,0,"ion-button",6),b.fc(),b.fc(),b.cd(8,Fo,1,0,"mat-progress-bar",7),b.fc(),b.gc(9,"ion-content",8),b.bc(10,"filters-users",9),b.gc(11,"div",10),b.cd(12,Bo,2,1,"div",11),b.gc(13,"div",12),b.gc(14,"section",13),b.gc(15,"table",14),b.ec(16,15),b.cd(17,jo,3,3,"th",16),b.cd(18,Eo,7,2,"td",17),b.dc(),b.ec(19,18),b.cd(20,$o,3,3,"th",19),b.cd(21,Ho,3,1,"td",20),b.dc(),b.ec(22,21),b.cd(23,Yo,3,3,"th",19),b.cd(24,Go,2,1,"td",20),b.dc(),b.ec(25,22),b.cd(26,Uo,3,3,"th",23),b.cd(27,Qo,2,1,"td",17),b.dc(),b.ec(28,24),b.cd(29,Wo,3,3,"th",19),b.cd(30,Zo,2,1,"td",25),b.dc(),b.ec(31,26),b.cd(32,Vo,3,3,"th",19),b.cd(33,Xo,2,1,"td",25),b.dc(),b.ec(34,27),b.cd(35,Jo,3,3,"th",19),b.cd(36,Ko,2,1,"td",25),b.dc(),b.ec(37,28),b.cd(38,ta,3,3,"th",29),b.cd(39,ea,2,1,"td",20),b.dc(),b.ec(40,30),b.cd(41,na,3,3,"th",31),b.cd(42,oa,3,2,"td",20),b.dc(),b.ec(43,32),b.cd(44,aa,3,3,"th",29),b.cd(45,ia,2,1,"td",20),b.dc(),b.ec(46,33),b.cd(47,ra,3,3,"th",31),b.cd(48,la,8,7,"td",20),b.dc(),b.cd(49,da,1,0,"tr",34),b.cd(50,ua,1,0,"tr",35),b.fc(),b.fc(),b.fc(),b.bc(51,"mat-paginator",36),b.fc(),b.fc()),2&t&&(b.Lb(2),b.Ac("ngIf",!e.showSearchbar),b.Lb(1),b.Ac("ngIf",!e.showSearchbar),b.Lb(1),b.Ac("ngIf",e.showSearchbar),b.Lb(2),b.Ac("ngIf",!e.showSearchbar),b.Lb(1),b.Ac("ngIf",!e.showSearchbar),b.Lb(1),b.Ac("ngIf",e.loading),b.Lb(1),b.Bc("scrollbar",e.scrollbarStyle),b.Lb(1),b.Ac("required",e.allowFilters)("buttons",e.buttons_filters),b.Lb(2),b.Ac("ngIf",e.isLoadingResults||e.isRateLimitReached),b.Lb(3),b.Ac("dataSource",e.data),b.Lb(34),b.Ac("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",!0),b.Lb(1),b.Ac("matRowDefColumns",e.displayedColumns),b.Lb(1),b.Ac("length",e.resultsLength)("pageSize",e.pageSize))},directives:[l.B,l.zb,r.t,l.l,l.u,y.b,it,Gn.n,ee.a,Gn.c,Gn.i,Gn.b,Gn.k,Gn.m,te.a,l.R,l.xb,l.hb,l.Mb,s.r,s.u,l.k,ue.a,l.C,rt.a,Un.c,Gn.h,ee.b,Gn.a,l.H,r.s,r.q,Gn.j,Gn.l],pipes:[D.d],styles:[".example-table-container[_ngcontent-%COMP%]{position:relative;height:73vh;overflow:auto}table[_ngcontent-%COMP%]{width:100%}.example-loading-shade[_ngcontent-%COMP%]{position:absolute;top:0;left:0;bottom:56px;right:0;background:rgba(0,0,0,.15);z-index:1;display:flex;align-items:center;justify-content:center}.example-rate-limit-reached[_ngcontent-%COMP%]{max-width:360px;text-align:center}.mat-column-number[_ngcontent-%COMP%], .mat-column-state[_ngcontent-%COMP%]{max-width:64px}.mat-column-created[_ngcontent-%COMP%]{max-width:124px}.button-sm-custom[_ngcontent-%COMP%]{width:25px;border-color:transparent;font-size:18px;height:28px;background-color:transparent}.badge-ng-pers[_ngcontent-%COMP%]{padding:3px 5px;border-radius:5px}.color-inactive[_ngcontent-%COMP%]{color:#fff;background:#ff9f22}.color-active[_ngcontent-%COMP%]{color:#fff;background:#47c100}.color-disabled[_ngcontent-%COMP%]{color:#000;background:#868686}.color-block[_ngcontent-%COMP%]{color:#000;background:#d2d2d2}.color-deleted[_ngcontent-%COMP%]{color:#fff;background:#ff1515}[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px;height:9px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb, [_ngcontent-%COMP%]::-webkit-scrollbar-track{box-shadow:inset 0 0 6px var(--ion-color-primary,#3880ff);border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#41a3ac}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:window-inactive{background-color:#41a3ac}"]}),ga)},{path:"report-activities",component:Mt}],ha=((fa=function t(){_classCallCheck(this,t)}).\u0275mod=b.Yb({type:fa}),fa.\u0275inj=b.Xb({factory:function(t){return new(t||fa)},imports:[[d.j.forChild(ba)],d.j]}),fa),ma=n("vvyD"),_a=n("PdCO"),va=n("kRoH"),ya=n("1yaQ"),ka=n("H5xr"),xa=((pa=function t(){_classCallCheck(this,t)}).\u0275mod=b.Yb({type:pa}),pa.\u0275inj=b.Xb({factory:function(t){return new(t||pa)},providers:[{provide:P.f,useValue:"es-EC"},{provide:va.f,useClass:ya.c,deps:[P.f,ya.a]},{provide:P.e,useValue:ya.b}],imports:[[r.c,s.l,l.Bb,ha,s.B,ma.a,_a.b,y.a,D.c,O.b,I.c,Tt.a,ka.a]]}),pa)}}]);