(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{f1Ab:function(t,e,o){"use strict";o.r(e),o.d(e,"AccountModule",(function(){return O}));var r=o("ofXK"),c=o("TEn/"),n=o("tyNb"),i=o("mrSG"),s=o("cxbk"),a=o("X+KH"),l=o("p9xo"),d=o("m8mU"),f=o("bVrE"),g=o("8BQX"),u=o("PkRB"),m=o("fXoL"),h=o("ZOsW"),p=o("sYmb"),b=o("6f/U"),v=o("3Pt+");function _(t,e){if(1&t&&(m.gc(0,"span",49),m.ed(1),m.fc()),2&t){const t=e.$implicit;m.Lb(1),m.fd(t.description)}}function y(t,e){if(1&t&&(m.gc(0,"ng-option",50),m.ed(1),m.fc()),2&t){const t=e.$implicit;m.Ac("value",t.id),m.Lb(1),m.fd(t.name)}}function L(t,e){if(1&t&&(m.gc(0,"ng-option",50),m.ed(1),m.fc()),2&t){const t=e.$implicit;m.Ac("value",t.id),m.Lb(1),m.fd(t.name)}}function w(t,e){if(1&t&&(m.gc(0,"ng-option",50),m.ed(1),m.fc()),2&t){const t=e.$implicit;m.Ac("value",t.id),m.Lb(1),m.fd(t.name)}}function C(t,e){if(1&t&&(m.gc(0,"ng-option",50),m.ed(1),m.fc()),2&t){const t=e.$implicit;m.Ac("value",t.id),m.Lb(1),m.fd(t.name)}}function M(t,e){if(1&t){const t=m.hc();m.gc(0,"ion-button",51),m.oc("click",(function(){return m.Sc(t),m.sc().connectWithGoogle()})),m.bc(1,"ion-icon",52),m.gc(2,"span",53),m.ed(3),m.tc(4,"translate"),m.fc(),m.fc()}2&t&&(m.Lb(3),m.fd(m.uc(4,1,"forms.connect_with_google")))}function x(t,e){if(1&t){const t=m.hc();m.gc(0,"ion-button",51),m.oc("click",(function(){return m.Sc(t),m.sc().disConnectWithGoogle()})),m.bc(1,"ion-icon",54),m.gc(2,"span",53),m.ed(3),m.tc(4,"translate"),m.fc(),m.fc()}2&t&&(m.Lb(3),m.fd(m.uc(4,1,"forms.disconnect_acc")))}const S=[{path:"",component:(()=>{class t{constructor(t,e,o,r,c,n,i,a,d,f){this.alertCtrl=t,this.router=e,this.userData=o,this.config=r,this.globalService=c,this.translate=n,this.profileService=i,this.controlErroresService=a,this.alertController=d,this.toastService=f,this.form={country_id:null,state_id:null,city_id:null,school_id:null,name:"",last_name:"",address:"",email:"",photo:null,has_provider:!1},this.form_password={last_password:"",password:"",confirm_password:""},this.picture="assets/images/profile-8.jpg",this.countries=[],this.states=[],this.cities=[],this.schools=[],this.roles=[],this.scrollbarStyle=s.a.scrollbarStyle,n.setDefaultLang(l.e.lang),this.config.notFoundText="Custom not found",this.config.appendTo="body",this.getInformation()}ngOnInit(){}ngAfterViewInit(){this.getCountries()}getCountries(){this.globalService.getCountries().subscribe(t=>{if(this.countries=t.data,null==this.form.country_id){let t=this.countries.find(t=>"1"==t.default);null!=t&&(this.form.country_id=t.id,this.getStates(this.form.country_id))}})}getStates(t){this.globalService.getStates(t).subscribe(t=>{this.states=t.data})}getCities(t){this.globalService.getCities(t).subscribe(t=>{this.cities=t.data})}getSchools(t){this.globalService.getSchools(t).subscribe(t=>{this.schools=t.data})}changeFile(t){if(t.target.files&&t.target.files[0]){var e=new FileReader;if(t.target.files[0].size>1e6*s.a.max_size_img)return void this.toastService.presentToast("Peso m\xe1ximo "+s.a.max_size_img+"MB","warning");this.form.photo=t.target.files[0],e.onload=t=>{this.picture=t.target.result},e.readAsDataURL(t.target.files[0])}}getInformation(){this.profileService.getInformation().subscribe(t=>{let e=t.user;this.form.name=e.first_name,this.form.last_name=e.last_name,this.form.email=e.email,this.form.country_id=e.other_information&&e.other_information.country_id||this.form.country_id,this.form.state_id=e.other_information?e.other_information.province_id:null,this.form.city_id=e.other_information?e.other_information.city_id:null,this.form.school_id=e.other_information?e.other_information.school_id:null,this.form.address=e.other_information?e.other_information.address:null,this.picture=e.other_information&&e.other_information.image_url||this.picture,this.roles=e.roles||this.roles,this.form.has_provider=e.has_provider,this.getStates(this.form.country_id),this.getCities(this.form.state_id),this.getSchools(this.form.city_id)},t=>{this.controlErroresService.control(t)})}updateUser(){this.profileService.saveInformation(Object(l.c)(this.form)).subscribe(t=>{this.toastService.presentToast(t.message,t.status),this.userData.setUser({user:t.data})},t=>{this.controlErroresService.control(t)})}changePassword(){this.profileService.updatePassword(this.form_password).subscribe(t=>{this.toastService.presentToast(t.message,t.status)},t=>{this.controlErroresService.control(t)})}initGoogleAuth(){return Object(i.b)(this,void 0,void 0,(function*(){return new Promise(t=>{gapi.load("auth2",t)}).then(()=>Object(i.b)(this,void 0,void 0,(function*(){yield gapi.auth2.init({client_id:s.a.google.client_id}).then(t=>{this.gapiSetup=!0,this.authInstance=t})})))}))}connectWithGoogle(){return Object(i.b)(this,void 0,void 0,(function*(){return this.gapiSetup||(yield this.initGoogleAuth()),new Promise(()=>Object(i.b)(this,void 0,void 0,(function*(){yield this.authInstance.signIn().then(t=>{this.userGoogle=t,this.profileService.checkProvider({provider:"GOOGLE",provider_id:this.userGoogle.getId()}).subscribe(t=>{"in_user"!=t.status?this.userData.connectWithProvider("GOOGLE",this.userGoogle.getId(),this.form):this.replaceProvider({provider:"GOOGLE",provider_id:this.userGoogle.getId()})},t=>{this.controlErroresService.control(t)})},t=>this.error=t)})))}))}disConnectWithGoogle(){return Object(i.b)(this,void 0,void 0,(function*(){const t=yield this.alertController.create({cssClass:"my-custom-class",header:"\xa1Confirmar o denegar!",message:"\xbfEst\xe1 seguro que desea desconectar la cuenta?",buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary",handler:t=>{}},{text:"Desconectar",handler:()=>{this.profileService.disconnectProvider({provider:"GOOGLE"}).subscribe(t=>{this.form.has_provider=!1,this.toastService.presentToast(t.message,t.status)},t=>{this.controlErroresService.control(t)})}}]});yield t.present()}))}replaceProvider(t){return Object(i.b)(this,void 0,void 0,(function*(){const t=yield this.alertController.create({cssClass:"my-custom-class",header:"\xa1Confirmar o denegar!",message:"Esta cuenta de google ya se encuentra conectada a otro usuario del sistema",buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary",handler:t=>{}},{text:"Reemplazar",handler:()=>{this.userData.connectWithProvider("GOOGLE",this.userGoogle.getId(),this.form)}}]});yield t.present()}))}}return t.\u0275fac=function(e){return new(e||t)(m.ac(c.b),m.ac(n.f),m.ac(a.a),m.ac(h.b),m.ac(f.a),m.ac(p.e),m.ac(g.a),m.ac(d.a),m.ac(c.b),m.ac(u.a))},t.\u0275cmp=m.Ub({type:t,selectors:[["page-account"]],decls:116,vars:74,consts:[["slot","start"],[3,"scrollbar"],[1,"content"],[1,"intro-y","flex","items-center","mt-8"],[1,"text-lg","font-medium","mr-auto"],[1,"grid","grid-cols-12","gap-6"],[1,"col-span-12","lg:col-span-8","xxl:col-span-9"],[1,"intro-y","box","lg:mt-5"],[1,"flex","items-center","p-5","border-b","border-gray-200","dark:border-dark-5"],[1,"font-medium","text-base","mr-auto"],["class","btn btn-sm btn-primary",4,"ngFor","ngForOf"],[1,"p-5"],[1,"flex","flex-col-reverse","xl:flex-row","flex-col"],[1,"flex-1","mt-6","xl:mt-0"],[1,"grid","grid-cols-12","gap-x-5"],[1,"col-span-12","xxl:col-span-6"],["for","update-profile-form-6",1,"form-label"],["id","update-profile-form-6","type","text",1,"form-control",3,"ngModel","ngModelChange"],["for","name",1,"form-label"],["id","name","type","text",1,"form-control",3,"ngModel","ngModelChange"],["for","last_name",1,"form-label"],["id","last_name","type","text",1,"form-control",3,"ngModel","ngModelChange"],[1,"mt-3"],["for","update-profile-form-2",1,"form-label"],[3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[3,"ngModel","ngModelChange"],[1,"col-span-12"],["for","update-profile-form-5",1,"form-label"],["id","update-profile-form-5",1,"form-control",3,"ngModel","ngModelChange"],["type","button","size","small",3,"click"],["type","button","color","danger","size","small",3,"click",4,"ngIf"],[1,"w-52","mx-auto","xl:mr-0","xl:ml-6"],[1,"border-2","border-dashed","shadow-sm","border-gray-200","dark:border-dark-5","rounded-md","m-3"],[1,"h-40","relative","image-fit","cursor-pointer","zoom-in","mx-auto"],["alt","--",1,"rounded-sm",3,"src"],[1,"mx-auto","cursor-pointer","relative","mt-5"],["type","button",1,"btn","btn-sm","btn-primary","w-full"],["type","file","accept","image/*",1,"w-full","h-full","top-0","left-0","absolute","opacity-0",3,"change"],[1,"intro-y","box","mt-5"],[1,"col-span-12","xl:col-span-6"],["id","last_password","type","password",1,"form-control",3,"ngModel","ngModelChange"],["for","update-profile-form-7",1,"form-label"],["id","password","type","password",1,"form-control",3,"ngModel","ngModelChange"],["id","confirm_password","type","password",1,"form-control",3,"ngModel","ngModelChange"],[1,"flex","justify-end","mt-4"],["type","button",1,"btn","btn-primary","w-20","mr-auto",3,"click"],["translucent","true"],["slot","end"],[1,"btn","btn-sm","btn-primary"],[3,"value"],["type","button","color","danger","size","small",3,"click"],["name","logo-google"],[2,"margin-left","10px"],["name","unlink-outline"]],template:function(t,e){1&t&&(m.gc(0,"ion-header"),m.gc(1,"ion-toolbar"),m.gc(2,"ion-buttons",0),m.bc(3,"ion-menu-button"),m.fc(),m.gc(4,"ion-title"),m.ed(5),m.tc(6,"translate"),m.fc(),m.fc(),m.fc(),m.gc(7,"ion-content",1),m.gc(8,"div",2),m.gc(9,"div",3),m.gc(10,"h2",4),m.ed(11),m.tc(12,"translate"),m.fc(),m.fc(),m.gc(13,"div",5),m.gc(14,"div",6),m.gc(15,"div",7),m.gc(16,"div",8),m.gc(17,"h2",9),m.ed(18),m.tc(19,"translate"),m.cd(20,_,2,1,"span",10),m.fc(),m.fc(),m.gc(21,"div",11),m.gc(22,"div",12),m.gc(23,"div",13),m.gc(24,"div",14),m.gc(25,"div",15),m.gc(26,"div"),m.gc(27,"label",16),m.ed(28),m.tc(29,"translate"),m.fc(),m.gc(30,"input",17),m.oc("ngModelChange",(function(t){return e.form.email=t})),m.fc(),m.fc(),m.gc(31,"div"),m.gc(32,"label",18),m.ed(33),m.tc(34,"translate"),m.fc(),m.gc(35,"input",19),m.oc("ngModelChange",(function(t){return e.form.name=t})),m.fc(),m.fc(),m.gc(36,"div"),m.gc(37,"label",20),m.ed(38),m.tc(39,"translate"),m.fc(),m.gc(40,"input",21),m.oc("ngModelChange",(function(t){return e.form.last_name=t})),m.fc(),m.fc(),m.gc(41,"div",22),m.gc(42,"label",23),m.ed(43),m.tc(44,"translate"),m.fc(),m.gc(45,"ng-select",24),m.oc("ngModelChange",(function(t){return e.form.country_id=t}))("change",(function(){return e.getStates(e.form.country_id)})),m.cd(46,y,2,2,"ng-option",25),m.fc(),m.fc(),m.gc(47,"div",22),m.gc(48,"label",23),m.ed(49),m.tc(50,"translate"),m.fc(),m.gc(51,"ng-select",24),m.oc("ngModelChange",(function(t){return e.form.state_id=t}))("change",(function(){return e.getCities(e.form.state_id)})),m.cd(52,L,2,2,"ng-option",25),m.fc(),m.fc(),m.gc(53,"div",22),m.gc(54,"label",23),m.ed(55),m.tc(56,"translate"),m.fc(),m.gc(57,"ng-select",24),m.oc("ngModelChange",(function(t){return e.form.city_id=t}))("change",(function(){return e.getSchools(e.form.city_id)})),m.cd(58,w,2,2,"ng-option",25),m.fc(),m.fc(),m.gc(59,"div",22),m.gc(60,"label",23),m.ed(61),m.tc(62,"translate"),m.fc(),m.gc(63,"ng-select",26),m.oc("ngModelChange",(function(t){return e.form.school_id=t})),m.cd(64,C,2,2,"ng-option",25),m.fc(),m.fc(),m.fc(),m.gc(65,"div",27),m.gc(66,"div",22),m.gc(67,"label",28),m.ed(68),m.tc(69,"translate"),m.fc(),m.gc(70,"textarea",29),m.oc("ngModelChange",(function(t){return e.form.address=t})),m.fc(),m.fc(),m.fc(),m.fc(),m.gc(71,"ion-button",30),m.oc("click",(function(){return e.updateUser()})),m.ed(72),m.tc(73,"translate"),m.fc(),m.cd(74,M,5,3,"ion-button",31),m.cd(75,x,5,3,"ion-button",31),m.fc(),m.gc(76,"div",32),m.gc(77,"div",33),m.gc(78,"div",34),m.bc(79,"img",35),m.fc(),m.gc(80,"div",36),m.gc(81,"button",37),m.ed(82),m.tc(83,"translate"),m.fc(),m.gc(84,"input",38),m.oc("change",(function(t){return e.changeFile(t)})),m.fc(),m.fc(),m.fc(),m.fc(),m.fc(),m.fc(),m.fc(),m.gc(85,"div",39),m.gc(86,"div",8),m.gc(87,"h2",9),m.ed(88),m.tc(89,"translate"),m.fc(),m.fc(),m.gc(90,"div",11),m.gc(91,"div",14),m.gc(92,"div",40),m.gc(93,"div"),m.gc(94,"label",16),m.ed(95),m.tc(96,"translate"),m.fc(),m.gc(97,"input",41),m.oc("ngModelChange",(function(t){return e.form_password.last_password=t})),m.fc(),m.fc(),m.gc(98,"div",22),m.gc(99,"label",42),m.ed(100),m.tc(101,"translate"),m.fc(),m.gc(102,"input",43),m.oc("ngModelChange",(function(t){return e.form_password.password=t})),m.fc(),m.fc(),m.gc(103,"div",22),m.gc(104,"label",42),m.ed(105),m.tc(106,"translate"),m.fc(),m.gc(107,"input",44),m.oc("ngModelChange",(function(t){return e.form_password.confirm_password=t})),m.fc(),m.fc(),m.fc(),m.fc(),m.gc(108,"div",45),m.gc(109,"button",46),m.oc("click",(function(){return e.changePassword()})),m.ed(110),m.tc(111,"translate"),m.fc(),m.fc(),m.fc(),m.fc(),m.fc(),m.fc(),m.fc(),m.fc(),m.gc(112,"ion-footer",47),m.gc(113,"ion-toolbar"),m.gc(114,"ion-buttons",48),m.ed(115,"\xa92022 Ediciones Holgu\xedn"),m.fc(),m.fc(),m.fc()),2&t&&(m.Lb(5),m.fd(m.uc(6,38,"pages.update.account")),m.Lb(2),m.Bc("scrollbar",e.scrollbarStyle),m.Lb(4),m.gd(" ",m.uc(12,40,"pages.update.update_profile")," "),m.Lb(7),m.gd(" ",m.uc(19,42,"forms.display_information")," "),m.Lb(2),m.Ac("ngForOf",e.roles),m.Lb(8),m.fd(m.uc(29,44,"forms.email")),m.Lb(2),m.Ac("ngModel",e.form.email),m.Lb(3),m.fd(m.uc(34,46,"forms.names")),m.Lb(2),m.Ac("ngModel",e.form.name),m.Lb(3),m.fd(m.uc(39,48,"forms.last_names")),m.Lb(2),m.Ac("ngModel",e.form.last_name),m.Lb(3),m.fd(m.uc(44,50,"forms.country")),m.Lb(2),m.Ac("ngModel",e.form.country_id),m.Lb(1),m.Ac("ngForOf",e.countries),m.Lb(3),m.fd(m.uc(50,52,"forms.state")),m.Lb(2),m.Ac("ngModel",e.form.state_id),m.Lb(1),m.Ac("ngForOf",e.states),m.Lb(3),m.fd(m.uc(56,54,"forms.city")),m.Lb(2),m.Ac("ngModel",e.form.city_id),m.Lb(1),m.Ac("ngForOf",e.cities),m.Lb(3),m.fd(m.uc(62,56,"forms.school")),m.Lb(2),m.Ac("ngModel",e.form.school_id),m.Lb(1),m.Ac("ngForOf",e.schools),m.Lb(4),m.fd(m.uc(69,58,"forms.address")),m.Lb(2),m.Ac("ngModel",e.form.address),m.Lb(2),m.fd(m.uc(73,60,"forms.save")),m.Lb(2),m.Ac("ngIf",!e.form.has_provider),m.Lb(1),m.Ac("ngIf",e.form.has_provider),m.Lb(4),m.Ac("src",e.picture,m.Vc),m.Lb(3),m.fd(m.uc(83,62,"forms.change_photo")),m.Lb(6),m.gd(" ",m.uc(89,64,"pages.update.change_password")," "),m.Lb(7),m.fd(m.uc(96,66,"forms.last_password")),m.Lb(2),m.Ac("ngModel",e.form_password.last_password),m.Lb(3),m.fd(m.uc(101,68,"forms.new_password")),m.Lb(2),m.Ac("ngModel",e.form_password.password),m.Lb(3),m.fd(m.uc(106,70,"forms.repeat_password")),m.Lb(2),m.Ac("ngModel",e.form_password.confirm_password),m.Lb(3),m.fd(m.uc(111,72,"forms.save")))},directives:[c.B,c.zb,c.l,c.R,c.xb,c.u,b.b,r.s,v.c,v.r,v.u,h.a,c.k,r.t,c.z,h.o,c.C],pipes:[p.d],styles:[""]}),t})()}];let A=(()=>{class t{}return t.\u0275mod=m.Yb({type:t}),t.\u0275inj=m.Xb({factory:function(e){return new(e||t)},imports:[[n.j.forChild(S)],n.j]}),t})(),O=(()=>{class t{}return t.\u0275mod=m.Yb({type:t}),t.\u0275inj=m.Xb({factory:function(e){return new(e||t)},imports:[[r.c,c.Bb,A,v.l,v.B,h.c,p.c,b.a]]}),t})()}}]);