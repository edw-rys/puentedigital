(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"1yaQ":function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return d})),n.d(e,"c",(function(){return l}));var o=n("fXoL"),c=n("FKr1"),i=n("wd/R");const a=n.n(i).a||i,r=new o.u("MAT_MOMENT_DATE_ADAPTER_OPTIONS",{providedIn:"root",factory:function(){return{useUtc:!1}}});function s(t,e){const n=Array(t);for(let o=0;o<t;o++)n[o]=e(o);return n}let l=(()=>{class t extends c.c{constructor(t,e){super(),this._options=e,this.setLocale(t||a.locale())}setLocale(t){super.setLocale(t);let e=a.localeData(t);this._localeData={firstDayOfWeek:e.firstDayOfWeek(),longMonths:e.months(),shortMonths:e.monthsShort(),dates:s(31,t=>this.createDate(2017,0,t+1).format("D")),longDaysOfWeek:e.weekdays(),shortDaysOfWeek:e.weekdaysShort(),narrowDaysOfWeek:e.weekdaysMin()}}getYear(t){return this.clone(t).year()}getMonth(t){return this.clone(t).month()}getDate(t){return this.clone(t).date()}getDayOfWeek(t){return this.clone(t).day()}getMonthNames(t){return"long"==t?this._localeData.longMonths:this._localeData.shortMonths}getDateNames(){return this._localeData.dates}getDayOfWeekNames(t){return"long"==t?this._localeData.longDaysOfWeek:"short"==t?this._localeData.shortDaysOfWeek:this._localeData.narrowDaysOfWeek}getYearName(t){return this.clone(t).format("YYYY")}getFirstDayOfWeek(){return this._localeData.firstDayOfWeek}getNumDaysInMonth(t){return this.clone(t).daysInMonth()}clone(t){return t.clone().locale(this.locale)}createDate(t,e,n){if(e<0||e>11)throw Error(`Invalid month index "${e}". Month index has to be between 0 and 11.`);if(n<1)throw Error(`Invalid date "${n}". Date has to be greater than 0.`);const o=this._createMoment({year:t,month:e,date:n}).locale(this.locale);if(!o.isValid())throw Error(`Invalid date "${n}" for month with index "${e}".`);return o}today(){return this._createMoment().locale(this.locale)}parse(t,e){return t&&"string"==typeof t?this._createMoment(t,e,this.locale):t?this._createMoment(t).locale(this.locale):null}format(t,e){if(t=this.clone(t),!this.isValid(t))throw Error("MomentDateAdapter: Cannot format invalid date.");return t.format(e)}addCalendarYears(t,e){return this.clone(t).add({years:e})}addCalendarMonths(t,e){return this.clone(t).add({months:e})}addCalendarDays(t,e){return this.clone(t).add({days:e})}toIso8601(t){return this.clone(t).format()}deserialize(t){let e;if(t instanceof Date)e=this._createMoment(t).locale(this.locale);else if(this.isDateInstance(t))return this.clone(t);if("string"==typeof t){if(!t)return null;e=this._createMoment(t,a.ISO_8601).locale(this.locale)}return e&&this.isValid(e)?this._createMoment(e).locale(this.locale):super.deserialize(t)}isDateInstance(t){return a.isMoment(t)}isValid(t){return this.clone(t).isValid()}invalid(){return a.invalid()}_createMoment(t,e,n){const{strict:o,useUtc:c}=this._options||{};return c?a.utc(t,e,n,o):a(t,e,n,o)}}return t.\u0275fac=function(e){return new(e||t)(o.kc(c.f,8),o.kc(r,8))},t.\u0275prov=o.Wb({token:t,factory:t.\u0275fac}),t})();const d={parse:{dateInput:"l"},display:{dateInput:"l",monthYearLabel:"MMM YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"MMMM YYYY"}}},g37K:function(t,e,n){"use strict";n.r(e),n.d(e,"MainReportsPageModule",(function(){return nc}));var o=n("ofXK"),c=n("3Pt+"),i=n("TEn/"),a=n("tyNb"),r=n("3WHO"),s=n("cxbk"),l=n("m8mU"),d=n("p9xo"),g=n("fXoL"),u=n("tk/3");let f=(()=>{class t{constructor(t){this.httpClient=t,this.url=d.i.reports}buildQueryParams(t){let e="params_nxtime";return t.page&&null!=t.page&&(e+="&page="+t.page),t.have_connect_days&&null!=t.have_connect_days&&(e+="&have_connect_days="+t.have_connect_days),t.role_id&&null!=t.role_id&&(e+="&role_id="+t.role_id),t.start_date&&null!=t.start_date&&(e+="&start_date="+t.start_date),t.end_date&&null!=t.end_date&&(e+="&end_date="+t.end_date),t.q&&null!=t.q&&(e+="&q="+t.q),t.country_id&&null!=t.country_id&&(e+="&country_id="+t.country_id),t.province_id&&null!=t.province_id&&(e+="&province_id="+t.province_id),t.city_id&&null!=t.city_id&&(e+="&city_id="+t.city_id),t.school_id&&null!=t.school_id&&(e+="&school_id="+t.school_id),t.sort&&null!=t.sort&&(e+="&sort="+t.sort),t.order&&null!=t.order&&(e+="&order="+t.order),t.role_id&&null!=t.role_id&&(e+="&role_id="+t.role_id),t.end_date&&null!=t.end_date&&(e+="&end_date="+t.end_date),t.start_date&&null!=t.start_date&&(e+="&start_date="+t.start_date),t.count_min_pines&&null!=t.count_min_pines&&(e+="&count_min_pines="+t.count_min_pines),t.count_max_pines&&null!=t.count_max_pines&&(e+="&count_max_pines="+t.count_max_pines),t.count_max_libraries&&null!=t.count_max_libraries&&(e+="&count_max_libraries="+t.count_max_libraries),t.count_min_libraries&&null!=t.count_min_libraries&&(e+="&count_min_libraries="+t.count_min_libraries),t.mode_library_or_book&&null!=t.mode_library_or_book&&(e+="&mode_library_or_book="+t.mode_library_or_book),t.county_id&&null!=t.county_id&&(e+="&county_id="+t.county_id),t.state_id&&null!=t.state_id&&(e+="&state_id="+t.state_id),t.city_id&&null!=t.city_id&&(e+="&city_id="+t.city_id),t.status&&null!=t.status&&(e+="&status="+t.status),t.last_name&&null!=t.last_name&&(e+="&last_name="+t.last_name),t.first_name&&null!=t.first_name&&(e+="&first_name="+t.first_name),t.busqueda&&(e+="&busqueda="+t.busqueda),t.get_libraries_count&&(e+="&get-libraries-count="+t.get_libraries_count),t.get_allow_libraries_count&&(e+="&get-allow-libraries-count="+t.get_allow_libraries_count),e}getInformation(t={}){return this.httpClient.get(this.url+"get-users-reports?"+this.buildQueryParams(t))}getInformationReportWeek(t={}){return this.httpClient.get(this.url+"activity/get-week-reports?"+this.buildQueryParams(t))}getTimeSeries(t={}){return this.httpClient.get(this.url+"activity/get-report-qualificated?"+this.buildQueryParams(t))}exportTimeSeries(t={}){return this.httpClient.get(this.url+"activity/get-report-qualificated-export?"+this.buildQueryParams(t),{responseType:"blob"})}getTimeSeriesDownload(t={}){return this.httpClient.get(this.url+"activity/get-report-qualificated-download?"+this.buildQueryParams(t),{responseType:"blob"})}getAvgGroupQualifications(t,e={}){return this.httpClient.get(this.url+"activity/get-report-by-type-range/"+t+"?"+this.buildQueryParams(e))}downloadAvgGroupQualifications(t,e={}){return this.httpClient.get(this.url+"activity/download-report-by-type-range/"+t+"?"+this.buildQueryParams(e),{responseType:"blob"})}exportAvgGroupQualifications(t,e={}){return this.httpClient.get(this.url+"activity/export-report-by-type-range/"+t+"?"+this.buildQueryParams(e),{responseType:"blob"})}downloadAvgGroupQualificationsBook(t,e={}){return this.httpClient.get(this.url+"download-avg-qualifications/book/"+t+"?"+this.buildQueryParams(e),{responseType:"blob"})}exportAvgGroupQualificationsBook(t,e={}){return this.httpClient.get(this.url+"export-avg-qualifications/book/"+t+"?"+this.buildQueryParams(e),{responseType:"blob"})}getInformationReportMonthly(t={}){return this.httpClient.get(this.url+"activity/get-month-reports?"+this.buildQueryParams(t))}exportData(t={}){return this.httpClient.get(this.url+"export-data-list?"+this.buildQueryParams(t),{responseType:"blob"})}downloadData(t={}){return this.httpClient.get(this.url+"download-data-list?"+this.buildQueryParams(t),{responseType:"blob"})}getBooks(t){return this.httpClient.get(this.url+"all_books?"+this.buildQueryParams(t))}avgQualificationBook(t,e={}){return this.httpClient.get(this.url+"avg-qualifications/book/"+t+"?"+this.buildQueryParams(e))}}return t.\u0275fac=function(e){return new(e||t)(g.kc(u.b))},t.\u0275prov=g.Wb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var b=n("Iab2"),h=n("bO4D"),p=n("6f/U"),m=n("7EHt"),_=n("wd/R"),v=n("bVrE"),x=n("bJsC"),C=n("kmnG"),y=n("qFsG"),k=n("d3UM"),w=n("FKr1"),M=n("iadO"),L=n("NFeN"),O=n("ZOsW"),P=n("sYmb");function A(t,e){if(1&t){const t=g.hc();g.gc(0,"ion-col",10),g.gc(1,"mat-form-field",11),g.gc(2,"mat-label"),g.ed(3),g.tc(4,"translate"),g.fc(),g.gc(5,"input",12),g.oc("ngModelChange",(function(e){return g.Sc(t),g.sc(2).form.last_name=e})),g.tc(6,"translate"),g.fc(),g.fc(),g.fc()}if(2&t){const t=g.sc(2);g.Lb(3),g.fd(g.uc(4,3,"forms.last_names")),g.Lb(2),g.Ac("placeholder",g.uc(6,5,"forms.last_name"))("ngModel",t.form.last_name)}}function S(t,e){if(1&t){const t=g.hc();g.gc(0,"ion-col",10),g.gc(1,"mat-form-field",11),g.gc(2,"mat-label"),g.ed(3),g.tc(4,"translate"),g.fc(),g.gc(5,"input",12),g.oc("ngModelChange",(function(e){return g.Sc(t),g.sc(2).form.first_name=e})),g.tc(6,"translate"),g.fc(),g.fc(),g.fc()}if(2&t){const t=g.sc(2);g.Lb(3),g.fd(g.uc(4,3,"forms.names")),g.Lb(2),g.Ac("placeholder",g.uc(6,5,"forms.first_name"))("ngModel",t.form.first_name)}}function I(t,e){if(1&t&&(g.gc(0,"mat-option",16),g.ed(1),g.fc()),2&t){const t=e.$implicit;g.Ac("value",t.uuid),g.Lb(1),g.fd(t.description)}}function D(t,e){if(1&t){const t=g.hc();g.gc(0,"ion-col",10),g.gc(1,"mat-form-field",11),g.gc(2,"mat-label"),g.ed(3),g.tc(4,"translate"),g.fc(),g.gc(5,"mat-select",13),g.oc("ngModelChange",(function(e){return g.Sc(t),g.sc(2).form.role_id=e})),g.gc(6,"mat-option",14),g.ed(7),g.tc(8,"translate"),g.fc(),g.cd(9,I,2,2,"mat-option",15),g.fc(),g.fc(),g.fc()}if(2&t){const t=g.sc(2);g.Lb(3),g.fd(g.uc(4,4,"pages.messenger.type_users")),g.Lb(2),g.Ac("ngModel",t.form.role_id),g.Lb(2),g.fd(g.uc(8,6,"statuses.all")),g.Lb(2),g.Ac("ngForOf",t.roles)}}function z(t,e){if(1&t){const t=g.hc();g.gc(0,"ion-col",10),g.gc(1,"mat-form-field",11),g.gc(2,"mat-label"),g.ed(3),g.tc(4,"translate"),g.fc(),g.gc(5,"mat-select",13),g.oc("ngModelChange",(function(e){return g.Sc(t),g.sc(2).form.status=e})),g.gc(6,"mat-option",14),g.ed(7),g.tc(8,"translate"),g.fc(),g.gc(9,"mat-option",17),g.ed(10),g.tc(11,"translate"),g.fc(),g.gc(12,"mat-option",18),g.ed(13),g.tc(14,"translate"),g.fc(),g.fc(),g.fc(),g.fc()}if(2&t){const t=g.sc(2);g.Lb(3),g.fd(g.uc(4,5,"statuses.status")),g.Lb(2),g.Ac("ngModel",t.form.status),g.Lb(2),g.fd(g.uc(8,7,"statuses.all")),g.Lb(3),g.fd(g.uc(11,9,"statuses.active")),g.Lb(3),g.fd(g.uc(14,11,"statuses.inactive"))}}function q(t,e){if(1&t){const t=g.hc();g.gc(0,"ion-col",10),g.gc(1,"mat-form-field",11),g.gc(2,"mat-label"),g.ed(3),g.tc(4,"translate"),g.fc(),g.gc(5,"input",19),g.oc("ngModelChange",(function(e){return g.Sc(t),g.sc(2).form.filter_start_date=e})),g.fc(),g.bc(6,"mat-datepicker-toggle",20),g.bc(7,"mat-datepicker",null,21),g.fc(),g.fc()}if(2&t){const t=g.Oc(8),e=g.sc(2);g.Lb(3),g.fd(g.uc(4,4,"forms.start_date")),g.Lb(2),g.Ac("matDatepicker",t)("ngModel",e.form.filter_start_date),g.Lb(1),g.Ac("for",t)}}function F(t,e){if(1&t){const t=g.hc();g.gc(0,"ion-col",10),g.gc(1,"mat-form-field",11),g.gc(2,"mat-label"),g.ed(3),g.tc(4,"translate"),g.fc(),g.gc(5,"input",19),g.oc("ngModelChange",(function(e){return g.Sc(t),g.sc(2).form.filter_end_date=e})),g.fc(),g.bc(6,"mat-datepicker-toggle",20),g.bc(7,"mat-datepicker",null,22),g.fc(),g.fc()}if(2&t){const t=g.Oc(8),e=g.sc(2);g.Lb(3),g.fd(g.uc(4,4,"forms.end_date")),g.Lb(2),g.Ac("matDatepicker",t)("ngModel",e.form.filter_end_date),g.Lb(1),g.Ac("for",t)}}function B(t,e){if(1&t){const t=g.hc();g.gc(0,"ion-col",10),g.gc(1,"mat-form-field",11),g.gc(2,"mat-label"),g.ed(3),g.tc(4,"translate"),g.fc(),g.gc(5,"input",23),g.oc("ngModelChange",(function(e){return g.Sc(t),g.sc(2).form.count_min_pines=e})),g.tc(6,"translate"),g.fc(),g.gc(7,"mat-icon",24),g.ed(8,"vpn_key"),g.fc(),g.fc(),g.fc()}if(2&t){const t=g.sc(2);g.Lb(3),g.fd(g.uc(4,3,"forms.count_min_pines")),g.Lb(2),g.Ac("placeholder",g.uc(6,5,"forms.count_min_pines"))("ngModel",t.form.count_min_pines)}}function T(t,e){if(1&t){const t=g.hc();g.gc(0,"ion-col",10),g.gc(1,"mat-form-field",11),g.gc(2,"mat-label"),g.ed(3),g.tc(4,"translate"),g.fc(),g.gc(5,"input",23),g.oc("ngModelChange",(function(e){return g.Sc(t),g.sc(2).form.count_max_pines=e})),g.tc(6,"translate"),g.fc(),g.gc(7,"mat-icon",24),g.ed(8,"vpn_key"),g.fc(),g.fc(),g.fc()}if(2&t){const t=g.sc(2);g.Lb(3),g.fd(g.uc(4,3,"forms.count_max_pines")),g.Lb(2),g.Ac("placeholder",g.uc(6,5,"forms.count_max_pines"))("ngModel",t.form.count_max_pines)}}function R(t,e){if(1&t){const t=g.hc();g.gc(0,"ion-col",10),g.gc(1,"mat-form-field",11),g.gc(2,"mat-label"),g.ed(3),g.tc(4,"translate"),g.fc(),g.gc(5,"input",23),g.oc("ngModelChange",(function(e){return g.Sc(t),g.sc(2).form.count_min_libraries=e})),g.tc(6,"translate"),g.fc(),g.gc(7,"mat-icon",24),g.ed(8,"vpn_key"),g.fc(),g.fc(),g.fc()}if(2&t){const t=g.sc(2);g.Lb(3),g.fd(g.uc(4,3,"forms.count_min_libraries")),g.Lb(2),g.Ac("placeholder",g.uc(6,5,"forms.count_min_libraries"))("ngModel",t.form.count_min_libraries)}}function $(t,e){if(1&t){const t=g.hc();g.gc(0,"ion-col",10),g.gc(1,"mat-form-field",11),g.gc(2,"mat-label"),g.ed(3),g.tc(4,"translate"),g.fc(),g.gc(5,"input",23),g.oc("ngModelChange",(function(e){return g.Sc(t),g.sc(2).form.count_max_libraries=e})),g.tc(6,"translate"),g.fc(),g.gc(7,"mat-icon",24),g.ed(8,"vpn_key"),g.fc(),g.fc(),g.fc()}if(2&t){const t=g.sc(2);g.Lb(3),g.fd(g.uc(4,3,"forms.count_max_libraries")),g.Lb(2),g.Ac("placeholder",g.uc(6,5,"forms.count_max_libraries"))("ngModel",t.form.count_max_libraries)}}function E(t,e){if(1&t&&(g.gc(0,"ng-option",16),g.ed(1),g.fc()),2&t){const t=e.$implicit;g.Ac("value",t.id),g.Lb(1),g.fd(t.name)}}function Y(t,e){if(1&t){const t=g.hc();g.gc(0,"ion-col",10),g.gc(1,"ng-select",25),g.oc("ngModelChange",(function(e){return g.Sc(t),g.sc(2).form.country_id=e}))("change",(function(){g.Sc(t);const e=g.sc(2);return e.getStates(e.form.country_id)})),g.tc(2,"translate"),g.cd(3,E,2,2,"ng-option",15),g.fc(),g.fc()}if(2&t){const t=g.sc(2);g.Lb(1),g.Ac("ngModel",t.form.country_id)("placeholder",g.uc(2,3,"forms.country")),g.Lb(2),g.Ac("ngForOf",t.countries)}}function H(t,e){if(1&t&&(g.gc(0,"ng-option",16),g.ed(1),g.fc()),2&t){const t=e.$implicit;g.Ac("value",t.id),g.Lb(1),g.fd(t.name)}}function j(t,e){if(1&t){const t=g.hc();g.gc(0,"ion-col",10),g.gc(1,"ng-select",25),g.oc("ngModelChange",(function(e){return g.Sc(t),g.sc(2).form.state_id=e}))("change",(function(){g.Sc(t);const e=g.sc(2);return e.getCities(e.form.state_id)})),g.tc(2,"translate"),g.cd(3,H,2,2,"ng-option",15),g.fc(),g.fc()}if(2&t){const t=g.sc(2);g.Lb(1),g.Ac("ngModel",t.form.state_id)("placeholder",g.uc(2,3,"forms.state")),g.Lb(2),g.Ac("ngForOf",t.states)}}function G(t,e){if(1&t&&(g.gc(0,"ng-option",16),g.ed(1),g.fc()),2&t){const t=e.$implicit;g.Ac("value",t.id),g.Lb(1),g.fd(t.name)}}function U(t,e){if(1&t){const t=g.hc();g.gc(0,"ion-col",10),g.gc(1,"ng-select",25),g.oc("ngModelChange",(function(e){return g.Sc(t),g.sc(2).form.city_id=e}))("change",(function(){g.Sc(t);const e=g.sc(2);return e.getSchools(e.form.city_id)})),g.tc(2,"translate"),g.cd(3,G,2,2,"ng-option",15),g.fc(),g.fc()}if(2&t){const t=g.sc(2);g.Lb(1),g.Ac("ngModel",t.form.city_id)("placeholder",g.uc(2,3,"forms.city")),g.Lb(2),g.Ac("ngForOf",t.cities)}}function N(t,e){if(1&t&&(g.gc(0,"ng-option",16),g.ed(1),g.fc()),2&t){const t=e.$implicit;g.Ac("value",t.id),g.Lb(1),g.fd(t.name)}}function Q(t,e){if(1&t){const t=g.hc();g.gc(0,"ion-col",10),g.gc(1,"ng-select",26),g.oc("ngModelChange",(function(e){return g.Sc(t),g.sc(2).form.school_id=e})),g.tc(2,"translate"),g.cd(3,N,2,2,"ng-option",15),g.fc(),g.fc()}if(2&t){const t=g.sc(2);g.Lb(1),g.Ac("ngModel",t.form.school_id)("placeholder",g.uc(2,3,"forms.school")),g.Lb(2),g.Ac("ngForOf",t.schools)}}function W(t,e){if(1&t){const t=g.hc();g.gc(0,"ion-col",10),g.gc(1,"mat-form-field",11),g.gc(2,"mat-label"),g.ed(3),g.tc(4,"translate"),g.fc(),g.gc(5,"mat-select",13),g.oc("ngModelChange",(function(e){return g.Sc(t),g.sc(2).form.have_connect_days=e})),g.gc(6,"mat-option",14),g.ed(7),g.tc(8,"translate"),g.fc(),g.gc(9,"mat-option",27),g.ed(10),g.tc(11,"translate"),g.fc(),g.gc(12,"mat-option",28),g.ed(13),g.tc(14,"translate"),g.fc(),g.fc(),g.fc(),g.fc()}if(2&t){const t=g.sc(2);g.Lb(3),g.fd(g.uc(4,5,"pages.reports.activity")),g.Lb(2),g.Ac("ngModel",t.form.have_connect_days),g.Lb(2),g.fd(g.uc(8,7,"statuses.all")),g.Lb(3),g.fd(g.uc(11,9,"pages.reports.connect_today")),g.Lb(3),g.fd(g.uc(14,11,"pages.reports.connect_many_day"))}}function Z(t,e){if(1&t){const t=g.hc();g.gc(0,"ion-col",10),g.gc(1,"mat-form-field",11),g.gc(2,"mat-label"),g.ed(3),g.tc(4,"translate"),g.fc(),g.gc(5,"mat-select",13),g.oc("ngModelChange",(function(e){return g.Sc(t),g.sc(2).form.mode_library_or_book=e})),g.gc(6,"mat-option",14),g.ed(7),g.tc(8,"translate"),g.fc(),g.gc(9,"mat-option",29),g.ed(10),g.tc(11,"translate"),g.fc(),g.gc(12,"mat-option",30),g.ed(13),g.tc(14,"translate"),g.fc(),g.fc(),g.fc(),g.fc()}if(2&t){const t=g.sc(2);g.Lb(3),g.fd(g.uc(4,5,"pages.reports.mode_library_or_book")),g.Lb(2),g.Ac("ngModel",t.form.mode_library_or_book),g.Lb(2),g.fd(g.uc(8,7,"statuses.all")),g.Lb(3),g.fd(g.uc(11,9,"pages.reports.alone_users_libraries")),g.Lb(3),g.fd(g.uc(14,11,"pages.reports.alone_users_books"))}}function V(t,e){if(1&t&&g.bc(0,"ion-icon",34),2&t){const t=g.sc().$implicit;g.Ac("name",t.icon)}}function X(t,e){if(1&t){const t=g.hc();g.ec(0),g.gc(1,"ion-button",32),g.oc("click",(function(){g.Sc(t);const n=e.$implicit;return g.sc(3).execBtn(n.mode)})),g.cd(2,V,1,1,"ion-icon",33),g.ed(3),g.tc(4,"translate"),g.fc(),g.dc()}if(2&t){const t=e.$implicit;g.Lb(1),g.Ac("color",t.color)("disabled",t.disabled)("size",t.size),g.Lb(1),g.Ac("ngIf",t.icon),g.Lb(1),g.gd(" ",g.uc(4,5,t.title),"")}}function J(t,e){if(1&t&&(g.ec(0),g.cd(1,X,5,7,"ng-container",31),g.dc()),2&t){const t=g.sc(2);g.Lb(1),g.Ac("ngForOf",t.buttons)}}function K(t,e){if(1&t){const t=g.hc();g.gc(0,"ion-button",35),g.oc("click",(function(){return g.Sc(t),g.sc(2).resetForm()})),g.bc(1,"ion-icon",36),g.ed(2),g.tc(3,"translate"),g.fc()}2&t&&(g.Lb(2),g.gd(" ",g.uc(3,1,"forms.reset"),""))}function tt(t,e){if(1&t&&(g.gc(0,"ion-card-content",6),g.gc(1,"ion-grid"),g.gc(2,"ion-row"),g.cd(3,A,7,7,"ion-col",7),g.cd(4,S,7,7,"ion-col",7),g.cd(5,D,10,8,"ion-col",7),g.cd(6,z,15,13,"ion-col",7),g.fc(),g.gc(7,"ion-row"),g.cd(8,q,9,6,"ion-col",7),g.cd(9,F,9,6,"ion-col",7),g.fc(),g.gc(10,"ion-row"),g.cd(11,B,9,7,"ion-col",7),g.cd(12,T,9,7,"ion-col",7),g.cd(13,R,9,7,"ion-col",7),g.cd(14,$,9,7,"ion-col",7),g.fc(),g.gc(15,"ion-row"),g.cd(16,Y,4,5,"ion-col",7),g.cd(17,j,4,5,"ion-col",7),g.cd(18,U,4,5,"ion-col",7),g.cd(19,Q,4,5,"ion-col",7),g.fc(),g.gc(20,"ion-row"),g.cd(21,W,15,13,"ion-col",7),g.cd(22,Z,15,13,"ion-col",7),g.fc(),g.fc(),g.cd(23,J,2,1,"ng-container",8),g.cd(24,K,4,3,"ion-button",9),g.fc()),2&t){const t=g.sc();g.Lb(3),g.Ac("ngIf",t.required.last_name),g.Lb(1),g.Ac("ngIf",t.required.first_name),g.Lb(1),g.Ac("ngIf",t.required.roles),g.Lb(1),g.Ac("ngIf",t.required.status),g.Lb(2),g.Ac("ngIf",t.required.start_date),g.Lb(1),g.Ac("ngIf",t.required.end_date),g.Lb(2),g.Ac("ngIf",t.required.count_min_pines),g.Lb(1),g.Ac("ngIf",t.required.count_max_pines),g.Lb(1),g.Ac("ngIf",t.required.count_min_libraries),g.Lb(1),g.Ac("ngIf",t.required.count_max_libraries),g.Lb(2),g.Ac("ngIf",t.required.countries),g.Lb(1),g.Ac("ngIf",t.required.states),g.Lb(1),g.Ac("ngIf",t.required.cities),g.Lb(1),g.Ac("ngIf",t.required.schools),g.Lb(2),g.Ac("ngIf",t.required.have_connect_days),g.Lb(1),g.Ac("ngIf",t.required.mode_library_or_book),g.Lb(1),g.Ac("ngIf",t.buttons),g.Lb(1),g.Ac("ngIf",t.button_reset)}}let et=(()=>{class t{constructor(t,e,n){this.publicService=t,this.globalService=e,this.applyFiltersModeService=n,this.required={},this.roles=[],this.countries=[],this.states=[],this.cities=[],this.schools=[],this.buttons=[],this.button_reset=!0,this.moment=_,this.form={role_id:null,end_date:null,start_date:null,count_min_pines:null,count_max_pines:null,county_id:null,state_id:null,city_id:null,school_id:null,filter_start_date:null,filter_end_date:null,status:"all",last_name:"",first_name:"",have_connect_days:"all",mode_library_or_book:"all"}}ngOnInit(){this.getRequiredForms()}getRequiredForms(){1==this.required.roles&&this.getRoles(),1==this.required.countries&&this.getCountries()}getRoles(){this.publicService.getRoles().subscribe(t=>{this.roles=t.data},t=>{})}getCountries(){this.globalService.getCountries().subscribe(t=>{this.countries=t.data})}getStates(t){if(1!=this.required.states)return!1;this.globalService.getStates(t).subscribe(t=>{this.states=t.data})}getCities(t){if(1!=this.required.cities)return!1;this.globalService.getCities(t).subscribe(t=>{this.cities=t.data})}getSchools(t){if(1!=this.required.schools)return!1;this.globalService.getSchools(t).subscribe(t=>{this.schools=t.data})}execBtn(t){this.form.start_date=null,this.form.end_date=null,this.form.filter_start_date&&(this.form.start_date=this.moment(this.form.filter_start_date).format("YYYY-MM-DD")),this.form.filter_end_date&&(this.form.end_date=this.moment(this.form.filter_end_date).format("YYYY-MM-DD")),this.applyFiltersModeService.send({filters:this.form,mode:t})}resetForm(){this.form={role_id:null,end_date:null,start_date:null,count_min_pines:null,count_max_pines:null,county_id:null,state_id:null,city_id:null,school_id:null,filter_start_date:null,filter_end_date:null,status:"all",last_name:"",first_name:"",have_connect_days:"all",mode_library_or_book:"all"}}}return t.\u0275fac=function(e){return new(e||t)(g.ac(x.a),g.ac(v.a),g.ac(h.a))},t.\u0275cmp=g.Ub({type:t,selectors:[["filters-users"]],inputs:{required:"required",buttons:"buttons",button_reset:"button_reset"},decls:9,vars:4,consts:[[1,"mt-2","no-padding-small-500"],["hideToggle",""],[2,"padding","0"],[2,"width","100%"],["name","filter-outline"],["class","padding-small-sm",4,"ngIf"],[1,"padding-small-sm"],["size","12","size-sm","6","size-md","4","size-xl","3",4,"ngIf"],[4,"ngIf"],["color","medium","size","small",3,"click",4,"ngIf"],["size","12","size-sm","6","size-md","4","size-xl","3"],["appearance","legacy"],["matInput","",3,"placeholder","ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],["value","all"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["value","active"],["value","inactive"],["matInput","",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],["pickerStart",""],["pickerEnd",""],["matInput","","type","number",3,"placeholder","ngModel","ngModelChange"],["matSuffix",""],["appendTo","body",3,"ngModel","placeholder","ngModelChange","change"],["appendTo","body",3,"ngModel","placeholder","ngModelChange"],["value","today"],["value","all_days"],["value","libraries"],["value","books"],[4,"ngFor","ngForOf"],[3,"color","disabled","size","click"],[3,"name",4,"ngIf"],[3,"name"],["color","medium","size","small",3,"click"],["name","refresh-outline"]],template:function(t,e){1&t&&(g.gc(0,"ion-card",0),g.gc(1,"mat-expansion-panel",1),g.gc(2,"mat-expansion-panel-header",2),g.gc(3,"mat-panel-title"),g.gc(4,"ion-item",3),g.bc(5,"ion-icon",4),g.ed(6),g.tc(7,"translate"),g.fc(),g.fc(),g.fc(),g.cd(8,tt,25,18,"ion-card-content",5),g.fc(),g.fc()),2&t&&(g.Lb(6),g.gd(" ",g.uc(7,2,"forms.filter")," "),g.Lb(2),g.Ac("ngIf",e.required))},directives:[i.m,m.c,m.g,m.h,i.H,i.C,o.t,i.n,i.A,i.gb,i.t,C.c,C.g,y.b,c.c,c.r,c.u,k.a,w.o,o.s,M.f,M.h,C.j,M.d,c.x,L.a,O.a,O.o,i.k],pipes:[P.d],styles:[""]}),t})();var nt=n("bv9b"),ot=n("YTC1");function ct(t,e){1&t&&g.bc(0,"mat-progress-bar",18)}function it(t,e){1&t&&g.bc(0,"card-load-animation",19),2&t&&g.Ac("count",1)("all_width",!0)}function at(t,e){1&t&&g.bc(0,"card-load-animation",19),2&t&&g.Ac("count",1)("all_width",!0)}function rt(t,e){1&t&&g.bc(0,"card-load-animation",19),2&t&&g.Ac("count",1)("all_width",!0)}function st(t,e){1&t&&g.bc(0,"card-load-animation",19),2&t&&g.Ac("count",1)("all_width",!0)}function lt(t,e){1&t&&g.bc(0,"card-load-animation",19),2&t&&g.Ac("count",1)("all_width",!0)}function dt(t,e){1&t&&g.bc(0,"card-load-animation",19),2&t&&g.Ac("count",1)("all_width",!0)}function gt(t,e){1&t&&g.bc(0,"card-load-animation",19),2&t&&g.Ac("count",1)("all_width",!0)}function ut(t,e){1&t&&(g.gc(0,"h2",8),g.ed(1),g.tc(2,"translate"),g.fc()),2&t&&(g.Lb(1),g.fd(g.uc(2,1,"forms.no_data")))}function ft(t,e){if(1&t&&(g.gc(0,"ion-col",23),g.gc(1,"ion-card",11),g.gc(2,"ion-card-header"),g.gc(3,"ion-card-title"),g.ed(4),g.tc(5,"translate"),g.fc(),g.fc(),g.gc(6,"ion-card-content",12),g.cd(7,gt,1,2,"card-load-animation",13),g.gc(8,"div",14),g.gc(9,"canvas",15),g.ed(10),g.fc(),g.fc(),g.cd(11,ut,3,3,"h2",24),g.fc(),g.fc(),g.fc()),2&t){const t=e.$implicit,n=g.sc(2);g.Lb(4),g.gd(" ",g.uc(5,6,t.title)," "),g.Lb(3),g.Ac("ngIf",n.loading||n.loadingCharts&&null==t.chart_graph),g.Lb(1),g.Ac("ngClass",n.loading||null==t.chart_graph||0==t.data.length?"d-none":""),g.Lb(1),g.Ac("id",t._id),g.Lb(1),g.fd(t.chart_graph),g.Lb(1),g.Ac("ngIf",0==t.data.length)}}function bt(t,e){if(1&t&&(g.gc(0,"ion-row"),g.gc(1,"ion-col",20),g.gc(2,"h3",21),g.ed(3),g.tc(4,"translate"),g.fc(),g.fc(),g.cd(5,ft,12,8,"ion-col",22),g.fc()),2&t){const t=e.$implicit;g.Lb(3),g.fd(g.uc(4,2,t.title)),g.Lb(2),g.Ac("ngForOf",t.items)}}function ht(t,e){1&t&&g.bc(0,"card-load-animation",19),2&t&&g.Ac("count",1)("all_width",!0)}function pt(t,e){1&t&&(g.gc(0,"h2",8),g.ed(1),g.tc(2,"translate"),g.fc()),2&t&&(g.Lb(1),g.fd(g.uc(2,1,"forms.no_data")))}function mt(t,e){if(1&t&&(g.gc(0,"ion-col",23),g.gc(1,"ion-card",11),g.gc(2,"ion-card-header"),g.gc(3,"ion-card-title"),g.ed(4),g.tc(5,"translate"),g.fc(),g.fc(),g.gc(6,"ion-card-content",12),g.cd(7,ht,1,2,"card-load-animation",13),g.gc(8,"div",14),g.gc(9,"canvas",15),g.ed(10),g.fc(),g.fc(),g.cd(11,pt,3,3,"h2",24),g.fc(),g.fc(),g.fc()),2&t){const t=e.$implicit,n=g.sc(2);g.Lb(4),g.gd(" ",g.uc(5,6,t.title)," "),g.Lb(3),g.Ac("ngIf",n.loading||n.loadingCharts&&null==t.chart_graph),g.Lb(1),g.Ac("ngClass",n.loading||null==t.chart_graph||0==t.data.length?"d-none":""),g.Lb(1),g.Ac("id",t._id),g.Lb(1),g.fd(t.chart_graph),g.Lb(1),g.Ac("ngIf",0==t.data.length)}}function _t(t,e){if(1&t&&(g.gc(0,"ion-row"),g.gc(1,"ion-col",20),g.gc(2,"h3",21),g.ed(3),g.tc(4,"translate"),g.fc(),g.fc(),g.cd(5,mt,12,8,"ion-col",22),g.fc()),2&t){const t=e.$implicit;g.Lb(3),g.fd(g.uc(4,2,t.title)),g.Lb(2),g.Ac("ngForOf",t.items)}}let vt=(()=>{class t{constructor(t,e,n){this.reportUserService=t,this.applyFiltersModeService=e,this.controlErroresService=n,this.loading=!1,this.scrollbarStyle=s.a.scrollbarStyle,this.button_donwload_series={color:"danger",size:"small",mode:"download",icon:"cloud-download-outline",disabled:!1,title:"buttons.download"},this.button_export_series={color:"success",size:"small",mode:"export-series",icon:"download-outline",disabled:!1,title:"buttons.export"},this.button_search={color:"warning",size:"small",mode:"search",disabled:!1,title:"buttons.search",icon:"search-outline"},this.button_search_holguin={color:"warning",size:"small",mode:"search-holguin",disabled:!1,title:"buttons.search",icon:"search-outline"},this.button_donwload_holguin={color:"danger",size:"small",mode:"download-holguin",icon:"cloud-download-outline",disabled:!1,title:"buttons.download"},this.button_export_holguin={color:"success",size:"small",mode:"export-holguin",icon:"download-outline",disabled:!1,title:"buttons.export"},this.button_donwload_teacher={color:"danger",size:"small",mode:"download-teacher",icon:"cloud-download-outline",disabled:!1,title:"buttons.download"},this.button_export_teacher={color:"success",size:"small",mode:"export-teacher",icon:"download-outline",disabled:!1,title:"buttons.export"},this.button_search_teacher={color:"warning",size:"small",mode:"search-teacher",disabled:!1,title:"buttons.search",icon:"search-outline"},this.loadingCharts=!1,this.charts={all_qualificated:null,all_unqualified:null,book_qualificated:null,book_unqualified:null,course_qualificated:null,course_unqualified:null,holguin_all:null,holguin_qualificated:null,holguin_unqualified:null,holguin_punctuaction_all:null,holguin_punctuaction_qualificated:null,holguin_punctuaction_unqualified:null,all_teachers_qualificated:null,task_teachers_qualificated:null,quiz_teachers_qualificated:null,videoquiz_teachers_qualificated:null,teachers_punctuaction_all:null,teachers_punctuaction_qualificated:null,teachers_punctuaction_unqualified:null},this.graphsCircles={holguin:[],teacher:[]},this.buttons_filters=[this.button_search,this.button_donwload_series,this.button_export_series],this.buttons_filters_holguin=[this.button_search_holguin,this.button_donwload_holguin,this.button_export_holguin],this.buttons_filters_teacher=[this.button_search_teacher,this.button_donwload_teacher,this.button_export_teacher],this.allowFilters={end_date:1,start_date:1}}ngOnDestroy(){this.filtersRxjs.unsubscribe()}ngOnInit(){this.filtersRxjs=this.applyFiltersModeService.get$().subscribe(t=>{this.applyFilters(t)}),this.getData({}),this.getAvgGroupQualifications("holguin",{}),this.getAvgGroupQualifications("teacher",{})}getData(t={}){this.loading=!0,this.reportUserService.getTimeSeries(t).subscribe(t=>{this.loading=!1,this.loadingCharts=!0;for(const n of t.data)try{this.loadGraficoGeneral(n._el,n.data.map(t=>t.date_format),n.data.map(t=>t.avg),n.title,n._id)}catch(e){}this.loadingCharts=!1},t=>{this.loading=!1,this.controlErroresService.control(t)})}getAvgGroupQualifications(t,e={}){this.loading=!0,this.reportUserService.getAvgGroupQualifications(t,e).subscribe(e=>{this.loading=!1,this.graphsCircles[t]=e.data,this.loadingCharts=!0,setTimeout(()=>{for(const n of this.graphsCircles[t])for(const t of n.items)try{this.loadGraficoGeneralPie(t,t.data.map(t=>t.qualification_range),t.data.map(t=>t.count),t.data.map(t=>t.color))}catch(e){}this.loadingCharts=!1},2e3)},t=>{this.loading=!1,this.controlErroresService.control(t)})}applyFilters(t){if(!t)return!1;if(!t.mode||!t.filters)return!1;switch(t.mode){case"search":this.getData(t.filters);break;case"search-holguin":this.getAvgGroupQualifications("holguin",t.filters);break;case"download":this.downloadData(this.reportUserService.getTimeSeriesDownload(t.filters));break;case"export-series":this.exportDataSeries(this.reportUserService.exportTimeSeries(t.filters));break;case"download-holguin":this.downloadData(this.reportUserService.downloadAvgGroupQualifications("holguin",t.filters));break;case"export-holguin":this.exportDataSeries(this.reportUserService.exportAvgGroupQualifications("holguin",t.filters));break;case"search-teacher":this.getAvgGroupQualifications("teacher",t.filters);break;case"download-teacher":this.downloadData(this.reportUserService.downloadAvgGroupQualifications("teacher",t.filters));break;case"export-teacher":this.exportDataSeries(this.reportUserService.exportAvgGroupQualifications("teacher",t.filters))}}exportDataSeries(t){this.button_export_series.disabled=!0,this.loading=!0,t.subscribe(t=>{this.loading=!1,this.button_export_series.disabled=!1;const e=new Blob([t],{type:t.type});var n=this.toExportFileName("Serie de tiempo de la evoluci\xf3n del aprendizaje","xlsx");Object(b.saveAs)(e,n)},t=>{this.button_export_series.disabled=!1,this.controlErroresService.control(t),this.loading=!1})}downloadData(t){this.button_donwload_series.disabled=!0,this.loading=!0,t.subscribe(t=>{this.loading=!1;const e=new Blob([t],{type:t.type});var n=this.toExportFileName("Serie de tiempo de la evoluci\xf3n del aprendizaje  ","pdf");this.button_donwload_series.disabled=!1,Object(b.saveAs)(e,n)},t=>{this.button_donwload_series.disabled=!1,this.controlErroresService.control(t),this.loading=!1})}toExportFileName(t,e){return`${t}_${(new Date).getTime()}.${e}`}loadGraficoGeneral(t,e,n,o,c){null!=this.charts[t]&&this.charts[t].destroy(),n.length>0&&(console.clear(),console.log(t,e,n,o,c)),this.charts[t]=new r.a(c,{type:"line",data:{labels:e,datasets:[{label:o,data:n,backgroundColor:"rgba(0, 156, 224, 1)",borderColor:"rgba(0, 156, 224, 1)",borderWidth:1}]},options:{scales:{y:{beginAtZero:!0}}}}),this.charts[t].update()}loadGraficoGeneralPie(t,e,n,o){null!=t.chart_graph&&t.chart_graph.destroy(),t.chart_graph=new r.a(t._id,{type:"pie",data:{labels:e,datasets:[{label:t.title,data:n,backgroundColor:o,borderColor:"rgba(0, 156, 224, 1)",borderWidth:1}]},options:{responsive:!0,plugins:{legend:{position:"top"},tooltip:{callbacks:{label:function(t){return t.parsed+""}}}}}}),t.chart_graph.update()}}return t.\u0275fac=function(e){return new(e||t)(g.ac(f),g.ac(h.a),g.ac(l.a))},t.\u0275cmp=g.Ub({type:t,selectors:[["app-activities-report-admin"]],decls:123,vars:79,consts:[["translucent","true"],["slot","start"],["mode","indeterminate",4,"ngIf"],["fullscreen","true",3,"scrollbar"],["hideToggle","","expanded","true"],[2,"padding","0"],[2,"width","100%"],["name","bar-chart-outline"],[1,"text-center"],[3,"required","buttons"],["size","12","size-sm","6"],[1,"mt-2","no-padding-small-500"],[1,"padding-small-sm"],[3,"count","all_width",4,"ngIf"],[3,"ngClass"],[3,"id"],["name","pie-chart-outline"],[4,"ngFor","ngForOf"],["mode","indeterminate"],[3,"count","all_width"],["size","12"],[1,"text-center","bold"],["size","12","size-sm","6","size-md","4","size-xl","3",4,"ngFor","ngForOf"],["size","12","size-sm","6","size-md","4","size-xl","3"],["class","text-center",4,"ngIf"]],template:function(t,e){1&t&&(g.gc(0,"ion-header",0),g.gc(1,"ion-toolbar"),g.gc(2,"ion-buttons",1),g.bc(3,"ion-menu-button"),g.fc(),g.gc(4,"ion-title"),g.ed(5),g.tc(6,"translate"),g.fc(),g.fc(),g.cd(7,ct,1,0,"mat-progress-bar",2),g.fc(),g.gc(8,"ion-content",3),g.gc(9,"mat-expansion-panel",4),g.gc(10,"mat-expansion-panel-header",5),g.gc(11,"mat-panel-title"),g.gc(12,"ion-item",6),g.bc(13,"ion-icon",7),g.ed(14),g.tc(15,"translate"),g.fc(),g.fc(),g.fc(),g.gc(16,"div"),g.gc(17,"h3",8),g.ed(18),g.tc(19,"translate"),g.fc(),g.bc(20,"filters-users",9),g.gc(21,"ion-grid"),g.gc(22,"ion-row"),g.gc(23,"ion-col",10),g.gc(24,"ion-card",11),g.gc(25,"ion-card-header"),g.gc(26,"ion-card-title"),g.ed(27),g.tc(28,"translate"),g.fc(),g.fc(),g.gc(29,"ion-card-content",12),g.cd(30,it,1,2,"card-load-animation",13),g.gc(31,"div",14),g.gc(32,"canvas",15),g.ed(33),g.fc(),g.fc(),g.fc(),g.fc(),g.fc(),g.gc(34,"ion-col",10),g.gc(35,"ion-card",11),g.gc(36,"ion-card-header"),g.gc(37,"ion-card-title"),g.ed(38),g.tc(39,"translate"),g.fc(),g.fc(),g.gc(40,"ion-card-content",12),g.cd(41,at,1,2,"card-load-animation",13),g.gc(42,"div",14),g.gc(43,"canvas",15),g.ed(44),g.fc(),g.fc(),g.fc(),g.fc(),g.fc(),g.fc(),g.fc(),g.gc(45,"h3",8),g.ed(46),g.tc(47,"translate"),g.fc(),g.gc(48,"ion-grid"),g.gc(49,"ion-row"),g.gc(50,"ion-col",10),g.gc(51,"ion-card",11),g.gc(52,"ion-card-header"),g.gc(53,"ion-card-title"),g.ed(54),g.tc(55,"translate"),g.fc(),g.fc(),g.gc(56,"ion-card-content",12),g.cd(57,rt,1,2,"card-load-animation",13),g.gc(58,"div",14),g.gc(59,"canvas",15),g.ed(60),g.fc(),g.fc(),g.fc(),g.fc(),g.fc(),g.gc(61,"ion-col",10),g.gc(62,"ion-card",11),g.gc(63,"ion-card-header"),g.gc(64,"ion-card-title"),g.ed(65),g.tc(66,"translate"),g.fc(),g.fc(),g.gc(67,"ion-card-content",12),g.cd(68,st,1,2,"card-load-animation",13),g.gc(69,"div",14),g.gc(70,"canvas",15),g.ed(71),g.fc(),g.fc(),g.fc(),g.fc(),g.fc(),g.fc(),g.fc(),g.gc(72,"h3",8),g.ed(73),g.tc(74,"translate"),g.fc(),g.gc(75,"ion-grid"),g.gc(76,"ion-row"),g.gc(77,"ion-col",10),g.gc(78,"ion-card",11),g.gc(79,"ion-card-header"),g.gc(80,"ion-card-title"),g.ed(81),g.tc(82,"translate"),g.fc(),g.fc(),g.gc(83,"ion-card-content",12),g.cd(84,lt,1,2,"card-load-animation",13),g.gc(85,"div",14),g.gc(86,"canvas",15),g.ed(87),g.fc(),g.fc(),g.fc(),g.fc(),g.fc(),g.gc(88,"ion-col",10),g.gc(89,"ion-card",11),g.gc(90,"ion-card-header"),g.gc(91,"ion-card-title"),g.ed(92),g.tc(93,"translate"),g.fc(),g.fc(),g.gc(94,"ion-card-content",12),g.cd(95,dt,1,2,"card-load-animation",13),g.gc(96,"div",14),g.gc(97,"canvas",15),g.ed(98),g.fc(),g.fc(),g.fc(),g.fc(),g.fc(),g.fc(),g.fc(),g.fc(),g.fc(),g.gc(99,"mat-expansion-panel",4),g.gc(100,"mat-expansion-panel-header",5),g.gc(101,"mat-panel-title"),g.gc(102,"ion-item",6),g.bc(103,"ion-icon",16),g.ed(104),g.tc(105,"translate"),g.tc(106,"translate"),g.fc(),g.fc(),g.fc(),g.gc(107,"div"),g.bc(108,"filters-users",9),g.gc(109,"ion-grid"),g.cd(110,bt,6,4,"ion-row",17),g.fc(),g.fc(),g.fc(),g.gc(111,"mat-expansion-panel",4),g.gc(112,"mat-expansion-panel-header",5),g.gc(113,"mat-panel-title"),g.gc(114,"ion-item",6),g.bc(115,"ion-icon",16),g.ed(116),g.tc(117,"translate"),g.tc(118,"translate"),g.fc(),g.fc(),g.fc(),g.gc(119,"div"),g.bc(120,"filters-users",9),g.gc(121,"ion-grid"),g.cd(122,_t,6,4,"ion-row",17),g.fc(),g.fc(),g.fc(),g.fc()),2&t&&(g.Lb(5),g.gd(" ",g.uc(6,49,"pages.reports.activity_reports"),""),g.Lb(2),g.Ac("ngIf",e.loading),g.Lb(1),g.Bc("scrollbar",e.scrollbarStyle),g.Lb(6),g.gd(" ",g.uc(15,51,"pages.reports.title_evolution_time")," "),g.Lb(4),g.fd(g.uc(19,53,"pages.reports.all")),g.Lb(2),g.Ac("required",e.allowFilters)("buttons",e.buttons_filters),g.Lb(7),g.gd(" ",g.uc(28,55,"pages.reports.activities_qualificated")," "),g.Lb(3),g.Ac("ngIf",e.loading||e.loadingCharts&&null==e.charts.all_qualificated),g.Lb(1),g.Ac("ngClass",e.loading||null==e.charts.all_qualificated?"d-none":""),g.Lb(1),g.Ac("id","chart_all_qualificated"),g.Lb(1),g.fd(e.charts.all_qualificated),g.Lb(5),g.gd(" ",g.uc(39,57,"pages.reports.activities_unqualified")," "),g.Lb(3),g.Ac("ngIf",e.loading||e.loadingCharts&&null==e.charts.all_unqualified),g.Lb(1),g.Ac("ngClass",e.loading||null==e.charts.all_unqualified?"d-none":""),g.Lb(1),g.Ac("id","chart_all_unqualified"),g.Lb(1),g.fd(e.charts.all_unqualified),g.Lb(2),g.fd(g.uc(47,59,"pages.reports.books")),g.Lb(8),g.gd(" ",g.uc(55,61,"pages.reports.activities_qualificated")," "),g.Lb(3),g.Ac("ngIf",e.loading||e.loadingCharts&&null==e.charts.book_qualificated),g.Lb(1),g.Ac("ngClass",e.loading||null==e.charts.book_qualificated?"d-none":""),g.Lb(1),g.Ac("id","chart_book_qualificated"),g.Lb(1),g.fd(e.charts.book_qualificated),g.Lb(5),g.gd(" ",g.uc(66,63,"pages.reports.activities_unqualified")," "),g.Lb(3),g.Ac("ngIf",e.loading||e.loadingCharts&&null==e.charts.book_unqualified),g.Lb(1),g.Ac("ngClass",e.loading||null==e.charts.book_unqualified?"d-none":""),g.Lb(1),g.Ac("id","chart_book_unqualified"),g.Lb(1),g.fd(e.charts.book_unqualified),g.Lb(2),g.fd(g.uc(74,65,"pages.reports.teachers")),g.Lb(8),g.gd(" ",g.uc(82,67,"pages.reports.activities_unqualified")," "),g.Lb(3),g.Ac("ngIf",e.loading||e.loadingCharts&&null==e.charts.course_qualificated),g.Lb(1),g.Ac("ngClass",e.loading||null==e.charts.course_qualificated?"d-none":""),g.Lb(1),g.Ac("id","chart_course_qualificated"),g.Lb(1),g.fd(e.charts.course_qualificated),g.Lb(5),g.gd(" ",g.uc(93,69,"pages.reports.activities_qualificated")," "),g.Lb(3),g.Ac("ngIf",e.loading||e.loadingCharts&&null==e.charts.course_unqualified),g.Lb(1),g.Ac("ngClass",e.loading||null==e.charts.course_unqualified?"d-none":""),g.Lb(1),g.Ac("id","chart_course_unqualified"),g.Lb(1),g.fd(e.charts.course_unqualified),g.Lb(6),g.hd(" ",g.uc(105,71,"pages.reports.group_by_qualification")," - ",g.uc(106,73,"pages.reports.admin")," "),g.Lb(4),g.Ac("required",e.allowFilters)("buttons",e.buttons_filters_holguin),g.Lb(2),g.Ac("ngForOf",e.graphsCircles.holguin),g.Lb(6),g.hd(" ",g.uc(117,75,"pages.reports.group_by_qualification")," - ",g.uc(118,77,"pages.reports.teachers")," "),g.Lb(4),g.Ac("required",e.allowFilters)("buttons",e.buttons_filters_teacher),g.Lb(2),g.Ac("ngForOf",e.graphsCircles.teacher))},directives:[i.B,i.zb,i.l,i.R,i.xb,o.t,i.u,p.b,m.c,m.g,m.h,i.H,i.C,et,i.A,i.gb,i.t,i.m,i.o,i.q,i.n,o.q,o.s,nt.a,ot.a],pipes:[P.d],styles:[""]}),t})();var xt=n("mrSG"),Ct=n("aa3j");function yt(t,e){1&t&&g.bc(0,"mat-progress-bar",14)}function kt(t,e){1&t&&g.bc(0,"card-load-animation",15),2&t&&g.Ac("count",1)("all_width",!0)}function wt(t,e){1&t&&g.bc(0,"card-load-animation",15),2&t&&g.Ac("count",1)("all_width",!0)}function Mt(t,e){1&t&&g.bc(0,"card-load-animation",15),2&t&&g.Ac("count",1)("all_width",!0)}function Lt(t,e){1&t&&g.bc(0,"card-load-animation",15),2&t&&g.Ac("count",1)("all_width",!0)}function Ot(t,e){1&t&&g.bc(0,"card-load-animation",15),2&t&&g.Ac("count",1)("all_width",!0)}let Pt=(()=>{class t{constructor(t,e,n,o,c){this.navParams=t,this.applyFiltersModeService=e,this.reportService=n,this.controlErroresService=o,this.modalCtrl=c,this.scrollbarStyle=s.a.scrollbarStyle,this.loading=!1,this.buttons_filters=[{color:"warning",size:"small",mode:"find",disabled:!1,title:"buttons.search",icon:"search-outline"},{color:"danger",size:"small",mode:"download",icon:"cloud-download-outline",disabled:!1,title:"buttons.download"},{color:"success",size:"small",mode:"export",icon:"download-outline",disabled:!1,title:"buttons.export"}],this.charts={academic_performance:null,pines:null,views:null,download:null,printing:null},this.chart_father={chart:null},this.loadingCharts=!1,this.loadingBar=!1,this.book_id=t.data.book_id,this.allowFilters={end_date:1,start_date:1}}ngOnInit(){this.filterRxjs=this.applyFiltersModeService.get$().subscribe(t=>{this.applyFilters(t)}),this.findData()}ngOnDestroy(){this.filterRxjs.unsubscribe()}findData(t={}){this.loading=!0,this.loadingCharts=!0,this.reportService.avgQualificationBook(this.book_id,t).subscribe(t=>{this.loading=!1,this.book=t.data,this.loadGraficoGeneral("academic_performance",t.data.list_avg.map(t=>t.date_format),t.data.list_avg.map(t=>t.count),"Promedio de calificaciones","chart_academic_performance");try{this.loadGraficoGeneral("pines",t.data.data_month.map(t=>t.date_format),t.data.data_month.map(t=>t.count),"Activaciones","chart_pines_report")}catch(e){}try{this.loadGraficoGeneral("views",t.data.data_views.map(t=>t.date_format),t.data.data_views.map(t=>t.count),"Visualizaciones","chart_views_report")}catch(e){}try{this.loadGraficoGeneral("download",t.data.data_downloads.map(t=>t.date_format),t.data.data_downloads.map(t=>t.count),"Descargas","chart_download_report")}catch(e){}try{this.loadGraficoGeneral("printing",t.data.data_printing.map(t=>t.date_format),t.data.data_printing.map(t=>t.count),"Impresiones","chart_printing_report")}catch(e){}this.loadingCharts=!1},t=>{this.loading=!1,this.loadingCharts=!1,this.controlErroresService.control(t),this.dismiss()})}applyFilters(t){if(!t)return!1;if(!t.mode||!t.filters)return!1;switch(t.mode){case"find":this.findData(t.filters);break;case"download":this.downloadData(t.filters);break;case"export":this.exportData(t.filters)}}exportData(t){this.loadingBar=!0,this.reportService.exportAvgGroupQualificationsBook(this.book_id,t).subscribe(t=>{this.loadingBar=!1;const e=new Blob([t],{type:t.type});var n=this.toExportFileName("Estad\xedsticas del libro "+this.book.name,"xlsx");Object(b.saveAs)(e,n)},t=>{this.controlErroresService.control(t),this.loadingBar=!1})}downloadData(t){this.loadingBar=!0,this.reportService.downloadAvgGroupQualificationsBook(this.book_id,t).subscribe(t=>{this.loadingBar=!1;const e=new Blob([t],{type:t.type});var n=this.toExportFileName("Estad\xedsticas del libro "+this.book.name,"pdf");Object(b.saveAs)(e,n)},t=>{this.controlErroresService.control(t),this.loadingBar=!1})}toExportFileName(t,e){return`${t}_${(new Date).getTime()}.${e}`}dismiss(t){this.modalCtrl.dismiss(t)}loadGraficoGeneral(t,e,n,o,c){null!=this.charts[t]&&this.charts[t].destroy(),this.charts[t]=new r.a(c,{type:"line",data:{labels:e,datasets:[{label:o,data:n,backgroundColor:"rgba(0, 156, 224, 1)",borderColor:"rgba(0, 156, 224, 1)",borderWidth:1}]},options:{scales:{y:{beginAtZero:!0}}}}),this.charts[t].update()}}return t.\u0275fac=function(e){return new(e||t)(g.ac(i.Fb),g.ac(h.a),g.ac(f),g.ac(l.a),g.ac(i.Db))},t.\u0275cmp=g.Ub({type:t,selectors:[["app-report-by-book-qualifications"]],decls:69,vars:43,consts:[["translucent","true"],["slot","end"],[3,"disabled","click"],["name","close-outline"],["mode","indeterminate",4,"ngIf"],["fullscreen","true",3,"scrollbar"],["content",""],[3,"required","buttons"],["size","12","size-sm","6"],[1,"mt-2","no-padding-small-500"],[1,"padding-small-sm"],[3,"count","all_width",4,"ngIf"],[3,"ngClass"],[3,"id"],["mode","indeterminate"],[3,"count","all_width"]],template:function(t,e){1&t&&(g.gc(0,"ion-header",0),g.gc(1,"ion-toolbar"),g.gc(2,"ion-title"),g.ed(3),g.tc(4,"translate"),g.fc(),g.gc(5,"ion-buttons",1),g.gc(6,"ion-button",2),g.oc("click",(function(){return e.dismiss()})),g.bc(7,"ion-icon",3),g.fc(),g.fc(),g.fc(),g.cd(8,yt,1,0,"mat-progress-bar",4),g.fc(),g.gc(9,"ion-content",5,6),g.bc(11,"filters-users",7),g.gc(12,"ion-grid"),g.gc(13,"ion-row"),g.gc(14,"ion-col",8),g.gc(15,"ion-card",9),g.gc(16,"ion-card-header"),g.gc(17,"ion-card-title"),g.ed(18),g.tc(19,"translate"),g.fc(),g.fc(),g.gc(20,"ion-card-content",10),g.cd(21,kt,1,2,"card-load-animation",11),g.gc(22,"div",12),g.gc(23,"canvas",13),g.ed(24),g.fc(),g.fc(),g.fc(),g.fc(),g.fc(),g.gc(25,"ion-col",8),g.gc(26,"ion-card",9),g.gc(27,"ion-card-header"),g.gc(28,"ion-card-title"),g.ed(29),g.tc(30,"translate"),g.fc(),g.fc(),g.gc(31,"ion-card-content",10),g.cd(32,wt,1,2,"card-load-animation",11),g.gc(33,"div",12),g.gc(34,"canvas",13),g.ed(35),g.fc(),g.fc(),g.fc(),g.fc(),g.fc(),g.gc(36,"ion-col",8),g.gc(37,"ion-card",9),g.gc(38,"ion-card-header"),g.gc(39,"ion-card-title"),g.ed(40),g.tc(41,"translate"),g.fc(),g.fc(),g.gc(42,"ion-card-content",10),g.cd(43,Mt,1,2,"card-load-animation",11),g.gc(44,"div",12),g.gc(45,"canvas",13),g.ed(46),g.fc(),g.fc(),g.fc(),g.fc(),g.fc(),g.gc(47,"ion-col",8),g.gc(48,"ion-card",9),g.gc(49,"ion-card-header"),g.gc(50,"ion-card-title"),g.ed(51),g.tc(52,"translate"),g.fc(),g.fc(),g.gc(53,"ion-card-content",10),g.cd(54,Lt,1,2,"card-load-animation",11),g.gc(55,"div",12),g.gc(56,"canvas",13),g.ed(57),g.fc(),g.fc(),g.fc(),g.fc(),g.fc(),g.gc(58,"ion-col",8),g.gc(59,"ion-card",9),g.gc(60,"ion-card-header"),g.gc(61,"ion-card-title"),g.ed(62),g.tc(63,"translate"),g.fc(),g.fc(),g.gc(64,"ion-card-content",10),g.cd(65,Ot,1,2,"card-load-animation",11),g.gc(66,"div",12),g.gc(67,"canvas",13),g.ed(68),g.fc(),g.fc(),g.fc(),g.fc(),g.fc(),g.fc(),g.fc(),g.fc()),2&t&&(g.Lb(3),g.gd(" ",null!=e.book?e.book.name:g.uc(4,31,"forms.loading_book")," "),g.Lb(3),g.Ac("disabled",e.loading),g.Lb(2),g.Ac("ngIf",e.loading||e.loadingBar),g.Lb(1),g.Bc("scrollbar",e.scrollbarStyle),g.Lb(2),g.Ac("required",e.allowFilters)("buttons",e.buttons_filters),g.Lb(7),g.gd(" ",g.uc(19,33,"buttons.academic_performance")," "),g.Lb(3),g.Ac("ngIf",e.loading||e.loadingCharts&&null==e.charts.academic_performance),g.Lb(1),g.Ac("ngClass",e.loading||null==e.charts.academic_performance?"d-none":""),g.Lb(1),g.Ac("id","chart_academic_performance"),g.Lb(1),g.fd(e.charts.academic_performance),g.Lb(5),g.gd(" ",g.uc(30,35,"pages.reports.activations_pines")," "),g.Lb(3),g.Ac("ngIf",e.loading||e.loadingCharts&&null==e.charts.pines),g.Lb(1),g.Ac("ngClass",e.loading||null==e.charts.pines?"d-none":""),g.Lb(1),g.Ac("id","chart_pines_report"),g.Lb(1),g.fd(e.charts.pines),g.Lb(5),g.gd(" ",g.uc(41,37,"pages.reports.views")," "),g.Lb(3),g.Ac("ngIf",e.loading||e.loadingCharts&&null==e.charts.views),g.Lb(1),g.Ac("ngClass",e.loading||null==e.charts.views?"d-none":""),g.Lb(1),g.Ac("id","chart_views_report"),g.Lb(1),g.fd(e.charts.views),g.Lb(5),g.gd(" ",g.uc(52,39,"pages.reports.download")," "),g.Lb(3),g.Ac("ngIf",e.loading||e.loadingCharts&&null==e.charts.download),g.Lb(1),g.Ac("ngClass",e.loading||null==e.charts.download?"d-none":""),g.Lb(1),g.Ac("id","chart_download_report"),g.Lb(1),g.fd(e.charts.download),g.Lb(5),g.gd(" ",g.uc(63,41,"pages.reports.pinting")," "),g.Lb(3),g.Ac("ngIf",e.loading||e.loadingCharts&&null==e.charts.printing),g.Lb(1),g.Ac("ngClass",e.loading||null==e.charts.printing?"d-none":""),g.Lb(1),g.Ac("id","chart_printing_report"),g.Lb(1),g.fd(e.charts.printing))},directives:[i.B,i.zb,i.xb,i.l,i.k,i.C,o.t,i.u,p.b,et,i.A,i.gb,i.t,i.m,i.o,i.q,i.n,o.q,nt.a,ot.a],pipes:[P.d],styles:[""]}),t})();var At=n("A9QR"),St=n("oOf3");function It(t,e){1&t&&(g.gc(0,"ion-buttons",23),g.bc(1,"ion-menu-button"),g.fc())}function Dt(t,e){1&t&&(g.gc(0,"ion-title"),g.ed(1),g.tc(2,"translate"),g.fc()),2&t&&(g.Lb(1),g.fd(g.uc(2,1,"pages.reports.post_reports")))}function zt(t,e){if(1&t){const t=g.hc();g.gc(0,"ion-searchbar",24),g.oc("ngModelChange",(function(e){return g.Sc(t),g.sc().queryText=e}))("ionChange",(function(){return g.Sc(t),g.sc().searchItems(!0)}))("ionCancel",(function(){return g.Sc(t),g.sc().showSearchbar=!1})),g.tc(1,"translate"),g.fc()}if(2&t){const t=g.sc();g.Bc("placeholder",g.uc(1,2,"forms.search")),g.Ac("ngModel",t.queryText)}}function qt(t,e){if(1&t){const t=g.hc();g.gc(0,"ion-button",25),g.oc("click",(function(){return g.Sc(t),g.sc().showSearchbar=!0})),g.bc(1,"ion-icon",26),g.fc()}}function Ft(t,e){1&t&&g.bc(0,"mat-progress-bar",27)}function Bt(t,e){1&t&&g.bc(0,"card-load-animation",28),2&t&&g.Ac("count",1)("all_width",!0)}function Tt(t,e){1&t&&(g.gc(0,"div",29),g.bc(1,"img",30),g.fc())}function Rt(t,e){1&t&&(g.gc(0,"div",31),g.gc(1,"div",31),g.bc(2,"books-animations",32),g.tc(3,"translate"),g.fc(),g.fc()),2&t&&(g.Lb(2),g.Ac("$text",g.uc(3,1,"pages.book.books_not_found")))}function $t(t,e){1&t&&g.bc(0,"card-load-animation",28),2&t&&g.Ac("count",1)("all_width",!0)}const Et=function(t){return{backgroundImage:t,backgroundSize:"100% 100%"}};function Yt(t,e){if(1&t){const t=g.hc();g.gc(0,"ion-col",38),g.gc(1,"ion-card"),g.gc(2,"ion-card-content"),g.gc(3,"ion-grid"),g.gc(4,"ion-row"),g.gc(5,"ion-col",39),g.gc(6,"div",40),g.gc(7,"div",41),g.gc(8,"div",42),g.gc(9,"div",43),g.bc(10,"div",44),g.fc(),g.bc(11,"div",45),g.bc(12,"div",46),g.fc(),g.fc(),g.fc(),g.gc(13,"div",47),g.gc(14,"h3",48),g.ed(15),g.fc(),g.gc(16,"p",49),g.gc(17,"strong"),g.ed(18),g.tc(19,"translate"),g.fc(),g.ed(20),g.tc(21,"translate"),g.fc(),g.gc(22,"p",49),g.gc(23,"strong"),g.ed(24),g.tc(25,"translate"),g.fc(),g.ed(26),g.tc(27,"translate"),g.fc(),g.gc(28,"p",49),g.ed(29),g.fc(),g.gc(30,"p",49),g.gc(31,"strong"),g.ed(32),g.tc(33,"translate"),g.fc(),g.ed(34),g.fc(),g.gc(35,"ion-button",50),g.oc("click",(function(){g.Sc(t);const n=e.$implicit;return g.sc(2).showBookDetail(n.uuid)})),g.ed(36),g.tc(37,"translate"),g.fc(),g.gc(38,"ion-button",51),g.ed(39),g.tc(40,"translate"),g.fc(),g.gc(41,"ion-button",52),g.oc("click",(function(){g.Sc(t);const n=e.$implicit;return g.sc(2).showAcademicPerformance(n.uuid)})),g.ed(42),g.tc(43,"translate"),g.fc(),g.fc(),g.fc(),g.gc(44,"ion-col",39),g.cd(45,$t,1,2,"card-load-animation",16),g.gc(46,"div",17),g.gc(47,"canvas",18),g.ed(48),g.fc(),g.fc(),g.fc(),g.fc(),g.fc(),g.fc(),g.fc(),g.fc()}if(2&t){const t=e.$implicit,n=g.sc(2);g.Lb(10),g.Ac("ngStyle",g.Fc(33,Et,"url("+t.portada+")")),g.Lb(5),g.fd(t.name),g.Lb(3),g.gd("",g.uc(19,17,"pages.book.author"),": "),g.Lb(2),g.fd(t.author||g.uc(21,19,"no_author")),g.Lb(4),g.gd("",g.uc(25,21,"pages.book.editorial"),": "),g.Lb(2),g.fd(t.editorial||g.uc(27,23,"no_editorial")),g.Lb(3),g.fd(t.periodo_escolar),g.Lb(3),g.gd("",g.uc(33,25,"pages.book.pines_actives"),": "),g.Lb(2),g.fd(t.pines_actives_count),g.Lb(2),g.fd(g.uc(37,27,"buttons.details")),g.Lb(2),g.Ac("href",n.route_book+t.uuid),g.Lb(1),g.fd(g.uc(40,29,"buttons.open")),g.Lb(3),g.fd(g.uc(43,31,"pages.reports.statistics")),g.Lb(3),g.Ac("ngIf",n.loadingCharts&&null==t.chart),g.Lb(1),g.Ac("ngClass",null==t.chart?"d-none":""),g.Lb(1),g.Ac("id","chart_general_"+t.uuid),g.Lb(1),g.fd(t.chart)}}const Ht=function(t,e,n){return{id:"foo-paginate-book",itemsPerPage:t,currentPage:e,totalItems:n}};function jt(t,e){if(1&t){const t=g.hc();g.gc(0,"div",33),g.gc(1,"ion-grid",34),g.gc(2,"ion-row",35),g.cd(3,Yt,49,35,"ion-col",36),g.tc(4,"paginate"),g.fc(),g.fc(),g.gc(5,"div",29),g.gc(6,"pagination-controls",37),g.oc("pageChange",(function(e){return g.Sc(t),g.sc().pageChanged(e)}))("pageBoundsCorrection",(function(e){return g.Sc(t),g.sc().pageChanged(e)})),g.tc(7,"translate"),g.tc(8,"translate"),g.tc(9,"translate"),g.tc(10,"translate"),g.tc(11,"translate"),g.fc(),g.fc(),g.fc()}if(2&t){const t=g.sc();g.Lb(3),g.Ac("ngForOf",g.vc(4,6,t.books,g.Hc(19,Ht,t.pageSize,t.thisPage,t.totalItems))),g.Lb(3),g.Ac("previousLabel",g.uc(7,9,"paginate.previous"))("nextLabel",g.uc(8,11,"paginate.next"))("screenReaderPaginationLabel",g.uc(9,13,"paginate.pagination"))("screenReaderPageLabel",g.uc(10,15,"paginate.page"))("screenReaderCurrentLabel",g.uc(11,17,"paginate.in_your_page"))}}r.a.register(...r.b);let Gt=(()=>{class t{constructor(t,e,n,o,c){this.reportService=t,this.controlErroresService=e,this.activeRoute=n,this.modalCtrl=o,this.applyFiltersModeService=c,this.showSearchbar=!1,this.scrollbarStyle=s.a.scrollbarStyle,this.pageSize=1,this.loading=!1,this.queryText="",this.button_search={color:"warning",size:"small",mode:"search",disabled:!1,title:"buttons.search",icon:"search-outline"},this.route_book=d.h.book,this.books=[],this.moment=_,this.loadingBooks=!1,this.datesRange={start_date:null,end_date:null},this.chart_father={chart:null},this.filters_group={},this.buttons_filters=[this.button_search],this.thisPage=1,this.totalPages=0,this.totalItems=0,this.loadingCharts=!1,this.timeoutID=null,this.allowFilters={end_date:1,start_date:1},this.book_id_in=n.snapshot.params.uuid}ngOnInit(){this.moment.locale("es"),this.loadBooks({page:this.thisPage},!0,!0),this.filtersRxjs=this.applyFiltersModeService.get$().subscribe(t=>{this.applyFilters(t)}),this.book_id_in&&this.showAcademicPerformance(this.book_id_in)}ngOnDestroy(){this.filtersRxjs.unsubscribe()}searchItems(){this.timeoutID&&clearTimeout(this.timeoutID),this.filters_group.page=this.thisPage,this.timeoutID=setTimeout(()=>this.loadBooks(this.filters_group,!0,!0),1e3)}applyFilters(t){if(!t)return!1;if(!t.mode||!t.filters)return!1;switch(t.filters.page=this.thisPage,t.filters.busqueda=this.queryText,this.filters_group=t.filters,t.mode){case"search":this.loadBooks(t.filters,!0,!0)}}loadBooks(t={},e=!1,n=!1){this.loading=!0,this.loadingBooks=!0,this.loadingCharts=!0,e&&(this.books=[]),n&&(this.thisPage=1),this.reportService.getBooks(t).subscribe(t=>{this.loadingBooks=!1,t.data&&t.data.books&&t.data.books.data&&Array.isArray(t.data.books.data)&&(this.books=t.data.books.data,n&&(this.totalPages=t.data.books.last_page,this.totalItems=t.data.books.total,this.pageSize=t.data.number_paginate)),this.datesRange.start_date=t.data.start_date,this.datesRange.end_date=t.data.end_date,setTimeout(()=>{this.loadGraficoGeneral(this.chart_father,t.data.report_months.map(t=>t.date_format),t.data.report_months.map(t=>t.count),"chart_father_report"),this.books.forEach((t,e)=>{this.loadGraficoGeneral(t,t.data_month.map(t=>t.date_format),t.data_month.map(t=>t.count),"chart_general_"+t.uuid)}),this.loadingCharts=!1},1e3),this.loading=!1},t=>{this.loadingCharts=!1,this.loadingBooks=!1,this.loading=!1,this.controlErroresService.control(t)})}loadGraficoGeneral(t,e,n,o){null!=t.chart&&t.chart.destroy(),t.chart=new r.a(o,{type:"line",data:{labels:e,datasets:[{label:"Activaciones de pines",data:n,backgroundColor:"rgba(0, 156, 224, 1)",borderColor:"rgba(0, 156, 224, 1)",borderWidth:1}]},options:{scales:{y:{beginAtZero:!0}}}}),t.chart.update()}showBookDetail(t){return Object(xt.b)(this,void 0,void 0,(function*(){const e=yield this.modalCtrl.create({component:Ct.a,cssClass:"modal-fullscreen-100",swipeToClose:!0,componentProps:{uuid:t}});yield e.present()}))}pageChanged(t){if(t==1/0)return!1;this.thisPage=t,this.filters_group.page=this.thisPage,this.loadBooks(this.filters_group,!0,!1)}showAcademicPerformance(t){return Object(xt.b)(this,void 0,void 0,(function*(){const e=yield this.modalCtrl.create({component:Pt,cssClass:"modal-fullscreen-100",swipeToClose:!0,componentProps:{book_id:t}});yield e.present()}))}}return t.\u0275fac=function(e){return new(e||t)(g.ac(f),g.ac(l.a),g.ac(a.a),g.ac(i.Db),g.ac(h.a))},t.\u0275cmp=g.Ub({type:t,selectors:[["app-books-report-admin"]],decls:30,vars:19,consts:[["translucent","true"],["slot","start",4,"ngIf"],[4,"ngIf"],["showCancelButton","always",3,"ngModel","placeholder","ngModelChange","ionChange","ionCancel",4,"ngIf"],["slot","end"],[3,"click",4,"ngIf"],["mode","indeterminate",4,"ngIf"],["fullscreen","true",3,"scrollbar"],[3,"required","buttons"],[1,"mt-2","no-padding-small-500"],["hideToggle","",3,"expanded"],[2,"padding","0"],[2,"width","100%"],["name","bar-chart-outline"],[1,"padding-small-sm"],["size","12","size-sm","6",2,"margin","0 auto"],[3,"count","all_width",4,"ngIf"],[3,"ngClass"],[3,"id"],[1,"example-container","mat-elevation-z8","scroll-div-content"],["class","flex flex-center",4,"ngIf"],["class","flex flex-center mt-4",4,"ngIf"],["class","main-wrapper",4,"ngIf"],["slot","start"],["showCancelButton","always",3,"ngModel","placeholder","ngModelChange","ionChange","ionCancel"],[3,"click"],["slot","icon-only","name","search"],["mode","indeterminate"],[3,"count","all_width"],[1,"flex","flex-center"],["src","/assets/js/wow_book/loading.gif","alt","loading"],[1,"flex","flex-center","mt-4"],[3,"$text"],[1,"main-wrapper"],[1,"grid-shuffle"],["id","grid",1,"row"],["size","12","class","book-item small-12 medium-6 columns","data-groups",'["classic"]',"data-date-created","1937","data-title","Of Mice and Men","data-color","var(--ion-color-primary)",4,"ngFor","ngForOf"],["id","foo-paginate-book","maxSize","9","directionLinks","true","autoHide","true","responsive","true",3,"previousLabel","nextLabel","screenReaderPaginationLabel","screenReaderPageLabel","screenReaderCurrentLabel","pageChange","pageBoundsCorrection"],["size","12","data-groups",'["classic"]',"data-date-created","1937","data-title","Of Mice and Men","data-color","var(--ion-color-primary)",1,"book-item","small-12","medium-6","columns"],["size","12","size-sm","6"],[1,"bk-img"],[1,"bk-wrapper"],[1,"bk-book","bk-bookdefault"],[1,"bk-front"],[1,"bk-cover",3,"ngStyle"],[1,"bk-back"],[1,"bk-left"],[1,"item-details","p-0"],[1,"book-item_title"],[1,"author"],["color","primary","size","small",3,"click"],["color","warning","size","small",3,"href"],["color","secondary","size","small",3,"click"]],template:function(t,e){1&t&&(g.gc(0,"ion-header",0),g.gc(1,"ion-toolbar"),g.cd(2,It,2,0,"ion-buttons",1),g.cd(3,Dt,3,3,"ion-title",2),g.cd(4,zt,2,4,"ion-searchbar",3),g.gc(5,"ion-buttons",4),g.cd(6,qt,2,0,"ion-button",5),g.fc(),g.fc(),g.cd(7,Ft,1,0,"mat-progress-bar",6),g.fc(),g.gc(8,"ion-content",7),g.bc(9,"filters-users",8),g.gc(10,"ion-card",9),g.gc(11,"mat-expansion-panel",10),g.gc(12,"mat-expansion-panel-header",11),g.gc(13,"mat-panel-title"),g.gc(14,"ion-item",12),g.bc(15,"ion-icon",13),g.ed(16),g.tc(17,"translate"),g.fc(),g.fc(),g.fc(),g.gc(18,"ion-card-content",14),g.gc(19,"ion-grid"),g.gc(20,"ion-row"),g.gc(21,"ion-col",15),g.cd(22,Bt,1,2,"card-load-animation",16),g.gc(23,"div",17),g.gc(24,"canvas",18),g.ed(25),g.fc(),g.fc(),g.fc(),g.fc(),g.fc(),g.fc(),g.fc(),g.fc(),g.gc(26,"div",19),g.cd(27,Tt,2,0,"div",20),g.cd(28,Rt,4,3,"div",21),g.cd(29,jt,12,23,"div",22),g.fc(),g.fc()),2&t&&(g.Lb(2),g.Ac("ngIf",!e.showSearchbar),g.Lb(1),g.Ac("ngIf",!e.showSearchbar),g.Lb(1),g.Ac("ngIf",e.showSearchbar),g.Lb(2),g.Ac("ngIf",!e.showSearchbar),g.Lb(1),g.Ac("ngIf",e.loading),g.Lb(1),g.Bc("scrollbar",e.scrollbarStyle),g.Lb(1),g.Ac("required",e.allowFilters)("buttons",e.buttons_filters),g.Lb(2),g.Ac("expanded",!0),g.Lb(5),g.gd(" ",g.uc(17,17,"forms.graph")," "),g.Lb(6),g.Ac("ngIf",e.loadingBooks||e.loadingCharts&&null==e.chart_father.chart),g.Lb(1),g.Ac("ngClass",e.loadingBooks||null==e.chart_father.chart||e.books&&0==e.books.length?"d-none":""),g.Lb(1),g.Ac("id","chart_father_report"),g.Lb(1),g.fd(e.chart_father.chart),g.Lb(2),g.Ac("ngIf",e.loadingBooks),g.Lb(1),g.Ac("ngIf",0==e.books.length&&!e.loadingBooks),g.Lb(1),g.Ac("ngIf",!e.loadingBooks))},directives:[i.B,i.zb,o.t,i.l,i.u,p.b,et,i.m,m.c,m.g,m.h,i.H,i.C,i.n,i.A,i.gb,i.t,o.q,i.R,i.xb,i.hb,i.Mb,c.r,c.u,i.k,nt.a,ot.a,At.a,o.s,St.c,o.w],pipes:[P.d,St.b],styles:['p[_ngcontent-%COMP%]:not(.author){font-size:15px;font-weight:300;line-height:1.4}p.author[_ngcontent-%COMP%]{margin-bottom:10px;letter-spacing:-1px;font-weight:400;color:var(--ion-color-medium-shade)}a.button[_ngcontent-%COMP%]{margin-bottom:0;padding:8px 14px;font-size:14px;font-weight:600;border-radius:3px;background-color:rgba(49,49,49,.5)}a.button[_ngcontent-%COMP%]:focus, a.button[_ngcontent-%COMP%]:hover{background-color:var(--ion-color-primary)}.page-header[_ngcontent-%COMP%]{position:relative;margin-bottom:55px;width:100%;border-bottom:1px solid #d2d6d5;background-color:#fff}@-webkit-keyframes anim-1{50%{opacity:0;transform:translate3d(1em,0,0)}51%{opacity:0;transform:translate3d(-1em,-40%,0)}to{opacity:1;transform:translate3d(0,-40%,0)}}@keyframes anim-1{50%{opacity:0;bottom:24px;transform:translate3d(5em,0,0)}51%{opacity:0;bottom:24px;transform:translate3d(-5em,-40%,0)}to{opacity:1;bottom:24px;transform:translate3d(0,-40%,0)}}.book-item[_ngcontent-%COMP%]{margin:15px 0;padding:15px;list-style-type:none}.book-item[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;right:15px;width:calc(100% - 105px);height:100%;border-radius:3px;z-index:-1;transition:all .25s ease-out}.book-item[_ngcontent-%COMP%]:hover   .item-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{box-shadow:0 0 10px 0 rgba(49,49,49,.25)}.book-item[_ngcontent-%COMP%]:hover   a.button[_ngcontent-%COMP%]{background-color:var(--ion-color-primary)}.book-item[_ngcontent-%COMP%]:hover   .bk-bookdefault[_ngcontent-%COMP%]{transform:rotateY(25deg)}.book-item[_ngcontent-%COMP%]:hover   .bk-back[_ngcontent-%COMP%]{opacity:1}.book-item[_ngcontent-%COMP%]   .item-img[_ngcontent-%COMP%]{display:inline-block;float:left;padding-right:30px}.book-item[_ngcontent-%COMP%]   .item-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{box-shadow:0 0 0 0 transparent;transition:all .25s ease-out}.book-item[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]{padding-right:30px}.book-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:not(.author){display:block;display:-webkit-box;font-size:15px;line-height:1.4;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}.bk-img[_ngcontent-%COMP%]{display:inline-block;padding-right:30px;list-style:none}.bk-img[_ngcontent-%COMP%], .bk-img[_ngcontent-%COMP%]   .bk-wrapper[_ngcontent-%COMP%]{position:relative;float:left}.bk-img[_ngcontent-%COMP%]   .bk-wrapper[_ngcontent-%COMP%]{width:150px;height:215px;z-index:1;perspective:1400px}.bk-img[_ngcontent-%COMP%]   .bk-wrapper[_ngcontent-%COMP%]:last-child{margin-right:0}.bk-img[_ngcontent-%COMP%]   .bk-book[_ngcontent-%COMP%]{position:absolute;width:100%;height:215px;transform-style:preserve-3d;transition:transform .5s}.bk-img[_ngcontent-%COMP%]   .bk-book[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .bk-img[_ngcontent-%COMP%]   .bk-front[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:block;position:absolute}.bk-img[_ngcontent-%COMP%]   .bk-front[_ngcontent-%COMP%]{transform-style:preserve-3d;transform-origin:0 50%;transition:transform .5s;transform:translateZ(20px);z-index:10}.bk-img[_ngcontent-%COMP%]   .bk-front[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{z-index:1;-webkit-backface-visibility:hidden;backface-visibility:hidden;transform-style:preserve-3d;border-radius:0 3px 3px 0;box-shadow:inset 4px 0 10px rgba(0,0,0,.1)}.bk-img[_ngcontent-%COMP%]   .bk-front[_ngcontent-%COMP%]:after{content:"";position:absolute;top:1px;bottom:1px;left:-1px;width:1px}.bk-img[_ngcontent-%COMP%]   .bk-back[_ngcontent-%COMP%], .bk-img[_ngcontent-%COMP%]   .bk-front[_ngcontent-%COMP%], .bk-img[_ngcontent-%COMP%]   .bk-front[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:150px;height:215px}.bk-img[_ngcontent-%COMP%]   .bk-left[_ngcontent-%COMP%], .bk-img[_ngcontent-%COMP%]   .bk-right[_ngcontent-%COMP%]{width:40px;left:-20px}.bk-img[_ngcontent-%COMP%]   .bk-back[_ngcontent-%COMP%]{transform:rotateY(-180deg) translateZ(20px);box-shadow:5px 7px 15px rgba(0,0,0,.3);border-radius:3px 0 0 3px;opacity:0;transition:opacity .25s ease-out}.bk-img[_ngcontent-%COMP%]   .bk-back[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:10px;bottom:0;width:3px;background:rgba(0,0,0,.06);box-shadow:1px 0 3px hsla(0,0%,100%,.1)}.bk-img[_ngcontent-%COMP%]   .bk-left[_ngcontent-%COMP%]{height:215px;transform:rotateY(-90deg)}.bk-img[_ngcontent-%COMP%]   .bk-left[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{width:215px;height:40px;transform-origin:0 0;transform:rotate(90deg) translateY(-40px)}.bk-img[_ngcontent-%COMP%]   .bk-cover[_ngcontent-%COMP%]{background-position:10px 40px}.bk-img[_ngcontent-%COMP%]   .bk-cover[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:10px;bottom:0;width:3px;background:rgba(0,0,0,.06);box-shadow:1px 0 3px hsla(0,0%,100%,.1)}.bk-img[_ngcontent-%COMP%]   .bk-cover[_ngcontent-%COMP%]{background-repeat:no-repeat;background-position:0 0!important}.bk-img[_ngcontent-%COMP%]   .bk-front[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .bk-img[_ngcontent-%COMP%]   .bk-left[_ngcontent-%COMP%]{background-color:var(--ion-color-primary)}.main-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;display:none;background-color:rgba(49,49,49,.65)}.main-overlay[_ngcontent-%COMP%]   .overlay-full[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%}.main-overlay[_ngcontent-%COMP%]   .overlay-details[_ngcontent-%COMP%]{position:absolute;display:block;z-index:1;top:50%;left:50%;width:100%;max-width:800px;max-height:480px;padding:40px;overflow:hidden;border-radius:3px;background-color:#fff;box-shadow:0 2px 1px 2px rgba(0,0,0,.3);transform:translate(-50%,-50%)}.main-overlay[_ngcontent-%COMP%]   .overlay-image[_ngcontent-%COMP%]{display:inline-block;margin-right:30px;max-width:275px;vertical-align:top}.main-overlay[_ngcontent-%COMP%]   .overlay-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:relative;display:inline-block;z-index:1;box-shadow:-12px 12px 15px -5px rgba(0,0,0,.3)}.main-overlay[_ngcontent-%COMP%]   .overlay-image[_ngcontent-%COMP%]   .back-color[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:275px;height:100%;border-top-left-radius:3px;border-bottom-left-radius:3px;background-color:green}.main-overlay[_ngcontent-%COMP%]   .close-overlay-btn[_ngcontent-%COMP%]{position:absolute;top:15px;right:15px;width:30px;height:30px;opacity:.3;text-indent:-9999px;transition:opacity .25s ease-out}.main-overlay[_ngcontent-%COMP%]   .close-overlay-btn[_ngcontent-%COMP%]:hover{opacity:1}.main-overlay[_ngcontent-%COMP%]   .close-overlay-btn[_ngcontent-%COMP%]:after, .main-overlay[_ngcontent-%COMP%]   .close-overlay-btn[_ngcontent-%COMP%]:before{content:" ";position:absolute;left:15px;width:2px;height:33px;background-color:#313131}.main-overlay[_ngcontent-%COMP%]   .close-overlay-btn[_ngcontent-%COMP%]:before{transform:rotate(45deg)}.main-overlay[_ngcontent-%COMP%]   .close-overlay-btn[_ngcontent-%COMP%]:after{transform:rotate(-45deg)}.main-overlay[_ngcontent-%COMP%]   .back-preview-btn[_ngcontent-%COMP%]{position:absolute;top:7px;left:-34px;width:30px;height:30px;opacity:.3;text-indent:-9999px;transition:opacity .25s ease-out}.main-overlay[_ngcontent-%COMP%]   .back-preview-btn[_ngcontent-%COMP%]:hover{opacity:1}.main-overlay[_ngcontent-%COMP%]   .back-preview-btn[_ngcontent-%COMP%]:after, .main-overlay[_ngcontent-%COMP%]   .back-preview-btn[_ngcontent-%COMP%]:before{content:" ";position:absolute;left:15px;width:2px;height:15px;background-color:#313131}.main-overlay[_ngcontent-%COMP%]   .back-preview-btn[_ngcontent-%COMP%]:after{top:10px}.main-overlay[_ngcontent-%COMP%]   .back-preview-btn[_ngcontent-%COMP%]:before{transform:rotate(45deg)}.main-overlay[_ngcontent-%COMP%]   .back-preview-btn[_ngcontent-%COMP%]:after{transform:rotate(-45deg)}.main-overlay[_ngcontent-%COMP%]   .overlay-desc[_ngcontent-%COMP%]{display:inline-block;margin-top:-400px;width:calc(100% - 320px);vertical-align:top;transition:all .5s ease-out}.main-overlay[_ngcontent-%COMP%]   .overlay-desc.activated[_ngcontent-%COMP%]{display:inline-block;margin-top:0}.main-overlay[_ngcontent-%COMP%]   .overlay-preview[_ngcontent-%COMP%]{position:relative;display:inline-block;float:right;margin-top:40px;width:calc(100% - 310px);vertical-align:top;transition:all .5s ease-out}.main-overlay[_ngcontent-%COMP%]   .overlay-preview.activated[_ngcontent-%COMP%]{margin-top:-430px}.main-overlay[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]{padding-right:24px;padding-top:10px;display:block;display:-webkit-box;font-size:15px;line-height:1.5;-webkit-line-clamp:16;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;overflow:scroll;text-overflow:clip;font-weight:400}.main-overlay[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], .main-overlay[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Roboto Slab,serif}.main-overlay[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-weight:700}.main-overlay[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:400}.main-overlay[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:40px;width:100%;height:30px;background:hsla(0,0%,100%,0);background:linear-gradient(0deg,hsla(0,0%,100%,0) 0,hsla(0,0%,100%,0) 0,hsla(0,0%,100%,.8) 30%,#fff 80%)}.main-overlay[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]:after{content:"";position:absolute;left:0;bottom:0;width:100%;height:50px;background:hsla(0,0%,100%,0);background:linear-gradient(180deg,hsla(0,0%,100%,0) 0,hsla(0,0%,100%,0) 0,hsla(0,0%,100%,.8) 30%,#fff 80%)}.overlay-details[_ngcontent-%COMP%]{display:none}#footer[_ngcontent-%COMP%]{margin-top:60px;padding:15px 0 20px;border-top:1px solid #fff;background-color:rgba(49,49,49,.5)}#footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], #footer[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], #footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;font-size:12px;text-align:center}.long-text[_ngcontent-%COMP%], .long-text[_ngcontent-%COMP%] > *[_ngcontent-%COMP%], .long-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .long-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] > *[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{white-space:normal!important;word-wrap:break-word!important}.bold[_ngcontent-%COMP%]{font-weight:900}']}),t})();var Ut=n("M9IT"),Nt=n("Dh3D"),Qt=n("VRyK"),Wt=n("LRne"),Zt=n("JX91"),Vt=n("eIep"),Xt=n("JIr8"),Jt=n("lJxs");let Kt=(()=>{class t{constructor(t){this.httpClient=t,this.url=d.i.users}changePassword(t){return this.httpClient.post(this.url+"change-password",t)}delete(t){return this.httpClient.delete(this.url+"delete/"+t)}find(t){return this.httpClient.get(this.url+"find/"+t)}getListBookPines(t,e){return this.httpClient.get(this.url+"get-book-pines/"+t+this.buildQUery(e))}getListLibraries(t,e){return this.httpClient.get(this.url+"get-libraries-pines/"+t+this.buildQUery(e))}getCoursesById(t,e="active"){let n=this.url+"get-course-user/"+t;return e&&(n+="?status="+e),this.httpClient.get(n)}getActivitiesByUser(t,e,n={}){return this.httpClient.get(this.url+"get-activities-course-by-user/"+t+"/"+e+this.buildQUery(n))}changeDate(t,e,n){return this.httpClient.post(this.url+"change-date-book/"+t+"/"+e,n)}changeDateLibrary(t,e,n){return this.httpClient.post(this.url+"change-date-library/"+t+"/"+e,n)}buildQUery(t){let e="?";if(t.busqueda&&(e+="&busqueda="+t.busqueda),t.page&&(e+="&page="+t.page),t.book_uuid&&(e+="&book_uuid="+t.book_uuid),t.page_index&&(e+="&page_index="+t.page_index),t.type_id&&(e+="&tipo="+t.type_id),t.q&&(e+="&q="+t.q),t.min_price&&(e+="&min_price="+t.min_price),t.library_id&&(e+="&library_id="+t.library_id),t.producto_servicio&&(e+="&producto_servicio="+t.producto_servicio),t.relevancia&&(e+="&relevancia="+t.relevancia),t.printing&&(e+="&printing="+t.printing),t.min_price&&(e+="&min_price="+t.min_price),t.max_price&&(e+="&max_price="+t.max_price),t.start&&(e+="&start="+t.start),t.end&&(e+="&end="+t.end),t["with-resources"]&&(e+="&with-resources="+t["with-resources"]),t["has-resources"]&&(e+="&has-resources="+t["has-resources"]),t.paginate&&(e+="&paginate="+t.paginate),t.with_all_books&&(e+="&with_all_books="+t.with_all_books),t.alow_my_role&&(e+="&alow_my_role="+t.alow_my_role),t.end_publish_at&&null!=t.end_publish_at&&(e+="&end_publish_at="+t.end_publish_at),t.start_publish_at&&null!=t.start_publish_at&&(e+="&start_publish_at="+t.start_publish_at),t.type_activity&&null!=t.type_activity&&(e+="&type_activity="+t.type_activity),t.end_created_at&&null!=t.end_created_at&&(e+="&end_created_at="+t.end_created_at),t.start_created_at&&null!=t.start_created_at&&(e+="&start_created_at="+t.start_created_at),null!=t.max_qualification_percentage&&null!=t.max_qualification_percentage&&(e+="&max_qualification_percentage="+t.max_qualification_percentage),null!=t.min_qualification_percentage&&null!=t.min_qualification_percentage&&(e+="&min_qualification_percentage="+t.min_qualification_percentage),t.block_id&&null!=t.block_id&&(e+="&block_id="+t.block_id),t.semester_id&&null!=t.semester_id&&(e+="&semester_id="+t.semester_id),t.theme_id&&null!=t.theme_id&&(e+="&theme_id="+t.theme_id),t.title&&null!=t.title&&(e+="&title="+t.title),t.filters&&Array.isArray(t.filters))try{console.log(t.filters);for(const n of t.filters)n.value&&n.field&&(e+="&"+n.field+"="+n.value)}catch(n){console.log(n,t.filters)}return e}}return t.\u0275fac=function(e){return new(e||t)(g.kc(u.b))},t.\u0275prov=g.Wb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var te=n("PkRB"),ee=n("DnI1"),ne=n("Qu3c"),oe=n("jK8c");function ce(t,e){1&t&&(g.gc(0,"div",5),g.bc(1,"img",6),g.fc())}function ie(t,e){1&t&&(g.ec(0),g.bc(1,"books-animations",9),g.tc(2,"translate"),g.dc()),2&t&&(g.Lb(1),g.Ac("$text",g.uc(2,1,"pages.book.books_not_found")))}function ae(t,e){1&t&&(g.ec(0),g.bc(1,"app-activate-pin",10),g.dc())}function re(t,e){if(1&t&&(g.gc(0,"div",7),g.cd(1,ie,3,3,"ng-container",8),g.cd(2,ae,2,0,"ng-container",8),g.fc()),2&t){const t=g.sc();g.Lb(1),g.Ac("ngIf",t.have_books),g.Lb(1),g.Ac("ngIf",!t.have_books)}}function se(t,e){1&t&&(g.gc(0,"span",35),g.ed(1),g.tc(2,"translate"),g.fc()),2&t&&(g.Lb(1),g.fd(g.uc(2,1,"forms.has_expired")))}function le(t,e){if(1&t&&(g.gc(0,"div"),g.gc(1,"p",30),g.gc(2,"strong"),g.ed(3),g.tc(4,"translate"),g.fc(),g.ed(5),g.cd(6,se,3,3,"span",34),g.fc(),g.gc(7,"p",30),g.gc(8,"strong"),g.ed(9),g.tc(10,"translate"),g.fc(),g.ed(11),g.fc(),g.gc(12,"p",30),g.gc(13,"strong"),g.ed(14),g.tc(15,"translate"),g.fc(),g.ed(16),g.fc(),g.fc()),2&t){const t=g.sc().$implicit,e=g.sc(2);g.Lb(3),g.gd("",g.uc(4,7,"pages.book.pin"),": "),g.Lb(2),g.gd("",t.pin_aux.pin," "),g.Lb(1),g.Ac("ngIf",1==t.pin_aux.has_expired),g.Lb(3),g.gd("",g.uc(10,9,"pages.book.expired_in"),": "),g.Lb(2),g.fd(e.moment(t.pin_aux.date_expired).format("DD/MM/YYYY")),g.Lb(3),g.gd("",g.uc(15,11,"pages.book.expired_in"),": "),g.Lb(2),g.fd(e.moment(t.pin_aux.date_expired).fromNow())}}function de(t,e){if(1&t){const t=g.hc();g.gc(0,"ion-button",36),g.oc("click",(function(){g.Sc(t);const e=g.sc().$implicit;return g.sc(2).changeDateExpired(e)})),g.ed(1),g.tc(2,"translate"),g.fc()}2&t&&(g.Lb(1),g.fd(g.uc(2,1,"buttons.change_date_expired")))}const ge=function(t){return{backgroundImage:t,backgroundSize:"100% 100%"}};function ue(t,e){if(1&t){const t=g.hc();g.gc(0,"ion-col",16),g.gc(1,"div"),g.gc(2,"ion-grid"),g.gc(3,"ion-row"),g.gc(4,"ion-col"),g.gc(5,"p",17),g.gc(6,"strong",18),g.ed(7),g.tc(8,"translate"),g.fc(),g.fc(),g.fc(),g.fc(),g.gc(9,"ion-row"),g.gc(10,"ion-col",19),g.gc(11,"p",20),g.ed(12),g.tc(13,"translate"),g.bc(14,"br"),g.gc(15,"strong",18),g.ed(16),g.fc(),g.fc(),g.fc(),g.gc(17,"ion-col",19),g.gc(18,"p",20),g.ed(19),g.tc(20,"translate"),g.bc(21,"br"),g.gc(22,"strong",18),g.ed(23),g.fc(),g.fc(),g.fc(),g.gc(24,"ion-col",19),g.gc(25,"p",20),g.ed(26),g.tc(27,"translate"),g.bc(28,"br"),g.gc(29,"strong",18),g.ed(30),g.fc(),g.fc(),g.fc(),g.fc(),g.fc(),g.fc(),g.gc(31,"div",21),g.gc(32,"div",22),g.gc(33,"div",23),g.gc(34,"div",24),g.bc(35,"div",25),g.fc(),g.bc(36,"div",26),g.bc(37,"div",27),g.fc(),g.fc(),g.fc(),g.gc(38,"div",28),g.gc(39,"h3",29),g.ed(40),g.fc(),g.gc(41,"p",30),g.gc(42,"strong"),g.ed(43),g.tc(44,"translate"),g.fc(),g.ed(45),g.tc(46,"translate"),g.fc(),g.gc(47,"p",30),g.gc(48,"strong"),g.ed(49),g.tc(50,"translate"),g.fc(),g.ed(51),g.tc(52,"translate"),g.fc(),g.gc(53,"p",30),g.ed(54),g.fc(),g.cd(55,le,17,13,"div",8),g.gc(56,"ion-button",31),g.oc("click",(function(){g.Sc(t);const n=e.$implicit;return g.sc(2).showBookDetail(n.uuid)})),g.ed(57),g.tc(58,"translate"),g.fc(),g.gc(59,"ion-button",32),g.ed(60),g.tc(61,"translate"),g.fc(),g.cd(62,de,3,3,"ion-button",33),g.bc(63,"br"),g.fc(),g.fc()}if(2&t){const t=e.$implicit,n=g.sc(2);g.Lb(7),g.fd(g.uc(8,19,"pages.reports.time_for_book")),g.Lb(5),g.fd(g.uc(13,21,"pages.reports.today")),g.Lb(4),g.fd(n.moment(t.avg_time_today,"HH:mm:ss").format("HH:mm")),g.Lb(3),g.fd(g.uc(20,23,"pages.reports.weeb")),g.Lb(4),g.gd(" ",n.moment(t.avg_time_week,"HH:mm:ss").format("HH:mm"),""),g.Lb(3),g.fd(g.uc(27,25,"pages.reports.month")),g.Lb(4),g.fd(n.moment(t.avg_time_month,"HH:mm:ss").format("HH:mm")),g.Lb(5),g.Ac("ngStyle",g.Fc(39,ge,"url("+t.portada+")")),g.Lb(5),g.fd(t.name),g.Lb(3),g.gd("",g.uc(44,27,"pages.book.author"),": "),g.Lb(2),g.fd(t.author||g.uc(46,29,"no_author")),g.Lb(4),g.gd("",g.uc(50,31,"pages.book.editorial"),": "),g.Lb(2),g.fd(t.editorial||g.uc(52,33,"no_editorial")),g.Lb(3),g.fd(t.periodo_escolar),g.Lb(1),g.Ac("ngIf",t.pin_aux),g.Lb(2),g.fd(g.uc(58,35,"buttons.details")),g.Lb(2),g.Ac("href",n.route_book+t.uuid),g.Lb(1),g.fd(g.uc(61,37,"buttons.open")),g.Lb(2),g.Ac("ngIf",n.show_change_date)}}const fe=function(t,e,n,o){return{id:t,itemsPerPage:e,currentPage:n,totalItems:o}};function be(t,e){if(1&t){const t=g.hc();g.gc(0,"div",11),g.gc(1,"ion-grid",12),g.gc(2,"ion-row",13),g.cd(3,ue,64,41,"ion-col",14),g.tc(4,"paginate"),g.fc(),g.fc(),g.gc(5,"div",5),g.gc(6,"pagination-controls",15),g.oc("pageChange",(function(e){return g.Sc(t),g.sc().pageChanged(e)}))("pageBoundsCorrection",(function(e){return g.Sc(t),g.sc().pageChanged(e)})),g.tc(7,"translate"),g.tc(8,"translate"),g.tc(9,"translate"),g.tc(10,"translate"),g.tc(11,"translate"),g.fc(),g.fc(),g.fc()}if(2&t){const t=g.sc();g.Lb(3),g.Ac("ngForOf",g.vc(4,7,t.books,g.Ic(20,fe,t.tableNameId,t.pageSize,t.thisPage,t.totalItems))),g.Lb(3),g.Ac("id",t.tableNameId)("previousLabel",g.uc(7,10,"paginate.previous"))("nextLabel",g.uc(8,12,"paginate.next"))("screenReaderPaginationLabel",g.uc(9,14,"paginate.pagination"))("screenReaderPageLabel",g.uc(10,16,"paginate.page"))("screenReaderCurrentLabel",g.uc(11,18,"paginate.in_your_page"))}}let he=(()=>{class t{constructor(t,e,n,o,c,i,a){this.userService=t,this.controlErroresService=e,this.modalCtrl=n,this.alertController=o,this.bookService=c,this.toastService=i,this.loadingkService=a,this.queryText="",this.pageSize=9,this.thisPage=1,this.totalPages=0,this.totalItems=0,this.thisPageBook=1,this.tableNameId="foo-paginate-book-002repo",this.moment=_,this.books=[],this.loadingBooks=!1,this.have_books=!1,this.timeoutID=null,this.show_change_date=!1,this.route_book=d.h.book}ngOnInit(){null!=this.user&&this.getListBookPines(this.user)}getListBookPines(t={},e=!1,n=!1,o=!1){e&&(this.books=[]),n&&(this.thisPageBook=1),this.loadingBooks=!0,t.library_id=this.library_id,this.userService.getListBookPines(this.user.uuid,t).subscribe(t=>{this.books=t.data.books.data,e&&(this.totalPages=t.data.books.last_page,this.totalItems=t.data.books.total,this.pageSize=t.data.number_paginate),t.data.books.data.length>=1&&o&&(this.have_books=!0),this.loadingBooks=!1},t=>{this.controlErroresService.control(t),this.loadingBooks=!1})}searchBooksByText(t){if(this.loadingBooks)return!1;this.timeoutID&&clearTimeout(this.timeoutID),this.timeoutID=setTimeout(()=>{this.thisPage=1,this.getListBookPines({page:this.thisPage,busqueda:this.queryText},t,!0)},1e3)}showBookDetail(t){return Object(xt.b)(this,void 0,void 0,(function*(){const e=yield this.modalCtrl.create({component:Ct.a,cssClass:"modal-fullscreen-100",swipeToClose:!0,componentProps:{uuid:t}});yield e.present()}))}pageChanged(t){if(console.log(t),t==1/0)return!1;this.thisPage=t,this.getListBookPines({page:this.thisPage},!0,!1)}changeDate(t,e){this.loadingkService.change(!0),this.userService.changeDate(this.user.uuid,t.uuid,e).subscribe(e=>{t.pin_aux.date_expired=e.data.date_expired,t.pin_aux.status=e.data.status,t.pin_aux.has_expired=e.data.has_expired,this.toastService.presentToast(e.message,e.status),this.loadingkService.change(!1)},t=>{this.controlErroresService.control(t),this.loadingkService.change(!1)})}changeDateExpired(t){return Object(xt.b)(this,void 0,void 0,(function*(){const e=yield this.alertController.create({cssClass:"",header:"Cambiar fecha de expiraci\xf3n",inputs:[{name:"date_expired",type:"date",placeholder:"Fecha de expiraci\xf3n"}],buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:()=>{}},{text:"Cambiar",handler:e=>{this.changeDate(t,e)}}]});yield e.present()}))}}return t.\u0275fac=function(e){return new(e||t)(g.ac(Kt),g.ac(l.a),g.ac(i.Db),g.ac(i.b),g.ac(oe.a),g.ac(te.a),g.ac(ee.a))},t.\u0275cmp=g.Ub({type:t,selectors:[["book-user-template"]],inputs:{user:"user",library_id:"library_id",show_change_date:"show_change_date"},decls:8,vars:10,consts:[[1,"text-center"],[3,"ngModel","placeholder","ngModelChange","ionChange"],["class","flex flex-center",4,"ngIf"],["class","flex flex-center mt-4",4,"ngIf"],["class","main-wrapper",4,"ngIf"],[1,"flex","flex-center"],["src","/assets/js/wow_book/loading.gif","alt","loading"],[1,"flex","flex-center","mt-4"],[4,"ngIf"],[3,"$text"],[1,"w-100"],[1,"main-wrapper"],[1,"grid-shuffle"],["id","grid",1,"row"],["size","12","size-sm","6","size-md","6","size-xl","4","class","book-item small-12 medium-6 columns","data-groups",'["classic"]',"data-date-created","1937","data-title","Of Mice and Men","data-color","var(--ion-color-primary)",4,"ngFor","ngForOf"],["maxSize","9","directionLinks","true","autoHide","true","responsive","true",3,"id","previousLabel","nextLabel","screenReaderPaginationLabel","screenReaderPageLabel","screenReaderCurrentLabel","pageChange","pageBoundsCorrection"],["size","12","size-sm","6","size-md","6","size-xl","4","data-groups",'["classic"]',"data-date-created","1937","data-title","Of Mice and Men","data-color","var(--ion-color-primary)",1,"book-item","small-12","medium-6","columns"],[1,"mb-0","text-center","bold"],[1,"bold"],["size","4"],[1,"mb-0","text-center"],[1,"bk-img"],[1,"bk-wrapper"],[1,"bk-book","bk-bookdefault"],[1,"bk-front"],[1,"bk-cover",3,"ngStyle"],[1,"bk-back"],[1,"bk-left"],[1,"item-details","p-0"],[1,"book-item_title","m-0"],[1,"author"],["color","primary","size","small",3,"click"],["color","warning","size","small",3,"href"],["color","danger","size","small",3,"click",4,"ngIf"],["class","badge-ng-pers color-deleted",4,"ngIf"],[1,"badge-ng-pers","color-deleted"],["color","danger","size","small",3,"click"]],template:function(t,e){1&t&&(g.gc(0,"h2",0),g.ed(1),g.tc(2,"translate"),g.fc(),g.gc(3,"ion-searchbar",1),g.oc("ngModelChange",(function(t){return e.queryText=t}))("ionChange",(function(){return e.searchBooksByText(!0)})),g.tc(4,"translate"),g.fc(),g.cd(5,ce,2,0,"div",2),g.cd(6,re,3,2,"div",3),g.cd(7,be,12,25,"div",4)),2&t&&(g.Lb(1),g.fd(g.uc(2,6,"pages.book.books_activate")),g.Lb(2),g.Bc("placeholder",g.uc(4,8,"forms.search")),g.Ac("ngModel",e.queryText),g.Lb(2),g.Ac("ngIf",e.loadingBooks),g.Lb(1),g.Ac("ngIf",0==e.books.length&&!e.loadingBooks),g.Lb(1),g.Ac("ngIf",!e.loadingBooks))},directives:[i.hb,i.Mb,c.r,c.u,o.t,At.a,i.A,i.gb,o.s,St.c,i.t,o.w,i.k],pipes:[P.d,St.b],styles:['p[_ngcontent-%COMP%]:not(.author){font-size:15px;font-weight:300;line-height:1.4}p.author[_ngcontent-%COMP%]{margin-bottom:10px;letter-spacing:-1px;font-weight:400;color:var(--ion-color-medium-shade)}a.button[_ngcontent-%COMP%]{margin-bottom:0;padding:8px 14px;font-size:14px;font-weight:600;border-radius:3px;background-color:rgba(49,49,49,.5)}a.button[_ngcontent-%COMP%]:focus, a.button[_ngcontent-%COMP%]:hover{background-color:var(--ion-color-primary)}.page-header[_ngcontent-%COMP%]{position:relative;margin-bottom:55px;width:100%;border-bottom:1px solid #d2d6d5;background-color:#fff}@-webkit-keyframes anim-1{50%{opacity:0;transform:translate3d(1em,0,0)}51%{opacity:0;transform:translate3d(-1em,-40%,0)}to{opacity:1;transform:translate3d(0,-40%,0)}}@keyframes anim-1{50%{opacity:0;bottom:24px;transform:translate3d(5em,0,0)}51%{opacity:0;bottom:24px;transform:translate3d(-5em,-40%,0)}to{opacity:1;bottom:24px;transform:translate3d(0,-40%,0)}}.book-item[_ngcontent-%COMP%]{margin:15px 0;padding:15px;list-style-type:none}.book-item[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;right:15px;width:calc(100% - 105px);height:100%;border-radius:3px;z-index:-1;transition:all .25s ease-out}.book-item[_ngcontent-%COMP%]:hover   .item-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{box-shadow:0 0 10px 0 rgba(49,49,49,.25)}.book-item[_ngcontent-%COMP%]:hover   a.button[_ngcontent-%COMP%]{background-color:var(--ion-color-primary)}.book-item[_ngcontent-%COMP%]:hover   .bk-bookdefault[_ngcontent-%COMP%]{transform:rotateY(25deg)}.book-item[_ngcontent-%COMP%]:hover   .bk-back[_ngcontent-%COMP%]{opacity:1}.book-item[_ngcontent-%COMP%]   .item-img[_ngcontent-%COMP%]{display:inline-block;float:left;padding-right:30px}.book-item[_ngcontent-%COMP%]   .item-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{box-shadow:0 0 0 0 transparent;transition:all .25s ease-out}.book-item[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]{padding-right:30px}.book-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:not(.author){display:block;display:-webkit-box;font-size:15px;line-height:1.4;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}.bk-img[_ngcontent-%COMP%]{display:inline-block;padding-right:30px;list-style:none}.bk-img[_ngcontent-%COMP%], .bk-img[_ngcontent-%COMP%]   .bk-wrapper[_ngcontent-%COMP%]{position:relative;float:left}.bk-img[_ngcontent-%COMP%]   .bk-wrapper[_ngcontent-%COMP%]{width:150px;height:215px;z-index:1;perspective:1400px}.bk-img[_ngcontent-%COMP%]   .bk-wrapper[_ngcontent-%COMP%]:last-child{margin-right:0}.bk-img[_ngcontent-%COMP%]   .bk-book[_ngcontent-%COMP%]{position:absolute;width:100%;height:215px;transform-style:preserve-3d;transition:transform .5s}.bk-img[_ngcontent-%COMP%]   .bk-book[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .bk-img[_ngcontent-%COMP%]   .bk-front[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:block;position:absolute}.bk-img[_ngcontent-%COMP%]   .bk-front[_ngcontent-%COMP%]{transform-style:preserve-3d;transform-origin:0 50%;transition:transform .5s;transform:translateZ(20px);z-index:10}.bk-img[_ngcontent-%COMP%]   .bk-front[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{z-index:1;-webkit-backface-visibility:hidden;backface-visibility:hidden;transform-style:preserve-3d;border-radius:0 3px 3px 0;box-shadow:inset 4px 0 10px rgba(0,0,0,.1)}.bk-img[_ngcontent-%COMP%]   .bk-front[_ngcontent-%COMP%]:after{content:"";position:absolute;top:1px;bottom:1px;left:-1px;width:1px}.bk-img[_ngcontent-%COMP%]   .bk-back[_ngcontent-%COMP%], .bk-img[_ngcontent-%COMP%]   .bk-front[_ngcontent-%COMP%], .bk-img[_ngcontent-%COMP%]   .bk-front[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:150px;height:215px}.bk-img[_ngcontent-%COMP%]   .bk-left[_ngcontent-%COMP%], .bk-img[_ngcontent-%COMP%]   .bk-right[_ngcontent-%COMP%]{width:40px;left:-20px}.bk-img[_ngcontent-%COMP%]   .bk-back[_ngcontent-%COMP%]{transform:rotateY(-180deg) translateZ(20px);box-shadow:5px 7px 15px rgba(0,0,0,.3);border-radius:3px 0 0 3px;opacity:0;transition:opacity .25s ease-out}.bk-img[_ngcontent-%COMP%]   .bk-back[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:10px;bottom:0;width:3px;background:rgba(0,0,0,.06);box-shadow:1px 0 3px hsla(0,0%,100%,.1)}.bk-img[_ngcontent-%COMP%]   .bk-left[_ngcontent-%COMP%]{height:215px;transform:rotateY(-90deg)}.bk-img[_ngcontent-%COMP%]   .bk-left[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{width:215px;height:40px;transform-origin:0 0;transform:rotate(90deg) translateY(-40px)}.bk-img[_ngcontent-%COMP%]   .bk-cover[_ngcontent-%COMP%]{background-position:10px 40px}.bk-img[_ngcontent-%COMP%]   .bk-cover[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:10px;bottom:0;width:3px;background:rgba(0,0,0,.06);box-shadow:1px 0 3px hsla(0,0%,100%,.1)}.bk-img[_ngcontent-%COMP%]   .bk-cover[_ngcontent-%COMP%]{background-repeat:no-repeat;background-position:0 0!important}.bk-img[_ngcontent-%COMP%]   .bk-front[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .bk-img[_ngcontent-%COMP%]   .bk-left[_ngcontent-%COMP%]{background-color:var(--ion-color-primary)}.main-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;display:none;background-color:rgba(49,49,49,.65)}.main-overlay[_ngcontent-%COMP%]   .overlay-full[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%}.main-overlay[_ngcontent-%COMP%]   .overlay-details[_ngcontent-%COMP%]{position:absolute;display:block;z-index:1;top:50%;left:50%;width:100%;max-width:800px;max-height:480px;padding:40px;overflow:hidden;border-radius:3px;background-color:#fff;box-shadow:0 2px 1px 2px rgba(0,0,0,.3);transform:translate(-50%,-50%)}.main-overlay[_ngcontent-%COMP%]   .overlay-image[_ngcontent-%COMP%]{display:inline-block;margin-right:30px;max-width:275px;vertical-align:top}.main-overlay[_ngcontent-%COMP%]   .overlay-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:relative;display:inline-block;z-index:1;box-shadow:-12px 12px 15px -5px rgba(0,0,0,.3)}.main-overlay[_ngcontent-%COMP%]   .overlay-image[_ngcontent-%COMP%]   .back-color[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:275px;height:100%;border-top-left-radius:3px;border-bottom-left-radius:3px;background-color:green}.main-overlay[_ngcontent-%COMP%]   .close-overlay-btn[_ngcontent-%COMP%]{position:absolute;top:15px;right:15px;width:30px;height:30px;opacity:.3;text-indent:-9999px;transition:opacity .25s ease-out}.main-overlay[_ngcontent-%COMP%]   .close-overlay-btn[_ngcontent-%COMP%]:hover{opacity:1}.main-overlay[_ngcontent-%COMP%]   .close-overlay-btn[_ngcontent-%COMP%]:after, .main-overlay[_ngcontent-%COMP%]   .close-overlay-btn[_ngcontent-%COMP%]:before{content:" ";position:absolute;left:15px;width:2px;height:33px;background-color:#313131}.main-overlay[_ngcontent-%COMP%]   .close-overlay-btn[_ngcontent-%COMP%]:before{transform:rotate(45deg)}.main-overlay[_ngcontent-%COMP%]   .close-overlay-btn[_ngcontent-%COMP%]:after{transform:rotate(-45deg)}.main-overlay[_ngcontent-%COMP%]   .back-preview-btn[_ngcontent-%COMP%]{position:absolute;top:7px;left:-34px;width:30px;height:30px;opacity:.3;text-indent:-9999px;transition:opacity .25s ease-out}.main-overlay[_ngcontent-%COMP%]   .back-preview-btn[_ngcontent-%COMP%]:hover{opacity:1}.main-overlay[_ngcontent-%COMP%]   .back-preview-btn[_ngcontent-%COMP%]:after, .main-overlay[_ngcontent-%COMP%]   .back-preview-btn[_ngcontent-%COMP%]:before{content:" ";position:absolute;left:15px;width:2px;height:15px;background-color:#313131}.main-overlay[_ngcontent-%COMP%]   .back-preview-btn[_ngcontent-%COMP%]:after{top:10px}.main-overlay[_ngcontent-%COMP%]   .back-preview-btn[_ngcontent-%COMP%]:before{transform:rotate(45deg)}.main-overlay[_ngcontent-%COMP%]   .back-preview-btn[_ngcontent-%COMP%]:after{transform:rotate(-45deg)}.main-overlay[_ngcontent-%COMP%]   .overlay-desc[_ngcontent-%COMP%]{display:inline-block;margin-top:-400px;width:calc(100% - 320px);vertical-align:top;transition:all .5s ease-out}.main-overlay[_ngcontent-%COMP%]   .overlay-desc.activated[_ngcontent-%COMP%]{display:inline-block;margin-top:0}.main-overlay[_ngcontent-%COMP%]   .overlay-preview[_ngcontent-%COMP%]{position:relative;display:inline-block;float:right;margin-top:40px;width:calc(100% - 310px);vertical-align:top;transition:all .5s ease-out}.main-overlay[_ngcontent-%COMP%]   .overlay-preview.activated[_ngcontent-%COMP%]{margin-top:-430px}.main-overlay[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]{padding-right:24px;padding-top:10px;display:block;display:-webkit-box;font-size:15px;line-height:1.5;-webkit-line-clamp:16;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;overflow:scroll;text-overflow:clip;font-weight:400}.main-overlay[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], .main-overlay[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Roboto Slab,serif}.main-overlay[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-weight:700}.main-overlay[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:400}.main-overlay[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:40px;width:100%;height:30px;background:hsla(0,0%,100%,0);background:linear-gradient(0deg,hsla(0,0%,100%,0) 0,hsla(0,0%,100%,0) 0,hsla(0,0%,100%,.8) 30%,#fff 80%)}.main-overlay[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]:after{content:"";position:absolute;left:0;bottom:0;width:100%;height:50px;background:hsla(0,0%,100%,0);background:linear-gradient(180deg,hsla(0,0%,100%,0) 0,hsla(0,0%,100%,0) 0,hsla(0,0%,100%,.8) 30%,#fff 80%)}.overlay-details[_ngcontent-%COMP%]{display:none}#footer[_ngcontent-%COMP%]{margin-top:60px;padding:15px 0 20px;border-top:1px solid #fff;background-color:rgba(49,49,49,.5)}#footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], #footer[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], #footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;font-size:12px;text-align:center}.long-text[_ngcontent-%COMP%], .long-text[_ngcontent-%COMP%] > *[_ngcontent-%COMP%], .long-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .long-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] > *[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{white-space:normal!important;word-wrap:break-word!important}.bold[_ngcontent-%COMP%]{font-weight:900}']}),t})();function pe(t,e){1&t&&g.bc(0,"mat-progress-bar",7)}let me=(()=>{class t{constructor(t,e){this.navParams=t,this.modalCtrl=e,this.loading=!1,this.scrollbarStyle=s.a.scrollbarStyle,this.library=t.data.library,this.user=t.data.user}ngOnInit(){}dismiss(t){this.modalCtrl.dismiss(t)}}return t.\u0275fac=function(e){return new(e||t)(g.ac(i.Fb),g.ac(i.Db))},t.\u0275cmp=g.Ub({type:t,selectors:[["app-my-books-libraries-modal"]],decls:10,vars:7,consts:[["translucent","true"],["slot","end"],[3,"disabled","click"],["name","close-outline"],["mode","indeterminate",4,"ngIf"],["fullscreen","true",3,"scrollbar"],[3,"user","library_id"],["mode","indeterminate"]],template:function(t,e){1&t&&(g.gc(0,"ion-header",0),g.gc(1,"ion-toolbar"),g.gc(2,"ion-title"),g.ed(3),g.fc(),g.gc(4,"ion-buttons",1),g.gc(5,"ion-button",2),g.oc("click",(function(){return e.dismiss()})),g.bc(6,"ion-icon",3),g.fc(),g.fc(),g.fc(),g.cd(7,pe,1,0,"mat-progress-bar",4),g.fc(),g.gc(8,"ion-content",5),g.bc(9,"book-user-template",6),g.fc()),2&t&&(g.Lb(3),g.hd(" ",null!=e.user?e.user.name:""," - ",null!=e.library?e.library.name:""," "),g.Lb(2),g.Ac("disabled",e.loading),g.Lb(2),g.Ac("ngIf",e.loading),g.Lb(1),g.Bc("scrollbar",e.scrollbarStyle),g.Lb(1),g.Ac("user",e.user)("library_id",e.library.uuid))},directives:[i.B,i.zb,i.xb,i.l,i.k,i.C,o.t,i.u,p.b,he,nt.a],styles:[""]}),t})();var _e=n("w3oG");function ve(t,e){1&t&&g.bc(0,"library-loading-animation")}const xe=function(t){return{"image-active":t}};function Ce(t,e){if(1&t){const t=g.hc();g.gc(0,"div",17),g.gc(1,"p",18),g.gc(2,"strong"),g.ed(3,"Pin: "),g.fc(),g.ed(4),g.fc(),g.gc(5,"p",18),g.gc(6,"strong"),g.ed(7),g.tc(8,"translate"),g.fc(),g.ed(9),g.fc(),g.gc(10,"p",18),g.gc(11,"strong"),g.ed(12),g.tc(13,"translate"),g.fc(),g.ed(14),g.fc(),g.gc(15,"p",18),g.gc(16,"strong"),g.ed(17),g.tc(18,"translate"),g.fc(),g.ed(19),g.fc(),g.gc(20,"ion-button",19),g.oc("click",(function(){g.Sc(t);const n=e.$implicit;return g.sc(4).changeDateExpired(n)})),g.ed(21),g.tc(22,"translate"),g.fc(),g.fc()}if(2&t){const t=e.$implicit,n=e.index,o=g.sc(2).$implicit,c=g.sc(2);g.Ac("ngClass",g.Fc(17,xe,o.selectecIndex==n)),g.Lb(4),g.fd(t.pin),g.Lb(3),g.gd("",g.uc(8,9,"pages.book.expired_in"),": "),g.Lb(2),g.fd(c.moment(t.date_expired).format("DD/MM/YYYY")),g.Lb(3),g.gd("",g.uc(13,11,"pages.book.expired_in"),": "),g.Lb(2),g.fd(c.moment(t.date_expired).fromNow()),g.Lb(3),g.gd("",g.uc(18,13,"pages.book.count_publish"),": "),g.Lb(2),g.fd(o.books_count),g.Lb(2),g.fd(g.uc(22,15,"buttons.change_date_expired"))}}const ye=function(t){return{active:t}};function ke(t,e){if(1&t){const t=g.hc();g.gc(0,"span",22),g.oc("click",(function(){g.Sc(t);const n=e.index,o=g.sc(3).$implicit;return g.sc(2).selectImage(o,n)})),g.fc()}if(2&t){const t=e.index,n=g.sc(3).$implicit;g.Ac("ngClass",g.Fc(1,ye,n.selectecIndex==t))}}function we(t,e){if(1&t&&(g.gc(0,"div",20),g.cd(1,ke,1,3,"span",21),g.fc()),2&t){const t=g.sc(2).$implicit;g.Lb(1),g.Ac("ngForOf",t.pines)}}const Me=function(t){return{disabled:t}};function Le(t,e){if(1&t){const t=g.hc();g.gc(0,"button",23),g.gc(1,"ion-icon",24),g.oc("click",(function(){g.Sc(t);const e=g.sc(2).$implicit;return g.sc(2).onPrevClick(e,0==e.selectecIndex)})),g.fc(),g.fc()}if(2&t){const t=g.sc(2).$implicit;g.Lb(1),g.Ac("ngClass",g.Fc(1,Me,0==t.selectecIndex))}}function Oe(t,e){if(1&t){const t=g.hc();g.gc(0,"button",25),g.gc(1,"ion-icon",26),g.oc("click",(function(){g.Sc(t);const e=g.sc(2).$implicit;return g.sc(2).onNextClick(e,e.pines.length-1==e.selectecIndex)})),g.fc(),g.fc()}if(2&t){const t=g.sc(2).$implicit;g.Lb(1),g.Ac("ngClass",g.Fc(1,Me,t.pines.length-1==t.selectecIndex))}}function Pe(t,e){if(1&t&&(g.gc(0,"div",12),g.cd(1,Ce,23,19,"div",13),g.cd(2,we,2,1,"div",14),g.cd(3,Le,2,3,"button",15),g.cd(4,Oe,2,3,"button",16),g.fc()),2&t){const t=g.sc().$implicit;g.Lb(1),g.Ac("ngForOf",t.pines),g.Lb(1),g.Ac("ngIf",t.pines.length>1),g.Lb(1),g.Ac("ngIf",t.pines.length>1),g.Lb(1),g.Ac("ngIf",t.pines.length>1)}}const Ae=function(t){return{background:t,backgroundSize:"180px 255px"}};function Se(t,e){if(1&t){const t=g.hc();g.gc(0,"ion-list",8),g.gc(1,"div",9),g.oc("click",(function(){g.Sc(t);const n=e.$implicit;return g.sc(2).openLibraryBook(n)})),g.fc(),g.gc(2,"h3",10),g.gc(3,"strong"),g.ed(4),g.fc(),g.fc(),g.cd(5,Pe,5,4,"div",11),g.fc()}if(2&t){const t=e.$implicit;g.Lb(1),g.Ac("ngStyle",g.Fc(3,Ae,"url("+t.theme_url+")")),g.Lb(3),g.fd(t.name),g.Lb(1),g.Ac("ngIf",t.pines)}}const Ie=function(t,e,n){return{id:"foo-paginate-book",itemsPerPage:t,currentPage:e,totalItems:n}};function De(t,e){if(1&t&&(g.gc(0,"div",6),g.cd(1,Se,6,5,"ion-list",7),g.tc(2,"paginate"),g.fc()),2&t){const t=g.sc();g.Lb(1),g.Ac("ngForOf",g.vc(2,1,t.libraries,g.Hc(4,Ie,t.pageSize,t.thisPage,t.totalItems)))}}function ze(t,e){1&t&&(g.gc(0,"div",27),g.bc(1,"books-animations",28),g.tc(2,"translate"),g.fc()),2&t&&(g.Lb(1),g.Ac("$text",g.uc(2,1,"pages.book.libraries_not_found")))}let qe=(()=>{class t{constructor(t,e,n,o,c,i){this.userService=t,this.controlErroresService=e,this.loadingkService=n,this.toastService=o,this.alertController=c,this.modalCtrl=i,this.scrollbarStyle=s.a.scrollbarStyle,this.thisPage=1,this.libraries=[],this.loading=!1,this.routeBooks=d.h.library_books+"/",this.pageSize=9,this.totalPages=0,this.totalItems=0,this.moment=_}ngOnInit(){null!=this.user&&this.loadLibraries({page:this.thisPage})}loadLibraries(t){this.loading=!0,this.userService.getListLibraries(this.user.uuid,t).subscribe(t=>{this.loading=!1,t.data&&t.data.data&&Array.isArray(t.data.data)?(this.libraries=t.data.data,this.totalPages=t.data.last_page,this.totalItems=t.data.last_page*t.data.data.length,this.pageSize=t.data.number_paginate):this.controlErroresService.control({message:"Error al obtener datos"})},t=>{this.loading=!1,this.controlErroresService.control(t)})}pageChanged(t){if(console.log(t),t==1/0)return!1;this.thisPage=t,this.loadLibraries({page:this.thisPage})}changeDate(t,e){this.loadingkService.change(!0),this.userService.changeDateLibrary(this.user.uuid,t.uuid,e).subscribe(e=>{t.date_expired=e.data.date_expired,t.has_expired=e.data.has_expired,this.toastService.presentToast(e.message,e.status),this.loadingkService.change(!1)},t=>{this.controlErroresService.control(t),this.loadingkService.change(!1)})}changeDateExpired(t){return Object(xt.b)(this,void 0,void 0,(function*(){const e=yield this.alertController.create({cssClass:"",header:"Cambiar fecha de expiraci\xf3n",inputs:[{name:"date_expired",type:"date",placeholder:"Fecha de expiraci\xf3n"}],buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:()=>{}},{text:"Cambiar",handler:e=>{this.changeDate(t,e)}}]});yield e.present()}))}openLibraryBook(t){return Object(xt.b)(this,void 0,void 0,(function*(){const e=yield this.modalCtrl.create({component:me,cssClass:"modal-fullscreen-100",swipeToClose:!0,componentProps:{library:t,user:this.user}});yield e.present(),yield e.onWillDismiss()}))}selectImage(t,e){t.selectecIndex=e}onPrevClick(t,e=!1){e||(0==t.selectecIndex?t.selectecIndex=t.pines.length-1:t.selectecIndex--)}onNextClick(t,e=!1){e||(t.selectecIndex==t.pines.length-1?t.selectecIndex=0:t.selectecIndex++)}}return t.\u0275fac=function(e){return new(e||t)(g.ac(Kt),g.ac(l.a),g.ac(ee.a),g.ac(te.a),g.ac(i.b),g.ac(i.Db))},t.\u0275cmp=g.Ub({type:t,selectors:[["libraries-user-components"]],inputs:{user:"user"},decls:13,vars:21,consts:[[1,"text-center"],[4,"ngIf"],["class","container",4,"ngIf"],[1,"flex","flex-center"],["id","foo-paginate-book","maxSize","9","directionLinks","true","autoHide","true","responsive","true",3,"previousLabel","nextLabel","screenReaderPaginationLabel","screenReaderPageLabel","screenReaderCurrentLabel","pageChange","pageBoundsCorrection"],["class","flex flex-center mt-4",4,"ngIf"],[1,"container"],["class","box-out",4,"ngFor","ngForOf"],[1,"box-out"],[1,"book","books-1",3,"ngStyle","click"],[1,"text-center",2,"width","90%"],["class","carousel-container container",4,"ngIf"],[1,"carousel-container","container"],["class","panel-carousel-item",3,"ngClass",4,"ngFor","ngForOf"],["class","carousel-dot-container",4,"ngIf"],["class","btn-carousel btn-prev",4,"ngIf"],["class","btn-carousel btn-next",4,"ngIf"],[1,"panel-carousel-item",3,"ngClass"],[1,"author"],["color","danger","size","small",3,"click"],[1,"carousel-dot-container"],["class","dot",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"dot",3,"ngClass","click"],[1,"btn-carousel","btn-prev"],["name","chevron-back-outline",1,"icon-prev","icon-carousel",3,"ngClass","click"],[1,"btn-carousel","btn-next"],["name","chevron-forward-outline",1,"icon-next","icon-carousel",3,"ngClass","click"],[1,"flex","flex-center","mt-4"],[1,"relative",3,"$text"]],template:function(t,e){1&t&&(g.gc(0,"h2",0),g.ed(1),g.tc(2,"translate"),g.fc(),g.cd(3,ve,1,0,"library-loading-animation",1),g.cd(4,De,3,8,"div",2),g.gc(5,"div",3),g.gc(6,"pagination-controls",4),g.oc("pageChange",(function(t){return e.pageChanged(t)}))("pageBoundsCorrection",(function(t){return e.pageChanged(t)})),g.tc(7,"translate"),g.tc(8,"translate"),g.tc(9,"translate"),g.tc(10,"translate"),g.tc(11,"translate"),g.fc(),g.fc(),g.cd(12,ze,3,3,"div",5)),2&t&&(g.Lb(1),g.fd(g.uc(2,9,"menu.library")),g.Lb(2),g.Ac("ngIf",e.loading),g.Lb(1),g.Ac("ngIf",!e.loading),g.Lb(2),g.Ac("previousLabel",g.uc(7,11,"paginate.previous"))("nextLabel",g.uc(8,13,"paginate.next"))("screenReaderPaginationLabel",g.uc(9,15,"paginate.pagination"))("screenReaderPageLabel",g.uc(10,17,"paginate.page"))("screenReaderCurrentLabel",g.uc(11,19,"paginate.in_your_page")),g.Lb(6),g.Ac("ngIf",0==e.libraries.length&&!e.loading))},directives:[o.t,St.c,_e.a,o.s,i.O,o.w,o.q,i.k,i.C,At.a],pipes:[P.d,St.b],styles:['.container[_ngcontent-%COMP%]{justify-content:center;position:relative}.box-out[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap}.box-out[_ngcontent-%COMP%]{flex-direction:column}.box-inner[_ngcontent-%COMP%]{z-index:99;width:900px;display:flex;align-items:center;position:absolute;top:350px;overflow:hidden;background-color:#fff}.book[_ngcontent-%COMP%]{width:180px;height:255px;background-color:#3e4798;transition:all .3s ease-in-out;transform-origin:left center 0;transform-style:preserve-3d;border-top-right-radius:5px;border-bottom-right-radius:5px;-webkit-backface-visibility:hidden;overflow:hidden}.box-out[_ngcontent-%COMP%]   .book[_ngcontent-%COMP%]:after{content:" ";display:block;opacity:0;width:180px;height:255px;position:relative;left:8px;transition:all .3s ease}.box-out[_ngcontent-%COMP%]   .book[_ngcontent-%COMP%]:before{content:" ";z-index:999;display:block;width:20px;height:100px;opacity:0;position:absolute;top:-12px;right:8px;transition:all .25s;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD8AAABhCAYAAABh23lYAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHCSURBVHgB7dxPTsJAHMXxN7Xu3UhigobxJHACvQFwAr2BcgO8AZxE7uGiDZiQyEIW7oSOUyKbKgLS8u+9b9JNF818fum0XdWUhy9VEDZBGIdBGD6DsFM3bQYgTnjWhGdNeNaEZ0141oRnTXjWhGdNeNaEZ0141oRnTXjWhGdNeNaEZ0141oRnTXjWhGdNeNaEZ0141oRnTXjWhGdNeNaEZ0141oRnTXjWhGdNeNaEZ0141oRnTXjWhGdNeNZ2hR/7o+UcmnCIsaNCbLcU/RR8oB1bO/4+17l8ixoGeIBBBVvMXI0ih+L7Df2j8iiqnvgh+AVVUXDOTZvF4tNb2qC7DJ1tNgSDO78tblFQxeE92l+0NSjZDjaoMowqyYl7hDF15JzL+x+YHtxLgFq/ZO2m8LT4wsb90nUjmMD61XaRc7ng5+jBua29ntsecq6oIWyELxqdLe8h/GvPp+h0T28D/FezZ8Ip7pHgZt3X5NoPvH1BZ5sNIUTDL7C+6hBWxxt0gk+00tsOe96qH0zL8GO4pBtMg/YhoLMtG8Ii/EpfY4fSoiFk8UeFzpYdwhz/jiNGZ0uHEBjUEzftohJFZyAsdX8BM0/amLC3spYAAAAASUVORK5CYII=");background-size:16px;background-repeat:no-repeat}.books-1[_ngcontent-%COMP%]{min-width:180px;margin:10px 15px}.box-inner[_ngcontent-%COMP%]   .book[_ngcontent-%COMP%]{margin-left:90px;position:relative;top:-194px}.book[_ngcontent-%COMP%]:hover{cursor:pointer;transform:rotateY(-28deg) rotate(-2deg) scale(1.02);-webkit-backface-visibility:hidden;box-shadow:1px 3px 2px #353d85,20px 8px 0 #525dc4}.book[_ngcontent-%COMP%]:hover:after{content:" ";display:block;opacity:1;width:172px;height:255px;position:relative;left:8px;background:linear-gradient(-180deg,hsla(0,0%,100%,.1),hsla(0,0%,100%,0) 60%)}.book[_ngcontent-%COMP%]:hover:before{transform:translateY(9px);opacity:1}.dr[_ngcontent-%COMP%]{position:absolute;bottom:16px;right:16px;width:100px}.carousel-container[_ngcontent-%COMP%]{position:relative;margin:auto;text-align:center;border-radius:15px;box-shadow:0 6px 12px #dce1e1}.carousel-container[_ngcontent-%COMP%]   .panel-carousel-item[_ngcontent-%COMP%]{display:none;border-radius:15px}.carousel-container[_ngcontent-%COMP%]   .panel-carousel-item.image-active[_ngcontent-%COMP%]{display:block;width:100%;padding-bottom:20px}.carousel-dot-container[_ngcontent-%COMP%]{position:absolute;right:0;left:0;bottom:0;display:flex;justify-content:center;padding:0;margin-bottom:1 rem}.dot[_ngcontent-%COMP%]{cursor:pointer;height:13px;width:13px;margin:0 5px;background-color:var(--ion-color-primary);border-radius:50%;display:inline-block;transition:opacity .6s;opacity:.6}.active[_ngcontent-%COMP%], .dot[_ngcontent-%COMP%]:hover{opacity:1}.fade[_ngcontent-%COMP%]{-webkit-animation-name:fade;animation-name:fade;-webkit-animation-duration:1.5s;animation-duration:1.5s}.btn-carousel[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;display:flex;align-items:center;justify-content:center;width:15%;padding:0;color:var(--ion-color-primary);text-align:center;background:0 0;border:0;cursor:pointer}.btn-prev[_ngcontent-%COMP%]{left:0}.icon-carousel[_ngcontent-%COMP%]{color:var(--ion-color-primary);opacity:.5;transition:all .15s ease}.icon-carousel.disabled[_ngcontent-%COMP%]{color:var(--ion-color-medium)}.icon-carousel[_ngcontent-%COMP%]:hover{opacity:.9}.icon-carousel[_ngcontent-%COMP%]:active{opacity:.5}.btn-next[_ngcontent-%COMP%], .icon-prev[_ngcontent-%COMP%]{font-size:35px}.btn-next[_ngcontent-%COMP%]{right:0}@-webkit-keyframes fade{0%{opacity:.4}to{opacity:1}}@keyframes fade{0%{opacity:.4}to{opacity:1}}']}),t})();var Fe=n("gcOT"),Be=n("w0c1"),Te=n("qIrB"),Re=n("NITd");const $e=["theLastReferencePost"];function Ee(t,e){1&t&&g.bc(0,"mat-progress-bar",8)}function Ye(t,e){if(1&t&&g.bc(0,"panel-instructions-activity",18),2&t){const t=e.$implicit,n=g.sc(2);g.Ac("activity",t)("course",n.course)("show_button_open",!1)("expanded_panel",!1)("route_activity",n.route_activity)("show_details_assignments",!0)}}function He(t,e){1&t&&(g.gc(0,"ion-card"),g.gc(1,"ion-card-header"),g.gc(2,"ion-card-title",19),g.ed(3),g.tc(4,"translate"),g.fc(),g.gc(5,"ion-card-subtitle"),g.bc(6,"ion-icon",20),g.ed(7),g.tc(8,"translate"),g.fc(),g.fc(),g.fc()),2&t&&(g.Lb(3),g.fd(g.uc(4,2,"pages.course.activities_crate_welcome_student")),g.Lb(4),g.gd(" ",g.uc(8,4,"pages.course.response_activities_post")," "))}function je(t,e){if(1&t&&(g.gc(0,"ion-grid",9),g.gc(1,"ion-row",10),g.gc(2,"ion-col",11),g.bc(3,"filters-course",12),g.fc(),g.gc(4,"ion-col",13),g.gc(5,"ion-grid"),g.gc(6,"ion-col",14),g.cd(7,Ye,1,6,"panel-instructions-activity",15),g.bc(8,"span",null,16),g.cd(10,He,9,6,"ion-card",17),g.fc(),g.fc(),g.fc(),g.fc(),g.fc()),2&t){const t=g.sc();g.Lb(3),g.Ac("required",t.allowFilters)("course_id",t.course.uuid)("buttons",t.buttons_all),g.Lb(4),g.Ac("ngForOf",t.activities),g.Lb(3),g.Ac("ngIf",0==t.activities.length)}}let Ge=(()=>{class t{constructor(t,e,n,o){this.navParams=t,this.userService=e,this.modalCtrl=n,this.applyFiltersModeService=o,this.totalPages=0,this.this_page=1,this.activities=[],this.scrollbarStyle=s.a.scrollbarStyle,this.loading=!1,this.button_search_all={color:"warning",size:"small",mode:"search-act",disabled:!1,title:"buttons.search",icon:"search-outline"},this.buttons_all=[this.button_search_all],this.course=t.data.course,this.user=t.data.user,this.paramsFilters={type:"all",block_id:null,semester_id:null},this.allowFilters={start_publish_at:1,end_publish_at:1,end_created_at:1,start_created_at:1,theme:1,block:1,title:1,semester:1,min_qualification_percentage:1,max_qualification_percentage:1,type_activity:1}}applyFilters(t){if(!t)return!1;if(!t.mode||!t.filters)return!1;switch(t.mode){case"search-act":this.getItemsActivities(!0,t.filters)}}ngOnInit(){this.getItemsActivities(!1,this.paramsFilters),this.applyFiltersModeService.get$().subscribe(t=>{this.applyFilters(t)})}dismiss(t){this.modalCtrl.dismiss(t)}ngAfterViewInit(){setTimeout(()=>{this.intersectionObserver(),this.theLastReferencePost.changes.subscribe(t=>{t.last&&this.observer.observe(t.last.nativeElement)})})}intersectionObserver(){this.observer=new IntersectionObserver(t=>{t[0].isIntersecting&&this.totalPages>=this.this_page&&this.getItemsActivities(!1,this.paramsFilters)},{root:null,rootMargin:"0px",threshold:.5})}getItemsActivities(t=!1,e={}){this.loading=!0,t&&(this.activities=[],this.this_page=1),e.page=this.this_page,this.userService.getActivitiesByUser(this.user.uuid,this.course.uuid,e).subscribe(t=>{this.activities=this.activities.concat(t.data),this.totalPages=t.last_page,this.loading=!1,this.this_page++},t=>{this.loading=!1})}}return t.\u0275fac=function(e){return new(e||t)(g.ac(i.Fb),g.ac(Kt),g.ac(i.Db),g.ac(h.a))},t.\u0275cmp=g.Ub({type:t,selectors:[["app-activities-course-user"]],viewQuery:function(t,e){var n;1&t&&g.ld($e,!0,g.o),2&t&&g.Nc(n=g.pc())&&(e.theLastReferencePost=n)},decls:12,vars:8,consts:[["translucent","true"],["slot","end"],[3,"disabled","click"],["name","close-outline"],["mode","indeterminate",4,"ngIf"],["fullscreen","true",3,"scrollbar"],["content",""],["class","w-100 flex flex-center",4,"ngIf"],["mode","indeterminate"],[1,"w-100","flex","flex-center"],[1,"w-100"],["size","12","size-sm","12"],[3,"required","course_id","buttons"],["size","12","size-sm","12",1,"all-activities-panel"],["size","12"],[3,"activity","course","show_button_open","expanded_panel","route_activity","show_details_assignments",4,"ngFor","ngForOf"],["theLastReferencePost",""],[4,"ngIf"],[3,"activity","course","show_button_open","expanded_panel","route_activity","show_details_assignments"],[2,"color","var(--ion-color-primary)"],["name","chatbox-ellipses-outline"]],template:function(t,e){1&t&&(g.gc(0,"ion-header",0),g.gc(1,"ion-toolbar"),g.gc(2,"ion-title"),g.ed(3),g.tc(4,"translate"),g.fc(),g.gc(5,"ion-buttons",1),g.gc(6,"ion-button",2),g.oc("click",(function(){return e.dismiss()})),g.bc(7,"ion-icon",3),g.fc(),g.fc(),g.fc(),g.cd(8,Ee,1,0,"mat-progress-bar",4),g.fc(),g.gc(9,"ion-content",5,6),g.cd(11,je,11,5,"ion-grid",7),g.fc()),2&t&&(g.Lb(3),g.hd(" ",null!=e.user?e.user.name:g.uc(4,6,"forms.loading_user")," - ",null!=e.course?e.course.name+" "+(null!=e.course.section?e.course.section:""):""," "),g.Lb(3),g.Ac("disabled",e.loading),g.Lb(2),g.Ac("ngIf",e.loading),g.Lb(1),g.Bc("scrollbar",e.scrollbarStyle),g.Lb(2),g.Ac("ngIf",e.course))},directives:[i.B,i.zb,i.xb,i.l,i.k,i.C,o.t,i.u,p.b,nt.a,i.A,i.gb,i.t,Te.a,o.s,Re.a,i.m,i.o,i.q,i.p],pipes:[P.d],styles:[".fsz-ac-ads[_ngcontent-%COMP%]{font-size:3em;text-align:center;margin:0}.p-2[_ngcontent-%COMP%]{padding:20px}.m-0[_ngcontent-%COMP%]{margin:0}"]}),t})();var Ue=n("wx9n");function Ne(t,e){1&t&&g.bc(0,"card-load-animation",11),2&t&&g.Ac("count",8)}function Qe(t,e){1&t&&(g.ec(0),g.bc(1,"card-load-animation",14),g.dc()),2&t&&(g.Lb(1),g.Ac("count",1)("all_width",!0))}function We(t,e){if(1&t&&(g.gc(0,"span"),g.ed(1),g.fc()),2&t){const t=g.sc(2).$implicit;g.Lb(1),g.fd(t.section)}}function Ze(t,e){if(1&t){const t=g.hc();g.gc(0,"div"),g.gc(1,"ion-button",28),g.oc("click",(function(){g.Sc(t);const e=g.sc(2).$implicit;return g.sc(2).openCourseQualification(e)})),g.tc(2,"translate"),g.bc(3,"ion-icon",32),g.fc(),g.fc()}2&t&&(g.Lb(1),g.Ac("matTooltip",g.uc(2,1,"pages.course.qualifications")))}function Ve(t,e){if(1&t&&(g.gc(0,"ion-button",33),g.tc(1,"translate"),g.gc(2,"a",34),g.bc(3,"ion-icon",35),g.fc(),g.fc()),2&t){const t=g.sc(2).$implicit;g.Bc("href",t.reference_url),g.Ac("matTooltip",g.uc(1,3,"pages.course.virtual_class")),g.Lb(2),g.Bc("href",t.reference_url,g.Vc)}}function Xe(t,e){if(1&t){const t=g.hc();g.ec(0),g.gc(1,"div",15),g.gc(2,"div",16),g.gc(3,"div",17),g.gc(4,"span",18),g.oc("click",(function(){g.Sc(t);const e=g.sc().$implicit;return g.sc(2).openCourse(e)})),g.ed(5),g.cd(6,We,2,1,"span",13),g.fc(),g.gc(7,"div",19),g.gc(8,"span",20),g.oc("click",(function(){g.Sc(t);const e=g.sc().$implicit;return g.sc(2).copyCode(e.code)})),g.ed(9),g.fc(),g.gc(10,"span",21),g.ed(11,"\u2022"),g.fc(),g.ed(12),g.fc(),g.fc(),g.fc(),g.gc(13,"div",22),g.gc(14,"div",23),g.bc(15,"img",24),g.fc(),g.gc(16,"span",25),g.oc("click",(function(){g.Sc(t);const e=g.sc().$implicit;return g.sc(2).openCourse(e)})),g.ed(17),g.fc(),g.gc(18,"div",26),g.gc(19,"strong"),g.ed(20),g.tc(21,"translate"),g.fc(),g.ed(22,": "),g.gc(23,"span"),g.ed(24),g.fc(),g.fc(),g.gc(25,"div",26),g.gc(26,"strong"),g.ed(27),g.tc(28,"translate"),g.fc(),g.ed(29,": "),g.gc(30,"span"),g.ed(31),g.fc(),g.fc(),g.gc(32,"div",26),g.gc(33,"strong"),g.ed(34),g.tc(35,"translate"),g.fc(),g.ed(36,": "),g.gc(37,"span"),g.ed(38),g.fc(),g.fc(),g.fc(),g.gc(39,"div",27),g.gc(40,"div"),g.gc(41,"ion-button",28),g.oc("click",(function(){g.Sc(t);const e=g.sc().$implicit;return g.sc(2).openCourse(e)})),g.tc(42,"translate"),g.bc(43,"ion-icon",29),g.fc(),g.fc(),g.cd(44,Ze,4,3,"div",13),g.gc(45,"div"),g.gc(46,"ion-button",28),g.oc("click",(function(){g.Sc(t);const e=g.sc().$implicit;return g.sc(2).openCourseDashboard(e)})),g.tc(47,"translate"),g.bc(48,"ion-icon",30),g.fc(),g.fc(),g.gc(49,"div"),g.cd(50,Ve,4,5,"ion-button",31),g.fc(),g.fc(),g.fc(),g.dc()}if(2&t){const t=g.sc().$implicit,e=g.sc(2);g.Lb(1),g.Ac("ngClass","border_status_color_"+t.status),g.Lb(4),g.gd("",t.name," "),g.Lb(1),g.Ac("ngIf",t.section),g.Lb(3),g.fd(t.code),g.Lb(3),g.gd(" ",e.moment(t.date_created).format("d/m/Y")," "),g.Lb(3),g.Bc("src",t.theme_url,g.Vc),g.Lb(2),g.fd(t.subject),g.Lb(3),g.fd(g.uc(21,17,"pages.course.count_activities")),g.Lb(4),g.fd(t.activities_count),g.Lb(3),g.fd(g.uc(28,19,"pages.course.avg_course")),g.Lb(4),g.gd("",t.avg_qualification,"%"),g.Lb(3),g.fd(g.uc(35,21,"pages.course.students")),g.Lb(4),g.fd(t.students_count),g.Lb(3),g.Ac("matTooltip",g.uc(42,23,"pages.course.activities")),g.Lb(3),g.Ac("ngIf",t.user_create.uuid!=e.user.uuid),g.Lb(2),g.Ac("matTooltip",g.uc(47,25,"pages.course.dashboard")),g.Lb(4),g.Ac("ngIf",null!=t.reference_url)}}function Je(t,e){if(1&t&&(g.gc(0,"ion-col",12),g.cd(1,Qe,2,2,"ng-container",13),g.cd(2,Xe,51,27,"ng-container",13),g.fc()),2&t){const t=g.sc(2);g.Lb(1),g.Ac("ngIf",t.loadingPresent),g.Lb(1),g.Ac("ngIf",!t.loadingPresent)}}function Ke(t,e){if(1&t){const t=g.hc();g.gc(0,"div",2),g.gc(1,"ion-grid",3),g.gc(2,"ion-row",4),g.gc(3,"ion-col",5),g.gc(4,"ion-card",6),g.gc(5,"ion-card-header",7),g.oc("click",(function(){g.Sc(t);const e=g.sc();return e.loadCoursesByUsersId(e.user,"active")})),g.gc(6,"ion-card-title",8),g.ed(7),g.fc(),g.gc(8,"ion-card-subtitle",8),g.ed(9),g.tc(10,"translate"),g.fc(),g.fc(),g.fc(),g.fc(),g.gc(11,"ion-col",5),g.gc(12,"ion-card",6),g.gc(13,"ion-card-header",7),g.oc("click",(function(){g.Sc(t);const e=g.sc();return e.loadCoursesByUsersId(e.user,"archived")})),g.gc(14,"ion-card-title",8),g.ed(15),g.fc(),g.gc(16,"ion-card-subtitle",8),g.ed(17),g.tc(18,"translate"),g.fc(),g.fc(),g.fc(),g.fc(),g.fc(),g.cd(19,Ne,1,1,"card-load-animation",9),g.gc(20,"ion-row",4),g.cd(21,Je,3,2,"ion-col",10),g.fc(),g.fc(),g.fc()}if(2&t){const t=g.sc();g.Lb(7),g.fd(t.user.my_courses_active_count),g.Lb(2),g.fd(g.uc(10,6,"pages.reports.courses_actives")),g.Lb(6),g.fd(t.user.my_courses_archived_count),g.Lb(2),g.fd(g.uc(18,8,"pages.reports.courses_archived")),g.Lb(2),g.Ac("ngIf",t.loadingCourses),g.Lb(2),g.Ac("ngForOf",t.courses)}}const{Clipboard:tn}=Fe.c;let en=(()=>{class t{constructor(t,e){this.userService=t,this.modalCtrl=e,this.moment=_,this.courses=[],this.loadingCourses=!1}ngOnInit(){null!=this.user&&(console.log(this.user,"COURSES"),this.loadCoursesByUsersId(this.user))}loadCoursesByUsersId(t,e="active"){this.loadingCourses=!0,this.courses=[],this.userService.getCoursesById(t.uuid,e).subscribe(t=>{this.loadingCourses=!1,this.courses=t.data},t=>{this.loadingCourses=!1})}openCourse(t){return Object(xt.b)(this,void 0,void 0,(function*(){const e=yield this.modalCtrl.create({component:Ge,cssClass:"modal-fullscreen-100",swipeToClose:!0,componentProps:{user:this.user,course:t}});yield e.present(),yield e.onWillDismiss()}))}openCourseQualification(t){return Object(xt.b)(this,void 0,void 0,(function*(){const e=yield this.modalCtrl.create({component:Be.a,cssClass:"modal-fullscreen-100",swipeToClose:!0,componentProps:{course:t,user:this.user}});yield e.present()}))}openCourseDashboard(t){return Object(xt.b)(this,void 0,void 0,(function*(){const e=yield this.modalCtrl.create({component:Ue.a,cssClass:"modal-fullscreen-100",swipeToClose:!0,componentProps:{course:t,user:this.user,course_id:t.uuid}});yield e.present()}))}copyCode(t){return Object(xt.b)(this,void 0,void 0,(function*(){yield tn.write({string:t})}))}}return t.\u0275fac=function(e){return new(e||t)(g.ac(Kt),g.ac(i.Db))},t.\u0275cmp=g.Ub({type:t,selectors:[["courses-users-template"]],inputs:{user:"user"},decls:4,vars:4,consts:[[1,"text-center","bold"],["class","container",4,"ngIf"],[1,"container"],[1,"grid-shuffle"],["id","grid",1,"row"],["size","6"],[1,"c-pointer"],[1,"c-pointer",3,"click"],[1,"text-center"],[3,"count",4,"ngIf"],["size","12","size-sm","6","size-md","4","size-xl","3","class","",4,"ngFor","ngForOf"],[3,"count"],["size","12","size-sm","6","size-md","4","size-xl","3",1,""],[4,"ngIf"],[3,"count","all_width"],[1,"intro-y","box",3,"ngClass"],[1,"flex","items-center","border-b","border-gray-200","dark:border-dark-5"],[1,"ml-3","mr-auto"],[1,"text-theme-1","dark:text-theme-10","inline-block","truncate","c-pointer",3,"click"],[1,"flex","text-gray-600","truncate","text-xs","mt-0.5"],[1,"text-theme-1","dark:text-theme-10","inline-block","truncate","c-pointer",2,"font-size","1.2em",3,"click"],[1,"mx-1"],[1,"p-2"],[1,"h-40","xxl:h-56","image-fit"],["alt","--",1,"rounded-md",3,"src"],[1,"text-theme-1","dark:text-theme-10","inline-block","truncate","c-pointer","block","font-medium","text-base","mt-2","ml-2",3,"click"],[1,"text-gray-700","dark:text-gray-600","mt-1"],[1,"flex-center",2,"display","flex","flex-wrap","wrap"],["fill","outline","shape","round","size","small",3,"matTooltip","click"],["name","planet-outline"],["name","pie-chart-outline"],["fill","outline","shape","round","size","small","target","_blank",3,"matTooltip","href",4,"ngIf"],["name","albums-outline"],["fill","outline","shape","round","size","small","target","_blank",3,"matTooltip","href"],["target","_blank",3,"href"],["name","laptop-outline"]],template:function(t,e){1&t&&(g.gc(0,"h2",0),g.ed(1),g.tc(2,"translate"),g.fc(),g.cd(3,Ke,22,10,"div",1)),2&t&&(g.Lb(1),g.fd(g.uc(2,2,"pages.course.courses")),g.Lb(2),g.Ac("ngIf",e.user))},directives:[o.t,i.A,i.gb,i.t,i.m,i.o,i.q,i.p,o.s,ot.a,o.q,i.k,ne.a,i.C],pipes:[P.d],styles:["@media (max-width:550px){ion-card-header[_ngcontent-%COMP%]{padding:0}}.border_status_color_archived[_ngcontent-%COMP%]{border:1px solid var(--ion-color-warning)}.border_status_color_active[_ngcontent-%COMP%]{border:1px solid var(--ion-color-primary)}"]}),t})();function nn(t,e){1&t&&g.bc(0,"mat-progress-bar",10)}function on(t,e){if(1&t&&(g.gc(0,"p"),g.gc(1,"strong"),g.ed(2),g.tc(3,"translate"),g.fc(),g.ed(4),g.fc()),2&t){const t=g.sc(3);g.Lb(2),g.gd("",g.uc(3,2,"forms.country"),": "),g.Lb(2),g.gd(" ",t.user.information.country.name,"")}}function cn(t,e){if(1&t&&(g.gc(0,"p"),g.gc(1,"strong"),g.ed(2),g.tc(3,"translate"),g.fc(),g.ed(4),g.fc()),2&t){const t=g.sc(3);g.Lb(2),g.gd("",g.uc(3,2,"forms.state"),": "),g.Lb(2),g.gd(" ",t.user.information.state.name,"")}}function an(t,e){if(1&t&&(g.gc(0,"p"),g.gc(1,"strong"),g.ed(2),g.tc(3,"translate"),g.fc(),g.ed(4),g.fc()),2&t){const t=g.sc(3);g.Lb(2),g.gd("",g.uc(3,2,"forms.city"),": "),g.Lb(2),g.gd(" ",t.user.information.city.name,"")}}function rn(t,e){if(1&t&&(g.gc(0,"p"),g.gc(1,"strong"),g.ed(2),g.tc(3,"translate"),g.fc(),g.ed(4),g.fc()),2&t){const t=g.sc(3);g.Lb(2),g.gd("",g.uc(3,2,"forms.school"),": "),g.Lb(2),g.gd(" ",t.user.information.school.name,"")}}function sn(t,e){if(1&t&&(g.ec(0),g.cd(1,on,5,4,"p",7),g.cd(2,cn,5,4,"p",7),g.cd(3,an,5,4,"p",7),g.cd(4,rn,5,4,"p",7),g.dc()),2&t){const t=g.sc(2);g.Lb(1),g.Ac("ngIf",t.user.information.country),g.Lb(1),g.Ac("ngIf",t.user.information.state),g.Lb(1),g.Ac("ngIf",t.user.information.city),g.Lb(1),g.Ac("ngIf",t.user.information.school)}}const ln=function(t){return{height:t}};function dn(t,e){if(1&t&&(g.gc(0,"td",29),g.gc(1,"div",30),g.bc(2,"div",31),g.gc(3,"div",32),g.ed(4," ."),g.fc(),g.gc(5,"p",33),g.ed(6),g.fc(),g.gc(7,"p",33),g.ed(8),g.fc(),g.fc(),g.fc()),2&t){const t=e.$implicit,n=g.sc(3);g.Lb(2),g.Ac("ngStyle",g.Fc(5,ln,300-t.avg_height)),g.Lb(1),g.Ac("ngStyle",g.Fc(7,ln,t.avg_height+"px"))("matTooltip",(0!=n.moment(t.time_avg,"HH:mm:ss").hour()?n.moment(t.time_avg,"HH:mm:ss").hour()+" hora(s) - ":"")+n.moment(t.time_avg,"HH:mm:ss").minutes()+" min"),g.Lb(3),g.fd(t.day_of_weeK),g.Lb(2),g.fd(n.moment(t.time_avg,"HH:mm:ss").hour()>=1?n.moment(t.time_avg,"HH:mm:ss").hour()+" hora(s)":n.moment(t.time_avg,"HH:mm:ss").minutes()+" min")}}function gn(t,e){if(1&t&&(g.gc(0,"ion-row"),g.gc(1,"ion-col",26),g.gc(2,"ion-card"),g.gc(3,"ion-card-content"),g.gc(4,"h3",20),g.ed(5),g.tc(6,"translate"),g.fc(),g.gc(7,"ion-grid"),g.gc(8,"ion-row"),g.gc(9,"ion-col",21),g.gc(10,"p"),g.ed(11),g.tc(12,"translate"),g.bc(13,"br"),g.gc(14,"strong"),g.ed(15),g.fc(),g.fc(),g.fc(),g.gc(16,"ion-col",21),g.gc(17,"p"),g.ed(18),g.tc(19,"translate"),g.bc(20,"br"),g.gc(21,"strong"),g.ed(22),g.fc(),g.fc(),g.fc(),g.fc(),g.fc(),g.gc(23,"table",27),g.gc(24,"tr"),g.cd(25,dn,9,9,"td",28),g.fc(),g.fc(),g.fc(),g.fc(),g.fc(),g.fc()),2&t){const t=g.sc(2);g.Lb(5),g.fd(g.uc(6,6,"pages.reports.time_for_day")),g.Lb(6),g.fd(g.uc(12,8,"pages.reports.avg_this_week")),g.Lb(4),g.gd(" ",t.moment(t.user.avg_time_week,"HH:mm:ss").format("HH:mm"),""),g.Lb(3),g.fd(g.uc(19,10,"pages.reports.avg_this_month")),g.Lb(4),g.fd(t.moment(t.user.avg_time_month,"HH:mm:ss").format("HH:mm")),g.Lb(3),g.Ac("ngForOf",t.user.time_week)}}function un(t,e){if(1&t&&(g.gc(0,"ion-grid"),g.gc(1,"ion-row"),g.gc(2,"ion-col",11),g.gc(3,"div",12),g.gc(4,"div",13),g.gc(5,"div",14),g.bc(6,"img",15),g.fc(),g.fc(),g.fc(),g.fc(),g.gc(7,"ion-col",11),g.gc(8,"div",16),g.gc(9,"h3",17),g.gc(10,"strong"),g.ed(11),g.fc(),g.fc(),g.gc(12,"p",17),g.gc(13,"strong"),g.ed(14),g.tc(15,"translate"),g.fc(),g.ed(16),g.fc(),g.gc(17,"p",17),g.gc(18,"strong"),g.ed(19),g.tc(20,"translate"),g.fc(),g.gc(21,"span",18),g.ed(22),g.fc(),g.fc(),g.cd(23,sn,5,4,"ng-container",7),g.fc(),g.fc(),g.gc(24,"ion-col",11),g.gc(25,"div"),g.gc(26,"ion-grid"),g.gc(27,"ion-col",19),g.gc(28,"h2",20),g.ed(29),g.tc(30,"translate"),g.fc(),g.fc(),g.fc(),g.gc(31,"ion-grid"),g.gc(32,"ion-row"),g.gc(33,"ion-col",21),g.gc(34,"p",22),g.gc(35,"strong",23),g.ed(36),g.bc(37,"ion-icon",24),g.fc(),g.fc(),g.gc(38,"p",20),g.ed(39),g.tc(40,"translate"),g.fc(),g.fc(),g.gc(41,"ion-col",21),g.gc(42,"p",22),g.gc(43,"strong",23),g.ed(44),g.fc(),g.bc(45,"ion-icon",25),g.fc(),g.gc(46,"p",20),g.ed(47),g.tc(48,"translate"),g.fc(),g.fc(),g.fc(),g.fc(),g.fc(),g.fc(),g.gc(49,"ion-col",11),g.gc(50,"div"),g.gc(51,"ion-grid"),g.gc(52,"ion-grid"),g.gc(53,"ion-col",19),g.gc(54,"h2",20),g.ed(55),g.tc(56,"translate"),g.fc(),g.fc(),g.fc(),g.gc(57,"ion-row"),g.gc(58,"ion-col",21),g.gc(59,"p",22),g.gc(60,"strong",23),g.ed(61),g.fc(),g.bc(62,"ion-icon",24),g.fc(),g.gc(63,"p",20),g.ed(64),g.tc(65,"translate"),g.fc(),g.fc(),g.gc(66,"ion-col",21),g.gc(67,"p",22),g.gc(68,"strong",23),g.ed(69),g.fc(),g.bc(70,"ion-icon",25),g.fc(),g.gc(71,"p",20),g.ed(72),g.tc(73,"translate"),g.fc(),g.fc(),g.fc(),g.fc(),g.fc(),g.fc(),g.fc(),g.cd(74,gn,26,12,"ion-row",7),g.fc()),2&t){const t=g.sc();g.Lb(6),g.Ac("src",t.user.information&&t.user.information.image_url||t.picture,g.Vc),g.Lb(5),g.hd("",t.user.last_name," ",t.user.first_name,""),g.Lb(3),g.gd("",g.uc(15,20,"forms.email"),": "),g.Lb(2),g.fd(t.user.email),g.Lb(3),g.gd("",g.uc(20,22,"statuses.status"),": "),g.Lb(2),g.Ac("ngClass"," badge-ng-pers color-"+t.user.status),g.Lb(1),g.gd(" ",t.user.status_lang," "),g.Lb(1),g.Ac("ngIf",t.user.information),g.Lb(6),g.fd(g.uc(30,24,"pages.reports.books")),g.Lb(7),g.gd("",t.user.pines_availables_count," "),g.Lb(3),g.fd(g.uc(40,26,"pages.reports.pines_availables_count")),g.Lb(5),g.fd(t.user.pines_expired_count),g.Lb(3),g.fd(g.uc(48,28,"pages.reports.pines_expired_count")),g.Lb(8),g.fd(g.uc(56,30,"pages.reports.libraries")),g.Lb(6),g.fd(t.user.libraries_actives_count),g.Lb(3),g.fd(g.uc(65,32,"pages.reports.pines_availables_count")),g.Lb(5),g.fd(t.user.libraries_inactives_count),g.Lb(3),g.fd(g.uc(73,34,"pages.reports.pines_expired_count")),g.Lb(2),g.Ac("ngIf",t.user.time_week)}}function fn(t,e){if(1&t&&g.bc(0,"book-user-template",34),2&t){const t=g.sc();g.Ac("user",t.user)("show_change_date",!0)}}function bn(t,e){if(1&t&&g.bc(0,"libraries-user-components",35),2&t){const t=g.sc();g.Ac("user",t.user)}}function hn(t,e){if(1&t&&(g.gc(0,"div"),g.bc(1,"courses-users-template",35),g.fc()),2&t){const t=g.sc();g.Lb(1),g.Ac("user",t.user)}}let pn=(()=>{class t{constructor(t,e,n,o,c,i){this.modalCtrl=t,this.navParams=e,this.userService=n,this.reportUserService=o,this.controlErroresService=c,this.loadingkService=i,this.scrollbarStyle=s.a.scrollbarStyle,this.loading=!1,this.picture=s.a.profile,this.loadBooks=!1,this.loadCourses=!1,this.moment=_,this.required_show_templates={},this.loadLibraries=!1,this.user_search=e.data.user_search,i.get$().subscribe(t=>{this.loading=t});let a=e.data.required_show_templates;a&&(this.required_show_templates=a)}ngOnInit(){this.findUser()}findUser(){this.loading=!0,this.userService.find(this.user_search.uuid).subscribe(t=>{this.user=t.data,this.user.pines_availables_count+this.user.pines_expired_count>0&&1==this.required_show_templates.books&&(this.loadBooks=!0),1==this.required_show_templates.libraries&&(this.loadLibraries=!0),1==t.data.have_courses&&1==this.required_show_templates.courses&&(this.loadCourses=!0),this.loading=!1},t=>{this.loading=!1,this.controlErroresService.control(t),this.dismiss()})}dismiss(t){this.modalCtrl.dismiss(t)}}return t.\u0275fac=function(e){return new(e||t)(g.ac(i.Db),g.ac(i.Fb),g.ac(Kt),g.ac(f),g.ac(l.a),g.ac(ee.a))},t.\u0275cmp=g.Ub({type:t,selectors:[["app-modal-show-information-user"]],decls:15,vars:10,consts:[["translucent","true"],["slot","end"],[3,"disabled","click"],["name","close-outline"],["mode","indeterminate",4,"ngIf"],["fullscreen","true",3,"scrollbar"],["content",""],[4,"ngIf"],[3,"user","show_change_date",4,"ngIf"],[3,"user",4,"ngIf"],["mode","indeterminate"],["size","12","size-sm","6","size-md","4","size-xl","3"],[1,"w-52","mx-auto","xl:mr-0","xl:ml-6"],[1,"border-2","border-dashed","shadow-sm","border-gray-200","dark:border-dark-5","rounded-md","m-3"],[1,"h-40","relative","image-fit","cursor-pointer","zoom-in","mx-auto"],["alt","--",1,"rounded-sm",3,"src"],[1,"p-3"],[1,"text-center-small"],[1,"badge",3,"ngClass"],["size","12"],[1,"text-center"],["size","6"],[1,"text-center","p-0"],[2,"font-size","1.6em"],["name","key-outline","color","success",1,"button-sm-custom"],["name","key-outline","color","warning",1,"button-sm-custom"],["size","12","size-sm","6","size-md","6"],[2,"width","100%"],["class","col-item-linebar",4,"ngFor","ngForOf"],[1,"col-item-linebar"],[1,"col-line-fx","flex-fend-axis-y","flex-y"],[3,"ngStyle"],[1,"col-line-fx-inter",3,"ngStyle","matTooltip"],[2,"text-align","center","margin","0 auto"],[3,"user","show_change_date"],[3,"user"]],template:function(t,e){1&t&&(g.gc(0,"ion-header",0),g.gc(1,"ion-toolbar"),g.gc(2,"ion-title"),g.ed(3),g.tc(4,"translate"),g.fc(),g.gc(5,"ion-buttons",1),g.gc(6,"ion-button",2),g.oc("click",(function(){return e.dismiss()})),g.bc(7,"ion-icon",3),g.fc(),g.fc(),g.fc(),g.cd(8,nn,1,0,"mat-progress-bar",4),g.fc(),g.gc(9,"ion-content",5,6),g.cd(11,un,75,36,"ion-grid",7),g.cd(12,fn,1,2,"book-user-template",8),g.cd(13,bn,1,1,"libraries-user-components",9),g.cd(14,hn,2,1,"div",7),g.fc()),2&t&&(g.Lb(3),g.gd(" ",null!=e.user?e.user.name:g.uc(4,8,"forms.loading_user")," "),g.Lb(3),g.Ac("disabled",e.loading),g.Lb(2),g.Ac("ngIf",e.loading),g.Lb(1),g.Bc("scrollbar",e.scrollbarStyle),g.Lb(2),g.Ac("ngIf",e.user),g.Lb(1),g.Ac("ngIf",e.loadBooks&&1==e.required_show_templates.books),g.Lb(1),g.Ac("ngIf",e.loadLibraries&&1==e.required_show_templates.libraries),g.Lb(1),g.Ac("ngIf",e.loadCourses&&1==e.required_show_templates.courses))},directives:[i.B,i.zb,i.xb,i.l,i.k,i.C,o.t,i.u,p.b,nt.a,i.A,i.gb,i.t,o.q,i.m,i.n,o.s,o.w,ne.a,he,qe,en],pipes:[P.d],styles:['@media (max-width:575px){.text-center-small[_ngcontent-%COMP%]{text-align:center}}.col-line-fx[_ngcontent-%COMP%]{min-width:2.5EM;height:300px}.col-item-linebar[_ngcontent-%COMP%]{height:300px}.col-line-fx-inter[_ngcontent-%COMP%]{width:10px;border-radius:5px;background:var(--ion-color-primary);text-align:"center";margin:auto auto 0}.flex-fend-axis-y[_ngcontent-%COMP%]{align-items:flex-end;display:flex}']}),t})();var mn=n("g31X");function _n(t,e){1&t&&g.bc(0,"mat-progress-bar",11)}function vn(t,e){1&t&&g.bc(0,"card-load-animation",12),2&t&&g.Ac("count",1)("all_width",!0)}const xn=function(t){return{height:t}};function Cn(t,e){if(1&t&&(g.gc(0,"td",17),g.gc(1,"div",18),g.bc(2,"div",19),g.gc(3,"div",20),g.tc(4,"formatTimeStr"),g.ed(5," ."),g.fc(),g.gc(6,"p",21),g.ed(7),g.fc(),g.gc(8,"p",21),g.ed(9),g.tc(10,"formatTimeStr"),g.fc(),g.fc(),g.fc()),2&t){const t=e.$implicit,n=g.sc(2);g.Lb(2),g.Ac("ngStyle",g.Fc(10,xn,300-t.avg_height)),g.Lb(1),g.Ac("ngStyle",g.Fc(12,xn,t.avg_height+"px"))("matTooltip",g.uc(4,5,t.time_avg)),g.Lb(4),g.fd(n.moment(t.date,"YYYY-MM").format("MMM-YYYY")),g.Lb(2),g.fd(g.vc(10,7,t.time_avg,"minimal"))}}function yn(t,e){if(1&t&&(g.gc(0,"ion-card"),g.gc(1,"ion-card-content"),g.gc(2,"h3",13),g.ed(3),g.tc(4,"translate"),g.fc(),g.gc(5,"ion-grid"),g.gc(6,"ion-row"),g.gc(7,"ion-col",14),g.gc(8,"p"),g.ed(9),g.tc(10,"translate"),g.gc(11,"strong"),g.ed(12),g.fc(),g.ed(13,": "),g.gc(14,"strong"),g.ed(15),g.tc(16,"formatTimeStr"),g.fc(),g.fc(),g.gc(17,"p"),g.ed(18),g.tc(19,"translate"),g.gc(20,"strong"),g.ed(21),g.fc(),g.ed(22,": "),g.gc(23,"strong"),g.ed(24),g.fc(),g.ed(25),g.fc(),g.fc(),g.fc(),g.fc(),g.gc(26,"table",15),g.gc(27,"tr"),g.cd(28,Cn,11,14,"td",16),g.fc(),g.fc(),g.fc(),g.fc()),2&t){const t=g.sc();g.Lb(3),g.fd(g.uc(4,9,"pages.reports.time_hpd")),g.Lb(6),g.gd("",g.uc(10,11,"pages.reports.avg_this_year")," "),g.Lb(3),g.fd(t.timerMonthData.this_year),g.Lb(3),g.fd(g.uc(16,13,t.timerMonthData.avg_time_year)),g.Lb(3),g.gd("",g.uc(19,15,"pages.reports.avg_this_year")," "),g.Lb(3),g.fd(t.timerMonthData.this_year),g.Lb(3),g.fd(t.moment(t.timerMonthData.avg_time_year,"HH:mm:ss").format("HH")),g.Lb(1),g.gd(" - ",t.moment(t.timerMonthData.avg_time_year,"HH:mm:ss").format("mm")," min"),g.Lb(3),g.Ac("ngForOf",t.timerMonthData.time_week)}}function kn(t,e){1&t&&g.bc(0,"card-load-animation",12),2&t&&g.Ac("count",1)("all_width",!0)}function wn(t,e){if(1&t&&(g.gc(0,"td",17),g.gc(1,"div",18),g.bc(2,"div",19),g.gc(3,"div",20),g.tc(4,"formatTimeStr"),g.ed(5," ."),g.fc(),g.gc(6,"p",21),g.ed(7),g.fc(),g.gc(8,"p",21),g.ed(9),g.tc(10,"formatTimeStr"),g.fc(),g.fc(),g.fc()),2&t){const t=e.$implicit;g.Lb(2),g.Ac("ngStyle",g.Fc(10,xn,300-t.avg_height)),g.Lb(1),g.Ac("ngStyle",g.Fc(12,xn,t.avg_height+"px"))("matTooltip",g.uc(4,5,t.time_avg)),g.Lb(4),g.fd(t.day_of_weeK),g.Lb(2),g.fd(g.vc(10,7,t.time_avg,"minimal"))}}function Mn(t,e){if(1&t&&(g.gc(0,"ion-card"),g.gc(1,"ion-card-content"),g.gc(2,"h3",13),g.ed(3),g.tc(4,"translate"),g.fc(),g.gc(5,"ion-grid"),g.gc(6,"ion-row"),g.gc(7,"ion-col",14),g.gc(8,"p"),g.ed(9),g.tc(10,"translate"),g.bc(11,"br"),g.gc(12,"strong"),g.ed(13),g.tc(14,"formatTimeStr"),g.fc(),g.fc(),g.fc(),g.gc(15,"ion-col",14),g.gc(16,"p"),g.ed(17),g.tc(18,"translate"),g.gc(19,"strong"),g.ed(20),g.fc(),g.bc(21,"br"),g.gc(22,"strong"),g.ed(23),g.tc(24,"formatTimeStr"),g.fc(),g.fc(),g.fc(),g.fc(),g.fc(),g.gc(25,"table",15),g.gc(26,"tr"),g.cd(27,wn,11,14,"td",16),g.fc(),g.fc(),g.fc(),g.fc()),2&t){const t=g.sc();g.Lb(3),g.fd(g.uc(4,7,"pages.reports.time_for_day")),g.Lb(6),g.fd(g.uc(10,9,"pages.reports.avg_this_week")),g.Lb(4),g.gd("",g.uc(14,11,t.timerWeekData.avg_time_week)," "),g.Lb(4),g.gd("",g.uc(18,13,"pages.reports.avg_this_month")," "),g.Lb(3),g.fd(t.timerWeekData.this_month),g.Lb(3),g.gd(" ",g.uc(24,15,t.timerWeekData.avg_time_month)," "),g.Lb(4),g.Ac("ngForOf",t.timerWeekData.time_week)}}let Ln=(()=>{class t{constructor(t,e,n){this.modalCtrl=t,this.reportUserService=e,this.controlErroresService=n,this.loading=!1,this.scrollbarStyle=s.a.scrollbarStyle,this.moment=_,this.loadingsMode={month:!1,week:!1}}ngOnInit(){this.getMonthData(),this.getWeekData()}getWeekData(){this.loadingsMode.week=!0,this.reportUserService.getInformationReportWeek().subscribe(t=>{this.loadingsMode.week=!1,this.timerWeekData=t.data},t=>{this.loadingsMode.week=!1,this.controlErroresService.control(t)})}getMonthData(){this.loadingsMode.month=!0,this.reportUserService.getInformationReportMonthly().subscribe(t=>{this.loadingsMode.month=!1,this.timerMonthData=t.data},t=>{this.loadingsMode.month=!1,this.controlErroresService.control(t)})}dismiss(t){this.modalCtrl.dismiss(t)}}return t.\u0275fac=function(e){return new(e||t)(g.ac(i.Db),g.ac(f),g.ac(l.a))},t.\u0275cmp=g.Ub({type:t,selectors:[["app-graphs-activity-users"]],decls:19,vars:10,consts:[["translucent","true"],["slot","end"],[3,"disabled","click"],["name","close-outline"],["mode","indeterminate",4,"ngIf"],["fullscreen","true",3,"scrollbar"],["content",""],["size","12"],[3,"count","all_width",4,"ngIf"],[4,"ngIf"],["size","12","size-sm","6","size-md","6"],["mode","indeterminate"],[3,"count","all_width"],[1,"text-center"],["size","6"],[2,"width","100%"],["class","col-item-linebar",4,"ngFor","ngForOf"],[1,"col-item-linebar"],[1,"col-line-fx","flex-fend-axis-y","flex-y"],[3,"ngStyle"],[1,"col-line-fx-inter",3,"ngStyle","matTooltip"],[2,"text-align","center","margin","0 auto"]],template:function(t,e){1&t&&(g.gc(0,"ion-header",0),g.gc(1,"ion-toolbar"),g.gc(2,"ion-title"),g.ed(3),g.tc(4,"translate"),g.fc(),g.gc(5,"ion-buttons",1),g.gc(6,"ion-button",2),g.oc("click",(function(){return e.dismiss()})),g.bc(7,"ion-icon",3),g.fc(),g.fc(),g.fc(),g.cd(8,_n,1,0,"mat-progress-bar",4),g.fc(),g.gc(9,"ion-content",5,6),g.gc(11,"ion-grid"),g.gc(12,"ion-row"),g.gc(13,"ion-col",7),g.cd(14,vn,1,2,"card-load-animation",8),g.cd(15,yn,29,17,"ion-card",9),g.fc(),g.gc(16,"ion-col",10),g.cd(17,kn,1,2,"card-load-animation",8),g.cd(18,Mn,28,17,"ion-card",9),g.fc(),g.fc(),g.fc(),g.fc()),2&t&&(g.Lb(3),g.gd(" ",g.uc(4,8,"pages.reports.data_activity_graph")," "),g.Lb(3),g.Ac("disabled",e.loading),g.Lb(2),g.Ac("ngIf",e.loading),g.Lb(1),g.Bc("scrollbar",e.scrollbarStyle),g.Lb(5),g.Ac("ngIf",e.loadingsMode.month),g.Lb(1),g.Ac("ngIf",e.timerMonthData),g.Lb(2),g.Ac("ngIf",e.loadingsMode.week),g.Lb(1),g.Ac("ngIf",e.timerWeekData))},directives:[i.B,i.zb,i.xb,i.l,i.k,i.C,o.t,i.u,p.b,i.A,i.gb,i.t,nt.a,ot.a,i.m,i.n,o.s,o.w,ne.a],pipes:[P.d,mn.a],styles:['@media (max-width:575px){.text-center-small[_ngcontent-%COMP%]{text-align:center}}.col-line-fx[_ngcontent-%COMP%]{min-width:2.5EM;height:300px}.col-item-linebar[_ngcontent-%COMP%]{height:300px}.col-line-fx-inter[_ngcontent-%COMP%]{width:10px;border-radius:5px;background:var(--ion-color-primary);text-align:"center";margin:auto auto 0}.flex-fend-axis-y[_ngcontent-%COMP%]{align-items:flex-end;display:flex}']}),t})();var On=n("OMi/"),Pn=n("+0xr"),An=n("Xa2L");function Sn(t,e){1&t&&(g.gc(0,"ion-buttons",47),g.bc(1,"ion-menu-button"),g.fc())}function In(t,e){1&t&&(g.gc(0,"ion-title"),g.ed(1),g.tc(2,"translate"),g.fc()),2&t&&(g.Lb(1),g.fd(g.uc(2,1,"pages.reports.users_reports")))}function Dn(t,e){if(1&t){const t=g.hc();g.gc(0,"ion-searchbar",48),g.oc("ngModelChange",(function(e){return g.Sc(t),g.sc().queryText=e}))("ionChange",(function(){return g.Sc(t),g.sc().searchItems(!0)}))("ionCancel",(function(){return g.Sc(t),g.sc().showSearchbar=!1})),g.tc(1,"translate"),g.fc()}if(2&t){const t=g.sc();g.Bc("placeholder",g.uc(1,2,"forms.search")),g.Ac("ngModel",t.queryText)}}function zn(t,e){if(1&t){const t=g.hc();g.gc(0,"ion-button",49),g.oc("click",(function(){return g.Sc(t),g.sc().openModalStadistics()})),g.tc(1,"translate"),g.bc(2,"ion-icon",14),g.fc()}2&t&&g.Ac("matTooltip",g.uc(1,1,"pages.reports.data_activity_graph"))}function qn(t,e){if(1&t){const t=g.hc();g.gc(0,"ion-button",50),g.oc("click",(function(){return g.Sc(t),g.sc().showSearchbar=!0})),g.bc(1,"ion-icon",51),g.fc()}}function Fn(t,e){1&t&&g.bc(0,"mat-progress-bar",52)}function Bn(t,e){1&t&&g.bc(0,"card-load-animation",53),2&t&&g.Ac("count",1)("all_width",!0)}function Tn(t,e){1&t&&g.bc(0,"mat-spinner")}function Rn(t,e){if(1&t&&(g.gc(0,"div",54),g.cd(1,Tn,1,0,"mat-spinner",2),g.fc()),2&t){const t=g.sc();g.Lb(1),g.Ac("ngIf",t.isLoadingResults)}}function $n(t,e){1&t&&(g.gc(0,"th",55),g.ed(1),g.tc(2,"translate"),g.fc()),2&t&&(g.Lb(1),g.fd(g.uc(2,1,"pages.reports.last_name")))}function En(t,e){if(1&t&&(g.gc(0,"td",56),g.gc(1,"ion-item"),g.gc(2,"div",57),g.bc(3,"img",58),g.fc(),g.gc(4,"div",59),g.gc(5,"span",60),g.ed(6),g.fc(),g.fc(),g.fc(),g.fc()),2&t){const t=e.$implicit,n=g.sc();g.Lb(3),g.Ac("src",null!=t&&null!=t.information?t.information.image_url:n.profile_img_route,g.Vc),g.Lb(3),g.gd("",t.last_name," ")}}function Yn(t,e){1&t&&(g.gc(0,"th",61),g.ed(1),g.tc(2,"translate"),g.fc()),2&t&&(g.Lb(1),g.fd(g.uc(2,1,"pages.reports.first_name")))}function Hn(t,e){if(1&t&&(g.gc(0,"td",62),g.gc(1,"span",60),g.ed(2),g.fc(),g.fc()),2&t){const t=e.$implicit;g.Lb(2),g.gd(" ",t.first_name," ")}}function jn(t,e){1&t&&(g.gc(0,"th",61),g.ed(1),g.tc(2,"translate"),g.fc()),2&t&&(g.Lb(1),g.fd(g.uc(2,1,"pages.reports.email")))}function Gn(t,e){if(1&t&&(g.gc(0,"td",62),g.ed(1),g.fc()),2&t){const t=e.$implicit;g.Lb(1),g.fd(t.email)}}function Un(t,e){1&t&&(g.gc(0,"th",63),g.ed(1),g.tc(2,"translate"),g.fc()),2&t&&(g.Lb(1),g.fd(g.uc(2,1,"pages.reports.type_user")))}function Nn(t,e){if(1&t&&(g.gc(0,"span",65),g.ed(1),g.fc()),2&t){const t=e.$implicit;g.Lb(1),g.fd(t.description)}}function Qn(t,e){if(1&t&&(g.gc(0,"td",56),g.cd(1,Nn,2,1,"span",64),g.fc()),2&t){const t=e.$implicit;g.Lb(1),g.Ac("ngForOf",t.roles)}}function Wn(t,e){1&t&&(g.gc(0,"th",61),g.ed(1),g.tc(2,"translate"),g.fc()),2&t&&(g.Lb(1),g.fd(g.uc(2,1,"pages.reports.pines_availables_count")))}function Zn(t,e){if(1&t&&(g.gc(0,"td",66),g.ed(1),g.fc()),2&t){const t=e.$implicit;g.Lb(1),g.gd(" ",t.pines_availables_count,"")}}function Vn(t,e){1&t&&(g.gc(0,"th",61),g.ed(1),g.tc(2,"translate"),g.fc()),2&t&&(g.Lb(1),g.gd("",g.uc(2,1,"pages.reports.pines_expired_count")," "))}function Xn(t,e){if(1&t&&(g.gc(0,"td",66),g.ed(1),g.fc()),2&t){const t=e.$implicit;g.Lb(1),g.gd(" ",t.pines_expired_count,"")}}function Jn(t,e){1&t&&(g.gc(0,"th",61),g.ed(1),g.tc(2,"translate"),g.fc()),2&t&&(g.Lb(1),g.gd("",g.uc(2,1,"pages.reports.libraries_count")," "))}function Kn(t,e){if(1&t&&(g.gc(0,"td",66),g.ed(1),g.fc()),2&t){const t=e.$implicit;g.Lb(1),g.gd(" ",t.libraries_count,"")}}function to(t,e){1&t&&(g.gc(0,"th",67),g.ed(1),g.tc(2,"translate"),g.fc()),2&t&&(g.Lb(1),g.gd(" ",g.uc(2,1,"pages.reports.created_at")," "))}function eo(t,e){if(1&t&&(g.gc(0,"td",62),g.ed(1),g.fc()),2&t){const t=e.$implicit,n=g.sc();g.Lb(1),g.gd(" ",n.moment(t.date_created).format("DD/MMMM/YYYY"),"")}}function no(t,e){1&t&&(g.gc(0,"th",68),g.ed(1),g.tc(2,"translate"),g.fc()),2&t&&(g.Lb(1),g.gd(" ",g.uc(2,1,"statuses.status")," "))}function oo(t,e){if(1&t&&(g.gc(0,"td",62),g.gc(1,"span",69),g.ed(2),g.fc(),g.fc()),2&t){const t=e.$implicit;g.Lb(1),g.Ac("ngClass"," badge-ng-pers color-"+t.status),g.Lb(1),g.gd(" ",t.status_lang," ")}}function co(t,e){1&t&&(g.gc(0,"th",67),g.ed(1),g.tc(2,"translate"),g.fc()),2&t&&(g.Lb(1),g.gd(" ",g.uc(2,1,"pages.reports.last_activity")," "))}function io(t,e){if(1&t&&(g.gc(0,"span"),g.ed(1),g.fc()),2&t){const t=g.sc().$implicit,e=g.sc();g.Lb(1),g.gd(" ",e.moment(t.oneview.start_date).format("DD/MM/YYYY HH:mm")," ")}}function ao(t,e){if(1&t&&(g.gc(0,"td",62),g.cd(1,io,2,1,"span",2),g.fc()),2&t){const t=e.$implicit;g.Lb(1),g.Ac("ngIf",t.oneview)}}function ro(t,e){1&t&&(g.gc(0,"th",68),g.ed(1),g.tc(2,"translate"),g.fc()),2&t&&(g.Lb(1),g.gd(" ",g.uc(2,1,"pages.reports.actions")," "))}function so(t,e){if(1&t){const t=g.hc();g.gc(0,"button",70),g.oc("click",(function(){g.Sc(t);const e=g.sc().$implicit;return g.sc().delete(e)})),g.tc(1,"translate"),g.bc(2,"ion-icon",74),g.fc()}2&t&&g.Ac("matTooltip",g.uc(1,1,"buttons.delete"))}function lo(t,e){if(1&t){const t=g.hc();g.gc(0,"td",62),g.gc(1,"button",70),g.oc("click",(function(){g.Sc(t);const n=e.$implicit;return g.sc().showInformation(n)})),g.tc(2,"translate"),g.bc(3,"ion-icon",71),g.fc(),g.gc(4,"button",70),g.oc("click",(function(){g.Sc(t);const n=e.$implicit;return g.sc().changePassword(n)})),g.tc(5,"translate"),g.bc(6,"ion-icon",72),g.fc(),g.cd(7,so,3,3,"button",73),g.fc()}if(2&t){const t=e.$implicit;g.Lb(1),g.Ac("matTooltip",g.uc(2,3,"pages.reports.information")),g.Lb(3),g.Ac("matTooltip",g.uc(5,5,"pages.reports.change-password")),g.Lb(3),g.Ac("ngIf",1!=t.is_protected)}}function go(t,e){1&t&&g.bc(0,"tr",75)}function uo(t,e){1&t&&g.bc(0,"tr",76)}r.a.register(...r.b);let fo=(()=>{class t{constructor(t,e,n,o,c,i,a,r,l){this.applyFiltersModeService=t,this.controlErroresService=e,this.reportUserService=n,this.sizePanelService=o,this.alertController=c,this.toastService=i,this.userService=a,this.modalCtrl=r,this.router=l,this.showSearchbar=!1,this.scrollbarStyle=s.a.scrollbarStyle,this.pageSize=1,this.displayedColumns=["last_name","first_name","email","role","pines_availables_count","pines_expired_count","libraries_count","last_activity","created_at","status","actions"],this.data=[],this.profile_img_route="/assets/images/profile-8.jpg",this.loading=!1,this.moment=_,this.queryText="",this.roles=[],this.button_donwload={color:"danger",size:"small",mode:"download",icon:"cloud-download-outline",disabled:!1,title:"buttons.download"},this.button_export={color:"success",size:"small",mode:"export",icon:"download-outline",disabled:!1,title:"buttons.export"},this.button_search={color:"warning",size:"small",mode:"search",disabled:!1,title:"buttons.search",icon:"search-outline"},this.buttons_filters=[this.button_search,this.button_export,this.button_donwload],this.chart_father={chart:null},this.datesRange={start_date:null,end_date:null},this.loadingCharts=!1,this.resultsLength=0,this.isLoadingResults=!0,this.isRateLimitReached=!1,this.timeoutID=null,this.moment.locale("es"),this.allowFilters={end_date:1,start_date:1,roles:1,count_max_pines:1,count_min_pines:1,mode_library_or_book:1,count_max_libraries:1,count_min_libraries:1,countries:1,states:1,cities:1,schools:1,status:1,last_name:1,first_name:1,have_connect_days:1}}ngOnInit(){this.rxjsFilters=this.applyFiltersModeService.get$().subscribe(t=>{this.applyFilters(t)}),setTimeout(()=>{this.sizePanelService.changeSizePanel("2000px")},2e3)}ngAfterViewInit(){this.loadData(!0)}ngOnDestroy(){this.sizePanelService.changeSizePanel("lg"),this.rxjsFilters.unsubscribe()}searchItems(){this.timeoutID&&clearTimeout(this.timeoutID),this.timeoutID=setTimeout(()=>this.loadData(!0),1e3)}loadData(t=!1,e={}){t&&(this.paginator.pageIndex=0),e||(e={}),this.loadingCharts=!0,e.get_libraries_count=1,Object(Qt.a)(this.sort.sortChange,this.paginator.page).pipe(Object(Zt.a)({}),Object(Vt.a)(()=>(e.sort=this.sort.active,e.order=this.sort.direction,e.page=this.paginator.pageIndex+1,e.q=this.queryText,this.isLoadingResults=!0,this.reportUserService.getInformation(e).pipe(Object(Xt.a)(()=>Object(Wt.a)(null))))),Object(Jt.a)(t=>(this.isLoadingResults=!1,this.isRateLimitReached=null===t,null===t?[]:(this.datesRange.start_date=t.start_date,this.datesRange.end_date=t.end_date,this.loadGraficoGeneral(t.report_months.map(t=>t.date_format),t.report_months.map(t=>t.count)),this.loadingCharts=!1,this.resultsLength=t.total_pg,this.pageSize=t.page_size,t.items)))).subscribe(t=>this.data=t)}delete(t){return Object(xt.b)(this,void 0,void 0,(function*(){const e=yield this.alertController.create({header:"Eliminar",message:"\xbfDesea eliminar este usuario?",buttons:[{text:"Cancelar",role:"cancel"},{text:"Eliminar",role:"destructive",handler:()=>{this.userService.delete(t.uuid).subscribe(t=>{this.loadData(!0),this.toastService.presentToast(t.message,t.status)},t=>{this.controlErroresService.control(t)})}}]});yield e.present()}))}showInformation(t){return Object(xt.b)(this,void 0,void 0,(function*(){const e=yield this.modalCtrl.create({component:pn,cssClass:"modal-fullscreen-100",swipeToClose:!0,componentProps:{user_search:t,required_show_templates:{books:1,courses:1,libraries:1}}});yield e.present(),yield e.onWillDismiss()}))}changePassword(t){return Object(xt.b)(this,void 0,void 0,(function*(){const e=yield this.alertController.create({cssClass:"",header:"Cambiar contrase\xf1a",inputs:[{name:"password",type:"password",placeholder:"Contrase\xf1a"}],buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:()=>{}},{text:"Cambiar",handler:e=>{this.userService.changePassword({password:e.password,id:t.uuid}).subscribe(t=>{this.toastService.presentToast(t.message,t.status)},t=>{this.controlErroresService.control(t)})}}]});yield e.present()}))}applyFilters(t){if(!t)return!1;if(!t.mode||!t.filters)return!1;switch(t.mode){case"search":this.loadData(!0,t.filters);break;case"download":this.downloadData(t.filters);break;case"export":this.exportData(t.filters)}}openModalStadistics(){return Object(xt.b)(this,void 0,void 0,(function*(){const t=yield this.modalCtrl.create({component:Ln,cssClass:"modal-fullscreen-100",swipeToClose:!0,componentProps:{}});yield t.present(),yield t.onWillDismiss()}))}exportData(t={}){this.button_export.disabled=!0,this.loading=!0,this.reportUserService.exportData(t).subscribe(t=>{this.loading=!1,this.button_export.disabled=!1;const e=new Blob([t],{type:t.type});var n=this.toExportFileName("Listado de usuarios","xlsx");Object(b.saveAs)(e,n)},t=>{this.button_export.disabled=!1,this.controlErroresService.control(t),this.loading=!1})}downloadData(t={}){this.button_donwload.disabled=!0,this.loading=!0,this.reportUserService.downloadData(t).subscribe(t=>{this.loading=!1;const e=new Blob([t],{type:t.type});var n=this.toExportFileName("Listado de usuarios","pdf");this.button_donwload.disabled=!1,Object(b.saveAs)(e,n)},t=>{this.button_donwload.disabled=!1,this.controlErroresService.control(t),this.loading=!1})}toExportFileName(t,e){return`${t}_${(new Date).getTime()}.${e}`}loadGraficoGeneral(t,e){null!=this.chart_father.chart&&this.chart_father.chart.destroy(),this.chart_father.chart=new r.a("chart_father_report",{type:"line",data:{labels:t,datasets:[{label:this.datesRange.start_date+" - "+this.datesRange.end_date,data:e,backgroundColor:"rgba(0, 156, 224, 1)",borderColor:"rgba(0, 156, 224, 1)",borderWidth:1}]},options:{scales:{y:{beginAtZero:!0}}}}),this.chart_father.chart.update()}}return t.\u0275fac=function(e){return new(e||t)(g.ac(h.a),g.ac(l.a),g.ac(f),g.ac(On.a),g.ac(i.b),g.ac(te.a),g.ac(Kt),g.ac(i.Db),g.ac(a.f))},t.\u0275cmp=g.Ub({type:t,selectors:[["app-users-reports-admin"]],viewQuery:function(t,e){var n;1&t&&(g.ld(Ut.a,!0),g.ld(Nt.a,!0)),2&t&&(g.Nc(n=g.pc())&&(e.paginator=n.first),g.Nc(n=g.pc())&&(e.sort=n.first))},decls:69,vars:27,consts:[["translucent","true"],["slot","start",4,"ngIf"],[4,"ngIf"],["showCancelButton","always",3,"ngModel","placeholder","ngModelChange","ionChange","ionCancel",4,"ngIf"],["slot","end"],[3,"matTooltip","click",4,"ngIf"],[3,"click",4,"ngIf"],["mode","indeterminate",4,"ngIf"],["fullscreen","true",3,"scrollbar"],[3,"required","buttons"],[1,"mt-2","no-padding-small-500"],["hideToggle","",3,"expanded"],[2,"padding","0"],[2,"width","100%"],["name","bar-chart-outline"],[1,"padding-small-sm"],["size","12","size-sm","6",2,"margin","0 auto"],[3,"count","all_width",4,"ngIf"],[3,"ngClass"],[3,"id"],[1,"example-container","mat-elevation-z8","scroll-div-content"],["class","example-loading-shade",4,"ngIf"],[1,"example-table-container"],["tabindex","0",1,"example-container","mat-elevation-z8"],["mat-table","","matSort","","matSortActive","created_at","matSortDisableClear","","matSortDirection","asc",1,"example-table",3,"dataSource"],["matColumnDef","last_name","sticky",""],["mat-header-cell","","mat-sort-header","","class","text-center",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","first_name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","","style","padding-right: 20px;",4,"matCellDef"],["matColumnDef","email"],["matColumnDef","role"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","pines_availables_count"],["class","text-center","mat-cell","","style","padding-right: 20px;",4,"matCellDef"],["matColumnDef","pines_expired_count"],["matColumnDef","libraries_count"],["matColumnDef","created_at"],["mat-header-cell","","mat-sort-header","","disableClear","",4,"matHeaderCellDef"],["matColumnDef","status"],["mat-header-cell","","disableClear","",4,"matHeaderCellDef"],["matColumnDef","last_activity"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["aria-label","Resultados",3,"length","pageSize"],["slot","start"],["showCancelButton","always",3,"ngModel","placeholder","ngModelChange","ionChange","ionCancel"],[3,"matTooltip","click"],[3,"click"],["slot","icon-only","name","search"],["mode","indeterminate"],[3,"count","all_width"],[1,"example-loading-shade"],["mat-header-cell","","mat-sort-header","",1,"text-center"],["mat-cell",""],[1,"w-10","h-10","flex-none","image-fit"],["alt","--",1,"rounded-full",3,"src"],[1,"ml-3"],[1,"font-medium"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",2,"padding-right","20px"],["mat-header-cell",""],["style","padding-right: 20px;",4,"ngFor","ngForOf"],[2,"padding-right","20px"],["mat-cell","",1,"text-center",2,"padding-right","20px"],["mat-header-cell","","mat-sort-header","","disableClear",""],["mat-header-cell","","disableClear",""],[1,"badge",3,"ngClass"],[1,"button-sm-custom",3,"matTooltip","click"],["color","primary","name","person-outline"],["color","warning","name","lock-closed-outline"],["class","button-sm-custom",3,"matTooltip","click",4,"ngIf"],["color","danger","name","trash-outline"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(g.gc(0,"ion-header",0),g.gc(1,"ion-toolbar"),g.cd(2,Sn,2,0,"ion-buttons",1),g.cd(3,In,3,3,"ion-title",2),g.cd(4,Dn,2,4,"ion-searchbar",3),g.gc(5,"ion-buttons",4),g.cd(6,zn,3,3,"ion-button",5),g.cd(7,qn,2,0,"ion-button",6),g.fc(),g.fc(),g.cd(8,Fn,1,0,"mat-progress-bar",7),g.fc(),g.gc(9,"ion-content",8),g.bc(10,"filters-users",9),g.gc(11,"ion-card",10),g.gc(12,"mat-expansion-panel",11),g.gc(13,"mat-expansion-panel-header",12),g.gc(14,"mat-panel-title"),g.gc(15,"ion-item",13),g.bc(16,"ion-icon",14),g.ed(17),g.tc(18,"translate"),g.tc(19,"translate"),g.fc(),g.fc(),g.fc(),g.gc(20,"ion-card-content",15),g.gc(21,"ion-grid"),g.gc(22,"ion-row"),g.gc(23,"ion-col",16),g.cd(24,Bn,1,2,"card-load-animation",17),g.gc(25,"div",18),g.gc(26,"canvas",19),g.ed(27),g.fc(),g.fc(),g.fc(),g.fc(),g.fc(),g.fc(),g.fc(),g.fc(),g.gc(28,"div",20),g.cd(29,Rn,2,1,"div",21),g.gc(30,"div",22),g.gc(31,"section",23),g.gc(32,"table",24),g.ec(33,25),g.cd(34,$n,3,3,"th",26),g.cd(35,En,7,2,"td",27),g.dc(),g.ec(36,28),g.cd(37,Yn,3,3,"th",29),g.cd(38,Hn,3,1,"td",30),g.dc(),g.ec(39,31),g.cd(40,jn,3,3,"th",29),g.cd(41,Gn,2,1,"td",30),g.dc(),g.ec(42,32),g.cd(43,Un,3,3,"th",33),g.cd(44,Qn,2,1,"td",27),g.dc(),g.ec(45,34),g.cd(46,Wn,3,3,"th",29),g.cd(47,Zn,2,1,"td",35),g.dc(),g.ec(48,36),g.cd(49,Vn,3,3,"th",29),g.cd(50,Xn,2,1,"td",35),g.dc(),g.ec(51,37),g.cd(52,Jn,3,3,"th",29),g.cd(53,Kn,2,1,"td",35),g.dc(),g.ec(54,38),g.cd(55,to,3,3,"th",39),g.cd(56,eo,2,1,"td",30),g.dc(),g.ec(57,40),g.cd(58,no,3,3,"th",41),g.cd(59,oo,3,2,"td",30),g.dc(),g.ec(60,42),g.cd(61,co,3,3,"th",39),g.cd(62,ao,2,1,"td",30),g.dc(),g.ec(63,43),g.cd(64,ro,3,3,"th",41),g.cd(65,lo,8,7,"td",30),g.dc(),g.cd(66,go,1,0,"tr",44),g.cd(67,uo,1,0,"tr",45),g.fc(),g.fc(),g.fc(),g.bc(68,"mat-paginator",46),g.fc(),g.fc()),2&t&&(g.Lb(2),g.Ac("ngIf",!e.showSearchbar),g.Lb(1),g.Ac("ngIf",!e.showSearchbar),g.Lb(1),g.Ac("ngIf",e.showSearchbar),g.Lb(2),g.Ac("ngIf",!e.showSearchbar),g.Lb(1),g.Ac("ngIf",!e.showSearchbar),g.Lb(1),g.Ac("ngIf",e.loading),g.Lb(1),g.Bc("scrollbar",e.scrollbarStyle),g.Lb(1),g.Ac("required",e.allowFilters)("buttons",e.buttons_filters),g.Lb(2),g.Ac("expanded",!0),g.Lb(5),g.hd(" ",g.uc(18,23,"forms.graph")," - ",g.uc(19,25,"forms.users_per_month")," "),g.Lb(7),g.Ac("ngIf",e.loading||e.loadingCharts&&null==e.chart_father.chart),g.Lb(1),g.Ac("ngClass",e.loading||null==e.chart_father.chart||e.data&&0==e.data.length?"d-none":""),g.Lb(1),g.Ac("id","chart_father_report"),g.Lb(1),g.fd(e.chart_father.chart),g.Lb(2),g.Ac("ngIf",e.isLoadingResults||e.isRateLimitReached),g.Lb(3),g.Ac("dataSource",e.data),g.Lb(34),g.Ac("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",!0),g.Lb(1),g.Ac("matRowDefColumns",e.displayedColumns),g.Lb(1),g.Ac("length",e.resultsLength)("pageSize",e.pageSize))},directives:[i.B,i.zb,o.t,i.l,i.u,p.b,et,i.m,m.c,m.g,m.h,i.H,i.C,i.n,i.A,i.gb,i.t,o.q,Pn.n,Nt.a,Pn.c,Pn.i,Pn.b,Pn.k,Pn.m,Ut.a,i.R,i.xb,i.hb,i.Mb,c.r,c.u,i.k,ne.a,nt.a,ot.a,An.c,Pn.h,Nt.b,Pn.a,o.s,Pn.j,Pn.l],pipes:[P.d],styles:[".example-table-container[_ngcontent-%COMP%]{position:relative;height:73vh;overflow:auto}table[_ngcontent-%COMP%]{width:100%}.example-loading-shade[_ngcontent-%COMP%]{position:absolute;top:0;left:0;bottom:56px;right:0;background:rgba(0,0,0,.15);z-index:1;display:flex;align-items:center;justify-content:center}.example-rate-limit-reached[_ngcontent-%COMP%]{max-width:360px;text-align:center}.mat-column-number[_ngcontent-%COMP%], .mat-column-state[_ngcontent-%COMP%]{max-width:64px}.mat-column-created[_ngcontent-%COMP%]{max-width:124px}.button-sm-custom[_ngcontent-%COMP%]{width:25px;border-color:transparent;font-size:18px;height:28px;background-color:transparent}.badge-ng-pers[_ngcontent-%COMP%]{padding:3px 5px;border-radius:5px}.color-inactive[_ngcontent-%COMP%]{color:#fff;background:#ff9f22}.color-active[_ngcontent-%COMP%]{color:#fff;background:#47c100}.color-disabled[_ngcontent-%COMP%]{color:#000;background:#868686}.color-block[_ngcontent-%COMP%]{color:#000;background:#d2d2d2}.color-deleted[_ngcontent-%COMP%]{color:#fff;background:#ff1515}[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px;height:9px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb, [_ngcontent-%COMP%]::-webkit-scrollbar-track{box-shadow:inset 0 0 6px var(--ion-color-primary,#3880ff);border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#41a3ac}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:window-inactive{background-color:#41a3ac}"]}),t})();function bo(t,e){1&t&&(g.gc(0,"ion-buttons",37),g.bc(1,"ion-menu-button"),g.fc())}function ho(t,e){1&t&&(g.gc(0,"ion-title"),g.ed(1),g.tc(2,"translate"),g.fc()),2&t&&(g.Lb(1),g.fd(g.uc(2,1,"pages.reports.users_library_reports")))}function po(t,e){if(1&t){const t=g.hc();g.gc(0,"ion-searchbar",38),g.oc("ngModelChange",(function(e){return g.Sc(t),g.sc().queryText=e}))("ionChange",(function(){return g.Sc(t),g.sc().searchItems(!0)}))("ionCancel",(function(){return g.Sc(t),g.sc().showSearchbar=!1})),g.tc(1,"translate"),g.fc()}if(2&t){const t=g.sc();g.Bc("placeholder",g.uc(1,2,"forms.search")),g.Ac("ngModel",t.queryText)}}function mo(t,e){if(1&t){const t=g.hc();g.gc(0,"ion-button",39),g.oc("click",(function(){return g.Sc(t),g.sc().openModalStadistics()})),g.tc(1,"translate"),g.bc(2,"ion-icon",40),g.fc()}2&t&&g.Ac("matTooltip",g.uc(1,1,"pages.reports.data_activity_graph"))}function _o(t,e){if(1&t){const t=g.hc();g.gc(0,"ion-button",41),g.oc("click",(function(){return g.Sc(t),g.sc().showSearchbar=!0})),g.bc(1,"ion-icon",42),g.fc()}}function vo(t,e){1&t&&g.bc(0,"mat-progress-bar",43)}function xo(t,e){1&t&&g.bc(0,"mat-spinner")}function Co(t,e){if(1&t&&(g.gc(0,"div",44),g.cd(1,xo,1,0,"mat-spinner",2),g.fc()),2&t){const t=g.sc();g.Lb(1),g.Ac("ngIf",t.isLoadingResults)}}function yo(t,e){1&t&&(g.gc(0,"th",45),g.ed(1),g.tc(2,"translate"),g.fc()),2&t&&(g.Lb(1),g.fd(g.uc(2,1,"pages.reports.last_name")))}function ko(t,e){if(1&t&&(g.gc(0,"td",46),g.gc(1,"ion-item"),g.gc(2,"div",47),g.bc(3,"img",48),g.fc(),g.gc(4,"div",49),g.gc(5,"span",50),g.ed(6),g.fc(),g.fc(),g.fc(),g.fc()),2&t){const t=e.$implicit,n=g.sc();g.Lb(3),g.Ac("src",null!=t&&null!=t.information?t.information.image_url:n.profile_img_route,g.Vc),g.Lb(3),g.gd("",t.last_name," ")}}function wo(t,e){1&t&&(g.gc(0,"th",51),g.ed(1),g.tc(2,"translate"),g.fc()),2&t&&(g.Lb(1),g.fd(g.uc(2,1,"pages.reports.first_name")))}function Mo(t,e){if(1&t&&(g.gc(0,"td",52),g.gc(1,"span",50),g.ed(2),g.fc(),g.fc()),2&t){const t=e.$implicit;g.Lb(2),g.gd(" ",t.first_name," ")}}function Lo(t,e){1&t&&(g.gc(0,"th",51),g.ed(1),g.tc(2,"translate"),g.fc()),2&t&&(g.Lb(1),g.fd(g.uc(2,1,"pages.reports.email")))}function Oo(t,e){if(1&t&&(g.gc(0,"td",52),g.ed(1),g.fc()),2&t){const t=e.$implicit;g.Lb(1),g.fd(t.email)}}function Po(t,e){1&t&&(g.gc(0,"th",53),g.ed(1),g.tc(2,"translate"),g.fc()),2&t&&(g.Lb(1),g.fd(g.uc(2,1,"pages.reports.type_user")))}function Ao(t,e){if(1&t&&(g.gc(0,"span",55),g.ed(1),g.fc()),2&t){const t=e.$implicit;g.Lb(1),g.fd(t.description)}}function So(t,e){if(1&t&&(g.gc(0,"td",46),g.cd(1,Ao,2,1,"span",54),g.fc()),2&t){const t=e.$implicit;g.Lb(1),g.Ac("ngForOf",t.roles)}}function Io(t,e){1&t&&(g.gc(0,"th",51),g.ed(1),g.tc(2,"translate"),g.fc()),2&t&&(g.Lb(1),g.gd("",g.uc(2,1,"pages.reports.libraries_count")," "))}function Do(t,e){if(1&t&&(g.gc(0,"td",56),g.ed(1),g.fc()),2&t){const t=e.$implicit;g.Lb(1),g.gd(" ",t.libraries_count,"")}}function zo(t,e){1&t&&(g.gc(0,"th",51),g.ed(1),g.tc(2,"translate"),g.fc()),2&t&&(g.Lb(1),g.fd(g.uc(2,1,"pages.reports.libraries_actives_count")))}function qo(t,e){if(1&t&&(g.gc(0,"td",56),g.ed(1),g.fc()),2&t){const t=e.$implicit;g.Lb(1),g.gd(" ",t.libraries_actives_count,"")}}function Fo(t,e){1&t&&(g.gc(0,"th",51),g.ed(1),g.tc(2,"translate"),g.fc()),2&t&&(g.Lb(1),g.gd("",g.uc(2,1,"pages.reports.libraries_inactives_count")," "))}function Bo(t,e){if(1&t&&(g.gc(0,"td",56),g.ed(1),g.fc()),2&t){const t=e.$implicit;g.Lb(1),g.gd(" ",t.libraries_inactives_count,"")}}function To(t,e){1&t&&(g.gc(0,"th",57),g.ed(1),g.tc(2,"translate"),g.fc()),2&t&&(g.Lb(1),g.gd(" ",g.uc(2,1,"pages.reports.created_at")," "))}function Ro(t,e){if(1&t&&(g.gc(0,"td",52),g.ed(1),g.fc()),2&t){const t=e.$implicit,n=g.sc();g.Lb(1),g.gd(" ",n.moment(t.date_created).format("DD/MMMM/YYYY"),"")}}function $o(t,e){1&t&&(g.gc(0,"th",58),g.ed(1),g.tc(2,"translate"),g.fc()),2&t&&(g.Lb(1),g.gd(" ",g.uc(2,1,"statuses.status")," "))}function Eo(t,e){if(1&t&&(g.gc(0,"td",52),g.gc(1,"span",59),g.ed(2),g.fc(),g.fc()),2&t){const t=e.$implicit;g.Lb(1),g.Ac("ngClass"," badge-ng-pers color-"+t.status),g.Lb(1),g.gd(" ",t.status_lang," ")}}function Yo(t,e){1&t&&(g.gc(0,"th",57),g.ed(1),g.tc(2,"translate"),g.fc()),2&t&&(g.Lb(1),g.gd(" ",g.uc(2,1,"pages.reports.last_activity")," "))}function Ho(t,e){if(1&t&&(g.gc(0,"span"),g.ed(1),g.fc()),2&t){const t=g.sc().$implicit,e=g.sc();g.Lb(1),g.gd(" ",e.moment(t.oneview.start_date).format("DD/MM/YYYY HH:mm")," ")}}function jo(t,e){if(1&t&&(g.gc(0,"td",52),g.cd(1,Ho,2,1,"span",2),g.fc()),2&t){const t=e.$implicit;g.Lb(1),g.Ac("ngIf",t.oneview)}}function Go(t,e){1&t&&(g.gc(0,"th",58),g.ed(1),g.tc(2,"translate"),g.fc()),2&t&&(g.Lb(1),g.gd(" ",g.uc(2,1,"pages.reports.actions")," "))}function Uo(t,e){if(1&t){const t=g.hc();g.gc(0,"button",60),g.oc("click",(function(){g.Sc(t);const e=g.sc().$implicit;return g.sc().delete(e)})),g.tc(1,"translate"),g.bc(2,"ion-icon",64),g.fc()}2&t&&g.Ac("matTooltip",g.uc(1,1,"buttons.delete"))}function No(t,e){if(1&t){const t=g.hc();g.gc(0,"td",52),g.gc(1,"button",60),g.oc("click",(function(){g.Sc(t);const n=e.$implicit;return g.sc().showInformation(n)})),g.tc(2,"translate"),g.bc(3,"ion-icon",61),g.fc(),g.gc(4,"button",60),g.oc("click",(function(){g.Sc(t);const n=e.$implicit;return g.sc().changePassword(n)})),g.tc(5,"translate"),g.bc(6,"ion-icon",62),g.fc(),g.cd(7,Uo,3,3,"button",63),g.fc()}if(2&t){const t=e.$implicit;g.Lb(1),g.Ac("matTooltip",g.uc(2,3,"pages.reports.information")),g.Lb(3),g.Ac("matTooltip",g.uc(5,5,"pages.reports.change-password")),g.Lb(3),g.Ac("ngIf",1!=t.is_protected)}}function Qo(t,e){1&t&&g.bc(0,"tr",65)}function Wo(t,e){1&t&&g.bc(0,"tr",66)}r.a.register(...r.b);const Zo=[{path:"",redirectTo:"users",pathMatch:"full"},{path:"users",component:fo},{path:"books",component:Gt},{path:"books/:uuid",component:Gt},{path:"account-library",component:(()=>{class t{constructor(t,e,n,o,c,i,a,r){this.applyFiltersModeService=t,this.controlErroresService=e,this.reportUserService=n,this.alertController=o,this.toastService=c,this.userService=i,this.modalCtrl=a,this.router=r,this.showSearchbar=!1,this.scrollbarStyle=s.a.scrollbarStyle,this.pageSize=1,this.displayedColumns=["last_name","first_name","email","role","libraries_count","libraries_actives_count","libraries_inactives_count","last_activity","created_at","status","actions"],this.data=[],this.profile_img_route="/assets/images/profile-8.jpg",this.loading=!1,this.moment=_,this.queryText="",this.roles=[],this.button_donwload={color:"danger",size:"small",mode:"download",icon:"cloud-download-outline",disabled:!1,title:"buttons.download"},this.button_export={color:"success",size:"small",mode:"export",icon:"download-outline",disabled:!1,title:"buttons.export"},this.button_search={color:"warning",size:"small",mode:"search",disabled:!1,title:"buttons.search",icon:"search-outline"},this.buttons_filters=[this.button_search],this.chart_father={chart:null},this.datesRange={start_date:null,end_date:null},this.loadingCharts=!1,this.resultsLength=0,this.isLoadingResults=!0,this.isRateLimitReached=!1,this.timeoutID=null,this.moment.locale("es"),this.allowFilters={end_date:1,start_date:1,roles:1,count_max_libraries:1,count_min_libraries:1,countries:1,states:1,cities:1,schools:1,status:1,last_name:1,first_name:1,have_connect_days:1}}ngOnInit(){this.applyFiltersModeService.get$().subscribe(t=>{this.applyFilters(t)})}ngAfterViewInit(){this.loadData(!0)}searchItems(){this.timeoutID&&clearTimeout(this.timeoutID),this.timeoutID=setTimeout(()=>this.loadData(!0),1e3)}loadData(t=!1,e={}){t&&(this.paginator.pageIndex=0),e||(e={}),e.get_libraries_count=1,e.get_allow_libraries_count=1,this.loadingCharts=!0,Object(Qt.a)(this.sort.sortChange,this.paginator.page).pipe(Object(Zt.a)({}),Object(Vt.a)(()=>(e.sort=this.sort.active,e.order=this.sort.direction,e.page=this.paginator.pageIndex+1,e.q=this.queryText,this.isLoadingResults=!0,this.reportUserService.getInformation(e).pipe(Object(Xt.a)(()=>Object(Wt.a)(null))))),Object(Jt.a)(t=>(this.isLoadingResults=!1,this.isRateLimitReached=null===t,null===t?[]:(this.datesRange.start_date=t.start_date,this.datesRange.end_date=t.end_date,this.loadingCharts=!1,this.resultsLength=t.total_pg,this.pageSize=t.page_size,t.items)))).subscribe(t=>this.data=t)}delete(t){return Object(xt.b)(this,void 0,void 0,(function*(){const e=yield this.alertController.create({header:"Eliminar",message:"\xbfDesea eliminar este usuario?",buttons:[{text:"Cancelar",role:"cancel"},{text:"Eliminar",role:"destructive",handler:()=>{this.userService.delete(t.uuid).subscribe(t=>{this.loadData(!0),this.toastService.presentToast(t.message,t.status)},t=>{this.controlErroresService.control(t)})}}]});yield e.present()}))}showInformation(t){return Object(xt.b)(this,void 0,void 0,(function*(){const e=yield this.modalCtrl.create({component:pn,cssClass:"modal-fullscreen-100",swipeToClose:!0,componentProps:{user_search:t,required_show_templates:{libraries:1}}});yield e.present(),yield e.onWillDismiss()}))}changePassword(t){return Object(xt.b)(this,void 0,void 0,(function*(){const e=yield this.alertController.create({cssClass:"",header:"Cambiar contrase\xf1a",inputs:[{name:"password",type:"password",placeholder:"Contrase\xf1a"}],buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:()=>{}},{text:"Cambiar",handler:e=>{this.userService.changePassword({password:e.password,id:t.uuid}).subscribe(t=>{this.toastService.presentToast(t.message,t.status)},t=>{this.controlErroresService.control(t)})}}]});yield e.present()}))}applyFilters(t){if(!t)return!1;if(!t.mode||!t.filters)return!1;switch(t.mode){case"search":this.loadData(!0,t.filters)}}openModalStadistics(){return Object(xt.b)(this,void 0,void 0,(function*(){const t=yield this.modalCtrl.create({component:Ln,cssClass:"modal-fullscreen-100",swipeToClose:!0,componentProps:{}});yield t.present(),yield t.onWillDismiss()}))}}return t.\u0275fac=function(e){return new(e||t)(g.ac(h.a),g.ac(l.a),g.ac(f),g.ac(i.b),g.ac(te.a),g.ac(Kt),g.ac(i.Db),g.ac(a.f))},t.\u0275cmp=g.Ub({type:t,selectors:[["app-users-reports-library-admin"]],viewQuery:function(t,e){var n;1&t&&(g.ld(Ut.a,!0),g.ld(Nt.a,!0)),2&t&&(g.Nc(n=g.pc())&&(e.paginator=n.first),g.Nc(n=g.pc())&&(e.sort=n.first))},decls:52,vars:16,consts:[["translucent","true"],["slot","start",4,"ngIf"],[4,"ngIf"],["showCancelButton","always",3,"ngModel","placeholder","ngModelChange","ionChange","ionCancel",4,"ngIf"],["slot","end"],[3,"matTooltip","click",4,"ngIf"],[3,"click",4,"ngIf"],["mode","indeterminate",4,"ngIf"],["fullscreen","true",3,"scrollbar"],[3,"required","buttons"],[1,"example-container","mat-elevation-z8","scroll-div-content"],["class","example-loading-shade",4,"ngIf"],[1,"example-table-container"],["tabindex","0",1,"example-container","mat-elevation-z8"],["mat-table","","matSort","","matSortActive","created_at","matSortDisableClear","","matSortDirection","asc",1,"example-table",3,"dataSource"],["matColumnDef","last_name","sticky",""],["mat-header-cell","","mat-sort-header","","class","text-center",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","first_name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","","style","padding-right: 20px;",4,"matCellDef"],["matColumnDef","email"],["matColumnDef","role"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","libraries_count"],["class","text-center","mat-cell","","style","padding-right: 20px;",4,"matCellDef"],["matColumnDef","libraries_actives_count"],["matColumnDef","libraries_inactives_count"],["matColumnDef","created_at"],["mat-header-cell","","mat-sort-header","","disableClear","",4,"matHeaderCellDef"],["matColumnDef","status"],["mat-header-cell","","disableClear","",4,"matHeaderCellDef"],["matColumnDef","last_activity"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["aria-label","Resultados",3,"length","pageSize"],["slot","start"],["showCancelButton","always",3,"ngModel","placeholder","ngModelChange","ionChange","ionCancel"],[3,"matTooltip","click"],["name","bar-chart-outline"],[3,"click"],["slot","icon-only","name","search"],["mode","indeterminate"],[1,"example-loading-shade"],["mat-header-cell","","mat-sort-header","",1,"text-center"],["mat-cell",""],[1,"w-10","h-10","flex-none","image-fit"],["alt","--",1,"rounded-full",3,"src"],[1,"ml-3"],[1,"font-medium"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",2,"padding-right","20px"],["mat-header-cell",""],["style","padding-right: 20px;",4,"ngFor","ngForOf"],[2,"padding-right","20px"],["mat-cell","",1,"text-center",2,"padding-right","20px"],["mat-header-cell","","mat-sort-header","","disableClear",""],["mat-header-cell","","disableClear",""],[1,"badge",3,"ngClass"],[1,"button-sm-custom",3,"matTooltip","click"],["color","primary","name","person-outline"],["color","warning","name","lock-closed-outline"],["class","button-sm-custom",3,"matTooltip","click",4,"ngIf"],["color","danger","name","trash-outline"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(g.gc(0,"ion-header",0),g.gc(1,"ion-toolbar"),g.cd(2,bo,2,0,"ion-buttons",1),g.cd(3,ho,3,3,"ion-title",2),g.cd(4,po,2,4,"ion-searchbar",3),g.gc(5,"ion-buttons",4),g.cd(6,mo,3,3,"ion-button",5),g.cd(7,_o,2,0,"ion-button",6),g.fc(),g.fc(),g.cd(8,vo,1,0,"mat-progress-bar",7),g.fc(),g.gc(9,"ion-content",8),g.bc(10,"filters-users",9),g.gc(11,"div",10),g.cd(12,Co,2,1,"div",11),g.gc(13,"div",12),g.gc(14,"section",13),g.gc(15,"table",14),g.ec(16,15),g.cd(17,yo,3,3,"th",16),g.cd(18,ko,7,2,"td",17),g.dc(),g.ec(19,18),g.cd(20,wo,3,3,"th",19),g.cd(21,Mo,3,1,"td",20),g.dc(),g.ec(22,21),g.cd(23,Lo,3,3,"th",19),g.cd(24,Oo,2,1,"td",20),g.dc(),g.ec(25,22),g.cd(26,Po,3,3,"th",23),g.cd(27,So,2,1,"td",17),g.dc(),g.ec(28,24),g.cd(29,Io,3,3,"th",19),g.cd(30,Do,2,1,"td",25),g.dc(),g.ec(31,26),g.cd(32,zo,3,3,"th",19),g.cd(33,qo,2,1,"td",25),g.dc(),g.ec(34,27),g.cd(35,Fo,3,3,"th",19),g.cd(36,Bo,2,1,"td",25),g.dc(),g.ec(37,28),g.cd(38,To,3,3,"th",29),g.cd(39,Ro,2,1,"td",20),g.dc(),g.ec(40,30),g.cd(41,$o,3,3,"th",31),g.cd(42,Eo,3,2,"td",20),g.dc(),g.ec(43,32),g.cd(44,Yo,3,3,"th",29),g.cd(45,jo,2,1,"td",20),g.dc(),g.ec(46,33),g.cd(47,Go,3,3,"th",31),g.cd(48,No,8,7,"td",20),g.dc(),g.cd(49,Qo,1,0,"tr",34),g.cd(50,Wo,1,0,"tr",35),g.fc(),g.fc(),g.fc(),g.bc(51,"mat-paginator",36),g.fc(),g.fc()),2&t&&(g.Lb(2),g.Ac("ngIf",!e.showSearchbar),g.Lb(1),g.Ac("ngIf",!e.showSearchbar),g.Lb(1),g.Ac("ngIf",e.showSearchbar),g.Lb(2),g.Ac("ngIf",!e.showSearchbar),g.Lb(1),g.Ac("ngIf",!e.showSearchbar),g.Lb(1),g.Ac("ngIf",e.loading),g.Lb(1),g.Bc("scrollbar",e.scrollbarStyle),g.Lb(1),g.Ac("required",e.allowFilters)("buttons",e.buttons_filters),g.Lb(2),g.Ac("ngIf",e.isLoadingResults||e.isRateLimitReached),g.Lb(3),g.Ac("dataSource",e.data),g.Lb(34),g.Ac("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",!0),g.Lb(1),g.Ac("matRowDefColumns",e.displayedColumns),g.Lb(1),g.Ac("length",e.resultsLength)("pageSize",e.pageSize))},directives:[i.B,i.zb,o.t,i.l,i.u,p.b,et,Pn.n,Nt.a,Pn.c,Pn.i,Pn.b,Pn.k,Pn.m,Ut.a,i.R,i.xb,i.hb,i.Mb,c.r,c.u,i.k,ne.a,i.C,nt.a,An.c,Pn.h,Nt.b,Pn.a,i.H,o.s,o.q,Pn.j,Pn.l],pipes:[P.d],styles:[".example-table-container[_ngcontent-%COMP%]{position:relative;height:73vh;overflow:auto}table[_ngcontent-%COMP%]{width:100%}.example-loading-shade[_ngcontent-%COMP%]{position:absolute;top:0;left:0;bottom:56px;right:0;background:rgba(0,0,0,.15);z-index:1;display:flex;align-items:center;justify-content:center}.example-rate-limit-reached[_ngcontent-%COMP%]{max-width:360px;text-align:center}.mat-column-number[_ngcontent-%COMP%], .mat-column-state[_ngcontent-%COMP%]{max-width:64px}.mat-column-created[_ngcontent-%COMP%]{max-width:124px}.button-sm-custom[_ngcontent-%COMP%]{width:25px;border-color:transparent;font-size:18px;height:28px;background-color:transparent}.badge-ng-pers[_ngcontent-%COMP%]{padding:3px 5px;border-radius:5px}.color-inactive[_ngcontent-%COMP%]{color:#fff;background:#ff9f22}.color-active[_ngcontent-%COMP%]{color:#fff;background:#47c100}.color-disabled[_ngcontent-%COMP%]{color:#000;background:#868686}.color-block[_ngcontent-%COMP%]{color:#000;background:#d2d2d2}.color-deleted[_ngcontent-%COMP%]{color:#fff;background:#ff1515}[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px;height:9px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb, [_ngcontent-%COMP%]::-webkit-scrollbar-track{box-shadow:inset 0 0 6px var(--ion-color-primary,#3880ff);border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#41a3ac}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:window-inactive{background-color:#41a3ac}"]}),t})()},{path:"report-activities",component:vt}];let Vo=(()=>{class t{}return t.\u0275mod=g.Yb({type:t}),t.\u0275inj=g.Xb({factory:function(e){return new(e||t)},imports:[[a.j.forChild(Zo)],a.j]}),t})();var Xo=n("vvyD"),Jo=n("PdCO"),Ko=n("kRoH"),tc=n("1yaQ"),ec=n("H5xr");let nc=(()=>{class t{}return t.\u0275mod=g.Yb({type:t}),t.\u0275inj=g.Xb({factory:function(e){return new(e||t)},providers:[{provide:w.f,useValue:"es-EC"},{provide:Ko.f,useClass:tc.c,deps:[w.f,tc.a]},{provide:w.e,useValue:tc.b}],imports:[[o.c,c.l,i.Bb,Vo,c.B,Xo.a,Jo.b,p.a,P.c,k.b,O.c,St.a,ec.a]]}),t})()}}]);