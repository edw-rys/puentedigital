function _get(e,t,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=_superPropBase(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,o=_getPrototypeOf(e);if(t){var i=_getPrototypeOf(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _createForOfIteratorHelper(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,r=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return r=e.done,e},e:function(e){a=!0,c=e},f:function(){try{r||null==n.return||n.return()}finally{if(a)throw c}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{AkM1:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n("gI9T"))},LsbL:function(e,t,n){"use strict";n.r(t),n.d(t,"MainMenuPageModule",(function(){return Ys}));var o,i=n("ofXK"),c=n("3Pt+"),r=n("TEn/"),a=n("tyNb"),s=n("cxbk"),l=n("p9xo"),u=n("m8mU"),d=n("08BP"),g=n("Yc22"),f=n("Gs5E"),p=n("PkRB"),b=n("fXoL"),m=n("sYmb"),h=n("6f/U"),v=n("XNiG"),_=((o=function(){function e(){_classCallCheck(this,e),this.sendItem$=new v.a}return _createClass(e,[{key:"sendUuid",value:function(e){this.sendItem$.next(e)}},{key:"get$",value:function(){return this.sendItem$.asObservable()}}]),e}()).\u0275fac=function(e){return new(e||o)},o.\u0275prov=b.Wb({token:o,factory:o.\u0275fac,providedIn:"root"}),o),k=n("Qu3c"),y=n("MNQj"),C=n("6ZHP");function x(e,t){1&e&&(b.gc(0,"div",14),b.bc(1,"animation-loading-book",15),b.tc(2,"translate"),b.fc()),2&e&&(b.Lb(1),b.Ac("text",b.uc(2,1,"loading")))}function w(e,t){1&e&&b.bc(0,"show-book-animate",17),2&e&&b.Ac("book",t.$implicit)}function O(e,t){if(1&e&&(b.gc(0,"ion-card"),b.gc(1,"ion-card-header"),b.gc(2,"ion-card-title"),b.ed(3),b.tc(4,"translate"),b.fc(),b.fc(),b.gc(5,"ion-card-content"),b.cd(6,w,1,1,"show-book-animate",16),b.fc(),b.fc()),2&e){var n=b.sc();b.Lb(3),b.fd(b.uc(4,2,"pages.active_pin.books_activate")),b.Lb(3),b.Ac("ngForOf",n.books)}}var P,M,S=((M=function(){function e(t,n,o,i,c,r,a){_classCallCheck(this,e),this.pinesService=t,this.controlErrors=n,this.toastService=o,this.redirectService=i,this.translate=c,this.tourService=r,this.addBookEventService=a,this.form={code:"",mode:"book"},this.books=[],this.submitted={submit:!1}}return _createClass(e,[{key:"ngOnInit",value:function(){this.tourService.tour("clickAddPin")}},{key:"onActivePin",value:function(){var e=this;this.submitted.submit=!0,this.pinesService.active(this.form).subscribe((function(t){e.submitted.submit=!1,e.toastService.presentToast(t.message,t.status),t.data&&("book"==t.mode?(e.books.push(t.data),e.addBookEventService.sendUuid(t.data),e.redirectService.redirect("Redireccionando a mis libros",l.h.books,"info",1e3,{new_book:t.data.uuid})):"library"==t.mode&&e.redirectService.redirect("Redireccionando a la biblioteca",l.h.library_books+"/"+t.data.uuid))}),(function(t){e.submitted.submit=!1,e.controlErrors.control(t)}))}},{key:"enableTour",value:function(){this.tourService.tour("clickAddPin",!0)}}]),e}()).\u0275fac=function(e){return new(e||M)(b.ac(d.a),b.ac(u.a),b.ac(p.a),b.ac(f.a),b.ac(m.e),b.ac(g.a),b.ac(_))},M.\u0275cmp=b.Ub({type:M,selectors:[["app-activate-pin"]],decls:30,vars:22,consts:[["size","small"],["size","small",3,"matTooltip","click"],["name","book-outline"],["autocomplete","off",3,"ngSubmit"],[1,"btn-create-c"],["size","small",3,"color","click"],[2,"margin-left","5px"],["name","library-outline"],[1,"intro-x","mt-8",2,"display","flex"],["type","text","name","code",1,"pin-input","intro-x","login__input","form-control","py-3","px-4","border-gray-300","block",3,"ngModel","disabled","placeholder","ngModelChange"],["type","submit",1,"btn-active-pin",3,"disabled"],["name","key-outline"],["style","margin-top: 150px;display: flex;justify-content: center;",4,"ngIf"],[4,"ngIf"],[2,"margin-top","150px","display","flex","justify-content","center"],[3,"text"],[3,"book",4,"ngFor","ngForOf"],[3,"book"]],template:function(e,t){1&e&&(b.gc(0,"div"),b.gc(1,"ion-card"),b.gc(2,"ion-card-header"),b.gc(3,"ion-card-title"),b.gc(4,"ion-button",0),b.ed(5),b.tc(6,"translate"),b.fc(),b.gc(7,"ion-button",1),b.oc("click",(function(){return t.enableTour()})),b.tc(8,"translate"),b.bc(9,"ion-icon",2),b.fc(),b.fc(),b.fc(),b.gc(10,"ion-card-content"),b.gc(11,"form",3),b.oc("ngSubmit",(function(){return t.onActivePin()})),b.gc(12,"div",4),b.gc(13,"ion-button",5),b.oc("click",(function(){return t.form.mode="book",t.form.code=""})),b.bc(14,"ion-icon",2),b.gc(15,"ion-label",6),b.ed(16),b.tc(17,"translate"),b.fc(),b.fc(),b.gc(18,"ion-button",5),b.oc("click",(function(){return t.form.mode="library",t.form.code=""})),b.bc(19,"ion-icon",7),b.gc(20,"ion-label",6),b.ed(21),b.tc(22,"translate"),b.fc(),b.fc(),b.fc(),b.gc(23,"div",8),b.gc(24,"input",9),b.oc("ngModelChange",(function(e){return t.form.code=e})),b.tc(25,"translate"),b.fc(),b.gc(26,"ion-button",10),b.bc(27,"ion-icon",11),b.fc(),b.fc(),b.fc(),b.fc(),b.fc(),b.fc(),b.cd(28,x,3,3,"div",12),b.cd(29,O,7,4,"ion-card",13)),2&e&&(b.Lb(5),b.gd("",b.uc(6,12,"pages.active_pin.title")," "),b.Lb(2),b.Ac("matTooltip",b.uc(8,14,"buttons.tour")),b.Lb(6),b.Ac("color","book"==t.form.mode?"success":"light"),b.Lb(3),b.fd(b.uc(17,16,"menu.book")),b.Lb(2),b.Ac("color","library"==t.form.mode?"success":"light"),b.Lb(3),b.fd(b.uc(22,18,"menu.library")),b.Lb(3),b.Bc("placeholder",b.uc(25,20,"forms.title_add_pin")),b.Ac("ngModel",t.form.code)("disabled",t.submitted.submit),b.Lb(2),b.Ac("disabled",t.submitted.submit),b.Lb(2),b.Ac("ngIf",t.submitted.submit),b.Lb(1),b.Ac("ngIf",t.books.length>0))},directives:[r.m,r.o,r.q,r.k,k.a,r.C,r.n,c.H,c.s,c.t,r.N,c.c,c.r,c.u,i.t,y.a,i.s,C.a],pipes:[m.d],styles:[""]}),M),L=((P=function(){function e(t,n,o,i,c,r){_classCallCheck(this,e),this.pinesService=t,this.controlErrors=n,this.toastService=o,this.redirectService=i,this.translate=c,this.tourService=r,this.scrollbarStyle=s.a.scrollbarStyle,this.form={code:"",mode:"book"},this.books=[],this.submitted={submit:!1}}return _createClass(e,[{key:"ngOnInit",value:function(){this.tourService.tour("clickAddPin")}},{key:"onActivePin",value:function(){var e=this;this.submitted.submit=!0,this.pinesService.active(this.form).subscribe((function(t){e.submitted.submit=!1,e.toastService.presentToast(t.message,t.status),t.data&&("book"==t.mode?(e.books.push(t.data),e.redirectService.redirect("Redireccionando a mis libros",l.h.books,"info",1e3,{new_book:t.data.uuid})):"library"==t.mode&&e.redirectService.redirect("Redireccionando a la biblioteca",l.h.library_books+"/"+t.data.uuid))}),(function(t){e.submitted.submit=!1,e.controlErrors.control(t)}))}},{key:"enableTour",value:function(){this.tourService.tour("clickAddPin",!0)}}]),e}()).\u0275fac=function(e){return new(e||P)(b.ac(d.a),b.ac(u.a),b.ac(p.a),b.ac(f.a),b.ac(m.e),b.ac(g.a))},P.\u0275cmp=b.Ub({type:P,selectors:[["app-active-pin"]],decls:13,vars:4,consts:[["translucent","true"],["slot","start"],["fullscreen","true",3,"scrollbar"],["slot","end"]],template:function(e,t){1&e&&(b.gc(0,"ion-header",0),b.gc(1,"ion-toolbar"),b.gc(2,"ion-buttons",1),b.bc(3,"ion-menu-button"),b.fc(),b.gc(4,"ion-title"),b.ed(5),b.tc(6,"translate"),b.fc(),b.fc(),b.fc(),b.gc(7,"ion-content",2),b.bc(8,"app-activate-pin"),b.fc(),b.gc(9,"ion-footer",0),b.gc(10,"ion-toolbar"),b.gc(11,"ion-buttons",3),b.ed(12,"\xa92022 Ediciones Holgu\xedn"),b.fc(),b.fc(),b.fc()),2&e&&(b.Lb(5),b.fd(b.uc(6,2,"menu.active_pin")),b.Lb(2),b.Bc("scrollbar",t.scrollbarStyle))},directives:[r.B,r.zb,r.l,r.R,r.xb,r.u,h.b,S,r.z],pipes:[m.d],styles:[""]}),P),A=n("mrSG"),I=n("jK8c"),T=n("aa3j"),R=n("wd/R"),z=n("26IU"),E=n("zcoq"),F=n("A9QR"),j=n("oOf3");function B(e,t){1&e&&(b.gc(0,"ion-buttons",10),b.bc(1,"ion-menu-button"),b.fc())}function D(e,t){if(1&e){var n=b.hc();b.gc(0,"ion-button",12),b.oc("click",(function(){b.Sc(n);var e=t.$implicit;return b.sc(2).returnUrlBack(e)})),b.tc(1,"translate"),b.bc(2,"ion-icon",13),b.fc()}if(2&e){var o=t.$implicit;b.Ac("matTooltip",b.uc(1,2,o.tooltip)),b.Lb(2),b.Ac("name",o.icon)}}function U(e,t){if(1&e&&(b.gc(0,"ion-buttons",10),b.cd(1,D,3,4,"ion-button",11),b.fc()),2&e){var n=b.sc();b.Lb(1),b.Ac("ngForOf",n.returnList)}}function N(e,t){if(1&e&&(b.gc(0,"ion-title"),b.ed(1),b.tc(2,"translate"),b.tc(3,"translate"),b.fc()),2&e){var n=b.sc();b.Lb(1),b.fd(n.library?b.uc(2,1,"pages.book.library")+n.library.name:b.uc(3,3,"menu.my_books"))}}function q(e,t){if(1&e){var n=b.hc();b.gc(0,"ion-searchbar",14),b.oc("ngModelChange",(function(e){return b.Sc(n),b.sc().queryText=e}))("ionChange",(function(){return b.Sc(n),b.sc().searchBooksByText(!0)}))("ionCancel",(function(){return b.Sc(n),b.sc().showSearchbar=!1})),b.tc(1,"translate"),b.fc()}if(2&e){var o=b.sc();b.Bc("placeholder",b.uc(1,2,"forms.search")),b.Ac("ngModel",o.queryText)}}function H(e,t){if(1&e){var n=b.hc();b.gc(0,"ion-button",15),b.oc("click",(function(){return b.Sc(n),b.sc().showSearchbar=!0})),b.bc(1,"ion-icon",16),b.fc()}}function V(e,t){1&e&&(b.gc(0,"div",17),b.bc(1,"img",18),b.fc())}function Y(e,t){1&e&&(b.ec(0),b.bc(1,"books-animations",20),b.tc(2,"translate"),b.dc()),2&e&&(b.Lb(1),b.Ac("$text",b.uc(2,1,"pages.book.books_not_found")))}function X(e,t){1&e&&(b.ec(0),b.bc(1,"app-activate-pin",21),b.dc())}function Q(e,t){if(1&e&&(b.gc(0,"div",19),b.cd(1,Y,3,3,"ng-container",2),b.cd(2,X,2,0,"ng-container",2),b.fc()),2&e){var n=b.sc();b.Lb(1),b.Ac("ngIf",n.have_books),b.Lb(1),b.Ac("ngIf",!n.have_books)}}function G(e,t){1&e&&(b.gc(0,"span",43),b.ed(1),b.tc(2,"translate"),b.fc()),2&e&&(b.Lb(1),b.fd(b.uc(2,1,"pages.book.is_new")))}function W(e,t){if(1&e&&(b.gc(0,"div"),b.gc(1,"p",38),b.gc(2,"strong"),b.ed(3),b.tc(4,"translate"),b.fc(),b.ed(5),b.fc(),b.gc(6,"p",38),b.gc(7,"strong"),b.ed(8),b.tc(9,"translate"),b.fc(),b.ed(10),b.fc(),b.fc()),2&e){var n=b.sc().$implicit,o=b.sc(2);b.Lb(3),b.gd("",b.uc(4,4,"pages.book.expired_in"),": "),b.Lb(2),b.fd(o.moment(n.pin.date_expired).format("DD/MM/YYYY HH:mm")),b.Lb(3),b.gd("",b.uc(9,6,"pages.book.expired_in"),": "),b.Lb(2),b.fd(o.moment(n.pin.date_expired).fromNow())}}function K(e,t){if(1&e){var n=b.hc();b.gc(0,"ion-button",44),b.oc("click",(function(){b.Sc(n);var e=b.sc().$implicit;return b.sc(2).showBooksLinkeds(e.uuid)})),b.ed(1),b.tc(2,"translate"),b.fc()}2&e&&(b.Lb(1),b.fd(b.uc(2,1,"pages.book.book_links")))}var Z=function(e){return{backgroundImage:e,backgroundSize:"100% 100%"}};function J(e,t){if(1&e){var n=b.hc();b.gc(0,"ion-col",27),b.gc(1,"div",28),b.cd(2,G,3,3,"span",29),b.gc(3,"div",30),b.gc(4,"div",31),b.gc(5,"div",32),b.bc(6,"div",33),b.fc(),b.bc(7,"div",34),b.bc(8,"div",35),b.fc(),b.fc(),b.fc(),b.gc(9,"div",36),b.gc(10,"h3",37),b.ed(11),b.fc(),b.gc(12,"p",38),b.gc(13,"strong"),b.ed(14),b.tc(15,"translate"),b.fc(),b.ed(16),b.tc(17,"translate"),b.fc(),b.gc(18,"p",38),b.gc(19,"strong"),b.ed(20),b.tc(21,"translate"),b.fc(),b.ed(22),b.tc(23,"translate"),b.fc(),b.gc(24,"p",38),b.ed(25),b.fc(),b.cd(26,W,11,8,"div",2),b.gc(27,"ion-button",39),b.oc("click",(function(){b.Sc(n);var e=t.$implicit;return b.sc(2).showBookDetail(e.uuid)})),b.ed(28),b.tc(29,"translate"),b.fc(),b.gc(30,"ion-button",40),b.ed(31),b.tc(32,"translate"),b.fc(),b.gc(33,"ion-button",41),b.oc("click",(function(){b.Sc(n);var e=t.$implicit;return b.sc(2).openModalColaborar(e)})),b.ed(34),b.tc(35,"translate"),b.fc(),b.bc(36,"br"),b.cd(37,K,3,3,"ion-button",42),b.fc(),b.fc()}if(2&e){var o=t.$implicit,i=b.sc(2);b.Lb(2),b.Ac("ngIf",o.is_new&&"yes"==o.is_new),b.Lb(4),b.Ac("ngStyle",b.Fc(28,Z,"url("+o.portada+")")),b.Lb(5),b.fd(o.name),b.Lb(3),b.gd("",b.uc(15,14,"pages.book.author"),": "),b.Lb(2),b.fd(o.author||b.uc(17,16,"no_author")),b.Lb(4),b.gd("",b.uc(21,18,"pages.book.editorial"),": "),b.Lb(2),b.fd(o.editorial||b.uc(23,20,"no_editorial")),b.Lb(3),b.fd(o.periodo_escolar),b.Lb(1),b.Ac("ngIf",o.pin),b.Lb(2),b.fd(b.uc(29,22,"buttons.details")),b.Lb(2),b.Ac("href",i.route_book+o.uuid),b.Lb(1),b.fd(b.uc(32,24,"buttons.open")),b.Lb(3),b.fd(b.uc(35,26,"buttons.colaborar")),b.Lb(3),b.Ac("ngIf",o.book_links_count>0)}}var ee=function(e,t,n){return{id:"foo-paginate-book",itemsPerPage:e,currentPage:t,totalItems:n}};function te(e,t){if(1&e){var n=b.hc();b.gc(0,"div",22),b.gc(1,"ion-grid",23),b.gc(2,"ion-row",24),b.cd(3,J,38,30,"ion-col",25),b.tc(4,"paginate"),b.fc(),b.fc(),b.gc(5,"div",17),b.gc(6,"pagination-controls",26),b.oc("pageChange",(function(e){return b.Sc(n),b.sc().pageChanged(e)}))("pageBoundsCorrection",(function(e){return b.Sc(n),b.sc().pageChanged(e)})),b.tc(7,"translate"),b.tc(8,"translate"),b.tc(9,"translate"),b.tc(10,"translate"),b.tc(11,"translate"),b.fc(),b.fc(),b.fc()}if(2&e){var o=b.sc();b.Lb(3),b.Ac("ngForOf",b.vc(4,6,o.books,b.Hc(19,ee,o.pageSize,o.thisPage,o.totalItems))),b.Lb(3),b.Ac("previousLabel",b.uc(7,9,"paginate.previous"))("nextLabel",b.uc(8,11,"paginate.next"))("screenReaderPaginationLabel",b.uc(9,13,"paginate.pagination"))("screenReaderPageLabel",b.uc(10,15,"paginate.page"))("screenReaderCurrentLabel",b.uc(11,17,"paginate.in_your_page"))}}var ne,oe=((ne=function(){function e(t,n,o,i,c,r,a){var u=this;_classCallCheck(this,e),this.activeRoute=t,this.modalCtrl=n,this.booksService=o,this.routerOutlet=i,this.controlErroresService=c,this.redirectService=r,this.addBookEventService=a,this.scrollbarStyle=s.a.scrollbarStyle,this.queryText="",this.route_book=l.h.book,this.loadingBooks=!1,this.moment=R,this.library=null,this.have_books=!1,this.books=[],this.pageSize=9,this.thisPage=1,this.totalPages=0,this.totalItems=0,this.library_id=null,this.items=[],this.rxjsGlobal=null,this.returnList=[],this.can_return=!1,this.library_id=t.snapshot.params.library_id;try{this.new_book_id=t.snapshot.queryParams.new_book}catch(d){}this.moment.locale("es"),this.rxjsGlobal=this.addBookEventService.get$().subscribe((function(e){u.books.push(e),u.have_books=!0}))}return _createClass(e,[{key:"ngOnInit",value:function(){if(this.library_id&&this.loadLibrary(),this.loadBooks({page:this.thisPage,library_id:this.library_id},!0,!0,!0),this.library_id&&this.returnList.push({mode:"library",route:l.h.library,icon:"return-up-back-outline",tooltip:"buttons.return_library"}),this.activeRoute.snapshot.queryParams&&this.activeRoute.snapshot.queryParams.course&&this.activeRoute.snapshot.queryParams.course){this.course_id=this.activeRoute.snapshot.queryParams.course;var e=l.h.show_course_library;e=e.replace(":id",this.course_id).replace(":id",this.course_id),this.returnList.push({mode:"course",route:e,icon:"school-outline",tooltip:"buttons.return_course"})}}},{key:"loadLibrary",value:function(){var e=this;this.booksService.getLibrary(this.library_id).subscribe((function(t){e.library=t.data,e.have_books=!0}),(function(t){e.controlErroresService.control(t)}))}},{key:"ngOnDestroy",value:function(){this.rxjsGlobal.unsubscribe()}},{key:"loadBooks",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.loadingBooks=!0,n&&(this.books=[]),o&&(this.thisPage=1),this.new_book_id&&(t.new_book_id=this.new_book_id),console.log(this.new_book_id),this.booksService.getBooks(t).subscribe((function(t){t.data&&t.data.books&&t.data.books.data&&Array.isArray(t.data.books.data)&&(e.books=t.data.books.data,o&&(e.totalPages=t.data.books.last_page,e.totalItems=t.data.books.total,e.pageSize=t.data.number_paginate),t.data.books.data.length>=1&&i&&(e.have_books=!0)),e.loadingBooks=!1}),(function(t){e.loadingBooks=!1,e.controlErroresService.control(t)}))}},{key:"searchBooksByText",value:function(e){this.thisPage=1,this.loadBooks({page:this.thisPage,busqueda:this.queryText,library_id:this.library_id},e,!0)}},{key:"pageChanged",value:function(e){if(console.log(e),e==1/0)return!1;this.thisPage=e,this.loadBooks({page:this.thisPage,library_id:this.library_id},!0,!1)}},{key:"showBookDetail",value:function(e){return Object(A.b)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.modalCtrl.create({component:T.a,cssClass:"modal-fullscreen-100",swipeToClose:!0,presentingElement:this.routerOutlet.nativeEl,componentProps:{uuid:e}});case 2:return n=t.sent,t.next=5,n.present();case 5:case"end":return t.stop()}}),t,this)})))}},{key:"openModalColaborar",value:function(e){return Object(A.b)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.modalCtrl.create({component:E.a,cssClass:"modal-fullscreen-100",swipeToClose:!0,componentProps:{book:e}});case 2:return n=t.sent,t.next=5,n.present();case 5:case"end":return t.stop()}}),t,this)})))}},{key:"showBooksLinkeds",value:function(e){return Object(A.b)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.modalCtrl.create({component:z.a,cssClass:"modal-fullscreen-100",swipeToClose:!0,presentingElement:this.routerOutlet.nativeEl,componentProps:{uuid:e}});case 2:return n=t.sent,t.next=5,n.present();case 5:case"end":return t.stop()}}),t,this)})))}},{key:"returnUrlBack",value:function(e){var t=e.route;this.redirectService.redirect("null",t,"info",0)}}]),e}()).\u0275fac=function(e){return new(e||ne)(b.ac(a.a),b.ac(r.Db),b.ac(I.a),b.ac(r.fb),b.ac(u.a),b.ac(f.a),b.ac(_))},ne.\u0275cmp=b.Ub({type:ne,selectors:[["app-my-books"]],decls:16,vars:9,consts:[["translucent","true"],["slot","start",4,"ngIf"],[4,"ngIf"],["showCancelButton","always",3,"ngModel","placeholder","ngModelChange","ionChange","ionCancel",4,"ngIf"],["slot","end"],[3,"click",4,"ngIf"],["fullscreen","true",3,"scrollbar"],["class","flex flex-center",4,"ngIf"],["class","flex flex-center mt-4",4,"ngIf"],["class","main-wrapper",4,"ngIf"],["slot","start"],[3,"matTooltip","click",4,"ngFor","ngForOf"],[3,"matTooltip","click"],[3,"name"],["showCancelButton","always",3,"ngModel","placeholder","ngModelChange","ionChange","ionCancel"],[3,"click"],["slot","icon-only","name","search"],[1,"flex","flex-center"],["src","/assets/js/wow_book/loading.gif","alt","loading"],[1,"flex","flex-center","mt-4"],[3,"$text"],[1,"w-100"],[1,"main-wrapper"],[1,"grid-shuffle"],["id","grid",1,"row"],["size","12","size-sm","6","size-md","6","size-xl","4","class","book-item small-12 medium-6 columns","data-groups",'["classic"]',"data-date-created","1937","data-title","Of Mice and Men","data-color","var(--ion-color-primary)",4,"ngFor","ngForOf"],["id","foo-paginate-book","maxSize","9","directionLinks","true","autoHide","true","responsive","true",3,"previousLabel","nextLabel","screenReaderPaginationLabel","screenReaderPageLabel","screenReaderCurrentLabel","pageChange","pageBoundsCorrection"],["size","12","size-sm","6","size-md","6","size-xl","4","data-groups",'["classic"]',"data-date-created","1937","data-title","Of Mice and Men","data-color","var(--ion-color-primary)",1,"book-item","small-12","medium-6","columns"],[1,"bk-img"],["class","card-new-obj",4,"ngIf"],[1,"bk-wrapper"],[1,"bk-book","bk-bookdefault"],[1,"bk-front"],[1,"bk-cover",3,"ngStyle"],[1,"bk-back"],[1,"bk-left"],[1,"item-details","p-0"],[1,"book-item_title"],[1,"author"],["color","primary","size","small",3,"click"],["color","warning","size","small",3,"href"],["color","danger","size","small",3,"click"],["color","secondary","size","small",3,"click",4,"ngIf"],[1,"card-new-obj"],["color","secondary","size","small",3,"click"]],template:function(e,t){1&e&&(b.gc(0,"ion-header",0),b.gc(1,"ion-toolbar"),b.cd(2,B,2,0,"ion-buttons",1),b.cd(3,U,2,1,"ion-buttons",1),b.cd(4,N,4,5,"ion-title",2),b.cd(5,q,2,4,"ion-searchbar",3),b.gc(6,"ion-buttons",4),b.cd(7,H,2,0,"ion-button",5),b.fc(),b.fc(),b.fc(),b.gc(8,"ion-content",6),b.cd(9,V,2,0,"div",7),b.cd(10,Q,3,2,"div",8),b.cd(11,te,12,23,"div",9),b.fc(),b.gc(12,"ion-footer",0),b.gc(13,"ion-toolbar"),b.gc(14,"ion-buttons",4),b.ed(15,"\xa92022 Ediciones Holgu\xedn"),b.fc(),b.fc(),b.fc()),2&e&&(b.Lb(2),b.Ac("ngIf",!t.showSearchbar),b.Lb(1),b.Ac("ngIf",!t.showSearchbar),b.Lb(1),b.Ac("ngIf",!t.showSearchbar),b.Lb(1),b.Ac("ngIf",t.showSearchbar),b.Lb(2),b.Ac("ngIf",!t.showSearchbar),b.Lb(1),b.Bc("scrollbar",t.scrollbarStyle),b.Lb(1),b.Ac("ngIf",t.loadingBooks),b.Lb(1),b.Ac("ngIf",0==t.books.length&&!t.loadingBooks),b.Lb(1),b.Ac("ngIf",!t.loadingBooks))},directives:[r.B,r.zb,i.t,r.l,r.u,h.b,r.z,r.R,i.s,r.k,k.a,r.C,r.xb,r.hb,r.Mb,c.r,c.u,F.a,S,r.A,r.gb,j.c,r.t,i.w],pipes:[m.d,j.b],styles:['p[_ngcontent-%COMP%]:not(.author){font-size:15px;font-weight:300;line-height:1.4}p.author[_ngcontent-%COMP%]{margin-bottom:10px;letter-spacing:-1px;font-weight:400;color:var(--ion-color-medium-shade)}a.button[_ngcontent-%COMP%]{margin-bottom:0;padding:8px 14px;font-size:14px;font-weight:600;border-radius:3px;background-color:rgba(49,49,49,.5)}a.button[_ngcontent-%COMP%]:focus, a.button[_ngcontent-%COMP%]:hover{background-color:var(--ion-color-primary)}.page-header[_ngcontent-%COMP%]{position:relative;margin-bottom:55px;width:100%;border-bottom:1px solid #d2d6d5;background-color:#fff}@-webkit-keyframes anim-1{50%{opacity:0;transform:translate3d(1em,0,0)}51%{opacity:0;transform:translate3d(-1em,-40%,0)}to{opacity:1;transform:translate3d(0,-40%,0)}}@keyframes anim-1{50%{opacity:0;bottom:24px;transform:translate3d(5em,0,0)}51%{opacity:0;bottom:24px;transform:translate3d(-5em,-40%,0)}to{opacity:1;bottom:24px;transform:translate3d(0,-40%,0)}}.book-item[_ngcontent-%COMP%]{margin:15px 0;padding:15px;list-style-type:none}.book-item[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;right:15px;width:calc(100% - 105px);height:100%;border-radius:3px;box-shadow:0 0 0 0 transparent;z-index:-1;transition:all .25s ease-out}.book-item[_ngcontent-%COMP%]:hover:after{box-shadow:0 1px 1px 1px rgba(210,214,213,.5)}.book-item[_ngcontent-%COMP%]:hover   .item-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{box-shadow:0 0 10px 0 rgba(49,49,49,.25)}.book-item[_ngcontent-%COMP%]:hover   a.button[_ngcontent-%COMP%]{background-color:var(--ion-color-primary)}.book-item[_ngcontent-%COMP%]:hover   .bk-bookdefault[_ngcontent-%COMP%]{transform:rotateY(25deg)}.book-item[_ngcontent-%COMP%]:hover   .bk-back[_ngcontent-%COMP%]{opacity:1}.book-item[_ngcontent-%COMP%]   .item-img[_ngcontent-%COMP%]{display:inline-block;float:left;padding-right:30px}.book-item[_ngcontent-%COMP%]   .item-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{box-shadow:0 0 0 0 transparent;transition:all .25s ease-out}.book-item[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]{padding-right:30px}.book-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:not(.author){display:block;display:-webkit-box;height:63px;font-size:15px;line-height:1.4;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}.bk-img[_ngcontent-%COMP%]{display:inline-block;padding-right:30px;list-style:none}.bk-img[_ngcontent-%COMP%], .bk-img[_ngcontent-%COMP%]   .bk-wrapper[_ngcontent-%COMP%]{position:relative;float:left}.bk-img[_ngcontent-%COMP%]   .bk-wrapper[_ngcontent-%COMP%]{width:150px;height:215px;z-index:1;perspective:1400px}.bk-img[_ngcontent-%COMP%]   .bk-wrapper[_ngcontent-%COMP%]:last-child{margin-right:0}.bk-img[_ngcontent-%COMP%]   .bk-book[_ngcontent-%COMP%]{position:absolute;width:100%;height:215px;transform-style:preserve-3d;transition:transform .5s}.bk-img[_ngcontent-%COMP%]   .bk-book[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .bk-img[_ngcontent-%COMP%]   .bk-front[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:block;position:absolute}.bk-img[_ngcontent-%COMP%]   .bk-front[_ngcontent-%COMP%]{transform-style:preserve-3d;transform-origin:0 50%;transition:transform .5s;transform:translateZ(20px);z-index:10}.bk-img[_ngcontent-%COMP%]   .bk-front[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{z-index:1;-webkit-backface-visibility:hidden;backface-visibility:hidden;transform-style:preserve-3d;border-radius:0 3px 3px 0;box-shadow:inset 4px 0 10px rgba(0,0,0,.1)}.bk-img[_ngcontent-%COMP%]   .bk-front[_ngcontent-%COMP%]:after{content:"";position:absolute;top:1px;bottom:1px;left:-1px;width:1px}.bk-img[_ngcontent-%COMP%]   .bk-back[_ngcontent-%COMP%], .bk-img[_ngcontent-%COMP%]   .bk-front[_ngcontent-%COMP%], .bk-img[_ngcontent-%COMP%]   .bk-front[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:150px;height:215px}.bk-img[_ngcontent-%COMP%]   .bk-left[_ngcontent-%COMP%], .bk-img[_ngcontent-%COMP%]   .bk-right[_ngcontent-%COMP%]{width:40px;left:-20px}.bk-img[_ngcontent-%COMP%]   .bk-back[_ngcontent-%COMP%]{transform:rotateY(-180deg) translateZ(20px);box-shadow:5px 7px 15px rgba(0,0,0,.3);border-radius:3px 0 0 3px;opacity:0;transition:opacity .25s ease-out}.bk-img[_ngcontent-%COMP%]   .bk-back[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:10px;bottom:0;width:3px;background:rgba(0,0,0,.06);box-shadow:1px 0 3px hsla(0,0%,100%,.1)}.bk-img[_ngcontent-%COMP%]   .bk-left[_ngcontent-%COMP%]{height:215px;transform:rotateY(-90deg)}.bk-img[_ngcontent-%COMP%]   .bk-left[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{width:215px;height:40px;transform-origin:0 0;transform:rotate(90deg) translateY(-40px)}.bk-img[_ngcontent-%COMP%]   .bk-cover[_ngcontent-%COMP%]{background-position:10px 40px}.bk-img[_ngcontent-%COMP%]   .bk-cover[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:10px;bottom:0;width:3px;background:rgba(0,0,0,.06);box-shadow:1px 0 3px hsla(0,0%,100%,.1)}.bk-img[_ngcontent-%COMP%]   .bk-cover[_ngcontent-%COMP%]{background-repeat:no-repeat;background-position:0 0!important}.bk-img[_ngcontent-%COMP%]   .bk-front[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .bk-img[_ngcontent-%COMP%]   .bk-left[_ngcontent-%COMP%]{background-color:var(--ion-color-primary)}.main-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;display:none;background-color:rgba(49,49,49,.65)}.main-overlay[_ngcontent-%COMP%]   .overlay-full[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%}.main-overlay[_ngcontent-%COMP%]   .overlay-details[_ngcontent-%COMP%]{position:absolute;display:block;z-index:1;top:50%;left:50%;width:100%;max-width:800px;max-height:480px;padding:40px;overflow:hidden;border-radius:3px;background-color:#fff;box-shadow:0 2px 1px 2px rgba(0,0,0,.3);transform:translate(-50%,-50%)}.main-overlay[_ngcontent-%COMP%]   .overlay-image[_ngcontent-%COMP%]{display:inline-block;margin-right:30px;max-width:275px;vertical-align:top}.main-overlay[_ngcontent-%COMP%]   .overlay-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:relative;display:inline-block;z-index:1;box-shadow:-12px 12px 15px -5px rgba(0,0,0,.3)}.main-overlay[_ngcontent-%COMP%]   .overlay-image[_ngcontent-%COMP%]   .back-color[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:275px;height:100%;border-top-left-radius:3px;border-bottom-left-radius:3px;background-color:green}.main-overlay[_ngcontent-%COMP%]   .close-overlay-btn[_ngcontent-%COMP%]{position:absolute;top:15px;right:15px;width:30px;height:30px;opacity:.3;text-indent:-9999px;transition:opacity .25s ease-out}.main-overlay[_ngcontent-%COMP%]   .close-overlay-btn[_ngcontent-%COMP%]:hover{opacity:1}.main-overlay[_ngcontent-%COMP%]   .close-overlay-btn[_ngcontent-%COMP%]:after, .main-overlay[_ngcontent-%COMP%]   .close-overlay-btn[_ngcontent-%COMP%]:before{content:" ";position:absolute;left:15px;width:2px;height:33px;background-color:#313131}.main-overlay[_ngcontent-%COMP%]   .close-overlay-btn[_ngcontent-%COMP%]:before{transform:rotate(45deg)}.main-overlay[_ngcontent-%COMP%]   .close-overlay-btn[_ngcontent-%COMP%]:after{transform:rotate(-45deg)}.main-overlay[_ngcontent-%COMP%]   .back-preview-btn[_ngcontent-%COMP%]{position:absolute;top:7px;left:-34px;width:30px;height:30px;opacity:.3;text-indent:-9999px;transition:opacity .25s ease-out}.main-overlay[_ngcontent-%COMP%]   .back-preview-btn[_ngcontent-%COMP%]:hover{opacity:1}.main-overlay[_ngcontent-%COMP%]   .back-preview-btn[_ngcontent-%COMP%]:after, .main-overlay[_ngcontent-%COMP%]   .back-preview-btn[_ngcontent-%COMP%]:before{content:" ";position:absolute;left:15px;width:2px;height:15px;background-color:#313131}.main-overlay[_ngcontent-%COMP%]   .back-preview-btn[_ngcontent-%COMP%]:after{top:10px}.main-overlay[_ngcontent-%COMP%]   .back-preview-btn[_ngcontent-%COMP%]:before{transform:rotate(45deg)}.main-overlay[_ngcontent-%COMP%]   .back-preview-btn[_ngcontent-%COMP%]:after{transform:rotate(-45deg)}.main-overlay[_ngcontent-%COMP%]   .overlay-desc[_ngcontent-%COMP%]{display:inline-block;margin-top:-400px;width:calc(100% - 320px);vertical-align:top;transition:all .5s ease-out}.main-overlay[_ngcontent-%COMP%]   .overlay-desc.activated[_ngcontent-%COMP%]{display:inline-block;margin-top:0}.main-overlay[_ngcontent-%COMP%]   .overlay-preview[_ngcontent-%COMP%]{position:relative;display:inline-block;float:right;margin-top:40px;width:calc(100% - 310px);vertical-align:top;transition:all .5s ease-out}.main-overlay[_ngcontent-%COMP%]   .overlay-preview.activated[_ngcontent-%COMP%]{margin-top:-430px}.main-overlay[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]{padding-right:24px;padding-top:10px;display:block;display:-webkit-box;height:360px;font-size:15px;line-height:1.5;-webkit-line-clamp:16;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;overflow:scroll;text-overflow:clip;font-weight:400}.main-overlay[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], .main-overlay[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Roboto Slab,serif}.main-overlay[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-weight:700}.main-overlay[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:400}.main-overlay[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:40px;width:100%;height:30px;background:hsla(0,0%,100%,0);background:linear-gradient(0deg,hsla(0,0%,100%,0) 0,hsla(0,0%,100%,0) 0,hsla(0,0%,100%,.8) 30%,#fff 80%)}.main-overlay[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]:after{content:"";position:absolute;left:0;bottom:0;width:100%;height:50px;background:hsla(0,0%,100%,0);background:linear-gradient(180deg,hsla(0,0%,100%,0) 0,hsla(0,0%,100%,0) 0,hsla(0,0%,100%,.8) 30%,#fff 80%)}.overlay-details[_ngcontent-%COMP%]{display:none}#footer[_ngcontent-%COMP%]{margin-top:60px;padding:15px 0 20px;border-top:1px solid #fff;background-color:rgba(49,49,49,.5)}#footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], #footer[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], #footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;font-size:12px;text-align:center}.long-text[_ngcontent-%COMP%], .long-text[_ngcontent-%COMP%] > *[_ngcontent-%COMP%], .long-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .long-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] > *[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{white-space:normal!important;word-wrap:break-word!important}.card-new-obj[_ngcontent-%COMP%]{background:red;color:#fff;position:absolute;z-index:2;top:15px;padding:2px 5px;border-radius:5px;scale:1;-webkit-animation:scalenewtarget 2s infinite;animation:scalenewtarget 2s infinite;font-weight:800}@-webkit-keyframes scalenewtarget{0%{scale:1}50%{scale:1.15}to{scale:1}}@keyframes scalenewtarget{0%{scale:1}50%{scale:1.15}to{scale:1}}']}),ne),ie=n("w3oG");function ce(e,t){1&e&&b.bc(0,"library-loading-animation")}var re=function(e){return{"image-active":e}};function ae(e,t){if(1&e&&(b.gc(0,"div",20),b.gc(1,"p",21),b.gc(2,"strong"),b.ed(3,"Pin: "),b.fc(),b.ed(4),b.fc(),b.gc(5,"p",21),b.gc(6,"strong"),b.ed(7),b.tc(8,"translate"),b.fc(),b.ed(9),b.fc(),b.fc()),2&e){var n=t.$implicit,o=t.index,i=b.sc(2).$implicit,c=b.sc(2);b.Ac("ngClass",b.Fc(6,re,i.selectecIndex==o)),b.Lb(4),b.fd(n.pin),b.Lb(3),b.gd("",b.uc(8,4,"pages.book.expired_at"),": "),b.Lb(2),b.fd(c.moment(n.date_expired).format("DD/MM/YYYY"))}}var se=function(e){return{active:e}};function le(e,t){if(1&e){var n=b.hc();b.gc(0,"span",24),b.oc("click",(function(){b.Sc(n);var e=t.index,o=b.sc(3).$implicit;return b.sc(2).selectImage(o,e)})),b.fc()}if(2&e){var o=t.index,i=b.sc(3).$implicit;b.Ac("ngClass",b.Fc(1,se,i.selectecIndex==o))}}function ue(e,t){if(1&e&&(b.gc(0,"div",22),b.cd(1,le,1,3,"span",23),b.fc()),2&e){var n=b.sc(2).$implicit;b.Lb(1),b.Ac("ngForOf",n.pines)}}var de=function(e){return{disabled:e}};function ge(e,t){if(1&e){var n=b.hc();b.gc(0,"button",25),b.gc(1,"ion-icon",26),b.oc("click",(function(){b.Sc(n);var e=b.sc(2).$implicit;return b.sc(2).onPrevClick(e,0==e.selectecIndex)})),b.fc(),b.fc()}if(2&e){var o=b.sc(2).$implicit;b.Lb(1),b.Ac("ngClass",b.Fc(1,de,0==o.selectecIndex))}}function fe(e,t){if(1&e){var n=b.hc();b.gc(0,"button",27),b.gc(1,"ion-icon",28),b.oc("click",(function(){b.Sc(n);var e=b.sc(2).$implicit;return b.sc(2).onNextClick(e,e.pines.length-1==e.selectecIndex)})),b.fc(),b.fc()}if(2&e){var o=b.sc(2).$implicit;b.Lb(1),b.Ac("ngClass",b.Fc(1,de,o.pines.length-1==o.selectecIndex))}}function pe(e,t){if(1&e&&(b.gc(0,"div",15),b.cd(1,ae,10,8,"div",16),b.cd(2,ue,2,1,"div",17),b.cd(3,ge,2,3,"button",18),b.cd(4,fe,2,3,"button",19),b.fc()),2&e){var n=b.sc().$implicit;b.Lb(1),b.Ac("ngForOf",n.pines),b.Lb(1),b.Ac("ngIf",n.pines.length>1),b.Lb(1),b.Ac("ngIf",n.pines.length>1),b.Lb(1),b.Ac("ngIf",n.pines.length>1)}}var be=function(e){return{background:e,backgroundSize:"180px 255px"}};function me(e,t){if(1&e&&(b.gc(0,"ion-list",11),b.bc(1,"div",12),b.gc(2,"h3",13),b.gc(3,"strong"),b.ed(4),b.fc(),b.fc(),b.cd(5,pe,5,4,"div",14),b.fc()),2&e){var n=t.$implicit,o=b.sc(2);b.Lb(1),b.Ac("routerLink",o.routeBooks+n.uuid)("ngStyle",b.Fc(4,be,"url("+n.theme_url+")")),b.Lb(3),b.fd(n.name),b.Lb(1),b.Ac("ngIf",n.pines)}}var he=function(e,t,n){return{id:"foo-paginate-book",itemsPerPage:e,currentPage:t,totalItems:n}};function ve(e,t){if(1&e&&(b.gc(0,"div",9),b.cd(1,me,6,6,"ion-list",10),b.tc(2,"paginate"),b.fc()),2&e){var n=b.sc();b.Lb(1),b.Ac("ngForOf",b.vc(2,1,n.libraries,b.Hc(4,he,n.pageSize,n.thisPage,n.totalItems)))}}function _e(e,t){1&e&&(b.gc(0,"div",29),b.bc(1,"books-animations",30),b.tc(2,"translate"),b.fc()),2&e&&(b.Lb(1),b.Ac("$text",b.uc(2,1,"pages.book.libraries_not_found")))}var ke,ye=((ke=function(){function e(t,n){_classCallCheck(this,e),this.booksService=t,this.controlErroresService=n,this.scrollbarStyle=s.a.scrollbarStyle,this.thisPage=1,this.libraries=[],this.moment=R,this.loading=!1,this.routeBooks=l.h.library_books+"/",this.pageSize=9,this.totalPages=0,this.totalItems=0}return _createClass(e,[{key:"ngOnInit",value:function(){this.loadLibraries({page:this.thisPage}),$("mat-tooltip-component").remove()}},{key:"loadLibraries",value:function(e){var t=this;this.loading=!0,this.booksService.getLibraries(e).subscribe((function(e){t.loading=!1,e.data&&e.data.data&&Array.isArray(e.data.data)?(t.libraries=e.data.data,t.totalPages=e.data.last_page,t.totalItems=e.data.last_page*e.data.data.length,t.pageSize=e.data.number_paginate):t.controlErroresService.control({message:"Error al obtener datos"})}),(function(e){t.loading=!1,t.controlErroresService.control(e)}))}},{key:"pageChanged",value:function(e){if(console.log(e),e==1/0)return!1;this.thisPage=e,this.loadLibraries({page:this.thisPage})}},{key:"selectImage",value:function(e,t){e.selectecIndex=t}},{key:"onPrevClick",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t||(0==e.selectecIndex?e.selectecIndex=e.pines.length-1:e.selectecIndex--)}},{key:"onNextClick",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t||(e.selectecIndex==e.pines.length-1?e.selectecIndex=0:e.selectecIndex++)}}]),e}()).\u0275fac=function(e){return new(e||ke)(b.ac(I.a),b.ac(u.a))},ke.\u0275cmp=b.Ub({type:ke,selectors:[["app-my-libraries"]],decls:22,vars:22,consts:[["translucent","true"],["slot","start"],["fullscreen","true",3,"scrollbar"],[4,"ngIf"],["class","container",4,"ngIf"],[1,"flex","flex-center"],["id","foo-paginate-book","maxSize","9","directionLinks","true","autoHide","true","responsive","true",3,"previousLabel","nextLabel","screenReaderPaginationLabel","screenReaderPageLabel","screenReaderCurrentLabel","pageChange","pageBoundsCorrection"],["class","flex flex-center mt-4",4,"ngIf"],["slot","end"],[1,"container"],["class","box-out",4,"ngFor","ngForOf"],[1,"box-out"],[1,"book","books-1",3,"routerLink","ngStyle"],[1,"text-center",2,"width","90%"],["class","carousel-container container",4,"ngIf"],[1,"carousel-container","container"],["class","panel-carousel-item",3,"ngClass",4,"ngFor","ngForOf"],["class","carousel-dot-container",4,"ngIf"],["class","btn-carousel btn-prev",4,"ngIf"],["class","btn-carousel btn-next",4,"ngIf"],[1,"panel-carousel-item",3,"ngClass"],[1,"author"],[1,"carousel-dot-container"],["class","dot",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"dot",3,"ngClass","click"],[1,"btn-carousel","btn-prev"],["name","chevron-back-outline",1,"icon-prev","icon-carousel",3,"ngClass","click"],[1,"btn-carousel","btn-next"],["name","chevron-forward-outline",1,"icon-next","icon-carousel",3,"ngClass","click"],[1,"flex","flex-center","mt-4"],[3,"$text"]],template:function(e,t){1&e&&(b.gc(0,"ion-header",0),b.gc(1,"ion-toolbar"),b.gc(2,"ion-buttons",1),b.bc(3,"ion-menu-button"),b.fc(),b.gc(4,"ion-title"),b.ed(5),b.tc(6,"translate"),b.fc(),b.fc(),b.fc(),b.gc(7,"ion-content",2),b.cd(8,ce,1,0,"library-loading-animation",3),b.cd(9,ve,3,8,"div",4),b.gc(10,"div",5),b.gc(11,"pagination-controls",6),b.oc("pageChange",(function(e){return t.pageChanged(e)}))("pageBoundsCorrection",(function(e){return t.pageChanged(e)})),b.tc(12,"translate"),b.tc(13,"translate"),b.tc(14,"translate"),b.tc(15,"translate"),b.tc(16,"translate"),b.fc(),b.fc(),b.cd(17,_e,3,3,"div",7),b.fc(),b.gc(18,"ion-footer",0),b.gc(19,"ion-toolbar"),b.gc(20,"ion-buttons",8),b.ed(21,"\xa92022 Ediciones Holgu\xedn"),b.fc(),b.fc(),b.fc()),2&e&&(b.Lb(5),b.fd(b.uc(6,10,"menu.library")),b.Lb(2),b.Bc("scrollbar",t.scrollbarStyle),b.Lb(1),b.Ac("ngIf",t.loading),b.Lb(1),b.Ac("ngIf",!t.loading),b.Lb(2),b.Ac("previousLabel",b.uc(12,12,"paginate.previous"))("nextLabel",b.uc(13,14,"paginate.next"))("screenReaderPaginationLabel",b.uc(14,16,"paginate.pagination"))("screenReaderPageLabel",b.uc(15,18,"paginate.page"))("screenReaderCurrentLabel",b.uc(16,20,"paginate.in_your_page")),b.Lb(6),b.Ac("ngIf",0==t.libraries.length&&!t.loading))},directives:[r.B,r.zb,r.l,r.R,r.xb,r.u,h.b,i.t,j.c,r.z,ie.a,i.s,r.O,r.Kb,a.g,i.w,i.q,r.C,F.a],pipes:[m.d,j.b],styles:['.container[_ngcontent-%COMP%]{justify-content:center;position:relative}.box-out[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap}.box-out[_ngcontent-%COMP%]{flex-direction:column}.box-inner[_ngcontent-%COMP%]{z-index:99;width:900px;display:flex;align-items:center;position:absolute;top:350px;overflow:hidden;background-color:#fff}.book[_ngcontent-%COMP%]{width:180px;height:255px;background-color:#3e4798;transition:all .3s ease-in-out;transform-origin:left center 0;transform-style:preserve-3d;border-top-right-radius:5px;border-bottom-right-radius:5px;-webkit-backface-visibility:hidden;overflow:hidden}.box-out[_ngcontent-%COMP%]   .book[_ngcontent-%COMP%]:after{content:" ";display:block;opacity:0;width:180px;height:255px;position:relative;left:8px;transition:all .3s ease}.box-out[_ngcontent-%COMP%]   .book[_ngcontent-%COMP%]:before{content:" ";z-index:999;display:block;width:20px;height:100px;opacity:0;position:absolute;top:-12px;right:8px;transition:all .25s;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD8AAABhCAYAAABh23lYAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHCSURBVHgB7dxPTsJAHMXxN7Xu3UhigobxJHACvQFwAr2BcgO8AZxE7uGiDZiQyEIW7oSOUyKbKgLS8u+9b9JNF818fum0XdWUhy9VEDZBGIdBGD6DsFM3bQYgTnjWhGdNeNaEZ0141oRnTXjWhGdNeNaEZ0141oRnTXjWhGdNeNaEZ0141oRnTXjWhGdNeNaEZ0141oRnTXjWhGdNeNaEZ0141oRnTXjWhGdNeNaEZ0141oRnTXjWhGdNeNZ2hR/7o+UcmnCIsaNCbLcU/RR8oB1bO/4+17l8ixoGeIBBBVvMXI0ih+L7Df2j8iiqnvgh+AVVUXDOTZvF4tNb2qC7DJ1tNgSDO78tblFQxeE92l+0NSjZDjaoMowqyYl7hDF15JzL+x+YHtxLgFq/ZO2m8LT4wsb90nUjmMD61XaRc7ng5+jBua29ntsecq6oIWyELxqdLe8h/GvPp+h0T28D/FezZ8Ip7pHgZt3X5NoPvH1BZ5sNIUTDL7C+6hBWxxt0gk+00tsOe96qH0zL8GO4pBtMg/YhoLMtG8Ii/EpfY4fSoiFk8UeFzpYdwhz/jiNGZ0uHEBjUEzftohJFZyAsdX8BM0/amLC3spYAAAAASUVORK5CYII=");background-size:16px;background-repeat:no-repeat}.books-1[_ngcontent-%COMP%]{min-width:180px;margin:10px 15px}.box-inner[_ngcontent-%COMP%]   .book[_ngcontent-%COMP%]{margin-left:90px;position:relative;top:-194px}.book[_ngcontent-%COMP%]:hover{cursor:pointer;transform:rotateY(-28deg) rotate(-2deg) scale(1.02);-webkit-backface-visibility:hidden;box-shadow:1px 3px 2px #353d85,20px 8px 0 #525dc4}.book[_ngcontent-%COMP%]:hover:after{content:" ";display:block;opacity:1;width:172px;height:255px;position:relative;left:8px;background:linear-gradient(-180deg,hsla(0,0%,100%,.1),hsla(0,0%,100%,0) 60%)}.book[_ngcontent-%COMP%]:hover:before{transform:translateY(9px);opacity:1}.dr[_ngcontent-%COMP%]{position:absolute;bottom:16px;right:16px;width:100px}.carousel-container[_ngcontent-%COMP%]{position:relative;margin:auto;text-align:center;border-radius:15px;box-shadow:0 6px 12px #dce1e1}.carousel-container[_ngcontent-%COMP%]   .panel-carousel-item[_ngcontent-%COMP%]{display:none;border-radius:15px}.carousel-container[_ngcontent-%COMP%]   .panel-carousel-item.image-active[_ngcontent-%COMP%]{display:block;width:100%;padding-bottom:20px}.carousel-dot-container[_ngcontent-%COMP%]{position:absolute;right:0;left:0;bottom:0;display:flex;justify-content:center;padding:0;margin-bottom:1 rem}.dot[_ngcontent-%COMP%]{cursor:pointer;height:13px;width:13px;margin:0 5px;background-color:var(--ion-color-primary);border-radius:50%;display:inline-block;transition:opacity .6s;opacity:.6}.active[_ngcontent-%COMP%], .dot[_ngcontent-%COMP%]:hover{opacity:1}.fade[_ngcontent-%COMP%]{-webkit-animation-name:fade;animation-name:fade;-webkit-animation-duration:1.5s;animation-duration:1.5s}.btn-carousel[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;display:flex;align-items:center;justify-content:center;width:15%;padding:0;color:var(--ion-color-primary);text-align:center;background:0 0;border:0;cursor:pointer}.btn-prev[_ngcontent-%COMP%]{left:0}.icon-carousel[_ngcontent-%COMP%]{color:var(--ion-color-primary);opacity:.5;transition:all .15s ease}.icon-carousel.disabled[_ngcontent-%COMP%]{color:var(--ion-color-medium)}.icon-carousel[_ngcontent-%COMP%]:hover{opacity:.9}.icon-carousel[_ngcontent-%COMP%]:active{opacity:.5}.btn-next[_ngcontent-%COMP%], .icon-prev[_ngcontent-%COMP%]{font-size:35px}.btn-next[_ngcontent-%COMP%]{right:0}@-webkit-keyframes fade{0%{opacity:.4}to{opacity:1}}@keyframes fade{0%{opacity:.4}to{opacity:1}}']}),ke),Ce=n("5+WD"),xe=n("pDxE"),we=n("8BQX"),Oe=n("bJsC"),Pe=n("bj5B"),Me=n("OMi/"),Se=n("O0d6"),Le=n("DlHu"),Ae=n("bJYY"),Ie=n("YQMm"),Te=n("bv9b"),Re=n("ZOsW"),ze=["valuesAbilitiesSelect"];function Ee(e,t){1&e&&b.bc(0,"mat-progress-bar",9)}function Fe(e,t){if(1&e){var n=b.hc();b.gc(0,"div",10),b.gc(1,"div",11),b.gc(2,"h4",12),b.ed(3),b.tc(4,"translate"),b.fc(),b.gc(5,"div",13),b.gc(6,"ng-select",14,15),b.oc("ngModelChange",(function(e){return b.Sc(n),b.sc().ability_id=e}))("search",(function(){return b.Sc(n),b.sc().getAbilitiesDescriptions()})),b.tc(8,"translate"),b.tc(9,"translate"),b.fc(),b.fc(),b.gc(10,"div",16),b.gc(11,"ion-button",17),b.oc("click",(function(){return b.Sc(n),b.sc().saveItemByTheme()})),b.ed(12),b.tc(13,"translate"),b.fc(),b.fc(),b.fc(),b.fc()}if(2&e){var o=b.sc();b.Lb(3),b.fd(b.uc(4,10,"pages.book.add_ability")),b.Lb(3),b.Bc("addTagText",b.uc(9,14,"pages.book.add_ability")),b.Ac("items",o.abilities)("ngModel",o.ability_id)("placeholder",b.uc(8,12,"pages.book.select_ability"))("addTag",!0)("addTag",o.newAbility)("loading",o.abilitiesLoading),b.Lb(5),b.Ac("disabled",o.loading||o.abilitiesLoading),b.Lb(1),b.fd(b.uc(13,16,"buttons.add"))}}function je(e,t){if(1&e){var n=b.hc();b.gc(0,"ion-button",21),b.oc("click",(function(){b.Sc(n);var e=b.sc(),t=e.$implicit,o=e.index;return b.sc(3).removeAility(t,o)})),b.bc(1,"ion-icon",22),b.fc()}if(2&e){var o=b.sc(4);b.Ac("disabled",o.loading)}}function Be(e,t){if(1&e&&(b.gc(0,"ion-item"),b.gc(1,"ion-label",19),b.ed(2),b.fc(),b.cd(3,je,2,1,"ion-button",20),b.fc()),2&e){var n=t.$implicit,o=b.sc(3);b.Lb(2),b.fd(n.description),b.Lb(1),b.Ac("ngIf",o.enable_edit)}}function De(e,t){if(1&e&&(b.gc(0,"ion-item-group"),b.gc(1,"ion-item-divider"),b.gc(2,"ion-label"),b.ed(3),b.tc(4,"translate"),b.fc(),b.fc(),b.cd(5,Be,4,2,"ion-item",18),b.fc()),2&e){var n=b.sc(2);b.Lb(3),b.fd(b.uc(4,2,"pages.book.abilities")),b.Lb(2),b.Ac("ngForOf",n.theme.abilities_show)}}function Ue(e,t){if(1&e&&(b.gc(0,"ion-list"),b.gc(1,"ion-list-header"),b.gc(2,"strong"),b.ed(3),b.tc(4,"translate"),b.fc(),b.ed(5),b.fc(),b.gc(6,"ion-list-header"),b.gc(7,"strong"),b.ed(8),b.tc(9,"translate"),b.fc(),b.ed(10),b.fc(),b.cd(11,De,6,4,"ion-item-group",7),b.fc()),2&e){var n=b.sc();b.Lb(3),b.gd("",b.uc(4,5,"pages.book.unity"),":"),b.Lb(2),b.gd(" ",n.theme.unity.name," "),b.Lb(3),b.gd("",b.uc(9,7,"pages.book.theme"),":"),b.Lb(2),b.gd(" ",n.theme.name," "),b.Lb(1),b.Ac("ngIf",n.theme.abilities_show&&n.theme.abilities_show.length>0)}}function $e(e,t){1&e&&(b.gc(0,"p",23),b.ed(1),b.tc(2,"translate"),b.fc()),2&e&&(b.Lb(1),b.fd(b.uc(2,1,"pages.book.habilities_not_found")))}var Ne,qe=((Ne=function(){function e(t,n,o,i,c){_classCallCheck(this,e),this.modalCtrl=t,this.navParams=n,this.bookService=o,this.controlErroresService=i,this.toastService=c,this.scrollbarStyle=s.a.scrollbarStyle,this.loading=!1,this.abilities=[],this.newAbilityText="",this.ability_id=null,this.enable_edit=!1,this.abilitiesLoading=!1,this.theme_uuid=this.navParams.data.theme,this.enable_edit=this.navParams.data.enable_edit,this.theme_uuid&&(this.theme_uuid=this.theme_uuid.uuid)}return _createClass(e,[{key:"ngOnInit",value:function(){this.getAbilities()}},{key:"getAbilities",value:function(){var e=this;this.loading=!0,this.bookService.getAbilitiesByTheme(this.theme_uuid).subscribe((function(t){e.loading=!1,e.theme=t.data}),(function(t){e.loading=!1,e.controlErroresService.control(t),e.dismiss()}))}},{key:"getAbilitiesDescriptions",value:function(){var e=this;this.abilitiesLoading=!0,this.bookService.getHabilitiesAvailables({q:this.valuesAbilitiesSelect.searchInput.nativeElement.value}).subscribe((function(t){e.abilitiesLoading=!1,e.abilities=t.items}),(function(t){e.abilitiesLoading=!1}))}},{key:"saveItemByTheme",value:function(){var e=this;if(!this.ability_id)return this.toastService.presentToast("Seleccione la destreza","warning"),!1;var t={ability_id:null,description:null};isNaN(this.ability_id)?t.description=this.ability_id:t.ability_id=this.ability_id,this.loading=!0,this.bookService.createAbilityByTheme(this.theme_uuid,t).subscribe((function(t){Array.isArray(e.theme.abilities_show)||(e.theme.abilities_show=[]),e.loading=!1,e.theme.abilities_show.push(t.data)}),(function(t){e.controlErroresService.control(t),e.loading=!1}))}},{key:"removeAility",value:function(e,t){var n=this;this.loading=!0,this.bookService.deleteAbilityByTheme(e.uuid).subscribe((function(e){n.loading=!1,n.theme.abilities_show.splice(t,1)}),(function(e){n.loading=!1,n.controlErroresService.control(e)}))}},{key:"newAbility",value:function(e){return this.newAbilityText=e,e}},{key:"dismiss",value:function(e){this.modalCtrl.dismiss()}}]),e}()).\u0275fac=function(e){return new(e||Ne)(b.ac(r.Db),b.ac(r.Fb),b.ac(I.a),b.ac(u.a),b.ac(p.a))},Ne.\u0275cmp=b.Ub({type:Ne,selectors:[["app-show-abilities"]],viewQuery:function(e,t){var n;1&e&&b.ld(ze,!0),2&e&&b.Nc(n=b.pc())&&(t.valuesAbilitiesSelect=n.first)},decls:13,vars:8,consts:[["translucent","true"],["slot","end"],[3,"click"],["name","close-outline"],["mode","indeterminate",4,"ngIf"],["fullscreen","true",3,"scrollbar"],["class","card p-3",4,"ngIf"],[4,"ngIf"],["class","text-center bold","style","font-size: 0.8em;",4,"ngIf"],["mode","indeterminate"],[1,"card","p-3"],[1,"pb-2"],[1,"text-bold","text-center"],[1,"col-12","flex","flex-center","flex-y"],["bindValue","id","bindLabel","description",3,"items","ngModel","placeholder","addTag","addTagText","loading","ngModelChange","search"],["valuesAbilitiesSelect",""],[1,"flex","flex-center"],["size","small","color","success",3,"disabled","click"],[4,"ngFor","ngForOf"],["text-wrap",""],["color","danger","size","small",3,"disabled","click",4,"ngIf"],["color","danger","size","small",3,"disabled","click"],["name","trash-outline"],[1,"text-center","bold",2,"font-size","0.8em"]],template:function(e,t){1&e&&(b.gc(0,"ion-header",0),b.gc(1,"ion-toolbar"),b.gc(2,"ion-title"),b.ed(3),b.tc(4,"translate"),b.fc(),b.gc(5,"ion-buttons",1),b.gc(6,"ion-button",2),b.oc("click",(function(){return t.dismiss()})),b.bc(7,"ion-icon",3),b.fc(),b.fc(),b.fc(),b.cd(8,Ee,1,0,"mat-progress-bar",4),b.fc(),b.gc(9,"ion-content",5),b.cd(10,Fe,14,18,"div",6),b.cd(11,Ue,12,9,"ion-list",7),b.cd(12,$e,3,3,"p",8),b.fc()),2&e&&(b.Lb(3),b.fd(b.uc(4,6,"pages.book.abilities")),b.Lb(5),b.Ac("ngIf",t.loading),b.Lb(1),b.Bc("scrollbar",t.scrollbarStyle),b.Lb(1),b.Ac("ngIf",t.theme&&t.theme.unity&&t.enable_edit),b.Lb(1),b.Ac("ngIf",t.theme&&t.theme.unity),b.Lb(1),b.Ac("ngIf",null!=t.theme&&t.theme.unity&&t.theme.abilities_show&&0==t.theme.abilities_show.length))},directives:[r.B,r.zb,r.xb,r.l,r.k,r.C,i.t,r.u,h.b,Te.a,Re.a,c.r,c.u,r.O,r.P,r.J,r.I,r.N,i.s,r.H],pipes:[m.d],styles:[""]}),Ne),He=n("ePQi"),Ve=n("lsO8"),Ye=n("mNEo"),Xe=n("m1k/"),Qe=n("xHqg"),Ge=n("kmnG"),We=n("qFsG"),Ke=n("Cqmy"),Ze=n("7EHt"),Je=n("eIsa"),et=n("d3UM"),tt=n("FKr1"),nt=n("/l6y"),ot=n("5zOw"),it=n("bTqV"),ct=["stepper"],rt=["player"],at=["content"],st=["valuesAbilitiesSelect"];function lt(e,t){1&e&&b.bc(0,"mat-progress-bar",34)}function ut(e,t){1&e&&(b.ed(0),b.tc(1,"translate"),b.tc(2,"translate")),2&e&&b.hd("",b.uc(1,2,"pages.course.step")," 1 ",b.uc(2,4,"pages.course.of")," 3 ")}function dt(e,t){if(1&e){var n=b.hc();b.gc(0,"ion-col",35),b.gc(1,"ion-card",36),b.oc("click",(function(){b.Sc(n);var e=t.$implicit,o=b.sc(),i=b.Oc(13);return o.openModeAddResources(e,i)})),b.gc(2,"ion-card-header"),b.gc(3,"ion-card-subtitle",37),b.bc(4,"ion-icon",38),b.fc(),b.gc(5,"ion-card-title",39),b.ed(6),b.fc(),b.fc(),b.fc(),b.fc()}if(2&e){var o=t.$implicit;b.Lb(4),b.Ac("name",o.icon_front),b.Lb(2),b.fd(o.name)}}function gt(e,t){1&e&&(b.ed(0),b.tc(1,"translate"),b.tc(2,"translate")),2&e&&b.hd("",b.uc(1,2,"pages.course.step")," 2 ",b.uc(2,4,"pages.course.of")," 3 ")}function ft(e,t){if(1&e&&(b.gc(0,"ng-option",40),b.ed(1),b.fc()),2&e){var n=t.$implicit;b.Ac("value",n.uuid),b.Lb(1),b.fd(n.page_number)}}function pt(e,t){if(1&e&&(b.gc(0,"ng-option",40),b.ed(1),b.fc()),2&e){var n=t.$implicit;b.Ac("value",n.uuid),b.Lb(1),b.fd(n.name)}}function bt(e,t){if(1&e){var n=b.hc();b.gc(0,"div",15),b.gc(1,"label",16),b.ed(2),b.tc(3,"translate"),b.fc(),b.gc(4,"ng-select",17),b.oc("ngModelChange",(function(e){return b.Sc(n),b.sc().form.theme_id=e}))("change",(function(){b.Sc(n);var e=b.sc();return e.changeResources(),e.changeSubthemes()})),b.cd(5,pt,2,2,"ng-option",18),b.fc(),b.fc()}if(2&e){var o=b.sc();b.Lb(2),b.fd(b.uc(3,3,"forms.theme")),b.Lb(2),b.Ac("ngModel",o.form.theme_id),b.Lb(1),b.Ac("ngForOf",o.themesList)}}function mt(e,t){if(1&e&&(b.gc(0,"ng-option",40),b.ed(1),b.fc()),2&e){var n=t.$implicit;b.Ac("value",n.uuid),b.Lb(1),b.fd(n.name)}}function ht(e,t){if(1&e){var n=b.hc();b.gc(0,"div",15),b.gc(1,"label",41),b.ed(2),b.tc(3,"translate"),b.fc(),b.gc(4,"ng-select",32),b.oc("ngModelChange",(function(e){return b.Sc(n),b.sc().form.subtheme_id=e})),b.cd(5,mt,2,2,"ng-option",18),b.fc(),b.fc()}if(2&e){var o=b.sc();b.Lb(2),b.fd(b.uc(3,3,"forms.subtheme")),b.Lb(2),b.Ac("ngModel",o.form.subtheme_id),b.Lb(1),b.Ac("ngForOf",o.subthemesList)}}function vt(e,t){if(1&e&&(b.gc(0,"span"),b.ed(1),b.tc(2,"slice"),b.fc()),2&e){var n=b.sc().item;b.Lb(1),b.gd(" ",n.description.length>80?b.wc(2,1,n.description,0,80)+"...":n.description," ")}}function _t(e,t){if(1&e&&(b.gc(0,"span"),b.ed(1),b.tc(2,"slice"),b.fc()),2&e){var n=b.sc().item;b.Lb(1),b.gd(" ",n.length>80?b.wc(2,1,n,0,80)+"...":n," ")}}function kt(e,t){if(1&e&&(b.gc(0,"span",42),b.oc("click",(function(){return(0,t.clear)(t.item)})),b.ed(1,"\xd7"),b.fc(),b.gc(2,"span",43),b.cd(3,vt,3,5,"span",44),b.cd(4,_t,3,5,"span",44),b.fc()),2&e){var n=t.item;b.Lb(3),b.Ac("ngIf",n.description),b.Lb(1),b.Ac("ngIf",!n.description)}}function yt(e,t){if(1&e){var n=b.hc();b.gc(0,"textarea",51),b.oc("ngModelChange",(function(e){return b.Sc(n),b.sc(2).form.content_resource=e})),b.fc()}if(2&e){var o=b.sc(2);b.Ac("disabled",o.loading)("ngModel",o.form.content_resource)}}function Ct(e,t){if(1&e){var n=b.hc();b.gc(0,"input",52),b.oc("ngModelChange",(function(e){return b.Sc(n),b.sc(2).form.content_resource=e})),b.fc()}if(2&e){var o=b.sc(2);b.Ac("disabled",o.loading)("ngModel",o.form.content_resource)}}function xt(e,t){if(1&e){var n=b.hc();b.gc(0,"ngx-file-drag-drop",53),b.oc("valueChanged",(function(e){return b.Sc(n),b.sc(2).onValueFile(e)})),b.fc()}if(2&e){var o=b.sc(2);b.Ac("accept",o.typeSelected.accept)}}function wt(e,t){if(1&e&&(b.gc(0,"mat-option",40),b.ed(1),b.fc()),2&e){var n=t.$implicit;b.Ac("value",n),b.Lb(1),b.gd(" ",n," ")}}function Ot(e,t){if(1&e&&(b.gc(0,"mat-option",40),b.ed(1),b.tc(2,"translate"),b.fc()),2&e){var n=t.$implicit;b.Ac("value",n.value),b.Lb(1),b.gd(" ",b.uc(2,2,n.title)," ")}}function Pt(e,t){if(1&e){var n=b.hc();b.gc(0,"ion-item"),b.gc(1,"mat-form-field",63),b.gc(2,"mat-label"),b.ed(3),b.tc(4,"translate"),b.fc(),b.gc(5,"mat-select",32),b.oc("ngModelChange",(function(e){return b.Sc(n),b.sc(3).formCreate.application_methods=e})),b.cd(6,Ot,3,4,"mat-option",18),b.fc(),b.fc(),b.fc()}if(2&e){var o=b.sc(3);b.Lb(3),b.fd(b.uc(4,3,"forms.application_methods")),b.Lb(2),b.Ac("ngModel",o.formCreate.application_methods),b.Lb(1),b.Ac("ngForOf",o.application_methods_list)}}function Mt(e,t){if(1&e){var n=b.hc();b.gc(0,"ion-item"),b.gc(1,"mat-form-field",63),b.gc(2,"mat-label"),b.ed(3),b.tc(4,"translate"),b.fc(),b.gc(5,"mat-select",32),b.oc("ngModelChange",(function(e){return b.Sc(n),b.sc(3).formCreate.question_order=e})),b.gc(6,"mat-option",71),b.ed(7),b.tc(8,"translate"),b.fc(),b.gc(9,"mat-option",72),b.ed(10),b.tc(11,"translate"),b.fc(),b.fc(),b.fc(),b.fc()}if(2&e){var o=b.sc(3);b.Lb(3),b.fd(b.uc(4,4,"forms.question_order")),b.Lb(2),b.Ac("ngModel",o.formCreate.question_order),b.Lb(2),b.fd(b.uc(8,6,"forms.order_creation")),b.Lb(3),b.fd(b.uc(11,8,"forms.random"))}}function St(e,t){if(1&e&&(b.gc(0,"mat-option",40),b.ed(1),b.tc(2,"translate"),b.fc()),2&e){var n=t.$implicit;b.Ac("value",n.value),b.Lb(1),b.gd(" ",b.uc(2,2,n.title)," ")}}function Lt(e,t){if(1&e){var n=b.hc();b.gc(0,"ion-item"),b.gc(1,"mat-form-field",63),b.gc(2,"mat-label"),b.ed(3),b.tc(4,"translate"),b.fc(),b.gc(5,"mat-select",32),b.oc("ngModelChange",(function(e){return b.Sc(n),b.sc(3).formCreate.items_per_page=e})),b.cd(6,St,3,4,"mat-option",18),b.fc(),b.fc(),b.fc()}if(2&e){var o=b.sc(3);b.Lb(3),b.fd(b.uc(4,3,"forms.items_per_page_title")),b.Lb(2),b.Ac("ngModel",o.formCreate.items_per_page),b.Lb(1),b.Ac("ngForOf",o.items_per_page)}}function At(e,t){if(1&e&&(b.gc(0,"mat-option",40),b.ed(1),b.tc(2,"translate"),b.fc()),2&e){var n=t.$implicit;b.Ac("value",n.value),b.Lb(1),b.gd(" ",b.uc(2,2,n.title)," ")}}function It(e,t){if(1&e&&(b.gc(0,"mat-option",40),b.ed(1),b.tc(2,"translate"),b.fc()),2&e){var n=t.$implicit;b.Ac("value",n.value),b.Lb(1),b.gd(" ",b.uc(2,2,n.title)," ")}}var Tt=function(){return[1,2,3,4,5,6,7,8,9,0]};function Rt(e,t){if(1&e){var n=b.hc();b.gc(0,"div"),b.gc(1,"ion-item",54),b.gc(2,"mat-accordion",55),b.gc(3,"mat-expansion-panel",56),b.oc("opened",(function(){return b.Sc(n),b.sc(2).panelOpenState=!0}))("closed",(function(){return b.Sc(n),b.sc(2).panelOpenState=!1})),b.gc(4,"mat-expansion-panel-header"),b.gc(5,"mat-panel-title"),b.ed(6),b.tc(7,"translate"),b.fc(),b.bc(8,"mat-panel-description"),b.fc(),b.gc(9,"div"),b.gc(10,"ion-item"),b.gc(11,"ckeditor",57),b.oc("ngModelChange",(function(e){return b.Sc(n),b.sc(2).formCreate.text=e})),b.fc(),b.fc(),b.fc(),b.fc(),b.fc(),b.fc(),b.gc(12,"ion-item",54),b.gc(13,"mat-accordion",55),b.gc(14,"mat-expansion-panel",56),b.oc("opened",(function(){return b.Sc(n),b.sc(2).panelOpenState=!0}))("closed",(function(){return b.Sc(n),b.sc(2).panelOpenState=!1})),b.gc(15,"mat-expansion-panel-header"),b.gc(16,"mat-panel-title"),b.ed(17),b.tc(18,"translate"),b.fc(),b.bc(19,"mat-panel-description"),b.fc(),b.gc(20,"div"),b.gc(21,"ion-item"),b.gc(22,"div",58),b.gc(23,"div",59),b.gc(24,"label",60),b.ed(25),b.tc(26,"translate"),b.fc(),b.gc(27,"input",61),b.oc("ngModelChange",(function(e){return b.Sc(n),b.sc(2).form.qualification=e})),b.fc(),b.fc(),b.fc(),b.fc(),b.gc(28,"ion-item"),b.gc(29,"ion-label",62),b.ed(30),b.tc(31,"translate"),b.fc(),b.fc(),b.gc(32,"ion-item"),b.gc(33,"div",37),b.gc(34,"mat-form-field",63),b.gc(35,"mat-label"),b.ed(36),b.tc(37,"translate"),b.fc(),b.gc(38,"input",64),b.oc("ngModelChange",(function(e){return b.Sc(n),b.sc(2).formCreate.max_time_hour=e})),b.fc(),b.fc(),b.gc(39,"mat-form-field",63),b.gc(40,"mat-label"),b.ed(41),b.tc(42,"translate"),b.fc(),b.gc(43,"input",65),b.oc("ngModelChange",(function(e){return b.Sc(n),b.sc(2).formCreate.max_time_minutes=e})),b.fc(),b.fc(),b.fc(),b.fc(),b.fc(),b.gc(44,"div"),b.gc(45,"ion-list"),b.gc(46,"ion-radio-group",32),b.oc("ngModelChange",(function(e){return b.Sc(n),b.sc(2).formCreate.is_averaged=e})),b.gc(47,"ion-list-header"),b.ed(48),b.tc(49,"translate"),b.fc(),b.gc(50,"ion-item"),b.gc(51,"ion-label"),b.ed(52),b.tc(53,"translate"),b.fc(),b.bc(54,"ion-radio",66),b.fc(),b.gc(55,"ion-item"),b.gc(56,"ion-label"),b.ed(57),b.tc(58,"translate"),b.fc(),b.bc(59,"ion-radio",67),b.fc(),b.fc(),b.fc(),b.fc(),b.fc(),b.fc(),b.fc(),b.gc(60,"ion-item"),b.gc(61,"mat-accordion",68),b.gc(62,"mat-expansion-panel",69),b.oc("opened",(function(){return b.Sc(n),b.sc(2).panelOpenState=!0}))("closed",(function(){return b.Sc(n),b.sc(2).panelOpenState=!1})),b.gc(63,"mat-expansion-panel-header"),b.gc(64,"mat-panel-title"),b.ed(65),b.tc(66,"translate"),b.fc(),b.bc(67,"mat-panel-description"),b.fc(),b.gc(68,"div"),b.gc(69,"ion-item"),b.gc(70,"mat-form-field",63),b.gc(71,"mat-label"),b.ed(72),b.tc(73,"translate"),b.fc(),b.gc(74,"mat-select",32),b.oc("ngModelChange",(function(e){return b.Sc(n),b.sc(2).formCreate.attempts_allowed=e})),b.cd(75,wt,2,2,"mat-option",18),b.fc(),b.fc(),b.fc(),b.cd(76,Pt,7,5,"ion-item",44),b.fc(),b.fc(),b.fc(),b.fc(),b.gc(77,"ion-item"),b.gc(78,"mat-accordion",70),b.gc(79,"mat-expansion-panel",69),b.oc("opened",(function(){return b.Sc(n),b.sc(2).panelOpenState=!0}))("closed",(function(){return b.Sc(n),b.sc(2).panelOpenState=!1})),b.gc(80,"mat-expansion-panel-header"),b.gc(81,"mat-panel-title"),b.ed(82),b.tc(83,"translate"),b.fc(),b.bc(84,"mat-panel-description"),b.fc(),b.gc(85,"div"),b.cd(86,Mt,12,10,"ion-item",44),b.cd(87,Lt,7,5,"ion-item",44),b.gc(88,"ion-item"),b.gc(89,"mat-form-field",63),b.gc(90,"mat-label"),b.ed(91),b.tc(92,"translate"),b.fc(),b.gc(93,"mat-select",32),b.oc("ngModelChange",(function(e){return b.Sc(n),b.sc(2).formCreate.order_answers=e})),b.gc(94,"mat-option",71),b.ed(95),b.tc(96,"translate"),b.fc(),b.gc(97,"mat-option",72),b.ed(98),b.tc(99,"translate"),b.fc(),b.fc(),b.fc(),b.fc(),b.fc(),b.fc(),b.fc(),b.fc(),b.gc(100,"ion-item"),b.gc(101,"mat-accordion",73),b.gc(102,"mat-expansion-panel",69),b.oc("opened",(function(){return b.Sc(n),b.sc(2).panelOpenState=!0}))("closed",(function(){return b.Sc(n),b.sc(2).panelOpenState=!1})),b.gc(103,"mat-expansion-panel-header"),b.gc(104,"mat-panel-title"),b.ed(105),b.tc(106,"translate"),b.fc(),b.bc(107,"mat-panel-description"),b.fc(),b.gc(108,"div"),b.gc(109,"ion-item",74),b.gc(110,"mat-form-field",75),b.gc(111,"mat-label"),b.ed(112),b.tc(113,"translate"),b.fc(),b.gc(114,"mat-select",32),b.oc("ngModelChange",(function(e){return b.Sc(n),b.sc(2).formCreate.option_show_answer=e})),b.cd(115,At,3,4,"mat-option",18),b.fc(),b.fc(),b.fc(),b.gc(116,"ion-item"),b.gc(117,"mat-form-field",75),b.gc(118,"mat-label"),b.ed(119),b.tc(120,"translate"),b.fc(),b.gc(121,"mat-select",32),b.oc("ngModelChange",(function(e){return b.Sc(n),b.sc(2).formCreate.option_show_correct_as=e})),b.cd(122,It,3,4,"mat-option",18),b.fc(),b.fc(),b.fc(),b.fc(),b.fc(),b.fc(),b.fc(),b.fc()}if(2&e){var o=b.sc(2);b.Lb(6),b.gd(" ",b.uc(7,34,"forms.header")," "),b.Lb(5),b.Ac("ngModel",o.formCreate.text),b.Lb(6),b.gd(" ",b.uc(18,36,"forms.principal_options")," "),b.Lb(8),b.fd(b.uc(26,38,"forms.qualification_max")),b.Lb(2),b.Ac("ngModel",o.form.qualification)("disabled",!0),b.Lb(3),b.gd(" ",b.uc(31,40,"forms.time_limit")," "),b.Lb(6),b.fd(b.uc(37,42,"forms.hours")),b.Lb(2),b.Ac("ngModel",o.formCreate.max_time_hour),b.Lb(3),b.fd(b.uc(42,44,"forms.minutes")),b.Lb(2),b.Ac("ngModel",o.formCreate.max_time_minutes),b.Lb(3),b.Ac("ngModel",o.formCreate.is_averaged),b.Lb(2),b.gd(" ",b.uc(49,46,"forms.is_averaged")," "),b.Lb(4),b.fd(b.uc(53,48,"forms.yes")),b.Lb(5),b.fd(b.uc(58,50,"forms.no")),b.Lb(8),b.gd(" ",b.uc(66,52,"forms.qualification_method")," "),b.Lb(7),b.fd(b.uc(73,54,"forms.attempts_allowed")),b.Lb(2),b.Ac("ngModel",o.formCreate.attempts_allowed),b.Lb(1),b.Ac("ngForOf",b.Ec(70,Tt)),b.Lb(1),b.Ac("ngIf",o.formCreate.attempts_allowed>1),b.Lb(6),b.gd(" ",b.uc(83,56,"forms.scheme")," "),b.Lb(4),b.Ac("ngIf","form"==o.typeSelected.type),b.Lb(1),b.Ac("ngIf","form"==o.typeSelected.type),b.Lb(4),b.fd(b.uc(92,58,"forms.order_answers_random")),b.Lb(2),b.Ac("ngModel",o.formCreate.order_answers),b.Lb(2),b.fd(b.uc(96,60,"forms.no")),b.Lb(3),b.fd(b.uc(99,62,"forms.yes")),b.Lb(7),b.gd(" ",b.uc(106,64,"forms.feed_back")," "),b.Lb(7),b.fd(b.uc(113,66,"forms.show_answers_student")),b.Lb(2),b.Ac("ngModel",o.formCreate.option_show_answer),b.Lb(1),b.Ac("ngForOf",o.optionShowAnswer),b.Lb(4),b.fd(b.uc(120,68,"forms.correct_answers_show")),b.Lb(2),b.Ac("ngModel",o.formCreate.option_show_correct_as),b.Lb(1),b.Ac("ngForOf",o.optionShowCorrectAnswer)}}function zt(e,t){if(1&e){var n=b.hc();b.gc(0,"div",76),b.gc(1,"ion-button",29),b.oc("click",(function(){return b.Sc(n),b.sc(2).openQuestionary()})),b.bc(2,"ion-icon",77),b.ed(3),b.tc(4,"translate"),b.fc(),b.fc()}2&e&&(b.Lb(3),b.gd(" ",b.uc(4,1,"pages.course.edit_form")," "))}function Et(e,t){if(1&e){var n=b.hc();b.gc(0,"ion-col",35),b.gc(1,"ion-card",80),b.gc(2,"ion-card-header",81),b.oc("click",(function(){b.Sc(n);var e=t.$implicit,o=b.sc(4);return o.videoQuiz.type=e,o.clearFormBuilder()})),b.gc(3,"ion-card-subtitle",37),b.bc(4,"ion-icon",38),b.fc(),b.gc(5,"ion-card-title",39),b.ed(6),b.fc(),b.fc(),b.gc(7,"ion-card-content",82),b.gc(8,"ion-button",83),b.bc(9,"ion-icon",84),b.fc(),b.fc(),b.fc(),b.fc()}if(2&e){var o=t.$implicit;b.Lb(4),b.Ac("name",o.icon),b.Lb(2),b.fd(o.name),b.Lb(2),b.Ac("href",o.web_explicativa)}}function Ft(e,t){if(1&e&&(b.gc(0,"ion-grid",12),b.gc(1,"ion-label"),b.ed(2),b.tc(3,"translate"),b.fc(),b.gc(4,"ion-row",13),b.cd(5,Et,10,3,"ion-col",14),b.fc(),b.fc()),2&e){var n=b.sc(3);b.Lb(2),b.fd(b.uc(3,2,"forms.select-type-vide")),b.Lb(3),b.Ac("ngForOf",n.typesQuizVideos)}}function jt(e,t){if(1&e){var n=b.hc();b.gc(0,"mat-form-field",24),b.gc(1,"mat-label"),b.ed(2),b.tc(3,"translate"),b.fc(),b.gc(4,"input",88),b.oc("ngModelChange",(function(e){return b.Sc(n),b.sc(4).videoQuiz.video_id=e})),b.fc(),b.fc()}if(2&e){var o=b.sc(4);b.Lb(2),b.fd(b.uc(3,3,"forms.id_video")),b.Lb(2),b.Ac("disabled",o.videoQuiz.isSaved)("ngModel",o.videoQuiz.video_id)}}function Bt(e,t){if(1&e){var n=b.hc();b.gc(0,"mat-form-field",24),b.gc(1,"mat-label"),b.ed(2),b.tc(3,"translate"),b.fc(),b.gc(4,"input",25),b.oc("ngModelChange",(function(e){return b.Sc(n),b.sc(4).videoQuiz.url=e})),b.fc(),b.fc()}if(2&e){var o=b.sc(4);b.Lb(2),b.fd(b.uc(3,3,"forms.link_video")),b.Lb(2),b.Ac("disabled",o.videoQuiz.isSaved)("ngModel",o.videoQuiz.url)}}function Dt(e,t){if(1&e){var n=b.hc();b.gc(0,"mat-form-field",24),b.gc(1,"mat-label"),b.ed(2),b.tc(3,"translate"),b.fc(),b.gc(4,"input",88),b.oc("ngModelChange",(function(e){return b.Sc(n),b.sc(4).videoQuiz.poster=e})),b.fc(),b.fc()}if(2&e){var o=b.sc(4);b.Lb(2),b.fd(b.uc(3,3,"forms.poster_video")),b.Lb(2),b.Ac("disabled",o.videoQuiz.isSaved)("ngModel",o.videoQuiz.poster)}}function Ut(e,t){if(1&e){var n=b.hc();b.gc(0,"vm-player",92,93),b.oc("vmCurrentTimeChange",(function(e){return b.Sc(n),b.sc(5).onTimeUpdate(e)}))("vmFullscreenChange",(function(e){return b.Sc(n),b.sc(5).onFullscreenChange(e)})),b.bc(2,"vm-youtube",94),b.bc(3,"vm-default-ui"),b.fc()}if(2&e){var o=b.sc(5);b.Ac("currentTime",o.currentTime),b.Lb(2),b.Ac("videoId",o.videoQuiz.video_id)}}function $t(e,t){if(1&e&&b.bc(0,"vm-vimeo",99),2&e){var n=b.sc(6);b.Ac("videoId",n.videoQuiz.video_id)}}function Nt(e,t){if(1&e&&b.bc(0,"track",100),2&e){var n=b.sc(6);b.Ac("src",n.videoQuiz.subtitles,b.Vc)}}function qt(e,t){if(1&e){var n=b.hc();b.gc(0,"vm-player",95,93),b.oc("vmCurrentTimeChange",(function(e){return b.Sc(n),b.sc(5).onTimeUpdate(e)}))("vmFullscreenChange",(function(e){return b.Sc(n),b.sc(5).onFullscreenChange(e)})),b.cd(2,$t,1,1,"vm-vimeo",96),b.bc(3,"vm-default-ui"),b.bc(4,"source",97),b.cd(5,Nt,1,1,"track",98),b.fc()}if(2&e){var o=b.sc(5);b.Ac("currentTime",o.currentTime),b.Lb(2),b.Ac("ngSwitchCase","vimeo"),b.Lb(2),b.Bc("src",o.videoQuiz.url,b.Vc),b.Lb(1),b.Ac("ngIf",o.videoQuiz.subtitles)}}function Ht(e,t){if(1&e&&b.bc(0,"track",100),2&e){var n=b.sc(6);b.Ac("src",n.videoQuiz.subtitles,b.Vc)}}function Vt(e,t){if(1&e){var n=b.hc();b.gc(0,"vm-player",101,93),b.oc("vmCurrentTimeChange",(function(e){return b.Sc(n),b.sc(5).onTimeUpdate(e)}))("vmFullscreenChange",(function(e){return b.Sc(n),b.sc(5).onFullscreenChange(e)})),b.gc(2,"vm-video",102),b.bc(3,"source",97),b.cd(4,Ht,1,1,"track",98),b.fc(),b.bc(5,"vm-default-ui"),b.fc()}if(2&e){var o=b.sc(5);b.Ac("currentTime",o.currentTime),b.Lb(2),b.Ac("poster",o.videoQuiz.poster),b.Lb(1),b.Bc("src",o.videoQuiz.url,b.Vc),b.Lb(1),b.Ac("ngIf",o.videoQuiz.subtitles)}}function Yt(e,t){if(1&e&&(b.ec(0,45),b.cd(1,Ut,4,2,"vm-player",89),b.cd(2,qt,6,4,"vm-player",90),b.cd(3,Vt,6,4,"vm-player",91),b.dc()),2&e){var n=b.sc(4);b.Ac("ngSwitch",n.videoQuiz.type.system_name),b.Lb(1),b.Ac("ngSwitchCase","youtube"),b.Lb(1),b.Ac("ngSwitchCase","vimeo"),b.Lb(1),b.Ac("ngSwitchCase","video")}}function Xt(e,t){if(1&e){var n=b.hc();b.gc(0,"ion-button",103),b.oc("click",(function(){return b.Sc(n),b.sc(4).getParamIdByLink()})),b.ed(1),b.tc(2,"translate"),b.fc()}2&e&&(b.Ac("color","primary"),b.Lb(1),b.fd(b.uc(2,2,"buttons.confirm_video")))}function Qt(e,t){if(1&e){var n=b.hc();b.gc(0,"ion-button",103),b.oc("click",(function(){return b.Sc(n),b.sc(4).videoQuiz.isSaved=!1})),b.ed(1),b.tc(2,"translate"),b.fc()}2&e&&(b.Ac("color","warning"),b.Lb(1),b.fd(b.uc(2,2,"buttons.change_options")))}function Gt(e,t){if(1&e){var n=b.hc();b.gc(0,"mat-expansion-panel",107),b.gc(1,"mat-expansion-panel-header"),b.gc(2,"mat-panel-title"),b.gc(3,"ion-list"),b.gc(4,"strong"),b.ed(5),b.fc(),b.fc(),b.fc(),b.fc(),b.gc(6,"div"),b.bc(7,"p",108),b.bc(8,"asw-preview-template",109),b.gc(9,"div",110),b.gc(10,"div"),b.bc(11,"ion-icon",111),b.ed(12),b.tc(13,"translate"),b.fc(),b.fc(),b.fc(),b.gc(14,"mat-action-row"),b.gc(15,"button",112),b.oc("click",(function(){b.Sc(n);var e=t.$implicit;return b.sc(5).editIemForQuestion(e)})),b.bc(16,"ion-icon",113),b.ed(17),b.tc(18,"translate"),b.fc(),b.gc(19,"button",114),b.oc("click",(function(){b.Sc(n);var e=t.index;return b.sc(5).deleteIemForQuestion(e)})),b.bc(20,"ion-icon",115),b.ed(21),b.tc(22,"translate"),b.fc(),b.fc(),b.fc()}if(2&e){var o=t.$implicit;b.Lb(5),b.fd(o.time_show),b.Lb(2),b.Ac("innerHTML",o.content,b.Tc),b.Lb(1),b.Ac("formContainer",o.list)("disabled",!0),b.Lb(4),b.hd(" ",o.punctuation," ",b.uc(13,8,1==o.punctuation?"buttons.point":"buttons.points")," "),b.Lb(5),b.gd(" ",b.uc(18,10,"buttons.edit"),""),b.Lb(4),b.gd(" ",b.uc(22,12,"buttons.delete"),"")}}function Wt(e,t){if(1&e){var n=b.hc();b.gc(0,"ion-card"),b.gc(1,"ion-card-header"),b.gc(2,"ion-card-title"),b.ed(3),b.gc(4,"ion-button",29),b.oc("click",(function(){return b.Sc(n),b.sc(4).addANewIptionQuizTime()})),b.bc(5,"ion-icon",104),b.tc(6,"translate"),b.fc(),b.fc(),b.fc(),b.gc(7,"ion-card-content"),b.gc(8,"div",58),b.gc(9,"div",59),b.gc(10,"label",60),b.ed(11),b.tc(12,"translate"),b.fc(),b.gc(13,"strong"),b.ed(14),b.fc(),b.fc(),b.fc(),b.gc(15,"mat-accordion",105),b.cd(16,Gt,23,14,"mat-expansion-panel",106),b.fc(),b.gc(17,"ion-list"),b.gc(18,"ion-item"),b.bc(19,"ion-label"),b.fc(),b.fc(),b.fc(),b.fc()}if(2&e){var o=b.sc(4);b.Lb(3),b.gd("",o.currentTimeString," "),b.Lb(2),b.Ac("matTooltip",b.uc(6,5,"buttons.addTimeVideoQuiz")),b.Lb(6),b.gd("",b.uc(12,7,"forms.qualification_max"),":"),b.Lb(3),b.fd(o.form.qualification),b.Lb(2),b.Ac("ngForOf",o.forms_group)}}function Kt(e,t){if(1&e&&(b.ec(0),b.cd(1,jt,5,5,"mat-form-field",27),b.cd(2,Bt,5,5,"mat-form-field",27),b.cd(3,Dt,5,5,"mat-form-field",27),b.gc(4,"div",85),b.cd(5,Yt,4,4,"ng-container",86),b.fc(),b.gc(6,"div",28),b.cd(7,Xt,3,4,"ion-button",87),b.cd(8,Qt,3,4,"ion-button",87),b.fc(),b.cd(9,Wt,20,9,"ion-card",44),b.dc()),2&e){var n=b.sc(3);b.Lb(1),b.Ac("ngIf",n.videoQuiz.type.show_id),b.Lb(1),b.Ac("ngIf",n.videoQuiz.type.show_url),b.Lb(1),b.Ac("ngIf",n.videoQuiz.type.show_poster),b.Lb(2),b.Ac("ngIf",n.videoQuiz.isSaved),b.Lb(2),b.Ac("ngIf",!n.videoQuiz.isSaved),b.Lb(1),b.Ac("ngIf",n.videoQuiz.isSaved),b.Lb(1),b.Ac("ngIf",n.videoQuiz.isSaved)}}function Zt(e,t){if(1&e&&(b.gc(0,"div",78),b.cd(1,Ft,6,4,"ion-grid",79),b.cd(2,Kt,10,7,"ng-container",44),b.fc()),2&e){var n=b.sc(2);b.Lb(1),b.Ac("ngIf",null==n.videoQuiz.type),b.Lb(1),b.Ac("ngIf",n.videoQuiz.type)}}function Jt(e,t){if(1&e&&(b.gc(0,"div",24),b.gc(1,"mat-label"),b.ed(2),b.fc(),b.ec(3,45),b.cd(4,yt,1,2,"textarea",46),b.cd(5,Ct,1,2,"input",47),b.cd(6,xt,1,1,"ngx-file-drag-drop",48),b.cd(7,Rt,123,71,"div",44),b.cd(8,zt,5,3,"div",49),b.cd(9,Zt,3,2,"div",50),b.dc(),b.fc()),2&e){var n=b.sc();b.Lb(2),b.fd(n.typeSelected.name),b.Lb(1),b.Ac("ngSwitch",n.typeSelected.type),b.Lb(1),b.Ac("ngSwitchCase","textarea"),b.Lb(1),b.Ac("ngSwitchCase","text"),b.Lb(1),b.Ac("ngSwitchCase","file"),b.Lb(1),b.Ac("ngIf","form"==n.typeSelected.type||"video-quiz"==n.typeSelected.type),b.Lb(1),b.Ac("ngSwitchCase","form"),b.Lb(1),b.Ac("ngSwitchCase","video-quiz")}}function en(e,t){1&e&&(b.ed(0),b.tc(1,"translate"),b.tc(2,"translate")),2&e&&b.hd("",b.uc(1,2,"pages.course.step")," 3 ",b.uc(2,4,"pages.course.of")," 3 ")}function tn(e,t){if(1&e&&(b.gc(0,"ng-option",40),b.ed(1),b.fc()),2&e){var n=t.$implicit;b.Ac("value",n.uuid),b.Lb(1),b.fd(n.description)}}function nn(e,t){if(1&e&&(b.gc(0,"ng-option",40),b.ed(1),b.fc()),2&e){var n=t.$implicit;b.Ac("value",n.uuid),b.Lb(1),b.fd(n.name)}}function on(e,t){if(1&e){var n=b.hc();b.gc(0,"div",15),b.gc(1,"label",16),b.ed(2),b.tc(3,"translate"),b.fc(),b.gc(4,"ng-select",31),b.oc("ngModelChange",(function(e){return b.Sc(n),b.sc().form.reply_by=e})),b.cd(5,nn,2,2,"ng-option",18),b.fc(),b.fc()}if(2&e){var o=b.sc();b.Lb(2),b.fd(b.uc(3,4,"forms.repply_in_linked_books")),b.Lb(2),b.Ac("ngModel",o.form.reply_by)("multiple",!0),b.Lb(1),b.Ac("ngForOf",o.books)}}function cn(e,t){if(1&e&&(b.gc(0,"ng-option",40),b.ed(1),b.fc()),2&e){var n=t.$implicit;b.Ac("value",n.uuid),b.Lb(1),b.fd(n.name)}}var rn,an=((rn=function(){function e(t,n,o,i,c,r,a){var u;_classCallCheck(this,e),this.modalCtrl=t,this.navParams=n,this.resourcesService=o,this.booksService=i,this.controlErroresService=c,this.toastService=r,this.questionaryService=a,this.currentTime=0,this.currentTimeString="00:00:00",this.scrollbarStyle=s.a.scrollbarStyle,this.themesList=[],this.resource_type="book",this.parent_id=0,this.loading=!1,this.loading_2=!1,this.types=[],this.typeSelected=null,this.form={title:"",description:"",range_age:"",language:"",type_resource_id:null,page_id:null,book_id:null,theme_id:null,subtheme_id:null,context_id:null,addressed_to:[],top:null,left:null,content_resource:null,qualification:0,reply_by:[],colaborar_id:null,abilities:[]},this.videoQuiz={url:"",poster:"",subtitles:"",video_id:"",volume:0,isSaved:!1,type:null},this.typesQuizVideos=s.a.typesQuizVideos,this.formCreate={text:"",can_comment:0,max_time:"00:00",max_time_hour:0,max_time_minutes:10,attempts_allowed:1,application_methods:"first_attempt",question_order:"asc",items_per_page:"all",order_answers:"asc",is_averaged:"0",option_show_answer:"show_answers_finished_quiz",option_show_correct_as:"show_answers_finished_quiz"},this.items_per_page=l.b.items_per_page,this.application_methods_list=l.b.application_methods_list,this.optionShowAnswer=l.b.optionShowAnswer,this.optionShowCorrectAnswer=l.b.optionShowAnswer,this.forms_group=[],this.contexts=[],this.roles=[],this.selectedPages=[],this.pagesBook=[],this.resource_id=null,this.book=null,this.books=[],this.subthemesList=[],this.abilities=[],this.abilitiesLoading=!1,this.parent_id=n.data.parent_id,this.book=n.data.book,this.resource_type=n.data.resource_type,this.selectedPages=null!==(u=n.data.selectedPages)&&void 0!==u?u:[],this.resource_id=n.data.resource_id,this.colaborar_id=n.data.colaborar_id,this.form.colaborar_id=this.colaborar_id,this.resource_id||(this.forms_group=[{uuid:null,punctuation:10,list:[{displayName:"Una opci\xf3n",controlType:"radio",name:"radio",punctuation:"10",label:"Maque la respuesta correcta",tooltip:"radio",isRequired:!1,value:"option-1",options:[{key:"option-1",value:"Opci\xf3n 1",percentage:100},{key:"option-2",value:"Opci\xf3n 2",percentage:0},{key:"option-3",value:"Opci\xf3n 3",percentage:0}]}],content:"<p>Edite su pregunta</p>\n"}]),null!=this.book&&Array.isArray(this.book.roles)&&(this.form.addressed_to=this.book.roles.map((function(e){return e.uuid}))),null!=this.book&&Array.isArray(this.book.books)&&(this.books=this.book.books),this.form.book_id=this.book.uuid}return _createClass(e,[{key:"seekForward",value:function(){this.currentTime+=5}},{key:"enterFullscreen",value:function(){console.log("enterFullscreen"),this.player.enterFullscreen()}},{key:"onTimeUpdate",value:function(e){console.log("onTimeUpdate"),this.currentTime=e.detail,this.currentTimeString=this.fancyTimeFormat(this.currentTime)}},{key:"onFullscreenChange",value:function(e){console.log("onFullscreenChange")}},{key:"clearFormBuilder",value:function(){this.forms_group=[]}},{key:"addANewIptionQuizTime",value:function(){var e=this.currentTime,t={uuid:null,punctuation:1,time_video:e,time_show:this.fancyTimeFormat(e),list:[{displayName:"Una opci\xf3n",controlType:"radio",name:"radio",punctuation:"1",label:"Maque la respuesta correcta",tooltip:"radio",isRequired:!1,value:"option-1",options:[{key:"option-1",value:"Opci\xf3n 1",percentage:100},{key:"option-2",value:"Opci\xf3n 2",percentage:0},{key:"option-3",value:"Opci\xf3n 3",percentage:0}]}],content:"<p>Edite su pregunta</p>\n"};if(this.player.pause(),this.forms_group.findIndex((function(e){return e.time_show==t.time_show}))>=1)this.toastService.presentToast("Este tiempo ya est\xe1 ocupado","warning");else{this.forms_group.push(t),this.forms_group=this.forms_group.sort((function(e,t){return e.time_video-t.time_video}));var n,o=_createForOfIteratorHelper(this.forms_group);try{for(o.s();!(n=o.n()).done;){var i=n.value;this.form.qualification+=+i.punctuation||0}}catch(c){o.e(c)}finally{o.f()}this.scrollToBottom()}}},{key:"scrollToBottom",value:function(){this.content.scrollToBottom(300)}},{key:"deleteIemForQuestion",value:function(e){this.forms_group.splice(e,1),this.form.qualification=0;var t,n=_createForOfIteratorHelper(this.forms_group);try{for(n.s();!(t=n.n()).done;){var o=t.value;this.form.qualification+=+o.punctuation||0}}catch(i){n.e(i)}finally{n.f()}}},{key:"ngOnInit",value:function(){this.getTypesResources(),this.getPageIds()}},{key:"findItem",value:function(){var e=this;this.resourcesService.find(this.resource_id).subscribe((function(t){null!=t.data.abilities&&Array.isArray(t.data.abilities)&&(e.abilities=t.data.abilities.map((function(e){return{id:e.ability_id,description:e.description}}))),e.form={theme_id:null!=t.data.theme_uuid&&"0"!=t.data.theme_uuid?t.data.theme_uuid:null,subtheme_id:null!=t.data.subtheme_uuid&&"0"!=t.data.subtheme_uuid?t.data.subtheme_uuid:null,title:t.data.title,description:t.data.description,range_age:t.data.range_age,language:t.data.language,colaborar_id:t.data.resource_id,book_id:null,type_resource_id:t.data.type_resource_uuid,page_id:t.data.page_uuid,context_id:t.data.context_uuid,addressed_to:Array.isArray(t.data.roles)?t.data.roles.map((function(e){return e.uuid})):[],top:t.data.top,left:t.data.left,content_resource:t.data.type_resource&&"file"==t.data.type_resource.type?null:t.data.content_resource,qualification:t.data.qualification,reply_by:[],abilities:null!=t.data.abilities&&Array.isArray(t.data.abilities)?t.data.abilities.map((function(e){return e.ability_id})):[]},null!=t.data.questionary&&(e.form.qualification=isNaN(t.data.questionary.qualification)?t.data.questionary.qualification:+t.data.questionary.qualification,e.formCreate={text:t.data.questionary.text,can_comment:t.data.questionary.can_comment,max_time:R(t.data.questionary.max_time,"HH:mm:ss").format("HH:mm"),attempts_allowed:t.data.questionary.attempts_allowed,application_methods:t.data.questionary.application_methods,question_order:t.data.questionary.question_order,items_per_page:t.data.questionary.items_per_page,order_answers:t.data.questionary.order_answers_random,is_averaged:t.data.questionary.is_averaged+"",option_show_answer:t.data.questionary.option_show_answer,option_show_correct_as:t.data.questionary.option_show_correct_as,max_time_hour:+R(t.data.questionary.max_time,"HH:mm:ss").format("HH"),max_time_minutes:+R(t.data.questionary.max_time,"HH:mm:ss").format("mm")},e.forms_group=e.questionaryService.refactorListQuestionary(t.data.questionary.questions),t.data.questionary.video_quiz&&(e.videoQuiz={url:t.data.questionary.video_quiz.url,poster:t.data.questionary.video_quiz.poster,subtitles:t.data.questionary.video_quiz.subtitles,video_id:t.data.questionary.video_quiz.video_id,volume:0,isSaved:!0,type:e.typesQuizVideos.find((function(e){return e.id==t.data.questionary.video_quiz.type_id}))})),e.changePageItems(),e.openModeAddResources(t.data.type_resource,e.stepper)}),(function(t){e.controlErroresService.control(t),e.dismiss()}))}},{key:"getTypesResources",value:function(){var e=this;this.loading=!0,this.resourcesService.getTypes({}).subscribe((function(t){e.loading=!1,e.types=t.types,e.contexts=t.contexts,e.roles=t.roles}),(function(t){e.controlErroresService.control(t),e.loading=!1}))}},{key:"getPageIds",value:function(){var e=this;this.loading_2=!0,this.booksService.getIdsPages(this.selectedPages,this.parent_id).subscribe((function(t){e.loading_2=!1,e.pagesBook=t.data,null!=e.resource_id&&e.findItem()}),(function(t){e.controlErroresService.control(t),e.loading_2=!1}))}},{key:"openModeAddResources",value:function(e,t){this.typeSelected=e,this.form.type_resource_id=e.uuid,t.next()}},{key:"save",value:function(){var e=this,t=this.form;if(this.loading=!0,null==this.typeSelected)return this.toastService.presentToast("Seleccione La categor\xeda de recursos","warning"),!1;"file"==this.typeSelected.type&&(t=Object(l.c)(t)),"form"!=this.typeSelected.type&&"video-quiz"!=this.typeSelected.type||(t.content_resource="form-builder",t.questions=this.forms_group,this.formCreate.max_time=R().set("minutes",this.formCreate.max_time_minutes).set("hours",this.formCreate.max_time_hour).format("HH:mm"),t.qualification=this.form.qualification,t.text=this.formCreate.text,t.can_comment=this.formCreate.can_comment,t.max_time=this.formCreate.max_time,t.attempts_allowed=this.formCreate.attempts_allowed,t.application_methods=this.formCreate.application_methods,t.question_order=this.formCreate.question_order,t.items_per_page=this.formCreate.items_per_page,t.order_answers=this.formCreate.order_answers,t.is_averaged=this.formCreate.is_averaged,t.option_show_answer=this.formCreate.option_show_answer,t.option_show_correct_as=this.formCreate.option_show_correct_as,"video-quiz"==this.typeSelected.type&&(t.video_quiz=this.videoQuiz));var n=this.resourcesService.store(t);null!=this.resource_id&&(n=this.resourcesService.update(t,this.resource_id)),n.subscribe((function(t){var n=e.pagesBook.find((function(t){return t.uuid==e.form.page_id}));e.loading=!1,e.dismiss({type:e.typeSelected,resource:t.data.resource,page_number:n?n.page_number:0}),e.toastService.presentToast(t.message,t.status)}),(function(t){e.loading=!1,e.controlErroresService.control(t)}))}},{key:"dismiss",value:function(e){this.modalCtrl.dismiss(e)}},{key:"onValueFile",value:function(e){this.form.content_resource=e[0]}},{key:"previewStep",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.previous(),t&&(this.form={subtheme_id:null,title:"",description:"",range_age:"",language:"",type_resource_id:null,page_id:null,theme_id:null,context_id:null,book_id:null,addressed_to:[],top:null,left:null,content_resource:null,qualification:0,reply_by:[],colaborar_id:null,abilities:[]},this.videoQuiz={url:"https://media.vimejs.com/720p.mp4",poster:"https://media.vimejs.com/poster.png",subtitles:"https://media.vimejs.com/subs/english.vtt",video_id:"",volume:0,isSaved:!1,type:null},this.currentTimeString="00:00:00")}},{key:"nextStep",value:function(e){e.next()}},{key:"openQuestionary",value:function(){return Object(A.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalCtrl.create({component:He.a,cssClass:"modal-fullscreen-100",swipeToClose:!0,componentProps:{forms_group:this.forms_group}});case 2:return t=e.sent,e.next=5,t.present();case 5:return e.next=7,t.onWillDismiss();case 7:this.form.qualification=0,n=_createForOfIteratorHelper(this.forms_group);try{for(n.s();!(o=n.n()).done;)i=o.value,this.form.qualification+=+i.punctuation||0}catch(c){n.e(c)}finally{n.f()}case 10:case"end":return e.stop()}}),e,this)})))}},{key:"newAbility",value:function(e){return e}},{key:"fancyTimeFormat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=~~(e%3600/60),o=~~e%60,i="";return i+=~~(e/3600)+":"+(n<10?"0":""),(i+=n+":"+(o<10?"0":""))+(t?o+e-~~e:""+o)}},{key:"getAbilitiesDescriptions",value:function(){var e=this;this.abilitiesLoading=!0,this.booksService.getHabilitiesAvailables({q:this.valuesAbilitiesSelect.searchInput.nativeElement.value}).subscribe((function(t){e.abilitiesLoading=!1,e.abilities=t.items}),(function(t){e.abilitiesLoading=!1}))}},{key:"editIemForQuestion",value:function(e){return Object(A.b)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,o,i,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.modalCtrl.create({component:Xe.a,cssClass:"modal-fullscreen-100",swipeToClose:!0,componentProps:{form_builder_item:e,content:"",punctuation:0}});case 2:return n=t.sent,t.next=5,n.present();case 5:return t.next=7,n.onWillDismiss();case 7:this.form.qualification=0,o=_createForOfIteratorHelper(this.forms_group);try{for(o.s();!(i=o.n()).done;)c=i.value,this.form.qualification+=+c.punctuation||0}catch(r){o.e(r)}finally{o.f()}case 10:case"end":return t.stop()}}),t,this)})))}},{key:"showDocument",value:function(e){return Object(A.b)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.modalCtrl.create({component:Ye.a,cssClass:"modal-fullscreen-100",swipeToClose:!0,componentProps:{route_file:e}});case 2:return n=t.sent,t.next=5,n.present();case 5:return t.next=7,n.onWillDismiss();case 7:case"end":return t.stop()}}),t,this)})))}},{key:"getParamIdByLink",value:function(){if(null!=this.videoQuiz.type&&null!=this.videoQuiz.type.param_regex){var e=this.videoQuiz.url.match(this.videoQuiz.type.param_regex),t=!(!e||!e[this.videoQuiz.type.position_regex])&&e[this.videoQuiz.type.position_regex];t?(this.videoQuiz.video_id=t,this.videoQuiz.isSaved=!0):this.videoQuiz.isSaved=!1}else this.videoQuiz.isSaved=!0;return this.videoQuiz.isSaved||this.toastService.presentToast("El link no es correcto","warning"),this.videoQuiz.isSaved}},{key:"changePageItems",value:function(){var e=this,t=this.pagesBook.find((function(t){return t.uuid==e.form.page_id}));null!=t&&this.booksService.getThemeBook({book_uuid:this.book.uuid,page_index:t.page_number}).subscribe((function(t){e.themesList=t.data,e.changeSubthemes()}),(function(t){e.controlErroresService.control(t)}))}},{key:"changeResources",value:function(){var e=this;if(!this.resource_id){var t=this.themesList.find((function(t){return t.uuid==e.form.theme_id}));null!=t&&(this.abilities=t.abilities.map((function(e){return{id:e.id,description:e.description}})),this.form.abilities=this.abilities.map((function(e){return e.id})),console.log(this.form.abilities))}}},{key:"changeSubthemes",value:function(){var e=this;this.form.theme_id&&this.booksService.getSubThemeBook({book_uuid:this.book.uuid,theme_id:this.form.theme_id}).subscribe((function(t){e.subthemesList=t.data}),(function(t){e.controlErroresService.control(t)}))}}]),e}()).\u0275fac=function(e){return new(e||rn)(b.ac(r.Db),b.ac(r.Fb),b.ac(Pe.a),b.ac(I.a),b.ac(u.a),b.ac(p.a),b.ac(Ve.a))},rn.\u0275cmp=b.Ub({type:rn,selectors:[["app-add-resource-book"]],viewQuery:function(e,t){var n;1&e&&(b.ld(ct,!0),b.ld(rt,!0),b.ld(at,!0),b.ld(st,!0)),2&e&&(b.Nc(n=b.pc())&&(t.stepper=n.first),b.Nc(n=b.pc())&&(t.player=n.first),b.Nc(n=b.pc())&&(t.content=n.first),b.Nc(n=b.pc())&&(t.valuesAbilitiesSelect=n.first))},decls:87,vars:75,consts:[["translucent","true"],["slot","end"],[3,"disabled","click"],["name","close-outline"],["mode","indeterminate",4,"ngIf"],["fullscreen","true",3,"scrollbar"],["content",""],[1,"container"],[1,"header-horizontal-add-course",3,"linear"],["stepper",""],["label",""],["matStepLabel",""],[1,"grid-shuffle","c-pointer"],["id","grid",1,"row"],["size","12","size-sm","6","size-md","4","size-xl","3",4,"ngFor","ngForOf"],[1,"mt-3","mb-3"],["for","update-profile-form-2",1,"form-label"],[3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["class","mt-3 mb-3",4,"ngIf"],[1,"text-bold","text-center"],["bindValue","id","bindLabel","description","multiple","true",3,"items","ngModel","placeholder","addTag","addTagText","loading","ngModelChange","search"],["valuesAbilitiesSelect",""],["ng-label-tmp",""],["appearance","outline",1,"w-100"],["matInput","","required","",1,"w-100",3,"disabled","ngModel","ngModelChange"],["matInput","","matInput","","required","",1,"w-100",3,"disabled","ngModel","ngModelChange"],["appearance","outline","class","w-100",4,"ngIf"],[1,"mt-2"],["size","small","color","warning",3,"click"],["size","small","color","primary",3,"click"],[3,"ngModel","multiple","ngModelChange"],[3,"ngModel","ngModelChange"],["size","small","strong","",1,"step-add-btn-save-f-2",3,"disabled","click"],["mode","indeterminate"],["size","12","size-sm","6","size-md","4","size-xl","3"],[1,"mb-2",2,"height","8.5em",3,"click"],[1,"flex","flex-center"],[2,"font-size","2.4em",3,"name"],[1,"text-center"],[3,"value"],["for","subte-form-2",1,"form-label"],["aria-hidden","true",1,"ng-value-icon","left","ng-star-inserted",3,"click"],[1,"ng-value-label","ng-star-inserted"],[4,"ngIf"],[3,"ngSwitch"],["class","form-control w-100","required","","placeholder",'<iframe src="https://www.mipagina.com/codigo_embebido"></iframe>',3,"disabled","ngModel","ngModelChange",4,"ngSwitchCase"],["class","form-control w-100","required","",3,"disabled","ngModel","ngModelChange",4,"ngSwitchCase"],["activeBorderColor","#3F51B5",3,"accept","valueChanged",4,"ngSwitchCase"],["class","mt-2 mb-2",4,"ngSwitchCase"],["class","mt-2 mb-2 border-dashed dark:border-dark-5 rounded-md",4,"ngSwitchCase"],["required","","placeholder",'<iframe src="https://www.mipagina.com/codigo_embebido"></iframe>',1,"form-control","w-100",3,"disabled","ngModel","ngModelChange"],["required","",1,"form-control","w-100",3,"disabled","ngModel","ngModelChange"],["activeBorderColor","#3F51B5",3,"accept","valueChanged"],[1,"p-04","mt-2"],[2,"width","100%","border-left","3px solid #fada4a","padding-left","0"],[2,"padding-left","0",3,"opened","closed"],[1,"w-100",3,"ngModel","ngModelChange"],[1,"mt-3"],[2,"margin-top","20px"],["for","qualification",1,"form-label"],["id","qualification","type","number","autocomplete","off",1,"form-control",3,"ngModel","disabled","ngModelChange"],[1,"flex","flex-center","mt-2"],["appearance","outline"],["type","number","matInput","","min","0","max","23","placeholder","23",3,"ngModel","ngModelChange"],["type","number","matInput","","min","0","max","59","placeholder","00",3,"ngModel","ngModelChange"],["slot","start","value","1"],["slot","start","value","0"],[2,"width","100%","border-left","3px solid var(--ion-color-primary, #3880ff)"],[3,"opened","closed"],[2,"width","100%","border-left","3px solid var(--ion-color-success, #3880ff)"],["value","asc"],["value","random"],[2,"width","100%","border-left","3px solid var(--ion-color-danger, #3880ff)"],[1,"d-none"],["appearance","outline",2,"width","100%"],[1,"mt-2","mb-2"],["name","document-attach-outline"],[1,"mt-2","mb-2","border-dashed","dark:border-dark-5","rounded-md"],["class","grid-shuffle c-pointer",4,"ngIf"],[1,"mb-2"],[3,"click"],[2,"padding","0"],["size","small","expand","full","target","_blank",3,"href"],["name","help-circle-outline"],[2,"max-width","800px","margin","0 auto"],[3,"ngSwitch",4,"ngIf"],["size","small",3,"color","click",4,"ngIf"],["matInput","",1,"w-100",3,"disabled","ngModel","ngModelChange"],["autoplay","","muted","","style","--vm-player-theme: #6c89e8",3,"currentTime","vmCurrentTimeChange","vmFullscreenChange",4,"ngSwitchCase"],["controls","","style","--vm-player-theme: #6c89e8",3,"currentTime","vmCurrentTimeChange","vmFullscreenChange",4,"ngSwitchCase"],["autoplay","","theme","dark","style","--vm-player-theme: #6c89e8;",3,"currentTime","vmCurrentTimeChange","vmFullscreenChange",4,"ngSwitchCase"],["autoplay","","muted","",2,"--vm-player-theme","#6c89e8",3,"currentTime","vmCurrentTimeChange","vmFullscreenChange"],["player",""],[3,"videoId"],["controls","",2,"--vm-player-theme","#6c89e8",3,"currentTime","vmCurrentTimeChange","vmFullscreenChange"],["cookies","true",3,"videoId",4,"ngSwitchCase"],["type","video/mp4",3,"src"],["default","","kind","subtitles","srclang","en","label","English",3,"src",4,"ngIf"],["cookies","true",3,"videoId"],["default","","kind","subtitles","srclang","en","label","English",3,"src"],["autoplay","","theme","dark",2,"--vm-player-theme","#6c89e8",3,"currentTime","vmCurrentTimeChange","vmFullscreenChange"],["cross-origin","",3,"poster"],["size","small",3,"color","click"],["name","add-circle-outline",3,"matTooltip"],[1,"example-headers-align"],["hideToggle","",4,"ngFor","ngForOf"],["hideToggle",""],[2,"border-bottom","2px solid #ffca38",3,"innerHTML"],[3,"formContainer","disabled"],[1,"flex","space-btw"],["name","move-outline",1,"c-pointer"],["mat-button","",3,"click"],["name","create-outline"],["mat-button","","color","warn",3,"click"],["name","trash-outline"]],template:function(e,t){if(1&e){var n=b.hc();b.gc(0,"ion-header",0),b.gc(1,"ion-toolbar"),b.gc(2,"ion-title"),b.ed(3),b.tc(4,"translate"),b.fc(),b.gc(5,"ion-buttons",1),b.gc(6,"ion-button",2),b.oc("click",(function(){return t.dismiss()})),b.bc(7,"ion-icon",3),b.fc(),b.fc(),b.fc(),b.cd(8,lt,1,0,"mat-progress-bar",4),b.fc(),b.gc(9,"ion-content",5,6),b.gc(11,"div",7),b.gc(12,"mat-horizontal-stepper",8,9),b.gc(14,"mat-step",10),b.cd(15,ut,3,6,"ng-template",11),b.gc(16,"ion-grid",12),b.gc(17,"ion-row",13),b.cd(18,dt,7,2,"ion-col",14),b.fc(),b.fc(),b.fc(),b.gc(19,"mat-step",10),b.cd(20,gt,3,6,"ng-template",11),b.gc(21,"div",15),b.gc(22,"label",16),b.ed(23),b.tc(24,"translate"),b.fc(),b.gc(25,"ng-select",17),b.oc("ngModelChange",(function(e){return t.form.page_id=e}))("change",(function(){return t.changePageItems()})),b.cd(26,ft,2,2,"ng-option",18),b.fc(),b.fc(),b.cd(27,bt,6,5,"div",19),b.cd(28,ht,6,5,"div",19),b.gc(29,"div",15),b.gc(30,"h4",20),b.ed(31),b.tc(32,"translate"),b.fc(),b.gc(33,"ng-select",21,22),b.oc("ngModelChange",(function(e){return t.form.abilities=e}))("search",(function(){return t.getAbilitiesDescriptions()})),b.tc(35,"translate"),b.tc(36,"translate"),b.cd(37,kt,5,2,"ng-template",23),b.fc(),b.fc(),b.gc(38,"mat-form-field",24),b.gc(39,"mat-label"),b.ed(40),b.tc(41,"translate"),b.fc(),b.gc(42,"input",25),b.oc("ngModelChange",(function(e){return t.form.title=e})),b.fc(),b.fc(),b.gc(43,"mat-form-field",24),b.gc(44,"mat-label"),b.ed(45),b.tc(46,"translate"),b.fc(),b.gc(47,"textarea",26),b.oc("ngModelChange",(function(e){return t.form.description=e})),b.fc(),b.fc(),b.gc(48,"mat-form-field",24),b.gc(49,"mat-label"),b.ed(50),b.tc(51,"translate"),b.fc(),b.gc(52,"input",25),b.oc("ngModelChange",(function(e){return t.form.language=e})),b.fc(),b.fc(),b.cd(53,Jt,10,8,"div",27),b.gc(54,"div",28),b.gc(55,"ion-button",29),b.oc("click",(function(){b.Sc(n);var e=b.Oc(13);return t.previewStep(e,!0)})),b.ed(56),b.tc(57,"translate"),b.fc(),b.gc(58,"ion-button",30),b.oc("click",(function(){b.Sc(n);var e=b.Oc(13);return t.nextStep(e)})),b.ed(59),b.tc(60,"translate"),b.fc(),b.fc(),b.fc(),b.gc(61,"mat-step",10),b.cd(62,en,3,6,"ng-template",11),b.gc(63,"div",15),b.gc(64,"label",16),b.ed(65),b.tc(66,"translate"),b.fc(),b.gc(67,"ng-select",31),b.oc("ngModelChange",(function(e){return t.form.addressed_to=e})),b.cd(68,tn,2,2,"ng-option",18),b.fc(),b.fc(),b.cd(69,on,6,6,"div",19),b.gc(70,"div",15),b.gc(71,"label",16),b.ed(72),b.tc(73,"translate"),b.fc(),b.gc(74,"ng-select",32),b.oc("ngModelChange",(function(e){return t.form.context_id=e})),b.cd(75,cn,2,2,"ng-option",18),b.fc(),b.fc(),b.gc(76,"mat-form-field",24),b.gc(77,"mat-label"),b.ed(78),b.tc(79,"translate"),b.fc(),b.gc(80,"input",25),b.oc("ngModelChange",(function(e){return t.form.range_age=e})),b.fc(),b.fc(),b.gc(81,"ion-button",29),b.oc("click",(function(){b.Sc(n);var e=b.Oc(13);return t.previewStep(e)})),b.ed(82),b.tc(83,"translate"),b.fc(),b.gc(84,"ion-button",33),b.oc("click",(function(){return t.save()})),b.ed(85),b.tc(86,"translate"),b.fc(),b.fc(),b.fc(),b.fc(),b.fc()}2&e&&(b.Lb(3),b.gd(" ",b.uc(4,45,null!=t.resource_id?"pages.book.edit_resources":"pages.book.add_resources")," "),b.Lb(3),b.Ac("disabled",t.loading),b.Lb(2),b.Ac("ngIf",t.loading||t.loading_2),b.Lb(1),b.Bc("scrollbar",t.scrollbarStyle),b.Lb(3),b.Ac("linear",!0),b.Lb(6),b.Ac("ngForOf",t.types),b.Lb(5),b.fd(b.uc(24,47,"forms.page")),b.Lb(2),b.Ac("ngModel",t.form.page_id),b.Lb(1),b.Ac("ngForOf",t.pagesBook),b.Lb(1),b.Ac("ngIf",t.themesList.length>0),b.Lb(1),b.Ac("ngIf",t.subthemesList.length>0),b.Lb(3),b.fd(b.uc(32,49,"pages.book.select_ability")),b.Lb(2),b.Bc("addTagText",b.uc(36,53,"pages.book.add_ability")),b.Ac("items",t.abilities)("ngModel",t.form.abilities)("placeholder",b.uc(35,51,"pages.book.select_ability"))("addTag",!0)("addTag",t.newAbility)("loading",t.abilitiesLoading),b.Lb(7),b.fd(b.uc(41,55,"forms.title")),b.Lb(2),b.Ac("disabled",t.loading)("ngModel",t.form.title),b.Lb(3),b.fd(b.uc(46,57,"forms.description")),b.Lb(2),b.Ac("disabled",t.loading)("ngModel",t.form.description),b.Lb(3),b.fd(b.uc(51,59,"forms.language")),b.Lb(2),b.Ac("disabled",t.loading)("ngModel",t.form.language),b.Lb(1),b.Ac("ngIf",t.typeSelected),b.Lb(3),b.fd(b.uc(57,61,"buttons.preview")),b.Lb(3),b.gd("",b.uc(60,63,"buttons.next")," "),b.Lb(6),b.fd(b.uc(66,65,"forms.address_to")),b.Lb(2),b.Ac("ngModel",t.form.addressed_to)("multiple",!0),b.Lb(1),b.Ac("ngForOf",t.roles),b.Lb(1),b.Ac("ngIf",!t.resource_id),b.Lb(3),b.fd(b.uc(73,67,"forms.context")),b.Lb(2),b.Ac("ngModel",t.form.context_id),b.Lb(1),b.Ac("ngForOf",t.contexts),b.Lb(3),b.fd(b.uc(79,69,"forms.range_age")),b.Lb(2),b.Ac("disabled",t.loading)("ngModel",t.form.range_age),b.Lb(2),b.gd("",b.uc(83,71,"buttons.preview")," "),b.Lb(2),b.Ac("disabled",t.loading),b.Lb(1),b.fd(b.uc(86,73,"buttons.save")))},directives:[r.B,r.zb,r.xb,r.l,r.k,r.C,i.t,r.u,h.b,Qe.a,Qe.b,Qe.d,r.A,r.gb,i.s,Re.a,c.r,c.u,Re.f,Ge.c,Ge.g,We.b,c.c,c.C,Te.a,r.t,r.m,r.o,r.p,r.q,Re.o,i.x,i.y,Ke.b,r.H,Ze.a,Ze.c,Ze.g,Ze.h,Ze.f,Je.a,c.x,r.N,r.O,r.Y,r.Lb,r.P,r.X,r.Jb,et.a,tt.o,r.n,nt.F,nt.X,nt.o,nt.V,nt.T,k.a,ot.a,Ze.d,it.b],pipes:[m.d,i.E],styles:[".mat-stepper-horizontal[_ngcontent-%COMP%], .mat-stepper-vertical[_ngcontent-%COMP%]{background-color:var(--ion-background-color)!important}ng-select[_ngcontent-%COMP%]   .ng-dropdown-panel[_ngcontent-%COMP%]{width:auto!important}"]}),rn);function sn(e,t){1&e&&b.bc(0,"mat-progress-bar",10)}function ln(e,t){if(1&e){var n=b.hc();b.gc(0,"ion-card",13,14),b.oc("click",(function(){b.Sc(n);var e=b.sc().$implicit;return b.sc().addOrRemoveBook(e)})),b.gc(2,"ion-label"),b.bc(3,"img",15),b.gc(4,"p",16),b.ed(5),b.fc(),b.fc(),b.bc(6,"ion-checkbox",1),b.fc()}if(2&e){var o=b.sc().$implicit;b.Ac("ngClass",o.selected?"selected-card":""),b.Lb(3),b.Bc("src",o.portada,b.Vc),b.Ac("ngClass",o.selected?"":"img-no-selected"),b.Lb(2),b.fd(o.name)}}function un(e,t){if(1&e){var n=b.hc();b.gc(0,"ion-card",13),b.oc("click",(function(){b.Sc(n);var e=b.sc().$implicit;return b.sc().addOrRemoveBook(e)})),b.gc(1,"ion-label"),b.bc(2,"img",15),b.gc(3,"p",16),b.ed(4),b.fc(),b.fc(),b.bc(5,"ion-checkbox",1),b.fc()}if(2&e){var o=b.sc().$implicit;b.Ac("ngClass",o.selected?"selected-card":""),b.Lb(2),b.Bc("src",o.portada,b.Vc),b.Ac("ngClass",o.selected?"":"img-no-selected"),b.Lb(2),b.fd(o.name)}}function dn(e,t){if(1&e&&(b.gc(0,"ion-item",11),b.cd(1,ln,7,4,"ion-card",12),b.cd(2,un,6,4,"ion-card",12),b.fc()),2&e){var n=t.index,o=b.sc();b.Lb(1),b.Ac("ngIf",n+1==o.books.length),b.Lb(1),b.Ac("ngIf",n+1!=o.books.length)}}var gn,fn=((gn=function(){function e(t,n,o,i,c){_classCallCheck(this,e),this.modalCtrl=t,this.navParams=n,this.booksService=o,this.toastService=i,this.controlErroresService=c,this.scrollbarStyle=s.a.scrollbarStyle,this.book=null,this.books=[],this.loading_2=!1,this.loading=!1,this.book=n.data.book,null!=this.book&&Array.isArray(this.book.books)&&(this.books=this.book.books)}return _createClass(e,[{key:"ngOnInit",value:function(){0==this.book.length&&(this.toastService.showToast("No hay libros asciados"),this.dismiss())}},{key:"cloneUnities",value:function(){var e=this;this.loading=!0,this.booksService.cloneUnities(this.book.uuid,this.books.filter((function(e){return e.selected})).map((function(e){return e.uuid}))).subscribe((function(t){e.toastService.presentToast(t.message,"success"),e.loading=!1,e.books.forEach((function(e){return e.selected=!1})),e.dismiss()}),(function(t){e.controlErroresService.control(t),e.loading=!1}))}},{key:"addOrRemoveBook",value:function(e){e.selected=!e.selected}},{key:"dismiss",value:function(e){this.modalCtrl.dismiss(e)}}]),e}()).\u0275fac=function(e){return new(e||gn)(b.ac(r.Db),b.ac(r.Fb),b.ac(I.a),b.ac(p.a),b.ac(u.a))},gn.\u0275cmp=b.Ub({type:gn,selectors:[["app-clone-unities"]],decls:15,vars:8,consts:[["translucent","true"],["slot","end"],[3,"disabled","click"],["name","close-outline"],["mode","indeterminate",4,"ngIf"],["fullscreen","true",3,"scrollbar"],["content",""],[1,"container-flex-x","step-add-btn-select-book-f-2"],["class","item-cs",4,"ngFor","ngForOf"],["shape","round",3,"click"],["mode","indeterminate"],[1,"item-cs"],[3,"ngClass","click",4,"ngIf"],[3,"ngClass","click"],["theLastReference",""],["alt","",1,"book-portada",3,"ngClass","src"],[1,"m-1","text-center","overflow-txt"]],template:function(e,t){1&e&&(b.gc(0,"ion-header",0),b.gc(1,"ion-toolbar"),b.gc(2,"ion-title"),b.ed(3),b.fc(),b.gc(4,"ion-buttons",1),b.gc(5,"ion-button",2),b.oc("click",(function(){return t.dismiss()})),b.bc(6,"ion-icon",3),b.fc(),b.fc(),b.fc(),b.cd(7,sn,1,0,"mat-progress-bar",4),b.fc(),b.gc(8,"ion-content",5,6),b.gc(10,"ion-list",7),b.cd(11,dn,3,2,"ion-item",8),b.fc(),b.gc(12,"ion-button",9),b.oc("click",(function(){return t.cloneUnities()})),b.ed(13),b.tc(14,"translate"),b.fc(),b.fc()),2&e&&(b.Lb(3),b.gd(" ",null!=t.book?t.book.name:"-"," "),b.Lb(2),b.Ac("disabled",t.loading),b.Lb(2),b.Ac("ngIf",t.loading||t.loading_2),b.Lb(1),b.Bc("scrollbar",t.scrollbarStyle),b.Lb(3),b.Ac("ngForOf",t.books),b.Lb(2),b.fd(b.uc(14,6,"buttons.clone")))},directives:[r.B,r.zb,r.xb,r.l,r.k,r.C,i.t,r.u,h.b,r.O,i.s,Te.a,r.H,r.m,i.q,r.N,r.r,r.c],pipes:[m.d],styles:[".book-portada[_ngcontent-%COMP%]{min-width:150px;height:200px}.container-flex-x[_ngcontent-%COMP%]{display:flex;overflow:auto;flex-wrap:nowrap}.container-flex-x[_ngcontent-%COMP%]   .item-cs[_ngcontent-%COMP%]{min-width:190px!important;max-width:190px!important;cursor:pointer}.container-flex-x[_ngcontent-%COMP%]   .item-cs[_ngcontent-%COMP%]   .img-no-selected[_ngcontent-%COMP%]{filter:grayscale(100%)}.selected-card[_ngcontent-%COMP%]{background:rgba(253,255,119,.7)}"]}),gn),pn=n("JlEf"),bn=n("CHya"),mn=["content"],hn=["theLastReference"];function vn(e,t){1&e&&b.bc(0,"mat-progress-bar",9)}var _n,kn=((_n=function(){function e(t,n,o){var i=this;_classCallCheck(this,e),this.navParams=t,this.modalCrl=n,this.scroolToBottomService=o,this.book_id=null,this.loading=!1,this.scrollbarStyle=s.a.scrollbarStyle,this.showVisorImages=!1,this.book_id=t.data.book_id,this.scrollToPages=t.data.scrollToPages,Array.isArray(this.scrollToPages)||(this.scrollToPages=[]),o.get$().subscribe((function(e){i.scrollToBottom(e)}))}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ngAfterViewInit",value:function(){}},{key:"dismiss",value:function(){this.modalCrl.dismiss()}},{key:"scrollToBottom",value:function(e){console.log(e),this.content.scrollToPoint(0,e,4e3)}}]),e}()).\u0275fac=function(e){return new(e||_n)(b.ac(r.Fb),b.ac(r.Db),b.ac(pn.a))},_n.\u0275cmp=b.Ub({type:_n,selectors:[["app-list-index-resources"]],viewQuery:function(e,t){var n;1&e&&(b.ld(mn,!0),b.ld(hn,!0,b.o)),2&e&&(b.Nc(n=b.pc())&&(t.content=n.first),b.Nc(n=b.pc())&&(t.theLastReference=n))},decls:12,vars:9,consts:[["translucent","true"],[3,"ngClass"],["slot","end"],[3,"disabled","click"],["name","close-outline"],["mode","indeterminate",4,"ngIf"],["fullscreen","true",3,"scrollbar"],["content",""],[3,"book_id","scrollToPages","loadginEmmit","showVisorImagesEmmit"],["mode","indeterminate"]],template:function(e,t){1&e&&(b.gc(0,"ion-header",0),b.gc(1,"ion-toolbar",1),b.gc(2,"ion-title"),b.ed(3),b.tc(4,"translate"),b.fc(),b.gc(5,"ion-buttons",2),b.gc(6,"ion-button",3),b.oc("click",(function(){return t.dismiss()})),b.bc(7,"ion-icon",4),b.fc(),b.fc(),b.fc(),b.cd(8,vn,1,0,"mat-progress-bar",5),b.fc(),b.gc(9,"ion-content",6,7),b.gc(11,"panel-index-resources",8),b.oc("loadginEmmit",(function(e){return t.loading=e}))("showVisorImagesEmmit",(function(e){return t.showVisorImages=e})),b.fc(),b.fc()),2&e&&(b.Lb(1),b.Ac("ngClass",t.showVisorImages?"d-none":""),b.Lb(2),b.gd(" ",b.uc(4,7,"pages.book.index_resources")," "),b.Lb(3),b.Ac("disabled",t.loading),b.Lb(2),b.Ac("ngIf",t.loading),b.Lb(1),b.Bc("scrollbar",t.scrollbarStyle),b.Lb(2),b.Ac("book_id",t.book_id)("scrollToPages",t.scrollToPages))},directives:[r.B,r.zb,i.q,r.xb,r.l,r.k,r.C,i.t,r.u,h.b,bn.a,Te.a],pipes:[m.d],styles:["p[_ngcontent-%COMP%]{color:var(--ion-color-dark)}"]}),_n),yn=n("PdCO"),Cn=["theLastReference"];function xn(e,t){1&e&&b.bc(0,"mat-progress-bar",14)}function wn(e,t){1&e&&(b.gc(0,"div"),b.bc(1,"img",15),b.gc(2,"a",16),b.ed(3,"Vector de Tecnolog\xeda creado por stories - www.freepik.es"),b.fc(),b.fc())}function On(e,t){1&e&&(b.gc(0,"div",17),b.bc(1,"img",18),b.gc(2,"h2",19),b.gc(3,"strong"),b.ed(4),b.tc(5,"translate"),b.fc(),b.fc(),b.fc()),2&e&&(b.Lb(4),b.fd(b.uc(5,1,"pages.book.resources_not_found")))}function Pn(e,t){if(1&e){var n=b.hc();b.gc(0,"ion-col",20),b.oc("click",(function(){b.Sc(n);var e=t.$implicit;return b.sc().redirectPage(e)})),b.gc(1,"div",21),b.gc(2,"ion-item",22),b.bc(3,"img",23),b.fc(),b.gc(4,"p",24),b.ed(5),b.tc(6,"translate"),b.fc(),b.fc(),b.fc()}if(2&e){var o=t.$implicit,i=b.sc();b.Lb(3),b.Dc("src","",o.thumbnails,"&book_id=",i.book_id,"&token_refrs=",i.api_token,"",b.Vc),b.Bc("alt",o.pg),b.Lb(2),b.hd("",b.uc(6,6,"forms.page")," ",o.pg,"")}}function Mn(e,t){1&e&&b.bc(0,"span",null,25)}var Sn,Ln,An=((Sn=function(){function e(t,n,o,i,c){_classCallCheck(this,e),this.navParams=t,this.bookService=n,this.controlErroresService=o,this.modalCrl=i,this.tokenService=c,this.book_id=null,this.loading=!1,this.scrollbarStyle=s.a.scrollbarStyle,this.pages=[],this.totalPages=1,this.api_token="",this.this_page=1,this.imageObjectShow=[],this.selectedImageIndex=-1,this.showVisorImages=!1,this.book_id=t.data.book_id,this.api_token=this.tokenService.getToken(!1)}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ngAfterViewInit",value:function(){var e=this;setTimeout((function(){e.getPages(),e.intersectionObserver(),e.theLastReference.changes.subscribe((function(t){t.last&&e.observer.observe(t.last.nativeElement)}))}))}},{key:"intersectionObserver",value:function(){var e=this;this.observer=new IntersectionObserver((function(t){t[0].isIntersecting&&e.totalPages>=e.this_page&&e.getPages(!1,{})}),{root:null,rootMargin:"0px",threshold:.5})}},{key:"getPages",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];arguments.length>1&&void 0!==arguments[1]&&arguments[1],t&&(this.this_page=1,this.pages=[]),this.loading=!0,this.bookService.getPagesByBook(this.book_id,{paginate:50,page:this.this_page}).subscribe((function(t){e.totalPages=t.last_page,e.pages=e.pages.concat(t.pages),e.loading=!1,e.this_page++}),(function(t){e.controlErroresService.control(t),e.loading=!1}))}},{key:"redirectPage",value:function(e){location.href="/app/main/visor/"+this.book_id+"#mybook/"+e.pg,this.dismiss()}},{key:"showLightbox",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;this.selectedImageIndex=t,this.imageObjectShow=e,this.showVisorImages=!0}},{key:"closeEventHandler",value:function(){this.showVisorImages=!1,this.imageObjectShow=[],this.selectedImageIndex=-1}},{key:"dismiss",value:function(){this.modalCrl.dismiss()}}]),e}()).\u0275fac=function(e){return new(e||Sn)(b.ac(r.Fb),b.ac(I.a),b.ac(u.a),b.ac(r.Db),b.ac(Le.a))},Sn.\u0275cmp=b.Ub({type:Sn,selectors:[["app-list-thumbnails"]],viewQuery:function(e,t){var n;1&e&&b.ld(Cn,!0,b.o),2&e&&b.Nc(n=b.pc())&&(t.theLastReference=n)},decls:18,vars:14,consts:[["translucent","true"],[3,"ngClass"],["slot","end"],[3,"disabled","click"],["name","close-outline"],["mode","indeterminate",4,"ngIf"],["fullscreen","true",3,"scrollbar"],[1,"container"],[4,"ngIf"],["style","max-width: 400px; margin: auto;",4,"ngIf"],[1,"grid-shuffle"],["id","grid",1,"row"],["size","12","size-sm","6","size-md","3","size-xl","6","class","relative c-pointer",3,"click",4,"ngFor","ngForOf"],[3,"images","imageIndex","show","close"],["mode","indeterminate"],["src","/assets/images/5063183-min.jpg","alt","loading",1,"w-100"],["target","_blank","href","https://www.freepik.es/vectores/tecnologia"],[2,"max-width","400px","margin","auto"],["src","/assets/images/relax.png","alt","loading",1,"w-100"],[1,"text-center"],["size","12","size-sm","6","size-md","3","size-xl","6",1,"relative","c-pointer",3,"click"],[1,"border-1px-card"],[2,"width","100%"],[3,"src","alt"],[1,"text-center","bold","bottom-para-page"],["theLastReference",""]],template:function(e,t){1&e&&(b.gc(0,"ion-header",0),b.gc(1,"ion-toolbar",1),b.gc(2,"ion-title"),b.ed(3),b.tc(4,"translate"),b.fc(),b.gc(5,"ion-buttons",2),b.gc(6,"ion-button",3),b.oc("click",(function(){return t.dismiss()})),b.bc(7,"ion-icon",4),b.fc(),b.fc(),b.fc(),b.cd(8,xn,1,0,"mat-progress-bar",5),b.fc(),b.gc(9,"ion-content",6),b.gc(10,"div",7),b.cd(11,wn,4,0,"div",8),b.cd(12,On,6,3,"div",9),b.gc(13,"ion-grid",10),b.gc(14,"ion-row",11),b.cd(15,Pn,7,8,"ion-col",12),b.fc(),b.fc(),b.cd(16,Mn,2,0,"span",8),b.fc(),b.gc(17,"ng-image-fullscreen-view",13),b.oc("close",(function(){return t.closeEventHandler()})),b.fc(),b.fc()),2&e&&(b.Lb(1),b.Ac("ngClass",t.showVisorImages?"d-none":""),b.Lb(2),b.gd(" ",b.uc(4,12,"pages.book.thumbnails")," "),b.Lb(3),b.Ac("disabled",t.loading),b.Lb(2),b.Ac("ngIf",t.loading),b.Lb(1),b.Bc("scrollbar",t.scrollbarStyle),b.Lb(2),b.Ac("ngIf",t.loading&&0==t.pages.length),b.Lb(1),b.Ac("ngIf",!t.loading&&0==t.pages.length),b.Lb(3),b.Ac("ngForOf",t.pages),b.Lb(1),b.Ac("ngIf",0!=t.pages.length),b.Lb(1),b.Ac("images",t.imageObjectShow)("imageIndex",t.selectedImageIndex)("show",t.showVisorImages))},directives:[r.B,r.zb,i.q,r.xb,r.l,r.k,r.C,i.t,r.u,h.b,r.A,r.gb,i.s,yn.a,Te.a,r.t,r.H],pipes:[m.d],styles:[".bottom-para-page[_ngcontent-%COMP%]{position:absolute;left:25%;bottom:20px;background:rgba(0,0,0,.397);border-radius:5px;color:#fff;z-index:55;font-size:1.2em}.relative[_ngcontent-%COMP%]{position:relative}.border-1px-card[_ngcontent-%COMP%]{border:1px solid #000;margin:5px}"]}),Sn),In=n("beT7"),Tn=n("5eHb"),Rn=n("XhcP"),zn=n("3NU+"),En=((Ln=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){this.buildTools()}},{key:"buildTools",value:function(){var e=this,t=l.i.book+"save-linears",n=l.i.book+"get-linears";this.colaborar_id&&(t+="?colaborar_id="+this.colaborar_id);var o=this.colorA;document.createElement("div").className="center menuFlotante";var i=document.createElement("div");i.id="menuFiguras",i.className="submenu";var c=document.createElement("div");c.id="menuFiguras",c.className="submenu";var r=document.createElement("div");r.id="menuFiguras2",r.className="submenu";var a=document.createElement("div");a.id="menuFiguras",a.className="submenu";var s=$("<div class='simptip-position-top' style='background-color: #F5F5F5;' data-toggle='tooltip' data-tooltip='Cuadrado'><img src='assets/img/icons/cuadrado.png' width='30'/></div>"),u=$("<div class='simptip-position-top' style='background-color: #EEE' data-toggle='tooltip' data-tooltip='C\xedrculo'><img src='assets/img/icons/circulo.png' width='30'/></div>"),d=$("<div class='simptip-position-top' style='background-color: #F5F5F5' data-toggle='tooltip' data-tooltip='Tri\xe1ngulo'><img src='assets/img/icons/triangulo.png' width='30'/></div>"),g=$("<div style='background-color: #F5F5F5;'><input id='size' type ='range' min='4' style='width:100%' max='100'></div>"),f=$("<div style='background-color: #F5F5F5;'><input id='colorNote' type ='text'></div>");$(i).append(s),$(i).append(u),$(i).append(d),$(c).append(g),$(r).append($("<div style='background-color: #F5F5F5;'><input id='size-second' type ='range' min='4' style='width:100%' max='100'></div>")),$(a).append(f);var p=new Menu("#myMenu"),b=new Item("assets/img/icons/herramientas.png","rgba(0,0,0,0)","Herramientas",null,null,!0),m=new Item("assets/img/icons/no-mostrar.png","#F5F5F5","Mostrar Lienzo",null,{showCanvas:!0,classcss:["showCanvas"]},!0),h=new Item("assets/img/icons/no_mano_alzada.png","#EEE","Seleccionar","noDrawing(canvasR);",{toggleActive:!0,showAlwaysCanvas:!0,classcss:["dibujo"]},!0),v=new Item("assets/img/icons/figuras.png","#F5F5F5","Figuras",null,{childElement:i}),_=new Item("assets/img/icons/texto.png","#F5F5F5","Agregar Nota",null,{childElement:a}),k=new Item("assets/img/icons/borrador.png","#EEE","Borrar","eliminar(canvasR)",{toggleActive:!0,showAlwaysCanvas:!0}),y=(new Item("assets/img/icons/text-to-speech.png","#EEE","Text to speech","textToSpeech(canvasR)",{toggleActive:!0,showAlwaysCanvas:!0}),new Item("assets/img/icons/guardar.png","#F5F5F5","Guardar","guardado(canvasR, '"+this.book_id+"', '"+t+"', '"+n+"', '"+this.colaborar_id+"')")),C=new Item("assets/img/icons/mano_alzada.png","#EEE","Mano Alzada","$('#canvas-wrapper-drawing').css('pointer-events','auto');freeDrawing(canvasR);canvasR.freeDrawingBrush.color = 'RGBA(0,0,0)';canvasR.mousecursor.set('fill', 'RGBA(0,0,0)');",{toggleActive:!0,showAlwaysCanvas:!0,strokePicker:!0,childElement:c}),x=new Item("assets/img/icons/mano_alzada.png","#EEE","Resaltador","$('#canvas-wrapper-drawing').css('pointer-events','auto');freeDrawing(canvasR);canvasR.freeDrawingBrush.color = 'RGBA(13,231,0,0.26)';canvasR.mousecursor.set('fill', 'RGBA(13,231,0,0.26)');",{toggleActive:!0,showAlwaysCanvas:!0,strokePicker:!0,childElement:r}),w=new Item("assets/img/icons/mano.png","#EEE","Mover lienzo","noDrawing(canvasR);moveCanvas(canvasR)",{toggleActive:!0}),O=new Item("tint","#F5F5F5","Seleccionar Color",null,{colorPicker:!0});new Item("assets/img/icons/no-mostrar.png","#F5F5F5","Mostrar Texto","$('#canvas-wrapper-drawing').css('pointer-events','auto');mostrarFigura(canvasR.getActiveObject(),canvasR)",{toggleActive:!0}),p.add(b),p.add(m),p.add(h),p.add(y),p.add(k),p.add(_),p.add(C),p.add(x),p.add(v),p.add(w),p.add(O),u.on("click",(function(){showCanvas(),noDrawing(e.canvasR),$("#canvas-wrapper").css("pointer-events","auto"),circulo(e.canvasR,o)})),s.on("click",(function(){showCanvas(),noDrawing(e.canvasR),$("#canvas-wrapper").css("pointer-events","auto"),cuadrilatero(e.canvasR,o)})),d.on("click",(function(){showCanvas(),noDrawing(e.canvasR),$("#canvas-wrapper").css("pointer-events","auto"),triangulo(e.canvasR,o)})),$('[data-toggle="tooltip"]'),"undefined"!=typeof iniciarPaleta&&jQuery.isFunction(iniciarPaleta)?(iniciarPaleta(".custom"),iniciarPaleta("#colorNote",!0,[["#f9b233","#ea534a","#00a1db","#97c22c"]],!0,(function(e,t){console.log("colorTexto",t),showCanvas(),texto(canvasR,t.toHexString()),$("#canvas-wrapper").css("pointer-events","auto")}),"#f9b233",!0)):($(".custom").spectrum({showPalette:!0,color:"black",hideAfterPaletteSelect:!0,showButtons:!1,preferredFormat:"rgb",palette:[["black","white","blanchedalmond","rgb(255, 128, 0);","hsv 100 70 50"],["red","yellow","green","blue","violet"]]}),$(".custom").change((function(e,t){o=t}))),p.close(),setTimeout((function(){p.close()}),2e3),$(document).delay(50).queue((function(e){p.open(),e(),$(document).delay(100).queue((function(e){p.close(),p.start=!1,e()}))})),setTimeout((function(){$("#size").on("change",(function(){var e=parseInt($(this).val(),10)||1;canvasR.freeDrawingBrush.width=e,canvasR.mousecursor.set({left:canvasR.mousecursor.left,top:canvasR.mousecursor.top,radius:e/2}).setCoords().canvas.renderAll()})),$("#size-second").on("change",(function(){var e=parseInt($(this).val(),10)||1;canvasR.freeDrawingBrush.width=e,canvasR.mousecursor.set({left:canvasR.mousecursor.left,top:canvasR.mousecursor.top,radius:e/2}).setCoords().canvas.renderAll()}))}),1e3)}},{key:"saveToolsMarks",value:function(){var e=[],t=[];this.canvasR.getObjects().map((function(n){var o=n.get("type");if("path"==o){console.log(n);var i=tinycolor(n.stroke),c=n.hasOwnProperty("scaleX")?n.scaleX:1,r=n.hasOwnProperty("scaleY")?n.scaleY:1,a=n.hasOwnProperty("id")?n.id:-1,s=n.getCenterPoint();console.log("idG",n.id);var l={id:a,lineColor:i.toRgbString(),path:n.path,strokeLineCap:n.strokeLineCap,strokeLineJoin:n.strokeLineJoin,size:n.strokeWidth,tipo:o,scaleX:c,scaleY:r,iniciox:s.x,inicioy:s.y,angle:n.angle};t.push(l)}else{if(n.tipo>0&&n.tipo<4){console.log(n.stroke);var u=tinycolor(n.stroke);console.log(u.toHexString()),e.push({tipo:n.tipo,iniciox:n.left,inicioy:n.top,scalex:n.scaleX,scaley:n.scaleY,id:n.id,color:u.toHexString(),stroke:n.strokeWidth,angle:n.angle})}4==n.tipo&&(console.log(n.fill),u=tinycolor(n.fill),console.log(u.toHexString()),e.push({tipo:n.tipo,iniciox:n.left,inicioy:n.top,scalex:n.scaleX,scaley:n.scaleY,id:n.id,color:u.toHexString(),stroke:n.strokeWidth,angle:n.angle})),5==n.tipo&&(u=tinycolor(n.color),e.push({tipo:n.tipo,iniciox:n.left,inicioy:n.top,scalex:n.width,scaley:n.scaleY,id:n.id,texto:n.text,color:u.toHexString(),stroke:n.strokeWidth,visible:1,angle:n.angle})),-1==n.tipo&&(u=tinycolor(n.color),e.push({tipo:5,iniciox:n.left,inicioy:n.top,scalex:n.width,scaley:n.scaleY,id:n.id,texto:n.texto,color:u.toHexString(),stroke:n.strokeWidth,visible:0,angle:n.angle}))}})),console.log(e)}}]),e}()).\u0275fac=function(e){return new(e||Ln)},Ln.\u0275cmp=b.Ub({type:Ln,selectors:[["tools-visor"]],inputs:{canvasR:"canvasR",colorA:"colorA",actualPage:"actualPage",book_id:"book_id",colaborar_id:"colaborar_id"},decls:2,vars:0,consts:[["id","menuHerramientas",1,"center","menuFlotante"],["id","myMenu"]],template:function(e,t){1&e&&(b.gc(0,"div",0),b.bc(1,"div",1),b.fc())},styles:[".center[_ngcontent-%COMP%]{position:absolute;z-index:100000!important;margin:auto;top:60px;right:-35%;left:0}.menuFlotante[_ngcontent-%COMP%]{width:50px;height:50px}.menuFlotante[_ngcontent-%COMP%]   .submenu[_ngcontent-%COMP%]{display:none}.title[_ngcontent-%COMP%]{width:300px;height:10px;top:60px}.item[_ngcontent-%COMP%]{position:absolute;left:0;top:0;width:50px;height:50px;background-color:#fff;cursor:pointer;text-align:center;line-height:50px}.item.active[_ngcontent-%COMP%]{background-color:#ff0!important}input[type=range][_ngcontent-%COMP%]{display:block;width:100%}"]}),Ln),Fn=["mybook"],jn=["drawer"],Bn=["drawerPrinting"],Dn=["drawerUnities"];function Un(e,t){if(1&e&&(b.gc(0,"ion-button",57),b.tc(1,"translate"),b.bc(2,"ion-icon",58),b.fc()),2&e){var n=b.sc();b.Ac("href",n.return_back_url)("matTooltip",b.uc(1,2,"forms.return"))}}function $n(e,t){if(1&e){var n=b.hc();b.gc(0,"ion-button",59),b.oc("click",(function(){b.Sc(n);var e=b.sc();return e.resizeObject(),e.drawerUnities.toggle()})),b.tc(1,"translate"),b.bc(2,"ion-icon",60),b.fc()}2&e&&b.Ac("matTooltip",b.uc(1,1,"pages.book.unities"))}function Nn(e,t){1&e&&(b.gc(0,"span",61),b.ed(1),b.tc(2,"translate"),b.fc()),2&e&&(b.Lb(1),b.gd(" - ",b.uc(2,1,"pages.book.enabled_edit_mode"),""))}function qn(e,t){if(1&e&&b.bc(0,"list-users-online",67),2&e){var n=b.sc(2);b.Ac("book_id",n.book_id)("colaborar_id",n.colaborar_uuid)("colaborar",n.colaborarItem)("book",n.bookItem)}}function Hn(e,t){if(1&e){var n=b.hc();b.gc(0,"ion-button",59),b.oc("click",(function(){b.Sc(n);var e=b.sc(2),t=b.Oc(31);return e.resizeObject(),t.toggle()})),b.tc(1,"translate"),b.bc(2,"ion-icon",68),b.fc()}2&e&&b.Ac("matTooltip",b.uc(1,1,"pages.book.printing_pages"))}function Vn(e,t){if(1&e){var n=b.hc();b.gc(0,"ion-button",59),b.oc("click",(function(){return b.Sc(n),b.sc(2).showThumbnails()})),b.tc(1,"translate"),b.bc(2,"ion-icon",69),b.fc()}2&e&&b.Ac("matTooltip",b.uc(1,1,"pages.book.thumbnails"))}function Yn(e,t){if(1&e){var n=b.hc();b.gc(0,"ion-button",59),b.oc("click",(function(){return b.Sc(n),b.sc(2).addResourcePanel()})),b.tc(1,"translate"),b.bc(2,"ion-icon",70),b.fc()}2&e&&b.Ac("matTooltip",b.uc(1,1,"pages.book.add_resources"))}function Xn(e,t){if(1&e){var n=b.hc();b.gc(0,"ion-button",71),b.oc("click",(function(){return b.Sc(n),b.sc(2).enableModeResources()})),b.tc(1,"translate"),b.bc(2,"ion-icon",72),b.fc()}if(2&e){var o=b.sc(2);b.ad(o.modeEditionEnable?"border: 1px solid red":""),b.Ac("matTooltip",b.uc(1,4,"pages.course.enable_edition_mode"))("color",o.modeEditionEnable?"warning":"success")}}function Qn(e,t){if(1&e){var n=b.hc();b.gc(0,"ion-button",59),b.oc("click",(function(){return b.Sc(n),b.sc(2).openMenuRight("resource")})),b.tc(1,"translate"),b.bc(2,"ion-icon",73),b.fc()}2&e&&b.Ac("matTooltip",b.uc(1,1,"pages.book.resources"))}function Gn(e,t){if(1&e){var n=b.hc();b.gc(0,"ion-buttons",62),b.cd(1,qn,1,4,"list-users-online",63),b.cd(2,Hn,3,3,"ion-button",4),b.cd(3,Vn,3,3,"ion-button",4),b.gc(4,"ion-button",59),b.oc("click",(function(){return b.Sc(n),b.sc().showIndexResources()})),b.tc(5,"translate"),b.bc(6,"ion-icon",64),b.fc(),b.cd(7,Yn,3,3,"ion-button",4),b.cd(8,Xn,3,6,"ion-button",65),b.cd(9,Qn,3,3,"ion-button",4),b.gc(10,"ion-button",59),b.oc("click",(function(){return b.Sc(n),b.sc().openMenuRight("search")})),b.tc(11,"translate"),b.bc(12,"ion-icon",66),b.fc(),b.fc()}if(2&e){var o=b.sc();b.Lb(1),b.Ac("ngIf",null!=o.colaborarItem&&null!=o.colaborar_uuid),b.Lb(1),b.Ac("ngIf",o.pintingPages.length>0),b.Lb(1),b.Ac("ngIf",o.has_thumbnails),b.Lb(1),b.Ac("matTooltip",b.uc(5,8,"pages.book.index_resources")),b.Lb(3),b.Ac("ngIf",o.bookItem.add_resource),b.Lb(1),b.Ac("ngIf",o.listTypesResources.length>0&&o.bookItem.add_resource),b.Lb(1),b.Ac("ngIf",o.listTypesResources.length>0),b.Lb(1),b.Ac("matTooltip",b.uc(11,10,"forms.search"))}}function Wn(e,t){1&e&&b.bc(0,"mat-progress-bar",74)}function Kn(e,t){if(1&e){var n=b.hc();b.gc(0,"ion-button",87),b.oc("click",(function(){b.Sc(n);var e=b.sc().$implicit;return b.sc(2).typingUnity(e)})),b.bc(1,"ion-icon",72),b.fc()}}function Zn(e,t){if(1&e){var n=b.hc();b.gc(0,"ion-button",88),b.oc("click",(function(){b.Sc(n);var e=b.sc(),t=e.$implicit,o=e.index;return b.sc(2).deleteUnity(t.uuid,o)})),b.bc(1,"ion-icon",89),b.fc()}}function Jn(e,t){if(1&e&&(b.gc(0,"ion-label",97),b.ed(1),b.fc()),2&e){var n=b.sc().$implicit;b.Lb(1),b.fd(n.start_page)}}function eo(e,t){if(1&e){var n=b.hc();b.gc(0,"ion-button",98),b.oc("click",(function(){b.Sc(n);var e=b.sc().$implicit;return b.sc(3).openModalAbilities(e)})),b.tc(1,"translate"),b.ed(2),b.fc()}if(2&e){var o=b.sc().$implicit;b.Ac("matTooltip",b.uc(1,2,"buttons.show_abilities")),b.Lb(2),b.gd(" ",o.start_page," ")}}function to(e,t){if(1&e){var n=b.hc();b.gc(0,"ion-button",87),b.oc("click",(function(){b.Sc(n);var e=b.sc().$implicit,t=b.sc().$implicit;return b.sc(2).typingThemeBook(t,e)})),b.bc(1,"ion-icon",72),b.fc()}}function no(e,t){if(1&e){var n=b.hc();b.gc(0,"ion-button",88),b.oc("click",(function(){b.Sc(n);var e=b.sc(),t=e.$implicit,o=e.index,i=b.sc().$implicit;return b.sc(2).deleteTheme(t.uuid,i,o)})),b.bc(1,"ion-icon",89),b.fc()}}function oo(e,t){if(1&e){var n=b.hc();b.gc(0,"ion-button",87),b.oc("click",(function(){b.Sc(n);var e=b.sc().$implicit,t=b.sc(2).$implicit;return b.sc(2).typingSubThemeBook(t,e)})),b.bc(1,"ion-icon",72),b.fc()}}function io(e,t){if(1&e){var n=b.hc();b.gc(0,"ion-button",88),b.oc("click",(function(){b.Sc(n);var e=b.sc(),t=e.$implicit,o=e.index,i=b.sc().$implicit;return b.sc(3).deleteSubtheme(t.uuid,i,o)})),b.bc(1,"ion-icon",89),b.fc()}}function co(e,t){if(1&e){var n=b.hc();b.gc(0,"ion-item",99),b.oc("click",(function(){b.Sc(n);var e=t.$implicit;return b.sc(4).redirectPage(e.start_page)})),b.gc(1,"ion-label",97),b.ed(2),b.fc(),b.gc(3,"ion-label",100),b.ed(4),b.fc(),b.cd(5,oo,2,0,"ion-button",101),b.cd(6,io,2,0,"ion-button",83),b.fc()}if(2&e){var o=t.$implicit,i=b.sc(4);b.Ac("cdkDragDisabled",!i.bookItem.is_edit),b.Lb(2),b.fd(o.start_page),b.Lb(2),b.fd(o.name),b.Lb(1),b.Ac("ngIf",i.bookItem.is_edit),b.Lb(1),b.Ac("ngIf",i.bookItem.is_edit)}}function ro(e,t){if(1&e){var n=b.hc();b.gc(0,"ion-button",103),b.oc("click",(function(){b.Sc(n);var e=b.sc(2).$implicit;return b.sc(3).typingSubThemeBook(e)})),b.ed(1),b.tc(2,"translate"),b.fc()}2&e&&(b.Lb(1),b.fd(b.uc(2,1,"buttons.add_subtema")))}function ao(e,t){if(1&e&&(b.gc(0,"ion-item",1),b.cd(1,ro,3,3,"ion-button",102),b.fc()),2&e){var n=b.sc().$implicit,o=b.sc(3);b.Ac("ngClass",o.showSubItems.subthemes&&!n.collapse_down?"":"d-none"),b.Lb(1),b.Ac("ngIf",o.bookItem.is_edit)}}function so(e,t){if(1&e){var n=b.hc();b.ec(0),b.gc(1,"ion-item",90),b.oc("cdkDragStarted",(function(e){return b.Sc(n),b.sc(3)._dragStartedHandlerThemes(e)}))("click",(function(){b.Sc(n);var e=t.$implicit;return b.sc(3).redirectPage(e.start_page)})),b.cd(2,Jn,2,1,"ion-label",91),b.cd(3,eo,3,4,"ion-button",92),b.gc(4,"ion-label",93),b.ed(5),b.fc(),b.cd(6,to,2,0,"ion-button",94),b.cd(7,no,2,0,"ion-button",83),b.gc(8,"ion-icon",84),b.oc("click",(function(){var e=t.$implicit;return e.collapse_down=!e.collapse_down})),b.fc(),b.fc(),b.gc(9,"div",85),b.oc("cdkDropListDropped",(function(e){b.Sc(n);var o=t.$implicit;return b.sc(3).dropEventSubtemes(e,o)})),b.cd(10,co,7,5,"ion-item",95),b.fc(),b.cd(11,ao,2,2,"ion-item",96),b.dc()}if(2&e){var o=t.$implicit,i=b.sc(3);b.Lb(1),b.Ac("cdkDragDisabled",!i.bookItem.is_edit),b.Lb(1),b.Ac("ngIf",o.abilities_count<=0&&!i.bookItem.is_edit),b.Lb(1),b.Ac("ngIf",i.bookItem.is_edit||o.abilities_count>0),b.Lb(2),b.fd(o.name),b.Lb(1),b.Ac("ngIf",i.bookItem.is_edit),b.Lb(1),b.Ac("ngIf",i.bookItem.is_edit),b.Lb(1),b.Ac("name",o.collapse_down?"chevron-up-outline":"chevron-down-outline"),b.Lb(1),b.Ac("ngClass",i.showSubItems.subthemes&&!o.collapse_down?"":"d-none"),b.Lb(1),b.Ac("ngForOf",o.subthemes),b.Lb(1),b.Ac("ngIf",i.bookItem.is_edit)}}function lo(e,t){if(1&e){var n=b.hc();b.gc(0,"ion-item",104),b.gc(1,"ion-button",105),b.oc("click",(function(){b.Sc(n);var e=b.sc().$implicit;return b.sc(2).typingThemeBook(e)})),b.ed(2),b.tc(3,"translate"),b.fc(),b.fc()}if(2&e){var o=b.sc().$implicit,i=b.sc(2);b.Ac("ngClass",i.showSubItems.themes&&!o.collapse_down?"":"d-none"),b.Lb(2),b.fd(b.uc(3,2,"buttons.add_tema"))}}function uo(e,t){if(1&e){var n=b.hc();b.gc(0,"ion-list"),b.gc(1,"ion-item",79),b.oc("click",(function(){b.Sc(n);var e=t.$implicit;return b.sc(2).redirectPage(e.start_page)}))("cdkDragStarted",(function(e){return b.Sc(n),b.sc(2)._dragStartedHandler(e)})),b.gc(2,"ion-label",80),b.ed(3),b.fc(),b.gc(4,"ion-label",81),b.ed(5),b.fc(),b.cd(6,Kn,2,0,"ion-button",82),b.cd(7,Zn,2,0,"ion-button",83),b.gc(8,"ion-icon",84),b.oc("click",(function(){var e=t.$implicit;return e.collapse_down=!e.collapse_down})),b.fc(),b.fc(),b.gc(9,"div",85),b.oc("cdkDropListDropped",(function(e){b.Sc(n);var o=t.$implicit;return b.sc(2).dropEventThemes(e,o)})),b.cd(10,so,12,10,"ng-container",18),b.fc(),b.cd(11,lo,4,4,"ion-item",86),b.fc()}if(2&e){var o=t.$implicit,i=b.sc(2);b.Lb(1),b.Ac("cdkDragDisabled",!i.bookItem.is_edit),b.Lb(2),b.fd(o.start_page),b.Lb(2),b.fd(o.name),b.Lb(1),b.Ac("ngIf",i.bookItem.is_edit),b.Lb(1),b.Ac("ngIf",i.bookItem.is_edit),b.Lb(1),b.Ac("name",o.collapse_down?"chevron-up-outline":"chevron-down-outline"),b.Lb(1),b.Ac("ngClass",i.showSubItems.themes&&!o.collapse_down?"":"d-none"),b.Lb(1),b.Ac("ngForOf",o.themes),b.Lb(1),b.Ac("ngIf",i.bookItem.is_edit)}}function go(e,t){1&e&&(b.gc(0,"ion-item"),b.gc(1,"ion-list-header"),b.ed(2),b.tc(3,"translate"),b.fc(),b.fc()),2&e&&(b.Lb(2),b.fd(b.uc(3,1,"pages.book.unities_not_found")))}function fo(e,t){if(1&e){var n=b.hc();b.gc(0,"ion-list"),b.gc(1,"ion-button",106),b.oc("click",(function(){return b.Sc(n),b.sc(2).typingUnity()})),b.ed(2),b.tc(3,"translate"),b.fc(),b.fc()}2&e&&(b.Lb(2),b.fd(b.uc(3,1,"buttons.add_unity")))}function po(e,t){if(1&e){var n=b.hc();b.gc(0,"ion-list"),b.gc(1,"ion-button",107),b.oc("click",(function(){return b.Sc(n),b.sc(2).openModalClone()})),b.ed(2),b.tc(3,"translate"),b.fc(),b.fc()}2&e&&(b.Lb(2),b.fd(b.uc(3,1,"buttons.clone_unities")))}function bo(e,t){if(1&e){var n=b.hc();b.gc(0,"mat-drawer",75,76),b.gc(2,"div",15),b.gc(3,"p",77),b.ed(4),b.tc(5,"translate"),b.fc(),b.gc(6,"div",78),b.oc("cdkDropListDropped",(function(e){return b.Sc(n),b.sc().dropEventUnits(e)})),b.cd(7,uo,12,9,"ion-list",18),b.fc(),b.cd(8,go,4,3,"ion-item",35),b.cd(9,fo,4,3,"ion-list",35),b.cd(10,po,4,3,"ion-list",35),b.fc(),b.fc()}if(2&e){var o=b.sc();b.Lb(4),b.fd(b.uc(5,5,"pages.book.unities")),b.Lb(3),b.Ac("ngForOf",o.bookItem.unities),b.Lb(1),b.Ac("ngIf","0"==o.bookItem.unities_count),b.Lb(1),b.Ac("ngIf",o.bookItem.is_edit),b.Lb(1),b.Ac("ngIf",o.bookItem.is_edit)}}function mo(e,t){if(1&e){var n=b.hc();b.gc(0,"ion-avatar",112),b.oc("click",(function(){b.Sc(n);var e=b.sc().$implicit,t=b.sc().$implicit;return b.sc(2).showDocument(e.file_content,t.mode,e)})),b.bc(1,"img",114),b.fc()}if(2&e){var o=b.sc().$implicit;b.Lb(1),b.Ac("src",o.file_content,b.Vc)}}function ho(e,t){1&e&&(b.gc(0,"ion-item"),b.bc(1,"ion-icon",115),b.fc())}function vo(e,t){if(1&e&&(b.gc(0,"a",117),b.bc(1,"ion-icon",118),b.fc()),2&e){var n=b.sc(2).$implicit;b.Ac("href",n.file_content,b.Vc)}}function _o(e,t){if(1&e&&(b.gc(0,"ion-item"),b.cd(1,vo,2,1,"a",116),b.fc()),2&e){var n=b.sc(2).$implicit;b.Lb(1),b.Ac("ngIf","form"!=n.mode)}}function ko(e,t){if(1&e){var n=b.hc();b.gc(0,"ion-button",124),b.oc("click",(function(){b.Sc(n);var e=b.sc(2).$implicit;return b.sc(3).enablePositionVisor(e)})),b.tc(1,"translate"),b.bc(2,"ion-icon",125),b.fc()}if(2&e){var o=b.sc(5);b.Ac("matTooltip",b.uc(1,2,"buttons.move_visor"))("disabled",o.loading)}}function yo(e,t){if(1&e){var n=b.hc();b.gc(0,"ion-button",126),b.oc("click",(function(){b.Sc(n);var e=b.sc(2).$implicit;return b.sc(3).enablePositionVisor(e,null,!0)})),b.tc(1,"translate"),b.bc(2,"ion-icon",127),b.fc()}if(2&e){var o=b.sc(5);b.Ac("matTooltip",b.uc(1,2,"buttons.unlink_move_visor"))("disabled",o.loading)}}function Co(e,t){if(1&e){var n=b.hc();b.gc(0,"ion-button",128),b.oc("click",(function(){b.Sc(n);var e=b.sc(2),t=e.$implicit,o=e.index,i=b.sc().$implicit;return b.sc(2).editResource(t,o,i)})),b.tc(1,"translate"),b.bc(2,"ion-icon",72),b.fc()}if(2&e){var o=b.sc(5);b.Ac("disabled",o.loading)("matTooltip",b.uc(1,2,"buttons.edit"))}}function xo(e,t){if(1&e){var n=b.hc();b.gc(0,"ion-button",129),b.oc("click",(function(){b.Sc(n);var e=b.sc(2).$implicit,t=b.sc().index,o=b.sc().index;return b.sc().deleteResource(e,t,o)})),b.tc(1,"translate"),b.bc(2,"ion-icon",89),b.fc()}if(2&e){var o=b.sc(5);b.Ac("disabled",o.loading)("matTooltip",b.uc(1,2,"buttons.delete"))}}function wo(e,t){if(1&e&&(b.gc(0,"ion-list",119),b.cd(1,ko,3,4,"ion-button",120),b.cd(2,yo,3,4,"ion-button",121),b.cd(3,Co,3,4,"ion-button",122),b.cd(4,xo,3,4,"ion-button",123),b.fc()),2&e){var n=b.sc().$implicit;b.Lb(1),b.Ac("ngIf",n.is_edit&&null==n.position),b.Lb(1),b.Ac("ngIf",n.is_edit&&null!=n.position),b.Lb(1),b.Ac("ngIf",n.is_edit),b.Lb(1),b.Ac("ngIf",n.is_delete)}}function Oo(e,t){if(1&e){var n=b.hc();b.ec(0),b.gc(1,"ion-item",110),b.cd(2,mo,2,1,"ion-avatar",111),b.cd(3,ho,2,0,"ion-item",35),b.gc(4,"ion-label",112),b.oc("click",(function(){b.Sc(n);var e=t.$implicit,o=b.sc().$implicit;return b.sc(2).showDocument(e.file_content,o.mode,e)})),b.ed(5),b.fc(),b.cd(6,_o,2,1,"ion-item",35),b.fc(),b.cd(7,wo,5,4,"ion-list",113),b.dc()}if(2&e){var o=t.$implicit,i=b.sc().$implicit,c=b.sc(2);b.Lb(2),b.Ac("ngIf","image/*"==i.accept),b.Lb(1),b.Ac("ngIf","form"==i.mode),b.Lb(2),b.fd(o.title),b.Lb(1),b.Ac("ngIf",!c.modeEditionEnable),b.Lb(1),b.Ac("ngIf",c.modeEditionEnable)}}function Po(e,t){if(1&e&&(b.gc(0,"ion-card"),b.gc(1,"ion-card-header"),b.gc(2,"ion-card-subtitle"),b.bc(3,"ion-icon",108),b.ed(4),b.fc(),b.fc(),b.gc(5,"ion-card-content",109),b.gc(6,"ion-list",24),b.cd(7,Oo,8,5,"ng-container",18),b.fc(),b.fc(),b.fc()),2&e){var n=t.$implicit,o=b.sc(2);b.Lb(3),b.Ac("name",n.icon_front),b.Lb(1),b.gd(" ",n.name," "),b.Lb(1),b.Bc("scrollbar",o.scrollbarStyle),b.Lb(1),b.Bc("scrollbar",o.scrollbarStyle),b.Lb(1),b.Ac("ngForOf",n.resources)}}function Mo(e,t){if(1&e&&(b.gc(0,"div",15),b.gc(1,"h2",22),b.ed(2),b.tc(3,"translate"),b.fc(),b.cd(4,Po,8,5,"ion-card",18),b.fc()),2&e){var n=t.$implicit,o=b.sc();b.Ob("resource"!=o.right_menu?"hidden":""),b.Lb(2),b.hd("",b.uc(3,5,"forms.page")," ",n.page,""),b.Lb(2),b.Ac("ngForOf",n.types)}}function So(e,t){if(1&e){var n=b.hc();b.gc(0,"ion-list"),b.gc(1,"ion-item",130),b.oc("click",(function(){b.Sc(n);var e=t.$implicit;return b.sc().redirectPage(e.page)})),b.gc(2,"ion-label",80),b.ed(3),b.fc(),b.gc(4,"ion-label",81),b.ed(5),b.fc(),b.fc(),b.fc()}if(2&e){var o=t.$implicit;b.Lb(3),b.fd(o.page),b.Lb(2),b.fd(o.content)}}function Lo(e,t){if(1&e){var n=b.hc();b.gc(0,"ion-card",5),b.oc("click",(function(){b.Sc(n);var e=t.$implicit;return b.sc().printingPage(e)})),b.gc(1,"ion-card-header"),b.gc(2,"ion-card-subtitle"),b.bc(3,"ion-icon",68),b.ed(4),b.tc(5,"translate"),b.fc(),b.fc(),b.fc()}if(2&e){var o=t.$implicit;b.Lb(4),b.hd(" ",b.uc(5,2,"paginate.page")," ",o.page_number," ")}}var Ao=function(e){return{transform:e}};function Io(e,t){if(1&e){var n=b.hc();b.gc(0,"div",134),b.oc("cdkDragEnded",(function(e){b.Sc(n);var o=t.$implicit;return b.sc(3).dropResource(e,o)}))("dblclick",(function(){b.Sc(n);var e=t.$implicit;return b.sc(3).showDocument(e.file_content,e.type_resource?e.type_resource.mode:"",e)}))("cdkDragStarted",(function(e){b.Sc(n);var o=t.$implicit;return b.sc(3).startDragging(e,o.position)})),b.bc(1,"ion-icon",135),b.fc()}if(2&e){var o=t.$implicit,i=b.sc(3);b.ad(b.Fc(10,Ao,"translate3d("+o.position.x+", "+o.position.y+", 0px)")),b.Ac("cdkDragFreeDragPosition",o.position)("cdkDragDisabled",!o.is_edit)("matTooltip",o.title)("cdkDragConstrainPosition",i.dragConstrainPoint)("ngClass",o.type_resource?o.type_resource.icon_front+"-"+o.type_resource.type:""),b.Lb(1),b.Ac("ngClass",o.is_edit?o.type_resource?o.type_resource.icon_front+"-"+o.type_resource.type:"":"disabled-icon-res")("matTooltip",o.title)("name",null!=o.type_resource?o.type_resource.icon_front:"albums-outline")}}function To(e,t){if(1&e&&(b.ec(0),b.cd(1,Io,2,12,"div",133),b.dc()),2&e){var n=b.sc(2);b.Lb(1),b.Ac("ngForOf",n.listResources)}}function Ro(e,t){if(1&e&&(b.gc(0,"div",131),b.gc(1,"div",132),b.cd(2,To,2,1,"ng-container",35),b.fc(),b.fc()),2&e){var n=b.sc();b.Lb(2),b.Ac("ngIf",n.loadBook)}}function zo(e,t){if(1&e&&b.bc(0,"tools-visor",136),2&e){var n=b.sc();b.Ac("canvasR",n.canvasR)("colorA",n.colorA)("actualPage",n.actualPage)("colaborar_id",n.colaborar_uuid)("book_id",n.book_id)}}function Eo(e,t){if(1&e){var n=b.hc();b.gc(0,"div",138),b.oc("click",(function(){b.Sc(n);var e=t.$implicit;return b.sc(2).showDocument(e.file_content,e.type_resource?e.type_resource.mode:"",e)})),b.bc(1,"ion-icon",139),b.fc()}if(2&e){var o=t.$implicit;b.Ac("cdkDragFreeDragPosition",o.position)("cdkDragDisabled",!0)("matTooltip",o.title),b.Lb(1),b.Ac("ngClass",o.type_resource?o.type_resource.icon_front+"-"+o.type_resource.type:"")("name",null!=o.type_resource?o.type_resource.icon_front:"albums-outline")}}function Fo(e,t){if(1&e&&(b.ec(0),b.cd(1,Eo,2,5,"div",137),b.dc()),2&e){var n=b.sc();b.Lb(1),b.Ac("ngForOf",n.listResources)}}function jo(e,t){if(1&e&&(b.gc(0,"div",140),b.bc(1,"img",141),b.fc()),2&e){var n=b.sc();b.Lb(1),b.Ac("src",n.logo_url,b.Vc)}}function Bo(e,t){1&e&&b.bc(0,"ion-icon",142)}function Do(e,t){1&e&&b.bc(0,"ion-icon",143)}function Uo(e,t){1&e&&b.bc(0,"img",144)}var $o,No=function(e,t,n){return{id:"foo-paginate-book-words",itemsPerPage:e,currentPage:t,totalItems:n}},qo=(($o=function(){function e(t,n,o,i,c,r,a,u,d,g,f,p,b,m,h,v,_,k,y){var C=this;if(_classCallCheck(this,e),this.activeRoute=t,this.bookService=n,this.controlErroresService=o,this.redirectService=i,this.sizePanelService=c,this.modalCtrl=r,this.alertController=a,this.toastr=u,this.resourcesService=d,this.tokenService=g,this.routerOutlet=f,this.menu=p,this.toastCtrl=b,this.profileService=m,this.colaborarService=h,this.publicService=v,this.resourceCreateEventService=_,this.el=k,this.document=y,this.scrollbarStyle=s.a.scrollbarStyle,this.queryText="",this.showSearchbar=!1,this.items=["First","Second","Third"],this.selectedValue="Second",this.book_id=null,this.bookItem=null,this.part_id=null,this.loadBook=!1,this.numberIndexPage=0,this.loading=!1,this.api_token="",this.openedSideResources=!0,this.has_thumbnails=!1,this.return_back_url=!1,this.colaborarItem=null,this.urlParent=l.i.book+"get_book_file/",this.urlParentDownload=l.i.book+"donwload-book/",this.urlParentPrinting=l.i.book+"printing-book/",this.movido=!1,this.fondo="https://cooldocsprime.com/admin/assets/img/background/visor/original/01.jpg",this.portada="",this.cant_cargas_responsivo=1,this.cursor=null,this.logo_url="",this.options_toolbar=[],this.right_menu="resources",this.options_toolbar_list=[{name:"lastLeft",active:1},{name:"left",active:1},{name:"currentPage",active:1},{name:"next",active:1},{name:"lastRight",active:1},{name:"zoomin",active:1},{name:"zoomout",active:1},{name:"slideshow",active:0},{name:"flipsound",active:0},{name:"fullscreen",active:1},{name:"share",active:0},{name:"download",active:0}],this.timerIdServer=null,this.canvasBookMaster=null,this.rxjsResourceChange=null,this.rxjsResourceRemove=null,this.rxjsResourcePush=null,this.modeSpeaking=!1,this.globalTextToSpeach="",this.intervalMesurentEventTextToSpeach=null,this.isLoadedServerAudio=!1,this.intentosVoices=0,this.audioLoadServer=null,this.pdfTextSelectable=!0,this.gutterShadow=!0,this.onLoadClick=!1,this.pdfFind=!0,this.bookOptions=null,this.borrado=!1,this.paginaActual=null,this.colorA=new tinycolor,this.colorT=new tinycolor,this.pag1="pageL",this.pag2="pageR",this.videos="",this.audios="",this.enlaces="",this.pdf="",this.diapositivas="",this.simuladores="",this.imagenes="",this.audiolibro="",this.impresion="",this.actualPage=null,this.inicio=!0,this.cant_videos=0,this.cant_audios=0,this.cant_enlaces=0,this.cant_pdf=0,this.cant_diapositivas=0,this.cant_simuladores=0,this.cant_imagenes=0,this.cant_cargas=0,this.cant_cargas_impresion=0,this.cant_carg_resp_imp=0,this.cant_paginas=0,this.cant_audiolibro=0,this.tab=!1,this.listTypesResources=[],this.showToastEnableResource=!0,this.selectedPagesResources=[],this.resourcePanelId=[],this.dragConstrainPoint=function(e,t,n){var o=0,i=0;return 1!=scaleBooPenGlobal&&(o=(1-scaleBooPenGlobal)*t.getFreeDragPosition().x,i=(1-scaleBooPenGlobal)*t.getFreeDragPosition().y),o<0&&(o=0),i<0&&(i=0),{x:e.x+o,y:e.y+i}},this.listResources=[],this.listResourcesReservaNextPages=[],this.modeEditionEnable=!1,this.imageObjectShow=[],this.selectedImageIndex=-1,this.showVisorImages=!1,this.attempUnities=1,this.showSubItems={unities:!0,themes:!0,subthemes:!0},this.pintingPages=[],this.is_expanded=!1,this.itemsPagesContent={items:[],page:1,pageSize:1,totalItems:1},this.book_id=t.snapshot.params.book_id,this.part_id=t.snapshot.params.part_id,this.colaborar_uuid=t.snapshot.queryParams.colaborar_uuid,this.sizePanelService.changeSizePanel("2000px"),t.snapshot.queryParams&&t.snapshot.queryParams.back_by&&t.snapshot.queryParams.ret_id)switch(t.snapshot.queryParams.back_by){case"course":this.return_back_url="/app/main/course/"+t.snapshot.queryParams.ret_id+"/"+t.snapshot.queryParams.ret_id+"/my_books"}setTimeout((function(){C.sizePanelService.changeSizePanel("2000px")}),1500),this.rxjsResourcePush=this.resourceCreateEventService.getPush$().subscribe((function(e){C.addNewResourceFromPage(e)})),this.rxjsResourceRemove=this.resourceCreateEventService.getRemove$().subscribe((function(e){C.destroyResourceByNumPage(e.resource,e.page_number)})),this.rxjsResourceChange=this.resourceCreateEventService.getChange$().subscribe((function(e){var t=C.listTypesResources.find((function(t){return t.page==e.page_number}));if(t){var n=t.types.find((function(t){return t.uuid==e.type.uuid}));if(n){var o=n.resources.findIndex((function(t){return t.uuid==e.resource.uuid}));C.updateResourceContent(e,n.resources[o],n,o)}}})),this.rxjsResourceRemove=this.resourceCreateEventService.getPosition$().subscribe((function(e){C.changePositionsResources(e.resource,e.position,!e.set)}))}return _createClass(e,[{key:"openMenuRight",value:function(e){e==this.right_menu&&(this.resizeObject(),this.drawer.toggle()),this.right_menu=e}},{key:"changePositionsResources",value:function(e,t,n){if(n){e.position=null;var o=this.listResources.findIndex((function(t){return t.uuid==e.uuid}));o>=0&&this.listResources.splice(o,1)}else{var i=this.listResources.find((function(t){return t.uuid==e.uuid}));if(null==i||null==i)e.position={x:t.left,y:t.top},this.listResources.push(e);else{i.position={x:t.left,y:t.top};var c=this.listResourcesReservaNextPages.find((function(t){return t.uuid==e.uuid}));null!=c&&(c.position={x:t.left,y:t.top})}}}},{key:"ngOnDestroy",value:function(){this.visor.nativeElement.remove(),this.canvasR.dispose(),this.sizePanelService.changeSizePanel("lg"),this.rxjsResourceRemove.unsubscribe(),this.rxjsResourcePush.unsubscribe(),this.rxjsResourceChange.unsubscribe()}},{key:"sendTimerToServer",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.profileService.initTimer({action:"visor_books",context:"books",resource_uuid:this.book_id}).subscribe((function(t){t.uuid&&(e.timerIdServer=t.uuid)}),(function(n){(t+=1)<=3&&e.sendTimerToServer(t)}))}},{key:"getBook",value:function(){var e=this;this.bookService.getBook(this.book_id).subscribe((function(t){if(e.colaborar_uuid&&e.findMyColaboration(e.book_id),e.bookItem=t.data,null!=e.bookItem){if(e.sendTimerToServer(),e.bookItem.visor){if(e.bookItem.visor.img_background&&(e.fondo=e.bookItem.visor.img_background),Array.isArray(e.bookItem.visor.permissions)){var n,o=_createForOfIteratorHelper(e.bookItem.visor.permissions);try{var i=function(){var t=n.value,o=e.options_toolbar_list.find((function(e){return e.name==t.name}));null!=o&&(o.active=1),"thumbnails"==t.name&&(e.has_thumbnails=!0)};for(o.s();!(n=o.n()).done;)i()}catch(c){o.e(c)}finally{o.f()}}e.bookItem.visor.logo&&e.bookItem.visor.logo_url&&(e.logo_url=e.bookItem.visor.logo_url)}e.options_toolbar_list.forEach((function(t){1==t.active&&e.options_toolbar.push(t.name)})),e.bookItem.unities_count>0&&e.loadUnitiesByBook(e.bookItem.uuid),e.initializeVisor()}else e.redirectService.redirect(t.message,l.h.books,t.status)}),(function(t){e.controlErroresService.control(t),e.redirectService.redirect(null,l.h.books)}))}},{key:"findMyColaboration",value:function(e){var t=this;this.colaborarService.find(this.colaborar_uuid,e).subscribe((function(e){t.colaborarItem=e.data,console.log(t.colaborarItem),t.colaborarItem.my_colaborar&&"editor"!=t.colaborarItem.my_colaborar.mode&&"admin"!=t.colaborarItem.my_colaborar.mode&&$(".subnivel-menu-pront-hi").addClass("d-none")}),(function(e){t.controlErroresService.control(e)}))}},{key:"ngOnInit",value:function(){this.getBook(),this.api_token=this.tokenService.getToken(!1),$(window).on("resize",(function(){$(".wowbook-control-zoomout").trigger("click")})),$(".mat-drawer-content").scroll((function(){})),this.elemHTML=document.documentElement,this.book_container=document.getElementById("book_container"),this.selectedTextToTextToSpeach()}},{key:"selectedTextToTextToSpeach",value:function(){var e=this;this.book_container.onmouseup=function(){e.isPaying(e.audioLoadServer)||(e.audioLoadServer=null);var t,n=window.getSelection();try{n&&n.getRangeAt?(t=n.getRangeAt(0))&&t.toString()&&(e.showBtnTextToSpeach=!0,e.isPaying(e.audioLoadServer)&&e.audioLoadServer.pause(),e.modeSpeaking=!1,e.audioLoadServer=null,e.addEventsToBtnTextToSpeach(t)):e.hiddenTextToSpeachBtn()}catch(o){}}}},{key:"addEventsToBtnTextToSpeach",value:function(e){var t=this;this.globalTextToSpeach=e.toString(),$("#btn-text-to-speach-read").addClass("scale-effect"),setTimeout((function(){t.isPaying(t.intervalMesurentEventTextToSpeach)||$("#btn-text-to-speach-read").removeClass("scale-effect")}),5e3),this.book_container.onclick=function(){t.hiddenTextToSpeachBtn()},this.book_container.onmouseleave=function(){t.hiddenTextToSpeachBtn()}}},{key:"hiddenTextToSpeachBtn",value:function(){window.getSelection().toString()||this.isPaying(this.audioLoadServer)||(this.showBtnTextToSpeach=!1,this.book_container.onclick=null,this.book_container.onmouseleave=null)}},{key:"startTextToSpeachEvent",value:function(){if(!this.isLoadedServerAudio)if(null!=this.audioLoadServer){if(this.isPaying(this.audioLoadServer))return this.audioLoadServer.pause(),this.modeSpeaking=!1,void this.hiddenTextToSpeachBtn();this.modeSpeaking=!0,this.audioLoadServer.play()}else this.getAudioTextToSpeechServer(this.globalTextToSpeach)}},{key:"isPaying",value:function(e){if(!e)return!1;var t=!1,n=0==e.currentTime,o=!!e.paused,i=!e.ended,c=0==e.readyState;return n&&o&&i&&c?t=!0:n||o||!i||c||(t=!0),t}},{key:"playAudioSpeach",value:function(){return Object(A.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.modeSpeaking=!0,this.checkEventPlayAudioSpeach(),$("#btn-text-to-speach-read").addClass("scale-effect"),(t=new SpeechSynthesisUtterance).lang="es-ES",t.text=this.globalTextToSpeach,t.volume=100,t.rate=1,t.pitch=5,window.speechSynthesis.speak(t);case 3:case"end":return e.stop()}}),e,this)})))}},{key:"sleep",value:function(e){return new Promise((function(t){return setTimeout(t,e)}))}},{key:"cancelAudioSpeach",value:function(){window.speechSynthesis.cancel(),this.modeSpeaking=!1,$("#btn-text-to-speach-read").removeClass("scale-effect"),this.hiddenTextToSpeachBtn(),this.intervalMesurentEventTextToSpeach&&clearInterval(this.intervalMesurentEventTextToSpeach)}},{key:"checkEventPlayAudioSpeach",value:function(){var e=this;this.intervalMesurentEventTextToSpeach=setInterval((function(){window.speechSynthesis.speaking||(e.modeSpeaking=!1,$("#btn-text-to-speach-read").removeClass("scale-effect"),e.intervalMesurentEventTextToSpeach&&clearInterval(e.intervalMesurentEventTextToSpeach))}),1e3)}},{key:"getAudioTextToSpeechServer",value:function(e){var t=this;this.isLoadedServerAudio=!0,this.publicService.getAudioText(e).subscribe((function(e){t.audioLoadServer=new Audio("data:audio/wav;base64,"+e.audio),t.audioLoadServer.play(),t.modeSpeaking=!0,t.audioLoadServer.onended=function(){t.modeSpeaking=!1,t.hiddenTextToSpeachBtn()},t.isLoadedServerAudio=!1}),(function(e){t.isLoadedServerAudio=!1}))}},{key:"ngAfterViewInit",value:function(){}},{key:"initializeVisor",value:function(){var e=this;this.cursor=this.startCursor(),cursor=this.cursor,this.canvasR=this.startCanvas("pageR",this.cursor),canvasR=this.canvasR,this.bookOptions=this.buildBookOptions("https://www.cooldocsprime.com/pdfHandler/thumbnail.php?p={{x}}&t=MjAtMDctMjAyMSAxNjozMTowMDsyODs5OTU7MTAxOA==",this.options_toolbar.join(","),this.urlParent+this.book_id+(this.part_id?"/"+this.part_id:""),this.canvasR,this.urlParentDownload+this.book_id+(this.part_id?"/"+this.part_id:"")+"?token_refrs="+this.tokenService.getToken(!1));try{this.canvasBookMaster=$(this.visor.nativeElement).wowBook(this.bookOptions),ajustar(this.canvasR,this.canvasBookMaster),this.onLoadClick||(this.onLoadClick=!0,$(".wowbook-control-next").on("click",(function(){e.listResources=[]})),$(".wowbook-control-left").on("click",(function(){e.listResources=[]})),$(".wowbook-control-lastLeft").on("click",(function(){e.listResources=[]})),$(".wowbook-control-lastRight").on("click",(function(){e.listResources=[]})),$(".wowbook-right").on("click",(function(){e.listResources=[]})),$(".wowbook-left").on("click",(function(){e.listResources=[]})))}catch(t){console.log(t)}}},{key:"buildBookOptions",value:function(e,t,n,o,i){var c=this;return{maxWidth:.85*$(window).width(),maxHeight:.85*$(window).height(),thumbnailsImages:e,toolbar:t,centeredWhenClosed:!0,flipSoundPath:"./assets/js/wow_book/sound/",flipSoundFile:["page-book.mp3","page.ogg"],downloadURL:i,pageNumbers:!1,tocHeader:"Tabla de Contenidos",thumbnailsVertical:!1,thumbnailsPosition:"left",mouseWheel:"zoom",responsiveSinglePage:!0,fullscreenElement:"body",container:"window",toolbarParent:".toolbar_container",share:"twitter",shareParams:{text:"Libro digital: "+this.bookItem.name},pdf:n+"?token_refrs="+localStorage.getItem("access_token_hpd"),pdfFind:this.pdfFind,pdfTextSelectable:this.pdfTextSelectable,gutterShadow:this.gutterShadow,transparentPages:!1,pagesInMemory:5,strings:{firstTooltip:"Primera P\xe1gina",lastTooltip:"\xdaltima P\xe1gina",backTooltip:"Atr\xe1s",nextTooltip:"Siguiente",zoominTooltip:"Aumentar",zoomoutTooltip:"Disminuir",slideshowTooltip:"",flipsoundTooltip:"",fullscreenTooltip:"",thumbnailsTooltip:"Miniaturas",tocTooltip:"Tabla de Contenidos",currentPageTooltip:"P\xe1gina Actual",downloadTooltip:"Descargar Documento",findInputPlaceHolder:"Ingrese texto a buscar",findPreviousTooltip:"Encontrar anterior",findNextTooltip:"Encontrar siguiente",findMatchCase:"Marcar coincidencia"},hardcovers:!0,zoomMax:1e3,onZoom:function(e){e.zoomLevel>1?$(".contenedor-logo").hide():$(".contenedor-logo").show()},onLoadPage:function(e,t,n){setTimeout((function(){c.loadBook=!0}),1e3),c.sombrear(),c.is_expanded||$(".wowbook-control-zoomout").trigger("click")},onShowPage:function(e,t,n){c.numberIndexPage=n;var i=l.i.book+"get-linears";if(!c.movido){var r=e.pages.length-1;(0==n||n==r&&(r+1)%2==0)&&$(".center").css("right","-35%"),(n>0&&n<r||n==r&&(r+1)%2!=0)&&$(".center").css("right","-65%")}if($(".wowbook-container").css("background",'url("'+c.fondo+'")'),$(".wowbook-container").css("background-size","cover"),$(".wowbook-container").css("background-position","center"),o.clear(),-1==n){var a=window.location.href.split("/"),s=a[a.length-1];n=s&&s!=c.book_id?parseInt(s):1,$("#sidebar-herramientas").hide()}else 1==++n&&c.loadResourcesByPage(n);1!=c.cant_cargas_responsivo&&2!=c.cant_cargas&&2!=c.cant_paginas||(c.videos="",c.audios="",c.enlaces="",c.pdf="",c.diapositivas="",c.simuladores="",c.imagenes="",c.audiolibro="",c.cant_videos=c.cant_audios=c.cant_enlaces=c.cant_pdf=c.cant_diapositivas=c.cant_simuladores=c.cant_imagenes=c.cant_cargas=c.cant_cargas_responsivo=0,c.cant_audiolibro=0),n%2==1&&(c.impresion="",c.cant_carg_resp_imp=c.cant_cargas_impresion=c.cant_paginas=0),t?t.onLeft&&(c.paginaActual=c.actualPage=n,actualPage=c.actualPage,cargar(c.actualPage,o,i,c.book_id,c.colaborar_uuid),c.loadResourcesByPage(n),c.selectedPagesResources=[],deleted=[]):(console.log("index",n),c.actualPage=n-1,c.loadResourcesByPage(n),actualPage=c.actualPage,c.selectedPagesResources=[],cargar(c.actualPage,o,i,c.book_id,c.colaborar_uuid),deleted=[]),1==n&&(c.actualPage=n-1,actualPage=c.actualPage),c.canvasBookMaster&&ajustar(c.canvasR,c.canvasBookMaster),c.listTypesResources=[],c.resourcePanelId=[],c.modeEditionEnable=!1,c.pagesPrinting(),c.drawer.close(),c.drawerPrinting.close(),c.sombrear(),setTimeout((function(){"0px"==c.visor.nativeElement.style.width&&(c.visor.nativeElement.style.width="834.7px"),"0px"==c.visor.nativeElement.style.height&&(c.visor.nativeElement.style.height="500.82px",c.visor.nativeElement.style.marginTop="100px")}),1500)}}}},{key:"startCursor",value:function(){return new fabric.StaticCanvas("cursor")}},{key:"sombrear",value:function(){if($("#sidebar-herramientas").is(":visible")){this.eliminaSombreado();var e=$("#buscar").val();if(""!=e){var t=e.split(" ").map((function(e){return e=(e=(e=(e=(e=e.replace(/a/gi,(function(e){return"[a|\xe1]"}))).replace(/e/gi,(function(e){return"[e|\xe9]"}))).replace(/i/gi,(function(e){return"[i|\xed]"}))).replace(/o/gi,(function(e){return"[o|\xf3]"}))).replace(/u/gi,(function(e){return"[u|\xfa]"})),new RegExp(e,"gi")}));console.log(t);for(var n=$(".wowbook-pdf-text div"),o=0;o<n.length;o++)for(var i=0;i<t.length;i++)if(console.log("c"),$(n[o]).html()){var c=$(n[o]).html().replace(t[i],(function(e){return console.log("en",e),'<span class="highlight">'+e+"</span>"}));$(n[o]).html()!=c&&(console.log("cambio",$(n[o])),$(n[o]).html(c))}}}}},{key:"startCanvas",value:function(e,t){var n=new fabric.Canvas(e);n.freeDrawingBrush.width=15,n.targetFindTolerance=20,n.perPixelTargetFind=!0,n.freeDrawingCursor="none";var o=new fabric.Circle({left:-100,top:-100,radius:n.freeDrawingBrush.width/2,fill:"rgba(0,0,0,0.5)",stroke:"black",originX:"center",originY:"center"});return n.set("mousecursor",o),n.on("selection:created",(function(e){})),n.on("mouse:up",(function(e){if(borrado)if(n.getActiveObjects())n.getActiveObjects().forEach((function(e){var t=e.id,o=e.get("type");"-1"!=t&&t&&("path"==o?deletedLineas.push(t):deleted.push(t)),n.remove(e)})),n.discardActiveObject().renderAll();else if(n.getActiveObject()){var t=n.getActiveObject(),o=t.id,i=t.get("type");"-1"!=o&&o&&("path"==i?deletedLineas.push(o):deleted.push(o)),n.remove(t)}})),n.on("mouse:move",(function(e){var o=this.getPointer(e.e);n.mousecursor.set({top:o.y,left:o.x}).setCoords(),t.renderAll()})),n.on({"object:scaling":function(e){console.log(t);var t=e.target;t.myCustomOptionKeepStrokeWidth&&t.set("strokeWidth",t.myCustomOptionKeepStrokeWidth/((t.scaleX+t.scaleY)/5))},"before:selection:cleared":function(e){var t=this.getActiveObject();console.log(t),t?5==t.tipo&&mostrarFigura(t,this):n.getActiveObjects().forEach((function(e){5==e.tipo&&mostrarFigura(e,n)}))}}),n}},{key:"eliminaSombreado",value:function(){for(var e=document.getElementsByClassName("highlight");e.length;){for(var t=e[0].parentNode;e[0].firstChild;)t.insertBefore(e[0].firstChild,e[0]);t.removeChild(e[0])}}},{key:"mostrarFigura",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){var n=this;if(e){if(5==e.tipo){var o=e.id,i=e.text,c=tinycolor(e.backgroundColor),r="/assets/img/icons/nota"+c.toHexString().substr(1)+".png";fabric.Image.fromURL(r,(function(r){r.set({left:e.left,top:e.top,lockScalingX:!0,lockScalingY:!0,lockRotation:!0}),r.set("tipo",-1),r.set("id",o),r.set("texto",i),r.set("color",c.toHexString()),r.perPixelTargetFind=!1,r.on("mouseup",(function(e){mostrarFigura(e.target,n.canvasR)})),e.remove(),r.lockRotation=!0,t.add(r);var a=t.toJSON();t.setActiveObject(t.item(a.objects.length-1))}))}else if(-1==e.tipo){o=e.id,console.log(o),e.remove(),this.texto(t,e.color,e.texto,e.left,e.top,e.scaleX,e.scaleY,e.id);var a=t.toJSON();t.setActiveObject(t.item(a.objects.length-1))}}else $().toastmessage("showToast",{text:"No hay nota seleccionada",sticky:!1,position:"middle-center",type:"error",stayTime:1500,close:null})}))},{key:"texto",value:function(e){function t(t,n,o,i,c,r,a,s){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t,n,o,i,c,r,a){t=t||"#ffff00",n=n||"Mi Nota",o=o||110,i=i||150,c=c||1,r=r||1,a=a||-1;var s=tinycolor(t);s.setAlpha(.5),this.noDrawing(e);var l=new fabric.Textbox(n,{width:c,top:i,left:o,fontSize:35,textAlign:"left",backgroundColor:s.toRgbString()});l.hasBorders=!1,l.set({cornerColor:"black",cornerSize:25,transparentCorners:!0}),l.set("tipo",5),l.set("id",a),l.set("color",t),l.lockRotation=!0,e.add(l)}))},{key:"noDrawing",value:function(e){$("#canvas-wrapper-drawing").css("pointer-events","auto"),$("#canvas-wrapper-drawing").css("cursor","auto"),this.borrado=!1,e.isDrawingMode=!1,this.cursor.remove(this.cursor.item(0))}},{key:"loadResourcesByPage",value:function(e){var t=this,n=e>0?e:1;this.selectedPagesResources=[],this.selectedPagesResources.findIndex((function(e){return e==n}))>=0||(this.selectedPagesResources.push(n),e>1&&this.selectedPagesResources.push(e%2==0?n+1:n-1),this.finResourcesByPositions(),this.bookService.getResourceBook(this.book_id,this.selectedPagesResources,this.part_id,this.colaborar_uuid).subscribe((function(e){return Object(A.b)(t,void 0,void 0,regeneratorRuntime.mark((function t(){var n,o,i,c,r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.data.length>0)){t.next=11;break}this.listTypesResources=e.data,this.resourcePanelId=[],n=_createForOfIteratorHelper(e.data);try{for(n.s();!(o=n.n()).done;)i=o.value,this.resourcePanelId.push(i.page_number)}catch(a){n.e(a)}finally{n.f()}if(!this.showToastEnableResource){t.next=10;break}return t.next=7,this.toastCtrl.create({message:e.message,duration:7e3,color:"warning",position:"top",buttons:[{text:"Ver Recursos",handler:function(){r.showIndexResources(r.resourcePanelId),r.resourcePanelId=[]}},{text:"x",role:"cancel",handler:function(){}}]});case 7:return c=t.sent,t.next=10,c.present();case 10:this.showToastEnableResource=!1,setTimeout((function(){r.showToastEnableResource=!0}),4e3);case 11:case"end":return t.stop()}}),t,this)})))}),(function(e){})))}},{key:"finResourcesByPositions",value:function(){var e=this;console.log(44);var t=[];this.listResources=[];var n=this.selectedPagesResources.map((function(e){return e}));if(n.forEach((function(n){e.listResourcesReservaNextPages.findIndex((function(e){return n==e.page_number}))<=-1&&t.push(n);var o=e.listResourcesReservaNextPages.filter((function(e){return e.page_number==n}));e.listResources=e.listResources.concat(o)})),t.length>0&&this.bookService.getResourceBookByPos(this.book_id,t,this.part_id,this.timerIdServer,this.colaborar_uuid).subscribe((function(t){t.data.length>0&&(e.listResources=e.listResources.concat(t.data))}),(function(e){})),2==n.length){var o=[];n.forEach((function(e){o.push(e+2)})),n.forEach((function(e){o.push(e-2)})),this.bookService.getResourceBookByPos(this.book_id,o,this.part_id,this.timerIdServer,this.colaborar_uuid).subscribe((function(t){t.data.length>0&&(e.listResourcesReservaNextPages=t.data)}),(function(e){}))}}},{key:"startDragging",value:function(e,t){var n={x:t.x*scaleBooPenGlobal,y:t.y*scaleBooPenGlobal};e.source._dragRef.setFreeDragPosition(n),e.source._dragRef._activeTransform=t,e.source._dragRef._applyRootElementTransform(t.x,t.y)}},{key:"dropResource",value:function(e,t){console.log(t.position),e.source.getRootElement().getBoundingClientRect(),console.log(e.source.getRootElement().getBoundingClientRect()),this.enablePositionVisor(t,t.position)}},{key:"resizeObject",value:function(){$(".wowbook-control-zoomout").trigger("click")}},{key:"showDocument",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Object(A.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalCtrl.create({component:In.a,cssClass:"modal-fullscreen-100",swipeToClose:!0,componentProps:{resource_uuid:t.uuid}});case 2:return n=e.sent,e.next=5,n.present();case 5:return e.next=7,n.onWillDismiss();case 7:case"end":return e.stop()}}),e,this)})))}},{key:"addResourcePanel",value:function(){return Object(A.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.bookItem&&this.bookItem.add_resource){e.next=2;break}return e.abrupt("return",!1);case 2:return t=[this.actualPage>0?this.actualPage:1],this.actualPage>0&&t.push(this.actualPage+1),e.next=6,this.modalCtrl.create({component:an,cssClass:"modal-fullscreen-100",swipeToClose:!0,componentProps:{parent_id:this.bookItem.uuid,resource_type:"book",colaborar_id:this.colaborar_uuid,selectedPages:t,book:this.bookItem}});case 6:return n=e.sent,e.next=9,n.present();case 9:return e.next=11,n.onWillDismiss();case 11:o=e.sent,i=o.data,this.addNewResourceFromPage(i);case 14:case"end":return e.stop()}}),e,this)})))}},{key:"addNewResourceFromPage",value:function(e){if(e&&e.page_number&&e.type&&e.resource){var t=this.listTypesResources.find((function(t){return t.page==e.page_number}));if(null==t)e.type.resources=[e.resource],this.listTypesResources.push({page:e.page_number,types:[e.type]});else{var n=t.types.find((function(t){return t.uuid==e.type.uuid}));if(null==n)e.type.resources=[e.resource],t.types.push(e.type);else{if(Array.isArray(n.resources)||(n.resources=[]),n.resources.findIndex((function(t){return t.uuid==e.resource.uuid}))>=0)return;n.resources.push(e.resource)}}}}},{key:"enableModeResources",value:function(){$(".wowbook-control-zoomout").trigger("click"),this.modeEditionEnable?this.toastr.warning("Modo edici\xf3n desabilitado","Edici\xf3n",{positionClass:"toast-bottom-left"}):this.toastr.info("Modo edici\xf3n habilitado","Edici\xf3n",{positionClass:"toast-bottom-left"}),this.modeEditionEnable=!this.modeEditionEnable}},{key:"enablePositionVisor",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.loading=!0;var i={left:0,top:0};null!=n&&(i={left:n.x,top:n.y}),o&&(i={left:null,top:null}),this.resourcesService.updatePosition(i,e.uuid).subscribe((function(i){if(o){e.position=null;var c=t.listResources.findIndex((function(t){return t.uuid==e.uuid}));c>=0&&t.listResources.splice(c,1)}else if(null==n)e.position={x:i.left,y:i.top},t.listResources.push(e);else{var r=t.listResources.find((function(t){return t.uuid==e.uuid}));null!=r&&(r.position={x:i.left,y:i.top});var a=t.listResourcesReservaNextPages.find((function(t){return t.uuid==e.uuid}));null!=a&&(a.position={x:i.left,y:i.top})}t.loading=!1}),(function(e){t.controlErroresService.control(e),t.loading=!1}))}},{key:"showLightbox",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;this.selectedImageIndex=t,this.imageObjectShow=e,this.showVisorImages=!0}},{key:"closeEventHandler",value:function(){this.showVisorImages=!1,this.imageObjectShow=[],this.selectedImageIndex=-1}},{key:"deleteResource",value:function(e,t,n){return Object(A.b)(this,void 0,void 0,regeneratorRuntime.mark((function o(){var i,c=this;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.alertController.create({header:"Eliminar",message:"\xbfDesea eliminar este recurso?",buttons:[{text:"Cancelar",role:"cancel"},{text:"Eliminar",role:"destructive",handler:function(){c.destroyResource(e,t,n)}}]});case 2:return i=o.sent,o.next=5,i.present();case 5:case"end":return o.stop()}}),o,this)})))}},{key:"openQuestionaryVisor",value:function(e){return Object(A.b)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.modalCtrl.create({component:Ae.a,cssClass:"modal-fullscreen-100",swipeToClose:!0,componentProps:{activity_uuid:e.uuid,resource_type:"resource"}});case 2:return n=t.sent,t.next=5,n.present();case 5:return t.next=7,n.onWillDismiss();case 7:case"end":return t.stop()}}),t,this)})))}},{key:"openVideoQuizVisor",value:function(e){return Object(A.b)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.modalCtrl.create({component:Ie.a,cssClass:"modal-fullscreen-100",swipeToClose:!0,componentProps:{activity_uuid:e.uuid,resource_type:"resource"}});case 2:return n=t.sent,t.next=5,n.present();case 5:return t.next=7,n.onWillDismiss();case 7:case"end":return t.stop()}}),t,this)})))}},{key:"destroyResource",value:function(e,t,n){var o=this;this.loading=!0,this.resourcesService.delete(e.uuid).subscribe((function(i){if("yes"==i.deleted){var c=o.listResources.findIndex((function(t){return t.uuid==e.uuid}));c>=0&&o.listResources.splice(c,1),o.listTypesResources[n]&&o.listTypesResources[n].types[t]&&(c=o.listTypesResources[n].types[t].resources.findIndex((function(t){return t.uuid==e.uuid})))>=0&&(o.listTypesResources[n].types[t].resources.splice(c,1),0==o.listTypesResources[n].types[t].resources.length&&(o.listTypesResources[n].types.splice(t,1),0==o.listTypesResources[n].types.length&&o.listTypesResources.splice(n,1))),0==o.listTypesResources.length&&(o.drawer.close(),o.toastr.warning("Modo edici\xf3n desabilitado","Edici\xf3n",{positionClass:"toast-bottom-left"}),o.modeEditionEnable=!1),o.loading=!1}o.toastr[i.status](i.message)}),(function(e){o.loading=!1,o.controlErroresService.control(e)}))}},{key:"destroyResourceByNumPage",value:function(e,t){var n=this.listResources.findIndex((function(t){return t.uuid==e.uuid}));n>=0&&this.listResources.splice(n,1);var o=this.listTypesResources.findIndex((function(e){return e.page==t}));if(this.listTypesResources[o]){var i=this.listTypesResources[o].types.findIndex((function(t){return t.uuid==e.type_resource_uuid}));this.listTypesResources[o].types[i]&&(n=this.listTypesResources[o].types[i].resources.findIndex((function(t){return t.uuid==e.uuid})))>=0&&(this.listTypesResources[o].types[i].resources.splice(n,1),0==this.listTypesResources[o].types[i].resources.length&&(this.listTypesResources[o].types.splice(i,1),0==this.listTypesResources[o].types.length&&this.listTypesResources.splice(o,1)))}}},{key:"editResource",value:function(e,t,n){return Object(A.b)(this,void 0,void 0,regeneratorRuntime.mark((function o(){var i,c,r,a;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(e.is_edit){o.next=2;break}return o.abrupt("return",!1);case 2:return i=[this.actualPage>0?this.actualPage:1],this.actualPage>0&&i.push(this.actualPage+1),o.next=6,this.modalCtrl.create({component:an,cssClass:"modal-fullscreen-100",swipeToClose:!0,componentProps:{parent_id:this.bookItem.uuid,resource_type:"book",selectedPages:i,resource_id:e.uuid,book:this.bookItem}});case 6:return c=o.sent,o.next=9,c.present();case 9:return o.next=11,c.onWillDismiss();case 11:r=o.sent,a=r.data,this.updateResourceContent(a,e,n,t);case 14:case"end":return o.stop()}}),o,this)})))}},{key:"updateResourceContent",value:function(e,t,n,o){if(console.log(e,t,n,o),e&&e.page_number&&e.type&&e.resource){var i=this.listResources.findIndex((function(e){return e.uuid==t.uuid}));if(i>=0&&(this.listResources[i]=e.resource),t.page_uuid!=e.resource.page_uuid){n.resources.splice(o,1);var c=this.listTypesResources.find((function(t){return t.page==e.page_number}));if(null==c)e.type.resources=[e.resource],this.listTypesResources.push({page:e.page_number,types:[e.type]});else{var r=c.types.find((function(t){return t.uuid==e.type.uuid}));null==r?(e.type.resources=[e.resource],c.types.push(e.type)):(Array.isArray(r.resources)||(r.resources=[]),r.resources.push(e.resource))}}else if(t.type_resource_uuid!=e.resource.type_resource_uuid){n.resources.splice(o);var a=this.listTypesResources.find((function(t){return t.page==e.page_number}));if(null==a)e.type.resources=[e.resource],this.listTypesResources.push({page:e.page_number,types:[e.type]});else{var s=a.types.find((function(t){return t.uuid==e.type.uuid}));null==s?(e.type.resources=[e.resource],a.types.push(e.type)):(Array.isArray(s.resources)||(s.resources=[]),s.resources.push(e.resource))}}else n.resources[o]=e.resource}}},{key:"showIndexResources",value:function(e){return Object(A.b)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=this.bookItem){t.next=2;break}return t.abrupt("return",!1);case 2:return t.next=4,this.modalCtrl.create({component:kn,cssClass:"modal-fullscreen-100",swipeToClose:!0,componentProps:{book_id:this.bookItem.uuid,scrollToPages:e}});case 4:return n=t.sent,t.next=7,n.present();case 7:case"end":return t.stop()}}),t,this)})))}},{key:"showThumbnails",value:function(){return Object(A.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.bookItem){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,this.modalCtrl.create({component:An,swipeToClose:!0,componentProps:{book_id:this.bookItem.uuid}});case 4:return t=e.sent,e.next=7,t.present();case 7:case"end":return e.stop()}}),e,this)})))}},{key:"loadUnitiesByBook",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.bookService.getUnitsForBook(e).subscribe((function(e){t.bookItem.unities=e.data,t.bookItem.unities_count=t.bookItem.unities.length}),(function(o){if(n>3)return t.controlErroresService.control(o),!1;t.loadUnitiesByBook(e,n+1)}))}},{key:"typingUnity",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Object(A.b)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,o=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.alertController.create({cssClass:"",header:e?"Editar Unidad":"A\xf1adir Unidad",inputs:[{name:"name",value:e?e.name:"",type:"text",placeholder:"T\xedtulo"},{name:"start_page",value:e?e.start_page:"",type:"number",placeholder:"Desde la p\xe1gina n\xfamero",min:0},{name:"end_page",value:e?e.end_page:"",type:"number",placeholder:"Hasta la p\xe1gina n\xfamero",min:0}],buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:function(){}},{text:"Guardar",handler:function(t){return t.start_page&&t.end_page&&t.name&&!isNaN(t.start_page)&&!isNaN(t.end_page)&&+t.end_page>=+t.start_page?(o.loading=!0,e?o.updateUnityServer(t,e):o.storeUnityServer(t),t):(o.toastr.warning("Valores incorrectos!"),!1)}}]});case 2:return n=t.sent,t.next=5,n.present();case 5:case"end":return t.stop()}}),t,this)})))}},{key:"storeUnityServer",value:function(e){var t=this;this.bookService.createUnitBook(this.bookItem.uuid,e).subscribe((function(e){Array.isArray(t.bookItem.unities)||(t.bookItem.unities=[]),Array.isArray(e.data.themes)||(e.data.themes=[]),t.bookItem.unities.push(e.data),t.loading=!1,t.bookItem.unities_count++}),(function(e){t.loading=!1,t.controlErroresService.control(e)}))}},{key:"updateUnityServer",value:function(e,t){var n=this;this.bookService.updateUnitBook(t.uuid,e).subscribe((function(e){t.name=e.data.name,t.start_page=e.data.start_page,t.end_page=e.data.end_page,n.loading=!1}),(function(e){n.loading=!1,n.controlErroresService.control(e)}))}},{key:"typingThemeBook",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Object(A.b)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var o,i=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.alertController.create({cssClass:"",header:t?"Editar Tema":"A\xf1adir Tema",inputs:[{name:"name",value:t?t.name:"",type:"text",placeholder:"T\xedtulo"},{name:"start_page",value:t?t.start_page:"",type:"number",placeholder:"Desde la p\xe1gina n\xfamero",min:0},{name:"end_page",value:t?t.end_page:"",type:"number",placeholder:"Hasta la p\xe1gina n\xfamero",min:0}],buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:function(){}},{text:"Guardar",handler:function(n){return n.start_page&&n.end_page&&n.name&&!isNaN(n.start_page)&&!isNaN(n.end_page)&&+n.end_page>=+n.start_page?(i.loading=!0,t?i.updateThemeBook(n,t):i.storeThemeBook(n,e),n):(i.toastr.warning("Valores incorrectos!"),!1)}}]});case 2:return o=n.sent,n.next=5,o.present();case 5:case"end":return n.stop()}}),n,this)})))}},{key:"storeThemeBook",value:function(e,t){var n=this;this.bookService.createThemeBook(t.uuid,e).subscribe((function(e){Array.isArray(t.themes)||(t.themes=[]),Array.isArray(e.data.themes)||(e.data.themes=[]),t.themes.push(e.data),n.loading=!1}),(function(e){n.loading=!1,n.controlErroresService.control(e)}))}},{key:"updateThemeBook",value:function(e,t){var n=this;this.bookService.updateThemeBook(t.uuid,e).subscribe((function(e){t.name=e.data.name,t.start_page=e.data.start_page,t.end_page=e.data.end_page,n.loading=!1}),(function(e){n.loading=!1,n.controlErroresService.control(e)}))}},{key:"typingSubThemeBook",value:function(e,t){return Object(A.b)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var o,i=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.alertController.create({cssClass:"",header:t?"Editar Subtema":"A\xf1adir Subtema",inputs:[{name:"name",value:t?t.name:"",type:"text",placeholder:"T\xedtulo"},{name:"start_page",value:t?t.start_page:"",type:"number",placeholder:"Desde la p\xe1gina n\xfamero",min:0},{name:"end_page",value:t?t.end_page:"",type:"number",placeholder:"Hasta la p\xe1gina n\xfamero",min:0}],buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:function(){}},{text:"Guardar",handler:function(n){return n.name?(i.loading=!0,n.start_page&&n.end_page&&n.name&&!isNaN(n.start_page)&&!isNaN(n.end_page)&&+n.end_page>=+n.start_page?(t?i.updateSubTheme(n,t):i.storeSubTheme(n,e),n):(i.toastr.warning("Valores incorrectos!"),!1)):(i.toastr.warning("Valores incorrectos!"),!1)}}]});case 2:return o=n.sent,n.next=5,o.present();case 5:case"end":return n.stop()}}),n,this)})))}},{key:"storeSubTheme",value:function(e,t){var n=this;this.bookService.createSubThemeBook(t.uuid,e).subscribe((function(e){Array.isArray(t.subthemes)||(t.subthemes=[]),t.subthemes.push(e.data),n.loading=!1}),(function(e){n.loading=!1,n.controlErroresService.control(e)}))}},{key:"updateSubTheme",value:function(e,t){var n=this;this.bookService.updateSubThemeBook(t.uuid,e).subscribe((function(e){t.name=e.data.name,t.start_page=e.data.start_page,t.end_page=e.data.end_page,n.loading=!1}),(function(e){n.loading=!1,n.controlErroresService.control(e)}))}},{key:"deleteUnity",value:function(e,t){return Object(A.b)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var o,i=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.alertController.create({cssClass:"my-custom-class",header:"\xa1Confirmar o denegar!",message:"\xbfEst\xe1 seguro de eliminar la unidad, se eliminar\xe1n los datos internos?",buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary",handler:function(e){}},{text:"Eliminar",role:"destructive",handler:function(){i.loading=!0,i.bookService.deleteUnitBook(e).subscribe((function(e){i.loading=!1,i.bookItem.unities.splice(t,1),i.bookItem.unities_count--}),(function(e){i.loading=!1}))}}]});case 2:return o=n.sent,n.next=5,o.present();case 5:case"end":return n.stop()}}),n,this)})))}},{key:"deleteTheme",value:function(e,t,n){return Object(A.b)(this,void 0,void 0,regeneratorRuntime.mark((function o(){var i,c=this;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.alertController.create({cssClass:"my-custom-class",header:"\xa1Confirmar o denegar!",message:"\xbfEst\xe1 seguro de eliminar el tema, se eliminar\xe1n los datos internos?",buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary",handler:function(e){}},{text:"Eliminar",role:"destructive",handler:function(){c.loading=!0,c.bookService.deleteThemeBook(e).subscribe((function(e){c.loading=!1,t.themes.splice(n,1)}),(function(e){c.loading=!1}))}}]});case 2:return i=o.sent,o.next=5,i.present();case 5:case"end":return o.stop()}}),o,this)})))}},{key:"deleteSubtheme",value:function(e,t,n){return Object(A.b)(this,void 0,void 0,regeneratorRuntime.mark((function o(){var i,c=this;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.alertController.create({cssClass:"my-custom-class",header:"\xa1Confirmar o denegar!",message:"\xbfEst\xe1 seguro de eliminar el subtema?",buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary",handler:function(e){}},{text:"Eliminar",role:"destructive",handler:function(){c.loading=!0,c.bookService.deleteSubThemeBook(e).subscribe((function(e){c.loading=!1,t.subthemes.splice(n,1)}),(function(e){c.loading=!1}))}}]});case 2:return i=o.sent,o.next=5,i.present();case 5:case"end":return o.stop()}}),o,this)})))}},{key:"redirectPage",value:function(e){location.href="/app/main/visor/"+this.book_id+"#mybook/"+e}},{key:"dropEventUnits",value:function(e){var t=this;this.showSubItems.themes=!0,Object(Ce.i)(this.bookItem.unities,e.previousIndex,e.currentIndex),this.loading=!0,this.bookService.reorderUnitBook(this.bookItem.uuid,this.bookItem.unities.map((function(e){return e.uuid}))).subscribe((function(e){t.loading=!1}),(function(e){t.loading=!1}))}},{key:"_dragStartedHandler",value:function(e){this.showSubItems.themes=!1}},{key:"dropEventSubtemes",value:function(e,t){var n=this;Object(Ce.i)(t.subthemes,e.previousIndex,e.currentIndex),this.loading=!0,this.bookService.reorderSubThemeBook(this.bookItem.uuid,t.subthemes.map((function(e){return e.uuid}))).subscribe((function(e){n.loading=!1}),(function(e){n.loading=!1}))}},{key:"dropEventThemes",value:function(e,t){var n=this;this.showSubItems.subthemes=!0,Object(Ce.i)(t.themes,e.previousIndex,e.currentIndex),this.loading=!0,this.bookService.reorderThemeBook(this.bookItem.uuid,t.themes.map((function(e){return e.uuid}))).subscribe((function(e){n.loading=!1}),(function(e){n.loading=!1}))}},{key:"_dragStartedHandlerThemes",value:function(e){this.showSubItems.subthemes=!1}},{key:"showBookDetail",value:function(e){return Object(A.b)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.modalCtrl.create({component:T.a,cssClass:"modal-fullscreen-100",swipeToClose:!0,presentingElement:this.routerOutlet.nativeEl,componentProps:{uuid:e}});case 2:return n=t.sent,t.next=5,n.present();case 5:case"end":return t.stop()}}),t,this)})))}},{key:"openModalAbilities",value:function(e){return Object(A.b)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.modalCtrl.create({component:qe,cssClass:"modal-fullscreen",swipeToClose:!0,componentProps:{theme:e,enable_edit:this.bookItem.is_edit}});case 2:return n=t.sent,t.next=5,n.present();case 5:case"end":return t.stop()}}),t,this)})))}},{key:"pagesPrinting",value:function(){var e=this;if(!this.bookItem||!this.bookItem.is_edit)return!1;var t=[this.actualPage>0?this.actualPage:1];this.actualPage>0&&t.push(this.actualPage+1),this.bookService.getIdsPages(t,this.bookItem.uuid,{printing:1},this.part_id).subscribe((function(t){e.pintingPages=t.data}),(function(t){e.controlErroresService.control(t)}))}},{key:"printingPage",value:function(e){window.open(e.path_image_url+"&book_id="+this.bookItem.uuid+"&token_refrs="+this.api_token+"&convert_pdf=1")}},{key:"openModalClone",value:function(){return Object(A.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.bookItem){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,this.modalCtrl.create({component:fn,cssClass:"modal-fullscreen",swipeToClose:!0,componentProps:{book:this.bookItem}});case 4:return t=e.sent,e.next=7,t.present();case 7:case"end":return e.stop()}}),e,this)})))}},{key:"expandAllBook",value:function(){this.is_expanded?(this.is_expanded=!1,this.closeFullscreen(),$(".wowbook-control-zoomout").trigger("click")):(this.is_expanded=!0,this.openFullscreen(),setTimeout((function(){$(".wowbook-control-zoomin").trigger("click"),setTimeout((function(){$(".wowbook-zoomcontent.wowbook-draggable").css({top:"-100px",transition:"1s"})}),200)}),1e3))}},{key:"openFullscreen",value:function(){this.elemHTML.requestFullscreen?this.elemHTML.requestFullscreen():this.elemHTML.mozRequestFullScreen?this.elemHTML.mozRequestFullScreen():this.elemHTML.webkitRequestFullscreen?this.elemHTML.webkitRequestFullscreen():this.elemHTML.msRequestFullscreen&&this.elemHTML.msRequestFullscreen()}},{key:"closeFullscreen",value:function(){this.document.exitFullscreen?this.document.exitFullscreen():this.document.mozCancelFullScreen?this.document.mozCancelFullScreen():this.document.webkitExitFullscreen?this.document.webkitExitFullscreen():this.document.msExitFullscreen&&this.document.msExitFullscreen()}},{key:"inputSearchPagesByText",value:function(){var e=this;this.timeoutTextSearch&&clearTimeout(this.timeoutTextSearch),this.timeoutTextSearch=setTimeout((function(){return e.searchPagesByText()}),1e3)}},{key:"removeTitlesSvg",value:function(){this.el.nativeElement.shadowRoot.querySelector(".icon-inner svg title")}},{key:"searchPagesByText",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.loading=!0,this.itemsPagesContent.page=t,this.bookService.searchPagesByBook(this.book_id,this.queryText,this.itemsPagesContent.page).subscribe((function(t){e.itemsPagesContent.items=t.data.data,e.itemsPagesContent.pageSize=t.data.page_size,e.itemsPagesContent.totalItems=t.data.total_pg,e.loading=!1}),(function(t){e.loading=!1}))}},{key:"pageChangedByText",value:function(e){if(console.log(e),e==1/0)return!1;this.searchPagesByText(e)}}]),e}()).\u0275fac=function(e){return new(e||$o)(b.ac(a.a),b.ac(I.a),b.ac(u.a),b.ac(f.a),b.ac(Me.a),b.ac(r.Db),b.ac(r.b),b.ac(Tn.b),b.ac(Pe.a),b.ac(Le.a),b.ac(r.fb),b.ac(r.Cb),b.ac(r.Nb),b.ac(we.a),b.ac(xe.a),b.ac(Oe.a),b.ac(Se.a),b.ac(b.o),b.ac(i.e))},$o.\u0275cmp=b.Ub({type:$o,selectors:[["app-visor"]],viewQuery:function(e,t){var n;1&e&&(b.ld(Fn,!0),b.ld(jn,!0),b.ld(Bn,!0),b.ld(Dn,!0)),2&e&&(b.Nc(n=b.pc())&&(t.visor=n.first),b.Nc(n=b.pc())&&(t.drawer=n.first),b.Nc(n=b.pc())&&(t.drawerPrinting=n.first),b.Nc(n=b.pc())&&(t.drawerUnities=n.first))},decls:77,vars:59,consts:[["translucent","true"],[3,"ngClass"],["slot","start"],[3,"href","matTooltip",4,"ngIf"],[3,"matTooltip","click",4,"ngIf"],[1,"c-pointer",3,"click"],["style","color: rgb(252, 101, 0);",4,"ngIf"],["slot","end",4,"ngIf"],["mode","indeterminate",4,"ngIf"],["fullscreen","true",3,"scrollbar"],["autosize","",1,"example-container"],["class","example-sidenav p-0","mode","side","position","start","style","width: 350px;",4,"ngIf"],["mode","side","position","end",1,"example-sidenav","p-0",2,"width","270px"],["drawer",""],["style","margin-bottom: 50px;",3,"class",4,"ngFor","ngForOf"],[2,"margin-bottom","50px"],[3,"ngModel","placeholder","ngModelChange","ionChange","ionCancel"],[2,"max-height","70vh","overflow","auto"],[4,"ngFor","ngForOf"],[1,"flex","flex-center"],["id","foo-paginate-book-words","maxSize","9","directionLinks","true","autoHide","true","responsive","true",3,"previousLabel","nextLabel","screenReaderPaginationLabel","screenReaderPageLabel","screenReaderCurrentLabel","pageChange","pageBoundsCorrection"],["drawerPrinting",""],[1,"text-center"],["class","c-pointer",3,"click",4,"ngFor","ngForOf"],[3,"scrollbar"],[1,"wrapper-container"],["id","canvas-wrapper-drawing",1,"canvas-wrapper",2,"z-index","99999 !important"],["id","pageR",2,"z-index","1000!important"],["class","w-rss-300",4,"ngIf"],["id","canvas-wrapper-cursor",1,"canvas-wrapper"],["id","cursor",2,"pointer-events","none!important","z-index","1001!important"],[3,"canvasR","colorA","actualPage","colaborar_id","book_id",4,"ngIf"],["id","book_container",1,"book_container"],["id","mybook",2,"width","100%"],["mybook",""],[4,"ngIf"],["id","sidebar-herramientas",2,"display","none"],[1,"titulo-barra"],["src","/assets/js/wow_book/iconos/find.png"],["id","ocultarHerramientas",1,"btn"],[1,"form-group"],["type","text","name","buscar","id","buscar","value","","placeholder","Ingrese texto a buscar",1,"form-control"],[1,"contenedor-loading","text-center",2,"display","none"],[1,"contenedor-paginador","text-center"],["id","paginationSearch",1,"pagination-sm"],[1,"contenido-interno"],["id","pages"],["class","contenedor-logo",4,"ngIf"],[3,"images","imageIndex","show","close"],["id","btn-text-to-speach-read",1,"button-master-canvas-tospeach-tnx",3,"matTooltip","ngClass","color","click"],["name","mic-outline",4,"ngIf"],["name","pause-outline",4,"ngIf"],["src","assets/img/loading.gif","alt","Loading","style","width:40px",4,"ngIf"],["ref","toolTip",1,"toolTip-master-canvas-show"],["color","warning",1,"button-master-canvas-show-tnx",3,"click"],["name","expand-outline"],["id","foot-panel-expand-wowbook",1,"toolbar_container"],[3,"href","matTooltip"],["name","arrow-back-outline"],[3,"matTooltip","click"],["name","albums-outline"],[2,"color","rgb(252, 101, 0)"],["slot","end"],[3,"book_id","colaborar_id","colaborar","book",4,"ngIf"],["name","apps-outline"],[3,"matTooltip","color","style","click",4,"ngIf"],["name","search-outline"],[3,"book_id","colaborar_id","colaborar","book"],["name","print-outline"],["name","images-outline"],["name","library-outline"],[3,"matTooltip","color","click"],["name","create-outline"],["name","book-outline"],["mode","indeterminate"],["mode","side","position","start",1,"example-sidenav","p-0",2,"width","350px"],["drawerUnities",""],[1,"bold","text-center",2,"margin-top","10px"],["cdkDropList","",3,"cdkDropListDropped"],["cdkDrag","","text-wrap","",1,"c-pointer","style-hover-text-un",2,"font-size","0.9em",3,"cdkDragDisabled","click","cdkDragStarted"],["slot","end",1,"m-0","bold"],["text-wrap","",1,"m-0","bold"],["style","font-size: 0.8em;","slot","end","class","m-l-1","color","warning","size","small",3,"click",4,"ngIf"],["style","font-size: 0.8em;","slot","end","class","m-l-1","color","danger","size","small",3,"click",4,"ngIf"],["slot","end",3,"name","click"],["cdkDropList","",3,"ngClass","cdkDropListDropped"],["class","m-0 m-l-1",3,"ngClass",4,"ngIf"],["slot","end","color","warning","size","small",1,"m-l-1",2,"font-size","0.8em",3,"click"],["slot","end","color","danger","size","small",1,"m-l-1",2,"font-size","0.8em",3,"click"],["name","trash-outline"],["cdkDrag","",1,"c-pointer","style-hover-text-un","m-l-1",2,"font-size","0.9em",3,"cdkDragDisabled","cdkDragStarted","click"],["class","m-0","slot","end",4,"ngIf"],["style","font-size: 0.8em;","class","m-l-1","slot","end","color","warning","size","small",3,"matTooltip","click",4,"ngIf"],["text-wrap","",1,"m-0","long-text"],["style","font-size: 0.8em;","class","m-l-1","slot","end","color","warning","size","small",3,"click",4,"ngIf"],["cdkDrag","","style","font-size: 0.9em;","class","c-pointer style-hover-text-un m-l-2",3,"cdkDragDisabled","click",4,"ngFor","ngForOf"],[3,"ngClass",4,"ngIf"],["slot","end",1,"m-0"],["slot","end","color","warning","size","small",1,"m-l-1",2,"font-size","0.8em",3,"matTooltip","click"],["cdkDrag","",1,"c-pointer","style-hover-text-un","m-l-2",2,"font-size","0.9em",3,"cdkDragDisabled","click"],["text-wrap","",1,"m-0"],["class","m-l-1","style","font-size: 0.8em;","slot","end","color","warning","size","small",3,"click",4,"ngIf"],["style","font-size: 0.8em;","slot","end","color","warning","size","small",3,"click",4,"ngIf"],["slot","end","color","warning","size","small",2,"font-size","0.8em",3,"click"],[1,"m-0","m-l-1",3,"ngClass"],["color","secondary","size","small",2,"margin-left","auto","font-size","0.8em",3,"click"],["expand","full","size","small",2,"font-size","0.8em",3,"click"],["expand","full","color","secondary","size","small",2,"font-size","0.8em",3,"click"],[3,"name"],[1,"p-0",3,"scrollbar"],[1,"c-pointer"],[3,"click",4,"ngIf"],[3,"click"],["class","flex p-0 flex-end",4,"ngIf"],[3,"src"],["color","success","name","document-text-outline"],["target","_blank",3,"href",4,"ngIf"],["target","_blank",3,"href"],["name","link-outline"],[1,"flex","p-0","flex-end"],["size","small","color","secondary",3,"matTooltip","disabled","click",4,"ngIf"],["color","warning","size","small",3,"matTooltip","disabled","click",4,"ngIf"],["color","success","size","small",3,"disabled","matTooltip","click",4,"ngIf"],["size","small","color","danger",3,"disabled","matTooltip","click",4,"ngIf"],["size","small","color","secondary",3,"matTooltip","disabled","click"],["name","move-outline"],["color","warning","size","small",3,"matTooltip","disabled","click"],["name","unlink-outline"],["color","success","size","small",3,"disabled","matTooltip","click"],["size","small","color","danger",3,"disabled","matTooltip","click"],["text-wrap","",1,"c-pointer","style-hover-text-un",2,"font-size","0.9em",3,"click"],[1,"w-rss-300"],["id","canvas-resources",1,"canvas-wrapper",2,"z-index","99999 !important"],["class","box-content-resource-icon c-move","cdkDrag","","dkDropListSortingDisabled","\u201dtrue\u201d","style","z-index: 99999 !important;position:absolute",3,"cdkDragFreeDragPosition","cdkDragDisabled","matTooltip","cdkDragConstrainPosition","style","ngClass","cdkDragEnded","dblclick","cdkDragStarted",4,"ngFor","ngForOf"],["cdkDrag","","dkDropListSortingDisabled","\u201dtrue\u201d",1,"box-content-resource-icon","c-move",2,"z-index","99999 !important","position","absolute",3,"cdkDragFreeDragPosition","cdkDragDisabled","matTooltip","cdkDragConstrainPosition","ngClass","cdkDragEnded","dblclick","cdkDragStarted"],[2,"font-size","4em",3,"ngClass","matTooltip","name"],[3,"canvasR","colorA","actualPage","colaborar_id","book_id"],["class","box-content-resource-icon c-pointer","cdkDrag","","dkDropListSortingDisabled","\u201dtrue\u201d","style","position:absolute",3,"cdkDragFreeDragPosition","cdkDragDisabled","matTooltip","click",4,"ngFor","ngForOf"],["cdkDrag","","dkDropListSortingDisabled","\u201dtrue\u201d",1,"box-content-resource-icon","c-pointer",2,"position","absolute",3,"cdkDragFreeDragPosition","cdkDragDisabled","matTooltip","click"],[2,"font-size","4em",3,"ngClass","name"],[1,"contenedor-logo"],["width","100%","alt","",3,"src"],["name","mic-outline"],["name","pause-outline"],["src","assets/img/loading.gif","alt","Loading",2,"width","40px"]],template:function(e,t){1&e&&(b.gc(0,"ion-header",0),b.gc(1,"ion-toolbar",1),b.gc(2,"ion-buttons",2),b.bc(3,"ion-menu-button"),b.cd(4,Un,3,4,"ion-button",3),b.cd(5,$n,3,3,"ion-button",4),b.fc(),b.gc(6,"ion-title",5),b.oc("click",(function(){return t.showBookDetail(t.bookItem.uuid)})),b.ed(7),b.tc(8,"translate"),b.cd(9,Nn,3,3,"span",6),b.fc(),b.cd(10,Gn,13,12,"ion-buttons",7),b.fc(),b.cd(11,Wn,1,0,"mat-progress-bar",8),b.fc(),b.gc(12,"ion-content",9),b.gc(13,"mat-drawer-container",10),b.cd(14,bo,11,7,"mat-drawer",11),b.gc(15,"mat-drawer",12,13),b.cd(17,Mo,5,7,"div",14),b.gc(18,"div",15),b.gc(19,"ion-searchbar",16),b.oc("ngModelChange",(function(e){return t.queryText=e}))("ionChange",(function(){return t.inputSearchPagesByText()}))("ionCancel",(function(){return t.showSearchbar=!1})),b.tc(20,"translate"),b.fc(),b.gc(21,"div",17),b.cd(22,So,6,2,"ion-list",18),b.tc(23,"paginate"),b.fc(),b.gc(24,"div"),b.gc(25,"div",19),b.gc(26,"pagination-controls",20),b.oc("pageChange",(function(e){return t.pageChangedByText(e)}))("pageBoundsCorrection",(function(e){return t.pageChangedByText(e)})),b.tc(27,"translate"),b.tc(28,"translate"),b.tc(29,"translate"),b.fc(),b.fc(),b.fc(),b.fc(),b.fc(),b.gc(30,"mat-drawer",12,21),b.gc(32,"div",15),b.gc(33,"h2",22),b.ed(34),b.tc(35,"translate"),b.fc(),b.cd(36,Lo,6,4,"ion-card",23),b.fc(),b.fc(),b.gc(37,"mat-drawer-content",24),b.gc(38,"div",25),b.gc(39,"div",26),b.bc(40,"canvas",27),b.fc(),b.fc(),b.cd(41,Ro,3,1,"div",28),b.gc(42,"div",25),b.gc(43,"div",29),b.bc(44,"canvas",30),b.fc(),b.fc(),b.cd(45,zo,1,5,"tools-visor",31),b.gc(46,"div",32),b.gc(47,"div",33,34),b.cd(49,Fo,2,1,"ng-container",35),b.fc(),b.fc(),b.gc(50,"div",36),b.gc(51,"div",37),b.gc(52,"h1"),b.bc(53,"img",38),b.ed(54," Buscar "),b.gc(55,"button",39),b.ed(56,"\u2715"),b.fc(),b.fc(),b.gc(57,"div",40),b.bc(58,"input",41),b.fc(),b.fc(),b.bc(59,"div",42),b.gc(60,"div",43),b.bc(61,"ul",44),b.fc(),b.bc(62,"div",45),b.fc(),b.bc(63,"p",46),b.cd(64,jo,2,1,"div",47),b.fc(),b.fc(),b.gc(65,"ng-image-fullscreen-view",48),b.oc("close",(function(){return t.closeEventHandler()})),b.fc(),b.gc(66,"ion-button",49),b.oc("click",(function(){return t.startTextToSpeachEvent()})),b.tc(67,"translate"),b.cd(68,Bo,1,0,"ion-icon",50),b.cd(69,Do,1,0,"ion-icon",51),b.cd(70,Uo,1,0,"img",52),b.fc(),b.fc(),b.gc(71,"ion-footer",1),b.gc(72,"span",53),b.ed(73,"De doble clic sobre la imagen seleccionada"),b.fc(),b.gc(74,"ion-button",54),b.oc("click",(function(){return t.expandAllBook()})),b.bc(75,"ion-icon",55),b.fc(),b.bc(76,"div",56),b.fc()),2&e&&(b.Lb(1),b.Ac("ngClass",t.showVisorImages?"d-none":""),b.Lb(3),b.Ac("ngIf",t.return_back_url),b.Lb(1),b.Ac("ngIf",t.bookItem&&(t.bookItem.unities_count>0||t.bookItem.is_edit)),b.Lb(2),b.hd("",b.uc(8,38,"menu.visor")," ",null!=t.bookItem?" - "+t.bookItem.name:""," "),b.Lb(2),b.Ac("ngIf",t.modeEditionEnable),b.Lb(1),b.Ac("ngIf",null!=t.bookItem),b.Lb(1),b.Ac("ngIf",t.loading),b.Lb(1),b.Bc("scrollbar",t.scrollbarStyle),b.Lb(2),b.Ac("ngIf",t.bookItem&&(t.bookItem.unities_count>0||t.bookItem.is_edit)),b.Lb(3),b.Ac("ngForOf",t.listTypesResources),b.Lb(1),b.Ob("search"!=t.right_menu?"hidden":""),b.Lb(1),b.Bc("placeholder",b.uc(20,40,"forms.search")),b.Ac("ngModel",t.queryText),b.Lb(3),b.Ac("ngForOf",b.vc(23,42,t.itemsPagesContent.items,b.Hc(55,No,t.itemsPagesContent.pageSize,t.itemsPagesContent.page,t.itemsPagesContent.totalItems))),b.Lb(4),b.Ac("previousLabel","")("nextLabel","")("screenReaderPaginationLabel",b.uc(27,45,"paginate.pagination"))("screenReaderPageLabel",b.uc(28,47,"paginate.page"))("screenReaderCurrentLabel",b.uc(29,49,"paginate.in_your_page")),b.Lb(8),b.fd(b.uc(35,51,"pages.book.pages_print")),b.Lb(2),b.Ac("ngForOf",t.pintingPages),b.Lb(1),b.Bc("scrollbar",t.scrollbarStyle),b.Lb(4),b.Ac("ngIf",t.modeEditionEnable),b.Lb(4),b.Ac("ngIf",t.canvasR),b.Lb(4),b.Ac("ngIf",t.loadBook&&!t.modeEditionEnable),b.Lb(15),b.Ac("ngIf",t.logo_url),b.Lb(1),b.Ac("images",t.imageObjectShow)("imageIndex",t.selectedImageIndex)("show",t.showVisorImages),b.Lb(1),b.Ac("matTooltip",b.uc(67,53,"forms.text-to-speach"))("ngClass",t.showBtnTextToSpeach?"":"d-none hidden")("color",t.isLoadedServerAudio?"light":t.modeSpeaking?"warning":"danger"),b.Lb(2),b.Ac("ngIf",!t.modeSpeaking&&!t.isLoadedServerAudio),b.Lb(1),b.Ac("ngIf",t.modeSpeaking&&!t.isLoadedServerAudio),b.Lb(1),b.Ac("ngIf",t.isLoadedServerAudio),b.Lb(1),b.Ac("ngClass",t.showVisorImages?"d-none":""))},directives:[r.B,r.zb,i.q,r.l,r.R,i.t,r.xb,r.u,h.b,Rn.b,Rn.a,i.s,r.hb,r.Mb,c.r,c.u,j.c,Rn.c,yn.a,r.k,k.a,r.z,r.C,zn.a,Te.a,Ce.e,r.O,r.H,Ce.a,r.N,r.P,r.m,r.o,r.p,r.n,r.f,En],pipes:[m.d,j.b],styles:[".example-container[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden;border:1px solid rgba(0,0,0,.5)}.example-sidenav-content[_ngcontent-%COMP%]{display:flex;height:100%;align-items:center;justify-content:center}.example-sidenav[_ngcontent-%COMP%]{padding:20px}.contenedor-logo[_ngcontent-%COMP%]{right:15px}#paginas-imprimir[_ngcontent-%COMP%]   .titulo-panel[_ngcontent-%COMP%], #personalizar-menu[_ngcontent-%COMP%]   .titulo-panel[_ngcontent-%COMP%], #recursos[_ngcontent-%COMP%]   .titulo-panel[_ngcontent-%COMP%], #sidebar-audiolibro[_ngcontent-%COMP%]   .titulo-panel[_ngcontent-%COMP%], .titulo-barra[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .wowbook-toc[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:Gobold Light}.titulo-barra[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:larger;padding-left:20px;padding-top:5px}#paginas-imprimir[_ngcontent-%COMP%]   .lista-recursos[_ngcontent-%COMP%], #personalizar-menu[_ngcontent-%COMP%]   .lista-recursos[_ngcontent-%COMP%], #recursos[_ngcontent-%COMP%]   .lista-recursos[_ngcontent-%COMP%], #sidebar-audiolibro[_ngcontent-%COMP%]   .lista-recursos[_ngcontent-%COMP%], #sidebar-herramientas[_ngcontent-%COMP%]   .titulo-panel[_ngcontent-%COMP%], .wowbook-toc[_ngcontent-%COMP%]   .wowbook-toc-item[_ngcontent-%COMP%]{font-family:Futura Std Light}body[_ngcontent-%COMP%]{font-size:16px}.fondo-visor[_ngcontent-%COMP%]{background-size:cover!important;background-attachment:fixed!important;background-position:50%!important;height:100%}#herramientas[_ngcontent-%COMP%]{z-index:1002!important;background:#31708f;height:40px}#herramientas[_ngcontent-%COMP%], .wrapper-container[_ngcontent-%COMP%]{top:0;left:0;right:0;bottom:0;position:fixed!important}.wrapper-container[_ngcontent-%COMP%]{z-index:1001!important;height:60px}#herramientas[_ngcontent-%COMP%]   .parent-box[_ngcontent-%COMP%]{display:flex;justify-content:center;align-content:center;flex-wrap:wrap}#herramientas[_ngcontent-%COMP%]   .parent-box[_ngcontent-%COMP%]   #logo[_ngcontent-%COMP%]{margin:auto}#herramientas[_ngcontent-%COMP%]   .parent-box[_ngcontent-%COMP%]   #barra-menu[_ngcontent-%COMP%]{width:75%}.canvas-wrapper[_ngcontent-%COMP%]{padding:0;text-align:center}.panel-items[_ngcontent-%COMP%]{display:none}#rightPage[_ngcontent-%COMP%]{z-index:1002!important;margin-left:250px;margin-right:25x0px;display:flex;align-items:center;justify-content:center}.toast-item[_ngcontent-%COMP%]{z-index:1004!important;position:fixed!important}#herramientas[_ngcontent-%COMP%]   .parent-box[_ngcontent-%COMP%]   #logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:20px;display:block;margin:auto}#herramientas[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]{color:#fff;padding:0;margin:0 auto;text-align:right;line-height:40px}#herramientas[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], #paginas-imprimir[_ngcontent-%COMP%]   .cuerpo-panel[_ngcontent-%COMP%]   .lista-recursos[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], #personalizar-menu[_ngcontent-%COMP%]   .cuerpo-panel[_ngcontent-%COMP%]   .lista-recursos[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], #recursos[_ngcontent-%COMP%]   .cuerpo-panel[_ngcontent-%COMP%]   .lista-recursos[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], #sidebar-audiolibro[_ngcontent-%COMP%]   .cuerpo-panel[_ngcontent-%COMP%]   .lista-recursos[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;display:inline-block;padding:0 15px}#herramientas[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:80%}#paginas-imprimir[_ngcontent-%COMP%]   .cuerpo-panel[_ngcontent-%COMP%]   .lista-recursos[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], #personalizar-menu[_ngcontent-%COMP%]   .cuerpo-panel[_ngcontent-%COMP%]   .lista-recursos[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], #recursos[_ngcontent-%COMP%]   .cuerpo-panel[_ngcontent-%COMP%]   .lista-recursos[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], #sidebar-audiolibro[_ngcontent-%COMP%]   .cuerpo-panel[_ngcontent-%COMP%]   .lista-recursos[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0;width:100%;padding-top:5px;padding-bottom:5px;padding-left:15px;border-bottom:1px solid #000}.awesome[_ngcontent-%COMP%]{background:#2f5fa4}#herramientas[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle}#herramientas[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{cursor:pointer;transition:all .5s;color:#ccc}#paginas-imprimir[_ngcontent-%COMP%]   .cuerpo-panel[_ngcontent-%COMP%]   .lista-recursos[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover, #personalizar-menu[_ngcontent-%COMP%]   .cuerpo-panel[_ngcontent-%COMP%]   .lista-recursos[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover, #recursos[_ngcontent-%COMP%]   .cuerpo-panel[_ngcontent-%COMP%]   .lista-recursos[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover, #sidebar-audiolibro[_ngcontent-%COMP%]   .cuerpo-panel[_ngcontent-%COMP%]   .lista-recursos[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:rgba(0,92,138,.8);cursor:pointer;width:100%}#personalizar-menu[_ngcontent-%COMP%]   .cuerpo-panel[_ngcontent-%COMP%]   .lista-recursos[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], #recursos[_ngcontent-%COMP%]   .cuerpo-panel[_ngcontent-%COMP%]   .lista-recursos[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], #sidebar-audiolibro[_ngcontent-%COMP%]   .cuerpo-panel[_ngcontent-%COMP%]   .lista-recursos[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:inherit}#paginas-imprimir[_ngcontent-%COMP%], #personalizar-menu[_ngcontent-%COMP%], #recursos[_ngcontent-%COMP%], #sidebar-audiolibro[_ngcontent-%COMP%], #sidebar-herramientas[_ngcontent-%COMP%]{z-index:1100!important;top:60px;bottom:45px;right:0;width:270px;background:rgba(0,92,138,.6);position:fixed!important;color:#fff;overflow:hidden;box-shadow:inset 0 4px 8px 0 hsla(0,0%,100%,.3),inset 0 6px 30px 0 hsla(0,0%,100%,.19)}#personalizar-menu[_ngcontent-%COMP%]{right:auto;top:0;bottom:0}.content-panel[_ngcontent-%COMP%]{padding:3%}#paginas-imprimir[_ngcontent-%COMP%]   .titulo-panel[_ngcontent-%COMP%], #personalizar-menu[_ngcontent-%COMP%]   .titulo-panel[_ngcontent-%COMP%], #recursos[_ngcontent-%COMP%]   .titulo-panel[_ngcontent-%COMP%], #sidebar-audiolibro[_ngcontent-%COMP%]   .titulo-panel[_ngcontent-%COMP%], #sidebar-herramientas[_ngcontent-%COMP%]   .titulo-panel[_ngcontent-%COMP%]{margin:0;padding-left:10px;padding-right:10px;padding-top:5px;border-bottom:1px solid #6e82a6}#recursos[_ngcontent-%COMP%]   .titulo-panel[_ngcontent-%COMP%]{background:rgba(0,92,138,.4)}#personalizar-menu[_ngcontent-%COMP%]   .titulo-panel[_ngcontent-%COMP%], #recursos[_ngcontent-%COMP%]   .titulo-panel[_ngcontent-%COMP%]{font-weight:700}#sidebar-herramientas[_ngcontent-%COMP%]   .titulo-panel[_ngcontent-%COMP%]{cursor:pointer}#sidebar-herramientas[_ngcontent-%COMP%]   .titulo-panel[_ngcontent-%COMP%]:hover{background:rgba(0,92,138,.7);color:#fff}.titulo-panel[_ngcontent-%COMP%]:first-child{padding-top:15px;border-top:5px solid #d3d3d3}#paginas-imprimir[_ngcontent-%COMP%]   .cuerpo-panel[_ngcontent-%COMP%]   .lista-recursos[_ngcontent-%COMP%], #recursos[_ngcontent-%COMP%]   .cuerpo-panel[_ngcontent-%COMP%]   .lista-recursos[_ngcontent-%COMP%], #sidebar-audiolibro[_ngcontent-%COMP%]   .cuerpo-panel[_ngcontent-%COMP%]   .lista-recursos[_ngcontent-%COMP%]{padding:0;margin:0;width:100%;line-height:30px}#paginas-imprimir[_ngcontent-%COMP%]   .cuerpo-panel[_ngcontent-%COMP%], #personalizar-menu[_ngcontent-%COMP%]   .cuerpo-panel[_ngcontent-%COMP%], #recursos[_ngcontent-%COMP%]   .cuerpo-panel[_ngcontent-%COMP%], #sidebar-audiolibro[_ngcontent-%COMP%]   .cuerpo-panel[_ngcontent-%COMP%]{font-size:.9em}#ocultarAudioLibro[_ngcontent-%COMP%], #ocultarHerramientas[_ngcontent-%COMP%], #ocultarImpresion[_ngcontent-%COMP%], #ocultarRecursos[_ngcontent-%COMP%]{color:#fff;background:transparent}.contenedor-logo[_ngcontent-%COMP%]{position:absolute;width:200px;right:10px;bottom:50px;z-index:1000}.contenedor-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}@media screen and (max-width:767px){.contenedor-logo[_ngcontent-%COMP%]{width:50px}}@media screen and (max-width:679px){#herramientas[_ngcontent-%COMP%]   .parent-box[_ngcontent-%COMP%]   #logo[_ngcontent-%COMP%]{width:20%}#herramientas[_ngcontent-%COMP%]   .parent-box[_ngcontent-%COMP%]   #barra-menu[_ngcontent-%COMP%]{width:80%;font-size:12px}}.toolbar_container[_ngcontent-%COMP%]{z-index:1002!important;position:absolute;bottom:0;width:100%}.wowbook-find-text-container[_ngcontent-%COMP%], .wowbook-findbar[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block}#barra-menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50%}#pageR[_ngcontent-%COMP%]{border-style:dashed;border-width:medium}.box-content-resource-icon[_ngcontent-%COMP%]{border:1px solid #ccc;color:rgba(0,0,0,.87);display:inline-flex;justify-content:center;align-items:center;text-align:center;background:#fff;border-radius:4px;margin-right:25px;position:relative;z-index:1999;box-sizing:border-box;transition:box-shadow .2s cubic-bezier(0,0,.2,1);box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.box-content-resource-icon[_ngcontent-%COMP%]:active{box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.w-rss-300[_ngcontent-%COMP%]{z-index:1001!important;top:0;left:0;right:0;bottom:0;position:fixed!important;height:60px}.style-hover-text-un[_ngcontent-%COMP%]:hover > *[_ngcontent-%COMP%]{background:#ff8 none repeat scroll 0 0;box-shadow:0 2px 10px #ff8;opacity:.7}.m-l-1[_ngcontent-%COMP%]{margin-left:10px}.m-l-2[_ngcontent-%COMP%]{margin-left:20px}.contenedor-btn-open-index-r[_ngcontent-%COMP%]{position:absolute;width:200px;left:15px;bottom:50px;z-index:1000}.toolTip-master-canvas-show[_ngcontent-%COMP%]{background:#ff930e;height:30px;bottom:20px;padding:8px;color:#1c1c1c;visibility:hidden}.button-master-canvas-show-tnx[_ngcontent-%COMP%], .toolTip-master-canvas-show[_ngcontent-%COMP%]{position:absolute;z-index:2222;border-radius:5px;left:10px;font-size:1.2em}.button-master-canvas-show-tnx[_ngcontent-%COMP%]{bottom:10px}.button-master-canvas-tospeach-tnx[_ngcontent-%COMP%]{position:absolute;top:70px;left:10px;z-index:7}ion-icon[_ngcontent-%COMP%]{pointer-events:none}.scale-effect[_ngcontent-%COMP%]{scale:1;-webkit-animation:scalenewtarget 2s infinite;animation:scalenewtarget 2s infinite}@-webkit-keyframes scalenewtarget{0%{scale:1}50%{scale:1.2}to{scale:1}}@keyframes scalenewtarget{0%{scale:1}50%{scale:1.2}to{scale:1}}"]}),$o),Ho=n("iX7+"),Vo=["theLastReference"];function Yo(e,t){1&e&&b.bc(0,"mat-progress-bar",31)}function Xo(e,t){1&e&&(b.ed(0),b.tc(1,"translate"),b.tc(2,"translate")),2&e&&b.hd("",b.uc(1,2,"pages.course.step")," 1 ",b.uc(2,4,"pages.course.of")," 2")}function Qo(e,t){if(1&e){var n=b.hc();b.gc(0,"ion-card",34,35),b.oc("click",(function(){b.Sc(n);var e=b.sc().$implicit;return b.sc().addOrRemoveBook(e)})),b.gc(2,"ion-label"),b.bc(3,"img",36),b.gc(4,"p",37),b.ed(5),b.fc(),b.fc(),b.bc(6,"ion-checkbox",1),b.fc()}if(2&e){var o=b.sc().$implicit;b.Ac("ngClass",o.selected?"selected-card":""),b.Lb(3),b.Bc("src",o.portada,b.Vc),b.Ac("ngClass",o.selected?"":"img-no-selected"),b.Lb(2),b.fd(o.name)}}function Go(e,t){if(1&e){var n=b.hc();b.gc(0,"ion-card",34),b.oc("click",(function(){b.Sc(n);var e=b.sc().$implicit;return b.sc().addOrRemoveBook(e)})),b.gc(1,"ion-label"),b.bc(2,"img",36),b.gc(3,"p",37),b.ed(4),b.fc(),b.fc(),b.bc(5,"ion-checkbox",1),b.fc()}if(2&e){var o=b.sc().$implicit;b.Ac("ngClass",o.selected?"selected-card":""),b.Lb(2),b.Bc("src",o.portada,b.Vc),b.Ac("ngClass",o.selected?"":"img-no-selected"),b.Lb(2),b.fd(o.name)}}function Wo(e,t){if(1&e&&(b.gc(0,"ion-item",32),b.cd(1,Qo,7,4,"ion-card",33),b.cd(2,Go,6,4,"ion-card",33),b.fc()),2&e){var n=t.index,o=b.sc();b.Lb(1),b.Ac("ngIf",n+1==o.books.length),b.Lb(1),b.Ac("ngIf",n+1!=o.books.length)}}var Ko,Zo=((Ko=function(){function e(t,n,o,i,c,r,a,l,u,d){_classCallCheck(this,e),this.pinesService=t,this.config=n,this.modalCtrl=o,this._formBuilder=i,this.toastService=c,this.courseService=r,this.controlErroresService=a,this.bookService=l,this.controlErrors=u,this.tour=d,this.scrollbarStyle=s.a.scrollbarStyle,this.saving=!1,this.submitted={submit:!1},this.books=[],this.pageBook=0,this.totalPages=0,this.ios="ios"===this.config.get("mode")}return _createClass(e,[{key:"ngOnInit",value:function(){this.loadBooks(),this.intersectionObserver(),this.firstFormGroup=this._formBuilder.group({name:["",c.F.required],room:["",c.F.required],subject:["",c.F.required],reference_url:[""],section:[""]}),this.formGroupCode=this._formBuilder.group({code:["",c.F.required],mode:["book"]}),this.tour.tour("form_add_course")}},{key:"intersectionObserver",value:function(){var e=this;this.observer=new IntersectionObserver((function(t){t[0].isIntersecting&&e.totalPages>=e.pageBook&&e.loadBooks()}),{root:null,rootMargin:"0px",threshold:.5})}},{key:"ngAfterViewInit",value:function(){var e=this;this.theLastReference.changes.subscribe((function(t){console.log(t),t.last&&e.observer.observe(t.last.nativeElement)}))}},{key:"dismiss",value:function(e){this.modalCtrl.dismiss()}},{key:"saveCourse",value:function(){var e=this,t=this.books.filter((function(e){return e.selected})).map((function(e){return e.id}));if(0!=t.length){this.saving=!0;var n=this.firstFormGroup.value;n.books=t,this.courseService.save(n).subscribe((function(t){e.modalCtrl.dismiss(t.data),e.saving=!1}),(function(t){e.saving=!1,e.controlErrors.control(t)}))}else this.toastService.presentToast("Agregue libros para poder crear el aula virtual.","warning")}},{key:"onActivePin",value:function(e){var t=this;this.submitted.submit=!0,this.pinesService.active(e).subscribe((function(e){t.submitted.submit=!1,t.toastService.presentToast(e.message,e.status),e.data&&"book"==e.mode&&t.books.push(e.data)}),(function(e){t.submitted.submit=!1,t.controlErrors.control(e)}))}},{key:"loadBooks",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.submitted.submit=!0,t&&(this.pageBook=1,this.books=[]),this.bookService.getBooks({page:this.pageBook}).subscribe((function(t){e.submitted.submit=!1,t.data&&t.data.books&&t.data.books.data&&Array.isArray(t.data.books.data)&&(e.pageBook++,e.books=t.data.books.data,e.totalPages=t.data.books.last_page)}),(function(t){e.submitted.submit=!1}))}},{key:"addOrRemoveBook",value:function(e){e.selected=!e.selected}}]),e}()).\u0275fac=function(e){return new(e||Ko)(b.ac(d.a),b.ac(r.d),b.ac(r.Db),b.ac(c.f),b.ac(p.a),b.ac(Ho.a),b.ac(u.a),b.ac(I.a),b.ac(u.a),b.ac(g.a))},Ko.\u0275cmp=b.Ub({type:Ko,selectors:[["app-modal-add"]],viewQuery:function(e,t){var n;1&e&&b.ld(Vo,!0,b.o),2&e&&b.Nc(n=b.pc())&&(t.theLastReference=n)},decls:69,vars:45,consts:[["translucent","true"],["slot","end"],[3,"disabled","click"],["name","close-outline"],["mode","indeterminate",4,"ngIf"],[3,"scrollbar"],[3,"lines"],[1,"header-horizontal-add-course",3,"linear"],["stepper",""],["label","Step 1",3,"stepControl"],[3,"formGroup"],["matStepLabel",""],[1,"step-add-c-1"],["appearance","outline",1,"w-100"],["matInput","","formControlName","room","required","",1,"w-100"],["matInput","","formControlName","subject","required","",1,"w-100"],["matInput","","formControlName","name","required","",1,"w-100"],["matInput","","formControlName","reference_url",1,"w-100"],["matInput","","formControlName","section",1,"w-100"],["mat-button","","matStepperNext","","color","primary",1,"step-add-btn-c-1"],["label","Step 2"],[1,"text-center"],[3,"formGroup","submit"],[1,"step-add-btn-pin-f-1","intro-x","mt-8",2,"display","flex"],["type","text","formControlName","code",1,"pin-input","intro-x","login__input","form-control","py-3","px-4","border-gray-300","block",3,"disabled","placeholder"],["type","submit",1,"btn-active-pin",3,"disabled"],["name","key-outline"],[1,"mt-2","text-center"],[1,"container-flex-x","step-add-btn-select-book-f-2"],["class","item-cs",4,"ngFor","ngForOf"],["size","small","strong","",1,"step-add-btn-save-f-2",3,"disabled","click"],["mode","indeterminate"],[1,"item-cs"],[3,"ngClass","click",4,"ngIf"],[3,"ngClass","click"],["theLastReference",""],["alt","",1,"book-portada",3,"ngClass","src"],[1,"m-1","text-center","overflow-txt"]],template:function(e,t){1&e&&(b.gc(0,"ion-header",0),b.gc(1,"ion-toolbar"),b.gc(2,"ion-title"),b.ed(3),b.tc(4,"translate"),b.fc(),b.gc(5,"ion-buttons",1),b.gc(6,"ion-button",2),b.oc("click",(function(){return t.dismiss()})),b.bc(7,"ion-icon",3),b.fc(),b.fc(),b.fc(),b.cd(8,Yo,1,0,"mat-progress-bar",4),b.fc(),b.gc(9,"ion-content",5),b.bc(10,"ion-list",6),b.gc(11,"mat-horizontal-stepper",7,8),b.gc(13,"mat-step",9),b.gc(14,"form",10),b.cd(15,Xo,3,6,"ng-template",11),b.gc(16,"div",12),b.gc(17,"mat-form-field",13),b.gc(18,"mat-label"),b.ed(19),b.tc(20,"translate"),b.fc(),b.bc(21,"input",14),b.fc(),b.gc(22,"mat-form-field",13),b.gc(23,"mat-label"),b.ed(24),b.tc(25,"translate"),b.fc(),b.bc(26,"input",15),b.fc(),b.gc(27,"mat-form-field",13),b.gc(28,"mat-label"),b.ed(29),b.tc(30,"translate"),b.fc(),b.bc(31,"input",16),b.fc(),b.gc(32,"mat-form-field",13),b.gc(33,"mat-label"),b.ed(34),b.tc(35,"translate"),b.fc(),b.bc(36,"input",17),b.fc(),b.gc(37,"mat-form-field",13),b.gc(38,"mat-label"),b.ed(39),b.tc(40,"translate"),b.fc(),b.bc(41,"input",18),b.fc(),b.fc(),b.gc(42,"div"),b.gc(43,"button",19),b.ed(44),b.tc(45,"translate"),b.fc(),b.fc(),b.fc(),b.fc(),b.gc(46,"mat-step",20),b.gc(47,"h3",21),b.gc(48,"strong"),b.ed(49),b.tc(50,"translate"),b.fc(),b.fc(),b.gc(51,"form",22),b.oc("submit",(function(){return t.onActivePin(t.formGroupCode.value)})),b.gc(52,"div",23),b.bc(53,"input",24),b.tc(54,"translate"),b.gc(55,"ion-button",25),b.bc(56,"ion-icon",26),b.fc(),b.fc(),b.fc(),b.gc(57,"h3",27),b.gc(58,"strong"),b.ed(59),b.tc(60,"translate"),b.fc(),b.fc(),b.gc(61,"ion-list",28),b.cd(62,Wo,3,2,"ion-item",29),b.fc(),b.gc(63,"ion-button",30),b.oc("click",(function(){return t.saveCourse()})),b.ed(64),b.tc(65,"translate"),b.fc(),b.fc(),b.fc(),b.fc(),b.gc(66,"ion-footer",0),b.gc(67,"ion-toolbar"),b.bc(68,"ion-buttons",1),b.fc(),b.fc()),2&e&&(b.Lb(3),b.gd(" ",b.uc(4,23,"forms.add_courses")," "),b.Lb(3),b.Ac("disabled",t.saving),b.Lb(2),b.Ac("ngIf",t.saving||t.submitted.submit),b.Lb(1),b.Bc("scrollbar",t.scrollbarStyle),b.Lb(1),b.Ac("lines",t.ios?"inset":"full"),b.Lb(1),b.Ac("linear",!0),b.Lb(2),b.Ac("stepControl",t.firstFormGroup),b.Lb(1),b.Ac("formGroup",t.firstFormGroup),b.Lb(5),b.fd(b.uc(20,25,"pages.course.name_class")),b.Lb(5),b.fd(b.uc(25,27,"pages.course.name_subject")),b.Lb(5),b.fd(b.uc(30,29,"pages.course.name_course")),b.Lb(5),b.fd(b.uc(35,31,"pages.course.reference_url")),b.Lb(5),b.fd(b.uc(40,33,"pages.course.name_section")),b.Lb(5),b.fd(b.uc(45,35,"buttons.next")),b.Lb(5),b.fd(b.uc(50,37,"forms.add_book_to_class")),b.Lb(2),b.Ac("formGroup",t.formGroupCode),b.Lb(2),b.Bc("placeholder",b.uc(54,39,"forms.title_add_pin")),b.Ac("disabled",t.submitted.submit),b.Lb(2),b.Ac("disabled",t.submitted.submit),b.Lb(4),b.fd(b.uc(60,41,"forms.please_select_class_clic_save")),b.Lb(3),b.Ac("ngForOf",t.books),b.Lb(1),b.Ac("disabled",t.saving),b.Lb(1),b.fd(b.uc(65,43,"buttons.save")))},directives:[r.B,r.zb,r.xb,r.l,r.k,r.C,i.t,r.u,h.b,r.O,Qe.a,Qe.b,c.H,c.s,c.j,Qe.d,Ge.c,Ge.g,We.b,c.c,c.r,c.i,c.C,it.b,Qe.h,i.s,r.z,Te.a,r.H,r.m,i.q,r.N,r.r,r.c],pipes:[m.d],styles:[".book-portada[_ngcontent-%COMP%]{min-width:150px;height:200px}.container-flex-x[_ngcontent-%COMP%]{display:flex;overflow:auto;flex-wrap:nowrap}.container-flex-x[_ngcontent-%COMP%]   .item-cs[_ngcontent-%COMP%]{min-width:190px!important;max-width:190px!important;cursor:pointer}.container-flex-x[_ngcontent-%COMP%]   .item-cs[_ngcontent-%COMP%]   .img-no-selected[_ngcontent-%COMP%]{filter:grayscale(100%)}.selected-card[_ngcontent-%COMP%]{background:rgba(253,255,119,.7)}"]}),Ko);function Jo(e,t){1&e&&b.bc(0,"mat-progress-bar",8)}function ei(e,t){if(1&e&&b.bc(0,"ion-icon",11),2&e){var n=b.sc().$implicit;b.Ac("name",n.icon)}}function ti(e,t){if(1&e){var n=b.hc();b.gc(0,"ion-item"),b.tc(1,"lowercase"),b.cd(2,ei,1,1,"ion-icon",9),b.gc(3,"ion-label"),b.ed(4),b.fc(),b.gc(5,"ion-checkbox",10),b.oc("ngModelChange",(function(e){return b.Sc(n),t.$implicit.isChecked=e})),b.fc(),b.fc()}if(2&e){var o=t.$implicit,i=b.sc();b.Mb("track",b.uc(1,5,o.name)),b.Lb(2),b.Ac("ngIf",i.ios),b.Lb(2),b.fd(o.name),b.Lb(1),b.Ac("disabled",i.saving)("ngModel",o.isChecked)}}var ni,oi=((ni=function(){function e(t,n,o,i,c,r){_classCallCheck(this,e),this.config=t,this.modalCtrl=n,this.navParams=o,this.toastService=i,this.courseService=c,this.controlErroresService=r,this.courses=[],this.saving=!1,this.ios="ios"===this.config.get("mode")}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"dismiss",value:function(e){this.modalCtrl.dismiss(e)}},{key:"selectAll",value:function(e){this.courses.forEach((function(t){t.isChecked=e}))}},{key:"saveCourses",value:function(){var e=this,t=this.courses.filter((function(e){return e.isChecked}));0!=t.length?(this.saving=!0,this.courseService.massSave({items:t}).subscribe((function(t){e.saving=!1,console.log(t),e.toastService.presentToast(t.message,t.status),e.modalCtrl.dismiss(t.data)}),(function(t){e.saving=!1,e.controlErroresService.control(t)})),this.saving=!0):this.toastService.presentToast("Seleccione al menos un curso","warning")}}]),e}()).\u0275fac=function(e){return new(e||ni)(b.ac(r.d),b.ac(r.Db),b.ac(r.Fb),b.ac(p.a),b.ac(Ho.a),b.ac(u.a))},ni.\u0275cmp=b.Ub({type:ni,selectors:[["app-modal-provider"]],decls:27,vars:22,consts:[["translucent","true"],["slot","start"],[3,"disabled","click"],["slot","end"],["strong","",3,"disabled","click"],["mode","indeterminate",4,"ngIf"],[3,"lines"],[4,"ngFor","ngForOf"],["mode","indeterminate"],["slot","start","color","medium",3,"name",4,"ngIf"],[3,"disabled","ngModel","ngModelChange"],["slot","start","color","medium",3,"name"]],template:function(e,t){1&e&&(b.gc(0,"ion-header",0),b.gc(1,"ion-toolbar"),b.gc(2,"ion-buttons",1),b.gc(3,"ion-button",2),b.oc("click",(function(){return t.dismiss()})),b.ed(4),b.tc(5,"translate"),b.fc(),b.fc(),b.gc(6,"ion-title"),b.ed(7),b.tc(8,"translate"),b.fc(),b.gc(9,"ion-buttons",3),b.gc(10,"ion-button",4),b.oc("click",(function(){return t.saveCourses()})),b.ed(11),b.tc(12,"translate"),b.fc(),b.fc(),b.fc(),b.cd(13,Jo,1,0,"mat-progress-bar",5),b.fc(),b.gc(14,"ion-content"),b.gc(15,"ion-list",6),b.cd(16,ti,6,7,"ion-item",7),b.fc(),b.fc(),b.gc(17,"ion-footer",0),b.gc(18,"ion-toolbar"),b.gc(19,"ion-buttons",1),b.gc(20,"ion-button",2),b.oc("click",(function(){return t.selectAll(!1)})),b.ed(21),b.tc(22,"translate"),b.fc(),b.fc(),b.gc(23,"ion-buttons",3),b.gc(24,"ion-button",2),b.oc("click",(function(){return t.selectAll(!0)})),b.ed(25),b.tc(26,"translate"),b.fc(),b.fc(),b.fc(),b.fc()),2&e&&(b.Lb(3),b.Ac("disabled",t.saving),b.Lb(1),b.fd(b.uc(5,12,"buttons.cancel")),b.Lb(3),b.gd(" ",b.uc(8,14,"forms.add_courses")," "),b.Lb(3),b.Ac("disabled",t.saving),b.Lb(1),b.fd(b.uc(12,16,"buttons.save")),b.Lb(2),b.Ac("ngIf",t.saving),b.Lb(2),b.Ac("lines",t.ios?"inset":"full"),b.Lb(1),b.Ac("ngForOf",t.courses),b.Lb(4),b.Ac("disabled",t.saving),b.Lb(1),b.fd(b.uc(22,18,"buttons.disselect_all")),b.Lb(3),b.Ac("disabled",t.saving),b.Lb(1),b.fd(b.uc(26,20,"buttons.select_all")))},directives:[r.B,r.zb,r.l,r.k,r.xb,i.t,r.u,r.O,i.s,r.z,Te.a,r.H,r.N,r.r,r.c,c.r,c.u,r.C],pipes:[m.d,i.p],styles:[""]}),ni),ii=n("5Uy/"),ci=n("YTC1"),ri=n("gcOT"),ai=n("Jcxb");function si(e,t){1&e&&(b.ec(0),b.bc(1,"card-load-animation",1),b.dc()),2&e&&(b.Lb(1),b.Ac("count",1)("all_width",!0))}function li(e,t){if(1&e&&(b.gc(0,"span"),b.ed(1),b.fc()),2&e){var n=b.sc(2);b.Lb(1),b.fd(n.course.section)}}function ui(e,t){if(1&e&&(b.gc(0,"div"),b.gc(1,"ion-button",21),b.tc(2,"translate"),b.bc(3,"ion-icon",27),b.fc(),b.fc()),2&e){var n=b.sc(3);b.Lb(1),b.Ac("matTooltip",b.uc(2,2,"pages.course.dashboard"))("routerLink",n.course_route+n.course.uuid+"/"+n.course.uuid+"/dashboard")}}function di(e,t){if(1&e&&(b.gc(0,"ion-button",28),b.tc(1,"translate"),b.gc(2,"a",29),b.bc(3,"ion-icon",30),b.fc(),b.fc()),2&e){var n=b.sc(3);b.Bc("href",n.course.reference_url),b.Ac("matTooltip",b.uc(1,3,"pages.course.virtual_class")),b.Lb(2),b.Bc("href",n.course.reference_url,b.Vc)}}function gi(e,t){if(1&e&&(b.gc(0,"div",20),b.cd(1,ui,4,4,"div",0),b.gc(2,"div"),b.gc(3,"ion-button",21),b.tc(4,"translate"),b.bc(5,"ion-icon",22),b.fc(),b.fc(),b.gc(6,"div"),b.gc(7,"ion-button",21),b.tc(8,"translate"),b.bc(9,"ion-icon",23),b.fc(),b.fc(),b.gc(10,"div"),b.gc(11,"ion-button",21),b.tc(12,"translate"),b.bc(13,"ion-icon",24),b.fc(),b.fc(),b.gc(14,"div"),b.gc(15,"ion-button",21),b.tc(16,"translate"),b.bc(17,"ion-icon",25),b.fc(),b.fc(),b.gc(18,"div"),b.cd(19,di,4,5,"ion-button",26),b.fc(),b.fc()),2&e){var n=b.sc(2);b.Lb(1),b.Ac("ngIf",n.course.is_my),b.Lb(2),b.Ac("matTooltip",b.uc(4,10,"pages.course.posts"))("routerLink",n.course_route+n.course.uuid+"/"+n.course.uuid+"/posts"),b.Lb(4),b.Ac("matTooltip",b.uc(8,12,"pages.course.activities"))("routerLink",n.course_route+n.course.uuid+"/"+n.course.uuid+"/activities"),b.Lb(4),b.Ac("matTooltip",b.uc(12,14,"pages.course.my_books"))("routerLink",n.course_route+n.course.uuid+"/"+n.course.uuid+"/my_books"),b.Lb(4),b.Ac("matTooltip",b.uc(16,16,"pages.course.qualifications"))("routerLink",n.course_route+n.course.uuid+"/"+n.course.uuid+"/qualifications"),b.Lb(4),b.Ac("ngIf",null!=n.course.reference_url)}}function fi(e,t){if(1&e&&(b.gc(0,"div",31),b.bc(1,"img",32),b.fc()),2&e){var n=t.$implicit,o=b.sc(2);b.Lb(1),b.Bc("src",n.user&&n.user.information?n.user.information.image_url:o.img_url,b.Vc),b.Bc("title",n.user?n.user.name:"--")}}function pi(e,t){if(1&e){var n=b.hc();b.gc(0,"ion-fab-button",45),b.oc("click",(function(){b.Sc(n);var e=b.sc(3);return e.archiveCourse(e.course,e.index)})),b.tc(1,"translate"),b.bc(2,"ion-icon",46),b.fc()}2&e&&b.Ac("matTooltip",b.uc(1,1,"buttons.archive"))}function bi(e,t){if(1&e){var n=b.hc();b.gc(0,"ion-fab-button",47),b.oc("click",(function(){b.Sc(n);var e=b.sc(3);return e.restoreCourse(e.course,e.index)})),b.tc(1,"translate"),b.bc(2,"ion-icon",48),b.fc()}2&e&&b.Ac("matTooltip",b.uc(1,1,"buttons.restore"))}function mi(e,t){if(1&e){var n=b.hc();b.gc(0,"ion-fab-button",49),b.oc("click",(function(){b.Sc(n);var e=b.sc(3);return e.copyCode(e.course.code)})),b.tc(1,"translate"),b.bc(2,"ion-icon",50),b.fc()}2&e&&b.Ac("matTooltip",b.uc(1,1,"buttons.copy_code"))}function hi(e,t){if(1&e){var n=b.hc();b.gc(0,"ion-fab",33,34),b.gc(2,"ion-fab-button",35),b.tc(3,"translate"),b.bc(4,"ion-icon",36),b.fc(),b.gc(5,"ion-fab-list",37),b.gc(6,"ion-fab-button",38),b.oc("click",(function(){b.Sc(n);var e=b.sc(2);return e.deleteCourse(e.course,e.index)})),b.tc(7,"translate"),b.bc(8,"ion-icon",39),b.fc(),b.cd(9,pi,3,3,"ion-fab-button",40),b.cd(10,bi,3,3,"ion-fab-button",41),b.gc(11,"ion-fab-button",42),b.oc("click",(function(){b.Sc(n);var e=b.sc(2);return e.edit(e.course)})),b.tc(12,"translate"),b.bc(13,"ion-icon",43),b.fc(),b.cd(14,mi,3,3,"ion-fab-button",44),b.fc(),b.fc()}if(2&e){var o=b.sc(2);b.Lb(2),b.Ac("matTooltip",b.uc(3,6,"pages.signup.student")),b.Lb(4),b.Ac("matTooltip",b.uc(7,8,"buttons.delete")),b.Lb(3),b.Ac("ngIf","archived"!=o.course.status),b.Lb(1),b.Ac("ngIf","active"!=o.course.status),b.Lb(1),b.Ac("matTooltip",b.uc(12,10,"buttons.edit")),b.Lb(3),b.Ac("ngIf",null!=o.course.code)}}function vi(e,t){if(1&e&&(b.gc(0,"div",51),b.gc(1,"div",52),b.gc(2,"div",53),b.ed(3),b.tc(4,"translate"),b.gc(5,"span",54),b.ed(6),b.fc(),b.fc(),b.fc(),b.fc()),2&e){var n=b.sc(2);b.Lb(3),b.gd("",b.uc(4,2,"pages.course.students"),": "),b.Lb(3),b.fd(n.course.count_students||0)}}function _i(e,t){if(1&e){var n=b.hc();b.ec(0),b.gc(1,"div",2),b.gc(2,"div",3),b.gc(3,"div",4),b.gc(4,"a",5),b.ed(5),b.cd(6,li,2,1,"span",0),b.fc(),b.gc(7,"div",6),b.gc(8,"span",7),b.oc("click",(function(){b.Sc(n);var e=b.sc();return e.copyCode(e.course.code)})),b.ed(9),b.fc(),b.gc(10,"span",8),b.ed(11,"\u2022"),b.fc(),b.ed(12),b.fc(),b.fc(),b.fc(),b.gc(13,"div",9),b.gc(14,"div",10),b.bc(15,"img",11),b.fc(),b.gc(16,"a",12),b.ed(17),b.fc(),b.bc(18,"div",13),b.fc(),b.cd(19,gi,20,18,"div",14),b.gc(20,"div",15),b.gc(21,"div",16),b.cd(22,fi,2,2,"div",17),b.fc(),b.cd(23,hi,15,12,"ion-fab",18),b.fc(),b.cd(24,vi,7,4,"div",19),b.fc(),b.dc()}if(2&e){var o=b.sc();b.Lb(1),b.Ac("ngClass","border_status_color_"+o.course.status),b.Lb(3),b.Ac("routerLink",o.course_route+o.course.uuid+"/"+o.course.uuid+(o.course.is_my?"/dashboard":"/posts")),b.Lb(1),b.gd("",o.course.name," "),b.Lb(1),b.Ac("ngIf",o.course.section),b.Lb(3),b.fd(o.course.code),b.Lb(3),b.gd(" ",o.moment(o.course.date_created).format("d/m/Y")," "),b.Lb(3),b.Bc("src",o.course.theme_url,b.Vc),b.Lb(1),b.Ac("routerLink",o.course_route+o.course.uuid+"/"+o.course.uuid+(o.course.is_my?"/dashboard":"/posts")),b.Lb(1),b.fd(o.course.subject),b.Lb(2),b.Ac("ngIf",o.show_options_routes),b.Lb(3),b.Ac("ngForOf",o.course.integrants),b.Lb(1),b.Ac("ngIf",o.course.is_my),b.Lb(1),b.Ac("ngIf",o.show_list_students)}}var ki,yi=ri.c.Clipboard,Ci=((ki=function(){function e(t,n,o,i,c){_classCallCheck(this,e),this.alertCtrl=t,this.courseService=n,this.modalCtrl=o,this.controlerroresService=i,this.toastService=c,this.moment=R,this.loadingPresent=!1,this.img_url="https://images.unsplash.com/photo-1627483262769-04d0a1401487?ixid=MnwxMjA3fDF8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80",this.course_route=l.h.one_course,this.index=-1,this.show_options_routes=!0,this.show_list_students=!0,this.course=null,this.itemDeleteEvent=new b.r,this.itemLoadEvent=new b.r,this.parentRoute=l.h.one_course}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"deleteCourse",value:function(e,t){return Object(A.b)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var o,i=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.alertCtrl.create({cssClass:"my-custom-class",header:"\xa1Confirmar o cancelar!",message:"\xbfEst\xe1 seguro que desea eliminar este curso?",buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary",handler:function(e){}},{text:"Eliminar",role:"destructive",handler:function(){i.itemLoadEvent.emit(!0),i.courseService.delete(e.uuid).subscribe((function(e){"success"==e.status&&i.itemDeleteEvent.emit(t),i.itemLoadEvent.emit(!1),i.toastService.presentToast(e.message,e.status)}),(function(e){i.itemLoadEvent.emit(!1),i.controlerroresService.control(e)}))}}]});case 2:return o=n.sent,n.next=5,o.present();case 5:case"end":return n.stop()}}),n,this)})))}},{key:"archiveCourse",value:function(e,t){return Object(A.b)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var o,i=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.alertCtrl.create({cssClass:"my-custom-class",header:"\xa1Confirmar o cancelar!",message:"\xbfEst\xe1 seguro que desea archivar este curso?",buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary",handler:function(e){}},{text:"Archivar",role:"warning",handler:function(){i.itemLoadEvent.emit(!0),i.courseService.archive(e.uuid).subscribe((function(e){"success"==e.status&&i.itemDeleteEvent.emit(t),i.itemLoadEvent.emit(!1),i.toastService.presentToast(e.message,e.status)}),(function(e){i.itemLoadEvent.emit(!1),i.controlerroresService.control(e)}))}}]});case 2:return o=n.sent,n.next=5,o.present();case 5:case"end":return n.stop()}}),n,this)})))}},{key:"restoreCourse",value:function(e,t){return Object(A.b)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var o,i=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.alertCtrl.create({cssClass:"my-custom-class",header:"\xa1Confirmar o cancelar!",message:"\xbfEst\xe1 seguro que desea restaurar este curso?",buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary",handler:function(e){}},{text:"Si, activar",role:"warning",handler:function(){i.itemLoadEvent.emit(!0),i.courseService.restore(e.uuid).subscribe((function(e){"success"==e.status&&i.itemDeleteEvent.emit(t),i.itemLoadEvent.emit(!1),i.toastService.presentToast(e.message,e.status)}),(function(e){i.itemLoadEvent.emit(!1),i.controlerroresService.control(e)}))}}]});case 2:return o=n.sent,n.next=5,o.present();case 5:case"end":return n.stop()}}),n,this)})))}},{key:"edit",value:function(e){return Object(A.b)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,o,i,c=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.modalCtrl.create({component:ai.a,cssClass:"modal-fullscreen",swipeToClose:!0,componentProps:{course_id:e.uuid}});case 2:return n=t.sent,t.next=5,n.present();case 5:return t.next=7,n.onWillDismiss();case 7:o=t.sent,(i=o.data)&&(this.loadingPresent=!0,setTimeout((function(){c.loadingPresent=!1}),1e3),console.log(i),this.course.code=i.code,this.course.name=i.name,this.course.section=i.section,this.course.subject=i.subject,this.course.room=i.room);case 10:case"end":return t.stop()}}),t,this)})))}},{key:"copyCode",value:function(e){return Object(A.b)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,yi.write({string:e});case 2:case"end":return t.stop()}}),t)})))}}]),e}()).\u0275fac=function(e){return new(e||ki)(b.ac(r.b),b.ac(Ho.a),b.ac(r.Db),b.ac(u.a),b.ac(p.a))},ki.\u0275cmp=b.Ub({type:ki,selectors:[["card-course"]],inputs:{index:"index",show_options_routes:"show_options_routes",show_list_students:"show_list_students",course:"course"},outputs:{itemDeleteEvent:"itemDeleteEvent",itemLoadEvent:"itemLoadEvent"},decls:2,vars:2,consts:[[4,"ngIf"],[3,"count","all_width"],[1,"intro-y","box",3,"ngClass"],[1,"flex","items-center","border-b","border-gray-200","dark:border-dark-5"],[1,"ml-3","mr-auto"],[1,"font-medium",3,"routerLink"],[1,"flex","text-gray-600","truncate","text-xs","mt-0.5"],[1,"text-theme-1","dark:text-theme-10","inline-block","truncate","c-pointer",2,"font-size","1.2em",3,"click"],[1,"mx-1"],[1,"p-2"],[1,"h-40","xxl:h-56","image-fit"],["alt","--",1,"rounded-md",3,"src"],[1,"block","font-medium","text-base","mt-2","ml-2",3,"routerLink"],[1,"text-gray-700","dark:text-gray-600","mt-2"],["class","flex-center","style","display: flex;flex-wrap: wrap;",4,"ngIf"],[1,"flex","items-center","p-2","py-3","border-t","border-gray-200","dark:border-dark-5"],[1,"intro-x","flex","mr-2"],["class","intro-x w-8 h-8 image-fit",4,"ngFor","ngForOf"],["slot","fixed","vertical","bottom","horizontal","end",4,"ngIf"],["class","px-5 pt-3 pb-5 border-t border-gray-200 dark:border-dark-5",4,"ngIf"],[1,"flex-center",2,"display","flex","flex-wrap","wrap"],["fill","outline","shape","round","size","small",3,"matTooltip","routerLink"],["name","home-outline"],["name","planet-outline"],["name","book-outline"],["name","albums-outline"],["fill","outline","shape","round","size","small","target","_blank",3,"matTooltip","href",4,"ngIf"],["name","pie-chart-outline"],["fill","outline","shape","round","size","small","target","_blank",3,"matTooltip","href"],["target","_blank",3,"href"],["name","laptop-outline"],[1,"intro-x","w-8","h-8","image-fit"],["alt","--",1,"rounded-full","border","border-white","zoom-in",3,"src","title"],["slot","fixed","vertical","bottom","horizontal","end"],["fab",""],["size","small",3,"matTooltip"],["name","settings-outline"],["side","top"],["color","danger",3,"matTooltip","click"],["name","trash-outline"],["color","warning",3,"matTooltip","click",4,"ngIf"],["color","primary",3,"matTooltip","click",4,"ngIf"],["color","twitter",3,"matTooltip","click"],["name","create-outline"],["color","light",3,"matTooltip","click",4,"ngIf"],["color","warning",3,"matTooltip","click"],["name","archive-outline"],["color","primary",3,"matTooltip","click"],["name","refresh-outline"],["color","light",3,"matTooltip","click"],["name","clipboard-outline"],[1,"px-5","pt-3","pb-5","border-t","border-gray-200","dark:border-dark-5"],[1,"w-full","flex","text-gray-600","text-xs","sm:text-sm"],[1,"mr-2"],[1,"font-medium"]],template:function(e,t){1&e&&(b.cd(0,si,2,2,"ng-container",0),b.cd(1,_i,25,13,"ng-container",0)),2&e&&(b.Ac("ngIf",t.loadingPresent),b.Lb(1),b.Ac("ngIf",!t.loadingPresent))},directives:[i.t,ci.a,i.q,a.i,r.Kb,i.s,r.k,k.a,a.g,r.C,r.w,r.x,r.y],pipes:[m.d],styles:[".border_status_color_archived[_ngcontent-%COMP%]{border:1px solid var(--ion-color-warning)}.border_status_color_active[_ngcontent-%COMP%]{border:1px solid var(--ion-color-primary)}"]}),ki);function xi(e,t){1&e&&(b.gc(0,"ion-buttons",20),b.bc(1,"ion-menu-button"),b.fc())}function wi(e,t){1&e&&(b.gc(0,"ion-title"),b.ed(1),b.tc(2,"translate"),b.fc()),2&e&&(b.Lb(1),b.fd(b.uc(2,1,"menu.courses")))}function Oi(e,t){if(1&e){var n=b.hc();b.gc(0,"ion-searchbar",21),b.oc("ngModelChange",(function(e){return b.Sc(n),b.sc().queryText=e}))("ionChange",(function(){return b.Sc(n),b.sc().search(!0)}))("ionCancel",(function(){return b.Sc(n),b.sc().showSearchbar=!1})),b.tc(1,"translate"),b.fc()}if(2&e){var o=b.sc();b.Bc("placeholder",b.uc(1,2,"forms.search")),b.Ac("ngModel",o.queryText)}}function Pi(e,t){if(1&e){var n=b.hc();b.gc(0,"ion-button",22),b.oc("click",(function(){return b.Sc(n),b.sc().getCoursesByStatus("archived")})),b.tc(1,"translate"),b.bc(2,"ion-icon",23),b.fc()}2&e&&b.Ac("matTooltip",b.uc(1,1,"pages.course.get_archived_courses"))}function Mi(e,t){if(1&e){var n=b.hc();b.gc(0,"ion-button",24),b.oc("click",(function(){return b.Sc(n),b.sc().getCoursesByStatus("active")})),b.tc(1,"translate"),b.bc(2,"ion-icon",25),b.fc()}2&e&&b.Ac("matTooltip",b.uc(1,1,"pages.course.get_active_courses"))}function Si(e,t){1&e&&(b.gc(0,"div",26),b.gc(1,"div",27),b.bc(2,"img",28),b.fc(),b.gc(3,"div",29),b.gc(4,"ion-label",30),b.ed(5),b.tc(6,"translate"),b.fc(),b.fc(),b.fc()),2&e&&(b.Lb(5),b.fd(b.uc(6,1,"pages.course.create_class_or_join")))}function Li(e,t){1&e&&b.bc(0,"mat-progress-bar",31)}function Ai(e,t){1&e&&b.bc(0,"card-load-animation",32),2&e&&b.Ac("count",8)}function Ii(e,t){if(1&e){var n=b.hc();b.gc(0,"ion-col",33),b.gc(1,"card-course",34),b.oc("itemDeleteEvent",(function(e){return b.Sc(n),b.sc().deleteItem(e)}))("itemLoadEvent",(function(e){return b.Sc(n),b.sc().loading=e})),b.fc(),b.fc()}if(2&e){var o=t.$implicit,i=t.index;b.Lb(1),b.Ac("course",o)("index",i)}}function Ti(e,t){1&e&&(b.gc(0,"ion-grid",16),b.gc(1,"ion-row",35),b.gc(2,"ion-col",36),b.bc(3,"img",37),b.gc(4,"p",38),b.ed(5),b.tc(6,"translate"),b.fc(),b.fc(),b.fc(),b.fc()),2&e&&(b.Lb(5),b.fd(b.uc(6,1,"pages.course.no_have_course")))}var Ri,zi,Ei,Fi=((Ri=function(){function e(t,n,o,i,c,r,a,l,u,d){_classCallCheck(this,e),this.actionSheetCtrl=t,this.modalCtrl=n,this.routerOutlet=o,this.toastService=i,this.courseService=c,this.controlErroresService=r,this.tourService=a,this.alertController=l,this.redirectService=u,this.router=d,this.loadingCourses=!1,this.scrollbarStyle=s.a.scrollbarStyle,this.showSearchbar=!1,this.queryText="",this.courses=[],this.img_url="https://images.unsplash.com/photo-1627483262769-04d0a1401487?ixid=MnwxMjA3fDF8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80",this.loading=!1,this.permissions=null,this.status_course="active",this.navigationSubscription=this.router.events.subscribe((function(e){}))}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.getCourses(),this.initGogleAuth(),this.tourService.tour("clickAddCourse"),this.courseService.getPermissions().subscribe((function(t){e.permissions=t.data}),(function(t){e.controlErroresService.control(t)}))}},{key:"createActionSheetCrtl",value:function(e){return Object(A.b)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,o,i=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=[],"yes"==this.permissions.create_course&&(n.push({text:"Crear una clase",handler:function(){i.showModalAddNewClass()}}),n.push({text:"Importar desde classroom",handler:function(){i.loadClient()}})),"yes"==this.permissions.join_course&&n.push({text:"Unirme a una clase",handler:function(){i.openFormJoinClass()}}),n.push({text:"Cancelar",role:"cancel"}),t.next=4,this.actionSheetCtrl.create({header:e,buttons:n});case 4:return o=t.sent,t.next=7,o.present();case 7:case"end":return t.stop()}}),t,this)})))}},{key:"openAddCourse",value:function(e){return Object(A.b)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:null!=this.permissions?this.createActionSheetCrtl(e):this.courseService.getPermissions().subscribe((function(t){n.permissions=t.data,n.createActionSheetCrtl(e)}),(function(e){n.controlErroresService.control(e)}));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"initGogleAuth",value:function(){var e=this;return new Promise((function(e){gapi.load("client:auth2",e)})).then((function(){return Object(A.b)(e,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gapi.auth2.init({client_id:s.a.google.client_id}).then((function(e){t.gapiSetup=!0,t.authInstance=e}));case 2:case"end":return e.stop()}}),e)})))}))}},{key:"getCourses",value:function(){var e=this;this.loadingCourses=!0,this.courseService.courses(this.status_course).subscribe((function(t){e.loadingCourses=!1,e.courses=Array.isArray(t.data)?t.data:[]}),(function(t){e.loadingCourses=!1,e.controlErroresService.control(t)}))}},{key:"search",value:function(){var e=this;this.courses=this.courses.map((function(t){return t.hidden=t.name.indexOf(e.queryText.toUpperCase())>=0,t}))}},{key:"getCoursesByStatus",value:function(e){this.status_course=e,this.getCourses()}},{key:"authenticate",value:function(){return gapi.auth2.getAuthInstance().signIn({scope:"https://www.googleapis.com/auth/classroom.courses https://www.googleapis.com/auth/classroom.courses.readonly"}).then((function(){console.log("Sign-in successful")}),(function(e){console.error("Error signing in",e)}))}},{key:"loadClient",value:function(){var e=this;return this.loading=!0,gapi.client.setApiKey(s.a.google.api_key),gapi.client.load("https://classroom.googleapis.com/$discovery/rest?version=v1").then((function(){console.log("GAPI client loaded for API"),e.execute()}),(function(e){this.loading=!1,console.error("Error loading GAPI client for API",e)}))}},{key:"execute",value:function(){var e=this;return gapi.client.classroom.courses.list({}).then((function(t){var n=t.result.courses;Array.isArray(n)?(n=n.map((function(e){return{classroom_link:e.alternateLink,description:e.description,section:e.section,reference_id:e.id,reference_url:e.alternateLink,name:e.name,code:e.enrollmentCode,room:e.room,reference:"GOOGLE",folders:[{folder_url:e.teacherFolder?e.teacherFolder.alternateLink:"",reference_id:e.teacherFolder?e.teacherFolder.id:"",name:e.teacherFolder?e.teacherFolder.title:""}]}})),e.loading=!1,e.showModalAddClassOfProvider(n)):e.toastService.presentToast("No hay aulas para importar","warning")}),(function(e){console.error("Execute error",e)}))}},{key:"showModalAddClassOfProvider",value:function(e){return Object(A.b)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,o,i,c=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.modalCtrl.create({component:oi,cssClass:"modal-fullscreen",swipeToClose:!0,presentingElement:this.routerOutlet.nativeEl,componentProps:{courses:e}});case 2:return n=t.sent,t.next=5,n.present();case 5:return t.next=7,n.onWillDismiss();case 7:o=t.sent,(i=o.data)&&(console.log(i),Array.isArray(i)&&i.forEach((function(e){c.courses.unshift(e)})));case 10:case"end":return t.stop()}}),t,this)})))}},{key:"showModalAddNewClass",value:function(){return Object(A.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalCtrl.create({component:Zo,cssClass:"modal-fullscreen",swipeToClose:!0,presentingElement:this.routerOutlet.nativeEl,componentProps:{}});case 2:return t=e.sent,e.next=5,t.present();case 5:return e.next=7,t.onWillDismiss();case 7:n=e.sent,(o=n.data)&&this.courses.unshift(o);case 10:case"end":return e.stop()}}),e,this)})))}},{key:"deleteItem",value:function(e){e>=0&&this.courses.splice(e,1)}},{key:"openFormJoinClass",value:function(){return Object(A.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertController.create({cssClass:"",header:"Unirme a una clase",inputs:[{name:"code",value:"",type:"text",placeholder:"C\xf3digo del aula virtual"}],buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:function(){}},{text:"Registrarme",handler:function(e){e.code&&(n.loading=!0,n.courseService.prepareJoin(e).subscribe((function(e){return Object(A.b)(n,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.data){t.next=14;break}return this.loading=!1,t.next=4,this.modalCtrl.create({component:ii.a,cssClass:"modal-fullscreen-100",swipeToClose:!0,presentingElement:this.routerOutlet.nativeEl,componentProps:{course:e.data}});case 4:return n=t.sent,t.next=7,n.present();case 7:return t.next=9,n.onWillDismiss();case 9:t.sent.data&&this.getCourses(),t.next=15;break;case 14:this.toastService.presentToast(e.message,e.status);case 15:case"end":return t.stop()}}),t,this)})))}),(function(e){n.loading=!1,n.controlErroresService.control(e)})))}}]});case 2:return t=e.sent,e.next=5,t.present();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"enableTour",value:function(){this.tourService.tour("clickAddCourse",!0)}},{key:"ngOnDestroy",value:function(){this.navigationSubscription&&this.navigationSubscription.unsubscribe()}}]),e}()).\u0275fac=function(e){return new(e||Ri)(b.ac(r.a),b.ac(r.Db),b.ac(r.fb),b.ac(p.a),b.ac(Ho.a),b.ac(u.a),b.ac(g.a),b.ac(r.b),b.ac(f.a),b.ac(a.f))},Ri.\u0275cmp=b.Ub({type:Ri,selectors:[["app-my-courses"]],decls:26,vars:14,consts:[["translucent","true"],["slot","start",4,"ngIf"],[4,"ngIf"],["showCancelButton","always",3,"ngModel","placeholder","ngModelChange","ionChange","ionCancel",4,"ngIf"],["slot","end"],["color","secondary","size","small",3,"matTooltip","click"],["name","help-buoy-outline"],["color","warning",3,"matTooltip","click",4,"ngIf"],["color","primary",3,"matTooltip","click",4,"ngIf"],[1,"btn-create-c",3,"click"],["slot","icon-only","name","add-circle-outline"],["class","parent-item-help-add btn-create-c",4,"ngIf"],["mode","indeterminate",4,"ngIf"],["fullscreen","true",3,"scrollbar"],[3,"count",4,"ngIf"],[1,"container"],[1,"grid-shuffle"],["id","grid",1,"row"],["size","12","size-sm","6","size-md","4","size-xl","3","class","",4,"ngFor","ngForOf"],["class","grid-shuffle",4,"ngIf"],["slot","start"],["showCancelButton","always",3,"ngModel","placeholder","ngModelChange","ionChange","ionCancel"],["color","warning",3,"matTooltip","click"],["name","archive-outline"],["color","primary",3,"matTooltip","click"],["name","school-outline"],[1,"parent-item-help-add","btn-create-c"],[1,"c-c-ad-d"],["src","/assets/img/dark_create_class_arrow.svg","alt","",1,"call-class-item-help"],[1,""],[1,"color-text","mr-10px"],["mode","indeterminate"],[3,"count"],["size","12","size-sm","6","size-md","4","size-xl","3",1,""],[1,"m-1",3,"course","index","itemDeleteEvent","itemLoadEvent"],["id","grid",1,"row","flex","flex-center"],["size","12","size-sm","8","size-md","8","size-xl","6",1,""],["src","/assets/img/class.jpg","alt","",2,"width","100%"],[1,"text-center","bold"]],template:function(e,t){1&e&&(b.gc(0,"ion-header",0),b.gc(1,"ion-toolbar"),b.cd(2,xi,2,0,"ion-buttons",1),b.cd(3,wi,3,3,"ion-title",2),b.cd(4,Oi,2,4,"ion-searchbar",3),b.gc(5,"ion-buttons",4),b.gc(6,"ion-button",5),b.oc("click",(function(){return t.enableTour()})),b.tc(7,"translate"),b.bc(8,"ion-icon",6),b.fc(),b.cd(9,Pi,3,3,"ion-button",7),b.cd(10,Mi,3,3,"ion-button",8),b.gc(11,"ion-button",9),b.oc("click",(function(){return t.openAddCourse("Agregar nuevo curso")})),b.bc(12,"ion-icon",10),b.fc(),b.fc(),b.fc(),b.cd(13,Si,7,3,"div",11),b.cd(14,Li,1,0,"mat-progress-bar",12),b.fc(),b.gc(15,"ion-content",13),b.cd(16,Ai,1,1,"card-load-animation",14),b.gc(17,"div",15),b.gc(18,"ion-grid",16),b.gc(19,"ion-row",17),b.cd(20,Ii,2,2,"ion-col",18),b.fc(),b.fc(),b.fc(),b.cd(21,Ti,7,3,"ion-grid",19),b.fc(),b.gc(22,"ion-footer",0),b.gc(23,"ion-toolbar"),b.gc(24,"ion-buttons",4),b.ed(25,"\xa92022 Ediciones Holgu\xedn"),b.fc(),b.fc(),b.fc()),2&e&&(b.Lb(2),b.Ac("ngIf",!t.showSearchbar),b.Lb(1),b.Ac("ngIf",!t.showSearchbar),b.Lb(1),b.Ac("ngIf",t.showSearchbar),b.Lb(2),b.Ac("matTooltip",b.uc(7,12,"buttons.tour")),b.Lb(3),b.Ac("ngIf",null!=t.permissions&&t.permissions.show_archived_course&&"active"==t.status_course),b.Lb(1),b.Ac("ngIf","archived"==t.status_course),b.Lb(3),b.Ac("ngIf",0==t.courses.length),b.Lb(1),b.Ac("ngIf",t.loading),b.Lb(1),b.Bc("scrollbar",t.scrollbarStyle),b.Lb(1),b.Ac("ngIf",t.loadingCourses),b.Lb(4),b.Ac("ngForOf",t.courses),b.Lb(1),b.Ac("ngIf",0==t.courses.length&&!t.loadingCourses))},directives:[r.B,r.zb,i.t,r.l,r.k,k.a,r.C,r.u,h.b,r.A,r.gb,i.s,r.z,r.R,r.xb,r.hb,r.Mb,c.r,c.u,r.N,Te.a,ci.a,r.t,Ci],pipes:[m.d],styles:[".parent-item-help-add[_ngcontent-%COMP%]{position:absolute;right:0;top:3.4em;z-index:1000}.parent-item-help-add[_ngcontent-%COMP%]   .c-c-ad-d[_ngcontent-%COMP%]{display:flex;justify-content:right}.parent-item-help-add[_ngcontent-%COMP%]   .c-c-ad-d[_ngcontent-%COMP%]   .call-class-item-help[_ngcontent-%COMP%]{color:var(--ion-text-color);margin-right:1.1875rem;width:3.5rem}.color-text[_ngcontent-%COMP%]{color:var(--ion-text-color)}.mr-10px[_ngcontent-%COMP%]{margin-right:10px}"]}),Ri),ji=n("y2f/"),Bi=n("p74H"),Di=n("X+KH"),Ui=n("EYf3"),$i=n("6tnU"),Ni=n("e9RB"),qi=n("tk/3"),Hi=((Ei=function(){function e(t,n){_classCallCheck(this,e),this.httpClient=t,this.tokenService=n,this.url=l.i.messenger}return _createClass(e,[{key:"send",value:function(e,t){if(t){var n=new qi.e({Authorization:this.tokenService.getToken(),"X-Socket-ID":t});return this.httpClient.post(this.url+"send",e,{headers:n})}return this.httpClient.post(this.url+"send",e)}},{key:"response",value:function(e,t){if(t){var n=new qi.e({Authorization:this.tokenService.getToken(),"X-Socket-ID":t});return this.httpClient.post(this.url+"response",e,{headers:n})}return this.httpClient.post(this.url+"response",e)}},{key:"sendDirect",value:function(e,t){var n=new qi.e({Authorization:this.tokenService.getToken(),"X-Socket-ID":t});return this.httpClient.post(this.url+"send/direct",e,{headers:n})}},{key:"myMessages",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0;return console.log(t),this.httpClient.get(this.url+"my"+this.buildFilters(e,t))}},{key:"getMessage",value:function(e){return this.httpClient.get(this.url+"get/"+e)}},{key:"getMessagesById",value:function(e){return this.httpClient.get(this.url+"get-all/"+e)}},{key:"buildFilters",value:function(e,t){var n="?page="+e+"&";return t.status&&(n+="status="+t.status+"&"),t.search&&(n+="search="+t.search+"&"),t.range&&t.range.start&&(n+="start="+R(t.range.start).set("hour",0).format("YYYY-MM-DD")+"&"),t.range&&t.range.end&&(n+="end="+R(t.range.end).set("hour",23).format("YYYY-MM-DD")+"&"),n}},{key:"uploadFile",value:function(e,t){return this.httpClient.post(this.url+"upload-file/"+t,e)}},{key:"changeRead",value:function(e,t){return this.httpClient.post(this.url+"change-read/"+e,t)}},{key:"delete",value:function(e){return this.httpClient.delete(this.url+"delete/"+e)}},{key:"archive",value:function(e){return this.httpClient.get(this.url+"archive/"+e)}}]),e}()).\u0275fac=function(e){return new(e||Ei)(b.kc(qi.b),b.kc(Le.a))},Ei.\u0275prov=b.Wb({token:Ei,factory:Ei.\u0275fac,providedIn:"root"}),Ei),Vi=function(){var e=function(){function e(){_classCallCheck(this,e),this.messengerService$=new v.a}return _createClass(e,[{key:"appendMessage",value:function(e){this.messengerService$.next(e)}},{key:"getMessenger$",value:function(){return this.messengerService$.asObservable()}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=b.Wb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),Yi=((zi=function(){function e(){_classCallCheck(this,e),this.message=""}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||zi)},zi.\u0275cmp=b.Ub({type:zi,selectors:[["not-fount-component"]],inputs:{message:"message"},decls:31,vars:1,consts:[[1,"preloader",2,"opacity","1"],["version","1.1","id","sun","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","x","0px","y","0px","width","10px","height","10px","viewBox","0 0 10 10","enable-background","new 0 0 10 10",0,"xml","space","preserve",2,"opacity","1","margin-left","0px","margin-top","0px"],["fill","none","d","M6.942,3.876c-0.4-0.692-1.146-1.123-1.946-1.123c-0.392,0-0.779,0.104-1.121,0.301c-1.072,0.619-1.44,1.994-0.821,3.067C3.454,6.815,4.2,7.245,5,7.245c0.392,0,0.779-0.104,1.121-0.301C6.64,6.644,7.013,6.159,7.167,5.581C7.321,5,7.243,4.396,6.942,3.876z M6.88,5.505C6.745,6.007,6.423,6.427,5.973,6.688C5.676,6.858,5.34,6.948,5,6.948c-0.695,0-1.343-0.373-1.69-0.975C2.774,5.043,3.093,3.849,4.024,3.312C4.32,3.14,4.656,3.05,4.996,3.05c0.695,0,1.342,0.374,1.69,0.975C6.946,4.476,7.015,5,6.88,5.505z"],["fill","none","d","M8.759,2.828C8.718,2.757,8.626,2.732,8.556,2.774L7.345,3.473c-0.07,0.041-0.094,0.132-0.053,0.202C7.319,3.723,7.368,3.75,7.419,3.75c0.025,0,0.053-0.007,0.074-0.02l1.211-0.699C8.774,2.989,8.8,2.899,8.759,2.828z"],["fill","none","d","M1.238,7.171c0.027,0.047,0.077,0.074,0.128,0.074c0.025,0,0.051-0.008,0.074-0.02l1.211-0.699c0.071-0.041,0.095-0.133,0.054-0.203S2.574,6.228,2.503,6.269l-1.21,0.699C1.221,7.009,1.197,7.101,1.238,7.171z"],["fill","none","d","M6.396,2.726c0.052,0,0.102-0.026,0.13-0.075l0.349-0.605C6.915,1.976,6.89,1.885,6.819,1.844c-0.07-0.042-0.162-0.017-0.202,0.054L6.269,2.503C6.228,2.574,6.251,2.666,6.322,2.706C6.346,2.719,6.371,2.726,6.396,2.726z"],["fill","none","d","M3.472,7.347L3.123,7.952c-0.041,0.07-0.017,0.162,0.054,0.203C3.2,8.169,3.226,8.175,3.25,8.175c0.052,0,0.102-0.027,0.129-0.074l0.349-0.605c0.041-0.07,0.017-0.16-0.054-0.203C3.603,7.251,3.513,7.276,3.472,7.347z"],["fill","none","d","M3.601,2.726c0.025,0,0.051-0.007,0.074-0.02C3.746,2.666,3.77,2.574,3.729,2.503l-0.35-0.604C3.338,1.828,3.248,1.804,3.177,1.844C3.106,1.886,3.082,1.976,3.123,2.047l0.35,0.604C3.5,2.7,3.549,2.726,3.601,2.726z"],["fill","none","d","M6.321,7.292c-0.07,0.043-0.094,0.133-0.054,0.203l0.351,0.605c0.026,0.047,0.076,0.074,0.127,0.074c0.025,0,0.051-0.006,0.074-0.02c0.072-0.041,0.096-0.133,0.055-0.203l-0.35-0.605C6.483,7.276,6.393,7.253,6.321,7.292z"],["fill","none","d","M2.202,5.146c0.082,0,0.149-0.065,0.149-0.147S2.284,4.851,2.202,4.851H1.503c-0.082,0-0.148,0.066-0.148,0.148s0.066,0.147,0.148,0.147H2.202z"],["fill","none","d","M8.493,4.851H7.794c-0.082,0-0.148,0.066-0.148,0.148s0.066,0.147,0.148,0.147l0,0h0.699c0.082,0,0.148-0.065,0.148-0.147S8.575,4.851,8.493,4.851L8.493,4.851z"],["fill","none","d","M5.146,2.203V0.805c0-0.082-0.066-0.148-0.148-0.148c-0.082,0-0.148,0.066-0.148,0.148v1.398c0,0.082,0.066,0.149,0.148,0.149C5.08,2.352,5.146,2.285,5.146,2.203z"],["fill","none","d","M4.85,7.796v1.396c0,0.082,0.066,0.15,0.148,0.15c0.082,0,0.148-0.068,0.148-0.15V7.796c0-0.082-0.066-0.148-0.148-0.148C4.917,7.647,4.85,7.714,4.85,7.796z"],["fill","none","d","M2.651,3.473L1.44,2.774C1.369,2.732,1.279,2.757,1.238,2.828C1.197,2.899,1.221,2.989,1.292,3.031l1.21,0.699c0.023,0.013,0.049,0.02,0.074,0.02c0.051,0,0.101-0.026,0.129-0.075C2.747,3.604,2.722,3.514,2.651,3.473z"],["fill","none","d","M8.704,6.968L7.493,6.269c-0.07-0.041-0.162-0.016-0.201,0.055c-0.041,0.07-0.018,0.162,0.053,0.203l1.211,0.699c0.023,0.012,0.049,0.02,0.074,0.02c0.051,0,0.102-0.027,0.129-0.074C8.8,7.101,8.776,7.009,8.704,6.968z"],["version","1.1","id","cloud","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","x","0px","y","0px","width","10px","height","10px","viewBox","0 0 10 10","enable-background","new 0 0 10 10",0,"xml","space","preserve"],["fill","none","d","M8.528,5.624H8.247c-0.085,0-0.156-0.068-0.156-0.154c0-0.694-0.563-1.257-1.257-1.257c-0.098,0-0.197,0.013-0.3,0.038C6.493,4.259,6.45,4.252,6.415,4.229C6.38,4.208,6.356,4.172,6.348,4.131C6.117,3.032,5.135,2.235,4.01,2.235c-1.252,0-2.297,0.979-2.379,2.23c-0.004,0.056-0.039,0.108-0.093,0.13C1.076,4.793,0.776,5.249,0.776,5.752c0,0.693,0.564,1.257,1.257,1.257h6.495c0.383,0,0.695-0.31,0.695-0.692S8.911,5.624,8.528,5.624z"],[1,"rain"],[1,"drop"],[1,"text",2,"color","#7f7f7f"]],template:function(e,t){1&e&&(b.gc(0,"div",0),b.rc(),b.gc(1,"svg",1),b.gc(2,"g"),b.bc(3,"path",2),b.bc(4,"path",3),b.bc(5,"path",4),b.bc(6,"path",5),b.bc(7,"path",6),b.bc(8,"path",7),b.bc(9,"path",8),b.bc(10,"path",9),b.bc(11,"path",10),b.bc(12,"path",11),b.bc(13,"path",12),b.bc(14,"path",13),b.bc(15,"path",14),b.fc(),b.fc(),b.gc(16,"svg",15),b.bc(17,"path",16),b.fc(),b.qc(),b.gc(18,"div",17),b.bc(19,"span",18),b.bc(20,"span",18),b.bc(21,"span",18),b.bc(22,"span",18),b.bc(23,"span",18),b.bc(24,"span",18),b.bc(25,"span",18),b.bc(26,"span",18),b.bc(27,"span",18),b.bc(28,"span",18),b.fc(),b.gc(29,"div",19),b.ed(30),b.fc(),b.fc()),2&e&&(b.Lb(30),b.gd(" ",t.message," "))},styles:[".preloader[_ngcontent-%COMP%]{position:absolute;margin-left:-55px;margin-top:-100px;left:50%;top:50%}.preloader[_ngcontent-%COMP%], svg[_ngcontent-%COMP%]{height:110px;width:110px}path[_ngcontent-%COMP%]{stroke:#7f7f7f;stroke-width:.25;fill:#241e20}#cloud[_ngcontent-%COMP%]{position:relative;z-index:2}#cloud[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#efefef}#sun[_ngcontent-%COMP%]{margin-left:-10px;margin-top:6px;opacity:0;width:60px;height:60px;position:absolute;left:45px;top:15px;z-index:1;-webkit-animation-name:rotate;animation-name:rotate;-webkit-animation-duration:16s;animation-duration:16s;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite;-webkit-animation-timing-function:linear;animation-timing-function:linear}#sun[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{stroke-width:.18;fill:#7f7f7f}@-webkit-keyframes rotate{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes rotate{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.rain[_ngcontent-%COMP%]{position:absolute;width:70px;height:70px;margin-top:-32px;margin-left:19px}.drop[_ngcontent-%COMP%]{opacity:1;background:#7f7f7f;display:block;float:left;width:3px;height:10px;margin-left:4px;border-radius:0 0 6px 6px;-webkit-animation-name:drop;animation-name:drop;-webkit-animation-duration:.35s;animation-duration:.35s;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite}.drop[_ngcontent-%COMP%]:first-child{-webkit-animation-delay:-.13s;animation-delay:-.13s}.drop[_ngcontent-%COMP%]:nth-child(2){-webkit-animation-delay:-.24s;animation-delay:-.24s}.drop[_ngcontent-%COMP%]:nth-child(3){-webkit-animation-delay:-.39s;animation-delay:-.39s}.drop[_ngcontent-%COMP%]:nth-child(4){-webkit-animation-delay:-525ms;animation-delay:-525ms}.drop[_ngcontent-%COMP%]:nth-child(5){-webkit-animation-delay:-.64s;animation-delay:-.64s}.drop[_ngcontent-%COMP%]:nth-child(6){-webkit-animation-delay:-.79s;animation-delay:-.79s}.drop[_ngcontent-%COMP%]:nth-child(7){-webkit-animation-delay:-.9s;animation-delay:-.9s}.drop[_ngcontent-%COMP%]:nth-child(8){-webkit-animation-delay:-1.05s;animation-delay:-1.05s}.drop[_ngcontent-%COMP%]:nth-child(9){-webkit-animation-delay:-1.13s;animation-delay:-1.13s}.drop[_ngcontent-%COMP%]:nth-child(10){-webkit-animation-delay:-1.3s;animation-delay:-1.3s}@-webkit-keyframes drop{50%{height:45px;opacity:0}51%{opacity:0}to{height:1px;opacity:0}}@keyframes drop{50%{height:45px;opacity:0}51%{opacity:0}to{height:1px;opacity:0}}.text[_ngcontent-%COMP%]{font-family:Helvetica,Helvetica Neue,sans-serif;letter-spacing:1px;text-align:center;margin-left:-43px;font-weight:700;margin-top:20px;font-size:11px;color:#a0a0a0;width:200px}"]}),zi),Xi=["theLastReference"];function Qi(e,t){if(1&e){var n=b.hc();b.gc(0,"a",36),b.oc("click",(function(){b.Sc(n);var e=b.sc().$implicit;return b.sc().showMessage(e)})),b.ed(1),b.fc()}if(2&e){var o=b.sc().$implicit;b.Lb(1),b.fd(o.send?(o.send.last_names||" ")+" "+(o.send.name||o.send.email):"-")}}function Gi(e,t){if(1&e&&(b.gc(0,"span",39),b.ed(1),b.fc()),2&e){var n=b.sc(2).$implicit;b.Lb(1),b.hd(" ",n.last_names," ",n.name,"")}}function Wi(e,t){1&e&&(b.gc(0,"span"),b.ed(1,";"),b.fc())}function Ki(e,t){if(1&e&&(b.gc(0,"span"),b.cd(1,Gi,2,2,"span",38),b.cd(2,Wi,2,0,"span",35),b.fc()),2&e){var n=b.sc().index,o=b.sc(2).$implicit;b.Lb(1),b.Ac("ngIf",n<5),b.Lb(1),b.Ac("ngIf",o.message.users.length>n+1)}}function Zi(e,t){if(1&e&&(b.gc(0,"span"),b.cd(1,Ki,3,2,"span",35),b.fc()),2&e){var n=t.index;b.Lb(1),b.Ac("ngIf",n<=5)}}function Ji(e,t){if(1&e){var n=b.hc();b.gc(0,"a",36),b.oc("click",(function(){b.Sc(n);var e=b.sc().$implicit;return b.sc().showMessage(e)})),b.gc(1,"strong"),b.ed(2,"Para: "),b.fc(),b.cd(3,Zi,2,1,"span",37),b.fc()}if(2&e){var o=b.sc().$implicit;b.Lb(3),b.Ac("ngForOf",o.message.users)}}function ec(e,t){if(1&e){var n=b.hc();b.gc(0,"button",40),b.oc("click",(function(){b.Sc(n);var e=b.sc(),t=e.$implicit,o=e.index;return b.sc().archive(t,o)})),b.bc(1,"i",14),b.fc()}}function tc(e,t){if(1&e){var n=b.hc();b.gc(0,"button",41),b.oc("click",(function(){b.Sc(n);var e=b.sc(),t=e.$implicit,o=e.index;return b.sc().archive(t,o)})),b.bc(1,"i",42),b.fc()}}function nc(e,t){if(1&e){var n=b.hc();b.gc(0,"li",43),b.gc(1,"button",44),b.gc(2,"i",45),b.oc("click",(function(){b.Sc(n);var e=b.sc().$implicit;return b.sc().changeRead(e)})),b.fc(),b.fc(),b.fc()}}function oc(e,t){if(1&e){var n=b.hc();b.gc(0,"li",43),b.gc(1,"button",46),b.gc(2,"i",47),b.oc("click",(function(){b.Sc(n);var e=b.sc().$implicit;return b.sc().changeRead(e)})),b.fc(),b.fc(),b.fc()}}function ic(e,t){1&e&&b.bc(0,"span",null,48)}function cc(e,t){if(1&e){var n=b.hc();b.gc(0,"div",20),b.gc(1,"div",21),b.cd(2,Qi,2,1,"a",22),b.cd(3,Ji,4,1,"a",22),b.gc(4,"a",23),b.oc("click",(function(){b.Sc(n);var e=t.$implicit;return b.sc().showMessage(e)})),b.ed(5),b.fc(),b.gc(6,"p",24),b.gc(7,"span"),b.ed(8),b.fc(),b.gc(9,"button",25),b.bc(10,"i",26),b.fc(),b.fc(),b.gc(11,"div",27),b.gc(12,"ul",28),b.gc(13,"li",29),b.cd(14,ec,2,0,"button",30),b.fc(),b.gc(15,"li",29),b.cd(16,tc,2,0,"button",31),b.fc(),b.gc(17,"li",32),b.gc(18,"button",33),b.oc("click",(function(){b.Sc(n);var e=t.$implicit,o=t.index;return b.sc().deleteElem(e,o)})),b.bc(19,"i",16),b.fc(),b.fc(),b.cd(20,nc,3,0,"li",34),b.cd(21,oc,3,0,"li",34),b.fc(),b.fc(),b.fc(),b.cd(22,ic,2,0,"span",35),b.fc()}if(2&e){var o=t.$implicit,i=t.index,c=b.sc();b.Lb(1),b.Ac("ngClass",o.is_read?"":"all-txt-bold"),b.Lb(1),b.Ac("ngIf","send"!=o.status),b.Lb(1),b.Ac("ngIf","send"==o.status),b.Lb(2),b.fd(o.message?o.message.subject:"-"),b.Lb(3),b.fd(c.moment(o.created_at).format("D/MM/YYYY")),b.Lb(6),b.Ac("ngIf","active"==o.status||"send"==o.status),b.Lb(2),b.Ac("ngIf","archived"==o.status),b.Lb(4),b.Ac("ngIf",0==o.is_read),b.Lb(1),b.Ac("ngIf",1==o.is_read),b.Lb(1),b.Ac("ngIf",i+1==c.messages.length)}}function rc(e,t){1&e&&b.bc(0,"img",52)}function ac(e,t){1&e&&(b.gc(0,"div"),b.bc(1,"not-fount-component",53),b.fc()),2&e&&(b.Lb(1),b.Ac("message","Lo sentimos, no hemos encontrado ni un mensaje."))}function sc(e,t){if(1&e&&(b.gc(0,"div",49),b.gc(1,"div",50),b.cd(2,rc,1,0,"img",51),b.fc(),b.cd(3,ac,2,1,"div",35),b.bc(4,"p"),b.fc()),2&e){var n=b.sc();b.Lb(2),b.Ac("ngIf",n.searching),b.Lb(1),b.Ac("ngIf",n.search_find&&0==n.messages.length)}}var lc,uc=((lc=function(){function e(t,n,o,i,c,r,a,u,d){_classCallCheck(this,e),this.controlErroresService=t,this.courseService=n,this.toastService=o,this.modalCrl=i,this.userData=c,this.messageService=r,this.translate=a,this.authService=u,this.messengerS$=d,this.loading=!1,this.openFilter=!1,this.moment=R,this.courses=[],this.users=[],this.usersSelected=[],this.search_find=!1,this.searching=!1,this.fieldEmitChange=new b.r,this.auth=null,this.pageMessage=1,this.allMessage=1,this.decodeURIComponent=decodeURIComponent,this.scrollbarStyle=s.a.scrollbarStyle,this.messages=[],this.filter={status:"active",search:"",range:{start:null,end:null}},this.panel_show="messages",this.timeoutID=null,a.setDefaultLang(l.e.lang),this.webSocket()}return _createClass(e,[{key:"webSocket",value:function(){this.echo=this.authService.echoPush()}},{key:"ngOnInit",value:function(){return Object(A.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.userData.getUser();case 2:this.auth=e.sent,this.resetLoadMessages(),this.intersectionObserver(),this.messengerS$.getMessenger$().subscribe((function(e){t.messages.unshift(e)}));case 6:case"end":return e.stop()}}),e,this)})))}},{key:"ngAfterViewInit",value:function(){var e=this;this.theLastReference.changes.subscribe((function(t){console.log(t),t.last&&e.observer.observe(t.last.nativeElement)}))}},{key:"intersectionObserver",value:function(){var e=this;this.observer=new IntersectionObserver((function(t){t[0].isIntersecting&&e.allMessage>=e.pageMessage&&e.loadAllMessages()}),{root:null,rootMargin:"0px",threshold:.5})}},{key:"resetLoadMessages",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&(this.filter.search="",this.filter.range.start=null,this.filter.range.end=null),this.pageMessage=1,this.search_find=!1,this.messages=[],this.loadAllMessages()}},{key:"loadAllMessages",value:function(){var e=this;this.searching=!0,this.messageService.myMessages(this.pageMessage,this.filter).subscribe((function(t){e.pageMessage++,e.allMessage=t.last,e.messages=e.messages.concat(t.data),e.searching=!1,e.search_find=!0}),(function(t){e.searching=!1,e.controlErroresService.control(t)}))}},{key:"changeRead",value:function(e){var t=this;this.messageService.changeRead(e.uuid,{is_read:!e.is_read}).subscribe((function(t){e.is_read=t.is_read,console.log(e.is_read,t)}),(function(e){t.controlErroresService.control(e)}))}},{key:"deleteElem",value:function(e,t){var n=this;confirm("\xbfEst\xe1 seguro de eliminar este elemento?")&&this.messageService.delete(e.uuid).subscribe((function(e){n.messages.splice(t,1),n.toastService.warning(e.message)}),(function(e){n.controlErroresService.control(e)}))}},{key:"archive",value:function(e,t){var n=this;this.messageService.archive(e.uuid).subscribe((function(e){n.messages.splice(t,1),n.toastService.info(e.message)}),(function(e){n.controlErroresService.control(e)}))}},{key:"inputModeKeyUp",value:function(){var e=this;this.timeoutID&&clearTimeout(this.timeoutID),this.timeoutID=setTimeout((function(){return e.resetLoadMessages()}),1e3)}},{key:"openPanelNewMessage",value:function(e){this.panel_show=e}},{key:"dismiss",value:function(){this.modalCrl.dismiss()}},{key:"recibeMessage",value:function(e){this.panel_show="messages"}},{key:"showMessage",value:function(e){this.fieldEmitChange.emit(e)}}]),e}()).\u0275fac=function(e){return new(e||lc)(b.ac(u.a),b.ac(Ho.a),b.ac(Tn.b),b.ac(r.Db),b.ac(Di.a),b.ac(Hi),b.ac(m.e),b.ac(Ni.a),b.ac(Vi))},lc.\u0275cmp=b.Ub({type:lc,selectors:[["chat-messages"]],viewQuery:function(e,t){var n;1&e&&b.ld(Xi,!0,b.o),2&e&&b.Nc(n=b.pc())&&(t.theLastReference=n)},outputs:{fieldEmitChange:"fieldEmitChange"},decls:24,vars:7,consts:[[1,"container"],[1,"row","mt-4"],[1,"form-search-items",2,"width","100%"],[1,"form-group","relative"],["type","text","placeholder","Buscar Mensaje",1,"form-control","input-item-search",3,"ngModel","input","ngModelChange","keydown.enter"],[1,"btn","btn-search-item",2,"height","100%",3,"click"],[1,"fas","fa-search"],[1,"row","rounded-lg"],[1,"col-12","mb-2"],[1,"btn","btn--principal","mr-2","info-btn-active",3,"ngClass","click"],[1,"fas","fa-inbox"],[1,"btn","btn--principal","mr-2","info-btn-green",3,"ngClass","click"],[1,"fas","fa-paper-plane"],[1,"btn","btn--principal","mr-2","info-btn-archived",3,"ngClass","click"],[1,"fas","fa-archive"],[1,"btn","btn--principal","mr-2","info-btn-deleted",3,"ngClass","click"],[1,"fas","fa-trash"],[1,"col-12"],["class","card card-chat-messsage relative",4,"ngFor","ngForOf"],["class","chat-box bg-white","id","scrollContentMessage",4,"ngIf"],[1,"card","card-chat-messsage","relative"],[1,"card-body","row","p-0","w-100",3,"ngClass"],["class","mb-0 mt-2 col-4 elem-text-larg",3,"click",4,"ngIf"],[1,"mb-0","mt-2","col-5","col-md-6","elem-text-larg",3,"click"],[1,"mb-0","mt-2","col-3","col-md-2","flex","p-0"],[1,"btn","btn-rel-mess","m-0"],[1,"fas","fa-caret-square-left"],[1,"abs-libre-right"],[1,"mb-0","mt-2","list-group-buttons"],[1,"bqX","brq"],["matTooltip","Archivar","matTooltipPosition","above","class","btn",3,"click",4,"ngIf"],["matTooltip","Mover a bandeja de entrada","matTooltipPosition","above","class","btn",3,"click",4,"ngIf"],[1,"bqX","bru"],["matTooltip","Eliminar","matTooltipPosition","above",1,"btn",3,"click"],["class","bqX brs",4,"ngIf"],[4,"ngIf"],[1,"mb-0","mt-2","col-4","elem-text-larg",3,"click"],[4,"ngFor","ngForOf"],["class","text-muted",4,"ngIf"],[1,"text-muted"],["matTooltip","Archivar","matTooltipPosition","above",1,"btn",3,"click"],["matTooltip","Mover a bandeja de entrada","matTooltipPosition","above",1,"btn",3,"click"],[1,"fas","fa-envelope-open-text"],[1,"bqX","brs"],["matTooltip","Marcar como le\xeddo","matTooltipPosition","above",1,"btn"],[1,"fas","fa-envelope-open",3,"click"],["matTooltip","Marcar como no le\xeddo","matTooltipPosition","above",1,"btn"],[1,"fas","fa-envelope",3,"click"],["theLastReference",""],["id","scrollContentMessage",1,"chat-box","bg-white"],[1,"text-center"],["src","assets/img/loading.gif","alt","","width","70",4,"ngIf"],["src","assets/img/loading.gif","alt","","width","70"],[3,"message"]],template:function(e,t){1&e&&(b.gc(0,"div",0),b.gc(1,"div",1),b.gc(2,"div",2),b.gc(3,"div",3),b.gc(4,"input",4),b.oc("input",(function(){return t.inputModeKeyUp()}))("ngModelChange",(function(e){return t.filter.search=e}))("keydown.enter",(function(){return t.resetLoadMessages()})),b.fc(),b.gc(5,"button",5),b.oc("click",(function(){return t.resetLoadMessages()})),b.bc(6,"i",6),b.fc(),b.fc(),b.fc(),b.fc(),b.gc(7,"div",7),b.gc(8,"div",8),b.gc(9,"button",9),b.oc("click",(function(){return t.filter.status="active",t.resetLoadMessages()})),b.bc(10,"i",10),b.ed(11," Recibidos"),b.fc(),b.gc(12,"button",11),b.oc("click",(function(){return t.filter.status="send",t.resetLoadMessages()})),b.bc(13,"i",12),b.ed(14," Enviados"),b.fc(),b.gc(15,"button",13),b.oc("click",(function(){return t.filter.status="archived",t.resetLoadMessages()})),b.bc(16,"i",14),b.ed(17," Archivados"),b.fc(),b.gc(18,"button",15),b.oc("click",(function(){return t.filter.status="deleted",t.resetLoadMessages()})),b.bc(19,"i",16),b.ed(20," Papelera"),b.fc(),b.fc(),b.gc(21,"div",17),b.cd(22,cc,23,10,"div",18),b.cd(23,sc,5,2,"div",19),b.fc(),b.fc(),b.fc()),2&e&&(b.Lb(4),b.Ac("ngModel",t.filter.search),b.Lb(5),b.Ac("ngClass","active"==t.filter.status?"btn-active-principal":""),b.Lb(3),b.Ac("ngClass","send"==t.filter.status?"btn-active-principal":""),b.Lb(3),b.Ac("ngClass","archived"==t.filter.status?"btn-active-principal":""),b.Lb(3),b.Ac("ngClass","deleted"==t.filter.status?"btn-active-principal":""),b.Lb(4),b.Ac("ngForOf",t.messages),b.Lb(1),b.Ac("ngIf",t.searching||t.search_find&&0==t.messages.length))},directives:[c.c,c.r,c.u,i.q,i.s,i.t,k.a,Yi],styles:["[_ngcontent-%COMP%]::-webkit-scrollbar{width:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{width:5px;background:#f5f5f5}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{width:1em;background-color:#ddd;outline:1px solid #708090;border-radius:1rem}.text-small[_ngcontent-%COMP%]{font-size:.9rem}.chat-box[_ngcontent-%COMP%], .messages-box[_ngcontent-%COMP%]{height:40vh;overflow-y:auto}.rounded-lg[_ngcontent-%COMP%]{border-radius:.5rem}input[_ngcontent-%COMP%]::-moz-placeholder{font-size:.9rem;color:#999}input[_ngcontent-%COMP%]::placeholder{font-size:.9rem;color:#999}.fix-bottom[_ngcontent-%COMP%]{position:absolute;bottom:0;width:100%}.btn-abs-b-r[_ngcontent-%COMP%]{position:fixed;bottom:2em;right:2em;font-size:25px;color:#fff;z-index:100}.card-chat-messsage[_ngcontent-%COMP%]{cursor:pointer;padding:5px 0 5px 10px;margin:0;box-shadow:inset 0 -1px 0 0 rgba(100,121,143,.12);display:flex;position:relative}.card-chat-messsage[_ngcontent-%COMP%]   .elem-text-larg[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:#000;text-decoration:none}.card-chat-messsage[_ngcontent-%COMP%]   .abs-libre-right[_ngcontent-%COMP%]{position:absolute;display:none;align-items:center;border:none;right:0;background:#fff;top:0;width:auto}.card-chat-messsage[_ngcontent-%COMP%]   .abs-libre-right[_ngcontent-%COMP%]   .list-group-buttons[_ngcontent-%COMP%]{display:flex;list-style:none}.card-chat-messsage[_ngcontent-%COMP%]   .abs-libre-right[_ngcontent-%COMP%]   .list-group-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{height:25px;width:25px;opacity:.54;align-items:center;border:none;display:inline-flex;justify-content:center;outline:none;position:relative;z-index:0;cursor:pointer;list-style:none;margin:0 10px;border-radius:5px;padding:5px}.card-chat-messsage[_ngcontent-%COMP%]   .abs-libre-right[_ngcontent-%COMP%]   .list-group-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{background:#e4e4e4;opacity:1}.card-chat-messsage[_ngcontent-%COMP%]:hover{box-shadow:inset 1px 0 0 #dadce0,inset -1px 0 0 #dadce0,0 1px 2px 0 rgba(60,64,67,.3),0 1px 3px 1px rgba(60,64,67,.15);z-index:2}.card-chat-messsage[_ngcontent-%COMP%]:hover   .abs-libre-right[_ngcontent-%COMP%]{display:block}.all-txt-bold[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{font-weight:700}.form-search-items[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{position:relative}.form-search-items[_ngcontent-%COMP%]   .btn-search-item[_ngcontent-%COMP%]{position:absolute;top:2px;left:5px}.form-search-items[_ngcontent-%COMP%]   .input-item-search[_ngcontent-%COMP%]{padding-left:40px}.relative[_ngcontent-%COMP%]{position:relative}.btn--principal[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#999}.btn--principal.btn-active-principal[_ngcontent-%COMP%]{outline:none}.btn--principal.btn-active-principal.info-btn-active[_ngcontent-%COMP%]{background:rgba(142,201,255,.651);color:#00255e}.btn--principal.btn-active-principal.info-btn-active[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#00255e}.btn--principal.btn-active-principal.info-btn-archived[_ngcontent-%COMP%]{background:rgba(255,238,142,.651);color:#5e3800}.btn--principal.btn-active-principal.info-btn-archived[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#5e3200}.btn--principal.btn-active-principal.info-btn-deleted[_ngcontent-%COMP%]{background:rgba(255,142,142,.651);color:#5e0000}.btn--principal.btn-active-principal.info-btn-deleted[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#5e0000}.btn--principal.btn-active-principal.info-btn-green[_ngcontent-%COMP%]{background:rgba(142,255,170,.651);color:#0b5e00}.btn--principal.btn-active-principal.info-btn-green[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#0b5e00}.btn-rel-mess[_ngcontent-%COMP%]{height:25px;width:25px;opacity:.54;align-items:center;border:none;display:inline-flex;justify-content:center;outline:none;position:relative;z-index:0;cursor:pointer;list-style:none;border-radius:5px;padding:5px}.btn-rel-mess[_ngcontent-%COMP%]:hover{background:#e4e4e4;opacity:1}.abs-r-t[_ngcontent-%COMP%]{position:absolute;right:1px;top:0}"]}),lc),dc=n("jhN1");function gc(e,t){if(1&e&&b.bc(0,"img",5),2&e){var n=b.sc(2);b.bd("width",n.bgLogoUrlSize,"px")("height",n.bgLogoUrlSize,"px")("top",n.logoTop),b.Ac("ngClass",n.bgLogoUrlPosition)("src",n.trustedLogoUrl,b.Vc)}}function fc(e,t){1&e&&b.bc(0,"div")}function pc(e,t){if(1&e&&(b.gc(0,"div"),b.gc(1,"div",1),b.cd(2,gc,1,8,"img",2),b.gc(3,"div",3),b.gc(4,"div"),b.cd(5,fc,1,0,"div",4),b.fc(),b.fc(),b.fc(),b.fc()),2&e){var n=b.sc();b.Lb(1),b.bd("background-color",n.bgColor)("opacity",n.bgOpacity),b.Lb(1),b.Ac("ngIf",n.bgLogoUrl),b.Lb(1),b.bd("color",n.spinnerColor)("width",n.spinnerSize,"px")("height",n.spinnerSize,"px")("top",n.spinnerTop),b.Ac("ngClass",n.spinnerPosition),b.Lb(1),b.Ob(n.spinnerClass),b.Lb(1),b.Ac("ngForOf",n.spinnerDivs)}}var bc,mc,hc,vc,_c,kc=function(e){return e.xWanderingCubes="x-wandering-cubes",e.xBallSpin="x-ball-spin",e.xChasingDots="x-chasing-dots",e.xElapsis="x-elapsis",e.circleSpinner="circle-spinner",e.threeStrings="three-strings",e.wanderingCubes="wandering-cubes",e}({}),yc=function(e){return e.bottomCenter="bottom-center",e.bottomLeft="bottom-left",e.bottomRight="bottom-right",e.centerCenter="center-center",e.centerLeft="center-left",e.centerRight="center-right",e.topCenter="top-center",e.topLeft="top-left",e.topRight="top-right",e}({}),Cc=new b.u("ngxLoadingXConfig.config"),xc={show:!1,bgBlur:5,bgColor:"rgba(40, 40, 40, 0.5)",bgOpacity:5,bgLogoUrl:"",bgLogoUrlPosition:yc.bottomRight,bgLogoUrlSize:100,spinnerType:kc.wanderingCubes,spinnerSize:120,spinnerColor:"#dd1b16",spinnerPosition:yc.centerCenter},wc={"x-wandering-cubes":{divs:2,class:"x-wandering-cubes"},"x-ball-spin":{divs:8,class:"x-ball-spin"},"x-chasing-dots":{divs:2,class:"x-chasing-dots"},"x-elapsis":{divs:12,class:"x-elapsis"},"circle-spinner":{divs:12,class:"circle-spinner"},"three-strings":{divs:3,class:"sk-three-strings"},"wandering-cubes":{divs:2,class:"sk-wandering-cubes"}},Oc=((hc=function(){function e(t){_classCallCheck(this,e),this.config=t,this.defaultConfig=Object.assign({},xc),this.config&&(this.defaultConfig=Object.assign(Object.assign({},xc),this.config))}return _createClass(e,[{key:"getDefaultConfig",value:function(){return Object.assign({},this.defaultConfig)}}]),e}()).\u0275fac=function(e){return new(e||hc)(b.kc(Cc,8))},hc.\u0275prov=Object(b.Wb)({factory:function(){return new hc(Object(b.kc)(Cc,8))},token:hc,providedIn:"root"}),hc),Pc=((mc=function(){function e(t,n,o){_classCallCheck(this,e),this.renderer=t,this.elementRef=n,this.ngxLoadingXService=o,this.defaultConfig=this.ngxLoadingXService.getDefaultConfig(),this.blur=this.defaultConfig.bgBlur,this.show=this.defaultConfig.show}return _createClass(e,[{key:"ngOnChanges",value:function(){if(this.show){var e="blur(".concat(this.blur,"px)");this.renderer.setStyle(this.elementRef.nativeElement,"-webkit-filter",e),this.renderer.setStyle(this.elementRef.nativeElement,"filter",e)}else this.renderer.setStyle(this.elementRef.nativeElement,"-webkit-filter","none"),this.renderer.setStyle(this.elementRef.nativeElement,"filter","none")}}]),e}()).\u0275fac=function(e){return new(e||mc)(b.ac(b.M),b.ac(b.o),b.ac(Oc))},mc.\u0275dir=b.Vb({type:mc,selectors:[["","NgxLoadingXBlur",""]],inputs:{blur:"blur",show:"show"},features:[b.Jb]}),mc),Mc=((bc=function(){function e(t,n){_classCallCheck(this,e),this.domSanitizer=t,this.ngxLoadingXService=n,this.defaultConfig=this.ngxLoadingXService.getDefaultConfig(),this.show=this.defaultConfig.show,this.bgBlur=this.defaultConfig.bgBlur,this.bgColor=this.defaultConfig.bgColor,this.bgOpacity=this.defaultConfig.bgOpacity,this.bgLogoUrl=this.defaultConfig.bgLogoUrl,this.bgLogoUrlPosition=this.defaultConfig.bgLogoUrlPosition,this.bgLogoUrlSize=this.defaultConfig.bgLogoUrlSize,this.spinnerType=this.defaultConfig.spinnerType,this.spinnerSize=this.defaultConfig.spinnerSize,this.spinnerColor=this.defaultConfig.spinnerColor,this.spinnerPosition=this.defaultConfig.spinnerPosition}return _createClass(e,[{key:"initializeSpinners",value:function(){this.spinnerDivs=Array(wc[this.spinnerType].divs).fill(1),this.spinnerClass=wc[this.spinnerType].class}},{key:"determineCenterPositions",value:function(){this.bgLogoUrlPosition===yc.centerCenter&&this.spinnerPosition===yc.centerCenter&&(this.spinnerTop=this.domSanitizer.bypassSecurityTrustStyle("calc(50% + 88px)"),this.logoTop=this.domSanitizer.bypassSecurityTrustStyle("calc(50% - 88px)"))}},{key:"ngOnInit",value:function(){this.trustedLogoUrl=this.domSanitizer.bypassSecurityTrustResourceUrl(this.bgLogoUrl),this.initializeSpinners(),this.determineCenterPositions()}}]),e}()).\u0275fac=function(e){return new(e||bc)(b.ac(dc.b),b.ac(Oc))},bc.\u0275cmp=b.Ub({type:bc,selectors:[["ngx-loading-x"]],inputs:{show:"show",bgBlur:"bgBlur",bgColor:"bgColor",bgOpacity:"bgOpacity",bgLogoUrl:"bgLogoUrl",bgLogoUrlPosition:"bgLogoUrlPosition",bgLogoUrlSize:"bgLogoUrlSize",spinnerType:"spinnerType",spinnerSize:"spinnerSize",spinnerColor:"spinnerColor",spinnerPosition:"spinnerPosition"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"ngx-overlay"],["class","ngx-loading-x-logo",3,"ngClass","src","width","height","top",4,"ngIf"],[1,"ngx-foreground-spinner",3,"ngClass"],[4,"ngFor","ngForOf"],[1,"ngx-loading-x-logo",3,"ngClass","src"]],template:function(e,t){1&e&&b.cd(0,pc,6,17,"div",0),2&e&&b.Ac("ngIf",t.show)},directives:[i.t,i.q,i.s],styles:['.ngx-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;z-index:99998!important;cursor:progress;transition:5s ease-out}.ngx-overlay[_ngcontent-%COMP%] > .ngx-foreground-spinner[_ngcontent-%COMP%], .ngx-overlay[_ngcontent-%COMP%] > .ngx-loading-x-logo[_ngcontent-%COMP%]{position:fixed;margin:0}.ngx-background-spinner[_ngcontent-%COMP%]{position:fixed;z-index:99997!important;margin:0;opacity:.6}.ngx-position-absolute[_ngcontent-%COMP%], .ngx-position-absolute[_ngcontent-%COMP%] > .ngx-foreground-spinner[_ngcontent-%COMP%], .ngx-position-absolute[_ngcontent-%COMP%] > .ngx-loading-x-logo[_ngcontent-%COMP%]{position:absolute!important}.ngx-position-absolute.ngx-overlay[_ngcontent-%COMP%]{z-index:99995!important}.ngx-position-absolute.ngx-background-spinner[_ngcontent-%COMP%]{z-index:99994!important}.top-left[_ngcontent-%COMP%]{top:30px;left:30px}.top-center[_ngcontent-%COMP%]{top:30px;left:50%;transform:translateX(-50%)}.top-right[_ngcontent-%COMP%]{top:30px;right:30px}.center-left[_ngcontent-%COMP%]{top:50%;left:30px;transform:translateY(-50%)}.center-center[_ngcontent-%COMP%]{top:50%;left:50%;transform:translate(-50%,-50%)}.center-right[_ngcontent-%COMP%]{top:50%;right:30px;transform:translateY(-50%)}.bottom-left[_ngcontent-%COMP%]{bottom:30px;left:30px}.bottom-center[_ngcontent-%COMP%]{bottom:30px;left:50%;transform:translateX(-50%)}.bottom-right[_ngcontent-%COMP%]{bottom:30px;right:30px}.x-ball-spin[_ngcontent-%COMP%], .x-ball-spin[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;box-sizing:border-box}.x-ball-spin[_ngcontent-%COMP%]{width:100%;height:100%;font-size:0}.x-ball-spin[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-block;float:none;background-color:currentColor;border:0 solid currentColor;position:absolute;top:50%;left:50%;width:25%;height:25%;margin-top:-12.5%;margin-left:-12.5%;border-radius:100%;-webkit-animation:1s ease-in-out infinite ball-spin;animation:1s ease-in-out infinite ball-spin}.x-ball-spin[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(1){top:5%;left:50%;-webkit-animation-delay:-1.125s;animation-delay:-1.125s}.x-ball-spin[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){top:18.1801948466%;left:81.8198051534%;-webkit-animation-delay:-1.25s;animation-delay:-1.25s}.x-ball-spin[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3){top:50%;left:95%;-webkit-animation-delay:-1.375s;animation-delay:-1.375s}.x-ball-spin[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(4){top:81.8198051534%;left:81.8198051534%;-webkit-animation-delay:-1.5s;animation-delay:-1.5s}.x-ball-spin[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(5){top:94.9999999966%;left:50.0000000005%;-webkit-animation-delay:-1.625s;animation-delay:-1.625s}.x-ball-spin[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(6){top:81.8198046966%;left:18.1801949248%;-webkit-animation-delay:-1.75s;animation-delay:-1.75s}.x-ball-spin[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(7){top:49.9999750815%;left:5.0000051215%;-webkit-animation-delay:-1.875s;animation-delay:-1.875s}.x-ball-spin[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(8){top:18.179464974%;left:18.1803700518%;-webkit-animation-delay:-2s;animation-delay:-2s}@-webkit-keyframes ball-spin{0%,100%{opacity:1;transform:scale(1)}20%{opacity:1}80%{opacity:0;transform:scale(0)}}@keyframes ball-spin{0%,100%{opacity:1;transform:scale(1)}20%{opacity:1}80%{opacity:0;transform:scale(0)}}.x-chasing-dots[_ngcontent-%COMP%]{margin:auto;width:100%;height:100%;position:absolute;text-align:center;-webkit-animation:2s linear infinite x-chasingDots-rotate;animation:2s linear infinite x-chasingDots-rotate}.x-chasing-dots[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:60%;height:60%;display:inline-block;position:absolute;top:0;background-color:currentColor;border-radius:100%;-webkit-animation:2s ease-in-out infinite x-chasingDots-bounce;animation:2s ease-in-out infinite x-chasingDots-bounce}.x-chasing-dots[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){top:auto;bottom:0;-webkit-animation-delay:-1s;animation-delay:-1s}@-webkit-keyframes x-chasingDots-rotate{100%{transform:rotate(360deg)}}@keyframes x-chasingDots-rotate{100%{transform:rotate(360deg)}}@-webkit-keyframes x-chasingDots-bounce{0%,100%{transform:scale(0)}50%{transform:scale(1)}}@keyframes x-chasingDots-bounce{0%,100%{transform:scale(0)}50%{transform:scale(1)}}.x-elapsis[_ngcontent-%COMP%]{display:inline-block;position:relative;width:80px;height:80px}.x-elapsis[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;top:33px;width:13px;height:13px;border-radius:50%;background:currentColor;-webkit-animation-timing-function:cubic-bezier(0,1,1,0);animation-timing-function:cubic-bezier(0,1,1,0)}.x-elapsis[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){left:8px;-webkit-animation:.6s infinite lds-ellipsis1;animation:.6s infinite lds-ellipsis1}.x-elapsis[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){left:8px;-webkit-animation:.6s infinite lds-ellipsis2;animation:.6s infinite lds-ellipsis2}.x-elapsis[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){left:32px;-webkit-animation:.6s infinite lds-ellipsis2;animation:.6s infinite lds-ellipsis2}.x-elapsis[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(4){left:56px;-webkit-animation:.6s infinite lds-ellipsis3;animation:.6s infinite lds-ellipsis3}@-webkit-keyframes lds-ellipsis1{0%{transform:scale(0)}100%{transform:scale(1)}}@keyframes lds-ellipsis1{0%{transform:scale(0)}100%{transform:scale(1)}}@-webkit-keyframes lds-ellipsis3{0%{transform:scale(1)}100%{transform:scale(0)}}@keyframes lds-ellipsis3{0%{transform:scale(1)}100%{transform:scale(0)}}@-webkit-keyframes lds-ellipsis2{0%{transform:translate(0,0)}100%{transform:translate(24px,0)}}@keyframes lds-ellipsis2{0%{transform:translate(0,0)}100%{transform:translate(24px,0)}}.circle-spinner[_ngcontent-%COMP%]{color:official;display:inline-block;position:relative;width:80px;height:80px}.circle-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{transform-origin:40px 40px;-webkit-animation:1.2s linear infinite circle-spinner;animation:1.2s linear infinite circle-spinner}.circle-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:after{content:" ";display:block;position:absolute;top:3px;left:37px;width:6px;height:18px;border-radius:20%;background:currentColor}.circle-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){transform:rotate(0);-webkit-animation-delay:-1.1s;animation-delay:-1.1s}.circle-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){transform:rotate(30deg);-webkit-animation-delay:-1s;animation-delay:-1s}.circle-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){transform:rotate(60deg);-webkit-animation-delay:-.9s;animation-delay:-.9s}.circle-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(4){transform:rotate(90deg);-webkit-animation-delay:-.8s;animation-delay:-.8s}.circle-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(5){transform:rotate(120deg);-webkit-animation-delay:-.7s;animation-delay:-.7s}.circle-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(6){transform:rotate(150deg);-webkit-animation-delay:-.6s;animation-delay:-.6s}.circle-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(7){transform:rotate(180deg);-webkit-animation-delay:-.5s;animation-delay:-.5s}.circle-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(8){transform:rotate(210deg);-webkit-animation-delay:-.4s;animation-delay:-.4s}.circle-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(9){transform:rotate(240deg);-webkit-animation-delay:-.3s;animation-delay:-.3s}.circle-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(10){transform:rotate(270deg);-webkit-animation-delay:-.2s;animation-delay:-.2s}.circle-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(11){transform:rotate(300deg);-webkit-animation-delay:-.1s;animation-delay:-.1s}.circle-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(12){transform:rotate(330deg);-webkit-animation-delay:0s;animation-delay:0s}@-webkit-keyframes circle-spinner{0%{opacity:1}100%{opacity:0}}@keyframes circle-spinner{0%{opacity:1}100%{opacity:0}}.sk-three-strings[_ngcontent-%COMP%]{width:100%;height:100%}.sk-three-strings[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:absolute;box-sizing:border-box;width:100%;height:100%;border-radius:50%}.sk-three-strings[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(1){left:0;top:0;-webkit-animation:1s linear infinite sk-threeStrings-rotateOne;animation:1s linear infinite sk-threeStrings-rotateOne;border-bottom:3px solid currentColor}.sk-three-strings[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){right:0;top:0;-webkit-animation:1s linear infinite sk-threeStrings-rotateTwo;animation:1s linear infinite sk-threeStrings-rotateTwo;border-right:3px solid currentColor}.sk-three-strings[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3){right:0;bottom:0;-webkit-animation:1s linear infinite sk-threeStrings-rotateThree;animation:1s linear infinite sk-threeStrings-rotateThree;border-top:3px solid currentColor}@-webkit-keyframes sk-threeStrings-rotateOne{0%{transform:rotateX(35deg) rotateY(-45deg) rotateZ(0)}100%{transform:rotateX(35deg) rotateY(-45deg) rotateZ(360deg)}}@keyframes sk-threeStrings-rotateOne{0%{transform:rotateX(35deg) rotateY(-45deg) rotateZ(0)}100%{transform:rotateX(35deg) rotateY(-45deg) rotateZ(360deg)}}@-webkit-keyframes sk-threeStrings-rotateTwo{0%{transform:rotateX(50deg) rotateY(10deg) rotateZ(0)}100%{transform:rotateX(50deg) rotateY(10deg) rotateZ(360deg)}}@keyframes sk-threeStrings-rotateTwo{0%{transform:rotateX(50deg) rotateY(10deg) rotateZ(0)}100%{transform:rotateX(50deg) rotateY(10deg) rotateZ(360deg)}}@-webkit-keyframes sk-threeStrings-rotateThree{0%{transform:rotateX(35deg) rotateY(55deg) rotateZ(0)}100%{transform:rotateX(35deg) rotateY(55deg) rotateZ(360deg)}}@keyframes sk-threeStrings-rotateThree{0%{transform:rotateX(35deg) rotateY(55deg) rotateZ(0)}100%{transform:rotateX(35deg) rotateY(55deg) rotateZ(360deg)}}.sk-wandering-cubes[_ngcontent-%COMP%]{margin:auto;width:100%;height:100%;position:relative;text-align:center}.sk-wandering-cubes[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{background-color:currentColor;width:25%;height:25%;position:absolute;top:0;left:0;-webkit-animation:1.8s ease-in-out infinite sk-wanderingCubes-cubeMove;animation:1.8s ease-in-out infinite sk-wanderingCubes-cubeMove}.sk-wandering-cubes[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){-webkit-animation-delay:-.9s;animation-delay:-.9s}@-webkit-keyframes sk-wanderingCubes-cubeMove{25%{transform:translateX(290%) rotate(-90deg) scale(.5)}50%{transform:translateX(290%) translateY(290%) rotate(-179deg)}50.1%{transform:translateX(290%) translateY(290%) rotate(-180deg)}75%{transform:translateX(0) translateY(290%) rotate(-270deg) scale(.5)}100%{transform:rotate(-360deg)}}@keyframes sk-wanderingCubes-cubeMove{25%{transform:translateX(290%) rotate(-90deg) scale(.5)}50%{transform:translateX(290%) translateY(290%) rotate(-179deg)}50.1%{transform:translateX(290%) translateY(290%) rotate(-180deg)}75%{transform:translateX(0) translateY(290%) rotate(-270deg) scale(.5)}100%{transform:rotate(-360deg)}}.x-wandering-cubes[_ngcontent-%COMP%]{margin:auto;width:100%;height:100%;position:relative;transform:rotateZ(45deg)}.x-wandering-cubes[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{float:left;width:50%;height:50%;position:relative;transform:scale(1.1)}.x-wandering-cubes[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]::before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background-color:currentColor;-webkit-animation:2.4s linear infinite both sk-foldingCube-angle;animation:2.4s linear infinite both sk-foldingCube-angle;transform-origin:100% 100%}.x-wandering-cubes[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){transform:scale(1.1) rotateZ(90deg)}.x-wandering-cubes[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3){transform:scale(1.1) rotateZ(270deg)}.x-wandering-cubes[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(4){transform:scale(1.1) rotateZ(180deg)}.x-wandering-cubes[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2)::before{-webkit-animation-delay:.3s;animation-delay:.3s}.x-wandering-cubes[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3)::before{-webkit-animation-delay:.9s;animation-delay:.9s}.x-wandering-cubes[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(4)::before{-webkit-animation-delay:.6s;animation-delay:.6s}@-webkit-keyframes sk-foldingCube-angle{0%,10%{transform:perspective(140px) rotateX(-180deg);opacity:0}25%,75%{transform:perspective(140px) rotateX(0);opacity:1}100%,90%{transform:perspective(140px) rotateY(180deg);opacity:0}}@keyframes sk-foldingCube-angle{0%,10%{transform:perspective(140px) rotateX(-180deg);opacity:0}25%,75%{transform:perspective(140px) rotateX(0);opacity:1}100%,90%{transform:perspective(140px) rotateY(180deg);opacity:0}}'],changeDetection:0}),bc),Sc=((_c=vc=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"forRoot",value:function(e){return{ngModule:vc,providers:[{provide:Cc,useValue:e}]}}}]),e}()).\u0275mod=b.Yb({type:_c}),_c.\u0275inj=b.Xb({factory:function(e){return new(e||_c)},imports:[[i.c]]}),_c),Lc=n("bSwM"),Ac=["valuesUsersSelect"],Ic=["theLastReferenceUsers"];function Tc(e,t){if(1&e&&(b.gc(0,"ng-option",27),b.ed(1),b.fc()),2&e){var n=t.$implicit;b.Ac("value",n.uuid),b.Lb(1),b.fd(n.name)}}function Rc(e,t){if(1&e){var n=b.hc();b.gc(0,"div",1),b.gc(1,"div",7),b.gc(2,"p",8),b.gc(3,"ion-label"),b.ed(4),b.tc(5,"translate"),b.fc(),b.fc(),b.gc(6,"ng-select",25),b.oc("ngModelChange",(function(e){return b.Sc(n),b.sc().courseSelect=e}))("change",(function(){return b.Sc(n),b.sc().loadAllUsers(!0,"course")})),b.cd(7,Tc,2,2,"ng-option",26),b.fc(),b.fc(),b.fc()}if(2&e){var o=b.sc();b.Lb(4),b.fd(b.uc(5,3,"pages.course.name_course")),b.Lb(2),b.Ac("ngModel",o.courseSelect),b.Lb(1),b.Ac("ngForOf",o.courses)}}function zc(e,t){if(1&e&&(b.gc(0,"ng-option",27),b.ed(1),b.fc()),2&e){var n=t.$implicit;b.Ac("value",n.uuid),b.Lb(1),b.fd(n.description)}}function Ec(e,t){if(1&e){var n=b.hc();b.gc(0,"div",1),b.gc(1,"div",7),b.gc(2,"p",8),b.gc(3,"ion-label"),b.ed(4),b.tc(5,"translate"),b.fc(),b.fc(),b.gc(6,"ng-select",28),b.oc("ngModelChange",(function(e){return b.Sc(n),b.sc().rolesSelected=e}))("change",(function(){return b.Sc(n),b.sc().loadAllUsers(!0,"roles")})),b.cd(7,zc,2,2,"ng-option",26),b.fc(),b.fc(),b.fc()}if(2&e){var o=b.sc();b.Lb(4),b.fd(b.uc(5,3,"pages.messenger.type_users")),b.Lb(2),b.Ac("ngModel",o.rolesSelected),b.Lb(1),b.Ac("ngForOf",o.roles)}}function Fc(e,t){if(1&e){var n=b.hc();b.gc(0,"div"),b.gc(1,"mat-checkbox",29),b.oc("ngModelChange",(function(e){return b.Sc(n),b.sc().all_integrants=e})),b.gc(2,"span",30),b.ed(3),b.tc(4,"translate"),b.fc(),b.fc(),b.fc()}if(2&e){var o=b.sc();b.Lb(1),b.Ac("ngModel",o.all_integrants),b.Lb(2),b.fd(b.uc(4,2,"pages.messenger.all_integrants"))}}function jc(e,t){if(1&e){var n=b.hc();b.gc(0,"button",36),b.oc("click",(function(){return b.Sc(n),b.sc(2).selectAll("users")})),b.ed(1),b.tc(2,"translate"),b.fc(),b.gc(3,"button",36),b.oc("click",(function(){return b.Sc(n),b.sc(2).unselectAll("users")})),b.ed(4),b.tc(5,"translate"),b.fc()}2&e&&(b.Lb(1),b.fd(b.uc(2,2,"buttons.select_all")),b.Lb(3),b.fd(b.uc(5,4,"buttons.disselect_all")))}function Bc(e,t){if(1&e&&(b.gc(0,"p",37),b.ed(1),b.fc()),2&e){var n=t.item;b.Lb(1),b.gd(" ",n.rol_name||"----"," ")}}function Dc(e,t){1&e&&b.bc(0,"span",null,38)}function Uc(e,t){if(1&e&&(b.ed(0),b.cd(1,Dc,2,0,"span",10)),2&e){var n=t.item,o=t.index,i=b.sc(2);b.gd("",n.name," "),b.Lb(1),b.Ac("ngIf",o==i.users.length-1)}}function $c(e,t){if(1&e){var n=b.hc();b.gc(0,"ng-select",31,32),b.oc("ngModelChange",(function(e){return b.Sc(n),b.sc().users_select=e}))("search",(function(){b.Sc(n);var e=b.sc();return e.loadAllUsers(!0,e.modeFilterUsers)})),b.tc(2,"translate"),b.cd(3,jc,6,6,"ng-template",33),b.cd(4,Bc,2,1,"ng-template",34),b.cd(5,Uc,2,2,"ng-template",35),b.fc()}if(2&e){var o=b.sc();b.Ac("items",o.users)("ngModel",o.users_select)("placeholder",b.uc(2,5,"pages.course.select_dest"))("closeOnSelect",!1)("loading",o.usersLoading)}}function Nc(e,t){1&e&&b.bc(0,"mat-progress-bar",48)}function qc(e,t){if(1&e&&b.bc(0,"img",49),2&e){var n=b.sc().$implicit;b.Bc("src",n.picture||n.file_url,b.Vc)}}function Hc(e,t){1&e&&b.bc(0,"img",50)}function Vc(e,t){if(1&e){var n=b.hc();b.gc(0,"div",51),b.oc("click",(function(){b.Sc(n);var e=b.sc().index;return b.sc(2).removeImage(e)})),b.bc(1,"ion-icon",52),b.fc()}}function Yc(e,t){if(1&e&&(b.gc(0,"div",43),b.cd(1,Nc,1,0,"mat-progress-bar",44),b.cd(2,qc,1,1,"img",45),b.cd(3,Hc,1,0,"img",46),b.cd(4,Vc,2,0,"div",47),b.fc()),2&e){var n=t.$implicit,o=b.sc(2);b.Ac("matTooltip",n.name),b.Lb(1),b.Ac("ngIf",n.uploading),b.Lb(1),b.Ac("ngIf",n.is_image),b.Lb(1),b.Ac("ngIf",!n.is_image),b.Lb(1),b.Ac("ngIf",!o.is_send_message_parent)}}function Xc(e,t){if(1&e&&(b.gc(0,"div",39),b.gc(1,"h3",40),b.ed(2),b.tc(3,"translate"),b.fc(),b.gc(4,"div",41),b.cd(5,Yc,5,5,"div",42),b.fc(),b.fc()),2&e){var n=b.sc();b.Lb(2),b.fd(b.uc(3,2,"pages.course.upload_image")),b.Lb(3),b.Ac("ngForOf",n.images)}}function Qc(e,t){if(1&e){var n=b.hc();b.gc(0,"div"),b.gc(1,"mat-checkbox",53),b.oc("ngModelChange",(function(e){return b.Sc(n),b.sc().notify_message=e})),b.gc(2,"span",30),b.ed(3),b.tc(4,"translate"),b.fc(),b.fc(),b.fc()}if(2&e){var o=b.sc();b.Lb(1),b.Ac("ngModel",o.notify_message),b.Lb(2),b.fd(b.uc(4,2,"pages.messenger.notify_message"))}}function Gc(e,t){if(1&e){var n=b.hc();b.gc(0,"section"),b.gc(1,"mat-checkbox",13),b.oc("ngModelChange",(function(e){return b.Sc(n),b.sc().allow_answer=e})),b.ed(2),b.tc(3,"translate"),b.fc(),b.fc()}if(2&e){var o=b.sc();b.Lb(1),b.Ac("ngModel",o.allow_answer),b.Lb(1),b.fd(b.uc(3,2,"pages.course.allow_answer"))}}function Wc(e,t){if(1&e&&(b.gc(0,"div",54),b.gc(1,"div",55),b.gc(2,"p",8),b.ed(3),b.tc(4,"translate"),b.fc(),b.bc(5,"progress",56),b.gc(6,"p",8),b.ed(7),b.fc(),b.fc(),b.fc()),2&e){var n=b.sc();b.Lb(3),b.fd(b.uc(4,5,"pages.course.upload_files")),b.Lb(2),b.Ac("value",n.file_upload_cant)("max",n.images.length),b.Lb(2),b.hd("",n.file_upload_cant," de ",n.images.length,"")}}var Kc,Zc=((Kc=function(){function e(t,n,o,i,c,r,a,s,u){_classCallCheck(this,e),this.authService=t,this.courseService=n,this.redireccionService=o,this.controlErroresService=i,this.toastService=c,this.messageService=r,this.config=a,this.publicService=s,this.profileService=u,this.max_size_file=l.g,this.usersLoading=!1,this.permissions={},this.rolesSelected=[],this.file_upload_cant=0,this.allow_answer=1,this.is_send_message=!1,this.is_send_message_parent=!1,this.users=[],this.mostrarTodasImagenes=!1,this.cols_img=5,this.userList=[],this.notify_message=!1,this.roles=[],this.parallel_select=[],this.modeFilterUsers="course",this.message="",this.users_select=[],this.images=[],this.subject="",this.institution=0,this.pageUser=1,this.allPagesUser=1,this.courses=[],this.courseSelect=null,this.all_integrants=!1,this.messages=[],this.fieldEmitChange=new b.r,this.totalPagesUsers=1,this.this_page_users=1,this.config.notFoundText="Datos No encontrados",this.config.appendTo="body",this.echo=this.authService.echoPush()}return _createClass(e,[{key:"ngOnInit",value:function(){this.getModeMessenger()}},{key:"getModeMessenger",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.authService.getMyModeSendMessage().subscribe((function(t){e.permissions=t.data,e.permissions.access_mssg_roles&&(e.modeFilterUsers="roles",e.getRoles()),e.permissions.access_mssg_courses&&(e.modeFilterUsers="course",e.getCourses())}),(function(n){t<4&&e.getModeMessenger(t+1)}))}},{key:"ngAfterViewInit",value:function(){var e=this;setTimeout((function(){e.intersectionObserver(),e.theLastReferenceUsers.changes.subscribe((function(t){t.last&&e.observer.observe(t.last.nativeElement)}))}))}},{key:"intersectionObserver",value:function(){var e=this;this.observer=new IntersectionObserver((function(t){t[0].isIntersecting&&e.totalPagesUsers>=e.this_page_users&&e.loadAllUsers(!1,e.modeFilterUsers)}),{root:null,rootMargin:"0px",threshold:.5})}},{key:"getRoles",value:function(){var e=this;this.publicService.getRoles().subscribe((function(t){e.roles=t.data}),(function(e){}))}},{key:"sendMessage",value:function(){var e=this;if(this.message)if(this.subject){var t={to:this.users_select,message:this.message,subject:this.subject,data_modes_send:{courses:this.courseSelect?[this.courseSelect]:[],roles:this.rolesSelected},institution_id:this.institution,allow_answer:this.allow_answer,all_integrants:this.all_integrants?"yes":"no",mode_send:this.modeFilterUsers,notify_message:this.notify_message?"yes":"no"};this.is_send_message_parent=!0,this.messageService.send(t,this.echo?this.echo.socketId():"0").subscribe((function(t){e.message="",0==e.images.length?(e.is_send_message_parent=!1,e.is_send_message=!0,e.fieldEmitChange.emit(t.data),e.toastService.success(t.message)):e.uploadFile(t,t.uuid)}),(function(t){console.log(t),e.controlErroresService.control(t),e.is_send_message_parent=!1}))}else this.toastService.warning("Escriba el t\xedtulo mensaje");else this.toastService.warning("Escriba el mensaje")}},{key:"uploadImageLocal",value:function(e){var t=this;if(e.target.files&&e.target.files[0]){var n,o=_createForOfIteratorHelper(e.target.files);try{var i=function(){var o=n.value;if(o.size>l.g)return t.toastService.warning(o.name,"El archivo excede el peso establecido de "+l.g/1e6+"mb"),"continue";c=new FileReader;var i={file_url:"",file:o,type:o.type,size:o.size,name:o.name,is_image:e.target.files[0].type.indexOf("image")>=0,content_type:e.target.files[0].type||"unknown"};c.onload=function(e){i.file_url=e.target.result},t.images.push(i),c.readAsDataURL(o)};for(o.s();!(n=o.n()).done;){var c;i()}}catch(r){o.e(r)}finally{o.f()}document.querySelector(".file-mm-input").value=""}}},{key:"getCourses",value:function(){var e=this;this.courseService.courses().subscribe((function(t){e.courses=t.data}),(function(t){e.controlErroresService.control(t)}))}},{key:"loadUsers",value:function(){this.pageUser=1,this.users=[],this.loadAllUsers()}},{key:"loadAllUsers",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"course";t&&(this.this_page_users=1,this.users=[]),this.usersLoading=!0,this.modeFilterUsers=n,"course"==n?this.courseService.getStudents(this.courseSelect,this.valuesUsersSelect.searchInput.nativeElement.value).subscribe((function(t){e.users=t.data.map((function(e){return e.rol_name="Estudiantes",e})),e.users=e.users.concat(t.principals.map((function(e){return e.rol_name="Profesor",e}))),e.usersLoading=!1}),(function(t){e.usersLoading=!1,e.controlErroresService.control(t)})):"roles"==n&&this.profileService.getUsersByRole({roles:this.rolesSelected,q:this.valuesUsersSelect.searchInput.nativeElement.value,page:this.this_page_users}).subscribe((function(t){e.usersLoading=!1,e.users=e.users.concat(t.items),e.users=e.deleteRepeatItem(e.users,"id"),e.totalPagesUsers=t.last_page,e.this_page_users++}),(function(t){e.usersLoading=!1}))}},{key:"deleteRepeatItem",value:function(e,t){var n=e.map((function(e){return[e[t],e]}));return _toConsumableArray(new Map(n).values())}},{key:"selectAll",value:function(e){switch(e){case"users":this.users_select=this.users.map((function(e){return e.uuid}))}}},{key:"unselectAll",value:function(e){switch(e){case"users":this.users_select=[]}}},{key:"uploadFile",value:function(e,t){var n,o=this,i=_createForOfIteratorHelper(this.images);try{var c=function(){var i=n.value;i.file_url=null,o.messageService.uploadFile(Object(l.c)(i),t).subscribe((function(t){i.uploading=!1,o.file_upload_cant++,o.checkUploadPost(e)}),(function(t){o.file_upload_cant++,o.checkUploadPost(e),o.controlErroresService.control(t)}))};for(i.s();!(n=i.n()).done;)c()}catch(r){i.e(r)}finally{i.f()}}},{key:"checkUploadPost",value:function(e){this.file_upload_cant>=this.images.length&&(this.is_send_message_parent=!1,this.is_send_message=!0,this.toastService.success(e.message),this.fieldEmitChange.emit(e.data))}},{key:"removeImage",value:function(e){e<0||this.images.splice(e,1)}},{key:"triggerButtonFileOpen",value:function(){$("#button-file-message-upload").click()}}]),e}()).\u0275fac=function(e){return new(e||Kc)(b.ac(Ni.a),b.ac(Ho.a),b.ac(f.a),b.ac(u.a),b.ac(Tn.b),b.ac(Hi),b.ac(Re.b),b.ac(Oe.a),b.ac(we.a))},Kc.\u0275cmp=b.Ub({type:Kc,selectors:[["new-message"]],viewQuery:function(e,t){var n;1&e&&(b.ld(Ac,!0),b.ld(Ic,!0,b.o)),2&e&&(b.Nc(n=b.pc())&&(t.valuesUsersSelect=n.first),b.Nc(n=b.pc())&&(t.theLastReferenceUsers=n))},outputs:{fieldEmitChange:"fieldEmitChange"},decls:35,vars:19,consts:[[1,"card"],[1,"card-body"],[1,"pb-2"],[1,"card-header"],[1,"text-center","bold"],["class"," card-body",4,"ngIf"],[1,"card","p-3"],[1,"col-12","flex","flex-center","flex-y"],[1,"text-center"],["for",""],[4,"ngIf"],["bindValue","uuid","groupBy","rol_name","bindLabel","name","multiple","true",3,"items","ngModel","placeholder","closeOnSelect","loading","ngModelChange","search",4,"ngIf"],["type","text","placeholder","Asunto",1,"form-control",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],["class","border-2 border-dashed dark:border-dark-5 rounded-md pt-4","style","margin-top: 10px;",4,"ngIf"],[1,"card-footer"],[1,"form-group"],[1,"input-group-append"],["type","submit","color","success","size","small",1,"mr-2",3,"disabled","click"],["name","send-outline"],["size","small",3,"disabled","click"],["name","cloud-upload-outline"],["id","button-file-message-upload","type","file","multiple","",1,"hidden","file-mm-input",3,"change"],[3,"show"],["class","bck_fileUpload",4,"ngIf"],[3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["multiple","true",3,"ngModel","ngModelChange","change"],["color","primary","name","all_integrants",3,"ngModel","ngModelChange"],[1,"ml-2"],["bindValue","uuid","groupBy","rol_name","bindLabel","name","multiple","true",3,"items","ngModel","placeholder","closeOnSelect","loading","ngModelChange","search"],["valuesUsersSelect",""],["ng-header-tmp",""],["ng-optgroup-tmp",""],["ng-option-tmp",""],[1,"btn","btn-sm","btn-secondary",3,"click"],[2,"padding","5px","background-color","rgba(0, 116, 224, 0.712)","color","#fff"],["theLastReferenceUsers",""],[1,"border-2","border-dashed","dark:border-dark-5","rounded-md","pt-4",2,"margin-top","10px"],[2,"margin","0","padding-left","20px"],[1,"flex","flex-wrap","px-4"],["class","w-24 h-24 relative image-fit mb-5 mr-5 cursor-pointer zoom-in","tooltip","Call","navTooltip","",3,"matTooltip",4,"ngFor","ngForOf"],["tooltip","Call","navTooltip","",1,"w-24","h-24","relative","image-fit","mb-5","mr-5","cursor-pointer","zoom-in",3,"matTooltip"],["mode","indeterminate",4,"ngIf"],["class","rounded-md","alt","Imagen",3,"src",4,"ngIf"],["class","rounded-md","alt","File","src","/assets/img/document-file-icon.png",4,"ngIf"],["title","Remove this image?","class"," w-5 h-5 flex items-center justify-center absolute rounded-full text-white bg-theme-6 right-0 top-0 -mr-2 -mt-2",3,"click",4,"ngIf"],["mode","indeterminate"],["alt","Imagen",1,"rounded-md",3,"src"],["alt","File","src","/assets/img/document-file-icon.png",1,"rounded-md"],["title","Remove this image?",1,"w-5","h-5","flex","items-center","justify-center","absolute","rounded-full","text-white","bg-theme-6","right-0","top-0","-mr-2","-mt-2",3,"click"],["name","trash-outline"],["color","primary","name","notify_message",3,"ngModel","ngModelChange"],[1,"bck_fileUpload"],[1,"fileUpload"],[3,"value","max"]],template:function(e,t){1&e&&(b.gc(0,"div",0),b.gc(1,"div",1),b.gc(2,"div",0),b.gc(3,"div",2),b.gc(4,"div",3),b.gc(5,"h3",4),b.ed(6),b.tc(7,"translate"),b.fc(),b.fc(),b.cd(8,Rc,8,5,"div",5),b.cd(9,Ec,8,5,"div",5),b.fc(),b.fc(),b.gc(10,"div",6),b.gc(11,"div",2),b.gc(12,"div",7),b.gc(13,"p",8),b.gc(14,"label",9),b.ed(15),b.tc(16,"translate"),b.fc(),b.fc(),b.cd(17,Fc,5,4,"div",10),b.cd(18,$c,6,7,"ng-select",11),b.fc(),b.fc(),b.gc(19,"input",12),b.oc("ngModelChange",(function(e){return t.subject=e})),b.fc(),b.gc(20,"ckeditor",13),b.oc("ngModelChange",(function(e){return t.message=e})),b.fc(),b.cd(21,Xc,6,4,"div",14),b.fc(),b.fc(),b.gc(22,"div",15),b.cd(23,Qc,5,4,"div",10),b.gc(24,"div",16),b.cd(25,Gc,4,4,"section",10),b.gc(26,"div",17),b.gc(27,"ion-button",18),b.oc("click",(function(){return t.sendMessage()})),b.ed(28,"Enviar | "),b.bc(29,"ion-icon",19),b.fc(),b.gc(30,"ion-button",20),b.oc("click",(function(){return t.triggerButtonFileOpen()})),b.bc(31,"ion-icon",21),b.gc(32,"input",22),b.oc("change",(function(e){return t.uploadImageLocal(e)})),b.fc(),b.fc(),b.fc(),b.fc(),b.fc(),b.fc(),b.bc(33,"ngx-loading-x",23),b.cd(34,Wc,8,7,"div",24)),2&e&&(b.Lb(6),b.fd(b.uc(7,15,"buttons.new_message")),b.Lb(2),b.Ac("ngIf",t.permissions.access_mssg_courses),b.Lb(1),b.Ac("ngIf",t.permissions.access_mssg_roles),b.Lb(6),b.fd(b.uc(16,17,"pages.course.integrants")),b.Lb(2),b.Ac("ngIf",t.permissions.access_mssg_sendmass),b.Lb(1),b.Ac("ngIf",!t.all_integrants),b.Lb(1),b.Ac("ngModel",t.subject),b.Lb(1),b.Ac("ngModel",t.message),b.Lb(1),b.Ac("ngIf",t.images.length>0),b.Lb(2),b.Ac("ngIf",t.permissions.access_mssg_notify),b.Lb(2),b.Ac("ngIf",t.permissions.response_option),b.Lb(2),b.Ac("disabled",t.is_send_message_parent),b.Lb(3),b.Ac("disabled",t.is_send_message_parent),b.Lb(3),b.Ac("show",t.is_send_message_parent),b.Lb(1),b.Ac("ngIf",t.file_upload_cant<t.images.length&&t.is_send_message))},directives:[i.t,c.c,c.r,c.u,Je.a,r.k,r.C,Mc,r.N,Re.a,i.s,Re.o,Lc.a,Re.h,Re.e,Re.d,k.a,Te.a],pipes:[m.d],styles:["input[type=file][_ngcontent-%COMP%]{display:none}.custom-image[_ngcontent-%COMP%]{cursor:pointer;position:absolute;top:10px;right:10px}.container-input-file[_ngcontent-%COMP%]{margin:2rem 0}.icon[_ngcontent-%COMP%]{background:#489eff;color:#fff;width:40px;height:40px;border-radius:50%;cursor:pointer;padding:10px}.blur-pic-letter[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{filter:blur(5px)}.blur-pic-letter[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{z-index:100}.grid-template-gallery[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr)}@media (min-width:750px){.grid-template-gallery[_ngcontent-%COMP%]{grid-template-columns:repeat(6,1fr)}}@media (min-width:900px){.grid-template-gallery[_ngcontent-%COMP%]{grid-template-columns:repeat(8,1fr)}}.centrado-absoluto[_ngcontent-%COMP%]{left:50%;top:50%;transform:translate(-50%,-50%);-webkit-transform:translate(-50%,-50%)}.absolute[_ngcontent-%COMP%]{position:absolute}.icon-size-show-pres[_ngcontent-%COMP%]{font-size:5em}.text-more-files[_ngcontent-%COMP%]{background:#fff;color:#00f;padding:10px;border-radius:5px}.btn-r-t-rw[_ngcontent-%COMP%]{position:absolute;right:5px;top:5px}.color-danger[_ngcontent-%COMP%]{color:#a80000}.color-info[_ngcontent-%COMP%]{color:#0065a8}.name-file-show[_ngcontent-%COMP%]{background:rgba(96,96,96,.5098039215686274);color:#fff;width:100%;position:absolute;bottom:0;display:none}"]}),Kc);function Jc(e,t){if(1&e&&(b.gc(0,"span",19),b.ed(1),b.fc()),2&e){var n=b.sc(2).$implicit;b.Lb(1),b.hd(" ",n.last_names," ",n.name,"")}}function er(e,t){if(1&e){var n=b.hc();b.gc(0,"strong",20),b.oc("click",(function(){b.Sc(n);var e=b.sc(3);return e.showAllUsers=!e.showAllUsers})),b.ed(1),b.fc()}if(2&e){var o=b.sc(3);b.Lb(1),b.gd(" y ",o.users.length-6," m\xe1s")}}function tr(e,t){1&e&&(b.gc(0,"span"),b.ed(1,";"),b.fc())}function nr(e,t){if(1&e&&(b.gc(0,"span"),b.cd(1,Jc,2,2,"span",17),b.cd(2,er,2,1,"strong",18),b.cd(3,tr,2,0,"span",16),b.fc()),2&e){var n=b.sc().index,o=b.sc();b.Lb(1),b.Ac("ngIf",n<5||o.showAllUsers),b.Lb(1),b.Ac("ngIf",5==n&&0==o.showAllUsers),b.Lb(1),b.Ac("ngIf",o.users.length>n+1)}}function or(e,t){if(1&e&&(b.gc(0,"span"),b.cd(1,nr,4,3,"span",16),b.fc()),2&e){var n=t.index,o=b.sc();b.Lb(1),b.Ac("ngIf",n<=5||o.showAllUsers)}}function ir(e,t){1&e&&b.bc(0,"mat-progress-bar",30)}function cr(e,t){if(1&e&&b.bc(0,"img",31),2&e){var n=b.sc().$implicit;b.Bc("src",n.picture||n.file_url,b.Vc)}}function rr(e,t){1&e&&b.bc(0,"img",32)}function ar(e,t){if(1&e){var n=b.hc();b.gc(0,"div",33),b.oc("click",(function(){b.Sc(n);var e=b.sc().index;return b.sc(2).tashImage(e)})),b.bc(1,"ion-icon",34),b.fc()}}function sr(e,t){if(1&e&&(b.gc(0,"div",25),b.cd(1,ir,1,0,"mat-progress-bar",26),b.cd(2,cr,1,1,"img",27),b.cd(3,rr,1,0,"img",28),b.cd(4,ar,2,0,"div",29),b.fc()),2&e){var n=t.$implicit,o=b.sc(2);b.Ac("matTooltip",n.name),b.Lb(1),b.Ac("ngIf",n.uploading),b.Lb(1),b.Ac("ngIf",n.is_image),b.Lb(1),b.Ac("ngIf",!n.is_image),b.Lb(1),b.Ac("ngIf",!o.is_send_message_parent)}}function lr(e,t){if(1&e&&(b.gc(0,"div",21),b.gc(1,"h3",22),b.ed(2),b.tc(3,"translate"),b.fc(),b.gc(4,"div",23),b.cd(5,sr,5,5,"div",24),b.fc(),b.fc()),2&e){var n=b.sc();b.Lb(2),b.fd(b.uc(3,2,"pages.course.upload_image")),b.Lb(3),b.Ac("ngForOf",n.images)}}function ur(e,t){if(1&e&&(b.gc(0,"div",35),b.gc(1,"div",36),b.gc(2,"p",37),b.ed(3,"Subiendo Archivos"),b.fc(),b.bc(4,"progress",38),b.gc(5,"p",37),b.ed(6),b.fc(),b.fc(),b.fc()),2&e){var n=b.sc();b.Lb(4),b.Ac("value",n.file_upload_cant)("max",n.images.length),b.Lb(2),b.hd("",n.file_upload_cant," de ",n.images.length,"")}}var dr,gr=((dr=function(){function e(t,n,o,i,c){_classCallCheck(this,e),this.messageService=t,this.controlErroresService=n,this.toastService=o,this.authService=i,this.redireccionService=c,this.images=[],this.cols_img=5,this.valueResponse=new b.r,this.users=[],this.showAllUsers=!1,this.allow_answer=0,this.message="",this.is_send_message_parent=!1,this.is_send_message=!1,this.response={mode:"one"},this.id=0,this.fieldEmitChange=new b.r,this.file_upload_cant=0,this.echo=this.authService.echoPush()}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"uploadImageLocal",value:function(e){var t=this;if(e.target.files&&e.target.files[0]){var n,o=_createForOfIteratorHelper(e.target.files);try{var i=function(){var e=n.value;if(e.size>l.g)return t.toastService.warning(e.name,"El archivo excede el peso establecido de "+l.g/1e6+"mb"),"continue";c=new FileReader;var o={file_url:"",file:e,type:e.type,size:e.size,name:e.name};c.onload=function(e){o.file_url=e.target.result},t.images.push(o),c.readAsDataURL(e)};for(o.s();!(n=o.n()).done;){var c;i()}}catch(r){o.e(r)}finally{o.f()}document.querySelector(".file-mm-input").value=""}}},{key:"tashImage",value:function(e){this.images.splice(e,1)}},{key:"uploadFile",value:function(e,t){var n,o=this,i=_createForOfIteratorHelper(this.images);try{var c=function(){var i=n.value;i.file_url=null,o.messageService.uploadFile(Object(l.c)(i),t).subscribe((function(t){i.uploading=!1,o.file_upload_cant++,o.checkUploadPost(e)}),(function(t){o.file_upload_cant++,o.checkUploadPost(e),o.controlErroresService.control(t)}))};for(i.s();!(n=i.n()).done;)c()}catch(r){i.e(r)}finally{i.f()}}},{key:"checkUploadPost",value:function(e){this.file_upload_cant>=this.images.length&&(this.is_send_message_parent=!1,this.is_send_message=!0,this.toastService.success(e.message),this.fieldEmitChange.emit(e.data),this.response.mode="",this.valueResponse.emit())}},{key:"sendMessage",value:function(){var e=this;if(this.message){var t={to:this.users.map((function(e){return e.uuid})),mode:this.response.mode,parent_id:this.id,message:this.message,allow_answer:this.allow_answer};this.is_send_message_parent=!0,this.messageService.response(t,this.echo?this.echo.socketId():0).subscribe((function(t){0==e.images.length?(e.is_send_message_parent=!1,e.is_send_message=!0,e.fieldEmitChange.emit(t.data),e.toastService.success(t.message),e.response.mode="",e.valueResponse.emit()):e.uploadFile(t,t.uuid)}),(function(t){e.controlErroresService.control(t),e.is_send_message_parent=!1}))}else this.toastService.warning("Escriba el mensaje")}},{key:"triggerButtonFileOpen",value:function(){$("#button-file-message-upload").click()}}]),e}()).\u0275fac=function(e){return new(e||dr)(b.ac(Hi),b.ac(u.a),b.ac(Tn.b),b.ac(Ni.a),b.ac(f.a))},dr.\u0275cmp=b.Ub({type:dr,selectors:[["response-message"]],inputs:{users:"users",showAllUsers:"showAllUsers",response:"response",id:"id"},outputs:{valueResponse:"valueResponse",fieldEmitChange:"fieldEmitChange"},decls:22,vars:8,consts:[[1,"p-0","m-0"],[4,"ngFor","ngForOf"],[3,"ngModel","ngModelChange"],["class","border-2 border-dashed dark:border-dark-5 rounded-md pt-4","style","margin-top: 10px;",4,"ngIf"],[1,"form-group"],[1,"mt-2"],[1,"input-group-append","mt-2"],["type","submit","color","success","size","small",1,"mr-2",3,"disabled","click"],["name","send-outline"],["size","small",3,"disabled","click"],["name","cloud-upload-outline"],["id","button-file-message-upload","type","file","multiple","",1,"hidden","file-mm-input",3,"change"],["matTooltip","No responder","size","small","color","danger",1,"mr-2","ml-2",3,"click"],["name","close-outline"],[3,"show"],["class","bck_fileUpload",4,"ngIf"],[4,"ngIf"],["class","text-muted",4,"ngIf"],["class","c-pointer",3,"click",4,"ngIf"],[1,"text-muted"],[1,"c-pointer",3,"click"],[1,"border-2","border-dashed","dark:border-dark-5","rounded-md","pt-4",2,"margin-top","10px"],[2,"margin","0","padding-left","20px"],[1,"flex","flex-wrap","px-4"],["class","w-24 h-24 relative image-fit mb-5 mr-5 cursor-pointer zoom-in","tooltip","Call","navTooltip","",3,"matTooltip",4,"ngFor","ngForOf"],["tooltip","Call","navTooltip","",1,"w-24","h-24","relative","image-fit","mb-5","mr-5","cursor-pointer","zoom-in",3,"matTooltip"],["mode","indeterminate",4,"ngIf"],["class","rounded-md","alt","Imagen",3,"src",4,"ngIf"],["class","rounded-md","alt","File","src","/assets/img/document-file-icon.png",4,"ngIf"],["title","Remove this image?","class"," w-5 h-5 flex items-center justify-center absolute rounded-full text-white bg-theme-6 right-0 top-0 -mr-2 -mt-2",3,"click",4,"ngIf"],["mode","indeterminate"],["alt","Imagen",1,"rounded-md",3,"src"],["alt","File","src","/assets/img/document-file-icon.png",1,"rounded-md"],["title","Remove this image?",1,"w-5","h-5","flex","items-center","justify-center","absolute","rounded-full","text-white","bg-theme-6","right-0","top-0","-mr-2","-mt-2",3,"click"],["name","trash-outline"],[1,"bck_fileUpload"],[1,"fileUpload"],[1,"text-center"],[3,"value","max"]],template:function(e,t){1&e&&(b.gc(0,"p",0),b.gc(1,"small"),b.gc(2,"strong"),b.ed(3,"Para: "),b.fc(),b.cd(4,or,2,1,"span",1),b.fc(),b.fc(),b.gc(5,"ckeditor",2),b.oc("ngModelChange",(function(e){return t.message=e})),b.fc(),b.cd(6,lr,6,4,"div",3),b.gc(7,"div",4),b.gc(8,"section",5),b.gc(9,"mat-checkbox",2),b.oc("ngModelChange",(function(e){return t.allow_answer=e})),b.ed(10,"Se permite responder este mensaje"),b.fc(),b.fc(),b.gc(11,"div",6),b.gc(12,"ion-button",7),b.oc("click",(function(){return t.sendMessage()})),b.ed(13,"Enviar | "),b.bc(14,"ion-icon",8),b.fc(),b.gc(15,"ion-button",9),b.oc("click",(function(){return t.triggerButtonFileOpen()})),b.bc(16,"ion-icon",10),b.gc(17,"input",11),b.oc("change",(function(e){return t.uploadImageLocal(e)})),b.fc(),b.fc(),b.gc(18,"ion-button",12),b.oc("click",(function(){return t.response.mode="",t.valueResponse.emit("Bienvenido!!!")})),b.bc(19,"ion-icon",13),b.fc(),b.fc(),b.fc(),b.bc(20,"ngx-loading-x",14),b.cd(21,ur,7,4,"div",15)),2&e&&(b.Lb(4),b.Ac("ngForOf",t.users),b.Lb(1),b.Ac("ngModel",t.message),b.Lb(1),b.Ac("ngIf",t.images.length>0),b.Lb(3),b.Ac("ngModel",t.allow_answer),b.Lb(3),b.Ac("disabled",t.is_send_message_parent),b.Lb(3),b.Ac("disabled",t.is_send_message_parent),b.Lb(5),b.Ac("show",t.is_send_message_parent),b.Lb(1),b.Ac("ngIf",t.file_upload_cant<t.images.length&&t.is_send_message))},directives:[i.s,Je.a,c.r,c.u,i.t,Lc.a,r.k,r.C,k.a,Mc,Te.a],pipes:[m.d],styles:['@charset "UTF-8";input[type=file][_ngcontent-%COMP%]{display:none}.custom-image[_ngcontent-%COMP%]{cursor:pointer;position:absolute;top:10px;right:10px}.container-input-file[_ngcontent-%COMP%]{margin:2rem 0}.icon[_ngcontent-%COMP%]{background:#489eff;color:#fff;width:40px;height:40px;border-radius:50%;cursor:pointer;padding:10px}.blur-pic-letter[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{filter:blur(5px)}.blur-pic-letter[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{z-index:100}.grid-template-gallery[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr)}@media (min-width:750px){.grid-template-gallery[_ngcontent-%COMP%]{grid-template-columns:repeat(5,1fr)}}@media (min-width:900px){.grid-template-gallery[_ngcontent-%COMP%]{grid-template-columns:repeat(6,1fr)}}.centrado-absoluto[_ngcontent-%COMP%]{left:50%;top:50%;transform:translate(-50%,-50%);-webkit-transform:translate(-50%,-50%)}.absolute[_ngcontent-%COMP%]{position:absolute}.icon-size-show-pres[_ngcontent-%COMP%]{font-size:5em}.text-more-files[_ngcontent-%COMP%]{background:#fff;color:#00f;padding:10px;border-radius:5px}.btn-r-t-rw[_ngcontent-%COMP%]{position:absolute;right:5px;top:5px}.color-danger[_ngcontent-%COMP%]{color:#a80000}.color-info[_ngcontent-%COMP%]{color:#0065a8}.name-file-show[_ngcontent-%COMP%]{background:rgba(96,96,96,.5098039215686274);color:#fff;width:100%;position:absolute;bottom:0;display:none}.container-lw-img[_ngcontent-%COMP%]{overflow:hidden;transition:padding-bottom 1s}.container-lw-img[_ngcontent-%COMP%]:hover{padding-bottom:40px}.container-lw-img[_ngcontent-%COMP%]:hover > .name-file-show[_ngcontent-%COMP%]{display:block}.bck_fileUpload[_ngcontent-%COMP%]{background:rgba(0,0,0,.4);z-index:10000;top:0;width:100%;height:100%;position:fixed}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]{position:fixed;z-index:19000;top:25%;margin:5% auto;left:0;right:0;box-shadow:0 0 2px rgba(0,0,0,.3);background-color:#eef2f6;width:300px;padding:30px}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:18px;font-weight:400;margin:20px 0 5px;padding:0}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]   progress[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:0;width:100%;height:15px;color:#51aded;background-color:#ccc;border-radius:10px}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]   progress[_ngcontent-%COMP%]::-moz-progress-bar{background-color:#51aded;border-radius:10px}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]   progress[_ngcontent-%COMP%]::-webkit-progress-bar{background-color:#ccc;border-radius:10px}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]   progress[_ngcontent-%COMP%]::-webkit-progress-value{position:relative;background-color:#51aded;border-radius:10px}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:80%;padding:0;margin:0;text-align:center}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]   .fileElem[_ngcontent-%COMP%]{width:300px;position:absolute;top:30px;left:30px;z-index:1;height:50px;opacity:0;cursor:pointer}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]   .fileElem[_ngcontent-%COMP%]:focus{outline:none}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]   .fileSelect[_ngcontent-%COMP%]{display:inline-block;text-align:left;padding-left:110px;width:100%;height:50px;background-color:#51aded;border-radius:3px;border-bottom:3px solid rgba(0,0,0,.1);position:relative;font-size:20px;line-height:50px;color:#fff}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]   .fileSelect[_ngcontent-%COMP%]:before{font-family:Entypo;content:"\ue711";position:absolute;top:0;left:80px}']}),dr);function fr(e,t){if(1&e&&(b.gc(0,"div",12),b.gc(1,"h3",13),b.ed(2),b.fc(),b.fc()),2&e){var n=b.sc();b.Lb(2),b.fd(n.message.message.subject)}}function pr(e,t){if(1&e&&(b.gc(0,"span",16),b.ed(1),b.fc()),2&e){var n=b.sc(2).$implicit;b.Ac("matTooltip",n.is_read?"Le\xeddo":"Sin leer")("ngClass",n.is_read?"bck-ss-d":""),b.Lb(1),b.hd(" ",n.last_names," ",n.name,"")}}function br(e,t){if(1&e){var n=b.hc();b.gc(0,"strong",17),b.oc("click",(function(){b.Sc(n);var e=b.sc(3);return e.showAllUsers=!e.showAllUsers})),b.ed(1),b.fc()}if(2&e){var o=b.sc(3);b.Lb(1),b.gd(" y ",o.message.message.users.length-6," m\xe1s")}}function mr(e,t){1&e&&(b.gc(0,"span"),b.ed(1,";"),b.fc())}function hr(e,t){if(1&e&&(b.gc(0,"span"),b.cd(1,pr,2,4,"span",14),b.cd(2,br,2,1,"strong",15),b.cd(3,mr,2,0,"span",8),b.fc()),2&e){var n=b.sc().index,o=b.sc();b.Lb(1),b.Ac("ngIf",n<5||o.showAllUsers),b.Lb(1),b.Ac("ngIf",5==n&&0==o.showAllUsers),b.Lb(1),b.Ac("ngIf",o.message.message.users.length>n+1)}}function vr(e,t){if(1&e&&(b.gc(0,"span"),b.cd(1,hr,4,3,"span",8),b.fc()),2&e){var n=t.index,o=b.sc();b.Lb(1),b.Ac("ngIf",n<=5||o.showAllUsers)}}function _r(e,t){if(1&e&&(b.gc(0,"div"),b.gc(1,"p",18),b.ed(2),b.fc(),b.fc()),2&e){var n=b.sc();b.Lb(2),b.fd(n.message.details?n.message.details:"")}}function kr(e,t){1&e&&b.bc(0,"i",24)}function yr(e,t){1&e&&b.bc(0,"i",25)}function Cr(e,t){1&e&&b.bc(0,"i",26)}function xr(e,t){if(1&e&&(b.gc(0,"a",19),b.cd(1,kr,1,0,"i",20),b.cd(2,yr,1,0,"i",21),b.cd(3,Cr,1,0,"i",22),b.gc(4,"p",23),b.ed(5),b.fc(),b.fc()),2&e){var n=t.$implicit;b.Ac("href",n.file_path,b.Vc),b.Lb(1),b.Ac("ngIf",n.content_type.indexOf("image")>=0),b.Lb(1),b.Ac("ngIf","application/pdf"==n.content_type),b.Lb(1),b.Ac("ngIf","application/pdf"!=n.content_type&&n.content_type.indexOf("image")<0),b.Lb(2),b.fd(n.name)}}function wr(e,t){if(1&e){var n=b.hc();b.gc(0,"div",29),b.gc(1,"div",30),b.gc(2,"button",31),b.oc("click",(function(){return b.Sc(n),b.sc(2).responseMode.mode="one"})),b.bc(3,"i",32),b.ed(4," Responder"),b.fc(),b.gc(5,"button",31),b.oc("click",(function(){return b.Sc(n),b.sc(2).responseMode.mode="all"})),b.bc(6,"i",33),b.ed(7," Responder a todos"),b.fc(),b.fc(),b.fc()}}var Or=function(e){return[e]};function Pr(e,t){if(1&e){var n=b.hc();b.gc(0,"div",29),b.gc(1,"response-message",34),b.oc("fieldEmitChange",(function(e){return b.Sc(n),b.sc(2).recibeMessage(e)}))("valueResponse",(function(){return b.Sc(n),b.sc(2).responseMode.mode=""})),b.fc(),b.fc()}if(2&e){var o=b.sc(2);b.Lb(1),b.Ac("mode",o.responseMode)("id",o.message.message.id)("users","all"==o.responseMode.mode?o.message.message.users:b.Fc(4,Or,o.message.send))("id",o.parent_id)}}function Mr(e,t){if(1&e&&(b.gc(0,"div",27),b.cd(1,wr,8,0,"div",28),b.cd(2,Pr,2,6,"div",28),b.fc()),2&e){var n=b.sc();b.Lb(1),b.Ac("ngIf",!n.responseMode.mode),b.Lb(1),b.Ac("ngIf",n.responseMode.mode)}}var Sr,Lr,Ar=((Lr=function(){function e(){_classCallCheck(this,e),this.message=null,this.images=[],this.parent_id=null,this.headShow=!0,this.bottomShow=!0,this.moment=R,this.rsFieldEmitChange=new b.r,this.responseMode={mode:""}}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"recibeMessage",value:function(e){this.rsFieldEmitChange.emit(e)}}]),e}()).\u0275fac=function(e){return new(e||Lr)},Lr.\u0275cmp=b.Ub({type:Lr,selectors:[["show-one-message"]],inputs:{message:"message",images:"images",parent_id:"parent_id",headShow:"headShow",bottomShow:"bottomShow"},outputs:{rsFieldEmitChange:"rsFieldEmitChange"},decls:19,vars:9,consts:[[1,"card","mt-3"],["class","card-header",4,"ngIf"],[1,"card-body"],[1,"mb-0","text-muted"],[1,"p-0","m-0"],[4,"ngFor","ngForOf"],[1,"mt-3","mb-3"],[3,"innerHTML"],[4,"ngIf"],[1,"grid-template-gallery"],["target","_blank","class","row flex flex-center container-lw-img card c-pointer ml-2 mr-2","style","flex-direction: row;",3,"href",4,"ngFor","ngForOf"],["class","card-footer","style","background: #fff;",4,"ngIf"],[1,"card-header"],[1,"card-title","mb-0",2,"display","inline-block"],["class","text-muted c-pointer","matTooltipPosition","above",3,"matTooltip","ngClass",4,"ngIf"],["class","c-pointer",3,"click",4,"ngIf"],["matTooltipPosition","above",1,"text-muted","c-pointer",3,"matTooltip","ngClass"],[1,"c-pointer",3,"click"],[1,"text-muted",2,"border","1px solid #c5c5c5","padding","5px","border-radius","5px"],["target","_blank",1,"row","flex","flex-center","container-lw-img","card","c-pointer","ml-2","mr-2",2,"flex-direction","row",3,"href"],["class","m-0 col-3 color-warning far fa-images icon-size-show-pres text-center",4,"ngIf"],["class","m-0 col-3 color-danger fas fa-file-pdf icon-size-show-pres text-center",4,"ngIf"],["class","m-0 col-3 color-info far fa-file-alt icon-size-show-pres text-center",4,"ngIf"],[1,"name-file-show","col-9","m-0"],[1,"m-0","col-3","color-warning","far","fa-images","icon-size-show-pres","text-center"],[1,"m-0","col-3","color-danger","fas","fa-file-pdf","icon-size-show-pres","text-center"],[1,"m-0","col-3","color-info","far","fa-file-alt","icon-size-show-pres","text-center"],[1,"card-footer",2,"background","#fff"],["class","rounded-lg",4,"ngIf"],[1,"rounded-lg"],[1,"col-12","mb-2"],[1,"btn","btn--principal","mr-2",3,"click"],[1,"fas","fa-reply"],[1,"fas","fa-reply-all"],[3,"mode","id","users","fieldEmitChange","valueResponse"]],template:function(e,t){1&e&&(b.gc(0,"div",0),b.cd(1,fr,3,1,"div",1),b.gc(2,"div",2),b.gc(3,"h3",3),b.ed(4),b.fc(),b.gc(5,"p",4),b.gc(6,"small"),b.ed(7),b.fc(),b.fc(),b.gc(8,"p",4),b.gc(9,"small"),b.gc(10,"strong"),b.ed(11,"Para: "),b.fc(),b.cd(12,vr,2,1,"span",5),b.fc(),b.fc(),b.gc(13,"div",6),b.bc(14,"p",7),b.fc(),b.cd(15,_r,3,1,"div",8),b.gc(16,"div",9),b.cd(17,xr,6,5,"a",10),b.fc(),b.fc(),b.cd(18,Mr,3,2,"div",11),b.fc()),2&e&&(b.Lb(1),b.Ac("ngIf",t.headShow),b.Lb(3),b.hd("",t.message.send?(t.message.send.last_names||" ")+" "+(t.message.send.name||""):"-","<",t.message.send.email,"> "),b.Lb(3),b.fd(t.message.date_created),b.Lb(5),b.Ac("ngForOf",t.message.message.users),b.Lb(2),b.Ac("innerHTML",t.message.message.message,b.Tc),b.Lb(1),b.Ac("ngIf",t.message.details),b.Lb(2),b.Ac("ngForOf",t.images),b.Lb(1),b.Ac("ngIf",t.bottomShow&&t.message.message.allow_answer))},directives:[i.t,i.s,k.a,i.q,gr],styles:['@charset "UTF-8";input[type=file][_ngcontent-%COMP%]{display:none}.custom-image[_ngcontent-%COMP%]{cursor:pointer;position:absolute;top:10px;right:10px}.container-input-file[_ngcontent-%COMP%]{margin:2rem 0}.icon[_ngcontent-%COMP%]{background:#489eff;color:#fff;width:40px;height:40px;border-radius:50%;cursor:pointer;padding:10px}.blur-pic-letter[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{filter:blur(5px)}.blur-pic-letter[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{z-index:100}.grid-template-gallery[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr)}@media (min-width:950px){.grid-template-gallery[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media (min-width:1000px){.grid-template-gallery[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)}}.centrado-absoluto[_ngcontent-%COMP%]{left:50%;top:50%;transform:translate(-50%,-50%);-webkit-transform:translate(-50%,-50%)}.absolute[_ngcontent-%COMP%]{position:absolute}.icon-size-show-pres[_ngcontent-%COMP%]{font-size:40px}.text-more-files[_ngcontent-%COMP%]{background:#fff;color:#00f;padding:10px;border-radius:5px}.btn-r-t-rw[_ngcontent-%COMP%]{position:absolute;right:5px;top:5px}.color-danger[_ngcontent-%COMP%]{color:#a80000}.color-info[_ngcontent-%COMP%]{color:#0065a8}.color-warning[_ngcontent-%COMP%]{color:#a84300}.container-lw-img[_ngcontent-%COMP%]{overflow:hidden;transition:padding-bottom 1s;padding:10px;cursor:pointer}.bck_fileUpload[_ngcontent-%COMP%]{background:rgba(0,0,0,.4);z-index:10000;top:0;width:100%;height:100%;position:fixed}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]{position:fixed;z-index:19000;top:25%;margin:5% auto;left:0;right:0;box-shadow:0 0 2px rgba(0,0,0,.3);background-color:#eef2f6;width:300px;padding:30px}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:18px;font-weight:400;margin:20px 0 5px;padding:0}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]   progress[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:0;width:100%;height:15px;color:#51aded;background-color:#ccc;border-radius:10px}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]   progress[_ngcontent-%COMP%]::-moz-progress-bar{background-color:#51aded;border-radius:10px}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]   progress[_ngcontent-%COMP%]::-webkit-progress-bar{background-color:#ccc;border-radius:10px}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]   progress[_ngcontent-%COMP%]::-webkit-progress-value{position:relative;background-color:#51aded;border-radius:10px}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:80%;padding:0;margin:0;text-align:center}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]   .fileElem[_ngcontent-%COMP%]{width:300px;position:absolute;top:30px;left:30px;z-index:1;height:50px;opacity:0;cursor:pointer}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]   .fileElem[_ngcontent-%COMP%]:focus{outline:none}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]   .fileSelect[_ngcontent-%COMP%]{display:inline-block;text-align:left;padding-left:110px;width:100%;height:50px;background-color:#51aded;border-radius:3px;border-bottom:3px solid rgba(0,0,0,.1);position:relative;font-size:20px;line-height:50px;color:#fff}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]   .fileSelect[_ngcontent-%COMP%]:before{font-family:Entypo;content:"\ue711";position:absolute;top:0;left:80px}.c-pointer[_ngcontent-%COMP%]{cursor:pointer}.btn--principal[_ngcontent-%COMP%]{color:#5f6368;background:#fff;border:1px solid #5f6368}.bck-ss-d[_ngcontent-%COMP%]{background:rgba(127,247,255,.3686274509803922)}']}),Lr),Ir=((Sr=function(){function e(){_classCallCheck(this,e),this.message=""}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||Sr)},Sr.\u0275cmp=b.Ub({type:Sr,selectors:[["efect-card"]],inputs:{message:"message"},decls:5,vars:1,consts:[[1,"card-load-mul",2,"background","#fff !important"],["version","1.1","id","Layer_1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","x","0px","y","0px","width","400px","height","95px","viewBox","0 0 100 71","enable-background","new 0 0 100 71",0,"xml","space","preserve"],["fill","#E72C55","d","M70.374,19.633H30.428c-1.264,0-2.293,1.029-2.293,2.294v26.781c0,1.265,1.029,2.293,2.293,2.293h39.946\n\tc1.265,0,2.293-1.028,2.293-2.293V21.927C72.667,20.663,71.639,19.633,70.374,19.633z M70.374,20.749\n\tc0.111,0,0.219,0.017,0.321,0.046L50.757,38.642L30.21,20.771c0.071-0.013,0.144-0.021,0.218-0.021H70.374z M71.55,48.708\n\tc0,0.648-0.527,1.177-1.176,1.177H30.428c-0.649,0-1.177-0.528-1.177-1.177V21.927c0-0.155,0.031-0.303,0.085-0.438L50.08,39.532\n\tc0.191,0.167,0.434,0.249,0.677,0.249c0.247,0,0.497-0.086,0.688-0.258l20.053-17.947c0.034,0.11,0.052,0.229,0.052,0.352V48.708z",1,"message"],[1,"text-center","text-abs-bottom"]],template:function(e,t){1&e&&(b.gc(0,"div",0),b.rc(),b.gc(1,"svg",1),b.bc(2,"path",2),b.fc(),b.qc(),b.gc(3,"h3",3),b.ed(4),b.fc(),b.fc()),2&e&&(b.Lb(4),b.fd(t.message))},styles:["svg[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;margin:auto}.message[_ngcontent-%COMP%]{transform-origin:50% 50%;opacity:0;-webkit-animation:message-animation 8s infinite;animation:message-animation 8s infinite}@-webkit-keyframes message-animation{0%{opacity:0}15%{fill:#e72c55;opacity:1}20%{transform:scale(1.8);fill:#e72c55;opacity:1}30%{transform:scale(1.5);fill:#fff;opacity:1}50%{transform:scale(1.8);fill:#e72c55;opacity:1}60%{transform:scale(1.5);fill:#fff;opacity:1}80%{transform:scale(1.8);fill:#e72c55;opacity:1}to{transform:scale(.2);opacity:0}}@keyframes message-animation{0%{opacity:0}15%{fill:#e72c55;opacity:1}20%{transform:scale(1.8);fill:#e72c55;opacity:1}30%{transform:scale(1.5);fill:#fff;opacity:1}50%{transform:scale(1.8);fill:#e72c55;opacity:1}60%{transform:scale(1.5);fill:#fff;opacity:1}80%{transform:scale(1.8);fill:#e72c55;opacity:1}to{transform:scale(.2);opacity:0}}.text-abs-bottom[_ngcontent-%COMP%]{position:absolute;bottom:25vh;left:0;right:0;margin:auto;font-weight:800}"]}),Sr);function Tr(e,t){if(1&e){var n=b.hc();b.gc(0,"show-one-message",4),b.oc("rsFieldEmitChange",(function(e){return b.Sc(n),b.sc().recibeMessage(e)})),b.fc()}if(2&e){var o=b.sc();b.Ac("headShow",!0)("bottomShow",!0)("message",o.message)("parent_id",o.message.message_uuid)("images",o.message.message.images)}}function Rr(e,t){if(1&e&&b.bc(0,"show-one-message",14),2&e){var n=b.sc().$implicit,o=b.sc(2);b.Ac("parent_id",o.message.message_uuid)("headShow",!1)("bottomShow",!1)("message",n)("images",n.message.images)}}var zr=function(e){return{background:e}};function Er(e,t){if(1&e&&(b.gc(0,"div",7),b.gc(1,"div",8),b.gc(2,"h5",9),b.gc(3,"button",10),b.oc("click",(function(){var e=t.$implicit;return e.show=!e.show})),b.ed(4),b.fc(),b.fc(),b.fc(),b.gc(5,"div",11),b.gc(6,"div",12),b.cd(7,Rr,1,5,"show-one-message",13),b.fc(),b.fc(),b.fc()),2&e){var n=t.$implicit;b.Lb(1),b.Ac("ngStyle",b.Fc(4,zr,"send"==n.status?"#e8fff9;":"")),b.Lb(3),b.fd(n.message.subject),b.Lb(1),b.Ac("ngClass",n.show?"show":""),b.Lb(2),b.Ac("ngIf",null!=n)}}function Fr(e,t){if(1&e&&(b.gc(0,"div",5),b.cd(1,Er,8,6,"div",6),b.fc()),2&e){var n=b.sc();b.Lb(1),b.Ac("ngForOf",n.messages_previous)}}function jr(e,t){1&e&&b.bc(0,"efect-card",15),2&e&&b.Ac("message","Cargando Mensaje")}var Br,Dr=((Br=function(){function e(t,n,o,i){_classCallCheck(this,e),this.activeRoute=t,this.messageService=n,this.controlErroresService=o,this.redireccionService=i,this.images=[],this.messages_previous=[],this.id=0,this.message=null,this.loadMessage=!1,this.showAllUsers=!1,this.isCollapsed=!1,this.msFieldEmitChange=new b.r,this.responseMode={mode:""},this.moment=R,console.log(this.id)}return _createClass(e,[{key:"ngOnInit",value:function(){this.getMessage()}},{key:"getMessage",value:function(){var e=this;this.loadMessage=!0,this.messageService.getMessage(this.id).subscribe((function(t){e.loadMessage=!1,e.message=t.data,e.images=e.message.message.images||[],e.getHistorialMessages(e.message.message.uuid)}),(function(t){e.loadMessage=!1,e.controlErroresService.control(t)}))}},{key:"getHistorialMessages",value:function(e){var t=this;this.messageService.getMessagesById(e).subscribe((function(e){t.messages_previous=e.data}),(function(e){t.controlErroresService.control(e)}))}},{key:"recibeMessage",value:function(e){this.getHistorialMessages(this.message.message_uuid)}}]),e}()).\u0275fac=function(e){return new(e||Br)(b.ac(a.a),b.ac(Hi),b.ac(u.a),b.ac(f.a))},Br.\u0275cmp=b.Ub({type:Br,selectors:[["show-message"]],inputs:{id:"id"},outputs:{msFieldEmitChange:"msFieldEmitChange"},decls:4,vars:3,consts:[[1,"container"],[3,"headShow","bottomShow","message","parent_id","images","rsFieldEmitChange",4,"ngIf"],["id","accordion","class","mt-4",4,"ngIf"],[3,"message",4,"ngIf"],[3,"headShow","bottomShow","message","parent_id","images","rsFieldEmitChange"],["id","accordion",1,"mt-4"],["class","mt-3","style","background: #fff",4,"ngFor","ngForOf"],[1,"mt-3",2,"background","#fff"],[1,"card-header",3,"ngStyle"],[1,"mb-0"],["data-toggle","collapse","aria-expanded","true",1,"btn",3,"click"],["aria-labelledby","headingOne","data-parent","#accordion",1,"collapse",3,"ngClass"],[1,""],[3,"parent_id","headShow","bottomShow","message","images",4,"ngIf"],[3,"parent_id","headShow","bottomShow","message","images"],[3,"message"]],template:function(e,t){1&e&&(b.gc(0,"div",0),b.cd(1,Tr,1,5,"show-one-message",1),b.cd(2,Fr,2,1,"div",2),b.fc(),b.cd(3,jr,1,1,"efect-card",3)),2&e&&(b.Lb(1),b.Ac("ngIf",0==t.loadMessage&&null!=t.message),b.Lb(1),b.Ac("ngIf",t.message),b.Lb(1),b.Ac("ngIf",t.loadMessage))},directives:[i.t,Ar,i.s,i.w,i.q,Ir],styles:['@charset "UTF-8";input[type=file][_ngcontent-%COMP%]{display:none}.custom-image[_ngcontent-%COMP%]{cursor:pointer;position:absolute;top:10px;right:10px}.container-input-file[_ngcontent-%COMP%]{margin:2rem 0}.icon[_ngcontent-%COMP%]{background:#489eff;color:#fff;width:40px;height:40px;border-radius:50%;cursor:pointer;padding:10px}.blur-pic-letter[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{filter:blur(5px)}.blur-pic-letter[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{z-index:100}.grid-template-gallery[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr)}@media (min-width:950px){.grid-template-gallery[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media (min-width:1000px){.grid-template-gallery[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)}}.centrado-absoluto[_ngcontent-%COMP%]{left:50%;top:50%;transform:translate(-50%,-50%);-webkit-transform:translate(-50%,-50%)}.absolute[_ngcontent-%COMP%]{position:absolute}.icon-size-show-pres[_ngcontent-%COMP%]{font-size:40px}.text-more-files[_ngcontent-%COMP%]{background:#fff;color:#00f;padding:10px;border-radius:5px}.btn-r-t-rw[_ngcontent-%COMP%]{position:absolute;right:5px;top:5px}.color-danger[_ngcontent-%COMP%]{color:#a80000}.color-info[_ngcontent-%COMP%]{color:#0065a8}.color-warning[_ngcontent-%COMP%]{color:#a84300}.container-lw-img[_ngcontent-%COMP%]{overflow:hidden;transition:padding-bottom 1s;padding:10px;cursor:pointer}.bck_fileUpload[_ngcontent-%COMP%]{background:rgba(0,0,0,.4);z-index:10000;top:0;width:100%;height:100%;position:fixed}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]{position:fixed;z-index:19000;top:25%;margin:5% auto;left:0;right:0;box-shadow:0 0 2px rgba(0,0,0,.3);background-color:#eef2f6;width:300px;padding:30px}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:18px;font-weight:400;margin:20px 0 5px;padding:0}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]   progress[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:0;width:100%;height:15px;color:#51aded;background-color:#ccc;border-radius:10px}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]   progress[_ngcontent-%COMP%]::-moz-progress-bar{background-color:#51aded;border-radius:10px}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]   progress[_ngcontent-%COMP%]::-webkit-progress-bar{background-color:#ccc;border-radius:10px}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]   progress[_ngcontent-%COMP%]::-webkit-progress-value{position:relative;background-color:#51aded;border-radius:10px}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:80%;padding:0;margin:0;text-align:center}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]   .fileElem[_ngcontent-%COMP%]{width:300px;position:absolute;top:30px;left:30px;z-index:1;height:50px;opacity:0;cursor:pointer}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]   .fileElem[_ngcontent-%COMP%]:focus{outline:none}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]   .fileSelect[_ngcontent-%COMP%]{display:inline-block;text-align:left;padding-left:110px;width:100%;height:50px;background-color:#51aded;border-radius:3px;border-bottom:3px solid rgba(0,0,0,.1);position:relative;font-size:20px;line-height:50px;color:#fff}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]   .fileSelect[_ngcontent-%COMP%]:before{font-family:Entypo;content:"\ue711";position:absolute;top:0;left:80px}.c-pointer[_ngcontent-%COMP%]{cursor:pointer}.btn--principal[_ngcontent-%COMP%]{color:#5f6368;background:#fff;border:1px solid #5f6368}']}),Br);function Ur(e,t){1&e&&b.bc(0,"mat-progress-bar",10)}function $r(e,t){if(1&e){var n=b.hc();b.gc(0,"div"),b.gc(1,"chat-messages",11),b.oc("fieldEmitChange",(function(e){return b.Sc(n),b.sc().showMessage(e)})),b.fc(),b.fc()}}function Nr(e,t){if(1&e){var n=b.hc();b.gc(0,"div",12),b.gc(1,"new-message",11),b.oc("fieldEmitChange",(function(e){return b.Sc(n),b.sc().recibeMessage(e)})),b.fc(),b.fc()}}function qr(e,t){if(1&e){var n=b.hc();b.gc(0,"div"),b.gc(1,"show-message",13),b.oc("msFieldEmitChange",(function(e){return b.Sc(n),b.sc().recibeMessage(e)})),b.fc(),b.fc()}if(2&e){var o=b.sc();b.Lb(1),b.Ac("id",o.selectedId)}}function Hr(e,t){if(1&e){var n=b.hc();b.gc(0,"button",14),b.oc("click",(function(){return b.Sc(n),b.sc().openPanelNewMessage("new-message")})),b.ed(1),b.tc(2,"translate"),b.bc(3,"ion-icon",15),b.fc()}2&e&&(b.Lb(1),b.gd("",b.uc(2,1,"buttons.new_message")," "))}function Vr(e,t){if(1&e){var n=b.hc();b.gc(0,"button",16),b.oc("click",(function(){return b.Sc(n),b.sc().openPanelNewMessage("messages")})),b.bc(1,"ion-icon",17),b.ed(2),b.tc(3,"translate"),b.fc()}2&e&&(b.Lb(2),b.gd(" ",b.uc(3,1,"buttons.inbox"),""))}var Yr,Xr=((Yr=function(){function e(t,n,o,i){_classCallCheck(this,e),this.modalCrl=t,this.userData=n,this.navParams=o,this.translate=i,this.selectedId=null,this.loading=!1,this.openFilter=!1,this.moment=R,this.courses=[],this.users=[],this.usersSelected=[],this.search_find=!1,this.searching=!1,this.auth=null,this.pageMessage=1,this.allMessage=1,this.decodeURIComponent=decodeURIComponent,this.scrollbarStyle=s.a.scrollbarStyle,this.messages=[],this.filter={status:"active",search:"",range:{start:null,end:null}},this.panel_show="messages",i.setDefaultLang(l.e.lang),this.show_id=o.data.show_id}return _createClass(e,[{key:"ngOnInit",value:function(){return Object(A.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.userData.getUser();case 2:this.auth=e.sent;case 3:case"end":return e.stop()}}),e,this)})))}},{key:"ngAfterViewInit",value:function(){this.show_id&&this.showMessage({uuid:this.show_id})}},{key:"openPanelNewMessage",value:function(e){this.panel_show=e}},{key:"dismiss",value:function(){this.modalCrl.dismiss()}},{key:"recibeMessage",value:function(e){console.log(e),this.panel_show="messages"}},{key:"showMessage",value:function(e){this.selectedId=e.uuid,this.panel_show="show"}}]),e}()).\u0275fac=function(e){return new(e||Yr)(b.ac(r.Db),b.ac(Di.a),b.ac(r.Fb),b.ac(m.e))},Yr.\u0275cmp=b.Ub({type:Yr,selectors:[["app-panel-chat-master"]],decls:17,vars:11,consts:[["translucent","true"],["slot","end"],[3,"disabled","click"],["name","close-outline"],["mode","indeterminate",4,"ngIf"],["fullscreen","true",3,"scrollbar"],[4,"ngIf"],["class","container",4,"ngIf"],["slot","end","mat-button","","size","small","color","primary",3,"click",4,"ngIf"],["slot","end","mat-button","","size","small","color","danger",3,"click",4,"ngIf"],["mode","indeterminate"],[3,"fieldEmitChange"],[1,"container"],[3,"id","msFieldEmitChange"],["slot","end","mat-button","","size","small","color","primary",3,"click"],["name","send-outline"],["slot","end","mat-button","","size","small","color","danger",3,"click"],["name","arrow-back-outline"]],template:function(e,t){1&e&&(b.gc(0,"ion-header",0),b.gc(1,"ion-toolbar"),b.gc(2,"ion-title"),b.ed(3),b.tc(4,"translate"),b.fc(),b.gc(5,"ion-buttons",1),b.gc(6,"ion-button",2),b.oc("click",(function(){return t.dismiss()})),b.bc(7,"ion-icon",3),b.fc(),b.fc(),b.fc(),b.cd(8,Ur,1,0,"mat-progress-bar",4),b.fc(),b.gc(9,"ion-content",5),b.cd(10,$r,2,0,"div",6),b.cd(11,Nr,2,0,"div",7),b.cd(12,qr,2,1,"div",6),b.fc(),b.gc(13,"ion-footer",0),b.gc(14,"ion-toolbar"),b.cd(15,Hr,4,3,"button",8),b.cd(16,Vr,4,3,"button",9),b.fc(),b.fc()),2&e&&(b.Lb(3),b.gd(" ",b.uc(4,9,"pages.messenger.messenger")," "),b.Lb(3),b.Ac("disabled",t.loading),b.Lb(2),b.Ac("ngIf",t.loading),b.Lb(1),b.Bc("scrollbar",t.scrollbarStyle),b.Lb(1),b.Ac("ngIf","messages"==t.panel_show),b.Lb(1),b.Ac("ngIf","new-message"==t.panel_show),b.Lb(1),b.Ac("ngIf","show"==t.panel_show),b.Lb(3),b.Ac("ngIf","messages"==t.panel_show),b.Lb(1),b.Ac("ngIf","new-message"==t.panel_show||"show"==t.panel_show))},directives:[r.B,r.zb,r.xb,r.l,r.k,r.C,i.t,r.u,h.b,r.z,Te.a,uc,Zc,Dr,it.b],pipes:[m.d],styles:[""]}),Yr),Qr=n("AnNS"),Gr=n("AkM1");function Wr(e,t){1&e&&b.bc(0,"mat-progress-bar",11)}var Kr=function(e){return{"image-active":e}};function Zr(e,t){if(1&e&&b.bc(0,"img",20),2&e){var n=t.$implicit,o=t.index,i=b.sc(2);b.Ac("src",n.file_url,b.Vc)("alt",n.name)("ngClass",b.Fc(3,Kr,i.selectecIndex==o))}}var Jr=function(e){return{active:e}};function ea(e,t){if(1&e){var n=b.hc();b.gc(0,"span",21),b.oc("click",(function(){b.Sc(n);var e=t.index;return b.sc(2).selectImage(e)})),b.fc()}if(2&e){var o=t.index,i=b.sc(2);b.Ac("ngClass",b.Fc(1,Jr,i.selectedIndex==o))}}function ta(e,t){if(1&e){var n=b.hc();b.gc(0,"div",12),b.cd(1,Zr,1,5,"img",13),b.gc(2,"div",14),b.cd(3,ea,1,3,"span",15),b.fc(),b.gc(4,"button",16),b.gc(5,"ion-icon",17),b.oc("click",(function(){return b.Sc(n),b.sc().onPrevClick()})),b.fc(),b.fc(),b.gc(6,"button",18),b.gc(7,"ion-icon",19),b.oc("click",(function(){return b.Sc(n),b.sc().onNextClick()})),b.fc(),b.fc(),b.fc()}if(2&e){var o=b.sc();b.Lb(1),b.Ac("ngForOf",o.images),b.Lb(2),b.Ac("ngForOf",o.images)}}function na(e,t){if(1&e){var n=b.hc();b.gc(0,"ion-card-header",22),b.gc(1,"ion-button",23),b.oc("click",(function(){return b.Sc(n),b.sc().leftObjectMove()})),b.bc(2,"ion-icon",24),b.fc(),b.gc(3,"ion-button",23),b.oc("click",(function(){return b.Sc(n),b.sc().rightObjectMode()})),b.bc(4,"ion-icon",25),b.fc(),b.fc()}}var oa,ia,ca=((oa=function(){function e(t,n){_classCallCheck(this,e),this.navParams=t,this.modalCtrl=n,this.data=[],this.scrollbarStyle=s.a.scrollbarStyle,this.loading=!1,this.selectecIndex=0,this.slideInterval=7e3,this.indexObject=0,this.images=[],this.indicators=!0,this.itemPosition=null,this.intervalSlide=null,this.data=this.navParams.data.data}return _createClass(e,[{key:"ngOnInit",value:function(){(!Array.isArray(this.data)||this.data.length<=0)&&this.dismiss(),this.itemPosition=this.data[this.indexObject],this.images=this.itemPosition.images,this.autoSlideImages()}},{key:"autoSlideImages",value:function(){var e=this;this.intervalSlide=setInterval((function(){e.onNextClick(),console.log(2222)}),this.slideInterval)}},{key:"ngOnDestroy",value:function(){clearInterval(this.intervalSlide)}},{key:"dismiss",value:function(e){this.modalCtrl.dismiss()}},{key:"selectImage",value:function(e){this.selectecIndex=e}},{key:"onPrevClick",value:function(){0==this.selectecIndex?this.selectecIndex=this.images.length-1:this.selectecIndex--}},{key:"onNextClick",value:function(){this.selectecIndex==this.images.length-1?this.selectecIndex=0:this.selectecIndex++}},{key:"rightObjectMode",value:function(){this.indexObject==this.data.length-1?this.indexObject=0:this.indexObject++,this.itemPosition=this.data[this.indexObject],this.images=this.itemPosition.images}},{key:"leftObjectMove",value:function(){0==this.indexObject?this.indexObject=this.data.length-1:this.indexObject--,this.itemPosition=this.data[this.indexObject],this.images=this.itemPosition.images}}]),e}()).\u0275fac=function(e){return new(e||oa)(b.ac(r.Fb),b.ac(r.Db))},oa.\u0275cmp=b.Ub({type:oa,selectors:[["app-modal-notifications"]],decls:16,vars:9,consts:[["translucent","true"],["slot","start",2,"width","100px","margin","0 auto",3,"src"],["slot","end"],[3,"disabled","click"],["name","close-outline"],["mode","indeterminate",4,"ngIf"],[3,"scrollbar"],[2,"position","relative"],["class","carousel-container container",4,"ngIf","ngIfOf"],[3,"innerHTML"],["class","space-btw",4,"ngIf"],["mode","indeterminate"],[1,"carousel-container","container"],[3,"src","alt","ngClass",4,"ngFor","ngForOf"],[1,"carousel-dot-container"],["class","dot",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"btn-carousel","btn-prev"],["name","chevron-back-outline",1,"icon-prev","icon-carousel",3,"click"],[1,"btn-carousel","btn-next"],["name","chevron-forward-outline",1,"icon-next","icon-carousel",3,"click"],[3,"src","alt","ngClass"],[1,"dot",3,"ngClass","click"],[1,"space-btw"],["color","warning","size","small",3,"click"],["name","arrow-back-outline"],["name","arrow-forward-outline"]],template:function(e,t){1&e&&(b.gc(0,"ion-header",0),b.gc(1,"ion-toolbar"),b.bc(2,"ion-img",1),b.gc(3,"ion-title"),b.ed(4),b.fc(),b.gc(5,"ion-buttons",2),b.gc(6,"ion-button",3),b.oc("click",(function(){return t.dismiss()})),b.bc(7,"ion-icon",4),b.fc(),b.fc(),b.fc(),b.cd(8,Wr,1,0,"mat-progress-bar",5),b.fc(),b.gc(9,"ion-content",6),b.bc(10,"div",7),b.cd(11,ta,8,2,"div",8),b.gc(12,"ion-card"),b.gc(13,"ion-card-content"),b.bc(14,"div",9),b.fc(),b.cd(15,na,5,0,"ion-card-header",10),b.fc(),b.fc()),2&e&&(b.Lb(2),b.Ac("src","/assets/img/puente-digital.png"),b.Lb(2),b.gd(" ",null!=t.itemPosition?t.itemPosition.title:"-"," "),b.Lb(2),b.Ac("disabled",t.loading),b.Lb(2),b.Ac("ngIf",t.loading),b.Lb(1),b.Bc("scrollbar",t.scrollbarStyle),b.Lb(2),b.Ac("ngIf",t.images)("ngIfOf",t.images.length>0),b.Lb(3),b.Ac("innerHTML",null!=t.itemPosition?t.itemPosition.description:"",b.Tc),b.Lb(1),b.Ac("ngIf",t.data.length>1))},directives:[r.B,r.zb,r.D,r.xb,r.l,r.k,r.C,i.t,r.u,h.b,r.m,r.n,Te.a,i.s,i.q,r.o],styles:[".carousel-container[_ngcontent-%COMP%]{position:relative;margin:auto;text-align:center;border-radius:15px;box-shadow:0 6px 12px #dce1e1}.carousel-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:none;border-radius:15px}.carousel-container[_ngcontent-%COMP%]   img.image-active[_ngcontent-%COMP%]{display:block;width:100%;height:400px}.carousel-dot-container[_ngcontent-%COMP%]{position:absolute;right:0;left:0;bottom:0;display:flex;justify-content:center;padding:0;margin-bottom:1 rem}.dot[_ngcontent-%COMP%]{cursor:pointer;height:13px;width:13px;margin:0 5px;background-color:#fff;border-radius:50%;display:inline-block;transition:opacity .6s}.active[_ngcontent-%COMP%], .dot[_ngcontent-%COMP%]:hover{opacity:1}.fade[_ngcontent-%COMP%]{-webkit-animation-name:fade;animation-name:fade;-webkit-animation-duration:1.5s;animation-duration:1.5s}.btn-carousel[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;display:flex;align-items:center;justify-content:center;width:15%;padding:0;color:#fff;text-align:center;background:0 0;border:0;cursor:pointer}.btn-prev[_ngcontent-%COMP%]{left:0}.icon-carousel[_ngcontent-%COMP%]{color:#fff;opacity:.5;transition:all .15s ease}.icon-carousel[_ngcontent-%COMP%]:hover{opacity:.9}.icon-carousel[_ngcontent-%COMP%]:active{opacity:.5}.btn-next[_ngcontent-%COMP%], .icon-prev[_ngcontent-%COMP%]{font-size:35px}.btn-next[_ngcontent-%COMP%]{right:0}@-webkit-keyframes fade{0%{opacity:.4}to{opacity:1}}@keyframes fade{0%{opacity:.4}to{opacity:1}}"]}),oa),ra=n("2Vo4"),aa=ri.c.Network,sa=((ia=function(){function e(t,n){var o=this;_classCallCheck(this,e),this.toastService=t,this.toastController=n,this.online=null,this.hasConnection=new ra.a(!1),this.networkListener||(this.networkListener=aa.addListener("networkStatusChange",(function(e){return Object(A.b)(o,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.networkStatus=e,console.log(this.networkStatus),t.next=3,this.toastController.create({message:e.connected?'<ion-icon name="wifi-outline"></ion-icon> Conexi\xf3n a internet restablecida':'<ion-icon name="wifi-outline"></ion-icon> ha perdido la conexi\xf3n a internet',duration:2e3,color:e.connected?"success":"warning",position:"top",cssClass:"w-10p"});case 3:n=t.sent,console.log("hol"),n.present();case 5:case"end":return t.stop()}}),t,this)})))}))),console.log("NETWORK",this.networkListener)}return _createClass(e,[{key:"getNetWorkStatus",value:function(e){return Object(A.b)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,aa.getStatus();case 2:return e.networkStatus=t.sent,this.networkStatus=e.networkStatus,console.log(e.networkStatus),t.abrupt("return",this.networkStatus);case 6:case"end":return t.stop()}}),t,this)})))}},{key:"endNetworkListener",value:function(){this.networkListener&&this.networkListener.remove()}},{key:"networkDestroy",value:function(){this.networkListener&&this.networkListener.remove()}}]),e}()).\u0275fac=function(e){return new(e||ia)(b.kc(p.a),b.kc(r.Nb))},ia.\u0275prov=b.Wb({token:ia,factory:ia.\u0275fac,providedIn:"root"}),ia),la=n("e8h1"),ua=n("Jho9");function da(e,t){if(1&e&&(b.gc(0,"ion-badge",15),b.ed(1),b.fc()),2&e){var n=b.sc(3).$implicit,o=b.sc(3);b.Lb(1),b.fd(o.badgetContents[n.badge_content])}}function ga(e,t){if(1&e&&(b.gc(0,"ion-item",12),b.bc(1,"ion-icon",13),b.gc(2,"ion-label"),b.ed(3),b.tc(4,"translate"),b.cd(5,da,2,1,"ion-badge",14),b.fc(),b.fc()),2&e){var n=b.sc(2).$implicit;b.Ac("routerLink",n.route),b.Lb(1),b.Ac("name",n.icon+"-outline"),b.Lb(2),b.gd(" ",b.uc(4,4,n.title)," "),b.Lb(2),b.Ac("ngIf",n.show_badge)}}function fa(e,t){if(1&e&&(b.gc(0,"ion-badge",15),b.ed(1),b.fc()),2&e){var n=b.sc(3).$implicit,o=b.sc(3);b.Lb(1),b.fd(o.badgetContents[n.badge_content])}}function pa(e,t){if(1&e){var n=b.hc();b.gc(0,"ion-item",16),b.oc("click",(function(){return b.Sc(n),b.sc(2).$implicit.action()})),b.bc(1,"ion-icon",13),b.gc(2,"ion-label"),b.ed(3),b.tc(4,"translate"),b.cd(5,fa,2,1,"ion-badge",14),b.fc(),b.fc()}if(2&e){var o=b.sc(2).$implicit;b.Lb(1),b.Ac("name",o.icon),b.Lb(2),b.gd(" ",b.uc(4,3,o.title)," "),b.Lb(2),b.Ac("ngIf",o.show_badge)}}function ba(e,t){if(1&e&&(b.gc(0,"ion-menu-toggle",9),b.cd(1,ga,6,6,"ion-item",10),b.cd(2,pa,6,5,"ion-item",11),b.fc()),2&e){var n=b.sc().$implicit;b.Lb(1),b.Ac("ngIf","route"==n.type),b.Lb(1),b.Ac("ngIf","action"==n.type)}}function ma(e,t){if(1&e&&(b.ec(0),b.cd(1,ba,3,2,"ion-menu-toggle",8),b.dc()),2&e){var n=t.$implicit;b.Lb(1),b.Ac("ngIf",n.show)}}function ha(e,t){if(1&e&&(b.gc(0,"ion-list",7),b.gc(1,"ion-list-header"),b.ed(2),b.tc(3,"translate"),b.fc(),b.cd(4,ma,2,1,"ng-container",4),b.fc()),2&e){var n=b.sc().$implicit;b.Lb(2),b.gd(" ",b.uc(3,2,n.title)," "),b.Lb(2),b.Ac("ngForOf",n.items)}}function va(e,t){if(1&e&&(b.ec(0),b.cd(1,ha,5,4,"ion-list",6),b.dc()),2&e){var n=t.$implicit;b.Lb(1),b.Ac("ngIf",n.show)}}var _a,ka,ya,Ca,xa,wa,Oa,Pa,Ma,Sa=((_a=function(){function e(t,n,o,i,c,r,a,u,d,g,f,p,b,m,h,v,_,k,y,C,x,w,O){var P=this;_classCallCheck(this,e),this.menu=t,this.platform=n,this.router=o,this.splashScreen=i,this.statusBar=c,this.storage=r,this.userData=a,this.swUpdate=u,this.toastCtrl=d,this.translate=g,this.darkService=f,this.tourService=p,this.routerOutlet=b,this.modalCtrl=m,this.profileService=h,this.panelSizeService=v,this.authService=_,this.toastR=k,this.messengerService=y,this.addOrSubNotificationService=C,this.publicService=x,this.netWorkService=w,this.tokenService=O,this.size_pane="lg",this.loggedIn=!1,this.pagesContent=[{title:"menu.books_site",type:"principal",permission:"access_my_group_books",show:!1,items:[{title:"menu.my_books",permission:"access_my_books",icon:"book",route:l.h.books,type:"route",show:!1},{title:"menu.library",permission:"access_my_library",icon:"library",route:l.h.library,type:"route",show:!1},{permission:"access_my_addpines",title:"menu.active_pin",icon:"key",route:l.h.active_pin,type:"route",show:!1}]},{title:"menu.course_sections",type:"principal",show:!1,permission:"access_my_group_courses",items:[{title:"menu.courses",icon:"school",route:l.h.course,type:"route",show:!1,permission:"access_my_courses"},{title:"menu.calendar",icon:"calendar",route:l.h.calendar,type:"route",show:!1,permission:"access_my_calendar"}]},{title:"menu.reports",type:"reports",show:!1,permission:"access_my_group_report",items:[{title:"menu.report-users",icon:"person",route:l.h.reportUsers,type:"route",show:!1,permission:"access_my_adminreport"},{title:"menu.activity-report",icon:"albums",route:l.h.reportActivity,type:"route",show:!1,permission:"access_my_admin_report_activity"},{title:"menu.post_books",icon:"book",route:l.h.reportPostBook,type:"route",show:!1,permission:"access_my_adminreportbook"}]},{title:"menu.account",type:"principal",show:!1,permission:"access_my_group_account",items:[{title:"menu.profile",icon:"person",route:l.h.profile,type:"route",show:!1,permission:"access_my_group_account"},{title:"menu.notification",icon:"megaphone-outline",show_badge:!0,badge_content:"notifications_count",permission:"access_my_notifications",type:"action",show:!1,action:function(){P.showNotifications()}},{title:"menu.messenger",icon:"file-tray-full-outline",show_badge:!0,permission:"access_my_messenger",type:"action",show:!1,action:function(){P.showMessages()}}]},{title:"menu.session",type:"principal",show:!0,permission:!1,items:[{title:"menu.logout",icon:"log-out",permission:!1,type:"action",show:!0,action:function(){P.logout()}}]}],this.badgetContents={notifications_count:0},this.auth=null,this.dark=!1,this.scrollbarStyle=s.a.scrollbarStyle,this.listOfEvents=[],this.multiTabsOpened=!1,this.hasInizialitedSys=!1,"no"==is_loaded&&(this.tokenService.rmeoveTimerUUid(),is_loaded="yes"),g.setDefaultLang(l.e.lang),this.initializeApp(),this.initializeDetection(),this.echo=this.authService.echoPush(),C.get$().subscribe((function(e){console.log(e),P.badgetContents.notifications_count+=e})),C.getReset$().subscribe((function(e){console.log(e,"all"),P.badgetContents.notifications_count=e})),this.netWorkService.getNetWorkStatus(this)}return _createClass(e,[{key:"initializeDetection",value:function(){var e=this;this.multiTabDetection=new Gr.MultiTabDetection;var t=this;this.multiTabDetection.ExistingTabDetectedEvent.subscribe({next:function(){return Object(A.b)(e,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new Date,t.listOfEvents.push(n.toLocaleString()+" - Existing Tab Detected"),this.multiTabsOpened=!0,console.log(t.multiTabDetection.NumberOfTabsOpened+" tabs opened");case 2:case"end":return e.stop()}}),e,this)})))}}),this.multiTabDetection.NewTabDetectedEvent.subscribe({next:function(n){var o=new Date;e.hasInizialitedSys=!0,console.clear(),console.log(t.listOfEvents),t.listOfEvents.push(o.toLocaleString()+" - New Tab Detected. totalNumberOfTabsOpened = "+n)}}),setTimeout((function(){e.multiTabsOpened&&null!=e.tokenService.getTimerUUid()||e.sendTimerToServer({action:"in_system",start_date:R().format("YYYY-MM-DD HH:mm:ss"),context:"Entro al sistema"})}),1e3)}},{key:"sendTimerToServer",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.profileService.initTimer(e).subscribe((function(e){e.uuid&&localStorage.setItem(l.d.timer_uuid,e.uuid)}),(function(o){(n+=1)<=3&&t.sendTimerToServer(e,n)}))}},{key:"ngOnDestroy",value:function(){this.rxjsGlobal.unsubscribe()}},{key:"getDirectMessage",value:function(){var e=this;this.echo.private("channel-direct-message."+this.auth.uuid).listen("DirectNewMessageEvent",(function(t){console.log(t),e.toastR.info(t.response.message.message.subject,"Mensaje de "+(t.response.message.send?t.response.message.send.name:"")),e.messengerService.appendMessage(t.response.message)}))}},{key:"loadCarouselNotify",value:function(){var e=this;"1"==localStorage.getItem("new_login_notify")&&this.publicService.getNotificationGlobal().subscribe((function(t){return Object(A.b)(e,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("show"!=t.show){e.next=7;break}return localStorage.removeItem("new_login_notify"),e.next=4,this.modalCtrl.create({component:ca,cssClass:"modal-fullscreen",swipeToClose:!0,componentProps:{data:t.data}});case 4:return n=e.sent,e.next=7,n.present();case 7:case"end":return e.stop()}}),e,this)})))}),(function(e){}))}},{key:"ngOnInit",value:function(){return Object(A.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.checkLoginStatus(),this.listenForLoginEvents(),e.next=4,this.userData.getUser();case 4:this.auth=e.sent,this.getPermissionsMainMenu(),this.tourService.getTourOptions(),this.countNotificationsNoRead(),this.rxjsGlobal=this.panelSizeService.getSizePanel$().subscribe((function(e){return t.size_pane=e})),this.getDirectNotification(),this.getDirectMessage(),setTimeout((function(){t.loadCarouselNotify()}),1e3);case 12:case"end":return e.stop()}}),e,this)})))}},{key:"startLog",value:function(){}},{key:"getPermissionsMainMenu",value:function(){return Object(A.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,o,i,c,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storage.get(l.d.my_permissions);case 2:if(t=e.sent,Array.isArray(t)&&0!=t.length){n=_createForOfIteratorHelper(this.pagesContent);try{for(n.s();!(o=n.n()).done;)if(i=o.value,t.includes(i.permission)){i.show=!0,c=_createForOfIteratorHelper(i.items);try{for(c.s();!(r=c.n()).done;)a=r.value,t.includes(a.permission)&&(a.show=!0)}catch(s){c.e(s)}finally{c.f()}}}catch(s){n.e(s)}finally{n.f()}}else this.getMyPermissions();case 4:case"end":return e.stop()}}),e,this)})))}},{key:"getMyPermissions",value:function(){var e=this;this.profileService.getMyPermissions().subscribe((function(t){var n,o=_createForOfIteratorHelper(e.pagesContent);try{for(o.s();!(n=o.n()).done;){var i=n.value;if(t.data.includes(i.permission)){i.show=!0;var c,r=_createForOfIteratorHelper(i.items);try{for(r.s();!(c=r.n()).done;){var a=c.value;t.data.includes(a.permission)&&(a.show=!0)}}catch(s){r.e(s)}finally{r.f()}}}}catch(s){o.e(s)}finally{o.f()}e.storage.set(l.d.my_permissions,t.data)}))}},{key:"listenChannelPrivate",value:function(){}},{key:"getDirectNotification",value:function(){var e=this;this.echo.private("channel-direct-notification."+this.auth.uuid).listen("DirectNotifyEvent",(function(t){return Object(A.b)(e,void 0,void 0,regeneratorRuntime.mark((function e(){var n,o,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),!t.response||!t.response.data){e.next=6;break}return n=t.response.data,e.next=4,this.toastCtrl.create({message:n.title,duration:7e3,color:"primary",buttons:[{text:"Ver",handler:function(){i.router.navigateByUrl(n.route),i.addOrSubNotificationService.send(-1)}}]});case 4:o=e.sent,this.addOrSubNotificationService.send(1),o.present();case 6:case"end":return e.stop()}}),e,this)})))}))}},{key:"initializeApp",value:function(){var e=this;this.platform.ready().then((function(){e.statusBar.styleDefault(),e.splashScreen.hide()}))}},{key:"checkLoginStatus",value:function(){var e=this;return this.userData.isLoggedIn().then((function(t){return e.updateLoggedInStatus(t)}))}},{key:"updateLoggedInStatus",value:function(e){var t=this;setTimeout((function(){t.loggedIn=e}),300)}},{key:"listenForLoginEvents",value:function(){var e=this;window.addEventListener("user:login",(function(){e.updateLoggedInStatus(!0)})),window.addEventListener("user:signup",(function(){e.updateLoggedInStatus(!0)})),window.addEventListener("user:logout",(function(){e.updateLoggedInStatus(!1)}))}},{key:"logout",value:function(){this.userData.logout()}},{key:"showNotifications",value:function(){return Object(A.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalCtrl.create({component:$i.a,cssClass:"modal-fullscreen",swipeToClose:!0,presentingElement:this.routerOutlet.nativeEl,componentProps:{}});case 2:return t=e.sent,e.next=5,t.present();case 5:return e.next=7,t.onWillDismiss();case 7:if(n=e.sent,o=n.data)switch(o.action){case"open-message":console.log(o),this.showMessages(o.uuid)}case 10:case"end":return e.stop()}}),e,this)})))}},{key:"showMessages",value:function(e){return Object(A.b)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.modalCtrl.create({component:Xr,cssClass:"modal-fullscreen",swipeToClose:!0,presentingElement:this.routerOutlet.nativeEl,componentProps:{show_id:e}});case 2:return n=t.sent,t.next=5,n.present();case 5:case"end":return t.stop()}}),t,this)})))}},{key:"countNotificationsNoRead",value:function(){return Object(A.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.profileService.countNotificationsNoRead().subscribe((function(e){t.badgetContents.notifications_count=e.data.count}));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"openTutorial",value:function(){this.menu.enable(!1),this.storage.set("ion_did_tutorial",!1),this.router.navigateByUrl("/tutorial")}},{key:"toggleButton",value:function(){this.dark=!this.dark,this.darkService.changeDarkMode(this.dark)}}]),e}()).\u0275fac=function(e){return new(e||_a)(b.ac(r.Cb),b.ac(r.Hb),b.ac(a.f),b.ac(ji.a),b.ac(Bi.a),b.ac(la.b),b.ac(Di.a),b.ac(ua.b),b.ac(r.Nb),b.ac(m.e),b.ac(Ui.a),b.ac(g.a),b.ac(r.fb),b.ac(r.Db),b.ac(we.a),b.ac(Me.a),b.ac(Ni.a),b.ac(Tn.b),b.ac(Vi),b.ac(Qr.a),b.ac(Oe.a),b.ac(sa),b.ac(Le.a))},_a.\u0275cmp=b.Ub({type:_a,selectors:[["app-main-menu"]],decls:6,vars:4,consts:[["contentId","main-content",3,"when"],["contentId","main-content",1,"scrollbar"],[3,"scrollbar"],[2,"width","70%","margin","0 auto",3,"src"],[4,"ngFor","ngForOf"],["id","main-content"],["lines","none",4,"ngIf"],["lines","none"],["autoHide","false",4,"ngIf"],["autoHide","false"],["routerLinkActive","selected","routerDirection","root","detail","false",3,"routerLink",4,"ngIf"],["button","","detail","false",3,"click",4,"ngIf"],["routerLinkActive","selected","routerDirection","root","detail","false",3,"routerLink"],["slot","start",3,"name"],["color","danger",4,"ngIf"],["color","danger"],["button","","detail","false",3,"click"]],template:function(e,t){1&e&&(b.gc(0,"ion-split-pane",0),b.gc(1,"ion-menu",1),b.gc(2,"ion-content",2),b.bc(3,"ion-img",3),b.cd(4,va,2,1,"ng-container",4),b.fc(),b.fc(),b.bc(5,"ion-router-outlet",5),b.fc()),2&e&&(b.Ac("when",t.size_pane),b.Lb(2),b.Bc("scrollbar",t.scrollbarStyle),b.Lb(1),b.Ac("src","/assets/img/puente-digital.png"),b.Lb(1),b.Ac("ngForOf",t.pagesContent))},directives:[r.qb,r.Q,r.u,h.b,r.D,i.s,r.fb,i.t,r.O,r.P,r.S,r.H,a.h,r.Kb,a.g,r.C,r.N,r.j],pipes:[m.d],styles:["[_ngcontent-%COMP%]:root, ion-menu[_ngcontent-%COMP%]{--side-max-width:50px}.scroll-type-1[_ngcontent-%COMP%]::-webkit-scrollbar{width:1px}.scroll-type-1[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#fff}.scroll-type-1[_ngcontent-%COMP%]::-webkit-scrollbar-track:hover{background:#f7f7f7}.scroll-type-1[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ccc}.scroll-type-1[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#888}.inner-scroll[_ngcontent-%COMP%]{scrollbar-width:thin}"]}),_a),La=[{path:"main",component:Sa,children:[{path:"my-books",component:oe},{path:"my-books/:library_id",component:oe},{path:"pin-active",component:L},{path:"library",component:ye},{path:"library/book/:library_id",component:oe},{path:"visor/:book_id/:part_id",component:qo},{path:"visor/:book_id/:page_id/:token",component:qo},{path:"courses",component:Fi,runGuardsAndResolvers:"always"},{path:"visor/:book_id",component:qo},{path:"course",loadChildren:function(){return n.e(4).then(n.bind(null,"+J/j")).then((function(e){return e.CoursePanelPageModule}))}},{path:"reports",loadChildren:function(){return n.e(5).then(n.bind(null,"g37K")).then((function(e){return e.MainReportsPageModule}))}},{path:"account",children:[{path:"",loadChildren:function(){return n.e(16).then(n.bind(null,"f1Ab")).then((function(e){return e.AccountModule}))}}]},{path:"",redirectTo:"/app/main/my-books",pathMatch:"full"}]}],Aa=((ya=function e(){_classCallCheck(this,e)}).\u0275mod=b.Yb({type:ya}),ya.\u0275inj=b.Xb({factory:function(e){return new(e||ya)},imports:[[a.j.forChild(La)],a.j]}),ya),Ia=((ka=function(){function e(t){_classCallCheck(this,e),this.popoverCtrl=t}return _createClass(e,[{key:"support",value:function(){this.popoverCtrl.dismiss()}},{key:"close",value:function(e){window.open(e,"_blank"),this.popoverCtrl.dismiss()}}]),e}()).\u0275fac=function(e){return new(e||ka)(b.ac(r.Ib))},ka.\u0275cmp=b.Ub({type:ka,selectors:[["ng-component"]],decls:16,vars:0,consts:[["button","",3,"click"]],template:function(e,t){1&e&&(b.gc(0,"ion-list"),b.gc(1,"ion-item",0),b.oc("click",(function(){return t.close("https://ionicframework.com/getting-started")})),b.gc(2,"ion-label"),b.ed(3,"Learn Ionic"),b.fc(),b.fc(),b.gc(4,"ion-item",0),b.oc("click",(function(){return t.close("https://ionicframework.com/docs/")})),b.gc(5,"ion-label"),b.ed(6,"Documentation"),b.fc(),b.fc(),b.gc(7,"ion-item",0),b.oc("click",(function(){return t.close("https://showcase.ionicframework.com")})),b.gc(8,"ion-label"),b.ed(9,"Showcase"),b.fc(),b.fc(),b.gc(10,"ion-item",0),b.oc("click",(function(){return t.close("https://github.com/ionic-team/ionic")})),b.gc(11,"ion-label"),b.ed(12,"GitHub Repo"),b.fc(),b.fc(),b.gc(13,"ion-item",0),b.oc("click",(function(){return t.support()})),b.gc(14,"ion-label"),b.ed(15,"Support"),b.fc(),b.fc(),b.fc())},directives:[r.O,r.H,r.N],encapsulation:2}),ka),Ta=function(){return{opacity:"1"}},Ra=((Ca=function(){function e(t){_classCallCheck(this,e),this.popoverCtrl=t,this.location="madison",this.conferenceDate="2047-05-17",this.selectOptions={header:"Select a Location"}}return _createClass(e,[{key:"presentPopover",value:function(e){return Object(A.b)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.popoverCtrl.create({component:Ia,event:e});case 2:return n=t.sent,t.next=5,n.present();case 5:case"end":return t.stop()}}),t,this)})))}}]),e}()).\u0275fac=function(e){return new(e||Ca)(b.ac(r.Ib))},Ca.\u0275cmp=b.Ub({type:Ca,selectors:[["page-about"]],decls:52,vars:19,consts:[[1,"ion-no-border"],["slot","start"],["slot","end"],[3,"click"],["slot","icon-only","ios","ellipsis-horizontal","md","ellipsis-vertical"],[1,"about-header"],[1,"about-image","madison",3,"ngStyle"],[1,"about-image","austin",3,"ngStyle"],[1,"about-image","chicago",3,"ngStyle"],[1,"about-image","seattle",3,"ngStyle"],[1,"about-info"],[1,"ion-padding-top","ion-padding-start"],[1,"ion-padding-start","ion-padding-end"],["lines","none"],[3,"ngModel","interfaceOptions","ngModelChange"],["value","madison"],["value","austin"],["value","chicago"],["value","seattle"],["displayFormat","MMM DD, YYYY","max","2056",3,"ngModel","ngModelChange"],[1,"ion-text-end"]],template:function(e,t){1&e&&(b.gc(0,"ion-content"),b.gc(1,"ion-header",0),b.gc(2,"ion-toolbar"),b.gc(3,"ion-buttons",1),b.bc(4,"ion-menu-button"),b.fc(),b.gc(5,"ion-buttons",2),b.gc(6,"ion-button",3),b.oc("click",(function(e){return t.presentPopover(e)})),b.bc(7,"ion-icon",4),b.fc(),b.fc(),b.fc(),b.fc(),b.gc(8,"div",5),b.bc(9,"div",6),b.bc(10,"div",7),b.bc(11,"div",8),b.bc(12,"div",9),b.fc(),b.gc(13,"div",10),b.gc(14,"h3",11),b.ed(15,"About"),b.fc(),b.gc(16,"p",12),b.ed(17),b.tc(18,"date"),b.fc(),b.gc(19,"h3",11),b.ed(20,"Details"),b.fc(),b.gc(21,"ion-list",13),b.gc(22,"ion-item"),b.gc(23,"ion-label"),b.ed(24," Location "),b.fc(),b.gc(25,"ion-select",14),b.oc("ngModelChange",(function(e){return t.location=e})),b.gc(26,"ion-select-option",15),b.ed(27,"Madison, WI"),b.fc(),b.gc(28,"ion-select-option",16),b.ed(29,"Austin, TX"),b.fc(),b.gc(30,"ion-select-option",17),b.ed(31,"Chicago, IL"),b.fc(),b.gc(32,"ion-select-option",18),b.ed(33,"Seattle, WA"),b.fc(),b.fc(),b.fc(),b.gc(34,"ion-item"),b.gc(35,"ion-label"),b.ed(36," Date "),b.fc(),b.gc(37,"ion-datetime",19),b.oc("ngModelChange",(function(e){return t.conferenceDate=e})),b.fc(),b.fc(),b.fc(),b.gc(38,"h3",11),b.ed(39,"Internet"),b.fc(),b.gc(40,"ion-list",13),b.gc(41,"ion-item"),b.gc(42,"ion-label"),b.ed(43," Wifi network "),b.fc(),b.gc(44,"ion-label",20),b.ed(45),b.tc(46,"date"),b.fc(),b.fc(),b.gc(47,"ion-item"),b.gc(48,"ion-label"),b.ed(49," Password "),b.fc(),b.gc(50,"ion-label",20),b.ed(51," makegoodthings "),b.fc(),b.fc(),b.fc(),b.fc(),b.fc()),2&e&&(b.Lb(9),b.Ac("ngStyle","madison"===t.location&&b.Ec(15,Ta)),b.Lb(1),b.Ac("ngStyle","austin"===t.location&&b.Ec(16,Ta)),b.Lb(1),b.Ac("ngStyle","chicago"===t.location&&b.Ec(17,Ta)),b.Lb(1),b.Ac("ngStyle","seattle"===t.location&&b.Ec(18,Ta)),b.Lb(5),b.gd(" The Ionic Conference is a one-day conference on ",b.vc(18,9,t.conferenceDate,"mediumDate")," featuring talks from the Ionic team. It is focused on Ionic applications being built with Ionic Framework. This includes migrating apps to the latest version of the framework, Angular concepts, Webpack, Sass, and many other technologies used in Ionic 2. Tickets are completely sold out, and we\u2019re expecting more than 1000 developers \u2013 making this the largest Ionic conference ever! "),b.Lb(8),b.Ac("ngModel",t.location)("interfaceOptions",t.selectOptions),b.Lb(12),b.Ac("ngModel",t.conferenceDate),b.Lb(8),b.gd(" ica",b.vc(46,12,t.conferenceDate,"y")," "))},directives:[r.u,r.B,r.zb,r.l,r.R,r.k,r.C,i.w,r.O,r.H,r.N,r.kb,r.Lb,c.r,c.u,r.lb,r.v],pipes:[i.f],styles:["ion-toolbar[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;--background:transparent}ion-toolbar[_ngcontent-%COMP%], ion-toolbar[_ngcontent-%COMP%]   ion-back-button[_ngcontent-%COMP%], ion-toolbar[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%], ion-toolbar[_ngcontent-%COMP%]   ion-menu-button[_ngcontent-%COMP%]{--color:#fff}.about-header[_ngcontent-%COMP%]{position:relative;width:100%;height:30%}.about-header[_ngcontent-%COMP%]   .about-image[_ngcontent-%COMP%]{position:absolute;top:0;left:0;bottom:0;right:0;background-position:50%;background-size:cover;background-repeat:no-repeat;opacity:0;transition:opacity .5s ease-in-out}.about-header[_ngcontent-%COMP%]   .madison[_ngcontent-%COMP%]{background-image:url(/assets/img/about/madison.jpg)}.about-header[_ngcontent-%COMP%]   .austin[_ngcontent-%COMP%]{background-image:url(/assets/img/about/austin.jpg)}.about-header[_ngcontent-%COMP%]   .chicago[_ngcontent-%COMP%]{background-image:url(/assets/img/about/chicago.jpg)}.about-header[_ngcontent-%COMP%]   .seattle[_ngcontent-%COMP%]{background-image:url(/assets/img/about/seattle.jpg)}.about-info[_ngcontent-%COMP%]{position:absolute;margin-top:-10px;border-radius:10px;background:var(--ion-background-color,#fff)}.about-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0}.about-info[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{padding-top:0}.about-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:130%;color:var(--ion-color-dark)}.about-info[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{-webkit-margin-end:32px;margin-inline-end:32px}.ios[_ngcontent-%COMP%]   .about-info[_ngcontent-%COMP%]{--ion-padding:19px}.ios[_ngcontent-%COMP%]   .about-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:700}"]}),Ca),za=[{path:"",component:Ra}],Ea=((wa=function e(){_classCallCheck(this,e)}).\u0275mod=b.Yb({type:wa}),wa.\u0275inj=b.Xb({factory:function(e){return new(e||wa)},imports:[[a.j.forChild(za)],a.j]}),wa),Fa=((xa=function e(){_classCallCheck(this,e)}).\u0275mod=b.Yb({type:xa,bootstrap:[Ra]}),xa.\u0275inj=b.Xb({factory:function(e){return new(e||xa)},imports:[[i.c,c.l,r.Bb,Ea]]}),xa),ja=n("1I5t"),Ba=[{elementType:"geometry",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.fill",stylers:[{color:"#746855"}]},{elementType:"labels.text.stroke",stylers:[{color:"#242f3e"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#263c3f"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#6b9a76"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#38414e"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{color:"#212a37"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#9ca5b3"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#746855"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#1f2835"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#f3d19c"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#2f3948"}]},{featureType:"transit.station",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#17263c"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#515c6d"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{color:"#17263c"}]}],Da=["mapCanvas"],Ua=[{path:"",component:(Oa=function(){function e(t,n,o){_classCallCheck(this,e),this.doc=t,this.confData=n,this.platform=o}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ngAfterViewInit",value:function(){return Object(A.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,o,i,c,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.doc.querySelector("ion-app"),n=!1,o=[],t.classList.contains("dark-theme")&&(o=Ba),e.next=5,function(e){var t=window,n=t.google;return n&&n.maps?Promise.resolve(n.maps):new Promise((function(e,n){var o=document.createElement("script");o.src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY_HERE&v=3.31",o.async=!0,o.defer=!0,document.body.appendChild(o),o.onload=function(){var o=t.google;o&&o.maps?e(o.maps):n("google maps not available")}}))}();case 5:i=e.sent,this.confData.getMap().subscribe((function(e){var t=r.mapElement.nativeElement;c=new i.Map(t,{center:e.find((function(e){return e.center})),zoom:16,styles:o}),e.forEach((function(e){var t=new i.InfoWindow({content:"<h5>".concat(e.name,"</h5>")}),n=new i.Marker({position:e,map:c,title:e.name});n.addListener("click",(function(){t.open(c,n)}))})),i.event.addListenerOnce(c,"idle",(function(){t.classList.add("show-map")}))})),new MutationObserver((function(e){e.forEach((function(e){"class"===e.attributeName&&(n=e.target.classList.contains("dark-theme"),c&&n?c.setOptions({styles:Ba}):c&&c.setOptions({styles:[]}))}))})).observe(t,{attributes:!0});case 7:case"end":return e.stop()}}),e,this)})))}}]),e}(),Oa.\u0275fac=function(e){return new(e||Oa)(b.ac(i.e),b.ac(ja.a),b.ac(r.Hb))},Oa.\u0275cmp=b.Ub({type:Oa,selectors:[["page-map"]],viewQuery:function(e,t){var n;1&e&&b.Zc(Da,!0),2&e&&b.Nc(n=b.pc())&&(t.mapElement=n.first)},decls:9,vars:0,consts:[["slot","start"],[1,"map-canvas"],["mapCanvas",""]],template:function(e,t){1&e&&(b.gc(0,"ion-header"),b.gc(1,"ion-toolbar"),b.gc(2,"ion-buttons",0),b.bc(3,"ion-menu-button"),b.fc(),b.gc(4,"ion-title"),b.ed(5,"Map"),b.fc(),b.fc(),b.fc(),b.gc(6,"ion-content"),b.bc(7,"div",1,2),b.fc())},directives:[r.B,r.zb,r.l,r.R,r.xb,r.u],styles:[".map-canvas[_ngcontent-%COMP%]{position:absolute;height:100%;width:100%;background-color:transparent;opacity:0;transition:opacity .15s ease-in}.show-map[_ngcontent-%COMP%]{opacity:1}"]}),Oa)}],$a=((Ma=function e(){_classCallCheck(this,e)}).\u0275mod=b.Yb({type:Ma}),Ma.\u0275inj=b.Xb({factory:function(e){return new(e||Ma)},imports:[[a.j.forChild(Ua)],a.j]}),Ma),Na=((Pa=function e(){_classCallCheck(this,e)}).\u0275mod=b.Yb({type:Pa}),Pa.\u0275inj=b.Xb({factory:function(e){return new(e||Pa)},imports:[[i.c,r.Bb,$a]]}),Pa),qa=n("9B/o");function Ha(e,t){if(1&e){var n=b.hc();b.gc(0,"ion-buttons",14),b.gc(1,"ion-button",15),b.oc("click",(function(){b.Sc(n);var e=b.sc();return e.openContact(e.speaker)})),b.bc(2,"ion-icon",16),b.fc(),b.gc(3,"ion-button",15),b.oc("click",(function(){b.Sc(n);var e=b.sc();return e.openSpeakerShare(e.speaker)})),b.bc(4,"ion-icon",17),b.fc(),b.fc()}}var Va,Ya,Xa,Qa=[{path:"",component:(Va=function(){function e(t,n,o,i,c){_classCallCheck(this,e),this.dataProvider=t,this.route=n,this.actionSheetCtrl=o,this.confData=i,this.inAppBrowser=c}return _createClass(e,[{key:"ionViewWillEnter",value:function(){var e=this;this.dataProvider.load().subscribe((function(t){var n=e.route.snapshot.paramMap.get("speakerId");if(t&&t.speakers){var o,i=_createForOfIteratorHelper(t.speakers);try{for(i.s();!(o=i.n()).done;){var c=o.value;if(c&&c.id===n){e.speaker=c;break}}}catch(r){i.e(r)}finally{i.f()}}}))}},{key:"openExternalUrl",value:function(e){this.inAppBrowser.create(e,"_blank")}},{key:"openSpeakerShare",value:function(e){return Object(A.b)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.actionSheetCtrl.create({header:"Share "+e.name,buttons:[{text:"Copy Link",handler:function(){console.log("Copy link clicked on https://twitter.com/"+e.twitter),window.cordova&&window.cordova.plugins.clipboard&&window.cordova.plugins.clipboard.copy("https://twitter.com/"+e.twitter)}},{text:"Share via ..."},{text:"Cancel",role:"cancel"}]});case 2:return n=t.sent,t.next=5,n.present();case 5:case"end":return t.stop()}}),t,this)})))}},{key:"openContact",value:function(e){return Object(A.b)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.actionSheetCtrl.create({header:"Contact "+e.name,buttons:[{text:"Email ( ".concat(e.email," )"),icon:null,handler:function(){window.open("mailto:"+e.email)}},{text:"Call ( ".concat(e.phone," )"),icon:null,handler:function(){window.open("tel:"+e.phone)}},{text:"Cancel",role:"cancel"}]});case 2:return n=t.sent,t.next=5,n.present();case 5:case"end":return t.stop()}}),t,this)})))}}]),e}(),Va.\u0275fac=function(e){return new(e||Va)(b.ac(ja.a),b.ac(a.a),b.ac(r.a),b.ac(ja.a),b.ac(qa.a))},Va.\u0275cmp=b.Ub({type:Va,selectors:[["page-speaker-detail"]],decls:26,vars:5,consts:[[1,"speaker-detail"],[1,"ion-no-border"],["slot","start"],["defaultHref","/app/main/speakers"],["slot","end",4,"ngIf"],[1,"speaker-background"],[3,"src","alt"],[1,"ion-padding","speaker-detail"],["color","twitter","button","",3,"click"],["name","logo-twitter"],["color","dark","button","",3,"click"],["name","logo-github"],["color","instagram","button","",3,"click"],["name","logo-instagram"],["slot","end"],[3,"click"],["slot","icon-only","ios","call-outline","md","call-sharp"],["slot","icon-only","ios","share-outline","md","share-sharp"]],template:function(e,t){1&e&&(b.gc(0,"ion-content",0),b.gc(1,"ion-header",1),b.gc(2,"ion-toolbar"),b.gc(3,"ion-buttons",2),b.bc(4,"ion-back-button",3),b.fc(),b.cd(5,Ha,5,0,"ion-buttons",4),b.fc(),b.fc(),b.gc(6,"div",5),b.bc(7,"img",6),b.gc(8,"h2"),b.ed(9),b.fc(),b.fc(),b.gc(10,"div",7),b.gc(11,"p"),b.ed(12),b.fc(),b.bc(13,"hr"),b.gc(14,"ion-chip",8),b.oc("click",(function(){return t.openExternalUrl("https://twitter.com/"+t.speaker.twitter)})),b.bc(15,"ion-icon",9),b.gc(16,"ion-label"),b.ed(17,"Twitter"),b.fc(),b.fc(),b.gc(18,"ion-chip",10),b.oc("click",(function(){return t.openExternalUrl("https://github.com/ionic-team/ionic")})),b.bc(19,"ion-icon",11),b.gc(20,"ion-label"),b.ed(21,"GitHub"),b.fc(),b.fc(),b.gc(22,"ion-chip",12),b.oc("click",(function(){return t.openExternalUrl("https://instagram.com/ionicframework")})),b.bc(23,"ion-icon",13),b.gc(24,"ion-label"),b.ed(25,"Instagram"),b.fc(),b.fc(),b.fc(),b.fc()),2&e&&(b.Lb(5),b.Ac("ngIf",t.speaker),b.Lb(2),b.Ac("src",null==t.speaker?null:t.speaker.profilePic,b.Vc)("alt",null==t.speaker?null:t.speaker.name),b.Lb(2),b.fd(null==t.speaker?null:t.speaker.name),b.Lb(3),b.gd("",null==t.speaker?null:t.speaker.about," Say hello on social media!"))},directives:[r.u,r.B,r.zb,r.l,r.g,r.h,i.t,r.s,r.C,r.N,r.k],styles:["ion-toolbar[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;--background:transparent}ion-toolbar[_ngcontent-%COMP%], ion-toolbar[_ngcontent-%COMP%]   ion-back-button[_ngcontent-%COMP%], ion-toolbar[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%], ion-toolbar[_ngcontent-%COMP%]   ion-menu-button[_ngcontent-%COMP%]{--color:#fff}.speaker-background[_ngcontent-%COMP%]{position:relative;display:flex;padding-top:var(--ion-safe-area-top);align-items:center;justify-content:center;flex-direction:column;height:calc(250px + var(--ion-safe-area-top));background:50%/cover url(/assets/img/speaker-background.png) no-repeat}.speaker-background[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:70px;border-radius:50%;margin-top:calc(var(--ion-safe-area-top)*-1)}.speaker-background[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{position:absolute;bottom:10px;color:#fff}.md[_ngcontent-%COMP%]   .speaker-background[_ngcontent-%COMP%]{box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.ios[_ngcontent-%COMP%]   .speaker-background[_ngcontent-%COMP%]{box-shadow:0 4px 16px rgba(0,0,0,.12)}.speaker-detail[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-left:6px;margin-right:6px}.speaker-detail[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:20px;background:var(--ion-color-step-150,#d7d8da)}"]}),Va)}],Ga=((Xa=function e(){_classCallCheck(this,e)}).\u0275mod=b.Yb({type:Xa}),Xa.\u0275inj=b.Xb({factory:function(e){return new(e||Xa)},imports:[[a.j.forChild(Qa)],a.j]}),Xa),Wa=((Ya=function e(){_classCallCheck(this,e)}).\u0275mod=b.Yb({type:Ya}),Ya.\u0275inj=b.Xb({factory:function(e){return new(e||Ya)},imports:[[i.c,r.Bb,Ga]]}),Ya);function Ka(e,t){1&e&&b.bc(0,"ion-icon",11)}function Za(e,t){1&e&&b.bc(0,"ion-icon",12)}function Ja(e,t){if(1&e&&(b.gc(0,"span"),b.ed(1),b.fc()),2&e){var n=t.$implicit;b.Ob("session-track-"+n.toLowerCase()),b.Lb(1),b.fd(n)}}function es(e,t){if(1&e&&(b.gc(0,"div",13),b.gc(1,"h1"),b.ed(2),b.fc(),b.cd(3,Ja,2,3,"span",14),b.gc(4,"p"),b.ed(5),b.fc(),b.gc(6,"ion-text",15),b.ed(7),b.bc(8,"br"),b.ed(9),b.fc(),b.fc()),2&e){var n=b.sc();b.Lb(2),b.fd(n.session.name),b.Lb(1),b.Ac("ngForOf",null==n.session?null:n.session.tracks),b.Lb(2),b.fd(n.session.description),b.Lb(2),b.hd(" ",n.session.timeStart," \u2013 ",n.session.timeEnd," "),b.Lb(2),b.gd(" ",n.session.location," ")}}var ts,ns,os,is,cs=[{path:"",component:(ts=function(){function e(t,n,o){_classCallCheck(this,e),this.dataProvider=t,this.userProvider=n,this.route=o,this.isFavorite=!1,this.defaultHref=""}return _createClass(e,[{key:"ionViewWillEnter",value:function(){var e=this;this.dataProvider.load().subscribe((function(t){if(t&&t.schedule&&t.schedule[0]&&t.schedule[0].groups){var n,o=e.route.snapshot.paramMap.get("sessionId"),i=_createForOfIteratorHelper(t.schedule[0].groups);try{for(i.s();!(n=i.n()).done;){var c=n.value;if(c&&c.sessions){var r,a=_createForOfIteratorHelper(c.sessions);try{for(a.s();!(r=a.n()).done;){var s=r.value;if(s&&s.id===o){e.session=s,e.isFavorite=e.userProvider.hasFavorite(e.session.name);break}}}catch(l){a.e(l)}finally{a.f()}}}}catch(l){i.e(l)}finally{i.f()}}}))}},{key:"ionViewDidEnter",value:function(){this.defaultHref="/app/main/schedule"}},{key:"sessionClick",value:function(e){console.log("Clicked",e)}},{key:"toggleFavorite",value:function(){this.userProvider.hasFavorite(this.session.name)?(this.userProvider.removeFavorite(this.session.name),this.isFavorite=!1):(this.userProvider.addFavorite(this.session.name),this.isFavorite=!0)}},{key:"shareSession",value:function(){console.log("Clicked share session")}}]),e}(),ts.\u0275fac=function(e){return new(e||ts)(b.ac(ja.a),b.ac(Di.a),b.ac(a.a))},ts.\u0275cmp=b.Ub({type:ts,selectors:[["page-session-detail"]],decls:29,vars:4,consts:[["slot","start"],[3,"defaultHref"],["slot","end"],[3,"click"],["slot","icon-only","name","star-outline",4,"ngIf"],["slot","icon-only","name","star",4,"ngIf"],["slot","icon-only","name","share"],["class","ion-padding",4,"ngIf"],["button","",3,"click"],["color","primary"],["slot","end","color","primary","size","small","name","cloud-download"],["slot","icon-only","name","star-outline"],["slot","icon-only","name","star"],[1,"ion-padding"],[3,"class",4,"ngFor","ngForOf"],["color","medium"]],template:function(e,t){1&e&&(b.gc(0,"ion-header"),b.gc(1,"ion-toolbar"),b.gc(2,"ion-buttons",0),b.bc(3,"ion-back-button",1),b.fc(),b.gc(4,"ion-buttons",2),b.gc(5,"ion-button",3),b.oc("click",(function(){return t.toggleFavorite()})),b.cd(6,Ka,1,0,"ion-icon",4),b.cd(7,Za,1,0,"ion-icon",5),b.fc(),b.gc(8,"ion-button",3),b.oc("click",(function(){return t.shareSession()})),b.bc(9,"ion-icon",6),b.fc(),b.fc(),b.fc(),b.fc(),b.gc(10,"ion-content"),b.cd(11,es,10,6,"div",7),b.gc(12,"ion-list"),b.gc(13,"ion-item",8),b.oc("click",(function(){return t.sessionClick("watch")})),b.gc(14,"ion-label",9),b.ed(15,"Watch"),b.fc(),b.fc(),b.gc(16,"ion-item",8),b.oc("click",(function(){return t.sessionClick("add to calendar")})),b.gc(17,"ion-label",9),b.ed(18,"Add to Calendar"),b.fc(),b.fc(),b.gc(19,"ion-item",8),b.oc("click",(function(){return t.sessionClick("mark as unwatched")})),b.gc(20,"ion-label",9),b.ed(21,"Mark as Unwatched"),b.fc(),b.fc(),b.gc(22,"ion-item",8),b.oc("click",(function(){return t.sessionClick("download video")})),b.gc(23,"ion-label",9),b.ed(24,"Download Video"),b.fc(),b.bc(25,"ion-icon",10),b.fc(),b.gc(26,"ion-item",8),b.oc("click",(function(){return t.sessionClick("leave feedback")})),b.gc(27,"ion-label",9),b.ed(28,"Leave Feedback"),b.fc(),b.fc(),b.fc(),b.fc()),2&e&&(b.Lb(3),b.Ac("defaultHref",t.defaultHref),b.Lb(3),b.Ac("ngIf",!t.isFavorite),b.Lb(1),b.Ac("ngIf",t.isFavorite),b.Lb(4),b.Ac("ngIf",t.session))},directives:[r.B,r.zb,r.l,r.g,r.h,r.k,i.t,r.C,r.u,r.O,r.H,r.N,i.s,r.ub],styles:[".session-track-ionic[_ngcontent-%COMP%]{color:var(--ion-color-primary)}.session-track-angular[_ngcontent-%COMP%]{color:var(--ion-color-angular)}.session-track-communication[_ngcontent-%COMP%]{color:var(--ion-color-communication)}.session-track-tooling[_ngcontent-%COMP%]{color:var(--ion-color-tooling)}.session-track-services[_ngcontent-%COMP%]{color:var(--ion-color-services)}.session-track-design[_ngcontent-%COMP%]{color:var(--ion-color-design)}.session-track-workshop[_ngcontent-%COMP%]{color:var(--ion-color-workshop)}.session-track-food[_ngcontent-%COMP%]{color:var(--ion-color-food)}.session-track-documentation[_ngcontent-%COMP%]{color:var(--ion-color-documentation)}.session-track-navigation[_ngcontent-%COMP%]{color:var(--ion-color-navigation)}.show-favorite[_ngcontent-%COMP%]{position:relative}.icon-heart[_ngcontent-%COMP%], .icon-heart-empty[_ngcontent-%COMP%]{--border-radius:50%;--padding-start:0;--padding-end:0;position:absolute;top:5px;right:5px;width:48px;height:48px;font-size:16px;transition:transform .3s ease}.icon-heart-empty[_ngcontent-%COMP%]{transform:scale(1)}.icon-heart[_ngcontent-%COMP%]{transform:scale(0)}.show-favorite[_ngcontent-%COMP%]   .icon-heart[_ngcontent-%COMP%]{transform:scale(1)}.show-favorite[_ngcontent-%COMP%]   .icon-heart-empty[_ngcontent-%COMP%]{transform:scale(0)}h1[_ngcontent-%COMP%]{margin:0}"]}),ts)}],rs=((os=function e(){_classCallCheck(this,e)}).\u0275mod=b.Yb({type:os}),os.\u0275inj=b.Xb({factory:function(e){return new(e||os)},imports:[[a.j.forChild(cs)],a.j]}),os),as=((ns=function e(){_classCallCheck(this,e)}).\u0275mod=b.Yb({type:ns}),ns.\u0275inj=b.Xb({factory:function(e){return new(e||ns)},imports:[[i.c,r.Bb,rs]]}),ns),ss=n("H5xr"),ls=n("vvyD"),us=n("uD9u"),ds=n("iadO"),gs=n("3giC"),fs=n("nYnr"),ps=n("NITd"),bs=n("KQg/"),ms=n("hKmA"),hs=n("zTdJ"),vs=n("oNBn"),_s=n("qIrB"),ks=n("oAto"),ys=n("D7rP"),Cs=n("YQRf"),xs=n("CbmF"),ws=n("w0c1"),Os=n("wx9n"),Ps=n("cH1L"),Ms=n("vxfF"),Ss=n("Wp6s"),Ls=n("ihCf"),As=n("NFeN"),Is=n("+0xr"),Ts=n("M9IT"),Rs=n("0IaG"),zs=n("STbY"),Es=n("/1cH"),Fs=n("Dh3D"),js=n("QibW"),Bs=n("A5z7"),Ds=n("/t3+"),Us=n("MutI"),$s=n("f0Cb"),Ns=n("wZkO"),qs=n("Xa2L"),Hs=n("SNkt"),Vs=n("g31X"),Ys=((is=function e(){_classCallCheck(this,e)}).\u0275mod=b.Yb({type:is}),is.\u0275inj=b.Xb({factory:function(e){return new(e||is)},providers:[ds.g],imports:[[i.c,c.B,c.l,r.Bb,Aa,Fa,Na,as,Wa,m.c,h.a,ss.a,j.a,ls.a,Ce.g,yn.b,ds.g,tt.m,Je.b,Sc,Re.c,nt.U,Ge.e,We.c]]}),is);b.Wc(In.a,[i.q,i.r,i.s,i.t,i.A,i.w,i.x,i.y,i.z,i.u,i.v,c.H,c.w,c.G,c.c,c.x,c.A,c.a,c.D,c.E,c.z,c.r,c.s,c.C,c.n,c.m,c.y,c.b,c.d,c.h,c.j,c.i,c.k,c.e,c.u,c.v,c.t,r.e,r.f,r.g,r.i,r.j,r.k,r.l,r.m,r.n,r.o,r.p,r.q,r.r,r.s,r.t,r.u,r.v,r.w,r.x,r.y,r.z,r.A,r.B,r.C,r.D,r.E,r.F,r.G,r.H,r.I,r.J,r.K,r.L,r.M,r.N,r.O,r.P,r.Q,r.R,r.S,r.T,r.U,r.V,r.W,r.X,r.Y,r.Z,r.ab,r.bb,r.cb,r.db,r.eb,r.gb,r.hb,r.ib,r.jb,r.kb,r.lb,r.mb,r.nb,r.ob,r.pb,r.qb,r.rb,r.sb,r.ub,r.vb,r.wb,r.yb,r.zb,r.xb,r.tb,r.c,r.Gb,r.Jb,r.Lb,r.Mb,r.fb,r.h,r.Eb,r.Kb,r.Ob,r.Pb,r.Qb,r.Ab,a.k,a.g,a.i,a.h,a.m,m.a,h.b,ie.a,y.a,C.a,F.a,ci.a,ai.a,$i.a,fs.a,Ye.a,ps.a,bs.a,ms.a,hs.a,vs.a,_s.a,ks.a,E.a,ys.a,Cs.a,xs.a,zn.a,ws.a,Os.a,j.c,j.d,Ps.b,Ge.b,Ge.c,Ge.f,Ge.g,Ge.h,Ge.i,Ge.j,Ms.a,et.a,et.c,tt.o,tt.n,Ss.a,Ss.f,Ss.n,Ss.d,Ss.m,Ss.l,Ss.b,Ss.e,Ss.k,Ss.i,Ss.h,Ss.g,Ss.o,Ss.c,it.b,it.a,Ls.b,Ls.c,We.b,We.d,As.a,Is.n,Is.i,Is.k,Is.c,Is.b,Is.m,Is.e,Is.g,Is.h,Is.a,Is.d,Is.j,Is.l,Is.f,Is.p,Ts.a,ds.a,ds.b,ds.d,ds.e,ds.f,ds.h,ds.i,ds.j,ds.l,ds.k,ds.c,Ze.a,Ze.c,Ze.d,Ze.g,Ze.h,Ze.f,Ze.e,Rs.e,Rs.d,Rs.i,Rs.f,Rs.c,zs.e,zs.b,zs.d,zs.a,Es.a,Es.d,Es.c,Fs.a,Fs.b,Lc.a,Lc.c,k.a,k.c,js.b,js.a,Bs.d,Bs.a,Bs.c,Bs.e,Bs.b,Bs.f,Ds.a,Ds.c,Rn.a,Rn.b,Rn.c,Rn.d,Rn.e,Rn.f,Us.a,Us.h,Us.d,Us.b,tt.k,Us.c,Us.g,tt.r,Us.i,Us.f,$s.a,Te.a,Qe.a,Qe.j,Qe.b,Qe.d,Qe.e,Qe.h,Qe.i,Qe.c,Qe.f,Ns.c,Ns.d,Ns.a,Ns.f,Ns.e,Ns.b,qs.a,qs.c,Ce.e,Ce.f,Ce.a,Ce.b,Ce.d,Ce.c,yn.a,Je.a,Mc,Pc,Re.a,Re.o,Re.e,Re.d,Re.f,Re.g,Re.h,Re.i,Re.j,Re.k,Re.l,Re.m,Re.n,nt.a,nt.b,nt.c,nt.d,nt.e,nt.f,nt.g,nt.h,nt.i,nt.j,nt.k,nt.l,nt.m,nt.n,nt.o,nt.p,nt.q,nt.r,nt.s,nt.t,nt.u,nt.v,nt.w,nt.x,nt.y,nt.z,nt.A,nt.B,nt.C,nt.D,nt.E,nt.F,nt.G,nt.H,nt.I,nt.J,nt.K,nt.L,nt.M,nt.N,nt.O,nt.P,nt.Q,nt.R,nt.S,nt.T,nt.V,nt.W,nt.X,Sa,ye,oe,L,S,qo,Fi,oi,qe,z.a,Ci,Zo,us.a,T.a,En,kn,bn.a,In.a,An,fn,uc,Yi,Zc,Xr,Ar,gr,Ir,Dr,gs.a,ii.a,ca],[i.b,i.G,i.p,i.k,i.E,i.g,i.C,i.F,i.d,i.f,i.i,i.j,i.l,m.d,Hs.a,Vs.a,j.b])},gI9T:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("qCKp"),i=function(){function e(){this.NewTabDetectedEvent=new o.Subject,this.ExistingTabDetectedEvent=new o.Subject,this.ClosedTabDetectedEvent=new o.Subject,this.prefix="mtd-",this.initiatedNewTabMessage=!1,this.numberOfTabsOpened=1,this.newTabValue=null,this.addListener(),this.setNewTab(),this.initiatedNewTabMessage=!0}return Object.defineProperty(e.prototype,"NumberOfTabsOpened",{get:function(){return this.numberOfTabsOpened},enumerable:!0,configurable:!0}),e.prototype.addListener=function(){var e=this;window.addEventListener("storage",(function(t){t.key===e.newTabKey?(e.incrementNumberOfTabsOpened(),e.NewTabDetectedEvent.next(e.numberOfTabsOpened),e.setKey(e.existingTabKey)):t.key===e.existingTabKey?e.getLocalStorageValue(e.newTabKey)===e.newTabValue&&(e.initiatedNewTabMessage&&(e.initiatedNewTabMessage=!1,e.numberOfTabsOpened=1,e.ExistingTabDetectedEvent.next()),e.incrementNumberOfTabsOpened()):t.key===e.closingTabKey&&(e.decrementNumberOfTabsOpened(),e.ClosedTabDetectedEvent.next(e.numberOfTabsOpened))}),!1),window.addEventListener("beforeunload",(function(t){e.setKey(e.closingTabKey)}),!1)},e.prototype.setNewTab=function(){this.newTabValue=this.createUniqueValue(),this.setLocalStorageKeyValue(this.newTabKey,this.newTabValue)},Object.defineProperty(e.prototype,"newTabKey",{get:function(){return this.createUniqueKey("new-tab")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"existingTabKey",{get:function(){return this.createUniqueKey("existing-tab")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"closingTabKey",{get:function(){return this.createUniqueKey("closing-tab")},enumerable:!0,configurable:!0}),e.prototype.incrementNumberOfTabsOpened=function(){this.numberOfTabsOpened++},e.prototype.decrementNumberOfTabsOpened=function(){this.numberOfTabsOpened>0&&this.numberOfTabsOpened--},e.prototype.setKey=function(e){this.setLocalStorageKeyValue(e,this.createUniqueValue())},e.prototype.setLocalStorageKeyValue=function(e,t){window.localStorage.setItem(e,t)},e.prototype.getLocalStorageValue=function(e){return window.localStorage.getItem(e)},e.prototype.createUniqueKey=function(e){return""+this.prefix+e},e.prototype.createUniqueValue=function(){var e=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);return Date.now().toString()+e},e}();t.MultiTabDetection=i},qCKp:function(e,t,n){"use strict";n.r(t),n.d(t,"Observable",(function(){return i.a})),n.d(t,"ConnectableObservable",(function(){return c.a})),n.d(t,"GroupedObservable",(function(){return l})),n.d(t,"observable",(function(){return d.a})),n.d(t,"Subject",(function(){return s.a})),n.d(t,"BehaviorSubject",(function(){return g.a})),n.d(t,"ReplaySubject",(function(){return f.a})),n.d(t,"AsyncSubject",(function(){return p})),n.d(t,"asap",(function(){return b.a})),n.d(t,"asapScheduler",(function(){return b.b})),n.d(t,"async",(function(){return m.a})),n.d(t,"asyncScheduler",(function(){return m.b})),n.d(t,"queue",(function(){return h.a})),n.d(t,"queueScheduler",(function(){return h.b})),n.d(t,"animationFrame",(function(){return v.a})),n.d(t,"animationFrameScheduler",(function(){return v.b})),n.d(t,"VirtualTimeScheduler",(function(){return y})),n.d(t,"VirtualAction",(function(){return C})),n.d(t,"Scheduler",(function(){return x.a})),n.d(t,"Subscription",(function(){return a.a})),n.d(t,"Subscriber",(function(){return r.a})),n.d(t,"Notification",(function(){return w.a})),n.d(t,"NotificationKind",(function(){return w.b})),n.d(t,"pipe",(function(){return O.a})),n.d(t,"noop",(function(){return P.a})),n.d(t,"identity",(function(){return M.a})),n.d(t,"isObservable",(function(){return S.a})),n.d(t,"ArgumentOutOfRangeError",(function(){return L.a})),n.d(t,"EmptyError",(function(){return A.a})),n.d(t,"ObjectUnsubscribedError",(function(){return I.a})),n.d(t,"UnsubscriptionError",(function(){return T.a})),n.d(t,"TimeoutError",(function(){return R})),n.d(t,"bindCallback",(function(){return B})),n.d(t,"bindNodeCallback",(function(){return $})),n.d(t,"combineLatest",(function(){return V.a})),n.d(t,"concat",(function(){return Y.a})),n.d(t,"defer",(function(){return X.a})),n.d(t,"empty",(function(){return Q.b})),n.d(t,"forkJoin",(function(){return G.a})),n.d(t,"from",(function(){return W.a})),n.d(t,"fromEvent",(function(){return K.a})),n.d(t,"fromEventPattern",(function(){return J})),n.d(t,"generate",(function(){return ee})),n.d(t,"iif",(function(){return ne})),n.d(t,"interval",(function(){return oe.a})),n.d(t,"merge",(function(){return ie.a})),n.d(t,"never",(function(){return ce.b})),n.d(t,"of",(function(){return re.a})),n.d(t,"onErrorResumeNext",(function(){return ae})),n.d(t,"pairs",(function(){return se})),n.d(t,"partition",(function(){return fe})),n.d(t,"race",(function(){return he})),n.d(t,"range",(function(){return ke})),n.d(t,"throwError",(function(){return Ce.a})),n.d(t,"timer",(function(){return xe.a})),n.d(t,"using",(function(){return we})),n.d(t,"zip",(function(){return Me})),n.d(t,"scheduled",(function(){return Re.a})),n.d(t,"EMPTY",(function(){return Q.a})),n.d(t,"NEVER",(function(){return ce.a})),n.d(t,"config",(function(){return ze.a}));var o,i=n("HDdC"),c=n("EQ5u"),r=n("7o/Q"),a=n("quSY"),s=n("XNiG"),l=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,o,i){var c;return _classCallCheck(this,n),(c=t.call(this)).key=e,c.groupSubject=o,c.refCountSubscription=i,c}return _createClass(n,[{key:"_subscribe",value:function(e){var t=new a.a,n=this.refCountSubscription,o=this.groupSubject;return n&&!n.closed&&t.add(new u(n)),t.add(o.subscribe(e)),t}}]),n}(i.a),u=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var o;return _classCallCheck(this,n),(o=t.call(this)).parent=e,e.count++,o}return _createClass(n,[{key:"unsubscribe",value:function(){var e=this.parent;e.closed||this.closed||(_get(_getPrototypeOf(n.prototype),"unsubscribe",this).call(this),e.count-=1,0===e.count&&e.attemptedToUnsubscribe&&e.unsubscribe())}}]),n}(a.a),d=n("kJWO"),g=n("2Vo4"),f=n("jtHE"),p=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.apply(this,arguments)).value=null,e.hasNext=!1,e.hasCompleted=!1,e}return _createClass(n,[{key:"_subscribe",value:function(e){return this.hasError?(e.error(this.thrownError),a.a.EMPTY):this.hasCompleted&&this.hasNext?(e.next(this.value),e.complete(),a.a.EMPTY):_get(_getPrototypeOf(n.prototype),"_subscribe",this).call(this,e)}},{key:"next",value:function(e){this.hasCompleted||(this.value=e,this.hasNext=!0)}},{key:"error",value:function(e){this.hasCompleted||_get(_getPrototypeOf(n.prototype),"error",this).call(this,e)}},{key:"complete",value:function(){this.hasCompleted=!0,this.hasNext&&_get(_getPrototypeOf(n.prototype),"next",this).call(this,this.value),_get(_getPrototypeOf(n.prototype),"complete",this).call(this)}}]),n}(s.a),b=n("7Hc7"),m=n("D0XW"),h=n("qgXg"),v=n("eNwd"),_=n("3N8a"),k=n("IjjT"),y=((o=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY;return _classCallCheck(this,n),(e=t.call(this,o,(function(){return e.frame}))).maxFrames=i,e.frame=0,e.index=-1,e}return _createClass(n,[{key:"flush",value:function(){for(var e,t,n=this.actions,o=this.maxFrames;(t=n[0])&&t.delay<=o&&(n.shift(),this.frame=t.delay,!(e=t.execute(t.state,t.delay))););if(e){for(;t=n.shift();)t.unsubscribe();throw e}}}]),n}(k.a)).frameTimeFactor=10,o),C=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,o){var i,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.index+=1;return _classCallCheck(this,n),(i=t.call(this,e,o)).scheduler=e,i.work=o,i.index=c,i.active=!0,i.index=e.index=c,i}return _createClass(n,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!this.id)return _get(_getPrototypeOf(n.prototype),"schedule",this).call(this,e,t);this.active=!1;var o=new n(this.scheduler,this.work);return this.add(o),o.schedule(e,t)}},{key:"requestAsyncId",value:function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.delay=e.frame+o;var i=e.actions;return i.push(this),i.sort(n.sortActions),!0}},{key:"recycleAsyncId",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2]}},{key:"_execute",value:function(e,t){if(!0===this.active)return _get(_getPrototypeOf(n.prototype),"_execute",this).call(this,e,t)}}],[{key:"sortActions",value:function(e,t){return e.delay===t.delay?e.index===t.index?0:e.index>t.index?1:-1:e.delay>t.delay?1:-1}}]),n}(_.a),x=n("Y/cZ"),w=n("WMd4"),O=n("mCNh"),P=n("KqfI"),M=n("SpAZ"),S=n("7+OI"),L=n("4I5i"),A=n("sVev"),I=n("9ppp"),T=n("pjAE"),R=function(){function e(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return e.prototype=Object.create(Error.prototype),e}(),z=n("lJxs"),E=n("8Qeq"),F=n("DH7j"),j=n("z+Ro");function B(e,t,n){if(t){if(!Object(j.a)(t))return function(){return B(e,n).apply(void 0,arguments).pipe(Object(z.a)((function(e){return Object(F.a)(e)?t.apply(void 0,_toConsumableArray(e)):t(e)})))};n=t}return function(){for(var t=arguments.length,o=new Array(t),c=0;c<t;c++)o[c]=arguments[c];var r,a=this,s={context:a,subject:r,callbackFunc:e,scheduler:n};return new i.a((function(t){if(n)return n.schedule(D,0,{args:o,subscriber:t,params:s});if(!r){r=new p;try{e.apply(a,[].concat(o,[function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.next(t.length<=1?t[0]:t),r.complete()}]))}catch(i){Object(E.a)(r)?r.error(i):console.warn(i)}}return r.subscribe(t)}))}}function D(e){var t=this,n=e.args,o=e.subscriber,i=e.params,c=i.callbackFunc,r=i.context,a=i.scheduler,s=i.subject;if(!s){s=i.subject=new p;try{c.apply(r,[].concat(_toConsumableArray(n),[function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];t.add(a.schedule(U,0,{value:n.length<=1?n[0]:n,subject:s}))}]))}catch(l){s.error(l)}}this.add(s.subscribe(o))}function U(e){var t=e.value,n=e.subject;n.next(t),n.complete()}function $(e,t,n){if(t){if(!Object(j.a)(t))return function(){return $(e,n).apply(void 0,arguments).pipe(Object(z.a)((function(e){return Object(F.a)(e)?t.apply(void 0,_toConsumableArray(e)):t(e)})))};n=t}return function(){for(var t=arguments.length,o=new Array(t),c=0;c<t;c++)o[c]=arguments[c];var r={subject:void 0,args:o,callbackFunc:e,scheduler:n,context:this};return new i.a((function(t){var i=r.context,c=r.subject;if(n)return n.schedule(N,0,{params:r,subscriber:t,context:i});if(!c){c=r.subject=new p;try{e.apply(i,[].concat(o,[function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=t.shift();o?c.error(o):(c.next(t.length<=1?t[0]:t),c.complete())}]))}catch(a){Object(E.a)(c)?c.error(a):console.warn(a)}}return c.subscribe(t)}))}}function N(e){var t=this,n=e.params,o=e.subscriber,i=e.context,c=n.callbackFunc,r=n.args,a=n.scheduler,s=n.subject;if(!s){s=n.subject=new p;try{c.apply(i,[].concat(_toConsumableArray(r),[function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];var i=n.shift();t.add(i?a.schedule(H,0,{err:i,subject:s}):a.schedule(q,0,{value:n.length<=1?n[0]:n,subject:s}))}]))}catch(l){this.add(a.schedule(H,0,{err:l,subject:s}))}}this.add(s.subscribe(o))}function q(e){var t=e.value,n=e.subject;n.next(t),n.complete()}function H(e){var t=e.err;e.subject.error(t)}var V=n("itXk"),Y=n("GyhO"),X=n("NXyV"),Q=n("EY2u"),G=n("cp0P"),W=n("Cfvw"),K=n("xgIS"),Z=n("n6bG");function J(e,t,n){return n?J(e,t).pipe(Object(z.a)((function(e){return Object(F.a)(e)?n.apply(void 0,_toConsumableArray(e)):n(e)}))):new i.a((function(n){var o,i=function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return n.next(1===t.length?t[0]:t)};try{o=e(i)}catch(c){return void n.error(c)}if(Object(Z.a)(t))return function(){return t(i,o)}}))}function ee(e,t,n,o,c){var r,a;return 1==arguments.length?(a=e.initialState,t=e.condition,n=e.iterate,r=e.resultSelector||M.a,c=e.scheduler):void 0===o||Object(j.a)(o)?(a=e,r=M.a,c=o):(a=e,r=o),new i.a((function(e){var o=a;if(c)return c.schedule(te,0,{subscriber:e,iterate:n,condition:t,resultSelector:r,state:o});for(;;){if(t){var i=void 0;try{i=t(o)}catch(l){return void e.error(l)}if(!i){e.complete();break}}var s=void 0;try{s=r(o)}catch(l){return void e.error(l)}if(e.next(s),e.closed)break;try{o=n(o)}catch(l){return void e.error(l)}}}))}function te(e){var t=e.subscriber,n=e.condition;if(!t.closed){if(e.needIterate)try{e.state=e.iterate(e.state)}catch(c){return void t.error(c)}else e.needIterate=!0;if(n){var o;try{o=n(e.state)}catch(c){return void t.error(c)}if(!o)return void t.complete();if(t.closed)return}var i;try{i=e.resultSelector(e.state)}catch(c){return void t.error(c)}return t.closed||(t.next(i),t.closed)?void 0:this.schedule(e)}}function ne(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Q.a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Q.a;return Object(X.a)((function(){return e()?t:n}))}var oe=n("l5mm"),ie=n("VRyK"),ce=n("5yfJ"),re=n("LRne");function ae(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)return Q.a;var o=t[0],c=t.slice(1);return 1===t.length&&Object(F.a)(o)?ae.apply(void 0,_toConsumableArray(o)):new i.a((function(e){var t=function(){return e.add(ae.apply(void 0,_toConsumableArray(c)).subscribe(e))};return Object(W.a)(o).subscribe({next:function(t){e.next(t)},error:t,complete:t})}))}function se(e,t){return new i.a(t?function(n){var o=Object.keys(e),i=new a.a;return i.add(t.schedule(le,0,{keys:o,index:0,subscriber:n,subscription:i,obj:e})),i}:function(t){for(var n=Object.keys(e),o=0;o<n.length&&!t.closed;o++){var i=n[o];e.hasOwnProperty(i)&&t.next([i,e[i]])}t.complete()})}function le(e){var t=e.keys,n=e.index,o=e.subscriber,i=e.subscription,c=e.obj;if(!o.closed)if(n<t.length){var r=t[n];o.next([r,c[r]]),i.add(this.schedule({keys:t,index:n+1,subscriber:o,subscription:i,obj:c}))}else o.complete()}function ue(e,t){function n(){return!n.pred.apply(n.thisArg,arguments)}return n.pred=e,n.thisArg=t,n}var de=n("SeVD"),ge=n("pLZG");function fe(e,t,n){return[Object(ge.a)(t,n)(new i.a(Object(de.a)(e))),Object(ge.a)(ue(t,n))(new i.a(Object(de.a)(e)))]}var pe=n("yCtX"),be=n("l7GE"),me=n("ZUHj");function he(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(1===t.length){if(!Object(F.a)(t[0]))return t[0];t=t[0]}return Object(pe.a)(t,void 0).lift(new ve)}var ve=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new _e(e))}}]),e}(),_e=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var o;return _classCallCheck(this,n),(o=t.call(this,e)).hasFirst=!1,o.observables=[],o.subscriptions=[],o}return _createClass(n,[{key:"_next",value:function(e){this.observables.push(e)}},{key:"_complete",value:function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(var n=0;n<t&&!this.hasFirst;n++){var o=e[n],i=Object(me.a)(this,o,void 0,n);this.subscriptions&&this.subscriptions.push(i),this.add(i)}this.observables=null}}},{key:"notifyNext",value:function(e,t,n){if(!this.hasFirst){this.hasFirst=!0;for(var o=0;o<this.subscriptions.length;o++)if(o!==n){var i=this.subscriptions[o];i.unsubscribe(),this.remove(i)}this.subscriptions=null}this.destination.next(t)}}]),n}(be.a);function ke(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return new i.a((function(o){void 0===t&&(t=e,e=0);var i=0,c=e;if(n)return n.schedule(ye,0,{index:i,count:t,start:e,subscriber:o});for(;;){if(i++>=t){o.complete();break}if(o.next(c++),o.closed)break}}))}function ye(e){var t=e.start,n=e.index,o=e.count,i=e.subscriber;n>=o?i.complete():(i.next(t),i.closed||(e.index=n+1,e.start=t+1,this.schedule(e)))}var Ce=n("z6cu"),xe=n("PqYM");function we(e,t){return new i.a((function(n){var o,i;try{o=e()}catch(r){return void n.error(r)}try{i=t(o)}catch(r){return void n.error(r)}var c=(i?Object(W.a)(i):Q.a).subscribe(n);return function(){c.unsubscribe(),o&&o.unsubscribe()}}))}var Oe=n("Lhse"),Pe=n("zx2A");function Me(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=t[t.length-1];return"function"==typeof o&&t.pop(),Object(pe.a)(t,void 0).lift(new Se(o))}var Se=function(){function e(t){_classCallCheck(this,e),this.resultSelector=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new Le(e,this.resultSelector))}}]),e}(),Le=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,o){var i;arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.create(null);return _classCallCheck(this,n),(i=t.call(this,e)).resultSelector=o,i.iterators=[],i.active=0,i.resultSelector="function"==typeof o?o:void 0,i}return _createClass(n,[{key:"_next",value:function(e){var t=this.iterators;Object(F.a)(e)?t.push(new Ie(e)):t.push("function"==typeof e[Oe.a]?new Ae(e[Oe.a]()):new Te(this.destination,this,e))}},{key:"_complete",value:function(){var e=this.iterators,t=e.length;if(this.unsubscribe(),0!==t){this.active=t;for(var n=0;n<t;n++){var o=e[n];o.stillUnsubscribed?this.destination.add(o.subscribe()):this.active--}}else this.destination.complete()}},{key:"notifyInactive",value:function(){this.active--,0===this.active&&this.destination.complete()}},{key:"checkIterators",value:function(){for(var e=this.iterators,t=e.length,n=this.destination,o=0;o<t;o++){var i=e[o];if("function"==typeof i.hasValue&&!i.hasValue())return}for(var c=!1,r=[],a=0;a<t;a++){var s=e[a],l=s.next();if(s.hasCompleted()&&(c=!0),l.done)return void n.complete();r.push(l.value)}this.resultSelector?this._tryresultSelector(r):n.next(r),c&&n.complete()}},{key:"_tryresultSelector",value:function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}]),n}(r.a),Ae=function(){function e(t){_classCallCheck(this,e),this.iterator=t,this.nextResult=t.next()}return _createClass(e,[{key:"hasValue",value:function(){return!0}},{key:"next",value:function(){var e=this.nextResult;return this.nextResult=this.iterator.next(),e}},{key:"hasCompleted",value:function(){var e=this.nextResult;return Boolean(e&&e.done)}}]),e}(),Ie=function(e){function t(e){_classCallCheck(this,t),this.array=e,this.index=0,this.length=0,this.length=e.length}return _createClass(t,[{key:e,value:function(){return this}},{key:"next",value:function(e){var t=this.index++;return t<this.length?{value:this.array[t],done:!1}:{value:null,done:!0}}},{key:"hasValue",value:function(){return this.array.length>this.index}},{key:"hasCompleted",value:function(){return this.array.length===this.index}}]),t}(Oe.a),Te=function(e,t){_inherits(o,e);var n=_createSuper(o);function o(e,t,i){var c;return _classCallCheck(this,o),(c=n.call(this,e)).parent=t,c.observable=i,c.stillUnsubscribed=!0,c.buffer=[],c.isComplete=!1,c}return _createClass(o,[{key:t,value:function(){return this}},{key:"next",value:function(){var e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}}},{key:"hasValue",value:function(){return this.buffer.length>0}},{key:"hasCompleted",value:function(){return 0===this.buffer.length&&this.isComplete}},{key:"notifyComplete",value:function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}},{key:"notifyNext",value:function(e){this.buffer.push(e),this.parent.checkIterators()}},{key:"subscribe",value:function(){return Object(Pe.c)(this.observable,new Pe.a(this))}}]),o}(Pe.b,Oe.a),Re=n("7HRe"),ze=n("2fFW")}}]);