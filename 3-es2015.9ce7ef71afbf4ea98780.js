(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{AkM1:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n("gI9T"))},LsbL:function(e,t,n){"use strict";n.r(t),n.d(t,"MainMenuPageModule",(function(){return Ja}));var o=n("ofXK"),i=n("3Pt+"),s=n("TEn/"),c=n("tyNb"),a=n("cxbk"),r=n("p9xo"),l=n("m8mU"),d=n("08BP"),g=n("Yc22"),u=n("Gs5E"),p=n("PkRB"),h=n("fXoL"),f=n("sYmb"),b=n("6f/U"),m=n("XNiG");let _=(()=>{class e{constructor(){this.sendItem$=new m.a}sendUuid(e){this.sendItem$.next(e)}get$(){return this.sendItem$.asObservable()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=h.Wb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var v=n("Qu3c"),k=n("MNQj"),C=n("6ZHP");function y(e,t){1&e&&(h.gc(0,"div",14),h.bc(1,"animation-loading-book",15),h.tc(2,"translate"),h.fc()),2&e&&(h.Lb(1),h.Ac("text",h.uc(2,1,"loading")))}function x(e,t){1&e&&h.bc(0,"show-book-animate",17),2&e&&h.Ac("book",t.$implicit)}function w(e,t){if(1&e&&(h.gc(0,"ion-card"),h.gc(1,"ion-card-header"),h.gc(2,"ion-card-title"),h.ed(3),h.tc(4,"translate"),h.fc(),h.fc(),h.gc(5,"ion-card-content"),h.cd(6,x,1,1,"show-book-animate",16),h.fc(),h.fc()),2&e){const e=h.sc();h.Lb(3),h.fd(h.uc(4,2,"pages.active_pin.books_activate")),h.Lb(3),h.Ac("ngForOf",e.books)}}let M=(()=>{class e{constructor(e,t,n,o,i,s,c){this.pinesService=e,this.controlErrors=t,this.toastService=n,this.redirectService=o,this.translate=i,this.tourService=s,this.addBookEventService=c,this.form={code:"",mode:"book"},this.books=[],this.submitted={submit:!1}}ngOnInit(){this.tourService.tour("clickAddPin")}onActivePin(){this.submitted.submit=!0,this.pinesService.active(this.form).subscribe(e=>{this.submitted.submit=!1,this.toastService.presentToast(e.message,e.status),e.data&&("book"==e.mode?(this.books.push(e.data),this.addBookEventService.sendUuid(e.data),this.redirectService.redirect("Redireccionando a mis libros",r.h.books,"info",1e3,{new_book:e.data.uuid})):"library"==e.mode&&this.redirectService.redirect("Redireccionando a la biblioteca",r.h.library_books+"/"+e.data.uuid))},e=>{this.submitted.submit=!1,this.controlErrors.control(e)})}enableTour(){this.tourService.tour("clickAddPin",!0)}}return e.\u0275fac=function(t){return new(t||e)(h.ac(d.a),h.ac(l.a),h.ac(p.a),h.ac(u.a),h.ac(f.e),h.ac(g.a),h.ac(_))},e.\u0275cmp=h.Ub({type:e,selectors:[["app-activate-pin"]],decls:30,vars:22,consts:[["size","small"],["size","small",3,"matTooltip","click"],["name","book-outline"],["autocomplete","off",3,"ngSubmit"],[1,"btn-create-c"],["size","small",3,"color","click"],[2,"margin-left","5px"],["name","library-outline"],[1,"intro-x","mt-8",2,"display","flex"],["type","text","name","code",1,"pin-input","intro-x","login__input","form-control","py-3","px-4","border-gray-300","block",3,"ngModel","disabled","placeholder","ngModelChange"],["type","submit",1,"btn-active-pin",3,"disabled"],["name","key-outline"],["style","margin-top: 150px;display: flex;justify-content: center;",4,"ngIf"],[4,"ngIf"],[2,"margin-top","150px","display","flex","justify-content","center"],[3,"text"],[3,"book",4,"ngFor","ngForOf"],[3,"book"]],template:function(e,t){1&e&&(h.gc(0,"div"),h.gc(1,"ion-card"),h.gc(2,"ion-card-header"),h.gc(3,"ion-card-title"),h.gc(4,"ion-button",0),h.ed(5),h.tc(6,"translate"),h.fc(),h.gc(7,"ion-button",1),h.oc("click",(function(){return t.enableTour()})),h.tc(8,"translate"),h.bc(9,"ion-icon",2),h.fc(),h.fc(),h.fc(),h.gc(10,"ion-card-content"),h.gc(11,"form",3),h.oc("ngSubmit",(function(){return t.onActivePin()})),h.gc(12,"div",4),h.gc(13,"ion-button",5),h.oc("click",(function(){return t.form.mode="book",t.form.code=""})),h.bc(14,"ion-icon",2),h.gc(15,"ion-label",6),h.ed(16),h.tc(17,"translate"),h.fc(),h.fc(),h.gc(18,"ion-button",5),h.oc("click",(function(){return t.form.mode="library",t.form.code=""})),h.bc(19,"ion-icon",7),h.gc(20,"ion-label",6),h.ed(21),h.tc(22,"translate"),h.fc(),h.fc(),h.fc(),h.gc(23,"div",8),h.gc(24,"input",9),h.oc("ngModelChange",(function(e){return t.form.code=e})),h.tc(25,"translate"),h.fc(),h.gc(26,"ion-button",10),h.bc(27,"ion-icon",11),h.fc(),h.fc(),h.fc(),h.fc(),h.fc(),h.fc(),h.cd(28,y,3,3,"div",12),h.cd(29,w,7,4,"ion-card",13)),2&e&&(h.Lb(5),h.gd("",h.uc(6,12,"pages.active_pin.title")," "),h.Lb(2),h.Ac("matTooltip",h.uc(8,14,"buttons.tour")),h.Lb(6),h.Ac("color","book"==t.form.mode?"success":"light"),h.Lb(3),h.fd(h.uc(17,16,"menu.book")),h.Lb(2),h.Ac("color","library"==t.form.mode?"success":"light"),h.Lb(3),h.fd(h.uc(22,18,"menu.library")),h.Lb(3),h.Bc("placeholder",h.uc(25,20,"forms.title_add_pin")),h.Ac("ngModel",t.form.code)("disabled",t.submitted.submit),h.Lb(2),h.Ac("disabled",t.submitted.submit),h.Lb(2),h.Ac("ngIf",t.submitted.submit),h.Lb(1),h.Ac("ngIf",t.books.length>0))},directives:[s.m,s.o,s.q,s.k,v.a,s.C,s.n,i.H,i.s,i.t,s.N,i.c,i.r,i.u,o.t,k.a,o.s,C.a],pipes:[f.d],styles:[""]}),e})(),O=(()=>{class e{constructor(e,t,n,o,i,s){this.pinesService=e,this.controlErrors=t,this.toastService=n,this.redirectService=o,this.translate=i,this.tourService=s,this.scrollbarStyle=a.a.scrollbarStyle,this.form={code:"",mode:"book"},this.books=[],this.submitted={submit:!1}}ngOnInit(){this.tourService.tour("clickAddPin")}onActivePin(){this.submitted.submit=!0,this.pinesService.active(this.form).subscribe(e=>{this.submitted.submit=!1,this.toastService.presentToast(e.message,e.status),e.data&&("book"==e.mode?(this.books.push(e.data),this.redirectService.redirect("Redireccionando a mis libros",r.h.books,"info",1e3,{new_book:e.data.uuid})):"library"==e.mode&&this.redirectService.redirect("Redireccionando a la biblioteca",r.h.library_books+"/"+e.data.uuid))},e=>{this.submitted.submit=!1,this.controlErrors.control(e)})}enableTour(){this.tourService.tour("clickAddPin",!0)}}return e.\u0275fac=function(t){return new(t||e)(h.ac(d.a),h.ac(l.a),h.ac(p.a),h.ac(u.a),h.ac(f.e),h.ac(g.a))},e.\u0275cmp=h.Ub({type:e,selectors:[["app-active-pin"]],decls:13,vars:4,consts:[["translucent","true"],["slot","start"],["fullscreen","true",3,"scrollbar"],["slot","end"]],template:function(e,t){1&e&&(h.gc(0,"ion-header",0),h.gc(1,"ion-toolbar"),h.gc(2,"ion-buttons",1),h.bc(3,"ion-menu-button"),h.fc(),h.gc(4,"ion-title"),h.ed(5),h.tc(6,"translate"),h.fc(),h.fc(),h.fc(),h.gc(7,"ion-content",2),h.bc(8,"app-activate-pin"),h.fc(),h.gc(9,"ion-footer",0),h.gc(10,"ion-toolbar"),h.gc(11,"ion-buttons",3),h.ed(12,"\xa92022 Ediciones Holgu\xedn"),h.fc(),h.fc(),h.fc()),2&e&&(h.Lb(5),h.fd(h.uc(6,2,"menu.active_pin")),h.Lb(2),h.Bc("scrollbar",t.scrollbarStyle))},directives:[s.B,s.zb,s.l,s.R,s.xb,s.u,b.b,M,s.z],pipes:[f.d],styles:[""]}),e})();var P=n("mrSG"),S=n("jK8c"),L=n("aa3j"),A=n("wd/R"),I=n("26IU"),T=n("zcoq"),z=n("A9QR"),E=n("oOf3");function R(e,t){1&e&&(h.gc(0,"ion-buttons",10),h.bc(1,"ion-menu-button"),h.fc())}function F(e,t){if(1&e){const e=h.hc();h.gc(0,"ion-button",12),h.oc("click",(function(){h.Sc(e);const n=t.$implicit;return h.sc(2).returnUrlBack(n)})),h.tc(1,"translate"),h.bc(2,"ion-icon",13),h.fc()}if(2&e){const e=t.$implicit;h.Ac("matTooltip",h.uc(1,2,e.tooltip)),h.Lb(2),h.Ac("name",e.icon)}}function B(e,t){if(1&e&&(h.gc(0,"ion-buttons",10),h.cd(1,F,3,4,"ion-button",11),h.fc()),2&e){const e=h.sc();h.Lb(1),h.Ac("ngForOf",e.returnList)}}function j(e,t){if(1&e&&(h.gc(0,"ion-title"),h.ed(1),h.tc(2,"translate"),h.tc(3,"translate"),h.fc()),2&e){const e=h.sc();h.Lb(1),h.fd(e.library?h.uc(2,1,"pages.book.library")+e.library.name:h.uc(3,3,"menu.my_books"))}}function D(e,t){if(1&e){const e=h.hc();h.gc(0,"ion-searchbar",14),h.oc("ngModelChange",(function(t){return h.Sc(e),h.sc().queryText=t}))("ionChange",(function(){return h.Sc(e),h.sc().searchBooksByText(!0)}))("ionCancel",(function(){return h.Sc(e),h.sc().showSearchbar=!1})),h.tc(1,"translate"),h.fc()}if(2&e){const e=h.sc();h.Bc("placeholder",h.uc(1,2,"forms.search")),h.Ac("ngModel",e.queryText)}}function U(e,t){if(1&e){const e=h.hc();h.gc(0,"ion-button",15),h.oc("click",(function(){return h.Sc(e),h.sc().showSearchbar=!0})),h.bc(1,"ion-icon",16),h.fc()}}function N(e,t){1&e&&(h.gc(0,"div",17),h.bc(1,"img",18),h.fc())}function q(e,t){1&e&&(h.ec(0),h.bc(1,"books-animations",20),h.tc(2,"translate"),h.dc()),2&e&&(h.Lb(1),h.Ac("$text",h.uc(2,1,"pages.book.books_not_found")))}function H(e,t){1&e&&(h.ec(0),h.bc(1,"app-activate-pin",21),h.dc())}function V(e,t){if(1&e&&(h.gc(0,"div",19),h.cd(1,q,3,3,"ng-container",2),h.cd(2,H,2,0,"ng-container",2),h.fc()),2&e){const e=h.sc();h.Lb(1),h.Ac("ngIf",e.have_books),h.Lb(1),h.Ac("ngIf",!e.have_books)}}function Y(e,t){1&e&&(h.gc(0,"span",43),h.ed(1),h.tc(2,"translate"),h.fc()),2&e&&(h.Lb(1),h.fd(h.uc(2,1,"pages.book.is_new")))}function X(e,t){if(1&e&&(h.gc(0,"div"),h.gc(1,"p",38),h.gc(2,"strong"),h.ed(3),h.tc(4,"translate"),h.fc(),h.ed(5),h.fc(),h.gc(6,"p",38),h.gc(7,"strong"),h.ed(8),h.tc(9,"translate"),h.fc(),h.ed(10),h.fc(),h.fc()),2&e){const e=h.sc().$implicit,t=h.sc(2);h.Lb(3),h.gd("",h.uc(4,4,"pages.book.expired_in"),": "),h.Lb(2),h.fd(t.moment(e.pin.date_expired).format("DD/MM/YYYY HH:mm")),h.Lb(3),h.gd("",h.uc(9,6,"pages.book.expired_in"),": "),h.Lb(2),h.fd(t.moment(e.pin.date_expired).fromNow())}}function Q(e,t){if(1&e){const e=h.hc();h.gc(0,"ion-button",44),h.oc("click",(function(){h.Sc(e);const t=h.sc().$implicit;return h.sc(2).showBooksLinkeds(t.uuid)})),h.ed(1),h.tc(2,"translate"),h.fc()}2&e&&(h.Lb(1),h.fd(h.uc(2,1,"pages.book.book_links")))}const G=function(e){return{backgroundImage:e,backgroundSize:"100% 100%"}};function W(e,t){if(1&e){const e=h.hc();h.gc(0,"ion-col",27),h.gc(1,"div",28),h.cd(2,Y,3,3,"span",29),h.gc(3,"div",30),h.gc(4,"div",31),h.gc(5,"div",32),h.bc(6,"div",33),h.fc(),h.bc(7,"div",34),h.bc(8,"div",35),h.fc(),h.fc(),h.fc(),h.gc(9,"div",36),h.gc(10,"h3",37),h.ed(11),h.fc(),h.gc(12,"p",38),h.gc(13,"strong"),h.ed(14),h.tc(15,"translate"),h.fc(),h.ed(16),h.tc(17,"translate"),h.fc(),h.gc(18,"p",38),h.gc(19,"strong"),h.ed(20),h.tc(21,"translate"),h.fc(),h.ed(22),h.tc(23,"translate"),h.fc(),h.gc(24,"p",38),h.ed(25),h.fc(),h.cd(26,X,11,8,"div",2),h.gc(27,"ion-button",39),h.oc("click",(function(){h.Sc(e);const n=t.$implicit;return h.sc(2).showBookDetail(n.uuid)})),h.ed(28),h.tc(29,"translate"),h.fc(),h.gc(30,"ion-button",40),h.ed(31),h.tc(32,"translate"),h.fc(),h.gc(33,"ion-button",41),h.oc("click",(function(){h.Sc(e);const n=t.$implicit;return h.sc(2).openModalColaborar(n)})),h.ed(34),h.tc(35,"translate"),h.fc(),h.bc(36,"br"),h.cd(37,Q,3,3,"ion-button",42),h.fc(),h.fc()}if(2&e){const e=t.$implicit,n=h.sc(2);h.Lb(2),h.Ac("ngIf",e.is_new&&"yes"==e.is_new),h.Lb(4),h.Ac("ngStyle",h.Fc(28,G,"url("+e.portada+")")),h.Lb(5),h.fd(e.name),h.Lb(3),h.gd("",h.uc(15,14,"pages.book.author"),": "),h.Lb(2),h.fd(e.author||h.uc(17,16,"no_author")),h.Lb(4),h.gd("",h.uc(21,18,"pages.book.editorial"),": "),h.Lb(2),h.fd(e.editorial||h.uc(23,20,"no_editorial")),h.Lb(3),h.fd(e.periodo_escolar),h.Lb(1),h.Ac("ngIf",e.pin),h.Lb(2),h.fd(h.uc(29,22,"buttons.details")),h.Lb(2),h.Ac("href",n.route_book+e.uuid),h.Lb(1),h.fd(h.uc(32,24,"buttons.open")),h.Lb(3),h.fd(h.uc(35,26,"buttons.colaborar")),h.Lb(3),h.Ac("ngIf",e.book_links_count>0)}}const K=function(e,t,n){return{id:"foo-paginate-book",itemsPerPage:e,currentPage:t,totalItems:n}};function Z(e,t){if(1&e){const e=h.hc();h.gc(0,"div",22),h.gc(1,"ion-grid",23),h.gc(2,"ion-row",24),h.cd(3,W,38,30,"ion-col",25),h.tc(4,"paginate"),h.fc(),h.fc(),h.gc(5,"div",17),h.gc(6,"pagination-controls",26),h.oc("pageChange",(function(t){return h.Sc(e),h.sc().pageChanged(t)}))("pageBoundsCorrection",(function(t){return h.Sc(e),h.sc().pageChanged(t)})),h.tc(7,"translate"),h.tc(8,"translate"),h.tc(9,"translate"),h.tc(10,"translate"),h.tc(11,"translate"),h.fc(),h.fc(),h.fc()}if(2&e){const e=h.sc();h.Lb(3),h.Ac("ngForOf",h.vc(4,6,e.books,h.Hc(19,K,e.pageSize,e.thisPage,e.totalItems))),h.Lb(3),h.Ac("previousLabel",h.uc(7,9,"paginate.previous"))("nextLabel",h.uc(8,11,"paginate.next"))("screenReaderPaginationLabel",h.uc(9,13,"paginate.pagination"))("screenReaderPageLabel",h.uc(10,15,"paginate.page"))("screenReaderCurrentLabel",h.uc(11,17,"paginate.in_your_page"))}}let J=(()=>{class e{constructor(e,t,n,o,i,s,c){this.activeRoute=e,this.modalCtrl=t,this.booksService=n,this.routerOutlet=o,this.controlErroresService=i,this.redirectService=s,this.addBookEventService=c,this.scrollbarStyle=a.a.scrollbarStyle,this.queryText="",this.route_book=r.h.book,this.loadingBooks=!1,this.moment=A,this.library=null,this.have_books=!1,this.books=[],this.pageSize=9,this.thisPage=1,this.totalPages=0,this.totalItems=0,this.library_id=null,this.items=[],this.rxjsGlobal=null,this.returnList=[],this.can_return=!1,this.library_id=e.snapshot.params.library_id;try{this.new_book_id=e.snapshot.queryParams.new_book}catch(l){}this.moment.locale("es"),this.rxjsGlobal=this.addBookEventService.get$().subscribe(e=>{this.books.push(e),this.have_books=!0})}ngOnInit(){if(this.library_id&&this.loadLibrary(),this.loadBooks({page:this.thisPage,library_id:this.library_id},!0,!0,!0),this.library_id&&this.returnList.push({mode:"library",route:r.h.library,icon:"return-up-back-outline",tooltip:"buttons.return_library"}),this.activeRoute.snapshot.queryParams&&this.activeRoute.snapshot.queryParams.course&&this.activeRoute.snapshot.queryParams.course){this.course_id=this.activeRoute.snapshot.queryParams.course;let e=r.h.show_course_library;e=e.replace(":id",this.course_id).replace(":id",this.course_id),this.returnList.push({mode:"course",route:e,icon:"school-outline",tooltip:"buttons.return_course"})}}loadLibrary(){this.booksService.getLibrary(this.library_id).subscribe(e=>{this.library=e.data,this.have_books=!0},e=>{this.controlErroresService.control(e)})}ngOnDestroy(){this.rxjsGlobal.unsubscribe()}loadBooks(e={},t=!1,n=!1,o=!1){this.loadingBooks=!0,t&&(this.books=[]),n&&(this.thisPage=1),this.new_book_id&&(e.new_book_id=this.new_book_id),console.log(this.new_book_id),this.booksService.getBooks(e).subscribe(e=>{e.data&&e.data.books&&e.data.books.data&&Array.isArray(e.data.books.data)&&(this.books=e.data.books.data,n&&(this.totalPages=e.data.books.last_page,this.totalItems=e.data.books.total,this.pageSize=e.data.number_paginate),e.data.books.data.length>=1&&o&&(this.have_books=!0)),this.loadingBooks=!1},e=>{this.loadingBooks=!1,this.controlErroresService.control(e)})}searchBooksByText(e){this.thisPage=1,this.loadBooks({page:this.thisPage,busqueda:this.queryText,library_id:this.library_id},e,!0)}pageChanged(e){if(console.log(e),e==1/0)return!1;this.thisPage=e,this.loadBooks({page:this.thisPage,library_id:this.library_id},!0,!1)}showBookDetail(e){return Object(P.b)(this,void 0,void 0,(function*(){const t=yield this.modalCtrl.create({component:L.a,cssClass:"modal-fullscreen-100",swipeToClose:!0,presentingElement:this.routerOutlet.nativeEl,componentProps:{uuid:e}});yield t.present()}))}openModalColaborar(e){return Object(P.b)(this,void 0,void 0,(function*(){const t=yield this.modalCtrl.create({component:T.a,cssClass:"modal-fullscreen-100",swipeToClose:!0,componentProps:{book:e}});yield t.present()}))}showBooksLinkeds(e){return Object(P.b)(this,void 0,void 0,(function*(){const t=yield this.modalCtrl.create({component:I.a,cssClass:"modal-fullscreen-100",swipeToClose:!0,presentingElement:this.routerOutlet.nativeEl,componentProps:{uuid:e}});yield t.present()}))}returnUrlBack({route:e}){this.redirectService.redirect("null",e,"info",0)}}return e.\u0275fac=function(t){return new(t||e)(h.ac(c.a),h.ac(s.Db),h.ac(S.a),h.ac(s.fb),h.ac(l.a),h.ac(u.a),h.ac(_))},e.\u0275cmp=h.Ub({type:e,selectors:[["app-my-books"]],decls:16,vars:9,consts:[["translucent","true"],["slot","start",4,"ngIf"],[4,"ngIf"],["showCancelButton","always",3,"ngModel","placeholder","ngModelChange","ionChange","ionCancel",4,"ngIf"],["slot","end"],[3,"click",4,"ngIf"],["fullscreen","true",3,"scrollbar"],["class","flex flex-center",4,"ngIf"],["class","flex flex-center mt-4",4,"ngIf"],["class","main-wrapper",4,"ngIf"],["slot","start"],[3,"matTooltip","click",4,"ngFor","ngForOf"],[3,"matTooltip","click"],[3,"name"],["showCancelButton","always",3,"ngModel","placeholder","ngModelChange","ionChange","ionCancel"],[3,"click"],["slot","icon-only","name","search"],[1,"flex","flex-center"],["src","/assets/js/wow_book/loading.gif","alt","loading"],[1,"flex","flex-center","mt-4"],[3,"$text"],[1,"w-100"],[1,"main-wrapper"],[1,"grid-shuffle"],["id","grid",1,"row"],["size","12","size-sm","6","size-md","6","size-xl","4","class","book-item small-12 medium-6 columns","data-groups",'["classic"]',"data-date-created","1937","data-title","Of Mice and Men","data-color","var(--ion-color-primary)",4,"ngFor","ngForOf"],["id","foo-paginate-book","maxSize","9","directionLinks","true","autoHide","true","responsive","true",3,"previousLabel","nextLabel","screenReaderPaginationLabel","screenReaderPageLabel","screenReaderCurrentLabel","pageChange","pageBoundsCorrection"],["size","12","size-sm","6","size-md","6","size-xl","4","data-groups",'["classic"]',"data-date-created","1937","data-title","Of Mice and Men","data-color","var(--ion-color-primary)",1,"book-item","small-12","medium-6","columns"],[1,"bk-img"],["class","card-new-obj",4,"ngIf"],[1,"bk-wrapper"],[1,"bk-book","bk-bookdefault"],[1,"bk-front"],[1,"bk-cover",3,"ngStyle"],[1,"bk-back"],[1,"bk-left"],[1,"item-details","p-0"],[1,"book-item_title"],[1,"author"],["color","primary","size","small",3,"click"],["color","warning","size","small",3,"href"],["color","danger","size","small",3,"click"],["color","secondary","size","small",3,"click",4,"ngIf"],[1,"card-new-obj"],["color","secondary","size","small",3,"click"]],template:function(e,t){1&e&&(h.gc(0,"ion-header",0),h.gc(1,"ion-toolbar"),h.cd(2,R,2,0,"ion-buttons",1),h.cd(3,B,2,1,"ion-buttons",1),h.cd(4,j,4,5,"ion-title",2),h.cd(5,D,2,4,"ion-searchbar",3),h.gc(6,"ion-buttons",4),h.cd(7,U,2,0,"ion-button",5),h.fc(),h.fc(),h.fc(),h.gc(8,"ion-content",6),h.cd(9,N,2,0,"div",7),h.cd(10,V,3,2,"div",8),h.cd(11,Z,12,23,"div",9),h.fc(),h.gc(12,"ion-footer",0),h.gc(13,"ion-toolbar"),h.gc(14,"ion-buttons",4),h.ed(15,"\xa92022 Ediciones Holgu\xedn"),h.fc(),h.fc(),h.fc()),2&e&&(h.Lb(2),h.Ac("ngIf",!t.showSearchbar),h.Lb(1),h.Ac("ngIf",!t.showSearchbar),h.Lb(1),h.Ac("ngIf",!t.showSearchbar),h.Lb(1),h.Ac("ngIf",t.showSearchbar),h.Lb(2),h.Ac("ngIf",!t.showSearchbar),h.Lb(1),h.Bc("scrollbar",t.scrollbarStyle),h.Lb(1),h.Ac("ngIf",t.loadingBooks),h.Lb(1),h.Ac("ngIf",0==t.books.length&&!t.loadingBooks),h.Lb(1),h.Ac("ngIf",!t.loadingBooks))},directives:[s.B,s.zb,o.t,s.l,s.u,b.b,s.z,s.R,o.s,s.k,v.a,s.C,s.xb,s.hb,s.Mb,i.r,i.u,z.a,M,s.A,s.gb,E.c,s.t,o.w],pipes:[f.d,E.b],styles:['p[_ngcontent-%COMP%]:not(.author){font-size:15px;font-weight:300;line-height:1.4}p.author[_ngcontent-%COMP%]{margin-bottom:10px;letter-spacing:-1px;font-weight:400;color:var(--ion-color-medium-shade)}a.button[_ngcontent-%COMP%]{margin-bottom:0;padding:8px 14px;font-size:14px;font-weight:600;border-radius:3px;background-color:rgba(49,49,49,.5)}a.button[_ngcontent-%COMP%]:focus, a.button[_ngcontent-%COMP%]:hover{background-color:var(--ion-color-primary)}.page-header[_ngcontent-%COMP%]{position:relative;margin-bottom:55px;width:100%;border-bottom:1px solid #d2d6d5;background-color:#fff}@-webkit-keyframes anim-1{50%{opacity:0;transform:translate3d(1em,0,0)}51%{opacity:0;transform:translate3d(-1em,-40%,0)}to{opacity:1;transform:translate3d(0,-40%,0)}}@keyframes anim-1{50%{opacity:0;bottom:24px;transform:translate3d(5em,0,0)}51%{opacity:0;bottom:24px;transform:translate3d(-5em,-40%,0)}to{opacity:1;bottom:24px;transform:translate3d(0,-40%,0)}}.book-item[_ngcontent-%COMP%]{margin:15px 0;padding:15px;list-style-type:none}.book-item[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;right:15px;width:calc(100% - 105px);height:100%;border-radius:3px;box-shadow:0 0 0 0 transparent;z-index:-1;transition:all .25s ease-out}.book-item[_ngcontent-%COMP%]:hover:after{box-shadow:0 1px 1px 1px rgba(210,214,213,.5)}.book-item[_ngcontent-%COMP%]:hover   .item-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{box-shadow:0 0 10px 0 rgba(49,49,49,.25)}.book-item[_ngcontent-%COMP%]:hover   a.button[_ngcontent-%COMP%]{background-color:var(--ion-color-primary)}.book-item[_ngcontent-%COMP%]:hover   .bk-bookdefault[_ngcontent-%COMP%]{transform:rotateY(25deg)}.book-item[_ngcontent-%COMP%]:hover   .bk-back[_ngcontent-%COMP%]{opacity:1}.book-item[_ngcontent-%COMP%]   .item-img[_ngcontent-%COMP%]{display:inline-block;float:left;padding-right:30px}.book-item[_ngcontent-%COMP%]   .item-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{box-shadow:0 0 0 0 transparent;transition:all .25s ease-out}.book-item[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]{padding-right:30px}.book-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:not(.author){display:block;display:-webkit-box;height:63px;font-size:15px;line-height:1.4;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}.bk-img[_ngcontent-%COMP%]{display:inline-block;padding-right:30px;list-style:none}.bk-img[_ngcontent-%COMP%], .bk-img[_ngcontent-%COMP%]   .bk-wrapper[_ngcontent-%COMP%]{position:relative;float:left}.bk-img[_ngcontent-%COMP%]   .bk-wrapper[_ngcontent-%COMP%]{width:150px;height:215px;z-index:1;perspective:1400px}.bk-img[_ngcontent-%COMP%]   .bk-wrapper[_ngcontent-%COMP%]:last-child{margin-right:0}.bk-img[_ngcontent-%COMP%]   .bk-book[_ngcontent-%COMP%]{position:absolute;width:100%;height:215px;transform-style:preserve-3d;transition:transform .5s}.bk-img[_ngcontent-%COMP%]   .bk-book[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .bk-img[_ngcontent-%COMP%]   .bk-front[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:block;position:absolute}.bk-img[_ngcontent-%COMP%]   .bk-front[_ngcontent-%COMP%]{transform-style:preserve-3d;transform-origin:0 50%;transition:transform .5s;transform:translateZ(20px);z-index:10}.bk-img[_ngcontent-%COMP%]   .bk-front[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{z-index:1;-webkit-backface-visibility:hidden;backface-visibility:hidden;transform-style:preserve-3d;border-radius:0 3px 3px 0;box-shadow:inset 4px 0 10px rgba(0,0,0,.1)}.bk-img[_ngcontent-%COMP%]   .bk-front[_ngcontent-%COMP%]:after{content:"";position:absolute;top:1px;bottom:1px;left:-1px;width:1px}.bk-img[_ngcontent-%COMP%]   .bk-back[_ngcontent-%COMP%], .bk-img[_ngcontent-%COMP%]   .bk-front[_ngcontent-%COMP%], .bk-img[_ngcontent-%COMP%]   .bk-front[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:150px;height:215px}.bk-img[_ngcontent-%COMP%]   .bk-left[_ngcontent-%COMP%], .bk-img[_ngcontent-%COMP%]   .bk-right[_ngcontent-%COMP%]{width:40px;left:-20px}.bk-img[_ngcontent-%COMP%]   .bk-back[_ngcontent-%COMP%]{transform:rotateY(-180deg) translateZ(20px);box-shadow:5px 7px 15px rgba(0,0,0,.3);border-radius:3px 0 0 3px;opacity:0;transition:opacity .25s ease-out}.bk-img[_ngcontent-%COMP%]   .bk-back[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:10px;bottom:0;width:3px;background:rgba(0,0,0,.06);box-shadow:1px 0 3px hsla(0,0%,100%,.1)}.bk-img[_ngcontent-%COMP%]   .bk-left[_ngcontent-%COMP%]{height:215px;transform:rotateY(-90deg)}.bk-img[_ngcontent-%COMP%]   .bk-left[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{width:215px;height:40px;transform-origin:0 0;transform:rotate(90deg) translateY(-40px)}.bk-img[_ngcontent-%COMP%]   .bk-cover[_ngcontent-%COMP%]{background-position:10px 40px}.bk-img[_ngcontent-%COMP%]   .bk-cover[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:10px;bottom:0;width:3px;background:rgba(0,0,0,.06);box-shadow:1px 0 3px hsla(0,0%,100%,.1)}.bk-img[_ngcontent-%COMP%]   .bk-cover[_ngcontent-%COMP%]{background-repeat:no-repeat;background-position:0 0!important}.bk-img[_ngcontent-%COMP%]   .bk-front[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .bk-img[_ngcontent-%COMP%]   .bk-left[_ngcontent-%COMP%]{background-color:var(--ion-color-primary)}.main-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;display:none;background-color:rgba(49,49,49,.65)}.main-overlay[_ngcontent-%COMP%]   .overlay-full[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%}.main-overlay[_ngcontent-%COMP%]   .overlay-details[_ngcontent-%COMP%]{position:absolute;display:block;z-index:1;top:50%;left:50%;width:100%;max-width:800px;max-height:480px;padding:40px;overflow:hidden;border-radius:3px;background-color:#fff;box-shadow:0 2px 1px 2px rgba(0,0,0,.3);transform:translate(-50%,-50%)}.main-overlay[_ngcontent-%COMP%]   .overlay-image[_ngcontent-%COMP%]{display:inline-block;margin-right:30px;max-width:275px;vertical-align:top}.main-overlay[_ngcontent-%COMP%]   .overlay-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:relative;display:inline-block;z-index:1;box-shadow:-12px 12px 15px -5px rgba(0,0,0,.3)}.main-overlay[_ngcontent-%COMP%]   .overlay-image[_ngcontent-%COMP%]   .back-color[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:275px;height:100%;border-top-left-radius:3px;border-bottom-left-radius:3px;background-color:green}.main-overlay[_ngcontent-%COMP%]   .close-overlay-btn[_ngcontent-%COMP%]{position:absolute;top:15px;right:15px;width:30px;height:30px;opacity:.3;text-indent:-9999px;transition:opacity .25s ease-out}.main-overlay[_ngcontent-%COMP%]   .close-overlay-btn[_ngcontent-%COMP%]:hover{opacity:1}.main-overlay[_ngcontent-%COMP%]   .close-overlay-btn[_ngcontent-%COMP%]:after, .main-overlay[_ngcontent-%COMP%]   .close-overlay-btn[_ngcontent-%COMP%]:before{content:" ";position:absolute;left:15px;width:2px;height:33px;background-color:#313131}.main-overlay[_ngcontent-%COMP%]   .close-overlay-btn[_ngcontent-%COMP%]:before{transform:rotate(45deg)}.main-overlay[_ngcontent-%COMP%]   .close-overlay-btn[_ngcontent-%COMP%]:after{transform:rotate(-45deg)}.main-overlay[_ngcontent-%COMP%]   .back-preview-btn[_ngcontent-%COMP%]{position:absolute;top:7px;left:-34px;width:30px;height:30px;opacity:.3;text-indent:-9999px;transition:opacity .25s ease-out}.main-overlay[_ngcontent-%COMP%]   .back-preview-btn[_ngcontent-%COMP%]:hover{opacity:1}.main-overlay[_ngcontent-%COMP%]   .back-preview-btn[_ngcontent-%COMP%]:after, .main-overlay[_ngcontent-%COMP%]   .back-preview-btn[_ngcontent-%COMP%]:before{content:" ";position:absolute;left:15px;width:2px;height:15px;background-color:#313131}.main-overlay[_ngcontent-%COMP%]   .back-preview-btn[_ngcontent-%COMP%]:after{top:10px}.main-overlay[_ngcontent-%COMP%]   .back-preview-btn[_ngcontent-%COMP%]:before{transform:rotate(45deg)}.main-overlay[_ngcontent-%COMP%]   .back-preview-btn[_ngcontent-%COMP%]:after{transform:rotate(-45deg)}.main-overlay[_ngcontent-%COMP%]   .overlay-desc[_ngcontent-%COMP%]{display:inline-block;margin-top:-400px;width:calc(100% - 320px);vertical-align:top;transition:all .5s ease-out}.main-overlay[_ngcontent-%COMP%]   .overlay-desc.activated[_ngcontent-%COMP%]{display:inline-block;margin-top:0}.main-overlay[_ngcontent-%COMP%]   .overlay-preview[_ngcontent-%COMP%]{position:relative;display:inline-block;float:right;margin-top:40px;width:calc(100% - 310px);vertical-align:top;transition:all .5s ease-out}.main-overlay[_ngcontent-%COMP%]   .overlay-preview.activated[_ngcontent-%COMP%]{margin-top:-430px}.main-overlay[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]{padding-right:24px;padding-top:10px;display:block;display:-webkit-box;height:360px;font-size:15px;line-height:1.5;-webkit-line-clamp:16;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;overflow:scroll;text-overflow:clip;font-weight:400}.main-overlay[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], .main-overlay[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Roboto Slab,serif}.main-overlay[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-weight:700}.main-overlay[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:400}.main-overlay[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:40px;width:100%;height:30px;background:hsla(0,0%,100%,0);background:linear-gradient(0deg,hsla(0,0%,100%,0) 0,hsla(0,0%,100%,0) 0,hsla(0,0%,100%,.8) 30%,#fff 80%)}.main-overlay[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]:after{content:"";position:absolute;left:0;bottom:0;width:100%;height:50px;background:hsla(0,0%,100%,0);background:linear-gradient(180deg,hsla(0,0%,100%,0) 0,hsla(0,0%,100%,0) 0,hsla(0,0%,100%,.8) 30%,#fff 80%)}.overlay-details[_ngcontent-%COMP%]{display:none}#footer[_ngcontent-%COMP%]{margin-top:60px;padding:15px 0 20px;border-top:1px solid #fff;background-color:rgba(49,49,49,.5)}#footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], #footer[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], #footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;font-size:12px;text-align:center}.long-text[_ngcontent-%COMP%], .long-text[_ngcontent-%COMP%] > *[_ngcontent-%COMP%], .long-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .long-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] > *[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{white-space:normal!important;word-wrap:break-word!important}.card-new-obj[_ngcontent-%COMP%]{background:red;color:#fff;position:absolute;z-index:2;top:15px;padding:2px 5px;border-radius:5px;scale:1;-webkit-animation:scalenewtarget 2s infinite;animation:scalenewtarget 2s infinite;font-weight:800}@-webkit-keyframes scalenewtarget{0%{scale:1}50%{scale:1.15}to{scale:1}}@keyframes scalenewtarget{0%{scale:1}50%{scale:1.15}to{scale:1}}']}),e})();var ee=n("w3oG");function te(e,t){1&e&&h.bc(0,"library-loading-animation")}const ne=function(e){return{"image-active":e}};function oe(e,t){if(1&e&&(h.gc(0,"div",20),h.gc(1,"p",21),h.gc(2,"strong"),h.ed(3,"Pin: "),h.fc(),h.ed(4),h.fc(),h.gc(5,"p",21),h.gc(6,"strong"),h.ed(7),h.tc(8,"translate"),h.fc(),h.ed(9),h.fc(),h.fc()),2&e){const e=t.$implicit,n=t.index,o=h.sc(2).$implicit,i=h.sc(2);h.Ac("ngClass",h.Fc(6,ne,o.selectecIndex==n)),h.Lb(4),h.fd(e.pin),h.Lb(3),h.gd("",h.uc(8,4,"pages.book.expired_at"),": "),h.Lb(2),h.fd(i.moment(e.date_expired).format("DD/MM/YYYY"))}}const ie=function(e){return{active:e}};function se(e,t){if(1&e){const e=h.hc();h.gc(0,"span",24),h.oc("click",(function(){h.Sc(e);const n=t.index,o=h.sc(3).$implicit;return h.sc(2).selectImage(o,n)})),h.fc()}if(2&e){const e=t.index,n=h.sc(3).$implicit;h.Ac("ngClass",h.Fc(1,ie,n.selectecIndex==e))}}function ce(e,t){if(1&e&&(h.gc(0,"div",22),h.cd(1,se,1,3,"span",23),h.fc()),2&e){const e=h.sc(2).$implicit;h.Lb(1),h.Ac("ngForOf",e.pines)}}const ae=function(e){return{disabled:e}};function re(e,t){if(1&e){const e=h.hc();h.gc(0,"button",25),h.gc(1,"ion-icon",26),h.oc("click",(function(){h.Sc(e);const t=h.sc(2).$implicit;return h.sc(2).onPrevClick(t,0==t.selectecIndex)})),h.fc(),h.fc()}if(2&e){const e=h.sc(2).$implicit;h.Lb(1),h.Ac("ngClass",h.Fc(1,ae,0==e.selectecIndex))}}function le(e,t){if(1&e){const e=h.hc();h.gc(0,"button",27),h.gc(1,"ion-icon",28),h.oc("click",(function(){h.Sc(e);const t=h.sc(2).$implicit;return h.sc(2).onNextClick(t,t.pines.length-1==t.selectecIndex)})),h.fc(),h.fc()}if(2&e){const e=h.sc(2).$implicit;h.Lb(1),h.Ac("ngClass",h.Fc(1,ae,e.pines.length-1==e.selectecIndex))}}function de(e,t){if(1&e&&(h.gc(0,"div",15),h.cd(1,oe,10,8,"div",16),h.cd(2,ce,2,1,"div",17),h.cd(3,re,2,3,"button",18),h.cd(4,le,2,3,"button",19),h.fc()),2&e){const e=h.sc().$implicit;h.Lb(1),h.Ac("ngForOf",e.pines),h.Lb(1),h.Ac("ngIf",e.pines.length>1),h.Lb(1),h.Ac("ngIf",e.pines.length>1),h.Lb(1),h.Ac("ngIf",e.pines.length>1)}}const ge=function(e){return{background:e,backgroundSize:"180px 255px"}};function ue(e,t){if(1&e&&(h.gc(0,"ion-list",11),h.bc(1,"div",12),h.gc(2,"h3",13),h.gc(3,"strong"),h.ed(4),h.fc(),h.fc(),h.cd(5,de,5,4,"div",14),h.fc()),2&e){const e=t.$implicit,n=h.sc(2);h.Lb(1),h.Ac("routerLink",n.routeBooks+e.uuid)("ngStyle",h.Fc(4,ge,"url("+e.theme_url+")")),h.Lb(3),h.fd(e.name),h.Lb(1),h.Ac("ngIf",e.pines)}}const pe=function(e,t,n){return{id:"foo-paginate-book",itemsPerPage:e,currentPage:t,totalItems:n}};function he(e,t){if(1&e&&(h.gc(0,"div",9),h.cd(1,ue,6,6,"ion-list",10),h.tc(2,"paginate"),h.fc()),2&e){const e=h.sc();h.Lb(1),h.Ac("ngForOf",h.vc(2,1,e.libraries,h.Hc(4,pe,e.pageSize,e.thisPage,e.totalItems)))}}function fe(e,t){1&e&&(h.gc(0,"div",29),h.bc(1,"books-animations",30),h.tc(2,"translate"),h.fc()),2&e&&(h.Lb(1),h.Ac("$text",h.uc(2,1,"pages.book.libraries_not_found")))}let be=(()=>{class e{constructor(e,t){this.booksService=e,this.controlErroresService=t,this.scrollbarStyle=a.a.scrollbarStyle,this.thisPage=1,this.libraries=[],this.moment=A,this.loading=!1,this.routeBooks=r.h.library_books+"/",this.pageSize=9,this.totalPages=0,this.totalItems=0}ngOnInit(){this.loadLibraries({page:this.thisPage}),$("mat-tooltip-component").remove()}loadLibraries(e){this.loading=!0,this.booksService.getLibraries(e).subscribe(e=>{this.loading=!1,e.data&&e.data.data&&Array.isArray(e.data.data)?(this.libraries=e.data.data,this.totalPages=e.data.last_page,this.totalItems=e.data.last_page*e.data.data.length,this.pageSize=e.data.number_paginate):this.controlErroresService.control({message:"Error al obtener datos"})},e=>{this.loading=!1,this.controlErroresService.control(e)})}pageChanged(e){if(console.log(e),e==1/0)return!1;this.thisPage=e,this.loadLibraries({page:this.thisPage})}selectImage(e,t){e.selectecIndex=t}onPrevClick(e,t=!1){t||(0==e.selectecIndex?e.selectecIndex=e.pines.length-1:e.selectecIndex--)}onNextClick(e,t=!1){t||(e.selectecIndex==e.pines.length-1?e.selectecIndex=0:e.selectecIndex++)}}return e.\u0275fac=function(t){return new(t||e)(h.ac(S.a),h.ac(l.a))},e.\u0275cmp=h.Ub({type:e,selectors:[["app-my-libraries"]],decls:22,vars:22,consts:[["translucent","true"],["slot","start"],["fullscreen","true",3,"scrollbar"],[4,"ngIf"],["class","container",4,"ngIf"],[1,"flex","flex-center"],["id","foo-paginate-book","maxSize","9","directionLinks","true","autoHide","true","responsive","true",3,"previousLabel","nextLabel","screenReaderPaginationLabel","screenReaderPageLabel","screenReaderCurrentLabel","pageChange","pageBoundsCorrection"],["class","flex flex-center mt-4",4,"ngIf"],["slot","end"],[1,"container"],["class","box-out",4,"ngFor","ngForOf"],[1,"box-out"],[1,"book","books-1",3,"routerLink","ngStyle"],[1,"text-center",2,"width","90%"],["class","carousel-container container",4,"ngIf"],[1,"carousel-container","container"],["class","panel-carousel-item",3,"ngClass",4,"ngFor","ngForOf"],["class","carousel-dot-container",4,"ngIf"],["class","btn-carousel btn-prev",4,"ngIf"],["class","btn-carousel btn-next",4,"ngIf"],[1,"panel-carousel-item",3,"ngClass"],[1,"author"],[1,"carousel-dot-container"],["class","dot",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"dot",3,"ngClass","click"],[1,"btn-carousel","btn-prev"],["name","chevron-back-outline",1,"icon-prev","icon-carousel",3,"ngClass","click"],[1,"btn-carousel","btn-next"],["name","chevron-forward-outline",1,"icon-next","icon-carousel",3,"ngClass","click"],[1,"flex","flex-center","mt-4"],[3,"$text"]],template:function(e,t){1&e&&(h.gc(0,"ion-header",0),h.gc(1,"ion-toolbar"),h.gc(2,"ion-buttons",1),h.bc(3,"ion-menu-button"),h.fc(),h.gc(4,"ion-title"),h.ed(5),h.tc(6,"translate"),h.fc(),h.fc(),h.fc(),h.gc(7,"ion-content",2),h.cd(8,te,1,0,"library-loading-animation",3),h.cd(9,he,3,8,"div",4),h.gc(10,"div",5),h.gc(11,"pagination-controls",6),h.oc("pageChange",(function(e){return t.pageChanged(e)}))("pageBoundsCorrection",(function(e){return t.pageChanged(e)})),h.tc(12,"translate"),h.tc(13,"translate"),h.tc(14,"translate"),h.tc(15,"translate"),h.tc(16,"translate"),h.fc(),h.fc(),h.cd(17,fe,3,3,"div",7),h.fc(),h.gc(18,"ion-footer",0),h.gc(19,"ion-toolbar"),h.gc(20,"ion-buttons",8),h.ed(21,"\xa92022 Ediciones Holgu\xedn"),h.fc(),h.fc(),h.fc()),2&e&&(h.Lb(5),h.fd(h.uc(6,10,"menu.library")),h.Lb(2),h.Bc("scrollbar",t.scrollbarStyle),h.Lb(1),h.Ac("ngIf",t.loading),h.Lb(1),h.Ac("ngIf",!t.loading),h.Lb(2),h.Ac("previousLabel",h.uc(12,12,"paginate.previous"))("nextLabel",h.uc(13,14,"paginate.next"))("screenReaderPaginationLabel",h.uc(14,16,"paginate.pagination"))("screenReaderPageLabel",h.uc(15,18,"paginate.page"))("screenReaderCurrentLabel",h.uc(16,20,"paginate.in_your_page")),h.Lb(6),h.Ac("ngIf",0==t.libraries.length&&!t.loading))},directives:[s.B,s.zb,s.l,s.R,s.xb,s.u,b.b,o.t,E.c,s.z,ee.a,o.s,s.O,s.Kb,c.g,o.w,o.q,s.C,z.a],pipes:[f.d,E.b],styles:['.container[_ngcontent-%COMP%]{justify-content:center;position:relative}.box-out[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap}.box-out[_ngcontent-%COMP%]{flex-direction:column}.box-inner[_ngcontent-%COMP%]{z-index:99;width:900px;display:flex;align-items:center;position:absolute;top:350px;overflow:hidden;background-color:#fff}.book[_ngcontent-%COMP%]{width:180px;height:255px;background-color:#3e4798;transition:all .3s ease-in-out;transform-origin:left center 0;transform-style:preserve-3d;border-top-right-radius:5px;border-bottom-right-radius:5px;-webkit-backface-visibility:hidden;overflow:hidden}.box-out[_ngcontent-%COMP%]   .book[_ngcontent-%COMP%]:after{content:" ";display:block;opacity:0;width:180px;height:255px;position:relative;left:8px;transition:all .3s ease}.box-out[_ngcontent-%COMP%]   .book[_ngcontent-%COMP%]:before{content:" ";z-index:999;display:block;width:20px;height:100px;opacity:0;position:absolute;top:-12px;right:8px;transition:all .25s;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD8AAABhCAYAAABh23lYAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHCSURBVHgB7dxPTsJAHMXxN7Xu3UhigobxJHACvQFwAr2BcgO8AZxE7uGiDZiQyEIW7oSOUyKbKgLS8u+9b9JNF818fum0XdWUhy9VEDZBGIdBGD6DsFM3bQYgTnjWhGdNeNaEZ0141oRnTXjWhGdNeNaEZ0141oRnTXjWhGdNeNaEZ0141oRnTXjWhGdNeNaEZ0141oRnTXjWhGdNeNaEZ0141oRnTXjWhGdNeNaEZ0141oRnTXjWhGdNeNZ2hR/7o+UcmnCIsaNCbLcU/RR8oB1bO/4+17l8ixoGeIBBBVvMXI0ih+L7Df2j8iiqnvgh+AVVUXDOTZvF4tNb2qC7DJ1tNgSDO78tblFQxeE92l+0NSjZDjaoMowqyYl7hDF15JzL+x+YHtxLgFq/ZO2m8LT4wsb90nUjmMD61XaRc7ng5+jBua29ntsecq6oIWyELxqdLe8h/GvPp+h0T28D/FezZ8Ip7pHgZt3X5NoPvH1BZ5sNIUTDL7C+6hBWxxt0gk+00tsOe96qH0zL8GO4pBtMg/YhoLMtG8Ii/EpfY4fSoiFk8UeFzpYdwhz/jiNGZ0uHEBjUEzftohJFZyAsdX8BM0/amLC3spYAAAAASUVORK5CYII=");background-size:16px;background-repeat:no-repeat}.books-1[_ngcontent-%COMP%]{min-width:180px;margin:10px 15px}.box-inner[_ngcontent-%COMP%]   .book[_ngcontent-%COMP%]{margin-left:90px;position:relative;top:-194px}.book[_ngcontent-%COMP%]:hover{cursor:pointer;transform:rotateY(-28deg) rotate(-2deg) scale(1.02);-webkit-backface-visibility:hidden;box-shadow:1px 3px 2px #353d85,20px 8px 0 #525dc4}.book[_ngcontent-%COMP%]:hover:after{content:" ";display:block;opacity:1;width:172px;height:255px;position:relative;left:8px;background:linear-gradient(-180deg,hsla(0,0%,100%,.1),hsla(0,0%,100%,0) 60%)}.book[_ngcontent-%COMP%]:hover:before{transform:translateY(9px);opacity:1}.dr[_ngcontent-%COMP%]{position:absolute;bottom:16px;right:16px;width:100px}.carousel-container[_ngcontent-%COMP%]{position:relative;margin:auto;text-align:center;border-radius:15px;box-shadow:0 6px 12px #dce1e1}.carousel-container[_ngcontent-%COMP%]   .panel-carousel-item[_ngcontent-%COMP%]{display:none;border-radius:15px}.carousel-container[_ngcontent-%COMP%]   .panel-carousel-item.image-active[_ngcontent-%COMP%]{display:block;width:100%;padding-bottom:20px}.carousel-dot-container[_ngcontent-%COMP%]{position:absolute;right:0;left:0;bottom:0;display:flex;justify-content:center;padding:0;margin-bottom:1 rem}.dot[_ngcontent-%COMP%]{cursor:pointer;height:13px;width:13px;margin:0 5px;background-color:var(--ion-color-primary);border-radius:50%;display:inline-block;transition:opacity .6s;opacity:.6}.active[_ngcontent-%COMP%], .dot[_ngcontent-%COMP%]:hover{opacity:1}.fade[_ngcontent-%COMP%]{-webkit-animation-name:fade;animation-name:fade;-webkit-animation-duration:1.5s;animation-duration:1.5s}.btn-carousel[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;display:flex;align-items:center;justify-content:center;width:15%;padding:0;color:var(--ion-color-primary);text-align:center;background:0 0;border:0;cursor:pointer}.btn-prev[_ngcontent-%COMP%]{left:0}.icon-carousel[_ngcontent-%COMP%]{color:var(--ion-color-primary);opacity:.5;transition:all .15s ease}.icon-carousel.disabled[_ngcontent-%COMP%]{color:var(--ion-color-medium)}.icon-carousel[_ngcontent-%COMP%]:hover{opacity:.9}.icon-carousel[_ngcontent-%COMP%]:active{opacity:.5}.btn-next[_ngcontent-%COMP%], .icon-prev[_ngcontent-%COMP%]{font-size:35px}.btn-next[_ngcontent-%COMP%]{right:0}@-webkit-keyframes fade{0%{opacity:.4}to{opacity:1}}@keyframes fade{0%{opacity:.4}to{opacity:1}}']}),e})();var me=n("5+WD"),_e=n("pDxE"),ve=n("8BQX"),ke=n("bJsC"),Ce=n("bj5B"),ye=n("OMi/"),xe=n("O0d6"),we=n("DlHu"),Me=n("bJYY"),Oe=n("YQMm"),Pe=n("bv9b"),Se=n("ZOsW");const Le=["valuesAbilitiesSelect"];function Ae(e,t){1&e&&h.bc(0,"mat-progress-bar",9)}function Ie(e,t){if(1&e){const e=h.hc();h.gc(0,"div",10),h.gc(1,"div",11),h.gc(2,"h4",12),h.ed(3),h.tc(4,"translate"),h.fc(),h.gc(5,"div",13),h.gc(6,"ng-select",14,15),h.oc("ngModelChange",(function(t){return h.Sc(e),h.sc().ability_id=t}))("search",(function(){return h.Sc(e),h.sc().getAbilitiesDescriptions()})),h.tc(8,"translate"),h.tc(9,"translate"),h.fc(),h.fc(),h.gc(10,"div",16),h.gc(11,"ion-button",17),h.oc("click",(function(){return h.Sc(e),h.sc().saveItemByTheme()})),h.ed(12),h.tc(13,"translate"),h.fc(),h.fc(),h.fc(),h.fc()}if(2&e){const e=h.sc();h.Lb(3),h.fd(h.uc(4,10,"pages.book.add_ability")),h.Lb(3),h.Bc("addTagText",h.uc(9,14,"pages.book.add_ability")),h.Ac("items",e.abilities)("ngModel",e.ability_id)("placeholder",h.uc(8,12,"pages.book.select_ability"))("addTag",!0)("addTag",e.newAbility)("loading",e.abilitiesLoading),h.Lb(5),h.Ac("disabled",e.loading||e.abilitiesLoading),h.Lb(1),h.fd(h.uc(13,16,"buttons.add"))}}function Te(e,t){if(1&e){const e=h.hc();h.gc(0,"ion-button",21),h.oc("click",(function(){h.Sc(e);const t=h.sc(),n=t.$implicit,o=t.index;return h.sc(3).removeAility(n,o)})),h.bc(1,"ion-icon",22),h.fc()}if(2&e){const e=h.sc(4);h.Ac("disabled",e.loading)}}function ze(e,t){if(1&e&&(h.gc(0,"ion-item"),h.gc(1,"ion-label",19),h.ed(2),h.fc(),h.cd(3,Te,2,1,"ion-button",20),h.fc()),2&e){const e=t.$implicit,n=h.sc(3);h.Lb(2),h.fd(e.description),h.Lb(1),h.Ac("ngIf",n.enable_edit)}}function Ee(e,t){if(1&e&&(h.gc(0,"ion-item-group"),h.gc(1,"ion-item-divider"),h.gc(2,"ion-label"),h.ed(3),h.tc(4,"translate"),h.fc(),h.fc(),h.cd(5,ze,4,2,"ion-item",18),h.fc()),2&e){const e=h.sc(2);h.Lb(3),h.fd(h.uc(4,2,"pages.book.abilities")),h.Lb(2),h.Ac("ngForOf",e.theme.abilities_show)}}function Re(e,t){if(1&e&&(h.gc(0,"ion-list"),h.gc(1,"ion-list-header"),h.gc(2,"strong"),h.ed(3),h.tc(4,"translate"),h.fc(),h.ed(5),h.fc(),h.gc(6,"ion-list-header"),h.gc(7,"strong"),h.ed(8),h.tc(9,"translate"),h.fc(),h.ed(10),h.fc(),h.cd(11,Ee,6,4,"ion-item-group",7),h.fc()),2&e){const e=h.sc();h.Lb(3),h.gd("",h.uc(4,5,"pages.book.unity"),":"),h.Lb(2),h.gd(" ",e.theme.unity.name," "),h.Lb(3),h.gd("",h.uc(9,7,"pages.book.theme"),":"),h.Lb(2),h.gd(" ",e.theme.name," "),h.Lb(1),h.Ac("ngIf",e.theme.abilities_show&&e.theme.abilities_show.length>0)}}function Fe(e,t){1&e&&(h.gc(0,"p",23),h.ed(1),h.tc(2,"translate"),h.fc()),2&e&&(h.Lb(1),h.fd(h.uc(2,1,"pages.book.habilities_not_found")))}let Be=(()=>{class e{constructor(e,t,n,o,i){this.modalCtrl=e,this.navParams=t,this.bookService=n,this.controlErroresService=o,this.toastService=i,this.scrollbarStyle=a.a.scrollbarStyle,this.loading=!1,this.abilities=[],this.newAbilityText="",this.ability_id=null,this.enable_edit=!1,this.abilitiesLoading=!1,this.theme_uuid=this.navParams.data.theme,this.enable_edit=this.navParams.data.enable_edit,this.theme_uuid&&(this.theme_uuid=this.theme_uuid.uuid)}ngOnInit(){this.getAbilities()}getAbilities(){this.loading=!0,this.bookService.getAbilitiesByTheme(this.theme_uuid).subscribe(e=>{this.loading=!1,this.theme=e.data},e=>{this.loading=!1,this.controlErroresService.control(e),this.dismiss()})}getAbilitiesDescriptions(){this.abilitiesLoading=!0,this.bookService.getHabilitiesAvailables({q:this.valuesAbilitiesSelect.searchInput.nativeElement.value}).subscribe(e=>{this.abilitiesLoading=!1,this.abilities=e.items},e=>{this.abilitiesLoading=!1})}saveItemByTheme(){if(!this.ability_id)return this.toastService.presentToast("Seleccione la destreza","warning"),!1;let e={ability_id:null,description:null};isNaN(this.ability_id)?e.description=this.ability_id:e.ability_id=this.ability_id,this.loading=!0,this.bookService.createAbilityByTheme(this.theme_uuid,e).subscribe(e=>{Array.isArray(this.theme.abilities_show)||(this.theme.abilities_show=[]),this.loading=!1,this.theme.abilities_show.push(e.data)},e=>{this.controlErroresService.control(e),this.loading=!1})}removeAility(e,t){this.loading=!0,this.bookService.deleteAbilityByTheme(e.uuid).subscribe(e=>{this.loading=!1,this.theme.abilities_show.splice(t,1)},e=>{this.loading=!1,this.controlErroresService.control(e)})}newAbility(e){return this.newAbilityText=e,e}dismiss(e){this.modalCtrl.dismiss()}}return e.\u0275fac=function(t){return new(t||e)(h.ac(s.Db),h.ac(s.Fb),h.ac(S.a),h.ac(l.a),h.ac(p.a))},e.\u0275cmp=h.Ub({type:e,selectors:[["app-show-abilities"]],viewQuery:function(e,t){var n;1&e&&h.ld(Le,!0),2&e&&h.Nc(n=h.pc())&&(t.valuesAbilitiesSelect=n.first)},decls:13,vars:8,consts:[["translucent","true"],["slot","end"],[3,"click"],["name","close-outline"],["mode","indeterminate",4,"ngIf"],["fullscreen","true",3,"scrollbar"],["class","card p-3",4,"ngIf"],[4,"ngIf"],["class","text-center bold","style","font-size: 0.8em;",4,"ngIf"],["mode","indeterminate"],[1,"card","p-3"],[1,"pb-2"],[1,"text-bold","text-center"],[1,"col-12","flex","flex-center","flex-y"],["bindValue","id","bindLabel","description",3,"items","ngModel","placeholder","addTag","addTagText","loading","ngModelChange","search"],["valuesAbilitiesSelect",""],[1,"flex","flex-center"],["size","small","color","success",3,"disabled","click"],[4,"ngFor","ngForOf"],["text-wrap",""],["color","danger","size","small",3,"disabled","click",4,"ngIf"],["color","danger","size","small",3,"disabled","click"],["name","trash-outline"],[1,"text-center","bold",2,"font-size","0.8em"]],template:function(e,t){1&e&&(h.gc(0,"ion-header",0),h.gc(1,"ion-toolbar"),h.gc(2,"ion-title"),h.ed(3),h.tc(4,"translate"),h.fc(),h.gc(5,"ion-buttons",1),h.gc(6,"ion-button",2),h.oc("click",(function(){return t.dismiss()})),h.bc(7,"ion-icon",3),h.fc(),h.fc(),h.fc(),h.cd(8,Ae,1,0,"mat-progress-bar",4),h.fc(),h.gc(9,"ion-content",5),h.cd(10,Ie,14,18,"div",6),h.cd(11,Re,12,9,"ion-list",7),h.cd(12,Fe,3,3,"p",8),h.fc()),2&e&&(h.Lb(3),h.fd(h.uc(4,6,"pages.book.abilities")),h.Lb(5),h.Ac("ngIf",t.loading),h.Lb(1),h.Bc("scrollbar",t.scrollbarStyle),h.Lb(1),h.Ac("ngIf",t.theme&&t.theme.unity&&t.enable_edit),h.Lb(1),h.Ac("ngIf",t.theme&&t.theme.unity),h.Lb(1),h.Ac("ngIf",null!=t.theme&&t.theme.unity&&t.theme.abilities_show&&0==t.theme.abilities_show.length))},directives:[s.B,s.zb,s.xb,s.l,s.k,s.C,o.t,s.u,b.b,Pe.a,Se.a,i.r,i.u,s.O,s.P,s.J,s.I,s.N,o.s,s.H],pipes:[f.d],styles:[""]}),e})();var je=n("ePQi"),De=n("lsO8"),Ue=n("mNEo"),$e=n("m1k/"),Ne=n("xHqg"),qe=n("kmnG"),He=n("qFsG"),Ve=n("Cqmy"),Ye=n("7EHt"),Xe=n("eIsa"),Qe=n("d3UM"),Ge=n("FKr1"),We=n("/l6y"),Ke=n("5zOw"),Ze=n("bTqV");const Je=["stepper"],et=["player"],tt=["content"],nt=["valuesAbilitiesSelect"];function ot(e,t){1&e&&h.bc(0,"mat-progress-bar",34)}function it(e,t){1&e&&(h.ed(0),h.tc(1,"translate"),h.tc(2,"translate")),2&e&&h.hd("",h.uc(1,2,"pages.course.step")," 1 ",h.uc(2,4,"pages.course.of")," 3 ")}function st(e,t){if(1&e){const e=h.hc();h.gc(0,"ion-col",35),h.gc(1,"ion-card",36),h.oc("click",(function(){h.Sc(e);const n=t.$implicit,o=h.sc(),i=h.Oc(13);return o.openModeAddResources(n,i)})),h.gc(2,"ion-card-header"),h.gc(3,"ion-card-subtitle",37),h.bc(4,"ion-icon",38),h.fc(),h.gc(5,"ion-card-title",39),h.ed(6),h.fc(),h.fc(),h.fc(),h.fc()}if(2&e){const e=t.$implicit;h.Lb(4),h.Ac("name",e.icon_front),h.Lb(2),h.fd(e.name)}}function ct(e,t){1&e&&(h.ed(0),h.tc(1,"translate"),h.tc(2,"translate")),2&e&&h.hd("",h.uc(1,2,"pages.course.step")," 2 ",h.uc(2,4,"pages.course.of")," 3 ")}function at(e,t){if(1&e&&(h.gc(0,"ng-option",40),h.ed(1),h.fc()),2&e){const e=t.$implicit;h.Ac("value",e.uuid),h.Lb(1),h.fd(e.page_number)}}function rt(e,t){if(1&e&&(h.gc(0,"ng-option",40),h.ed(1),h.fc()),2&e){const e=t.$implicit;h.Ac("value",e.uuid),h.Lb(1),h.fd(e.name)}}function lt(e,t){if(1&e){const e=h.hc();h.gc(0,"div",15),h.gc(1,"label",16),h.ed(2),h.tc(3,"translate"),h.fc(),h.gc(4,"ng-select",17),h.oc("ngModelChange",(function(t){return h.Sc(e),h.sc().form.theme_id=t}))("change",(function(){h.Sc(e);const t=h.sc();return t.changeResources(),t.changeSubthemes()})),h.cd(5,rt,2,2,"ng-option",18),h.fc(),h.fc()}if(2&e){const e=h.sc();h.Lb(2),h.fd(h.uc(3,3,"forms.theme")),h.Lb(2),h.Ac("ngModel",e.form.theme_id),h.Lb(1),h.Ac("ngForOf",e.themesList)}}function dt(e,t){if(1&e&&(h.gc(0,"ng-option",40),h.ed(1),h.fc()),2&e){const e=t.$implicit;h.Ac("value",e.uuid),h.Lb(1),h.fd(e.name)}}function gt(e,t){if(1&e){const e=h.hc();h.gc(0,"div",15),h.gc(1,"label",41),h.ed(2),h.tc(3,"translate"),h.fc(),h.gc(4,"ng-select",32),h.oc("ngModelChange",(function(t){return h.Sc(e),h.sc().form.subtheme_id=t})),h.cd(5,dt,2,2,"ng-option",18),h.fc(),h.fc()}if(2&e){const e=h.sc();h.Lb(2),h.fd(h.uc(3,3,"forms.subtheme")),h.Lb(2),h.Ac("ngModel",e.form.subtheme_id),h.Lb(1),h.Ac("ngForOf",e.subthemesList)}}function ut(e,t){if(1&e&&(h.gc(0,"span"),h.ed(1),h.tc(2,"slice"),h.fc()),2&e){const e=h.sc().item;h.Lb(1),h.gd(" ",e.description.length>80?h.wc(2,1,e.description,0,80)+"...":e.description," ")}}function pt(e,t){if(1&e&&(h.gc(0,"span"),h.ed(1),h.tc(2,"slice"),h.fc()),2&e){const e=h.sc().item;h.Lb(1),h.gd(" ",e.length>80?h.wc(2,1,e,0,80)+"...":e," ")}}function ht(e,t){if(1&e&&(h.gc(0,"span",42),h.oc("click",(function(){return(0,t.clear)(t.item)})),h.ed(1,"\xd7"),h.fc(),h.gc(2,"span",43),h.cd(3,ut,3,5,"span",44),h.cd(4,pt,3,5,"span",44),h.fc()),2&e){const e=t.item;h.Lb(3),h.Ac("ngIf",e.description),h.Lb(1),h.Ac("ngIf",!e.description)}}function ft(e,t){if(1&e){const e=h.hc();h.gc(0,"textarea",51),h.oc("ngModelChange",(function(t){return h.Sc(e),h.sc(2).form.content_resource=t})),h.fc()}if(2&e){const e=h.sc(2);h.Ac("disabled",e.loading)("ngModel",e.form.content_resource)}}function bt(e,t){if(1&e){const e=h.hc();h.gc(0,"input",52),h.oc("ngModelChange",(function(t){return h.Sc(e),h.sc(2).form.content_resource=t})),h.fc()}if(2&e){const e=h.sc(2);h.Ac("disabled",e.loading)("ngModel",e.form.content_resource)}}function mt(e,t){if(1&e){const e=h.hc();h.gc(0,"ngx-file-drag-drop",53),h.oc("valueChanged",(function(t){return h.Sc(e),h.sc(2).onValueFile(t)})),h.fc()}if(2&e){const e=h.sc(2);h.Ac("accept",e.typeSelected.accept)}}function _t(e,t){if(1&e&&(h.gc(0,"mat-option",40),h.ed(1),h.fc()),2&e){const e=t.$implicit;h.Ac("value",e),h.Lb(1),h.gd(" ",e," ")}}function vt(e,t){if(1&e&&(h.gc(0,"mat-option",40),h.ed(1),h.tc(2,"translate"),h.fc()),2&e){const e=t.$implicit;h.Ac("value",e.value),h.Lb(1),h.gd(" ",h.uc(2,2,e.title)," ")}}function kt(e,t){if(1&e){const e=h.hc();h.gc(0,"ion-item"),h.gc(1,"mat-form-field",63),h.gc(2,"mat-label"),h.ed(3),h.tc(4,"translate"),h.fc(),h.gc(5,"mat-select",32),h.oc("ngModelChange",(function(t){return h.Sc(e),h.sc(3).formCreate.application_methods=t})),h.cd(6,vt,3,4,"mat-option",18),h.fc(),h.fc(),h.fc()}if(2&e){const e=h.sc(3);h.Lb(3),h.fd(h.uc(4,3,"forms.application_methods")),h.Lb(2),h.Ac("ngModel",e.formCreate.application_methods),h.Lb(1),h.Ac("ngForOf",e.application_methods_list)}}function Ct(e,t){if(1&e){const e=h.hc();h.gc(0,"ion-item"),h.gc(1,"mat-form-field",63),h.gc(2,"mat-label"),h.ed(3),h.tc(4,"translate"),h.fc(),h.gc(5,"mat-select",32),h.oc("ngModelChange",(function(t){return h.Sc(e),h.sc(3).formCreate.question_order=t})),h.gc(6,"mat-option",71),h.ed(7),h.tc(8,"translate"),h.fc(),h.gc(9,"mat-option",72),h.ed(10),h.tc(11,"translate"),h.fc(),h.fc(),h.fc(),h.fc()}if(2&e){const e=h.sc(3);h.Lb(3),h.fd(h.uc(4,4,"forms.question_order")),h.Lb(2),h.Ac("ngModel",e.formCreate.question_order),h.Lb(2),h.fd(h.uc(8,6,"forms.order_creation")),h.Lb(3),h.fd(h.uc(11,8,"forms.random"))}}function yt(e,t){if(1&e&&(h.gc(0,"mat-option",40),h.ed(1),h.tc(2,"translate"),h.fc()),2&e){const e=t.$implicit;h.Ac("value",e.value),h.Lb(1),h.gd(" ",h.uc(2,2,e.title)," ")}}function xt(e,t){if(1&e){const e=h.hc();h.gc(0,"ion-item"),h.gc(1,"mat-form-field",63),h.gc(2,"mat-label"),h.ed(3),h.tc(4,"translate"),h.fc(),h.gc(5,"mat-select",32),h.oc("ngModelChange",(function(t){return h.Sc(e),h.sc(3).formCreate.items_per_page=t})),h.cd(6,yt,3,4,"mat-option",18),h.fc(),h.fc(),h.fc()}if(2&e){const e=h.sc(3);h.Lb(3),h.fd(h.uc(4,3,"forms.items_per_page_title")),h.Lb(2),h.Ac("ngModel",e.formCreate.items_per_page),h.Lb(1),h.Ac("ngForOf",e.items_per_page)}}function wt(e,t){if(1&e&&(h.gc(0,"mat-option",40),h.ed(1),h.tc(2,"translate"),h.fc()),2&e){const e=t.$implicit;h.Ac("value",e.value),h.Lb(1),h.gd(" ",h.uc(2,2,e.title)," ")}}function Mt(e,t){if(1&e&&(h.gc(0,"mat-option",40),h.ed(1),h.tc(2,"translate"),h.fc()),2&e){const e=t.$implicit;h.Ac("value",e.value),h.Lb(1),h.gd(" ",h.uc(2,2,e.title)," ")}}const Ot=function(){return[1,2,3,4,5,6,7,8,9,0]};function Pt(e,t){if(1&e){const e=h.hc();h.gc(0,"div"),h.gc(1,"ion-item",54),h.gc(2,"mat-accordion",55),h.gc(3,"mat-expansion-panel",56),h.oc("opened",(function(){return h.Sc(e),h.sc(2).panelOpenState=!0}))("closed",(function(){return h.Sc(e),h.sc(2).panelOpenState=!1})),h.gc(4,"mat-expansion-panel-header"),h.gc(5,"mat-panel-title"),h.ed(6),h.tc(7,"translate"),h.fc(),h.bc(8,"mat-panel-description"),h.fc(),h.gc(9,"div"),h.gc(10,"ion-item"),h.gc(11,"ckeditor",57),h.oc("ngModelChange",(function(t){return h.Sc(e),h.sc(2).formCreate.text=t})),h.fc(),h.fc(),h.fc(),h.fc(),h.fc(),h.fc(),h.gc(12,"ion-item",54),h.gc(13,"mat-accordion",55),h.gc(14,"mat-expansion-panel",56),h.oc("opened",(function(){return h.Sc(e),h.sc(2).panelOpenState=!0}))("closed",(function(){return h.Sc(e),h.sc(2).panelOpenState=!1})),h.gc(15,"mat-expansion-panel-header"),h.gc(16,"mat-panel-title"),h.ed(17),h.tc(18,"translate"),h.fc(),h.bc(19,"mat-panel-description"),h.fc(),h.gc(20,"div"),h.gc(21,"ion-item"),h.gc(22,"div",58),h.gc(23,"div",59),h.gc(24,"label",60),h.ed(25),h.tc(26,"translate"),h.fc(),h.gc(27,"input",61),h.oc("ngModelChange",(function(t){return h.Sc(e),h.sc(2).form.qualification=t})),h.fc(),h.fc(),h.fc(),h.fc(),h.gc(28,"ion-item"),h.gc(29,"ion-label",62),h.ed(30),h.tc(31,"translate"),h.fc(),h.fc(),h.gc(32,"ion-item"),h.gc(33,"div",37),h.gc(34,"mat-form-field",63),h.gc(35,"mat-label"),h.ed(36),h.tc(37,"translate"),h.fc(),h.gc(38,"input",64),h.oc("ngModelChange",(function(t){return h.Sc(e),h.sc(2).formCreate.max_time_hour=t})),h.fc(),h.fc(),h.gc(39,"mat-form-field",63),h.gc(40,"mat-label"),h.ed(41),h.tc(42,"translate"),h.fc(),h.gc(43,"input",65),h.oc("ngModelChange",(function(t){return h.Sc(e),h.sc(2).formCreate.max_time_minutes=t})),h.fc(),h.fc(),h.fc(),h.fc(),h.fc(),h.gc(44,"div"),h.gc(45,"ion-list"),h.gc(46,"ion-radio-group",32),h.oc("ngModelChange",(function(t){return h.Sc(e),h.sc(2).formCreate.is_averaged=t})),h.gc(47,"ion-list-header"),h.ed(48),h.tc(49,"translate"),h.fc(),h.gc(50,"ion-item"),h.gc(51,"ion-label"),h.ed(52),h.tc(53,"translate"),h.fc(),h.bc(54,"ion-radio",66),h.fc(),h.gc(55,"ion-item"),h.gc(56,"ion-label"),h.ed(57),h.tc(58,"translate"),h.fc(),h.bc(59,"ion-radio",67),h.fc(),h.fc(),h.fc(),h.fc(),h.fc(),h.fc(),h.fc(),h.gc(60,"ion-item"),h.gc(61,"mat-accordion",68),h.gc(62,"mat-expansion-panel",69),h.oc("opened",(function(){return h.Sc(e),h.sc(2).panelOpenState=!0}))("closed",(function(){return h.Sc(e),h.sc(2).panelOpenState=!1})),h.gc(63,"mat-expansion-panel-header"),h.gc(64,"mat-panel-title"),h.ed(65),h.tc(66,"translate"),h.fc(),h.bc(67,"mat-panel-description"),h.fc(),h.gc(68,"div"),h.gc(69,"ion-item"),h.gc(70,"mat-form-field",63),h.gc(71,"mat-label"),h.ed(72),h.tc(73,"translate"),h.fc(),h.gc(74,"mat-select",32),h.oc("ngModelChange",(function(t){return h.Sc(e),h.sc(2).formCreate.attempts_allowed=t})),h.cd(75,_t,2,2,"mat-option",18),h.fc(),h.fc(),h.fc(),h.cd(76,kt,7,5,"ion-item",44),h.fc(),h.fc(),h.fc(),h.fc(),h.gc(77,"ion-item"),h.gc(78,"mat-accordion",70),h.gc(79,"mat-expansion-panel",69),h.oc("opened",(function(){return h.Sc(e),h.sc(2).panelOpenState=!0}))("closed",(function(){return h.Sc(e),h.sc(2).panelOpenState=!1})),h.gc(80,"mat-expansion-panel-header"),h.gc(81,"mat-panel-title"),h.ed(82),h.tc(83,"translate"),h.fc(),h.bc(84,"mat-panel-description"),h.fc(),h.gc(85,"div"),h.cd(86,Ct,12,10,"ion-item",44),h.cd(87,xt,7,5,"ion-item",44),h.gc(88,"ion-item"),h.gc(89,"mat-form-field",63),h.gc(90,"mat-label"),h.ed(91),h.tc(92,"translate"),h.fc(),h.gc(93,"mat-select",32),h.oc("ngModelChange",(function(t){return h.Sc(e),h.sc(2).formCreate.order_answers=t})),h.gc(94,"mat-option",71),h.ed(95),h.tc(96,"translate"),h.fc(),h.gc(97,"mat-option",72),h.ed(98),h.tc(99,"translate"),h.fc(),h.fc(),h.fc(),h.fc(),h.fc(),h.fc(),h.fc(),h.fc(),h.gc(100,"ion-item"),h.gc(101,"mat-accordion",73),h.gc(102,"mat-expansion-panel",69),h.oc("opened",(function(){return h.Sc(e),h.sc(2).panelOpenState=!0}))("closed",(function(){return h.Sc(e),h.sc(2).panelOpenState=!1})),h.gc(103,"mat-expansion-panel-header"),h.gc(104,"mat-panel-title"),h.ed(105),h.tc(106,"translate"),h.fc(),h.bc(107,"mat-panel-description"),h.fc(),h.gc(108,"div"),h.gc(109,"ion-item",74),h.gc(110,"mat-form-field",75),h.gc(111,"mat-label"),h.ed(112),h.tc(113,"translate"),h.fc(),h.gc(114,"mat-select",32),h.oc("ngModelChange",(function(t){return h.Sc(e),h.sc(2).formCreate.option_show_answer=t})),h.cd(115,wt,3,4,"mat-option",18),h.fc(),h.fc(),h.fc(),h.gc(116,"ion-item"),h.gc(117,"mat-form-field",75),h.gc(118,"mat-label"),h.ed(119),h.tc(120,"translate"),h.fc(),h.gc(121,"mat-select",32),h.oc("ngModelChange",(function(t){return h.Sc(e),h.sc(2).formCreate.option_show_correct_as=t})),h.cd(122,Mt,3,4,"mat-option",18),h.fc(),h.fc(),h.fc(),h.fc(),h.fc(),h.fc(),h.fc(),h.fc()}if(2&e){const e=h.sc(2);h.Lb(6),h.gd(" ",h.uc(7,34,"forms.header")," "),h.Lb(5),h.Ac("ngModel",e.formCreate.text),h.Lb(6),h.gd(" ",h.uc(18,36,"forms.principal_options")," "),h.Lb(8),h.fd(h.uc(26,38,"forms.qualification_max")),h.Lb(2),h.Ac("ngModel",e.form.qualification)("disabled",!0),h.Lb(3),h.gd(" ",h.uc(31,40,"forms.time_limit")," "),h.Lb(6),h.fd(h.uc(37,42,"forms.hours")),h.Lb(2),h.Ac("ngModel",e.formCreate.max_time_hour),h.Lb(3),h.fd(h.uc(42,44,"forms.minutes")),h.Lb(2),h.Ac("ngModel",e.formCreate.max_time_minutes),h.Lb(3),h.Ac("ngModel",e.formCreate.is_averaged),h.Lb(2),h.gd(" ",h.uc(49,46,"forms.is_averaged")," "),h.Lb(4),h.fd(h.uc(53,48,"forms.yes")),h.Lb(5),h.fd(h.uc(58,50,"forms.no")),h.Lb(8),h.gd(" ",h.uc(66,52,"forms.qualification_method")," "),h.Lb(7),h.fd(h.uc(73,54,"forms.attempts_allowed")),h.Lb(2),h.Ac("ngModel",e.formCreate.attempts_allowed),h.Lb(1),h.Ac("ngForOf",h.Ec(70,Ot)),h.Lb(1),h.Ac("ngIf",e.formCreate.attempts_allowed>1),h.Lb(6),h.gd(" ",h.uc(83,56,"forms.scheme")," "),h.Lb(4),h.Ac("ngIf","form"==e.typeSelected.type),h.Lb(1),h.Ac("ngIf","form"==e.typeSelected.type),h.Lb(4),h.fd(h.uc(92,58,"forms.order_answers_random")),h.Lb(2),h.Ac("ngModel",e.formCreate.order_answers),h.Lb(2),h.fd(h.uc(96,60,"forms.no")),h.Lb(3),h.fd(h.uc(99,62,"forms.yes")),h.Lb(7),h.gd(" ",h.uc(106,64,"forms.feed_back")," "),h.Lb(7),h.fd(h.uc(113,66,"forms.show_answers_student")),h.Lb(2),h.Ac("ngModel",e.formCreate.option_show_answer),h.Lb(1),h.Ac("ngForOf",e.optionShowAnswer),h.Lb(4),h.fd(h.uc(120,68,"forms.correct_answers_show")),h.Lb(2),h.Ac("ngModel",e.formCreate.option_show_correct_as),h.Lb(1),h.Ac("ngForOf",e.optionShowCorrectAnswer)}}function St(e,t){if(1&e){const e=h.hc();h.gc(0,"div",76),h.gc(1,"ion-button",29),h.oc("click",(function(){return h.Sc(e),h.sc(2).openQuestionary()})),h.bc(2,"ion-icon",77),h.ed(3),h.tc(4,"translate"),h.fc(),h.fc()}2&e&&(h.Lb(3),h.gd(" ",h.uc(4,1,"pages.course.edit_form")," "))}function Lt(e,t){if(1&e){const e=h.hc();h.gc(0,"ion-col",35),h.gc(1,"ion-card",80),h.gc(2,"ion-card-header",81),h.oc("click",(function(){h.Sc(e);const n=t.$implicit,o=h.sc(4);return o.videoQuiz.type=n,o.clearFormBuilder()})),h.gc(3,"ion-card-subtitle",37),h.bc(4,"ion-icon",38),h.fc(),h.gc(5,"ion-card-title",39),h.ed(6),h.fc(),h.fc(),h.gc(7,"ion-card-content",82),h.gc(8,"ion-button",83),h.bc(9,"ion-icon",84),h.fc(),h.fc(),h.fc(),h.fc()}if(2&e){const e=t.$implicit;h.Lb(4),h.Ac("name",e.icon),h.Lb(2),h.fd(e.name),h.Lb(2),h.Ac("href",e.web_explicativa)}}function At(e,t){if(1&e&&(h.gc(0,"ion-grid",12),h.gc(1,"ion-label"),h.ed(2),h.tc(3,"translate"),h.fc(),h.gc(4,"ion-row",13),h.cd(5,Lt,10,3,"ion-col",14),h.fc(),h.fc()),2&e){const e=h.sc(3);h.Lb(2),h.fd(h.uc(3,2,"forms.select-type-vide")),h.Lb(3),h.Ac("ngForOf",e.typesQuizVideos)}}function It(e,t){if(1&e){const e=h.hc();h.gc(0,"mat-form-field",24),h.gc(1,"mat-label"),h.ed(2),h.tc(3,"translate"),h.fc(),h.gc(4,"input",88),h.oc("ngModelChange",(function(t){return h.Sc(e),h.sc(4).videoQuiz.video_id=t})),h.fc(),h.fc()}if(2&e){const e=h.sc(4);h.Lb(2),h.fd(h.uc(3,3,"forms.id_video")),h.Lb(2),h.Ac("disabled",e.videoQuiz.isSaved)("ngModel",e.videoQuiz.video_id)}}function Tt(e,t){if(1&e){const e=h.hc();h.gc(0,"mat-form-field",24),h.gc(1,"mat-label"),h.ed(2),h.tc(3,"translate"),h.fc(),h.gc(4,"input",25),h.oc("ngModelChange",(function(t){return h.Sc(e),h.sc(4).videoQuiz.url=t})),h.fc(),h.fc()}if(2&e){const e=h.sc(4);h.Lb(2),h.fd(h.uc(3,3,"forms.link_video")),h.Lb(2),h.Ac("disabled",e.videoQuiz.isSaved)("ngModel",e.videoQuiz.url)}}function zt(e,t){if(1&e){const e=h.hc();h.gc(0,"mat-form-field",24),h.gc(1,"mat-label"),h.ed(2),h.tc(3,"translate"),h.fc(),h.gc(4,"input",88),h.oc("ngModelChange",(function(t){return h.Sc(e),h.sc(4).videoQuiz.poster=t})),h.fc(),h.fc()}if(2&e){const e=h.sc(4);h.Lb(2),h.fd(h.uc(3,3,"forms.poster_video")),h.Lb(2),h.Ac("disabled",e.videoQuiz.isSaved)("ngModel",e.videoQuiz.poster)}}function Et(e,t){if(1&e){const e=h.hc();h.gc(0,"vm-player",92,93),h.oc("vmCurrentTimeChange",(function(t){return h.Sc(e),h.sc(5).onTimeUpdate(t)}))("vmFullscreenChange",(function(t){return h.Sc(e),h.sc(5).onFullscreenChange(t)})),h.bc(2,"vm-youtube",94),h.bc(3,"vm-default-ui"),h.fc()}if(2&e){const e=h.sc(5);h.Ac("currentTime",e.currentTime),h.Lb(2),h.Ac("videoId",e.videoQuiz.video_id)}}function Rt(e,t){if(1&e&&h.bc(0,"vm-vimeo",99),2&e){const e=h.sc(6);h.Ac("videoId",e.videoQuiz.video_id)}}function Ft(e,t){if(1&e&&h.bc(0,"track",100),2&e){const e=h.sc(6);h.Ac("src",e.videoQuiz.subtitles,h.Vc)}}function Bt(e,t){if(1&e){const e=h.hc();h.gc(0,"vm-player",95,93),h.oc("vmCurrentTimeChange",(function(t){return h.Sc(e),h.sc(5).onTimeUpdate(t)}))("vmFullscreenChange",(function(t){return h.Sc(e),h.sc(5).onFullscreenChange(t)})),h.cd(2,Rt,1,1,"vm-vimeo",96),h.bc(3,"vm-default-ui"),h.bc(4,"source",97),h.cd(5,Ft,1,1,"track",98),h.fc()}if(2&e){const e=h.sc(5);h.Ac("currentTime",e.currentTime),h.Lb(2),h.Ac("ngSwitchCase","vimeo"),h.Lb(2),h.Bc("src",e.videoQuiz.url,h.Vc),h.Lb(1),h.Ac("ngIf",e.videoQuiz.subtitles)}}function jt(e,t){if(1&e&&h.bc(0,"track",100),2&e){const e=h.sc(6);h.Ac("src",e.videoQuiz.subtitles,h.Vc)}}function Dt(e,t){if(1&e){const e=h.hc();h.gc(0,"vm-player",101,93),h.oc("vmCurrentTimeChange",(function(t){return h.Sc(e),h.sc(5).onTimeUpdate(t)}))("vmFullscreenChange",(function(t){return h.Sc(e),h.sc(5).onFullscreenChange(t)})),h.gc(2,"vm-video",102),h.bc(3,"source",97),h.cd(4,jt,1,1,"track",98),h.fc(),h.bc(5,"vm-default-ui"),h.fc()}if(2&e){const e=h.sc(5);h.Ac("currentTime",e.currentTime),h.Lb(2),h.Ac("poster",e.videoQuiz.poster),h.Lb(1),h.Bc("src",e.videoQuiz.url,h.Vc),h.Lb(1),h.Ac("ngIf",e.videoQuiz.subtitles)}}function Ut(e,t){if(1&e&&(h.ec(0,45),h.cd(1,Et,4,2,"vm-player",89),h.cd(2,Bt,6,4,"vm-player",90),h.cd(3,Dt,6,4,"vm-player",91),h.dc()),2&e){const e=h.sc(4);h.Ac("ngSwitch",e.videoQuiz.type.system_name),h.Lb(1),h.Ac("ngSwitchCase","youtube"),h.Lb(1),h.Ac("ngSwitchCase","vimeo"),h.Lb(1),h.Ac("ngSwitchCase","video")}}function $t(e,t){if(1&e){const e=h.hc();h.gc(0,"ion-button",103),h.oc("click",(function(){return h.Sc(e),h.sc(4).getParamIdByLink()})),h.ed(1),h.tc(2,"translate"),h.fc()}2&e&&(h.Ac("color","primary"),h.Lb(1),h.fd(h.uc(2,2,"buttons.confirm_video")))}function Nt(e,t){if(1&e){const e=h.hc();h.gc(0,"ion-button",103),h.oc("click",(function(){return h.Sc(e),h.sc(4).videoQuiz.isSaved=!1})),h.ed(1),h.tc(2,"translate"),h.fc()}2&e&&(h.Ac("color","warning"),h.Lb(1),h.fd(h.uc(2,2,"buttons.change_options")))}function qt(e,t){if(1&e){const e=h.hc();h.gc(0,"mat-expansion-panel",107),h.gc(1,"mat-expansion-panel-header"),h.gc(2,"mat-panel-title"),h.gc(3,"ion-list"),h.gc(4,"strong"),h.ed(5),h.fc(),h.fc(),h.fc(),h.fc(),h.gc(6,"div"),h.bc(7,"p",108),h.bc(8,"asw-preview-template",109),h.gc(9,"div",110),h.gc(10,"div"),h.bc(11,"ion-icon",111),h.ed(12),h.tc(13,"translate"),h.fc(),h.fc(),h.fc(),h.gc(14,"mat-action-row"),h.gc(15,"button",112),h.oc("click",(function(){h.Sc(e);const n=t.$implicit;return h.sc(5).editIemForQuestion(n)})),h.bc(16,"ion-icon",113),h.ed(17),h.tc(18,"translate"),h.fc(),h.gc(19,"button",114),h.oc("click",(function(){h.Sc(e);const n=t.index;return h.sc(5).deleteIemForQuestion(n)})),h.bc(20,"ion-icon",115),h.ed(21),h.tc(22,"translate"),h.fc(),h.fc(),h.fc()}if(2&e){const e=t.$implicit;h.Lb(5),h.fd(e.time_show),h.Lb(2),h.Ac("innerHTML",e.content,h.Tc),h.Lb(1),h.Ac("formContainer",e.list)("disabled",!0),h.Lb(4),h.hd(" ",e.punctuation," ",h.uc(13,8,1==e.punctuation?"buttons.point":"buttons.points")," "),h.Lb(5),h.gd(" ",h.uc(18,10,"buttons.edit"),""),h.Lb(4),h.gd(" ",h.uc(22,12,"buttons.delete"),"")}}function Ht(e,t){if(1&e){const e=h.hc();h.gc(0,"ion-card"),h.gc(1,"ion-card-header"),h.gc(2,"ion-card-title"),h.ed(3),h.gc(4,"ion-button",29),h.oc("click",(function(){return h.Sc(e),h.sc(4).addANewIptionQuizTime()})),h.bc(5,"ion-icon",104),h.tc(6,"translate"),h.fc(),h.fc(),h.fc(),h.gc(7,"ion-card-content"),h.gc(8,"div",58),h.gc(9,"div",59),h.gc(10,"label",60),h.ed(11),h.tc(12,"translate"),h.fc(),h.gc(13,"strong"),h.ed(14),h.fc(),h.fc(),h.fc(),h.gc(15,"mat-accordion",105),h.cd(16,qt,23,14,"mat-expansion-panel",106),h.fc(),h.gc(17,"ion-list"),h.gc(18,"ion-item"),h.bc(19,"ion-label"),h.fc(),h.fc(),h.fc(),h.fc()}if(2&e){const e=h.sc(4);h.Lb(3),h.gd("",e.currentTimeString," "),h.Lb(2),h.Ac("matTooltip",h.uc(6,5,"buttons.addTimeVideoQuiz")),h.Lb(6),h.gd("",h.uc(12,7,"forms.qualification_max"),":"),h.Lb(3),h.fd(e.form.qualification),h.Lb(2),h.Ac("ngForOf",e.forms_group)}}function Vt(e,t){if(1&e&&(h.ec(0),h.cd(1,It,5,5,"mat-form-field",27),h.cd(2,Tt,5,5,"mat-form-field",27),h.cd(3,zt,5,5,"mat-form-field",27),h.gc(4,"div",85),h.cd(5,Ut,4,4,"ng-container",86),h.fc(),h.gc(6,"div",28),h.cd(7,$t,3,4,"ion-button",87),h.cd(8,Nt,3,4,"ion-button",87),h.fc(),h.cd(9,Ht,20,9,"ion-card",44),h.dc()),2&e){const e=h.sc(3);h.Lb(1),h.Ac("ngIf",e.videoQuiz.type.show_id),h.Lb(1),h.Ac("ngIf",e.videoQuiz.type.show_url),h.Lb(1),h.Ac("ngIf",e.videoQuiz.type.show_poster),h.Lb(2),h.Ac("ngIf",e.videoQuiz.isSaved),h.Lb(2),h.Ac("ngIf",!e.videoQuiz.isSaved),h.Lb(1),h.Ac("ngIf",e.videoQuiz.isSaved),h.Lb(1),h.Ac("ngIf",e.videoQuiz.isSaved)}}function Yt(e,t){if(1&e&&(h.gc(0,"div",78),h.cd(1,At,6,4,"ion-grid",79),h.cd(2,Vt,10,7,"ng-container",44),h.fc()),2&e){const e=h.sc(2);h.Lb(1),h.Ac("ngIf",null==e.videoQuiz.type),h.Lb(1),h.Ac("ngIf",e.videoQuiz.type)}}function Xt(e,t){if(1&e&&(h.gc(0,"div",24),h.gc(1,"mat-label"),h.ed(2),h.fc(),h.ec(3,45),h.cd(4,ft,1,2,"textarea",46),h.cd(5,bt,1,2,"input",47),h.cd(6,mt,1,1,"ngx-file-drag-drop",48),h.cd(7,Pt,123,71,"div",44),h.cd(8,St,5,3,"div",49),h.cd(9,Yt,3,2,"div",50),h.dc(),h.fc()),2&e){const e=h.sc();h.Lb(2),h.fd(e.typeSelected.name),h.Lb(1),h.Ac("ngSwitch",e.typeSelected.type),h.Lb(1),h.Ac("ngSwitchCase","textarea"),h.Lb(1),h.Ac("ngSwitchCase","text"),h.Lb(1),h.Ac("ngSwitchCase","file"),h.Lb(1),h.Ac("ngIf","form"==e.typeSelected.type||"video-quiz"==e.typeSelected.type),h.Lb(1),h.Ac("ngSwitchCase","form"),h.Lb(1),h.Ac("ngSwitchCase","video-quiz")}}function Qt(e,t){1&e&&(h.ed(0),h.tc(1,"translate"),h.tc(2,"translate")),2&e&&h.hd("",h.uc(1,2,"pages.course.step")," 3 ",h.uc(2,4,"pages.course.of")," 3 ")}function Gt(e,t){if(1&e&&(h.gc(0,"ng-option",40),h.ed(1),h.fc()),2&e){const e=t.$implicit;h.Ac("value",e.uuid),h.Lb(1),h.fd(e.description)}}function Wt(e,t){if(1&e&&(h.gc(0,"ng-option",40),h.ed(1),h.fc()),2&e){const e=t.$implicit;h.Ac("value",e.uuid),h.Lb(1),h.fd(e.name)}}function Kt(e,t){if(1&e){const e=h.hc();h.gc(0,"div",15),h.gc(1,"label",16),h.ed(2),h.tc(3,"translate"),h.fc(),h.gc(4,"ng-select",31),h.oc("ngModelChange",(function(t){return h.Sc(e),h.sc().form.reply_by=t})),h.cd(5,Wt,2,2,"ng-option",18),h.fc(),h.fc()}if(2&e){const e=h.sc();h.Lb(2),h.fd(h.uc(3,4,"forms.repply_in_linked_books")),h.Lb(2),h.Ac("ngModel",e.form.reply_by)("multiple",!0),h.Lb(1),h.Ac("ngForOf",e.books)}}function Zt(e,t){if(1&e&&(h.gc(0,"ng-option",40),h.ed(1),h.fc()),2&e){const e=t.$implicit;h.Ac("value",e.uuid),h.Lb(1),h.fd(e.name)}}let Jt=(()=>{class e{constructor(e,t,n,o,i,s,c){var l;this.modalCtrl=e,this.navParams=t,this.resourcesService=n,this.booksService=o,this.controlErroresService=i,this.toastService=s,this.questionaryService=c,this.currentTime=0,this.currentTimeString="00:00:00",this.scrollbarStyle=a.a.scrollbarStyle,this.themesList=[],this.resource_type="book",this.parent_id=0,this.loading=!1,this.loading_2=!1,this.types=[],this.typeSelected=null,this.form={title:"",description:"",range_age:"",language:"",type_resource_id:null,page_id:null,book_id:null,theme_id:null,subtheme_id:null,context_id:null,addressed_to:[],top:null,left:null,content_resource:null,qualification:0,reply_by:[],colaborar_id:null,abilities:[]},this.videoQuiz={url:"",poster:"",subtitles:"",video_id:"",volume:0,isSaved:!1,type:null},this.typesQuizVideos=a.a.typesQuizVideos,this.formCreate={text:"",can_comment:0,max_time:"00:00",max_time_hour:0,max_time_minutes:10,attempts_allowed:1,application_methods:"first_attempt",question_order:"asc",items_per_page:"all",order_answers:"asc",is_averaged:"0",option_show_answer:"show_answers_finished_quiz",option_show_correct_as:"show_answers_finished_quiz"},this.items_per_page=r.b.items_per_page,this.application_methods_list=r.b.application_methods_list,this.optionShowAnswer=r.b.optionShowAnswer,this.optionShowCorrectAnswer=r.b.optionShowAnswer,this.forms_group=[],this.contexts=[],this.roles=[],this.selectedPages=[],this.pagesBook=[],this.resource_id=null,this.book=null,this.books=[],this.subthemesList=[],this.abilities=[],this.abilitiesLoading=!1,this.parent_id=t.data.parent_id,this.book=t.data.book,this.resource_type=t.data.resource_type,this.selectedPages=null!==(l=t.data.selectedPages)&&void 0!==l?l:[],this.resource_id=t.data.resource_id,this.colaborar_id=t.data.colaborar_id,this.form.colaborar_id=this.colaborar_id,this.resource_id||(this.forms_group=[{uuid:null,punctuation:10,list:[{displayName:"Una opci\xf3n",controlType:"radio",name:"radio",punctuation:"10",label:"Maque la respuesta correcta",tooltip:"radio",isRequired:!1,value:"option-1",options:[{key:"option-1",value:"Opci\xf3n 1",percentage:100},{key:"option-2",value:"Opci\xf3n 2",percentage:0},{key:"option-3",value:"Opci\xf3n 3",percentage:0}]}],content:"<p>Edite su pregunta</p>\n"}]),null!=this.book&&Array.isArray(this.book.roles)&&(this.form.addressed_to=this.book.roles.map(e=>e.uuid)),null!=this.book&&Array.isArray(this.book.books)&&(this.books=this.book.books),this.form.book_id=this.book.uuid}seekForward(){this.currentTime+=5}enterFullscreen(){console.log("enterFullscreen"),this.player.enterFullscreen()}onTimeUpdate(e){console.log("onTimeUpdate"),this.currentTime=e.detail,this.currentTimeString=this.fancyTimeFormat(this.currentTime)}onFullscreenChange(e){console.log("onFullscreenChange")}clearFormBuilder(){this.forms_group=[]}addANewIptionQuizTime(){let e=this.currentTime,t={uuid:null,punctuation:1,time_video:e,time_show:this.fancyTimeFormat(e),list:[{displayName:"Una opci\xf3n",controlType:"radio",name:"radio",punctuation:"1",label:"Maque la respuesta correcta",tooltip:"radio",isRequired:!1,value:"option-1",options:[{key:"option-1",value:"Opci\xf3n 1",percentage:100},{key:"option-2",value:"Opci\xf3n 2",percentage:0},{key:"option-3",value:"Opci\xf3n 3",percentage:0}]}],content:"<p>Edite su pregunta</p>\n"};if(this.player.pause(),this.forms_group.findIndex(e=>e.time_show==t.time_show)>=1)this.toastService.presentToast("Este tiempo ya est\xe1 ocupado","warning");else{this.forms_group.push(t),this.forms_group=this.forms_group.sort((e,t)=>e.time_video-t.time_video);for(const e of this.forms_group)this.form.qualification+=+e.punctuation||0;this.scrollToBottom()}}scrollToBottom(){this.content.scrollToBottom(300)}deleteIemForQuestion(e){this.forms_group.splice(e,1),this.form.qualification=0;for(const t of this.forms_group)this.form.qualification+=+t.punctuation||0}ngOnInit(){this.getTypesResources(),this.getPageIds()}findItem(){this.resourcesService.find(this.resource_id).subscribe(e=>{null!=e.data.abilities&&Array.isArray(e.data.abilities)&&(this.abilities=e.data.abilities.map(e=>({id:e.ability_id,description:e.description}))),this.form={theme_id:null!=e.data.theme_uuid&&"0"!=e.data.theme_uuid?e.data.theme_uuid:null,subtheme_id:null!=e.data.subtheme_uuid&&"0"!=e.data.subtheme_uuid?e.data.subtheme_uuid:null,title:e.data.title,description:e.data.description,range_age:e.data.range_age,language:e.data.language,colaborar_id:e.data.resource_id,book_id:null,type_resource_id:e.data.type_resource_uuid,page_id:e.data.page_uuid,context_id:e.data.context_uuid,addressed_to:Array.isArray(e.data.roles)?e.data.roles.map(e=>e.uuid):[],top:e.data.top,left:e.data.left,content_resource:e.data.type_resource&&"file"==e.data.type_resource.type?null:e.data.content_resource,qualification:e.data.qualification,reply_by:[],abilities:null!=e.data.abilities&&Array.isArray(e.data.abilities)?e.data.abilities.map(e=>e.ability_id):[]},null!=e.data.questionary&&(this.form.qualification=isNaN(e.data.questionary.qualification)?e.data.questionary.qualification:+e.data.questionary.qualification,this.formCreate={text:e.data.questionary.text,can_comment:e.data.questionary.can_comment,max_time:A(e.data.questionary.max_time,"HH:mm:ss").format("HH:mm"),attempts_allowed:e.data.questionary.attempts_allowed,application_methods:e.data.questionary.application_methods,question_order:e.data.questionary.question_order,items_per_page:e.data.questionary.items_per_page,order_answers:e.data.questionary.order_answers_random,is_averaged:e.data.questionary.is_averaged+"",option_show_answer:e.data.questionary.option_show_answer,option_show_correct_as:e.data.questionary.option_show_correct_as,max_time_hour:+A(e.data.questionary.max_time,"HH:mm:ss").format("HH"),max_time_minutes:+A(e.data.questionary.max_time,"HH:mm:ss").format("mm")},this.forms_group=this.questionaryService.refactorListQuestionary(e.data.questionary.questions),e.data.questionary.video_quiz&&(this.videoQuiz={url:e.data.questionary.video_quiz.url,poster:e.data.questionary.video_quiz.poster,subtitles:e.data.questionary.video_quiz.subtitles,video_id:e.data.questionary.video_quiz.video_id,volume:0,isSaved:!0,type:this.typesQuizVideos.find(t=>t.id==e.data.questionary.video_quiz.type_id)})),this.changePageItems(),this.openModeAddResources(e.data.type_resource,this.stepper)},e=>{this.controlErroresService.control(e),this.dismiss()})}getTypesResources(){this.loading=!0,this.resourcesService.getTypes({}).subscribe(e=>{this.loading=!1,this.types=e.types,this.contexts=e.contexts,this.roles=e.roles},e=>{this.controlErroresService.control(e),this.loading=!1})}getPageIds(){this.loading_2=!0,this.booksService.getIdsPages(this.selectedPages,this.parent_id).subscribe(e=>{this.loading_2=!1,this.pagesBook=e.data,null!=this.resource_id&&this.findItem()},e=>{this.controlErroresService.control(e),this.loading_2=!1})}openModeAddResources(e,t){this.typeSelected=e,this.form.type_resource_id=e.uuid,t.next()}save(){let e=this.form;if(this.loading=!0,null==this.typeSelected)return this.toastService.presentToast("Seleccione La categor\xeda de recursos","warning"),!1;"file"==this.typeSelected.type&&(e=Object(r.c)(e)),"form"!=this.typeSelected.type&&"video-quiz"!=this.typeSelected.type||(e.content_resource="form-builder",e.questions=this.forms_group,this.formCreate.max_time=A().set("minutes",this.formCreate.max_time_minutes).set("hours",this.formCreate.max_time_hour).format("HH:mm"),e.qualification=this.form.qualification,e.text=this.formCreate.text,e.can_comment=this.formCreate.can_comment,e.max_time=this.formCreate.max_time,e.attempts_allowed=this.formCreate.attempts_allowed,e.application_methods=this.formCreate.application_methods,e.question_order=this.formCreate.question_order,e.items_per_page=this.formCreate.items_per_page,e.order_answers=this.formCreate.order_answers,e.is_averaged=this.formCreate.is_averaged,e.option_show_answer=this.formCreate.option_show_answer,e.option_show_correct_as=this.formCreate.option_show_correct_as,"video-quiz"==this.typeSelected.type&&(e.video_quiz=this.videoQuiz));let t=this.resourcesService.store(e);null!=this.resource_id&&(t=this.resourcesService.update(e,this.resource_id)),t.subscribe(e=>{let t=this.pagesBook.find(e=>e.uuid==this.form.page_id);this.loading=!1,this.dismiss({type:this.typeSelected,resource:e.data.resource,page_number:t?t.page_number:0}),this.toastService.presentToast(e.message,e.status)},e=>{this.loading=!1,this.controlErroresService.control(e)})}dismiss(e){this.modalCtrl.dismiss(e)}onValueFile(e){this.form.content_resource=e[0]}previewStep(e,t=!1){e.previous(),t&&(this.form={subtheme_id:null,title:"",description:"",range_age:"",language:"",type_resource_id:null,page_id:null,theme_id:null,context_id:null,book_id:null,addressed_to:[],top:null,left:null,content_resource:null,qualification:0,reply_by:[],colaborar_id:null,abilities:[]},this.videoQuiz={url:"https://media.vimejs.com/720p.mp4",poster:"https://media.vimejs.com/poster.png",subtitles:"https://media.vimejs.com/subs/english.vtt",video_id:"",volume:0,isSaved:!1,type:null},this.currentTimeString="00:00:00")}nextStep(e){e.next()}openQuestionary(){return Object(P.b)(this,void 0,void 0,(function*(){const e=yield this.modalCtrl.create({component:je.a,cssClass:"modal-fullscreen-100",swipeToClose:!0,componentProps:{forms_group:this.forms_group}});yield e.present(),yield e.onWillDismiss(),this.form.qualification=0;for(const t of this.forms_group)this.form.qualification+=+t.punctuation||0}))}newAbility(e){return e}fancyTimeFormat(e,t=!1){var n=~~(e%3600/60),o=~~e%60,i="";return i+=~~(e/3600)+":"+(n<10?"0":""),(i+=n+":"+(o<10?"0":""))+(t?o+e-~~e:""+o)}getAbilitiesDescriptions(){this.abilitiesLoading=!0,this.booksService.getHabilitiesAvailables({q:this.valuesAbilitiesSelect.searchInput.nativeElement.value}).subscribe(e=>{this.abilitiesLoading=!1,this.abilities=e.items},e=>{this.abilitiesLoading=!1})}editIemForQuestion(e){return Object(P.b)(this,void 0,void 0,(function*(){const t=yield this.modalCtrl.create({component:$e.a,cssClass:"modal-fullscreen-100",swipeToClose:!0,componentProps:{form_builder_item:e,content:"",punctuation:0}});yield t.present(),yield t.onWillDismiss(),this.form.qualification=0;for(const e of this.forms_group)this.form.qualification+=+e.punctuation||0}))}showDocument(e){return Object(P.b)(this,void 0,void 0,(function*(){const t=yield this.modalCtrl.create({component:Ue.a,cssClass:"modal-fullscreen-100",swipeToClose:!0,componentProps:{route_file:e}});yield t.present(),yield t.onWillDismiss()}))}getParamIdByLink(){if(null!=this.videoQuiz.type&&null!=this.videoQuiz.type.param_regex){var e=this.videoQuiz.url.match(this.videoQuiz.type.param_regex),t=!(!e||!e[this.videoQuiz.type.position_regex])&&e[this.videoQuiz.type.position_regex];t?(this.videoQuiz.video_id=t,this.videoQuiz.isSaved=!0):this.videoQuiz.isSaved=!1}else this.videoQuiz.isSaved=!0;return this.videoQuiz.isSaved||this.toastService.presentToast("El link no es correcto","warning"),this.videoQuiz.isSaved}changePageItems(){let e=this.pagesBook.find(e=>e.uuid==this.form.page_id);null!=e&&this.booksService.getThemeBook({book_uuid:this.book.uuid,page_index:e.page_number}).subscribe(e=>{this.themesList=e.data,this.changeSubthemes()},e=>{this.controlErroresService.control(e)})}changeResources(){if(!this.resource_id){let e=this.themesList.find(e=>e.uuid==this.form.theme_id);null!=e&&(this.abilities=e.abilities.map(e=>({id:e.id,description:e.description})),this.form.abilities=this.abilities.map(e=>e.id),console.log(this.form.abilities))}}changeSubthemes(){this.form.theme_id&&this.booksService.getSubThemeBook({book_uuid:this.book.uuid,theme_id:this.form.theme_id}).subscribe(e=>{this.subthemesList=e.data},e=>{this.controlErroresService.control(e)})}}return e.\u0275fac=function(t){return new(t||e)(h.ac(s.Db),h.ac(s.Fb),h.ac(Ce.a),h.ac(S.a),h.ac(l.a),h.ac(p.a),h.ac(De.a))},e.\u0275cmp=h.Ub({type:e,selectors:[["app-add-resource-book"]],viewQuery:function(e,t){var n;1&e&&(h.ld(Je,!0),h.ld(et,!0),h.ld(tt,!0),h.ld(nt,!0)),2&e&&(h.Nc(n=h.pc())&&(t.stepper=n.first),h.Nc(n=h.pc())&&(t.player=n.first),h.Nc(n=h.pc())&&(t.content=n.first),h.Nc(n=h.pc())&&(t.valuesAbilitiesSelect=n.first))},decls:87,vars:75,consts:[["translucent","true"],["slot","end"],[3,"disabled","click"],["name","close-outline"],["mode","indeterminate",4,"ngIf"],["fullscreen","true",3,"scrollbar"],["content",""],[1,"container"],[1,"header-horizontal-add-course",3,"linear"],["stepper",""],["label",""],["matStepLabel",""],[1,"grid-shuffle","c-pointer"],["id","grid",1,"row"],["size","12","size-sm","6","size-md","4","size-xl","3",4,"ngFor","ngForOf"],[1,"mt-3","mb-3"],["for","update-profile-form-2",1,"form-label"],[3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["class","mt-3 mb-3",4,"ngIf"],[1,"text-bold","text-center"],["bindValue","id","bindLabel","description","multiple","true",3,"items","ngModel","placeholder","addTag","addTagText","loading","ngModelChange","search"],["valuesAbilitiesSelect",""],["ng-label-tmp",""],["appearance","outline",1,"w-100"],["matInput","","required","",1,"w-100",3,"disabled","ngModel","ngModelChange"],["matInput","","matInput","","required","",1,"w-100",3,"disabled","ngModel","ngModelChange"],["appearance","outline","class","w-100",4,"ngIf"],[1,"mt-2"],["size","small","color","warning",3,"click"],["size","small","color","primary",3,"click"],[3,"ngModel","multiple","ngModelChange"],[3,"ngModel","ngModelChange"],["size","small","strong","",1,"step-add-btn-save-f-2",3,"disabled","click"],["mode","indeterminate"],["size","12","size-sm","6","size-md","4","size-xl","3"],[1,"mb-2",2,"height","8.5em",3,"click"],[1,"flex","flex-center"],[2,"font-size","2.4em",3,"name"],[1,"text-center"],[3,"value"],["for","subte-form-2",1,"form-label"],["aria-hidden","true",1,"ng-value-icon","left","ng-star-inserted",3,"click"],[1,"ng-value-label","ng-star-inserted"],[4,"ngIf"],[3,"ngSwitch"],["class","form-control w-100","required","","placeholder",'<iframe src="https://www.mipagina.com/codigo_embebido"></iframe>',3,"disabled","ngModel","ngModelChange",4,"ngSwitchCase"],["class","form-control w-100","required","",3,"disabled","ngModel","ngModelChange",4,"ngSwitchCase"],["activeBorderColor","#3F51B5",3,"accept","valueChanged",4,"ngSwitchCase"],["class","mt-2 mb-2",4,"ngSwitchCase"],["class","mt-2 mb-2 border-dashed dark:border-dark-5 rounded-md",4,"ngSwitchCase"],["required","","placeholder",'<iframe src="https://www.mipagina.com/codigo_embebido"></iframe>',1,"form-control","w-100",3,"disabled","ngModel","ngModelChange"],["required","",1,"form-control","w-100",3,"disabled","ngModel","ngModelChange"],["activeBorderColor","#3F51B5",3,"accept","valueChanged"],[1,"p-04","mt-2"],[2,"width","100%","border-left","3px solid #fada4a","padding-left","0"],[2,"padding-left","0",3,"opened","closed"],[1,"w-100",3,"ngModel","ngModelChange"],[1,"mt-3"],[2,"margin-top","20px"],["for","qualification",1,"form-label"],["id","qualification","type","number","autocomplete","off",1,"form-control",3,"ngModel","disabled","ngModelChange"],[1,"flex","flex-center","mt-2"],["appearance","outline"],["type","number","matInput","","min","0","max","23","placeholder","23",3,"ngModel","ngModelChange"],["type","number","matInput","","min","0","max","59","placeholder","00",3,"ngModel","ngModelChange"],["slot","start","value","1"],["slot","start","value","0"],[2,"width","100%","border-left","3px solid var(--ion-color-primary, #3880ff)"],[3,"opened","closed"],[2,"width","100%","border-left","3px solid var(--ion-color-success, #3880ff)"],["value","asc"],["value","random"],[2,"width","100%","border-left","3px solid var(--ion-color-danger, #3880ff)"],[1,"d-none"],["appearance","outline",2,"width","100%"],[1,"mt-2","mb-2"],["name","document-attach-outline"],[1,"mt-2","mb-2","border-dashed","dark:border-dark-5","rounded-md"],["class","grid-shuffle c-pointer",4,"ngIf"],[1,"mb-2"],[3,"click"],[2,"padding","0"],["size","small","expand","full","target","_blank",3,"href"],["name","help-circle-outline"],[2,"max-width","800px","margin","0 auto"],[3,"ngSwitch",4,"ngIf"],["size","small",3,"color","click",4,"ngIf"],["matInput","",1,"w-100",3,"disabled","ngModel","ngModelChange"],["autoplay","","muted","","style","--vm-player-theme: #6c89e8",3,"currentTime","vmCurrentTimeChange","vmFullscreenChange",4,"ngSwitchCase"],["controls","","style","--vm-player-theme: #6c89e8",3,"currentTime","vmCurrentTimeChange","vmFullscreenChange",4,"ngSwitchCase"],["autoplay","","theme","dark","style","--vm-player-theme: #6c89e8;",3,"currentTime","vmCurrentTimeChange","vmFullscreenChange",4,"ngSwitchCase"],["autoplay","","muted","",2,"--vm-player-theme","#6c89e8",3,"currentTime","vmCurrentTimeChange","vmFullscreenChange"],["player",""],[3,"videoId"],["controls","",2,"--vm-player-theme","#6c89e8",3,"currentTime","vmCurrentTimeChange","vmFullscreenChange"],["cookies","true",3,"videoId",4,"ngSwitchCase"],["type","video/mp4",3,"src"],["default","","kind","subtitles","srclang","en","label","English",3,"src",4,"ngIf"],["cookies","true",3,"videoId"],["default","","kind","subtitles","srclang","en","label","English",3,"src"],["autoplay","","theme","dark",2,"--vm-player-theme","#6c89e8",3,"currentTime","vmCurrentTimeChange","vmFullscreenChange"],["cross-origin","",3,"poster"],["size","small",3,"color","click"],["name","add-circle-outline",3,"matTooltip"],[1,"example-headers-align"],["hideToggle","",4,"ngFor","ngForOf"],["hideToggle",""],[2,"border-bottom","2px solid #ffca38",3,"innerHTML"],[3,"formContainer","disabled"],[1,"flex","space-btw"],["name","move-outline",1,"c-pointer"],["mat-button","",3,"click"],["name","create-outline"],["mat-button","","color","warn",3,"click"],["name","trash-outline"]],template:function(e,t){if(1&e){const e=h.hc();h.gc(0,"ion-header",0),h.gc(1,"ion-toolbar"),h.gc(2,"ion-title"),h.ed(3),h.tc(4,"translate"),h.fc(),h.gc(5,"ion-buttons",1),h.gc(6,"ion-button",2),h.oc("click",(function(){return t.dismiss()})),h.bc(7,"ion-icon",3),h.fc(),h.fc(),h.fc(),h.cd(8,ot,1,0,"mat-progress-bar",4),h.fc(),h.gc(9,"ion-content",5,6),h.gc(11,"div",7),h.gc(12,"mat-horizontal-stepper",8,9),h.gc(14,"mat-step",10),h.cd(15,it,3,6,"ng-template",11),h.gc(16,"ion-grid",12),h.gc(17,"ion-row",13),h.cd(18,st,7,2,"ion-col",14),h.fc(),h.fc(),h.fc(),h.gc(19,"mat-step",10),h.cd(20,ct,3,6,"ng-template",11),h.gc(21,"div",15),h.gc(22,"label",16),h.ed(23),h.tc(24,"translate"),h.fc(),h.gc(25,"ng-select",17),h.oc("ngModelChange",(function(e){return t.form.page_id=e}))("change",(function(){return t.changePageItems()})),h.cd(26,at,2,2,"ng-option",18),h.fc(),h.fc(),h.cd(27,lt,6,5,"div",19),h.cd(28,gt,6,5,"div",19),h.gc(29,"div",15),h.gc(30,"h4",20),h.ed(31),h.tc(32,"translate"),h.fc(),h.gc(33,"ng-select",21,22),h.oc("ngModelChange",(function(e){return t.form.abilities=e}))("search",(function(){return t.getAbilitiesDescriptions()})),h.tc(35,"translate"),h.tc(36,"translate"),h.cd(37,ht,5,2,"ng-template",23),h.fc(),h.fc(),h.gc(38,"mat-form-field",24),h.gc(39,"mat-label"),h.ed(40),h.tc(41,"translate"),h.fc(),h.gc(42,"input",25),h.oc("ngModelChange",(function(e){return t.form.title=e})),h.fc(),h.fc(),h.gc(43,"mat-form-field",24),h.gc(44,"mat-label"),h.ed(45),h.tc(46,"translate"),h.fc(),h.gc(47,"textarea",26),h.oc("ngModelChange",(function(e){return t.form.description=e})),h.fc(),h.fc(),h.gc(48,"mat-form-field",24),h.gc(49,"mat-label"),h.ed(50),h.tc(51,"translate"),h.fc(),h.gc(52,"input",25),h.oc("ngModelChange",(function(e){return t.form.language=e})),h.fc(),h.fc(),h.cd(53,Xt,10,8,"div",27),h.gc(54,"div",28),h.gc(55,"ion-button",29),h.oc("click",(function(){h.Sc(e);const n=h.Oc(13);return t.previewStep(n,!0)})),h.ed(56),h.tc(57,"translate"),h.fc(),h.gc(58,"ion-button",30),h.oc("click",(function(){h.Sc(e);const n=h.Oc(13);return t.nextStep(n)})),h.ed(59),h.tc(60,"translate"),h.fc(),h.fc(),h.fc(),h.gc(61,"mat-step",10),h.cd(62,Qt,3,6,"ng-template",11),h.gc(63,"div",15),h.gc(64,"label",16),h.ed(65),h.tc(66,"translate"),h.fc(),h.gc(67,"ng-select",31),h.oc("ngModelChange",(function(e){return t.form.addressed_to=e})),h.cd(68,Gt,2,2,"ng-option",18),h.fc(),h.fc(),h.cd(69,Kt,6,6,"div",19),h.gc(70,"div",15),h.gc(71,"label",16),h.ed(72),h.tc(73,"translate"),h.fc(),h.gc(74,"ng-select",32),h.oc("ngModelChange",(function(e){return t.form.context_id=e})),h.cd(75,Zt,2,2,"ng-option",18),h.fc(),h.fc(),h.gc(76,"mat-form-field",24),h.gc(77,"mat-label"),h.ed(78),h.tc(79,"translate"),h.fc(),h.gc(80,"input",25),h.oc("ngModelChange",(function(e){return t.form.range_age=e})),h.fc(),h.fc(),h.gc(81,"ion-button",29),h.oc("click",(function(){h.Sc(e);const n=h.Oc(13);return t.previewStep(n)})),h.ed(82),h.tc(83,"translate"),h.fc(),h.gc(84,"ion-button",33),h.oc("click",(function(){return t.save()})),h.ed(85),h.tc(86,"translate"),h.fc(),h.fc(),h.fc(),h.fc(),h.fc()}2&e&&(h.Lb(3),h.gd(" ",h.uc(4,45,null!=t.resource_id?"pages.book.edit_resources":"pages.book.add_resources")," "),h.Lb(3),h.Ac("disabled",t.loading),h.Lb(2),h.Ac("ngIf",t.loading||t.loading_2),h.Lb(1),h.Bc("scrollbar",t.scrollbarStyle),h.Lb(3),h.Ac("linear",!0),h.Lb(6),h.Ac("ngForOf",t.types),h.Lb(5),h.fd(h.uc(24,47,"forms.page")),h.Lb(2),h.Ac("ngModel",t.form.page_id),h.Lb(1),h.Ac("ngForOf",t.pagesBook),h.Lb(1),h.Ac("ngIf",t.themesList.length>0),h.Lb(1),h.Ac("ngIf",t.subthemesList.length>0),h.Lb(3),h.fd(h.uc(32,49,"pages.book.select_ability")),h.Lb(2),h.Bc("addTagText",h.uc(36,53,"pages.book.add_ability")),h.Ac("items",t.abilities)("ngModel",t.form.abilities)("placeholder",h.uc(35,51,"pages.book.select_ability"))("addTag",!0)("addTag",t.newAbility)("loading",t.abilitiesLoading),h.Lb(7),h.fd(h.uc(41,55,"forms.title")),h.Lb(2),h.Ac("disabled",t.loading)("ngModel",t.form.title),h.Lb(3),h.fd(h.uc(46,57,"forms.description")),h.Lb(2),h.Ac("disabled",t.loading)("ngModel",t.form.description),h.Lb(3),h.fd(h.uc(51,59,"forms.language")),h.Lb(2),h.Ac("disabled",t.loading)("ngModel",t.form.language),h.Lb(1),h.Ac("ngIf",t.typeSelected),h.Lb(3),h.fd(h.uc(57,61,"buttons.preview")),h.Lb(3),h.gd("",h.uc(60,63,"buttons.next")," "),h.Lb(6),h.fd(h.uc(66,65,"forms.address_to")),h.Lb(2),h.Ac("ngModel",t.form.addressed_to)("multiple",!0),h.Lb(1),h.Ac("ngForOf",t.roles),h.Lb(1),h.Ac("ngIf",!t.resource_id),h.Lb(3),h.fd(h.uc(73,67,"forms.context")),h.Lb(2),h.Ac("ngModel",t.form.context_id),h.Lb(1),h.Ac("ngForOf",t.contexts),h.Lb(3),h.fd(h.uc(79,69,"forms.range_age")),h.Lb(2),h.Ac("disabled",t.loading)("ngModel",t.form.range_age),h.Lb(2),h.gd("",h.uc(83,71,"buttons.preview")," "),h.Lb(2),h.Ac("disabled",t.loading),h.Lb(1),h.fd(h.uc(86,73,"buttons.save")))},directives:[s.B,s.zb,s.xb,s.l,s.k,s.C,o.t,s.u,b.b,Ne.a,Ne.b,Ne.d,s.A,s.gb,o.s,Se.a,i.r,i.u,Se.f,qe.c,qe.g,He.b,i.c,i.C,Pe.a,s.t,s.m,s.o,s.p,s.q,Se.o,o.x,o.y,Ve.b,s.H,Ye.a,Ye.c,Ye.g,Ye.h,Ye.f,Xe.a,i.x,s.N,s.O,s.Y,s.Lb,s.P,s.X,s.Jb,Qe.a,Ge.o,s.n,We.F,We.X,We.o,We.V,We.T,v.a,Ke.a,Ye.d,Ze.b],pipes:[f.d,o.E],styles:[".mat-stepper-horizontal[_ngcontent-%COMP%], .mat-stepper-vertical[_ngcontent-%COMP%]{background-color:var(--ion-background-color)!important}ng-select[_ngcontent-%COMP%]   .ng-dropdown-panel[_ngcontent-%COMP%]{width:auto!important}"]}),e})();function en(e,t){1&e&&h.bc(0,"mat-progress-bar",10)}function tn(e,t){if(1&e){const e=h.hc();h.gc(0,"ion-card",13,14),h.oc("click",(function(){h.Sc(e);const t=h.sc().$implicit;return h.sc().addOrRemoveBook(t)})),h.gc(2,"ion-label"),h.bc(3,"img",15),h.gc(4,"p",16),h.ed(5),h.fc(),h.fc(),h.bc(6,"ion-checkbox",1),h.fc()}if(2&e){const e=h.sc().$implicit;h.Ac("ngClass",e.selected?"selected-card":""),h.Lb(3),h.Bc("src",e.portada,h.Vc),h.Ac("ngClass",e.selected?"":"img-no-selected"),h.Lb(2),h.fd(e.name)}}function nn(e,t){if(1&e){const e=h.hc();h.gc(0,"ion-card",13),h.oc("click",(function(){h.Sc(e);const t=h.sc().$implicit;return h.sc().addOrRemoveBook(t)})),h.gc(1,"ion-label"),h.bc(2,"img",15),h.gc(3,"p",16),h.ed(4),h.fc(),h.fc(),h.bc(5,"ion-checkbox",1),h.fc()}if(2&e){const e=h.sc().$implicit;h.Ac("ngClass",e.selected?"selected-card":""),h.Lb(2),h.Bc("src",e.portada,h.Vc),h.Ac("ngClass",e.selected?"":"img-no-selected"),h.Lb(2),h.fd(e.name)}}function on(e,t){if(1&e&&(h.gc(0,"ion-item",11),h.cd(1,tn,7,4,"ion-card",12),h.cd(2,nn,6,4,"ion-card",12),h.fc()),2&e){const e=t.index,n=h.sc();h.Lb(1),h.Ac("ngIf",e+1==n.books.length),h.Lb(1),h.Ac("ngIf",e+1!=n.books.length)}}let sn=(()=>{class e{constructor(e,t,n,o,i){this.modalCtrl=e,this.navParams=t,this.booksService=n,this.toastService=o,this.controlErroresService=i,this.scrollbarStyle=a.a.scrollbarStyle,this.book=null,this.books=[],this.loading_2=!1,this.loading=!1,this.book=t.data.book,null!=this.book&&Array.isArray(this.book.books)&&(this.books=this.book.books)}ngOnInit(){0==this.book.length&&(this.toastService.showToast("No hay libros asciados"),this.dismiss())}cloneUnities(){this.loading=!0,this.booksService.cloneUnities(this.book.uuid,this.books.filter(e=>e.selected).map(e=>e.uuid)).subscribe(e=>{this.toastService.presentToast(e.message,"success"),this.loading=!1,this.books.forEach(e=>e.selected=!1),this.dismiss()},e=>{this.controlErroresService.control(e),this.loading=!1})}addOrRemoveBook(e){e.selected=!e.selected}dismiss(e){this.modalCtrl.dismiss(e)}}return e.\u0275fac=function(t){return new(t||e)(h.ac(s.Db),h.ac(s.Fb),h.ac(S.a),h.ac(p.a),h.ac(l.a))},e.\u0275cmp=h.Ub({type:e,selectors:[["app-clone-unities"]],decls:15,vars:8,consts:[["translucent","true"],["slot","end"],[3,"disabled","click"],["name","close-outline"],["mode","indeterminate",4,"ngIf"],["fullscreen","true",3,"scrollbar"],["content",""],[1,"container-flex-x","step-add-btn-select-book-f-2"],["class","item-cs",4,"ngFor","ngForOf"],["shape","round",3,"click"],["mode","indeterminate"],[1,"item-cs"],[3,"ngClass","click",4,"ngIf"],[3,"ngClass","click"],["theLastReference",""],["alt","",1,"book-portada",3,"ngClass","src"],[1,"m-1","text-center","overflow-txt"]],template:function(e,t){1&e&&(h.gc(0,"ion-header",0),h.gc(1,"ion-toolbar"),h.gc(2,"ion-title"),h.ed(3),h.fc(),h.gc(4,"ion-buttons",1),h.gc(5,"ion-button",2),h.oc("click",(function(){return t.dismiss()})),h.bc(6,"ion-icon",3),h.fc(),h.fc(),h.fc(),h.cd(7,en,1,0,"mat-progress-bar",4),h.fc(),h.gc(8,"ion-content",5,6),h.gc(10,"ion-list",7),h.cd(11,on,3,2,"ion-item",8),h.fc(),h.gc(12,"ion-button",9),h.oc("click",(function(){return t.cloneUnities()})),h.ed(13),h.tc(14,"translate"),h.fc(),h.fc()),2&e&&(h.Lb(3),h.gd(" ",null!=t.book?t.book.name:"-"," "),h.Lb(2),h.Ac("disabled",t.loading),h.Lb(2),h.Ac("ngIf",t.loading||t.loading_2),h.Lb(1),h.Bc("scrollbar",t.scrollbarStyle),h.Lb(3),h.Ac("ngForOf",t.books),h.Lb(2),h.fd(h.uc(14,6,"buttons.clone")))},directives:[s.B,s.zb,s.xb,s.l,s.k,s.C,o.t,s.u,b.b,s.O,o.s,Pe.a,s.H,s.m,o.q,s.N,s.r,s.c],pipes:[f.d],styles:[".book-portada[_ngcontent-%COMP%]{min-width:150px;height:200px}.container-flex-x[_ngcontent-%COMP%]{display:flex;overflow:auto;flex-wrap:nowrap}.container-flex-x[_ngcontent-%COMP%]   .item-cs[_ngcontent-%COMP%]{min-width:190px!important;max-width:190px!important;cursor:pointer}.container-flex-x[_ngcontent-%COMP%]   .item-cs[_ngcontent-%COMP%]   .img-no-selected[_ngcontent-%COMP%]{filter:grayscale(100%)}.selected-card[_ngcontent-%COMP%]{background:rgba(253,255,119,.7)}"]}),e})();var cn=n("JlEf"),an=n("CHya");const rn=["content"],ln=["theLastReference"];function dn(e,t){1&e&&h.bc(0,"mat-progress-bar",9)}let gn=(()=>{class e{constructor(e,t,n){this.navParams=e,this.modalCrl=t,this.scroolToBottomService=n,this.book_id=null,this.loading=!1,this.scrollbarStyle=a.a.scrollbarStyle,this.showVisorImages=!1,this.book_id=e.data.book_id,this.scrollToPages=e.data.scrollToPages,Array.isArray(this.scrollToPages)||(this.scrollToPages=[]),n.get$().subscribe(e=>{this.scrollToBottom(e)})}ngOnInit(){}ngAfterViewInit(){}dismiss(){this.modalCrl.dismiss()}scrollToBottom(e){console.log(e),this.content.scrollToPoint(0,e,4e3)}}return e.\u0275fac=function(t){return new(t||e)(h.ac(s.Fb),h.ac(s.Db),h.ac(cn.a))},e.\u0275cmp=h.Ub({type:e,selectors:[["app-list-index-resources"]],viewQuery:function(e,t){var n;1&e&&(h.ld(rn,!0),h.ld(ln,!0,h.o)),2&e&&(h.Nc(n=h.pc())&&(t.content=n.first),h.Nc(n=h.pc())&&(t.theLastReference=n))},decls:12,vars:9,consts:[["translucent","true"],[3,"ngClass"],["slot","end"],[3,"disabled","click"],["name","close-outline"],["mode","indeterminate",4,"ngIf"],["fullscreen","true",3,"scrollbar"],["content",""],[3,"book_id","scrollToPages","loadginEmmit","showVisorImagesEmmit"],["mode","indeterminate"]],template:function(e,t){1&e&&(h.gc(0,"ion-header",0),h.gc(1,"ion-toolbar",1),h.gc(2,"ion-title"),h.ed(3),h.tc(4,"translate"),h.fc(),h.gc(5,"ion-buttons",2),h.gc(6,"ion-button",3),h.oc("click",(function(){return t.dismiss()})),h.bc(7,"ion-icon",4),h.fc(),h.fc(),h.fc(),h.cd(8,dn,1,0,"mat-progress-bar",5),h.fc(),h.gc(9,"ion-content",6,7),h.gc(11,"panel-index-resources",8),h.oc("loadginEmmit",(function(e){return t.loading=e}))("showVisorImagesEmmit",(function(e){return t.showVisorImages=e})),h.fc(),h.fc()),2&e&&(h.Lb(1),h.Ac("ngClass",t.showVisorImages?"d-none":""),h.Lb(2),h.gd(" ",h.uc(4,7,"pages.book.index_resources")," "),h.Lb(3),h.Ac("disabled",t.loading),h.Lb(2),h.Ac("ngIf",t.loading),h.Lb(1),h.Bc("scrollbar",t.scrollbarStyle),h.Lb(2),h.Ac("book_id",t.book_id)("scrollToPages",t.scrollToPages))},directives:[s.B,s.zb,o.q,s.xb,s.l,s.k,s.C,o.t,s.u,b.b,an.a,Pe.a],pipes:[f.d],styles:["p[_ngcontent-%COMP%]{color:var(--ion-color-dark)}"]}),e})();var un=n("PdCO");const pn=["theLastReference"];function hn(e,t){1&e&&h.bc(0,"mat-progress-bar",14)}function fn(e,t){1&e&&(h.gc(0,"div"),h.bc(1,"img",15),h.gc(2,"a",16),h.ed(3,"Vector de Tecnolog\xeda creado por stories - www.freepik.es"),h.fc(),h.fc())}function bn(e,t){1&e&&(h.gc(0,"div",17),h.bc(1,"img",18),h.gc(2,"h2",19),h.gc(3,"strong"),h.ed(4),h.tc(5,"translate"),h.fc(),h.fc(),h.fc()),2&e&&(h.Lb(4),h.fd(h.uc(5,1,"pages.book.resources_not_found")))}function mn(e,t){if(1&e){const e=h.hc();h.gc(0,"ion-col",20),h.oc("click",(function(){h.Sc(e);const n=t.$implicit;return h.sc().redirectPage(n)})),h.gc(1,"div",21),h.gc(2,"ion-item",22),h.bc(3,"img",23),h.fc(),h.gc(4,"p",24),h.ed(5),h.tc(6,"translate"),h.fc(),h.fc(),h.fc()}if(2&e){const e=t.$implicit,n=h.sc();h.Lb(3),h.Dc("src","",e.thumbnails,"&book_id=",n.book_id,"&token_refrs=",n.api_token,"",h.Vc),h.Bc("alt",e.pg),h.Lb(2),h.hd("",h.uc(6,6,"forms.page")," ",e.pg,"")}}function _n(e,t){1&e&&h.bc(0,"span",null,25)}let vn=(()=>{class e{constructor(e,t,n,o,i){this.navParams=e,this.bookService=t,this.controlErroresService=n,this.modalCrl=o,this.tokenService=i,this.book_id=null,this.loading=!1,this.scrollbarStyle=a.a.scrollbarStyle,this.pages=[],this.totalPages=1,this.api_token="",this.this_page=1,this.imageObjectShow=[],this.selectedImageIndex=-1,this.showVisorImages=!1,this.book_id=e.data.book_id,this.api_token=this.tokenService.getToken(!1)}ngOnInit(){}ngAfterViewInit(){setTimeout(()=>{this.getPages(),this.intersectionObserver(),this.theLastReference.changes.subscribe(e=>{e.last&&this.observer.observe(e.last.nativeElement)})})}intersectionObserver(){this.observer=new IntersectionObserver(e=>{e[0].isIntersecting&&this.totalPages>=this.this_page&&this.getPages(!1,{})},{root:null,rootMargin:"0px",threshold:.5})}getPages(e=!1,t={}){e&&(this.this_page=1,this.pages=[]),this.loading=!0,this.bookService.getPagesByBook(this.book_id,{paginate:50,page:this.this_page}).subscribe(e=>{this.totalPages=e.last_page,this.pages=this.pages.concat(e.pages),this.loading=!1,this.this_page++},e=>{this.controlErroresService.control(e),this.loading=!1})}redirectPage(e){location.href="/app/main/visor/"+this.book_id+"#mybook/"+e.pg,this.dismiss()}showLightbox(e=[],t){this.selectedImageIndex=t,this.imageObjectShow=e,this.showVisorImages=!0}closeEventHandler(){this.showVisorImages=!1,this.imageObjectShow=[],this.selectedImageIndex=-1}dismiss(){this.modalCrl.dismiss()}}return e.\u0275fac=function(t){return new(t||e)(h.ac(s.Fb),h.ac(S.a),h.ac(l.a),h.ac(s.Db),h.ac(we.a))},e.\u0275cmp=h.Ub({type:e,selectors:[["app-list-thumbnails"]],viewQuery:function(e,t){var n;1&e&&h.ld(pn,!0,h.o),2&e&&h.Nc(n=h.pc())&&(t.theLastReference=n)},decls:18,vars:14,consts:[["translucent","true"],[3,"ngClass"],["slot","end"],[3,"disabled","click"],["name","close-outline"],["mode","indeterminate",4,"ngIf"],["fullscreen","true",3,"scrollbar"],[1,"container"],[4,"ngIf"],["style","max-width: 400px; margin: auto;",4,"ngIf"],[1,"grid-shuffle"],["id","grid",1,"row"],["size","12","size-sm","6","size-md","3","size-xl","6","class","relative c-pointer",3,"click",4,"ngFor","ngForOf"],[3,"images","imageIndex","show","close"],["mode","indeterminate"],["src","/assets/images/5063183-min.jpg","alt","loading",1,"w-100"],["target","_blank","href","https://www.freepik.es/vectores/tecnologia"],[2,"max-width","400px","margin","auto"],["src","/assets/images/relax.png","alt","loading",1,"w-100"],[1,"text-center"],["size","12","size-sm","6","size-md","3","size-xl","6",1,"relative","c-pointer",3,"click"],[1,"border-1px-card"],[2,"width","100%"],[3,"src","alt"],[1,"text-center","bold","bottom-para-page"],["theLastReference",""]],template:function(e,t){1&e&&(h.gc(0,"ion-header",0),h.gc(1,"ion-toolbar",1),h.gc(2,"ion-title"),h.ed(3),h.tc(4,"translate"),h.fc(),h.gc(5,"ion-buttons",2),h.gc(6,"ion-button",3),h.oc("click",(function(){return t.dismiss()})),h.bc(7,"ion-icon",4),h.fc(),h.fc(),h.fc(),h.cd(8,hn,1,0,"mat-progress-bar",5),h.fc(),h.gc(9,"ion-content",6),h.gc(10,"div",7),h.cd(11,fn,4,0,"div",8),h.cd(12,bn,6,3,"div",9),h.gc(13,"ion-grid",10),h.gc(14,"ion-row",11),h.cd(15,mn,7,8,"ion-col",12),h.fc(),h.fc(),h.cd(16,_n,2,0,"span",8),h.fc(),h.gc(17,"ng-image-fullscreen-view",13),h.oc("close",(function(){return t.closeEventHandler()})),h.fc(),h.fc()),2&e&&(h.Lb(1),h.Ac("ngClass",t.showVisorImages?"d-none":""),h.Lb(2),h.gd(" ",h.uc(4,12,"pages.book.thumbnails")," "),h.Lb(3),h.Ac("disabled",t.loading),h.Lb(2),h.Ac("ngIf",t.loading),h.Lb(1),h.Bc("scrollbar",t.scrollbarStyle),h.Lb(2),h.Ac("ngIf",t.loading&&0==t.pages.length),h.Lb(1),h.Ac("ngIf",!t.loading&&0==t.pages.length),h.Lb(3),h.Ac("ngForOf",t.pages),h.Lb(1),h.Ac("ngIf",0!=t.pages.length),h.Lb(1),h.Ac("images",t.imageObjectShow)("imageIndex",t.selectedImageIndex)("show",t.showVisorImages))},directives:[s.B,s.zb,o.q,s.xb,s.l,s.k,s.C,o.t,s.u,b.b,s.A,s.gb,o.s,un.a,Pe.a,s.t,s.H],pipes:[f.d],styles:[".bottom-para-page[_ngcontent-%COMP%]{position:absolute;left:25%;bottom:20px;background:rgba(0,0,0,.397);border-radius:5px;color:#fff;z-index:55;font-size:1.2em}.relative[_ngcontent-%COMP%]{position:relative}.border-1px-card[_ngcontent-%COMP%]{border:1px solid #000;margin:5px}"]}),e})();var kn=n("beT7"),Cn=n("5eHb"),yn=n("XhcP"),xn=n("3NU+");let wn=(()=>{class e{constructor(){}ngOnInit(){this.buildTools()}buildTools(){var e=r.i.book+"save-linears",t=r.i.book+"get-linears";this.colaborar_id&&(e+="?colaborar_id="+this.colaborar_id);var n=this.colorA;document.createElement("div").className="center menuFlotante";var o=document.createElement("div");o.id="menuFiguras",o.className="submenu";var i=document.createElement("div");i.id="menuFiguras",i.className="submenu";var s=document.createElement("div");s.id="menuFiguras2",s.className="submenu";var c=document.createElement("div");c.id="menuFiguras",c.className="submenu";var a=$("<div class='simptip-position-top' style='background-color: #F5F5F5;' data-toggle='tooltip' data-tooltip='Cuadrado'><img src='assets/img/icons/cuadrado.png' width='30'/></div>"),l=$("<div class='simptip-position-top' style='background-color: #EEE' data-toggle='tooltip' data-tooltip='C\xedrculo'><img src='assets/img/icons/circulo.png' width='30'/></div>"),d=$("<div class='simptip-position-top' style='background-color: #F5F5F5' data-toggle='tooltip' data-tooltip='Tri\xe1ngulo'><img src='assets/img/icons/triangulo.png' width='30'/></div>"),g=$("<div style='background-color: #F5F5F5;'><input id='size' type ='range' min='4' style='width:100%' max='100'></div>"),u=$("<div style='background-color: #F5F5F5;'><input id='colorNote' type ='text'></div>");$(o).append(a),$(o).append(l),$(o).append(d),$(i).append(g),$(s).append($("<div style='background-color: #F5F5F5;'><input id='size-second' type ='range' min='4' style='width:100%' max='100'></div>")),$(c).append(u);var p=new Menu("#myMenu"),h=new Item("assets/img/icons/herramientas.png","rgba(0,0,0,0)","Herramientas",null,null,!0),f=new Item("assets/img/icons/no-mostrar.png","#F5F5F5","Mostrar Lienzo",null,{showCanvas:!0,classcss:["showCanvas"]},!0),b=new Item("assets/img/icons/no_mano_alzada.png","#EEE","Seleccionar","noDrawing(canvasR);",{toggleActive:!0,showAlwaysCanvas:!0,classcss:["dibujo"]},!0),m=new Item("assets/img/icons/figuras.png","#F5F5F5","Figuras",null,{childElement:o}),_=new Item("assets/img/icons/texto.png","#F5F5F5","Agregar Nota",null,{childElement:c}),v=new Item("assets/img/icons/borrador.png","#EEE","Borrar","eliminar(canvasR)",{toggleActive:!0,showAlwaysCanvas:!0}),k=(new Item("assets/img/icons/text-to-speech.png","#EEE","Text to speech","textToSpeech(canvasR)",{toggleActive:!0,showAlwaysCanvas:!0}),new Item("assets/img/icons/guardar.png","#F5F5F5","Guardar","guardado(canvasR, '"+this.book_id+"', '"+e+"', '"+t+"', '"+this.colaborar_id+"')")),C=new Item("assets/img/icons/mano_alzada.png","#EEE","Mano Alzada","$('#canvas-wrapper-drawing').css('pointer-events','auto');freeDrawing(canvasR);canvasR.freeDrawingBrush.color = 'RGBA(0,0,0)';canvasR.mousecursor.set('fill', 'RGBA(0,0,0)');",{toggleActive:!0,showAlwaysCanvas:!0,strokePicker:!0,childElement:i}),y=new Item("assets/img/icons/mano_alzada.png","#EEE","Resaltador","$('#canvas-wrapper-drawing').css('pointer-events','auto');freeDrawing(canvasR);canvasR.freeDrawingBrush.color = 'RGBA(13,231,0,0.26)';canvasR.mousecursor.set('fill', 'RGBA(13,231,0,0.26)');",{toggleActive:!0,showAlwaysCanvas:!0,strokePicker:!0,childElement:s}),x=new Item("assets/img/icons/mano.png","#EEE","Mover lienzo","noDrawing(canvasR);moveCanvas(canvasR)",{toggleActive:!0}),w=new Item("tint","#F5F5F5","Seleccionar Color",null,{colorPicker:!0});new Item("assets/img/icons/no-mostrar.png","#F5F5F5","Mostrar Texto","$('#canvas-wrapper-drawing').css('pointer-events','auto');mostrarFigura(canvasR.getActiveObject(),canvasR)",{toggleActive:!0}),p.add(h),p.add(f),p.add(b),p.add(k),p.add(v),p.add(_),p.add(C),p.add(y),p.add(m),p.add(x),p.add(w),l.on("click",()=>{showCanvas(),noDrawing(this.canvasR),$("#canvas-wrapper").css("pointer-events","auto"),circulo(this.canvasR,n)}),a.on("click",()=>{showCanvas(),noDrawing(this.canvasR),$("#canvas-wrapper").css("pointer-events","auto"),cuadrilatero(this.canvasR,n)}),d.on("click",()=>{showCanvas(),noDrawing(this.canvasR),$("#canvas-wrapper").css("pointer-events","auto"),triangulo(this.canvasR,n)}),$('[data-toggle="tooltip"]'),"undefined"!=typeof iniciarPaleta&&jQuery.isFunction(iniciarPaleta)?(iniciarPaleta(".custom"),iniciarPaleta("#colorNote",!0,[["#f9b233","#ea534a","#00a1db","#97c22c"]],!0,(function(e,t){console.log("colorTexto",t),showCanvas(),texto(canvasR,t.toHexString()),$("#canvas-wrapper").css("pointer-events","auto")}),"#f9b233",!0)):($(".custom").spectrum({showPalette:!0,color:"black",hideAfterPaletteSelect:!0,showButtons:!1,preferredFormat:"rgb",palette:[["black","white","blanchedalmond","rgb(255, 128, 0);","hsv 100 70 50"],["red","yellow","green","blue","violet"]]}),$(".custom").change((function(e,t){n=t}))),p.close(),setTimeout(()=>{p.close()},2e3),$(document).delay(50).queue((function(e){p.open(),e(),$(document).delay(100).queue((function(e){p.close(),p.start=!1,e()}))})),setTimeout(()=>{$("#size").on("change",(function(){var e=parseInt($(this).val(),10)||1;canvasR.freeDrawingBrush.width=e,canvasR.mousecursor.set({left:canvasR.mousecursor.left,top:canvasR.mousecursor.top,radius:e/2}).setCoords().canvas.renderAll()})),$("#size-second").on("change",(function(){var e=parseInt($(this).val(),10)||1;canvasR.freeDrawingBrush.width=e,canvasR.mousecursor.set({left:canvasR.mousecursor.left,top:canvasR.mousecursor.top,radius:e/2}).setCoords().canvas.renderAll()}))},1e3)}saveToolsMarks(){var e=[],t=[];this.canvasR.getObjects().map((function(n){var o=n.get("type");if("path"==o){console.log(n);var i=tinycolor(n.stroke),s=n.hasOwnProperty("scaleX")?n.scaleX:1,c=n.hasOwnProperty("scaleY")?n.scaleY:1,a=n.hasOwnProperty("id")?n.id:-1,r=n.getCenterPoint();console.log("idG",n.id);var l={id:a,lineColor:i.toRgbString(),path:n.path,strokeLineCap:n.strokeLineCap,strokeLineJoin:n.strokeLineJoin,size:n.strokeWidth,tipo:o,scaleX:s,scaleY:c,iniciox:r.x,inicioy:r.y,angle:n.angle};t.push(l)}else{if(n.tipo>0&&n.tipo<4){console.log(n.stroke);var d=tinycolor(n.stroke);console.log(d.toHexString()),e.push({tipo:n.tipo,iniciox:n.left,inicioy:n.top,scalex:n.scaleX,scaley:n.scaleY,id:n.id,color:d.toHexString(),stroke:n.strokeWidth,angle:n.angle})}4==n.tipo&&(console.log(n.fill),d=tinycolor(n.fill),console.log(d.toHexString()),e.push({tipo:n.tipo,iniciox:n.left,inicioy:n.top,scalex:n.scaleX,scaley:n.scaleY,id:n.id,color:d.toHexString(),stroke:n.strokeWidth,angle:n.angle})),5==n.tipo&&(d=tinycolor(n.color),e.push({tipo:n.tipo,iniciox:n.left,inicioy:n.top,scalex:n.width,scaley:n.scaleY,id:n.id,texto:n.text,color:d.toHexString(),stroke:n.strokeWidth,visible:1,angle:n.angle})),-1==n.tipo&&(d=tinycolor(n.color),e.push({tipo:5,iniciox:n.left,inicioy:n.top,scalex:n.width,scaley:n.scaleY,id:n.id,texto:n.texto,color:d.toHexString(),stroke:n.strokeWidth,visible:0,angle:n.angle}))}})),console.log(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=h.Ub({type:e,selectors:[["tools-visor"]],inputs:{canvasR:"canvasR",colorA:"colorA",actualPage:"actualPage",book_id:"book_id",colaborar_id:"colaborar_id"},decls:2,vars:0,consts:[["id","menuHerramientas",1,"center","menuFlotante"],["id","myMenu"]],template:function(e,t){1&e&&(h.gc(0,"div",0),h.bc(1,"div",1),h.fc())},styles:[".center[_ngcontent-%COMP%]{position:absolute;z-index:100000!important;margin:auto;top:60px;right:-35%;left:0}.menuFlotante[_ngcontent-%COMP%]{width:50px;height:50px}.menuFlotante[_ngcontent-%COMP%]   .submenu[_ngcontent-%COMP%]{display:none}.title[_ngcontent-%COMP%]{width:300px;height:10px;top:60px}.item[_ngcontent-%COMP%]{position:absolute;left:0;top:0;width:50px;height:50px;background-color:#fff;cursor:pointer;text-align:center;line-height:50px}.item.active[_ngcontent-%COMP%]{background-color:#ff0!important}input[type=range][_ngcontent-%COMP%]{display:block;width:100%}"]}),e})();const Mn=["mybook"],On=["drawer"],Pn=["drawerPrinting"],Sn=["drawerUnities"];function Ln(e,t){if(1&e&&(h.gc(0,"ion-button",57),h.tc(1,"translate"),h.bc(2,"ion-icon",58),h.fc()),2&e){const e=h.sc();h.Ac("href",e.return_back_url)("matTooltip",h.uc(1,2,"forms.return"))}}function An(e,t){if(1&e){const e=h.hc();h.gc(0,"ion-button",59),h.oc("click",(function(){h.Sc(e);const t=h.sc();return t.resizeObject(),t.drawerUnities.toggle()})),h.tc(1,"translate"),h.bc(2,"ion-icon",60),h.fc()}2&e&&h.Ac("matTooltip",h.uc(1,1,"pages.book.unities"))}function In(e,t){1&e&&(h.gc(0,"span",61),h.ed(1),h.tc(2,"translate"),h.fc()),2&e&&(h.Lb(1),h.gd(" - ",h.uc(2,1,"pages.book.enabled_edit_mode"),""))}function Tn(e,t){if(1&e&&h.bc(0,"list-users-online",67),2&e){const e=h.sc(2);h.Ac("book_id",e.book_id)("colaborar_id",e.colaborar_uuid)("colaborar",e.colaborarItem)("book",e.bookItem)}}function zn(e,t){if(1&e){const e=h.hc();h.gc(0,"ion-button",59),h.oc("click",(function(){h.Sc(e);const t=h.sc(2),n=h.Oc(31);return t.resizeObject(),n.toggle()})),h.tc(1,"translate"),h.bc(2,"ion-icon",68),h.fc()}2&e&&h.Ac("matTooltip",h.uc(1,1,"pages.book.printing_pages"))}function En(e,t){if(1&e){const e=h.hc();h.gc(0,"ion-button",59),h.oc("click",(function(){return h.Sc(e),h.sc(2).showThumbnails()})),h.tc(1,"translate"),h.bc(2,"ion-icon",69),h.fc()}2&e&&h.Ac("matTooltip",h.uc(1,1,"pages.book.thumbnails"))}function Rn(e,t){if(1&e){const e=h.hc();h.gc(0,"ion-button",59),h.oc("click",(function(){return h.Sc(e),h.sc(2).addResourcePanel()})),h.tc(1,"translate"),h.bc(2,"ion-icon",70),h.fc()}2&e&&h.Ac("matTooltip",h.uc(1,1,"pages.book.add_resources"))}function Fn(e,t){if(1&e){const e=h.hc();h.gc(0,"ion-button",71),h.oc("click",(function(){return h.Sc(e),h.sc(2).enableModeResources()})),h.tc(1,"translate"),h.bc(2,"ion-icon",72),h.fc()}if(2&e){const e=h.sc(2);h.ad(e.modeEditionEnable?"border: 1px solid red":""),h.Ac("matTooltip",h.uc(1,4,"pages.course.enable_edition_mode"))("color",e.modeEditionEnable?"warning":"success")}}function Bn(e,t){if(1&e){const e=h.hc();h.gc(0,"ion-button",59),h.oc("click",(function(){return h.Sc(e),h.sc(2).openMenuRight("resource")})),h.tc(1,"translate"),h.bc(2,"ion-icon",73),h.fc()}2&e&&h.Ac("matTooltip",h.uc(1,1,"pages.book.resources"))}function jn(e,t){if(1&e){const e=h.hc();h.gc(0,"ion-buttons",62),h.cd(1,Tn,1,4,"list-users-online",63),h.cd(2,zn,3,3,"ion-button",4),h.cd(3,En,3,3,"ion-button",4),h.gc(4,"ion-button",59),h.oc("click",(function(){return h.Sc(e),h.sc().showIndexResources()})),h.tc(5,"translate"),h.bc(6,"ion-icon",64),h.fc(),h.cd(7,Rn,3,3,"ion-button",4),h.cd(8,Fn,3,6,"ion-button",65),h.cd(9,Bn,3,3,"ion-button",4),h.gc(10,"ion-button",59),h.oc("click",(function(){return h.Sc(e),h.sc().openMenuRight("search")})),h.tc(11,"translate"),h.bc(12,"ion-icon",66),h.fc(),h.fc()}if(2&e){const e=h.sc();h.Lb(1),h.Ac("ngIf",null!=e.colaborarItem&&null!=e.colaborar_uuid),h.Lb(1),h.Ac("ngIf",e.pintingPages.length>0),h.Lb(1),h.Ac("ngIf",e.has_thumbnails),h.Lb(1),h.Ac("matTooltip",h.uc(5,8,"pages.book.index_resources")),h.Lb(3),h.Ac("ngIf",e.bookItem.add_resource),h.Lb(1),h.Ac("ngIf",e.listTypesResources.length>0&&e.bookItem.add_resource),h.Lb(1),h.Ac("ngIf",e.listTypesResources.length>0),h.Lb(1),h.Ac("matTooltip",h.uc(11,10,"forms.search"))}}function Dn(e,t){1&e&&h.bc(0,"mat-progress-bar",74)}function Un(e,t){if(1&e){const e=h.hc();h.gc(0,"ion-button",87),h.oc("click",(function(){h.Sc(e);const t=h.sc().$implicit;return h.sc(2).typingUnity(t)})),h.bc(1,"ion-icon",72),h.fc()}}function $n(e,t){if(1&e){const e=h.hc();h.gc(0,"ion-button",88),h.oc("click",(function(){h.Sc(e);const t=h.sc(),n=t.$implicit,o=t.index;return h.sc(2).deleteUnity(n.uuid,o)})),h.bc(1,"ion-icon",89),h.fc()}}function Nn(e,t){if(1&e&&(h.gc(0,"ion-label",97),h.ed(1),h.fc()),2&e){const e=h.sc().$implicit;h.Lb(1),h.fd(e.start_page)}}function qn(e,t){if(1&e){const e=h.hc();h.gc(0,"ion-button",98),h.oc("click",(function(){h.Sc(e);const t=h.sc().$implicit;return h.sc(3).openModalAbilities(t)})),h.tc(1,"translate"),h.ed(2),h.fc()}if(2&e){const e=h.sc().$implicit;h.Ac("matTooltip",h.uc(1,2,"buttons.show_abilities")),h.Lb(2),h.gd(" ",e.start_page," ")}}function Hn(e,t){if(1&e){const e=h.hc();h.gc(0,"ion-button",87),h.oc("click",(function(){h.Sc(e);const t=h.sc().$implicit,n=h.sc().$implicit;return h.sc(2).typingThemeBook(n,t)})),h.bc(1,"ion-icon",72),h.fc()}}function Vn(e,t){if(1&e){const e=h.hc();h.gc(0,"ion-button",88),h.oc("click",(function(){h.Sc(e);const t=h.sc(),n=t.$implicit,o=t.index,i=h.sc().$implicit;return h.sc(2).deleteTheme(n.uuid,i,o)})),h.bc(1,"ion-icon",89),h.fc()}}function Yn(e,t){if(1&e){const e=h.hc();h.gc(0,"ion-button",87),h.oc("click",(function(){h.Sc(e);const t=h.sc().$implicit,n=h.sc(2).$implicit;return h.sc(2).typingSubThemeBook(n,t)})),h.bc(1,"ion-icon",72),h.fc()}}function Xn(e,t){if(1&e){const e=h.hc();h.gc(0,"ion-button",88),h.oc("click",(function(){h.Sc(e);const t=h.sc(),n=t.$implicit,o=t.index,i=h.sc().$implicit;return h.sc(3).deleteSubtheme(n.uuid,i,o)})),h.bc(1,"ion-icon",89),h.fc()}}function Qn(e,t){if(1&e){const e=h.hc();h.gc(0,"ion-item",99),h.oc("click",(function(){h.Sc(e);const n=t.$implicit;return h.sc(4).redirectPage(n.start_page)})),h.gc(1,"ion-label",97),h.ed(2),h.fc(),h.gc(3,"ion-label",100),h.ed(4),h.fc(),h.cd(5,Yn,2,0,"ion-button",101),h.cd(6,Xn,2,0,"ion-button",83),h.fc()}if(2&e){const e=t.$implicit,n=h.sc(4);h.Ac("cdkDragDisabled",!n.bookItem.is_edit),h.Lb(2),h.fd(e.start_page),h.Lb(2),h.fd(e.name),h.Lb(1),h.Ac("ngIf",n.bookItem.is_edit),h.Lb(1),h.Ac("ngIf",n.bookItem.is_edit)}}function Gn(e,t){if(1&e){const e=h.hc();h.gc(0,"ion-button",103),h.oc("click",(function(){h.Sc(e);const t=h.sc(2).$implicit;return h.sc(3).typingSubThemeBook(t)})),h.ed(1),h.tc(2,"translate"),h.fc()}2&e&&(h.Lb(1),h.fd(h.uc(2,1,"buttons.add_subtema")))}function Wn(e,t){if(1&e&&(h.gc(0,"ion-item",1),h.cd(1,Gn,3,3,"ion-button",102),h.fc()),2&e){const e=h.sc().$implicit,t=h.sc(3);h.Ac("ngClass",t.showSubItems.subthemes&&!e.collapse_down?"":"d-none"),h.Lb(1),h.Ac("ngIf",t.bookItem.is_edit)}}function Kn(e,t){if(1&e){const e=h.hc();h.ec(0),h.gc(1,"ion-item",90),h.oc("cdkDragStarted",(function(t){return h.Sc(e),h.sc(3)._dragStartedHandlerThemes(t)}))("click",(function(){h.Sc(e);const n=t.$implicit;return h.sc(3).redirectPage(n.start_page)})),h.cd(2,Nn,2,1,"ion-label",91),h.cd(3,qn,3,4,"ion-button",92),h.gc(4,"ion-label",93),h.ed(5),h.fc(),h.cd(6,Hn,2,0,"ion-button",94),h.cd(7,Vn,2,0,"ion-button",83),h.gc(8,"ion-icon",84),h.oc("click",(function(){const e=t.$implicit;return e.collapse_down=!e.collapse_down})),h.fc(),h.fc(),h.gc(9,"div",85),h.oc("cdkDropListDropped",(function(n){h.Sc(e);const o=t.$implicit;return h.sc(3).dropEventSubtemes(n,o)})),h.cd(10,Qn,7,5,"ion-item",95),h.fc(),h.cd(11,Wn,2,2,"ion-item",96),h.dc()}if(2&e){const e=t.$implicit,n=h.sc(3);h.Lb(1),h.Ac("cdkDragDisabled",!n.bookItem.is_edit),h.Lb(1),h.Ac("ngIf",e.abilities_count<=0&&!n.bookItem.is_edit),h.Lb(1),h.Ac("ngIf",n.bookItem.is_edit||e.abilities_count>0),h.Lb(2),h.fd(e.name),h.Lb(1),h.Ac("ngIf",n.bookItem.is_edit),h.Lb(1),h.Ac("ngIf",n.bookItem.is_edit),h.Lb(1),h.Ac("name",e.collapse_down?"chevron-up-outline":"chevron-down-outline"),h.Lb(1),h.Ac("ngClass",n.showSubItems.subthemes&&!e.collapse_down?"":"d-none"),h.Lb(1),h.Ac("ngForOf",e.subthemes),h.Lb(1),h.Ac("ngIf",n.bookItem.is_edit)}}function Zn(e,t){if(1&e){const e=h.hc();h.gc(0,"ion-item",104),h.gc(1,"ion-button",105),h.oc("click",(function(){h.Sc(e);const t=h.sc().$implicit;return h.sc(2).typingThemeBook(t)})),h.ed(2),h.tc(3,"translate"),h.fc(),h.fc()}if(2&e){const e=h.sc().$implicit,t=h.sc(2);h.Ac("ngClass",t.showSubItems.themes&&!e.collapse_down?"":"d-none"),h.Lb(2),h.fd(h.uc(3,2,"buttons.add_tema"))}}function Jn(e,t){if(1&e){const e=h.hc();h.gc(0,"ion-list"),h.gc(1,"ion-item",79),h.oc("click",(function(){h.Sc(e);const n=t.$implicit;return h.sc(2).redirectPage(n.start_page)}))("cdkDragStarted",(function(t){return h.Sc(e),h.sc(2)._dragStartedHandler(t)})),h.gc(2,"ion-label",80),h.ed(3),h.fc(),h.gc(4,"ion-label",81),h.ed(5),h.fc(),h.cd(6,Un,2,0,"ion-button",82),h.cd(7,$n,2,0,"ion-button",83),h.gc(8,"ion-icon",84),h.oc("click",(function(){const e=t.$implicit;return e.collapse_down=!e.collapse_down})),h.fc(),h.fc(),h.gc(9,"div",85),h.oc("cdkDropListDropped",(function(n){h.Sc(e);const o=t.$implicit;return h.sc(2).dropEventThemes(n,o)})),h.cd(10,Kn,12,10,"ng-container",18),h.fc(),h.cd(11,Zn,4,4,"ion-item",86),h.fc()}if(2&e){const e=t.$implicit,n=h.sc(2);h.Lb(1),h.Ac("cdkDragDisabled",!n.bookItem.is_edit),h.Lb(2),h.fd(e.start_page),h.Lb(2),h.fd(e.name),h.Lb(1),h.Ac("ngIf",n.bookItem.is_edit),h.Lb(1),h.Ac("ngIf",n.bookItem.is_edit),h.Lb(1),h.Ac("name",e.collapse_down?"chevron-up-outline":"chevron-down-outline"),h.Lb(1),h.Ac("ngClass",n.showSubItems.themes&&!e.collapse_down?"":"d-none"),h.Lb(1),h.Ac("ngForOf",e.themes),h.Lb(1),h.Ac("ngIf",n.bookItem.is_edit)}}function eo(e,t){1&e&&(h.gc(0,"ion-item"),h.gc(1,"ion-list-header"),h.ed(2),h.tc(3,"translate"),h.fc(),h.fc()),2&e&&(h.Lb(2),h.fd(h.uc(3,1,"pages.book.unities_not_found")))}function to(e,t){if(1&e){const e=h.hc();h.gc(0,"ion-list"),h.gc(1,"ion-button",106),h.oc("click",(function(){return h.Sc(e),h.sc(2).typingUnity()})),h.ed(2),h.tc(3,"translate"),h.fc(),h.fc()}2&e&&(h.Lb(2),h.fd(h.uc(3,1,"buttons.add_unity")))}function no(e,t){if(1&e){const e=h.hc();h.gc(0,"ion-list"),h.gc(1,"ion-button",107),h.oc("click",(function(){return h.Sc(e),h.sc(2).openModalClone()})),h.ed(2),h.tc(3,"translate"),h.fc(),h.fc()}2&e&&(h.Lb(2),h.fd(h.uc(3,1,"buttons.clone_unities")))}function oo(e,t){if(1&e){const e=h.hc();h.gc(0,"mat-drawer",75,76),h.gc(2,"div",15),h.gc(3,"p",77),h.ed(4),h.tc(5,"translate"),h.fc(),h.gc(6,"div",78),h.oc("cdkDropListDropped",(function(t){return h.Sc(e),h.sc().dropEventUnits(t)})),h.cd(7,Jn,12,9,"ion-list",18),h.fc(),h.cd(8,eo,4,3,"ion-item",35),h.cd(9,to,4,3,"ion-list",35),h.cd(10,no,4,3,"ion-list",35),h.fc(),h.fc()}if(2&e){const e=h.sc();h.Lb(4),h.fd(h.uc(5,5,"pages.book.unities")),h.Lb(3),h.Ac("ngForOf",e.bookItem.unities),h.Lb(1),h.Ac("ngIf","0"==e.bookItem.unities_count),h.Lb(1),h.Ac("ngIf",e.bookItem.is_edit),h.Lb(1),h.Ac("ngIf",e.bookItem.is_edit)}}function io(e,t){if(1&e){const e=h.hc();h.gc(0,"ion-avatar",112),h.oc("click",(function(){h.Sc(e);const t=h.sc().$implicit,n=h.sc().$implicit;return h.sc(2).showDocument(t.file_content,n.mode,t)})),h.bc(1,"img",114),h.fc()}if(2&e){const e=h.sc().$implicit;h.Lb(1),h.Ac("src",e.file_content,h.Vc)}}function so(e,t){1&e&&(h.gc(0,"ion-item"),h.bc(1,"ion-icon",115),h.fc())}function co(e,t){if(1&e&&(h.gc(0,"a",117),h.bc(1,"ion-icon",118),h.fc()),2&e){const e=h.sc(2).$implicit;h.Ac("href",e.file_content,h.Vc)}}function ao(e,t){if(1&e&&(h.gc(0,"ion-item"),h.cd(1,co,2,1,"a",116),h.fc()),2&e){const e=h.sc(2).$implicit;h.Lb(1),h.Ac("ngIf","form"!=e.mode)}}function ro(e,t){if(1&e){const e=h.hc();h.gc(0,"ion-button",124),h.oc("click",(function(){h.Sc(e);const t=h.sc(2).$implicit;return h.sc(3).enablePositionVisor(t)})),h.tc(1,"translate"),h.bc(2,"ion-icon",125),h.fc()}if(2&e){const e=h.sc(5);h.Ac("matTooltip",h.uc(1,2,"buttons.move_visor"))("disabled",e.loading)}}function lo(e,t){if(1&e){const e=h.hc();h.gc(0,"ion-button",126),h.oc("click",(function(){h.Sc(e);const t=h.sc(2).$implicit;return h.sc(3).enablePositionVisor(t,null,!0)})),h.tc(1,"translate"),h.bc(2,"ion-icon",127),h.fc()}if(2&e){const e=h.sc(5);h.Ac("matTooltip",h.uc(1,2,"buttons.unlink_move_visor"))("disabled",e.loading)}}function go(e,t){if(1&e){const e=h.hc();h.gc(0,"ion-button",128),h.oc("click",(function(){h.Sc(e);const t=h.sc(2),n=t.$implicit,o=t.index,i=h.sc().$implicit;return h.sc(2).editResource(n,o,i)})),h.tc(1,"translate"),h.bc(2,"ion-icon",72),h.fc()}if(2&e){const e=h.sc(5);h.Ac("disabled",e.loading)("matTooltip",h.uc(1,2,"buttons.edit"))}}function uo(e,t){if(1&e){const e=h.hc();h.gc(0,"ion-button",129),h.oc("click",(function(){h.Sc(e);const t=h.sc(2).$implicit,n=h.sc().index,o=h.sc().index;return h.sc().deleteResource(t,n,o)})),h.tc(1,"translate"),h.bc(2,"ion-icon",89),h.fc()}if(2&e){const e=h.sc(5);h.Ac("disabled",e.loading)("matTooltip",h.uc(1,2,"buttons.delete"))}}function po(e,t){if(1&e&&(h.gc(0,"ion-list",119),h.cd(1,ro,3,4,"ion-button",120),h.cd(2,lo,3,4,"ion-button",121),h.cd(3,go,3,4,"ion-button",122),h.cd(4,uo,3,4,"ion-button",123),h.fc()),2&e){const e=h.sc().$implicit;h.Lb(1),h.Ac("ngIf",e.is_edit&&null==e.position),h.Lb(1),h.Ac("ngIf",e.is_edit&&null!=e.position),h.Lb(1),h.Ac("ngIf",e.is_edit),h.Lb(1),h.Ac("ngIf",e.is_delete)}}function ho(e,t){if(1&e){const e=h.hc();h.ec(0),h.gc(1,"ion-item",110),h.cd(2,io,2,1,"ion-avatar",111),h.cd(3,so,2,0,"ion-item",35),h.gc(4,"ion-label",112),h.oc("click",(function(){h.Sc(e);const n=t.$implicit,o=h.sc().$implicit;return h.sc(2).showDocument(n.file_content,o.mode,n)})),h.ed(5),h.fc(),h.cd(6,ao,2,1,"ion-item",35),h.fc(),h.cd(7,po,5,4,"ion-list",113),h.dc()}if(2&e){const e=t.$implicit,n=h.sc().$implicit,o=h.sc(2);h.Lb(2),h.Ac("ngIf","image/*"==n.accept),h.Lb(1),h.Ac("ngIf","form"==n.mode),h.Lb(2),h.fd(e.title),h.Lb(1),h.Ac("ngIf",!o.modeEditionEnable),h.Lb(1),h.Ac("ngIf",o.modeEditionEnable)}}function fo(e,t){if(1&e&&(h.gc(0,"ion-card"),h.gc(1,"ion-card-header"),h.gc(2,"ion-card-subtitle"),h.bc(3,"ion-icon",108),h.ed(4),h.fc(),h.fc(),h.gc(5,"ion-card-content",109),h.gc(6,"ion-list",24),h.cd(7,ho,8,5,"ng-container",18),h.fc(),h.fc(),h.fc()),2&e){const e=t.$implicit,n=h.sc(2);h.Lb(3),h.Ac("name",e.icon_front),h.Lb(1),h.gd(" ",e.name," "),h.Lb(1),h.Bc("scrollbar",n.scrollbarStyle),h.Lb(1),h.Bc("scrollbar",n.scrollbarStyle),h.Lb(1),h.Ac("ngForOf",e.resources)}}function bo(e,t){if(1&e&&(h.gc(0,"div",15),h.gc(1,"h2",22),h.ed(2),h.tc(3,"translate"),h.fc(),h.cd(4,fo,8,5,"ion-card",18),h.fc()),2&e){const e=t.$implicit,n=h.sc();h.Ob("resource"!=n.right_menu?"hidden":""),h.Lb(2),h.hd("",h.uc(3,5,"forms.page")," ",e.page,""),h.Lb(2),h.Ac("ngForOf",e.types)}}function mo(e,t){if(1&e){const e=h.hc();h.gc(0,"ion-list"),h.gc(1,"ion-item",130),h.oc("click",(function(){h.Sc(e);const n=t.$implicit;return h.sc().redirectPage(n.page)})),h.gc(2,"ion-label",80),h.ed(3),h.fc(),h.gc(4,"ion-label",81),h.ed(5),h.fc(),h.fc(),h.fc()}if(2&e){const e=t.$implicit;h.Lb(3),h.fd(e.page),h.Lb(2),h.fd(e.content)}}function _o(e,t){if(1&e){const e=h.hc();h.gc(0,"ion-card",5),h.oc("click",(function(){h.Sc(e);const n=t.$implicit;return h.sc().printingPage(n)})),h.gc(1,"ion-card-header"),h.gc(2,"ion-card-subtitle"),h.bc(3,"ion-icon",68),h.ed(4),h.tc(5,"translate"),h.fc(),h.fc(),h.fc()}if(2&e){const e=t.$implicit;h.Lb(4),h.hd(" ",h.uc(5,2,"paginate.page")," ",e.page_number," ")}}const vo=function(e){return{transform:e}};function ko(e,t){if(1&e){const e=h.hc();h.gc(0,"div",134),h.oc("cdkDragEnded",(function(n){h.Sc(e);const o=t.$implicit;return h.sc(3).dropResource(n,o)}))("dblclick",(function(){h.Sc(e);const n=t.$implicit;return h.sc(3).showDocument(n.file_content,n.type_resource?n.type_resource.mode:"",n)}))("cdkDragStarted",(function(n){h.Sc(e);const o=t.$implicit;return h.sc(3).startDragging(n,o.position)})),h.bc(1,"ion-icon",135),h.fc()}if(2&e){const e=t.$implicit,n=h.sc(3);h.ad(h.Fc(10,vo,"translate3d("+e.position.x+", "+e.position.y+", 0px)")),h.Ac("cdkDragFreeDragPosition",e.position)("cdkDragDisabled",!e.is_edit)("matTooltip",e.title)("cdkDragConstrainPosition",n.dragConstrainPoint)("ngClass",e.type_resource?e.type_resource.icon_front+"-"+e.type_resource.type:""),h.Lb(1),h.Ac("ngClass",e.is_edit?e.type_resource?e.type_resource.icon_front+"-"+e.type_resource.type:"":"disabled-icon-res")("matTooltip",e.title)("name",null!=e.type_resource?e.type_resource.icon_front:"albums-outline")}}function Co(e,t){if(1&e&&(h.ec(0),h.cd(1,ko,2,12,"div",133),h.dc()),2&e){const e=h.sc(2);h.Lb(1),h.Ac("ngForOf",e.listResources)}}function yo(e,t){if(1&e&&(h.gc(0,"div",131),h.gc(1,"div",132),h.cd(2,Co,2,1,"ng-container",35),h.fc(),h.fc()),2&e){const e=h.sc();h.Lb(2),h.Ac("ngIf",e.loadBook)}}function xo(e,t){if(1&e&&h.bc(0,"tools-visor",136),2&e){const e=h.sc();h.Ac("canvasR",e.canvasR)("colorA",e.colorA)("actualPage",e.actualPage)("colaborar_id",e.colaborar_uuid)("book_id",e.book_id)}}function wo(e,t){if(1&e){const e=h.hc();h.gc(0,"div",138),h.oc("click",(function(){h.Sc(e);const n=t.$implicit;return h.sc(2).showDocument(n.file_content,n.type_resource?n.type_resource.mode:"",n)})),h.bc(1,"ion-icon",139),h.fc()}if(2&e){const e=t.$implicit;h.Ac("cdkDragFreeDragPosition",e.position)("cdkDragDisabled",!0)("matTooltip",e.title),h.Lb(1),h.Ac("ngClass",e.type_resource?e.type_resource.icon_front+"-"+e.type_resource.type:"")("name",null!=e.type_resource?e.type_resource.icon_front:"albums-outline")}}function Mo(e,t){if(1&e&&(h.ec(0),h.cd(1,wo,2,5,"div",137),h.dc()),2&e){const e=h.sc();h.Lb(1),h.Ac("ngForOf",e.listResources)}}function Oo(e,t){if(1&e&&(h.gc(0,"div",140),h.bc(1,"img",141),h.fc()),2&e){const e=h.sc();h.Lb(1),h.Ac("src",e.logo_url,h.Vc)}}function Po(e,t){1&e&&h.bc(0,"ion-icon",142)}function So(e,t){1&e&&h.bc(0,"ion-icon",143)}function Lo(e,t){1&e&&h.bc(0,"img",144)}const Ao=function(e,t,n){return{id:"foo-paginate-book-words",itemsPerPage:e,currentPage:t,totalItems:n}};let Io=(()=>{class e{constructor(e,t,n,o,i,s,c,l,d,g,u,p,h,f,b,m,_,v,k){if(this.activeRoute=e,this.bookService=t,this.controlErroresService=n,this.redirectService=o,this.sizePanelService=i,this.modalCtrl=s,this.alertController=c,this.toastr=l,this.resourcesService=d,this.tokenService=g,this.routerOutlet=u,this.menu=p,this.toastCtrl=h,this.profileService=f,this.colaborarService=b,this.publicService=m,this.resourceCreateEventService=_,this.el=v,this.document=k,this.scrollbarStyle=a.a.scrollbarStyle,this.queryText="",this.showSearchbar=!1,this.items=["First","Second","Third"],this.selectedValue="Second",this.book_id=null,this.bookItem=null,this.part_id=null,this.loadBook=!1,this.numberIndexPage=0,this.loading=!1,this.api_token="",this.openedSideResources=!0,this.has_thumbnails=!1,this.return_back_url=!1,this.colaborarItem=null,this.urlParent=r.i.book+"get_book_file/",this.urlParentDownload=r.i.book+"donwload-book/",this.urlParentPrinting=r.i.book+"printing-book/",this.movido=!1,this.fondo="https://cooldocsprime.com/admin/assets/img/background/visor/original/01.jpg",this.portada="",this.cant_cargas_responsivo=1,this.cursor=null,this.logo_url="",this.options_toolbar=[],this.right_menu="resources",this.options_toolbar_list=[{name:"lastLeft",active:1},{name:"left",active:1},{name:"currentPage",active:1},{name:"next",active:1},{name:"lastRight",active:1},{name:"zoomin",active:1},{name:"zoomout",active:1},{name:"slideshow",active:0},{name:"flipsound",active:0},{name:"fullscreen",active:1},{name:"share",active:0},{name:"download",active:0}],this.timerIdServer=null,this.canvasBookMaster=null,this.rxjsResourceChange=null,this.rxjsResourceRemove=null,this.rxjsResourcePush=null,this.modeSpeaking=!1,this.globalTextToSpeach="",this.intervalMesurentEventTextToSpeach=null,this.isLoadedServerAudio=!1,this.intentosVoices=0,this.audioLoadServer=null,this.pdfTextSelectable=!0,this.gutterShadow=!0,this.onLoadClick=!1,this.pdfFind=!0,this.bookOptions=null,this.borrado=!1,this.paginaActual=null,this.colorA=new tinycolor,this.colorT=new tinycolor,this.pag1="pageL",this.pag2="pageR",this.videos="",this.audios="",this.enlaces="",this.pdf="",this.diapositivas="",this.simuladores="",this.imagenes="",this.audiolibro="",this.impresion="",this.actualPage=null,this.inicio=!0,this.cant_videos=0,this.cant_audios=0,this.cant_enlaces=0,this.cant_pdf=0,this.cant_diapositivas=0,this.cant_simuladores=0,this.cant_imagenes=0,this.cant_cargas=0,this.cant_cargas_impresion=0,this.cant_carg_resp_imp=0,this.cant_paginas=0,this.cant_audiolibro=0,this.tab=!1,this.listTypesResources=[],this.showToastEnableResource=!0,this.selectedPagesResources=[],this.resourcePanelId=[],this.dragConstrainPoint=(e,t,n)=>{let o=0,i=0;return 1!=scaleBooPenGlobal&&(o=(1-scaleBooPenGlobal)*t.getFreeDragPosition().x,i=(1-scaleBooPenGlobal)*t.getFreeDragPosition().y),o<0&&(o=0),i<0&&(i=0),{x:e.x+o,y:e.y+i}},this.listResources=[],this.listResourcesReservaNextPages=[],this.modeEditionEnable=!1,this.imageObjectShow=[],this.selectedImageIndex=-1,this.showVisorImages=!1,this.attempUnities=1,this.showSubItems={unities:!0,themes:!0,subthemes:!0},this.pintingPages=[],this.is_expanded=!1,this.itemsPagesContent={items:[],page:1,pageSize:1,totalItems:1},this.book_id=e.snapshot.params.book_id,this.part_id=e.snapshot.params.part_id,this.colaborar_uuid=e.snapshot.queryParams.colaborar_uuid,this.sizePanelService.changeSizePanel("2000px"),e.snapshot.queryParams&&e.snapshot.queryParams.back_by&&e.snapshot.queryParams.ret_id)switch(e.snapshot.queryParams.back_by){case"course":this.return_back_url="/app/main/course/"+e.snapshot.queryParams.ret_id+"/"+e.snapshot.queryParams.ret_id+"/my_books"}setTimeout(()=>{this.sizePanelService.changeSizePanel("2000px")},1500),this.rxjsResourcePush=this.resourceCreateEventService.getPush$().subscribe(e=>{this.addNewResourceFromPage(e)}),this.rxjsResourceRemove=this.resourceCreateEventService.getRemove$().subscribe(e=>{this.destroyResourceByNumPage(e.resource,e.page_number)}),this.rxjsResourceChange=this.resourceCreateEventService.getChange$().subscribe(e=>{let t=this.listTypesResources.find(t=>t.page==e.page_number);if(t){let n=t.types.find(t=>t.uuid==e.type.uuid);if(n){let t=n.resources.findIndex(t=>t.uuid==e.resource.uuid);this.updateResourceContent(e,n.resources[t],n,t)}}}),this.rxjsResourceRemove=this.resourceCreateEventService.getPosition$().subscribe(e=>{this.changePositionsResources(e.resource,e.position,!e.set)})}openMenuRight(e){e==this.right_menu&&(this.resizeObject(),this.drawer.toggle()),this.right_menu=e}changePositionsResources(e,t,n){if(n){e.position=null;let t=this.listResources.findIndex(t=>t.uuid==e.uuid);t>=0&&this.listResources.splice(t,1)}else{let n=this.listResources.find(t=>t.uuid==e.uuid);if(null==n||null==n)e.position={x:t.left,y:t.top},this.listResources.push(e);else{n.position={x:t.left,y:t.top};let o=this.listResourcesReservaNextPages.find(t=>t.uuid==e.uuid);null!=o&&(o.position={x:t.left,y:t.top})}}}ngOnDestroy(){this.visor.nativeElement.remove(),this.canvasR.dispose(),this.sizePanelService.changeSizePanel("lg"),this.rxjsResourceRemove.unsubscribe(),this.rxjsResourcePush.unsubscribe(),this.rxjsResourceChange.unsubscribe()}sendTimerToServer(e=0){this.profileService.initTimer({action:"visor_books",context:"books",resource_uuid:this.book_id}).subscribe(e=>{e.uuid&&(this.timerIdServer=e.uuid)},t=>{(e+=1)<=3&&this.sendTimerToServer(e)})}getBook(){this.bookService.getBook(this.book_id).subscribe(e=>{if(this.colaborar_uuid&&this.findMyColaboration(this.book_id),this.bookItem=e.data,null!=this.bookItem){if(this.sendTimerToServer(),this.bookItem.visor){if(this.bookItem.visor.img_background&&(this.fondo=this.bookItem.visor.img_background),Array.isArray(this.bookItem.visor.permissions))for(const e of this.bookItem.visor.permissions){let t=this.options_toolbar_list.find(t=>t.name==e.name);null!=t&&(t.active=1),"thumbnails"==e.name&&(this.has_thumbnails=!0)}this.bookItem.visor.logo&&this.bookItem.visor.logo_url&&(this.logo_url=this.bookItem.visor.logo_url)}this.options_toolbar_list.forEach(e=>{1==e.active&&this.options_toolbar.push(e.name)}),this.bookItem.unities_count>0&&this.loadUnitiesByBook(this.bookItem.uuid),this.initializeVisor()}else this.redirectService.redirect(e.message,r.h.books,e.status)},e=>{this.controlErroresService.control(e),this.redirectService.redirect(null,r.h.books)})}findMyColaboration(e){this.colaborarService.find(this.colaborar_uuid,e).subscribe(e=>{this.colaborarItem=e.data,console.log(this.colaborarItem),this.colaborarItem.my_colaborar&&"editor"!=this.colaborarItem.my_colaborar.mode&&"admin"!=this.colaborarItem.my_colaborar.mode&&$(".subnivel-menu-pront-hi").addClass("d-none")},e=>{this.controlErroresService.control(e)})}ngOnInit(){this.getBook(),this.api_token=this.tokenService.getToken(!1),$(window).on("resize",(function(){$(".wowbook-control-zoomout").trigger("click")})),$(".mat-drawer-content").scroll((function(){})),this.elemHTML=document.documentElement,this.book_container=document.getElementById("book_container"),this.selectedTextToTextToSpeach()}selectedTextToTextToSpeach(){this.book_container.onmouseup=()=>{this.isPaying(this.audioLoadServer)||(this.audioLoadServer=null);var e,t=window.getSelection();try{t&&t.getRangeAt?(e=t.getRangeAt(0))&&e.toString()&&(this.showBtnTextToSpeach=!0,this.isPaying(this.audioLoadServer)&&this.audioLoadServer.pause(),this.modeSpeaking=!1,this.audioLoadServer=null,this.addEventsToBtnTextToSpeach(e)):this.hiddenTextToSpeachBtn()}catch(n){}}}addEventsToBtnTextToSpeach(e){this.globalTextToSpeach=e.toString(),$("#btn-text-to-speach-read").addClass("scale-effect"),setTimeout(()=>{this.isPaying(this.intervalMesurentEventTextToSpeach)||$("#btn-text-to-speach-read").removeClass("scale-effect")},5e3),this.book_container.onclick=()=>{this.hiddenTextToSpeachBtn()},this.book_container.onmouseleave=()=>{this.hiddenTextToSpeachBtn()}}hiddenTextToSpeachBtn(){window.getSelection().toString()||this.isPaying(this.audioLoadServer)||(this.showBtnTextToSpeach=!1,this.book_container.onclick=null,this.book_container.onmouseleave=null)}startTextToSpeachEvent(){if(!this.isLoadedServerAudio)if(null!=this.audioLoadServer){if(this.isPaying(this.audioLoadServer))return this.audioLoadServer.pause(),this.modeSpeaking=!1,void this.hiddenTextToSpeachBtn();this.modeSpeaking=!0,this.audioLoadServer.play()}else this.getAudioTextToSpeechServer(this.globalTextToSpeach)}isPaying(e){if(!e)return!1;var t=!1,n=0==e.currentTime,o=!!e.paused,i=!e.ended,s=0==e.readyState;return n&&o&&i&&s?t=!0:n||o||!i||s||(t=!0),t}playAudioSpeach(){return Object(P.b)(this,void 0,void 0,(function*(){this.modeSpeaking=!0,this.checkEventPlayAudioSpeach(),$("#btn-text-to-speach-read").addClass("scale-effect");let e=new SpeechSynthesisUtterance;e.lang="es-ES",e.text=this.globalTextToSpeach,e.volume=100,e.rate=1,e.pitch=5,window.speechSynthesis.speak(e)}))}sleep(e){return new Promise(t=>setTimeout(t,e))}cancelAudioSpeach(){window.speechSynthesis.cancel(),this.modeSpeaking=!1,$("#btn-text-to-speach-read").removeClass("scale-effect"),this.hiddenTextToSpeachBtn(),this.intervalMesurentEventTextToSpeach&&clearInterval(this.intervalMesurentEventTextToSpeach)}checkEventPlayAudioSpeach(){this.intervalMesurentEventTextToSpeach=setInterval(()=>{window.speechSynthesis.speaking||(this.modeSpeaking=!1,$("#btn-text-to-speach-read").removeClass("scale-effect"),this.intervalMesurentEventTextToSpeach&&clearInterval(this.intervalMesurentEventTextToSpeach))},1e3)}getAudioTextToSpeechServer(e){this.isLoadedServerAudio=!0,this.publicService.getAudioText(e).subscribe(e=>{this.audioLoadServer=new Audio("data:audio/wav;base64,"+e.audio),this.audioLoadServer.play(),this.modeSpeaking=!0,this.audioLoadServer.onended=()=>{this.modeSpeaking=!1,this.hiddenTextToSpeachBtn()},this.isLoadedServerAudio=!1},e=>{this.isLoadedServerAudio=!1})}ngAfterViewInit(){}initializeVisor(){this.cursor=this.startCursor(),cursor=this.cursor,this.canvasR=this.startCanvas("pageR",this.cursor),canvasR=this.canvasR,this.bookOptions=this.buildBookOptions("https://www.cooldocsprime.com/pdfHandler/thumbnail.php?p={{x}}&t=MjAtMDctMjAyMSAxNjozMTowMDsyODs5OTU7MTAxOA==",this.options_toolbar.join(","),this.urlParent+this.book_id+(this.part_id?"/"+this.part_id:""),this.canvasR,this.urlParentDownload+this.book_id+(this.part_id?"/"+this.part_id:"")+"?token_refrs="+this.tokenService.getToken(!1));try{this.canvasBookMaster=$(this.visor.nativeElement).wowBook(this.bookOptions),ajustar(this.canvasR,this.canvasBookMaster),this.onLoadClick||(this.onLoadClick=!0,$(".wowbook-control-next").on("click",()=>{this.listResources=[]}),$(".wowbook-control-left").on("click",()=>{this.listResources=[]}),$(".wowbook-control-lastLeft").on("click",()=>{this.listResources=[]}),$(".wowbook-control-lastRight").on("click",()=>{this.listResources=[]}),$(".wowbook-right").on("click",()=>{this.listResources=[]}),$(".wowbook-left").on("click",()=>{this.listResources=[]}))}catch(e){console.log(e)}}buildBookOptions(e,t,n,o,i){return{maxWidth:.85*$(window).width(),maxHeight:.85*$(window).height(),thumbnailsImages:e,toolbar:t,centeredWhenClosed:!0,flipSoundPath:"./assets/js/wow_book/sound/",flipSoundFile:["page-book.mp3","page.ogg"],downloadURL:i,pageNumbers:!1,tocHeader:"Tabla de Contenidos",thumbnailsVertical:!1,thumbnailsPosition:"left",mouseWheel:"zoom",responsiveSinglePage:!0,fullscreenElement:"body",container:"window",toolbarParent:".toolbar_container",share:"twitter",shareParams:{text:"Libro digital: "+this.bookItem.name},pdf:n+"?token_refrs="+localStorage.getItem("access_token_hpd"),pdfFind:this.pdfFind,pdfTextSelectable:this.pdfTextSelectable,gutterShadow:this.gutterShadow,transparentPages:!1,pagesInMemory:5,strings:{firstTooltip:"Primera P\xe1gina",lastTooltip:"\xdaltima P\xe1gina",backTooltip:"Atr\xe1s",nextTooltip:"Siguiente",zoominTooltip:"Aumentar",zoomoutTooltip:"Disminuir",slideshowTooltip:"",flipsoundTooltip:"",fullscreenTooltip:"",thumbnailsTooltip:"Miniaturas",tocTooltip:"Tabla de Contenidos",currentPageTooltip:"P\xe1gina Actual",downloadTooltip:"Descargar Documento",findInputPlaceHolder:"Ingrese texto a buscar",findPreviousTooltip:"Encontrar anterior",findNextTooltip:"Encontrar siguiente",findMatchCase:"Marcar coincidencia"},hardcovers:!0,zoomMax:1e3,onZoom:function(e){e.zoomLevel>1?$(".contenedor-logo").hide():$(".contenedor-logo").show()},onLoadPage:(e,t,n)=>{setTimeout(()=>{this.loadBook=!0},1e3),this.sombrear(),this.is_expanded||$(".wowbook-control-zoomout").trigger("click")},onShowPage:(e,t,n)=>{this.numberIndexPage=n;var i=r.i.book+"get-linears";if(!this.movido){var s=e.pages.length-1;(0==n||n==s&&(s+1)%2==0)&&$(".center").css("right","-35%"),(n>0&&n<s||n==s&&(s+1)%2!=0)&&$(".center").css("right","-65%")}if($(".wowbook-container").css("background",'url("'+this.fondo+'")'),$(".wowbook-container").css("background-size","cover"),$(".wowbook-container").css("background-position","center"),o.clear(),-1==n){var c=window.location.href.split("/"),a=c[c.length-1];n=a&&a!=this.book_id?parseInt(a):1,$("#sidebar-herramientas").hide()}else 1==++n&&this.loadResourcesByPage(n);1!=this.cant_cargas_responsivo&&2!=this.cant_cargas&&2!=this.cant_paginas||(this.videos="",this.audios="",this.enlaces="",this.pdf="",this.diapositivas="",this.simuladores="",this.imagenes="",this.audiolibro="",this.cant_videos=this.cant_audios=this.cant_enlaces=this.cant_pdf=this.cant_diapositivas=this.cant_simuladores=this.cant_imagenes=this.cant_cargas=this.cant_cargas_responsivo=0,this.cant_audiolibro=0),n%2==1&&(this.impresion="",this.cant_carg_resp_imp=this.cant_cargas_impresion=this.cant_paginas=0),t?t.onLeft&&(this.paginaActual=this.actualPage=n,actualPage=this.actualPage,cargar(this.actualPage,o,i,this.book_id,this.colaborar_uuid),this.loadResourcesByPage(n),this.selectedPagesResources=[],deleted=[]):(console.log("index",n),this.actualPage=n-1,this.loadResourcesByPage(n),actualPage=this.actualPage,this.selectedPagesResources=[],cargar(this.actualPage,o,i,this.book_id,this.colaborar_uuid),deleted=[]),1==n&&(this.actualPage=n-1,actualPage=this.actualPage),this.canvasBookMaster&&ajustar(this.canvasR,this.canvasBookMaster),this.listTypesResources=[],this.resourcePanelId=[],this.modeEditionEnable=!1,this.pagesPrinting(),this.drawer.close(),this.drawerPrinting.close(),this.sombrear(),setTimeout(()=>{"0px"==this.visor.nativeElement.style.width&&(this.visor.nativeElement.style.width="834.7px"),"0px"==this.visor.nativeElement.style.height&&(this.visor.nativeElement.style.height="500.82px",this.visor.nativeElement.style.marginTop="100px")},1500)}}}startCursor(){return new fabric.StaticCanvas("cursor")}sombrear(){if($("#sidebar-herramientas").is(":visible")){this.eliminaSombreado();var e=$("#buscar").val();if(""!=e){var t=e.split(" ").map((function(e){return e=(e=(e=(e=(e=e.replace(/a/gi,(function(e){return"[a|\xe1]"}))).replace(/e/gi,(function(e){return"[e|\xe9]"}))).replace(/i/gi,(function(e){return"[i|\xed]"}))).replace(/o/gi,(function(e){return"[o|\xf3]"}))).replace(/u/gi,(function(e){return"[u|\xfa]"})),new RegExp(e,"gi")}));console.log(t);for(var n=$(".wowbook-pdf-text div"),o=0;o<n.length;o++)for(var i=0;i<t.length;i++)if(console.log("c"),$(n[o]).html()){var s=$(n[o]).html().replace(t[i],(function(e){return console.log("en",e),'<span class="highlight">'+e+"</span>"}));$(n[o]).html()!=s&&(console.log("cambio",$(n[o])),$(n[o]).html(s))}}}}startCanvas(e,t){var n=new fabric.Canvas(e);n.freeDrawingBrush.width=15,n.targetFindTolerance=20,n.perPixelTargetFind=!0,n.freeDrawingCursor="none";var o=new fabric.Circle({left:-100,top:-100,radius:n.freeDrawingBrush.width/2,fill:"rgba(0,0,0,0.5)",stroke:"black",originX:"center",originY:"center"});return n.set("mousecursor",o),n.on("selection:created",(function(e){})),n.on("mouse:up",e=>{if(borrado)if(n.getActiveObjects())n.getActiveObjects().forEach(e=>{var t=e.id,o=e.get("type");"-1"!=t&&t&&("path"==o?deletedLineas.push(t):deleted.push(t)),n.remove(e)}),n.discardActiveObject().renderAll();else if(n.getActiveObject()){var t=n.getActiveObject(),o=t.id,i=t.get("type");"-1"!=o&&o&&("path"==i?deletedLineas.push(o):deleted.push(o)),n.remove(t)}}),n.on("mouse:move",(function(e){var o=this.getPointer(e.e);n.mousecursor.set({top:o.y,left:o.x}).setCoords(),t.renderAll()})),n.on({"object:scaling":e=>{console.log(t);var t=e.target;t.myCustomOptionKeepStrokeWidth&&t.set("strokeWidth",t.myCustomOptionKeepStrokeWidth/((t.scaleX+t.scaleY)/5))},"before:selection:cleared":function(e){var t=this.getActiveObject();console.log(t),t?5==t.tipo&&mostrarFigura(t,this):n.getActiveObjects().forEach(e=>{5==e.tipo&&mostrarFigura(e,n)})}}),n}eliminaSombreado(){for(var e=document.getElementsByClassName("highlight");e.length;){for(var t=e[0].parentNode;e[0].firstChild;)t.insertBefore(e[0].firstChild,e[0]);t.removeChild(e[0])}}mostrarFigura(e,t){if(e){if(5==e.tipo){var n=e.id,o=e.text,i=tinycolor(e.backgroundColor),s="/assets/img/icons/nota"+i.toHexString().substr(1)+".png";fabric.Image.fromURL(s,s=>{s.set({left:e.left,top:e.top,lockScalingX:!0,lockScalingY:!0,lockRotation:!0}),s.set("tipo",-1),s.set("id",n),s.set("texto",o),s.set("color",i.toHexString()),s.perPixelTargetFind=!1,s.on("mouseup",e=>{mostrarFigura(e.target,this.canvasR)}),e.remove(),s.lockRotation=!0,t.add(s);var c=t.toJSON();t.setActiveObject(t.item(c.objects.length-1))})}else if(-1==e.tipo){n=e.id,console.log(n),e.remove(),this.texto(t,e.color,e.texto,e.left,e.top,e.scaleX,e.scaleY,e.id);var c=t.toJSON();t.setActiveObject(t.item(c.objects.length-1))}}else $().toastmessage("showToast",{text:"No hay nota seleccionada",sticky:!1,position:"middle-center",type:"error",stayTime:1500,close:null})}texto(e,t,n,o,i,s,c,a){t=t||"#ffff00",n=n||"Mi Nota",o=o||110,i=i||150,s=s||1,c=c||1,a=a||-1;var r=tinycolor(t);r.setAlpha(.5),this.noDrawing(e);var l=new fabric.Textbox(n,{width:s,top:i,left:o,fontSize:35,textAlign:"left",backgroundColor:r.toRgbString()});l.hasBorders=!1,l.set({cornerColor:"black",cornerSize:25,transparentCorners:!0}),l.set("tipo",5),l.set("id",a),l.set("color",t),l.lockRotation=!0,e.add(l)}noDrawing(e){$("#canvas-wrapper-drawing").css("pointer-events","auto"),$("#canvas-wrapper-drawing").css("cursor","auto"),this.borrado=!1,e.isDrawingMode=!1,this.cursor.remove(this.cursor.item(0))}loadResourcesByPage(e){let t=e>0?e:1;this.selectedPagesResources=[],this.selectedPagesResources.findIndex(e=>e==t)>=0||(this.selectedPagesResources.push(t),e>1&&this.selectedPagesResources.push(e%2==0?t+1:t-1),this.finResourcesByPositions(),this.bookService.getResourceBook(this.book_id,this.selectedPagesResources,this.part_id,this.colaborar_uuid).subscribe(e=>Object(P.b)(this,void 0,void 0,(function*(){if(e.data.length>0){this.listTypesResources=e.data,this.resourcePanelId=[];for(const t of e.data)this.resourcePanelId.push(t.page_number);if(this.showToastEnableResource){const t=yield this.toastCtrl.create({message:e.message,duration:7e3,color:"warning",position:"top",buttons:[{text:"Ver Recursos",handler:()=>{this.showIndexResources(this.resourcePanelId),this.resourcePanelId=[]}},{text:"x",role:"cancel",handler:()=>{}}]});yield t.present()}this.showToastEnableResource=!1,setTimeout(()=>{this.showToastEnableResource=!0},4e3)}})),e=>{}))}finResourcesByPositions(){console.log(44);let e=[];this.listResources=[];let t=this.selectedPagesResources.map(e=>e);if(t.forEach(t=>{this.listResourcesReservaNextPages.findIndex(e=>t==e.page_number)<=-1&&e.push(t);let n=this.listResourcesReservaNextPages.filter(e=>e.page_number==t);this.listResources=this.listResources.concat(n)}),e.length>0&&this.bookService.getResourceBookByPos(this.book_id,e,this.part_id,this.timerIdServer,this.colaborar_uuid).subscribe(e=>{e.data.length>0&&(this.listResources=this.listResources.concat(e.data))},e=>{}),2==t.length){let e=[];t.forEach(t=>{e.push(t+2)}),t.forEach(t=>{e.push(t-2)}),this.bookService.getResourceBookByPos(this.book_id,e,this.part_id,this.timerIdServer,this.colaborar_uuid).subscribe(e=>{e.data.length>0&&(this.listResourcesReservaNextPages=e.data)},e=>{})}}startDragging(e,t){const n={x:t.x*scaleBooPenGlobal,y:t.y*scaleBooPenGlobal};e.source._dragRef.setFreeDragPosition(n),e.source._dragRef._activeTransform=t,e.source._dragRef._applyRootElementTransform(t.x,t.y)}dropResource(e,t){console.log(t.position),e.source.getRootElement().getBoundingClientRect(),console.log(e.source.getRootElement().getBoundingClientRect()),this.enablePositionVisor(t,t.position)}resizeObject(){$(".wowbook-control-zoomout").trigger("click")}showDocument(e,t="",n=null){return Object(P.b)(this,void 0,void 0,(function*(){const e=yield this.modalCtrl.create({component:kn.a,cssClass:"modal-fullscreen-100",swipeToClose:!0,componentProps:{resource_uuid:n.uuid}});yield e.present(),yield e.onWillDismiss()}))}addResourcePanel(){return Object(P.b)(this,void 0,void 0,(function*(){if(!this.bookItem||!this.bookItem.add_resource)return!1;let e=[this.actualPage>0?this.actualPage:1];this.actualPage>0&&e.push(this.actualPage+1);const t=yield this.modalCtrl.create({component:Jt,cssClass:"modal-fullscreen-100",swipeToClose:!0,componentProps:{parent_id:this.bookItem.uuid,resource_type:"book",colaborar_id:this.colaborar_uuid,selectedPages:e,book:this.bookItem}});yield t.present();const{data:n}=yield t.onWillDismiss();this.addNewResourceFromPage(n)}))}addNewResourceFromPage(e){if(e&&e.page_number&&e.type&&e.resource){let t=this.listTypesResources.find(t=>t.page==e.page_number);if(null==t)e.type.resources=[e.resource],this.listTypesResources.push({page:e.page_number,types:[e.type]});else{let n=t.types.find(t=>t.uuid==e.type.uuid);if(null==n)e.type.resources=[e.resource],t.types.push(e.type);else{if(Array.isArray(n.resources)||(n.resources=[]),n.resources.findIndex(t=>t.uuid==e.resource.uuid)>=0)return;n.resources.push(e.resource)}}}}enableModeResources(){$(".wowbook-control-zoomout").trigger("click"),this.modeEditionEnable?this.toastr.warning("Modo edici\xf3n desabilitado","Edici\xf3n",{positionClass:"toast-bottom-left"}):this.toastr.info("Modo edici\xf3n habilitado","Edici\xf3n",{positionClass:"toast-bottom-left"}),this.modeEditionEnable=!this.modeEditionEnable}enablePositionVisor(e,t=null,n=!1){this.loading=!0;let o={left:0,top:0};null!=t&&(o={left:t.x,top:t.y}),n&&(o={left:null,top:null}),this.resourcesService.updatePosition(o,e.uuid).subscribe(o=>{if(n){e.position=null;let t=this.listResources.findIndex(t=>t.uuid==e.uuid);t>=0&&this.listResources.splice(t,1)}else if(null==t)e.position={x:o.left,y:o.top},this.listResources.push(e);else{let t=this.listResources.find(t=>t.uuid==e.uuid);null!=t&&(t.position={x:o.left,y:o.top});let n=this.listResourcesReservaNextPages.find(t=>t.uuid==e.uuid);null!=n&&(n.position={x:o.left,y:o.top})}this.loading=!1},e=>{this.controlErroresService.control(e),this.loading=!1})}showLightbox(e=[],t){this.selectedImageIndex=t,this.imageObjectShow=e,this.showVisorImages=!0}closeEventHandler(){this.showVisorImages=!1,this.imageObjectShow=[],this.selectedImageIndex=-1}deleteResource(e,t,n){return Object(P.b)(this,void 0,void 0,(function*(){const o=yield this.alertController.create({header:"Eliminar",message:"\xbfDesea eliminar este recurso?",buttons:[{text:"Cancelar",role:"cancel"},{text:"Eliminar",role:"destructive",handler:()=>{this.destroyResource(e,t,n)}}]});yield o.present()}))}openQuestionaryVisor(e){return Object(P.b)(this,void 0,void 0,(function*(){const t=yield this.modalCtrl.create({component:Me.a,cssClass:"modal-fullscreen-100",swipeToClose:!0,componentProps:{activity_uuid:e.uuid,resource_type:"resource"}});yield t.present(),yield t.onWillDismiss()}))}openVideoQuizVisor(e){return Object(P.b)(this,void 0,void 0,(function*(){const t=yield this.modalCtrl.create({component:Oe.a,cssClass:"modal-fullscreen-100",swipeToClose:!0,componentProps:{activity_uuid:e.uuid,resource_type:"resource"}});yield t.present(),yield t.onWillDismiss()}))}destroyResource(e,t,n){this.loading=!0,this.resourcesService.delete(e.uuid).subscribe(o=>{if("yes"==o.deleted){let o=this.listResources.findIndex(t=>t.uuid==e.uuid);o>=0&&this.listResources.splice(o,1),this.listTypesResources[n]&&this.listTypesResources[n].types[t]&&(o=this.listTypesResources[n].types[t].resources.findIndex(t=>t.uuid==e.uuid),o>=0&&(this.listTypesResources[n].types[t].resources.splice(o,1),0==this.listTypesResources[n].types[t].resources.length&&(this.listTypesResources[n].types.splice(t,1),0==this.listTypesResources[n].types.length&&this.listTypesResources.splice(n,1)))),0==this.listTypesResources.length&&(this.drawer.close(),this.toastr.warning("Modo edici\xf3n desabilitado","Edici\xf3n",{positionClass:"toast-bottom-left"}),this.modeEditionEnable=!1),this.loading=!1}this.toastr[o.status](o.message)},e=>{this.loading=!1,this.controlErroresService.control(e)})}destroyResourceByNumPage(e,t){let n=this.listResources.findIndex(t=>t.uuid==e.uuid);n>=0&&this.listResources.splice(n,1);let o=this.listTypesResources.findIndex(e=>e.page==t);if(this.listTypesResources[o]){let t=this.listTypesResources[o].types.findIndex(t=>t.uuid==e.type_resource_uuid);this.listTypesResources[o].types[t]&&(n=this.listTypesResources[o].types[t].resources.findIndex(t=>t.uuid==e.uuid),n>=0&&(this.listTypesResources[o].types[t].resources.splice(n,1),0==this.listTypesResources[o].types[t].resources.length&&(this.listTypesResources[o].types.splice(t,1),0==this.listTypesResources[o].types.length&&this.listTypesResources.splice(o,1))))}}editResource(e,t,n){return Object(P.b)(this,void 0,void 0,(function*(){if(!e.is_edit)return!1;let o=[this.actualPage>0?this.actualPage:1];this.actualPage>0&&o.push(this.actualPage+1);const i=yield this.modalCtrl.create({component:Jt,cssClass:"modal-fullscreen-100",swipeToClose:!0,componentProps:{parent_id:this.bookItem.uuid,resource_type:"book",selectedPages:o,resource_id:e.uuid,book:this.bookItem}});yield i.present();const{data:s}=yield i.onWillDismiss();this.updateResourceContent(s,e,n,t)}))}updateResourceContent(e,t,n,o){if(console.log(e,t,n,o),e&&e.page_number&&e.type&&e.resource){let i=this.listResources.findIndex(e=>e.uuid==t.uuid);if(i>=0&&(this.listResources[i]=e.resource),t.page_uuid!=e.resource.page_uuid){n.resources.splice(o,1);let t=this.listTypesResources.find(t=>t.page==e.page_number);if(null==t)e.type.resources=[e.resource],this.listTypesResources.push({page:e.page_number,types:[e.type]});else{let n=t.types.find(t=>t.uuid==e.type.uuid);null==n?(e.type.resources=[e.resource],t.types.push(e.type)):(Array.isArray(n.resources)||(n.resources=[]),n.resources.push(e.resource))}}else if(t.type_resource_uuid!=e.resource.type_resource_uuid){n.resources.splice(o);let t=this.listTypesResources.find(t=>t.page==e.page_number);if(null==t)e.type.resources=[e.resource],this.listTypesResources.push({page:e.page_number,types:[e.type]});else{let n=t.types.find(t=>t.uuid==e.type.uuid);null==n?(e.type.resources=[e.resource],t.types.push(e.type)):(Array.isArray(n.resources)||(n.resources=[]),n.resources.push(e.resource))}}else n.resources[o]=e.resource}}showIndexResources(e){return Object(P.b)(this,void 0,void 0,(function*(){if(null==this.bookItem)return!1;const t=yield this.modalCtrl.create({component:gn,cssClass:"modal-fullscreen-100",swipeToClose:!0,componentProps:{book_id:this.bookItem.uuid,scrollToPages:e}});yield t.present()}))}showThumbnails(){return Object(P.b)(this,void 0,void 0,(function*(){if(null==this.bookItem)return!1;const e=yield this.modalCtrl.create({component:vn,swipeToClose:!0,componentProps:{book_id:this.bookItem.uuid}});yield e.present()}))}loadUnitiesByBook(e,t=1){this.bookService.getUnitsForBook(e).subscribe(e=>{this.bookItem.unities=e.data,this.bookItem.unities_count=this.bookItem.unities.length},n=>{if(t>3)return this.controlErroresService.control(n),!1;this.loadUnitiesByBook(e,t+1)})}typingUnity(e=null){return Object(P.b)(this,void 0,void 0,(function*(){const t=yield this.alertController.create({cssClass:"",header:e?"Editar Unidad":"A\xf1adir Unidad",inputs:[{name:"name",value:e?e.name:"",type:"text",placeholder:"T\xedtulo"},{name:"start_page",value:e?e.start_page:"",type:"number",placeholder:"Desde la p\xe1gina n\xfamero",min:0},{name:"end_page",value:e?e.end_page:"",type:"number",placeholder:"Hasta la p\xe1gina n\xfamero",min:0}],buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:()=>{}},{text:"Guardar",handler:t=>t.start_page&&t.end_page&&t.name&&!isNaN(t.start_page)&&!isNaN(t.end_page)&&+t.end_page>=+t.start_page?(this.loading=!0,e?this.updateUnityServer(t,e):this.storeUnityServer(t),t):(this.toastr.warning("Valores incorrectos!"),!1)}]});yield t.present()}))}storeUnityServer(e){this.bookService.createUnitBook(this.bookItem.uuid,e).subscribe(e=>{Array.isArray(this.bookItem.unities)||(this.bookItem.unities=[]),Array.isArray(e.data.themes)||(e.data.themes=[]),this.bookItem.unities.push(e.data),this.loading=!1,this.bookItem.unities_count++},e=>{this.loading=!1,this.controlErroresService.control(e)})}updateUnityServer(e,t){this.bookService.updateUnitBook(t.uuid,e).subscribe(e=>{t.name=e.data.name,t.start_page=e.data.start_page,t.end_page=e.data.end_page,this.loading=!1},e=>{this.loading=!1,this.controlErroresService.control(e)})}typingThemeBook(e,t=null){return Object(P.b)(this,void 0,void 0,(function*(){const n=yield this.alertController.create({cssClass:"",header:t?"Editar Tema":"A\xf1adir Tema",inputs:[{name:"name",value:t?t.name:"",type:"text",placeholder:"T\xedtulo"},{name:"start_page",value:t?t.start_page:"",type:"number",placeholder:"Desde la p\xe1gina n\xfamero",min:0},{name:"end_page",value:t?t.end_page:"",type:"number",placeholder:"Hasta la p\xe1gina n\xfamero",min:0}],buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:()=>{}},{text:"Guardar",handler:n=>n.start_page&&n.end_page&&n.name&&!isNaN(n.start_page)&&!isNaN(n.end_page)&&+n.end_page>=+n.start_page?(this.loading=!0,t?this.updateThemeBook(n,t):this.storeThemeBook(n,e),n):(this.toastr.warning("Valores incorrectos!"),!1)}]});yield n.present()}))}storeThemeBook(e,t){this.bookService.createThemeBook(t.uuid,e).subscribe(e=>{Array.isArray(t.themes)||(t.themes=[]),Array.isArray(e.data.themes)||(e.data.themes=[]),t.themes.push(e.data),this.loading=!1},e=>{this.loading=!1,this.controlErroresService.control(e)})}updateThemeBook(e,t){this.bookService.updateThemeBook(t.uuid,e).subscribe(e=>{t.name=e.data.name,t.start_page=e.data.start_page,t.end_page=e.data.end_page,this.loading=!1},e=>{this.loading=!1,this.controlErroresService.control(e)})}typingSubThemeBook(e,t){return Object(P.b)(this,void 0,void 0,(function*(){const n=yield this.alertController.create({cssClass:"",header:t?"Editar Subtema":"A\xf1adir Subtema",inputs:[{name:"name",value:t?t.name:"",type:"text",placeholder:"T\xedtulo"},{name:"start_page",value:t?t.start_page:"",type:"number",placeholder:"Desde la p\xe1gina n\xfamero",min:0},{name:"end_page",value:t?t.end_page:"",type:"number",placeholder:"Hasta la p\xe1gina n\xfamero",min:0}],buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:()=>{}},{text:"Guardar",handler:n=>n.name?(this.loading=!0,n.start_page&&n.end_page&&n.name&&!isNaN(n.start_page)&&!isNaN(n.end_page)&&+n.end_page>=+n.start_page?(t?this.updateSubTheme(n,t):this.storeSubTheme(n,e),n):(this.toastr.warning("Valores incorrectos!"),!1)):(this.toastr.warning("Valores incorrectos!"),!1)}]});yield n.present()}))}storeSubTheme(e,t){this.bookService.createSubThemeBook(t.uuid,e).subscribe(e=>{Array.isArray(t.subthemes)||(t.subthemes=[]),t.subthemes.push(e.data),this.loading=!1},e=>{this.loading=!1,this.controlErroresService.control(e)})}updateSubTheme(e,t){this.bookService.updateSubThemeBook(t.uuid,e).subscribe(e=>{t.name=e.data.name,t.start_page=e.data.start_page,t.end_page=e.data.end_page,this.loading=!1},e=>{this.loading=!1,this.controlErroresService.control(e)})}deleteUnity(e,t){return Object(P.b)(this,void 0,void 0,(function*(){const n=yield this.alertController.create({cssClass:"my-custom-class",header:"\xa1Confirmar o denegar!",message:"\xbfEst\xe1 seguro de eliminar la unidad, se eliminar\xe1n los datos internos?",buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary",handler:e=>{}},{text:"Eliminar",role:"destructive",handler:()=>{this.loading=!0,this.bookService.deleteUnitBook(e).subscribe(e=>{this.loading=!1,this.bookItem.unities.splice(t,1),this.bookItem.unities_count--},e=>{this.loading=!1})}}]});yield n.present()}))}deleteTheme(e,t,n){return Object(P.b)(this,void 0,void 0,(function*(){const o=yield this.alertController.create({cssClass:"my-custom-class",header:"\xa1Confirmar o denegar!",message:"\xbfEst\xe1 seguro de eliminar el tema, se eliminar\xe1n los datos internos?",buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary",handler:e=>{}},{text:"Eliminar",role:"destructive",handler:()=>{this.loading=!0,this.bookService.deleteThemeBook(e).subscribe(e=>{this.loading=!1,t.themes.splice(n,1)},e=>{this.loading=!1})}}]});yield o.present()}))}deleteSubtheme(e,t,n){return Object(P.b)(this,void 0,void 0,(function*(){const o=yield this.alertController.create({cssClass:"my-custom-class",header:"\xa1Confirmar o denegar!",message:"\xbfEst\xe1 seguro de eliminar el subtema?",buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary",handler:e=>{}},{text:"Eliminar",role:"destructive",handler:()=>{this.loading=!0,this.bookService.deleteSubThemeBook(e).subscribe(e=>{this.loading=!1,t.subthemes.splice(n,1)},e=>{this.loading=!1})}}]});yield o.present()}))}redirectPage(e){location.href="/app/main/visor/"+this.book_id+"#mybook/"+e}dropEventUnits(e){this.showSubItems.themes=!0,Object(me.i)(this.bookItem.unities,e.previousIndex,e.currentIndex),this.loading=!0,this.bookService.reorderUnitBook(this.bookItem.uuid,this.bookItem.unities.map(e=>e.uuid)).subscribe(e=>{this.loading=!1},e=>{this.loading=!1})}_dragStartedHandler(e){this.showSubItems.themes=!1}dropEventSubtemes(e,t){Object(me.i)(t.subthemes,e.previousIndex,e.currentIndex),this.loading=!0,this.bookService.reorderSubThemeBook(this.bookItem.uuid,t.subthemes.map(e=>e.uuid)).subscribe(e=>{this.loading=!1},e=>{this.loading=!1})}dropEventThemes(e,t){this.showSubItems.subthemes=!0,Object(me.i)(t.themes,e.previousIndex,e.currentIndex),this.loading=!0,this.bookService.reorderThemeBook(this.bookItem.uuid,t.themes.map(e=>e.uuid)).subscribe(e=>{this.loading=!1},e=>{this.loading=!1})}_dragStartedHandlerThemes(e){this.showSubItems.subthemes=!1}showBookDetail(e){return Object(P.b)(this,void 0,void 0,(function*(){const t=yield this.modalCtrl.create({component:L.a,cssClass:"modal-fullscreen-100",swipeToClose:!0,presentingElement:this.routerOutlet.nativeEl,componentProps:{uuid:e}});yield t.present()}))}openModalAbilities(e){return Object(P.b)(this,void 0,void 0,(function*(){const t=yield this.modalCtrl.create({component:Be,cssClass:"modal-fullscreen",swipeToClose:!0,componentProps:{theme:e,enable_edit:this.bookItem.is_edit}});yield t.present()}))}pagesPrinting(){if(!this.bookItem||!this.bookItem.is_edit)return!1;let e=[this.actualPage>0?this.actualPage:1];this.actualPage>0&&e.push(this.actualPage+1),this.bookService.getIdsPages(e,this.bookItem.uuid,{printing:1},this.part_id).subscribe(e=>{this.pintingPages=e.data},e=>{this.controlErroresService.control(e)})}printingPage(e){window.open(e.path_image_url+"&book_id="+this.bookItem.uuid+"&token_refrs="+this.api_token+"&convert_pdf=1")}openModalClone(){return Object(P.b)(this,void 0,void 0,(function*(){if(null==this.bookItem)return!1;const e=yield this.modalCtrl.create({component:sn,cssClass:"modal-fullscreen",swipeToClose:!0,componentProps:{book:this.bookItem}});yield e.present()}))}expandAllBook(){this.is_expanded?(this.is_expanded=!1,this.closeFullscreen(),$(".wowbook-control-zoomout").trigger("click")):(this.is_expanded=!0,this.openFullscreen(),setTimeout(()=>{$(".wowbook-control-zoomin").trigger("click"),setTimeout(()=>{$(".wowbook-zoomcontent.wowbook-draggable").css({top:"-100px",transition:"1s"})},200)},1e3))}openFullscreen(){this.elemHTML.requestFullscreen?this.elemHTML.requestFullscreen():this.elemHTML.mozRequestFullScreen?this.elemHTML.mozRequestFullScreen():this.elemHTML.webkitRequestFullscreen?this.elemHTML.webkitRequestFullscreen():this.elemHTML.msRequestFullscreen&&this.elemHTML.msRequestFullscreen()}closeFullscreen(){this.document.exitFullscreen?this.document.exitFullscreen():this.document.mozCancelFullScreen?this.document.mozCancelFullScreen():this.document.webkitExitFullscreen?this.document.webkitExitFullscreen():this.document.msExitFullscreen&&this.document.msExitFullscreen()}inputSearchPagesByText(){this.timeoutTextSearch&&clearTimeout(this.timeoutTextSearch),this.timeoutTextSearch=setTimeout(()=>this.searchPagesByText(),1e3)}removeTitlesSvg(){this.el.nativeElement.shadowRoot.querySelector(".icon-inner svg title")}searchPagesByText(e=1){this.loading=!0,this.itemsPagesContent.page=e,this.bookService.searchPagesByBook(this.book_id,this.queryText,this.itemsPagesContent.page).subscribe(e=>{this.itemsPagesContent.items=e.data.data,this.itemsPagesContent.pageSize=e.data.page_size,this.itemsPagesContent.totalItems=e.data.total_pg,this.loading=!1},e=>{this.loading=!1})}pageChangedByText(e){if(console.log(e),e==1/0)return!1;this.searchPagesByText(e)}}return e.\u0275fac=function(t){return new(t||e)(h.ac(c.a),h.ac(S.a),h.ac(l.a),h.ac(u.a),h.ac(ye.a),h.ac(s.Db),h.ac(s.b),h.ac(Cn.b),h.ac(Ce.a),h.ac(we.a),h.ac(s.fb),h.ac(s.Cb),h.ac(s.Nb),h.ac(ve.a),h.ac(_e.a),h.ac(ke.a),h.ac(xe.a),h.ac(h.o),h.ac(o.e))},e.\u0275cmp=h.Ub({type:e,selectors:[["app-visor"]],viewQuery:function(e,t){var n;1&e&&(h.ld(Mn,!0),h.ld(On,!0),h.ld(Pn,!0),h.ld(Sn,!0)),2&e&&(h.Nc(n=h.pc())&&(t.visor=n.first),h.Nc(n=h.pc())&&(t.drawer=n.first),h.Nc(n=h.pc())&&(t.drawerPrinting=n.first),h.Nc(n=h.pc())&&(t.drawerUnities=n.first))},decls:77,vars:59,consts:[["translucent","true"],[3,"ngClass"],["slot","start"],[3,"href","matTooltip",4,"ngIf"],[3,"matTooltip","click",4,"ngIf"],[1,"c-pointer",3,"click"],["style","color: rgb(252, 101, 0);",4,"ngIf"],["slot","end",4,"ngIf"],["mode","indeterminate",4,"ngIf"],["fullscreen","true",3,"scrollbar"],["autosize","",1,"example-container"],["class","example-sidenav p-0","mode","side","position","start","style","width: 350px;",4,"ngIf"],["mode","side","position","end",1,"example-sidenav","p-0",2,"width","270px"],["drawer",""],["style","margin-bottom: 50px;",3,"class",4,"ngFor","ngForOf"],[2,"margin-bottom","50px"],[3,"ngModel","placeholder","ngModelChange","ionChange","ionCancel"],[2,"max-height","70vh","overflow","auto"],[4,"ngFor","ngForOf"],[1,"flex","flex-center"],["id","foo-paginate-book-words","maxSize","9","directionLinks","true","autoHide","true","responsive","true",3,"previousLabel","nextLabel","screenReaderPaginationLabel","screenReaderPageLabel","screenReaderCurrentLabel","pageChange","pageBoundsCorrection"],["drawerPrinting",""],[1,"text-center"],["class","c-pointer",3,"click",4,"ngFor","ngForOf"],[3,"scrollbar"],[1,"wrapper-container"],["id","canvas-wrapper-drawing",1,"canvas-wrapper",2,"z-index","99999 !important"],["id","pageR",2,"z-index","1000!important"],["class","w-rss-300",4,"ngIf"],["id","canvas-wrapper-cursor",1,"canvas-wrapper"],["id","cursor",2,"pointer-events","none!important","z-index","1001!important"],[3,"canvasR","colorA","actualPage","colaborar_id","book_id",4,"ngIf"],["id","book_container",1,"book_container"],["id","mybook",2,"width","100%"],["mybook",""],[4,"ngIf"],["id","sidebar-herramientas",2,"display","none"],[1,"titulo-barra"],["src","/assets/js/wow_book/iconos/find.png"],["id","ocultarHerramientas",1,"btn"],[1,"form-group"],["type","text","name","buscar","id","buscar","value","","placeholder","Ingrese texto a buscar",1,"form-control"],[1,"contenedor-loading","text-center",2,"display","none"],[1,"contenedor-paginador","text-center"],["id","paginationSearch",1,"pagination-sm"],[1,"contenido-interno"],["id","pages"],["class","contenedor-logo",4,"ngIf"],[3,"images","imageIndex","show","close"],["id","btn-text-to-speach-read",1,"button-master-canvas-tospeach-tnx",3,"matTooltip","ngClass","color","click"],["name","mic-outline",4,"ngIf"],["name","pause-outline",4,"ngIf"],["src","assets/img/loading.gif","alt","Loading","style","width:40px",4,"ngIf"],["ref","toolTip",1,"toolTip-master-canvas-show"],["color","warning",1,"button-master-canvas-show-tnx",3,"click"],["name","expand-outline"],["id","foot-panel-expand-wowbook",1,"toolbar_container"],[3,"href","matTooltip"],["name","arrow-back-outline"],[3,"matTooltip","click"],["name","albums-outline"],[2,"color","rgb(252, 101, 0)"],["slot","end"],[3,"book_id","colaborar_id","colaborar","book",4,"ngIf"],["name","apps-outline"],[3,"matTooltip","color","style","click",4,"ngIf"],["name","search-outline"],[3,"book_id","colaborar_id","colaborar","book"],["name","print-outline"],["name","images-outline"],["name","library-outline"],[3,"matTooltip","color","click"],["name","create-outline"],["name","book-outline"],["mode","indeterminate"],["mode","side","position","start",1,"example-sidenav","p-0",2,"width","350px"],["drawerUnities",""],[1,"bold","text-center",2,"margin-top","10px"],["cdkDropList","",3,"cdkDropListDropped"],["cdkDrag","","text-wrap","",1,"c-pointer","style-hover-text-un",2,"font-size","0.9em",3,"cdkDragDisabled","click","cdkDragStarted"],["slot","end",1,"m-0","bold"],["text-wrap","",1,"m-0","bold"],["style","font-size: 0.8em;","slot","end","class","m-l-1","color","warning","size","small",3,"click",4,"ngIf"],["style","font-size: 0.8em;","slot","end","class","m-l-1","color","danger","size","small",3,"click",4,"ngIf"],["slot","end",3,"name","click"],["cdkDropList","",3,"ngClass","cdkDropListDropped"],["class","m-0 m-l-1",3,"ngClass",4,"ngIf"],["slot","end","color","warning","size","small",1,"m-l-1",2,"font-size","0.8em",3,"click"],["slot","end","color","danger","size","small",1,"m-l-1",2,"font-size","0.8em",3,"click"],["name","trash-outline"],["cdkDrag","",1,"c-pointer","style-hover-text-un","m-l-1",2,"font-size","0.9em",3,"cdkDragDisabled","cdkDragStarted","click"],["class","m-0","slot","end",4,"ngIf"],["style","font-size: 0.8em;","class","m-l-1","slot","end","color","warning","size","small",3,"matTooltip","click",4,"ngIf"],["text-wrap","",1,"m-0","long-text"],["style","font-size: 0.8em;","class","m-l-1","slot","end","color","warning","size","small",3,"click",4,"ngIf"],["cdkDrag","","style","font-size: 0.9em;","class","c-pointer style-hover-text-un m-l-2",3,"cdkDragDisabled","click",4,"ngFor","ngForOf"],[3,"ngClass",4,"ngIf"],["slot","end",1,"m-0"],["slot","end","color","warning","size","small",1,"m-l-1",2,"font-size","0.8em",3,"matTooltip","click"],["cdkDrag","",1,"c-pointer","style-hover-text-un","m-l-2",2,"font-size","0.9em",3,"cdkDragDisabled","click"],["text-wrap","",1,"m-0"],["class","m-l-1","style","font-size: 0.8em;","slot","end","color","warning","size","small",3,"click",4,"ngIf"],["style","font-size: 0.8em;","slot","end","color","warning","size","small",3,"click",4,"ngIf"],["slot","end","color","warning","size","small",2,"font-size","0.8em",3,"click"],[1,"m-0","m-l-1",3,"ngClass"],["color","secondary","size","small",2,"margin-left","auto","font-size","0.8em",3,"click"],["expand","full","size","small",2,"font-size","0.8em",3,"click"],["expand","full","color","secondary","size","small",2,"font-size","0.8em",3,"click"],[3,"name"],[1,"p-0",3,"scrollbar"],[1,"c-pointer"],[3,"click",4,"ngIf"],[3,"click"],["class","flex p-0 flex-end",4,"ngIf"],[3,"src"],["color","success","name","document-text-outline"],["target","_blank",3,"href",4,"ngIf"],["target","_blank",3,"href"],["name","link-outline"],[1,"flex","p-0","flex-end"],["size","small","color","secondary",3,"matTooltip","disabled","click",4,"ngIf"],["color","warning","size","small",3,"matTooltip","disabled","click",4,"ngIf"],["color","success","size","small",3,"disabled","matTooltip","click",4,"ngIf"],["size","small","color","danger",3,"disabled","matTooltip","click",4,"ngIf"],["size","small","color","secondary",3,"matTooltip","disabled","click"],["name","move-outline"],["color","warning","size","small",3,"matTooltip","disabled","click"],["name","unlink-outline"],["color","success","size","small",3,"disabled","matTooltip","click"],["size","small","color","danger",3,"disabled","matTooltip","click"],["text-wrap","",1,"c-pointer","style-hover-text-un",2,"font-size","0.9em",3,"click"],[1,"w-rss-300"],["id","canvas-resources",1,"canvas-wrapper",2,"z-index","99999 !important"],["class","box-content-resource-icon c-move","cdkDrag","","dkDropListSortingDisabled","\u201dtrue\u201d","style","z-index: 99999 !important;position:absolute",3,"cdkDragFreeDragPosition","cdkDragDisabled","matTooltip","cdkDragConstrainPosition","style","ngClass","cdkDragEnded","dblclick","cdkDragStarted",4,"ngFor","ngForOf"],["cdkDrag","","dkDropListSortingDisabled","\u201dtrue\u201d",1,"box-content-resource-icon","c-move",2,"z-index","99999 !important","position","absolute",3,"cdkDragFreeDragPosition","cdkDragDisabled","matTooltip","cdkDragConstrainPosition","ngClass","cdkDragEnded","dblclick","cdkDragStarted"],[2,"font-size","4em",3,"ngClass","matTooltip","name"],[3,"canvasR","colorA","actualPage","colaborar_id","book_id"],["class","box-content-resource-icon c-pointer","cdkDrag","","dkDropListSortingDisabled","\u201dtrue\u201d","style","position:absolute",3,"cdkDragFreeDragPosition","cdkDragDisabled","matTooltip","click",4,"ngFor","ngForOf"],["cdkDrag","","dkDropListSortingDisabled","\u201dtrue\u201d",1,"box-content-resource-icon","c-pointer",2,"position","absolute",3,"cdkDragFreeDragPosition","cdkDragDisabled","matTooltip","click"],[2,"font-size","4em",3,"ngClass","name"],[1,"contenedor-logo"],["width","100%","alt","",3,"src"],["name","mic-outline"],["name","pause-outline"],["src","assets/img/loading.gif","alt","Loading",2,"width","40px"]],template:function(e,t){1&e&&(h.gc(0,"ion-header",0),h.gc(1,"ion-toolbar",1),h.gc(2,"ion-buttons",2),h.bc(3,"ion-menu-button"),h.cd(4,Ln,3,4,"ion-button",3),h.cd(5,An,3,3,"ion-button",4),h.fc(),h.gc(6,"ion-title",5),h.oc("click",(function(){return t.showBookDetail(t.bookItem.uuid)})),h.ed(7),h.tc(8,"translate"),h.cd(9,In,3,3,"span",6),h.fc(),h.cd(10,jn,13,12,"ion-buttons",7),h.fc(),h.cd(11,Dn,1,0,"mat-progress-bar",8),h.fc(),h.gc(12,"ion-content",9),h.gc(13,"mat-drawer-container",10),h.cd(14,oo,11,7,"mat-drawer",11),h.gc(15,"mat-drawer",12,13),h.cd(17,bo,5,7,"div",14),h.gc(18,"div",15),h.gc(19,"ion-searchbar",16),h.oc("ngModelChange",(function(e){return t.queryText=e}))("ionChange",(function(){return t.inputSearchPagesByText()}))("ionCancel",(function(){return t.showSearchbar=!1})),h.tc(20,"translate"),h.fc(),h.gc(21,"div",17),h.cd(22,mo,6,2,"ion-list",18),h.tc(23,"paginate"),h.fc(),h.gc(24,"div"),h.gc(25,"div",19),h.gc(26,"pagination-controls",20),h.oc("pageChange",(function(e){return t.pageChangedByText(e)}))("pageBoundsCorrection",(function(e){return t.pageChangedByText(e)})),h.tc(27,"translate"),h.tc(28,"translate"),h.tc(29,"translate"),h.fc(),h.fc(),h.fc(),h.fc(),h.fc(),h.gc(30,"mat-drawer",12,21),h.gc(32,"div",15),h.gc(33,"h2",22),h.ed(34),h.tc(35,"translate"),h.fc(),h.cd(36,_o,6,4,"ion-card",23),h.fc(),h.fc(),h.gc(37,"mat-drawer-content",24),h.gc(38,"div",25),h.gc(39,"div",26),h.bc(40,"canvas",27),h.fc(),h.fc(),h.cd(41,yo,3,1,"div",28),h.gc(42,"div",25),h.gc(43,"div",29),h.bc(44,"canvas",30),h.fc(),h.fc(),h.cd(45,xo,1,5,"tools-visor",31),h.gc(46,"div",32),h.gc(47,"div",33,34),h.cd(49,Mo,2,1,"ng-container",35),h.fc(),h.fc(),h.gc(50,"div",36),h.gc(51,"div",37),h.gc(52,"h1"),h.bc(53,"img",38),h.ed(54," Buscar "),h.gc(55,"button",39),h.ed(56,"\u2715"),h.fc(),h.fc(),h.gc(57,"div",40),h.bc(58,"input",41),h.fc(),h.fc(),h.bc(59,"div",42),h.gc(60,"div",43),h.bc(61,"ul",44),h.fc(),h.bc(62,"div",45),h.fc(),h.bc(63,"p",46),h.cd(64,Oo,2,1,"div",47),h.fc(),h.fc(),h.gc(65,"ng-image-fullscreen-view",48),h.oc("close",(function(){return t.closeEventHandler()})),h.fc(),h.gc(66,"ion-button",49),h.oc("click",(function(){return t.startTextToSpeachEvent()})),h.tc(67,"translate"),h.cd(68,Po,1,0,"ion-icon",50),h.cd(69,So,1,0,"ion-icon",51),h.cd(70,Lo,1,0,"img",52),h.fc(),h.fc(),h.gc(71,"ion-footer",1),h.gc(72,"span",53),h.ed(73,"De doble clic sobre la imagen seleccionada"),h.fc(),h.gc(74,"ion-button",54),h.oc("click",(function(){return t.expandAllBook()})),h.bc(75,"ion-icon",55),h.fc(),h.bc(76,"div",56),h.fc()),2&e&&(h.Lb(1),h.Ac("ngClass",t.showVisorImages?"d-none":""),h.Lb(3),h.Ac("ngIf",t.return_back_url),h.Lb(1),h.Ac("ngIf",t.bookItem&&(t.bookItem.unities_count>0||t.bookItem.is_edit)),h.Lb(2),h.hd("",h.uc(8,38,"menu.visor")," ",null!=t.bookItem?" - "+t.bookItem.name:""," "),h.Lb(2),h.Ac("ngIf",t.modeEditionEnable),h.Lb(1),h.Ac("ngIf",null!=t.bookItem),h.Lb(1),h.Ac("ngIf",t.loading),h.Lb(1),h.Bc("scrollbar",t.scrollbarStyle),h.Lb(2),h.Ac("ngIf",t.bookItem&&(t.bookItem.unities_count>0||t.bookItem.is_edit)),h.Lb(3),h.Ac("ngForOf",t.listTypesResources),h.Lb(1),h.Ob("search"!=t.right_menu?"hidden":""),h.Lb(1),h.Bc("placeholder",h.uc(20,40,"forms.search")),h.Ac("ngModel",t.queryText),h.Lb(3),h.Ac("ngForOf",h.vc(23,42,t.itemsPagesContent.items,h.Hc(55,Ao,t.itemsPagesContent.pageSize,t.itemsPagesContent.page,t.itemsPagesContent.totalItems))),h.Lb(4),h.Ac("previousLabel","")("nextLabel","")("screenReaderPaginationLabel",h.uc(27,45,"paginate.pagination"))("screenReaderPageLabel",h.uc(28,47,"paginate.page"))("screenReaderCurrentLabel",h.uc(29,49,"paginate.in_your_page")),h.Lb(8),h.fd(h.uc(35,51,"pages.book.pages_print")),h.Lb(2),h.Ac("ngForOf",t.pintingPages),h.Lb(1),h.Bc("scrollbar",t.scrollbarStyle),h.Lb(4),h.Ac("ngIf",t.modeEditionEnable),h.Lb(4),h.Ac("ngIf",t.canvasR),h.Lb(4),h.Ac("ngIf",t.loadBook&&!t.modeEditionEnable),h.Lb(15),h.Ac("ngIf",t.logo_url),h.Lb(1),h.Ac("images",t.imageObjectShow)("imageIndex",t.selectedImageIndex)("show",t.showVisorImages),h.Lb(1),h.Ac("matTooltip",h.uc(67,53,"forms.text-to-speach"))("ngClass",t.showBtnTextToSpeach?"":"d-none hidden")("color",t.isLoadedServerAudio?"light":t.modeSpeaking?"warning":"danger"),h.Lb(2),h.Ac("ngIf",!t.modeSpeaking&&!t.isLoadedServerAudio),h.Lb(1),h.Ac("ngIf",t.modeSpeaking&&!t.isLoadedServerAudio),h.Lb(1),h.Ac("ngIf",t.isLoadedServerAudio),h.Lb(1),h.Ac("ngClass",t.showVisorImages?"d-none":""))},directives:[s.B,s.zb,o.q,s.l,s.R,o.t,s.xb,s.u,b.b,yn.b,yn.a,o.s,s.hb,s.Mb,i.r,i.u,E.c,yn.c,un.a,s.k,v.a,s.z,s.C,xn.a,Pe.a,me.e,s.O,s.H,me.a,s.N,s.P,s.m,s.o,s.p,s.n,s.f,wn],pipes:[f.d,E.b],styles:[".example-container[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden;border:1px solid rgba(0,0,0,.5)}.example-sidenav-content[_ngcontent-%COMP%]{display:flex;height:100%;align-items:center;justify-content:center}.example-sidenav[_ngcontent-%COMP%]{padding:20px}.contenedor-logo[_ngcontent-%COMP%]{right:15px}#paginas-imprimir[_ngcontent-%COMP%]   .titulo-panel[_ngcontent-%COMP%], #personalizar-menu[_ngcontent-%COMP%]   .titulo-panel[_ngcontent-%COMP%], #recursos[_ngcontent-%COMP%]   .titulo-panel[_ngcontent-%COMP%], #sidebar-audiolibro[_ngcontent-%COMP%]   .titulo-panel[_ngcontent-%COMP%], .titulo-barra[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .wowbook-toc[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:Gobold Light}.titulo-barra[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:larger;padding-left:20px;padding-top:5px}#paginas-imprimir[_ngcontent-%COMP%]   .lista-recursos[_ngcontent-%COMP%], #personalizar-menu[_ngcontent-%COMP%]   .lista-recursos[_ngcontent-%COMP%], #recursos[_ngcontent-%COMP%]   .lista-recursos[_ngcontent-%COMP%], #sidebar-audiolibro[_ngcontent-%COMP%]   .lista-recursos[_ngcontent-%COMP%], #sidebar-herramientas[_ngcontent-%COMP%]   .titulo-panel[_ngcontent-%COMP%], .wowbook-toc[_ngcontent-%COMP%]   .wowbook-toc-item[_ngcontent-%COMP%]{font-family:Futura Std Light}body[_ngcontent-%COMP%]{font-size:16px}.fondo-visor[_ngcontent-%COMP%]{background-size:cover!important;background-attachment:fixed!important;background-position:50%!important;height:100%}#herramientas[_ngcontent-%COMP%]{z-index:1002!important;background:#31708f;height:40px}#herramientas[_ngcontent-%COMP%], .wrapper-container[_ngcontent-%COMP%]{top:0;left:0;right:0;bottom:0;position:fixed!important}.wrapper-container[_ngcontent-%COMP%]{z-index:1001!important;height:60px}#herramientas[_ngcontent-%COMP%]   .parent-box[_ngcontent-%COMP%]{display:flex;justify-content:center;align-content:center;flex-wrap:wrap}#herramientas[_ngcontent-%COMP%]   .parent-box[_ngcontent-%COMP%]   #logo[_ngcontent-%COMP%]{margin:auto}#herramientas[_ngcontent-%COMP%]   .parent-box[_ngcontent-%COMP%]   #barra-menu[_ngcontent-%COMP%]{width:75%}.canvas-wrapper[_ngcontent-%COMP%]{padding:0;text-align:center}.panel-items[_ngcontent-%COMP%]{display:none}#rightPage[_ngcontent-%COMP%]{z-index:1002!important;margin-left:250px;margin-right:25x0px;display:flex;align-items:center;justify-content:center}.toast-item[_ngcontent-%COMP%]{z-index:1004!important;position:fixed!important}#herramientas[_ngcontent-%COMP%]   .parent-box[_ngcontent-%COMP%]   #logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:20px;display:block;margin:auto}#herramientas[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]{color:#fff;padding:0;margin:0 auto;text-align:right;line-height:40px}#herramientas[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], #paginas-imprimir[_ngcontent-%COMP%]   .cuerpo-panel[_ngcontent-%COMP%]   .lista-recursos[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], #personalizar-menu[_ngcontent-%COMP%]   .cuerpo-panel[_ngcontent-%COMP%]   .lista-recursos[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], #recursos[_ngcontent-%COMP%]   .cuerpo-panel[_ngcontent-%COMP%]   .lista-recursos[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], #sidebar-audiolibro[_ngcontent-%COMP%]   .cuerpo-panel[_ngcontent-%COMP%]   .lista-recursos[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;display:inline-block;padding:0 15px}#herramientas[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:80%}#paginas-imprimir[_ngcontent-%COMP%]   .cuerpo-panel[_ngcontent-%COMP%]   .lista-recursos[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], #personalizar-menu[_ngcontent-%COMP%]   .cuerpo-panel[_ngcontent-%COMP%]   .lista-recursos[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], #recursos[_ngcontent-%COMP%]   .cuerpo-panel[_ngcontent-%COMP%]   .lista-recursos[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], #sidebar-audiolibro[_ngcontent-%COMP%]   .cuerpo-panel[_ngcontent-%COMP%]   .lista-recursos[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0;width:100%;padding-top:5px;padding-bottom:5px;padding-left:15px;border-bottom:1px solid #000}.awesome[_ngcontent-%COMP%]{background:#2f5fa4}#herramientas[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle}#herramientas[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{cursor:pointer;transition:all .5s;color:#ccc}#paginas-imprimir[_ngcontent-%COMP%]   .cuerpo-panel[_ngcontent-%COMP%]   .lista-recursos[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover, #personalizar-menu[_ngcontent-%COMP%]   .cuerpo-panel[_ngcontent-%COMP%]   .lista-recursos[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover, #recursos[_ngcontent-%COMP%]   .cuerpo-panel[_ngcontent-%COMP%]   .lista-recursos[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover, #sidebar-audiolibro[_ngcontent-%COMP%]   .cuerpo-panel[_ngcontent-%COMP%]   .lista-recursos[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:rgba(0,92,138,.8);cursor:pointer;width:100%}#personalizar-menu[_ngcontent-%COMP%]   .cuerpo-panel[_ngcontent-%COMP%]   .lista-recursos[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], #recursos[_ngcontent-%COMP%]   .cuerpo-panel[_ngcontent-%COMP%]   .lista-recursos[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], #sidebar-audiolibro[_ngcontent-%COMP%]   .cuerpo-panel[_ngcontent-%COMP%]   .lista-recursos[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:inherit}#paginas-imprimir[_ngcontent-%COMP%], #personalizar-menu[_ngcontent-%COMP%], #recursos[_ngcontent-%COMP%], #sidebar-audiolibro[_ngcontent-%COMP%], #sidebar-herramientas[_ngcontent-%COMP%]{z-index:1100!important;top:60px;bottom:45px;right:0;width:270px;background:rgba(0,92,138,.6);position:fixed!important;color:#fff;overflow:hidden;box-shadow:inset 0 4px 8px 0 hsla(0,0%,100%,.3),inset 0 6px 30px 0 hsla(0,0%,100%,.19)}#personalizar-menu[_ngcontent-%COMP%]{right:auto;top:0;bottom:0}.content-panel[_ngcontent-%COMP%]{padding:3%}#paginas-imprimir[_ngcontent-%COMP%]   .titulo-panel[_ngcontent-%COMP%], #personalizar-menu[_ngcontent-%COMP%]   .titulo-panel[_ngcontent-%COMP%], #recursos[_ngcontent-%COMP%]   .titulo-panel[_ngcontent-%COMP%], #sidebar-audiolibro[_ngcontent-%COMP%]   .titulo-panel[_ngcontent-%COMP%], #sidebar-herramientas[_ngcontent-%COMP%]   .titulo-panel[_ngcontent-%COMP%]{margin:0;padding-left:10px;padding-right:10px;padding-top:5px;border-bottom:1px solid #6e82a6}#recursos[_ngcontent-%COMP%]   .titulo-panel[_ngcontent-%COMP%]{background:rgba(0,92,138,.4)}#personalizar-menu[_ngcontent-%COMP%]   .titulo-panel[_ngcontent-%COMP%], #recursos[_ngcontent-%COMP%]   .titulo-panel[_ngcontent-%COMP%]{font-weight:700}#sidebar-herramientas[_ngcontent-%COMP%]   .titulo-panel[_ngcontent-%COMP%]{cursor:pointer}#sidebar-herramientas[_ngcontent-%COMP%]   .titulo-panel[_ngcontent-%COMP%]:hover{background:rgba(0,92,138,.7);color:#fff}.titulo-panel[_ngcontent-%COMP%]:first-child{padding-top:15px;border-top:5px solid #d3d3d3}#paginas-imprimir[_ngcontent-%COMP%]   .cuerpo-panel[_ngcontent-%COMP%]   .lista-recursos[_ngcontent-%COMP%], #recursos[_ngcontent-%COMP%]   .cuerpo-panel[_ngcontent-%COMP%]   .lista-recursos[_ngcontent-%COMP%], #sidebar-audiolibro[_ngcontent-%COMP%]   .cuerpo-panel[_ngcontent-%COMP%]   .lista-recursos[_ngcontent-%COMP%]{padding:0;margin:0;width:100%;line-height:30px}#paginas-imprimir[_ngcontent-%COMP%]   .cuerpo-panel[_ngcontent-%COMP%], #personalizar-menu[_ngcontent-%COMP%]   .cuerpo-panel[_ngcontent-%COMP%], #recursos[_ngcontent-%COMP%]   .cuerpo-panel[_ngcontent-%COMP%], #sidebar-audiolibro[_ngcontent-%COMP%]   .cuerpo-panel[_ngcontent-%COMP%]{font-size:.9em}#ocultarAudioLibro[_ngcontent-%COMP%], #ocultarHerramientas[_ngcontent-%COMP%], #ocultarImpresion[_ngcontent-%COMP%], #ocultarRecursos[_ngcontent-%COMP%]{color:#fff;background:transparent}.contenedor-logo[_ngcontent-%COMP%]{position:absolute;width:200px;right:10px;bottom:50px;z-index:1000}.contenedor-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}@media screen and (max-width:767px){.contenedor-logo[_ngcontent-%COMP%]{width:50px}}@media screen and (max-width:679px){#herramientas[_ngcontent-%COMP%]   .parent-box[_ngcontent-%COMP%]   #logo[_ngcontent-%COMP%]{width:20%}#herramientas[_ngcontent-%COMP%]   .parent-box[_ngcontent-%COMP%]   #barra-menu[_ngcontent-%COMP%]{width:80%;font-size:12px}}.toolbar_container[_ngcontent-%COMP%]{z-index:1002!important;position:absolute;bottom:0;width:100%}.wowbook-find-text-container[_ngcontent-%COMP%], .wowbook-findbar[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block}#barra-menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50%}#pageR[_ngcontent-%COMP%]{border-style:dashed;border-width:medium}.box-content-resource-icon[_ngcontent-%COMP%]{border:1px solid #ccc;color:rgba(0,0,0,.87);display:inline-flex;justify-content:center;align-items:center;text-align:center;background:#fff;border-radius:4px;margin-right:25px;position:relative;z-index:1999;box-sizing:border-box;transition:box-shadow .2s cubic-bezier(0,0,.2,1);box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.box-content-resource-icon[_ngcontent-%COMP%]:active{box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.w-rss-300[_ngcontent-%COMP%]{z-index:1001!important;top:0;left:0;right:0;bottom:0;position:fixed!important;height:60px}.style-hover-text-un[_ngcontent-%COMP%]:hover > *[_ngcontent-%COMP%]{background:#ff8 none repeat scroll 0 0;box-shadow:0 2px 10px #ff8;opacity:.7}.m-l-1[_ngcontent-%COMP%]{margin-left:10px}.m-l-2[_ngcontent-%COMP%]{margin-left:20px}.contenedor-btn-open-index-r[_ngcontent-%COMP%]{position:absolute;width:200px;left:15px;bottom:50px;z-index:1000}.toolTip-master-canvas-show[_ngcontent-%COMP%]{background:#ff930e;height:30px;bottom:20px;padding:8px;color:#1c1c1c;visibility:hidden}.button-master-canvas-show-tnx[_ngcontent-%COMP%], .toolTip-master-canvas-show[_ngcontent-%COMP%]{position:absolute;z-index:2222;border-radius:5px;left:10px;font-size:1.2em}.button-master-canvas-show-tnx[_ngcontent-%COMP%]{bottom:10px}.button-master-canvas-tospeach-tnx[_ngcontent-%COMP%]{position:absolute;top:70px;left:10px;z-index:7}ion-icon[_ngcontent-%COMP%]{pointer-events:none}.scale-effect[_ngcontent-%COMP%]{scale:1;-webkit-animation:scalenewtarget 2s infinite;animation:scalenewtarget 2s infinite}@-webkit-keyframes scalenewtarget{0%{scale:1}50%{scale:1.2}to{scale:1}}@keyframes scalenewtarget{0%{scale:1}50%{scale:1.2}to{scale:1}}"]}),e})();var To=n("iX7+");const zo=["theLastReference"];function Eo(e,t){1&e&&h.bc(0,"mat-progress-bar",31)}function Ro(e,t){1&e&&(h.ed(0),h.tc(1,"translate"),h.tc(2,"translate")),2&e&&h.hd("",h.uc(1,2,"pages.course.step")," 1 ",h.uc(2,4,"pages.course.of")," 2")}function Fo(e,t){if(1&e){const e=h.hc();h.gc(0,"ion-card",34,35),h.oc("click",(function(){h.Sc(e);const t=h.sc().$implicit;return h.sc().addOrRemoveBook(t)})),h.gc(2,"ion-label"),h.bc(3,"img",36),h.gc(4,"p",37),h.ed(5),h.fc(),h.fc(),h.bc(6,"ion-checkbox",1),h.fc()}if(2&e){const e=h.sc().$implicit;h.Ac("ngClass",e.selected?"selected-card":""),h.Lb(3),h.Bc("src",e.portada,h.Vc),h.Ac("ngClass",e.selected?"":"img-no-selected"),h.Lb(2),h.fd(e.name)}}function Bo(e,t){if(1&e){const e=h.hc();h.gc(0,"ion-card",34),h.oc("click",(function(){h.Sc(e);const t=h.sc().$implicit;return h.sc().addOrRemoveBook(t)})),h.gc(1,"ion-label"),h.bc(2,"img",36),h.gc(3,"p",37),h.ed(4),h.fc(),h.fc(),h.bc(5,"ion-checkbox",1),h.fc()}if(2&e){const e=h.sc().$implicit;h.Ac("ngClass",e.selected?"selected-card":""),h.Lb(2),h.Bc("src",e.portada,h.Vc),h.Ac("ngClass",e.selected?"":"img-no-selected"),h.Lb(2),h.fd(e.name)}}function jo(e,t){if(1&e&&(h.gc(0,"ion-item",32),h.cd(1,Fo,7,4,"ion-card",33),h.cd(2,Bo,6,4,"ion-card",33),h.fc()),2&e){const e=t.index,n=h.sc();h.Lb(1),h.Ac("ngIf",e+1==n.books.length),h.Lb(1),h.Ac("ngIf",e+1!=n.books.length)}}let Do=(()=>{class e{constructor(e,t,n,o,i,s,c,r,l,d){this.pinesService=e,this.config=t,this.modalCtrl=n,this._formBuilder=o,this.toastService=i,this.courseService=s,this.controlErroresService=c,this.bookService=r,this.controlErrors=l,this.tour=d,this.scrollbarStyle=a.a.scrollbarStyle,this.saving=!1,this.submitted={submit:!1},this.books=[],this.pageBook=0,this.totalPages=0,this.ios="ios"===this.config.get("mode")}ngOnInit(){this.loadBooks(),this.intersectionObserver(),this.firstFormGroup=this._formBuilder.group({name:["",i.F.required],room:["",i.F.required],subject:["",i.F.required],reference_url:[""],section:[""]}),this.formGroupCode=this._formBuilder.group({code:["",i.F.required],mode:["book"]}),this.tour.tour("form_add_course")}intersectionObserver(){this.observer=new IntersectionObserver(e=>{e[0].isIntersecting&&this.totalPages>=this.pageBook&&this.loadBooks()},{root:null,rootMargin:"0px",threshold:.5})}ngAfterViewInit(){this.theLastReference.changes.subscribe(e=>{console.log(e),e.last&&this.observer.observe(e.last.nativeElement)})}dismiss(e){this.modalCtrl.dismiss()}saveCourse(){let e=this.books.filter(e=>e.selected).map(e=>e.id);if(0==e.length)return void this.toastService.presentToast("Agregue libros para poder crear el aula virtual.","warning");this.saving=!0;let t=this.firstFormGroup.value;t.books=e,this.courseService.save(t).subscribe(e=>{this.modalCtrl.dismiss(e.data),this.saving=!1},e=>{this.saving=!1,this.controlErrors.control(e)})}onActivePin(e){this.submitted.submit=!0,this.pinesService.active(e).subscribe(e=>{this.submitted.submit=!1,this.toastService.presentToast(e.message,e.status),e.data&&"book"==e.mode&&this.books.push(e.data)},e=>{this.submitted.submit=!1,this.controlErrors.control(e)})}loadBooks(e=!1){this.submitted.submit=!0,e&&(this.pageBook=1,this.books=[]),this.bookService.getBooks({page:this.pageBook}).subscribe(e=>{this.submitted.submit=!1,e.data&&e.data.books&&e.data.books.data&&Array.isArray(e.data.books.data)&&(this.pageBook++,this.books=e.data.books.data,this.totalPages=e.data.books.last_page)},e=>{this.submitted.submit=!1})}addOrRemoveBook(e){e.selected=!e.selected}}return e.\u0275fac=function(t){return new(t||e)(h.ac(d.a),h.ac(s.d),h.ac(s.Db),h.ac(i.f),h.ac(p.a),h.ac(To.a),h.ac(l.a),h.ac(S.a),h.ac(l.a),h.ac(g.a))},e.\u0275cmp=h.Ub({type:e,selectors:[["app-modal-add"]],viewQuery:function(e,t){var n;1&e&&h.ld(zo,!0,h.o),2&e&&h.Nc(n=h.pc())&&(t.theLastReference=n)},decls:69,vars:45,consts:[["translucent","true"],["slot","end"],[3,"disabled","click"],["name","close-outline"],["mode","indeterminate",4,"ngIf"],[3,"scrollbar"],[3,"lines"],[1,"header-horizontal-add-course",3,"linear"],["stepper",""],["label","Step 1",3,"stepControl"],[3,"formGroup"],["matStepLabel",""],[1,"step-add-c-1"],["appearance","outline",1,"w-100"],["matInput","","formControlName","room","required","",1,"w-100"],["matInput","","formControlName","subject","required","",1,"w-100"],["matInput","","formControlName","name","required","",1,"w-100"],["matInput","","formControlName","reference_url",1,"w-100"],["matInput","","formControlName","section",1,"w-100"],["mat-button","","matStepperNext","","color","primary",1,"step-add-btn-c-1"],["label","Step 2"],[1,"text-center"],[3,"formGroup","submit"],[1,"step-add-btn-pin-f-1","intro-x","mt-8",2,"display","flex"],["type","text","formControlName","code",1,"pin-input","intro-x","login__input","form-control","py-3","px-4","border-gray-300","block",3,"disabled","placeholder"],["type","submit",1,"btn-active-pin",3,"disabled"],["name","key-outline"],[1,"mt-2","text-center"],[1,"container-flex-x","step-add-btn-select-book-f-2"],["class","item-cs",4,"ngFor","ngForOf"],["size","small","strong","",1,"step-add-btn-save-f-2",3,"disabled","click"],["mode","indeterminate"],[1,"item-cs"],[3,"ngClass","click",4,"ngIf"],[3,"ngClass","click"],["theLastReference",""],["alt","",1,"book-portada",3,"ngClass","src"],[1,"m-1","text-center","overflow-txt"]],template:function(e,t){1&e&&(h.gc(0,"ion-header",0),h.gc(1,"ion-toolbar"),h.gc(2,"ion-title"),h.ed(3),h.tc(4,"translate"),h.fc(),h.gc(5,"ion-buttons",1),h.gc(6,"ion-button",2),h.oc("click",(function(){return t.dismiss()})),h.bc(7,"ion-icon",3),h.fc(),h.fc(),h.fc(),h.cd(8,Eo,1,0,"mat-progress-bar",4),h.fc(),h.gc(9,"ion-content",5),h.bc(10,"ion-list",6),h.gc(11,"mat-horizontal-stepper",7,8),h.gc(13,"mat-step",9),h.gc(14,"form",10),h.cd(15,Ro,3,6,"ng-template",11),h.gc(16,"div",12),h.gc(17,"mat-form-field",13),h.gc(18,"mat-label"),h.ed(19),h.tc(20,"translate"),h.fc(),h.bc(21,"input",14),h.fc(),h.gc(22,"mat-form-field",13),h.gc(23,"mat-label"),h.ed(24),h.tc(25,"translate"),h.fc(),h.bc(26,"input",15),h.fc(),h.gc(27,"mat-form-field",13),h.gc(28,"mat-label"),h.ed(29),h.tc(30,"translate"),h.fc(),h.bc(31,"input",16),h.fc(),h.gc(32,"mat-form-field",13),h.gc(33,"mat-label"),h.ed(34),h.tc(35,"translate"),h.fc(),h.bc(36,"input",17),h.fc(),h.gc(37,"mat-form-field",13),h.gc(38,"mat-label"),h.ed(39),h.tc(40,"translate"),h.fc(),h.bc(41,"input",18),h.fc(),h.fc(),h.gc(42,"div"),h.gc(43,"button",19),h.ed(44),h.tc(45,"translate"),h.fc(),h.fc(),h.fc(),h.fc(),h.gc(46,"mat-step",20),h.gc(47,"h3",21),h.gc(48,"strong"),h.ed(49),h.tc(50,"translate"),h.fc(),h.fc(),h.gc(51,"form",22),h.oc("submit",(function(){return t.onActivePin(t.formGroupCode.value)})),h.gc(52,"div",23),h.bc(53,"input",24),h.tc(54,"translate"),h.gc(55,"ion-button",25),h.bc(56,"ion-icon",26),h.fc(),h.fc(),h.fc(),h.gc(57,"h3",27),h.gc(58,"strong"),h.ed(59),h.tc(60,"translate"),h.fc(),h.fc(),h.gc(61,"ion-list",28),h.cd(62,jo,3,2,"ion-item",29),h.fc(),h.gc(63,"ion-button",30),h.oc("click",(function(){return t.saveCourse()})),h.ed(64),h.tc(65,"translate"),h.fc(),h.fc(),h.fc(),h.fc(),h.gc(66,"ion-footer",0),h.gc(67,"ion-toolbar"),h.bc(68,"ion-buttons",1),h.fc(),h.fc()),2&e&&(h.Lb(3),h.gd(" ",h.uc(4,23,"forms.add_courses")," "),h.Lb(3),h.Ac("disabled",t.saving),h.Lb(2),h.Ac("ngIf",t.saving||t.submitted.submit),h.Lb(1),h.Bc("scrollbar",t.scrollbarStyle),h.Lb(1),h.Ac("lines",t.ios?"inset":"full"),h.Lb(1),h.Ac("linear",!0),h.Lb(2),h.Ac("stepControl",t.firstFormGroup),h.Lb(1),h.Ac("formGroup",t.firstFormGroup),h.Lb(5),h.fd(h.uc(20,25,"pages.course.name_class")),h.Lb(5),h.fd(h.uc(25,27,"pages.course.name_subject")),h.Lb(5),h.fd(h.uc(30,29,"pages.course.name_course")),h.Lb(5),h.fd(h.uc(35,31,"pages.course.reference_url")),h.Lb(5),h.fd(h.uc(40,33,"pages.course.name_section")),h.Lb(5),h.fd(h.uc(45,35,"buttons.next")),h.Lb(5),h.fd(h.uc(50,37,"forms.add_book_to_class")),h.Lb(2),h.Ac("formGroup",t.formGroupCode),h.Lb(2),h.Bc("placeholder",h.uc(54,39,"forms.title_add_pin")),h.Ac("disabled",t.submitted.submit),h.Lb(2),h.Ac("disabled",t.submitted.submit),h.Lb(4),h.fd(h.uc(60,41,"forms.please_select_class_clic_save")),h.Lb(3),h.Ac("ngForOf",t.books),h.Lb(1),h.Ac("disabled",t.saving),h.Lb(1),h.fd(h.uc(65,43,"buttons.save")))},directives:[s.B,s.zb,s.xb,s.l,s.k,s.C,o.t,s.u,b.b,s.O,Ne.a,Ne.b,i.H,i.s,i.j,Ne.d,qe.c,qe.g,He.b,i.c,i.r,i.i,i.C,Ze.b,Ne.h,o.s,s.z,Pe.a,s.H,s.m,o.q,s.N,s.r,s.c],pipes:[f.d],styles:[".book-portada[_ngcontent-%COMP%]{min-width:150px;height:200px}.container-flex-x[_ngcontent-%COMP%]{display:flex;overflow:auto;flex-wrap:nowrap}.container-flex-x[_ngcontent-%COMP%]   .item-cs[_ngcontent-%COMP%]{min-width:190px!important;max-width:190px!important;cursor:pointer}.container-flex-x[_ngcontent-%COMP%]   .item-cs[_ngcontent-%COMP%]   .img-no-selected[_ngcontent-%COMP%]{filter:grayscale(100%)}.selected-card[_ngcontent-%COMP%]{background:rgba(253,255,119,.7)}"]}),e})();function Uo(e,t){1&e&&h.bc(0,"mat-progress-bar",8)}function $o(e,t){if(1&e&&h.bc(0,"ion-icon",11),2&e){const e=h.sc().$implicit;h.Ac("name",e.icon)}}function No(e,t){if(1&e){const e=h.hc();h.gc(0,"ion-item"),h.tc(1,"lowercase"),h.cd(2,$o,1,1,"ion-icon",9),h.gc(3,"ion-label"),h.ed(4),h.fc(),h.gc(5,"ion-checkbox",10),h.oc("ngModelChange",(function(n){return h.Sc(e),t.$implicit.isChecked=n})),h.fc(),h.fc()}if(2&e){const e=t.$implicit,n=h.sc();h.Mb("track",h.uc(1,5,e.name)),h.Lb(2),h.Ac("ngIf",n.ios),h.Lb(2),h.fd(e.name),h.Lb(1),h.Ac("disabled",n.saving)("ngModel",e.isChecked)}}let qo=(()=>{class e{constructor(e,t,n,o,i,s){this.config=e,this.modalCtrl=t,this.navParams=n,this.toastService=o,this.courseService=i,this.controlErroresService=s,this.courses=[],this.saving=!1,this.ios="ios"===this.config.get("mode")}ngOnInit(){}dismiss(e){this.modalCtrl.dismiss(e)}selectAll(e){this.courses.forEach(t=>{t.isChecked=e})}saveCourses(){let e=this.courses.filter(e=>e.isChecked);0!=e.length?(this.saving=!0,this.courseService.massSave({items:e}).subscribe(e=>{this.saving=!1,console.log(e),this.toastService.presentToast(e.message,e.status),this.modalCtrl.dismiss(e.data)},e=>{this.saving=!1,this.controlErroresService.control(e)}),this.saving=!0):this.toastService.presentToast("Seleccione al menos un curso","warning")}}return e.\u0275fac=function(t){return new(t||e)(h.ac(s.d),h.ac(s.Db),h.ac(s.Fb),h.ac(p.a),h.ac(To.a),h.ac(l.a))},e.\u0275cmp=h.Ub({type:e,selectors:[["app-modal-provider"]],decls:27,vars:22,consts:[["translucent","true"],["slot","start"],[3,"disabled","click"],["slot","end"],["strong","",3,"disabled","click"],["mode","indeterminate",4,"ngIf"],[3,"lines"],[4,"ngFor","ngForOf"],["mode","indeterminate"],["slot","start","color","medium",3,"name",4,"ngIf"],[3,"disabled","ngModel","ngModelChange"],["slot","start","color","medium",3,"name"]],template:function(e,t){1&e&&(h.gc(0,"ion-header",0),h.gc(1,"ion-toolbar"),h.gc(2,"ion-buttons",1),h.gc(3,"ion-button",2),h.oc("click",(function(){return t.dismiss()})),h.ed(4),h.tc(5,"translate"),h.fc(),h.fc(),h.gc(6,"ion-title"),h.ed(7),h.tc(8,"translate"),h.fc(),h.gc(9,"ion-buttons",3),h.gc(10,"ion-button",4),h.oc("click",(function(){return t.saveCourses()})),h.ed(11),h.tc(12,"translate"),h.fc(),h.fc(),h.fc(),h.cd(13,Uo,1,0,"mat-progress-bar",5),h.fc(),h.gc(14,"ion-content"),h.gc(15,"ion-list",6),h.cd(16,No,6,7,"ion-item",7),h.fc(),h.fc(),h.gc(17,"ion-footer",0),h.gc(18,"ion-toolbar"),h.gc(19,"ion-buttons",1),h.gc(20,"ion-button",2),h.oc("click",(function(){return t.selectAll(!1)})),h.ed(21),h.tc(22,"translate"),h.fc(),h.fc(),h.gc(23,"ion-buttons",3),h.gc(24,"ion-button",2),h.oc("click",(function(){return t.selectAll(!0)})),h.ed(25),h.tc(26,"translate"),h.fc(),h.fc(),h.fc(),h.fc()),2&e&&(h.Lb(3),h.Ac("disabled",t.saving),h.Lb(1),h.fd(h.uc(5,12,"buttons.cancel")),h.Lb(3),h.gd(" ",h.uc(8,14,"forms.add_courses")," "),h.Lb(3),h.Ac("disabled",t.saving),h.Lb(1),h.fd(h.uc(12,16,"buttons.save")),h.Lb(2),h.Ac("ngIf",t.saving),h.Lb(2),h.Ac("lines",t.ios?"inset":"full"),h.Lb(1),h.Ac("ngForOf",t.courses),h.Lb(4),h.Ac("disabled",t.saving),h.Lb(1),h.fd(h.uc(22,18,"buttons.disselect_all")),h.Lb(3),h.Ac("disabled",t.saving),h.Lb(1),h.fd(h.uc(26,20,"buttons.select_all")))},directives:[s.B,s.zb,s.l,s.k,s.xb,o.t,s.u,s.O,o.s,s.z,Pe.a,s.H,s.N,s.r,s.c,i.r,i.u,s.C],pipes:[f.d,o.p],styles:[""]}),e})();var Ho=n("5Uy/"),Vo=n("YTC1"),Yo=n("gcOT"),Xo=n("Jcxb");function Qo(e,t){1&e&&(h.ec(0),h.bc(1,"card-load-animation",1),h.dc()),2&e&&(h.Lb(1),h.Ac("count",1)("all_width",!0))}function Go(e,t){if(1&e&&(h.gc(0,"span"),h.ed(1),h.fc()),2&e){const e=h.sc(2);h.Lb(1),h.fd(e.course.section)}}function Wo(e,t){if(1&e&&(h.gc(0,"div"),h.gc(1,"ion-button",21),h.tc(2,"translate"),h.bc(3,"ion-icon",27),h.fc(),h.fc()),2&e){const e=h.sc(3);h.Lb(1),h.Ac("matTooltip",h.uc(2,2,"pages.course.dashboard"))("routerLink",e.course_route+e.course.uuid+"/"+e.course.uuid+"/dashboard")}}function Ko(e,t){if(1&e&&(h.gc(0,"ion-button",28),h.tc(1,"translate"),h.gc(2,"a",29),h.bc(3,"ion-icon",30),h.fc(),h.fc()),2&e){const e=h.sc(3);h.Bc("href",e.course.reference_url),h.Ac("matTooltip",h.uc(1,3,"pages.course.virtual_class")),h.Lb(2),h.Bc("href",e.course.reference_url,h.Vc)}}function Zo(e,t){if(1&e&&(h.gc(0,"div",20),h.cd(1,Wo,4,4,"div",0),h.gc(2,"div"),h.gc(3,"ion-button",21),h.tc(4,"translate"),h.bc(5,"ion-icon",22),h.fc(),h.fc(),h.gc(6,"div"),h.gc(7,"ion-button",21),h.tc(8,"translate"),h.bc(9,"ion-icon",23),h.fc(),h.fc(),h.gc(10,"div"),h.gc(11,"ion-button",21),h.tc(12,"translate"),h.bc(13,"ion-icon",24),h.fc(),h.fc(),h.gc(14,"div"),h.gc(15,"ion-button",21),h.tc(16,"translate"),h.bc(17,"ion-icon",25),h.fc(),h.fc(),h.gc(18,"div"),h.cd(19,Ko,4,5,"ion-button",26),h.fc(),h.fc()),2&e){const e=h.sc(2);h.Lb(1),h.Ac("ngIf",e.course.is_my),h.Lb(2),h.Ac("matTooltip",h.uc(4,10,"pages.course.posts"))("routerLink",e.course_route+e.course.uuid+"/"+e.course.uuid+"/posts"),h.Lb(4),h.Ac("matTooltip",h.uc(8,12,"pages.course.activities"))("routerLink",e.course_route+e.course.uuid+"/"+e.course.uuid+"/activities"),h.Lb(4),h.Ac("matTooltip",h.uc(12,14,"pages.course.my_books"))("routerLink",e.course_route+e.course.uuid+"/"+e.course.uuid+"/my_books"),h.Lb(4),h.Ac("matTooltip",h.uc(16,16,"pages.course.qualifications"))("routerLink",e.course_route+e.course.uuid+"/"+e.course.uuid+"/qualifications"),h.Lb(4),h.Ac("ngIf",null!=e.course.reference_url)}}function Jo(e,t){if(1&e&&(h.gc(0,"div",31),h.bc(1,"img",32),h.fc()),2&e){const e=t.$implicit,n=h.sc(2);h.Lb(1),h.Bc("src",e.user&&e.user.information?e.user.information.image_url:n.img_url,h.Vc),h.Bc("title",e.user?e.user.name:"--")}}function ei(e,t){if(1&e){const e=h.hc();h.gc(0,"ion-fab-button",45),h.oc("click",(function(){h.Sc(e);const t=h.sc(3);return t.archiveCourse(t.course,t.index)})),h.tc(1,"translate"),h.bc(2,"ion-icon",46),h.fc()}2&e&&h.Ac("matTooltip",h.uc(1,1,"buttons.archive"))}function ti(e,t){if(1&e){const e=h.hc();h.gc(0,"ion-fab-button",47),h.oc("click",(function(){h.Sc(e);const t=h.sc(3);return t.restoreCourse(t.course,t.index)})),h.tc(1,"translate"),h.bc(2,"ion-icon",48),h.fc()}2&e&&h.Ac("matTooltip",h.uc(1,1,"buttons.restore"))}function ni(e,t){if(1&e){const e=h.hc();h.gc(0,"ion-fab-button",49),h.oc("click",(function(){h.Sc(e);const t=h.sc(3);return t.copyCode(t.course.code)})),h.tc(1,"translate"),h.bc(2,"ion-icon",50),h.fc()}2&e&&h.Ac("matTooltip",h.uc(1,1,"buttons.copy_code"))}function oi(e,t){if(1&e){const e=h.hc();h.gc(0,"ion-fab",33,34),h.gc(2,"ion-fab-button",35),h.tc(3,"translate"),h.bc(4,"ion-icon",36),h.fc(),h.gc(5,"ion-fab-list",37),h.gc(6,"ion-fab-button",38),h.oc("click",(function(){h.Sc(e);const t=h.sc(2);return t.deleteCourse(t.course,t.index)})),h.tc(7,"translate"),h.bc(8,"ion-icon",39),h.fc(),h.cd(9,ei,3,3,"ion-fab-button",40),h.cd(10,ti,3,3,"ion-fab-button",41),h.gc(11,"ion-fab-button",42),h.oc("click",(function(){h.Sc(e);const t=h.sc(2);return t.edit(t.course)})),h.tc(12,"translate"),h.bc(13,"ion-icon",43),h.fc(),h.cd(14,ni,3,3,"ion-fab-button",44),h.fc(),h.fc()}if(2&e){const e=h.sc(2);h.Lb(2),h.Ac("matTooltip",h.uc(3,6,"pages.signup.student")),h.Lb(4),h.Ac("matTooltip",h.uc(7,8,"buttons.delete")),h.Lb(3),h.Ac("ngIf","archived"!=e.course.status),h.Lb(1),h.Ac("ngIf","active"!=e.course.status),h.Lb(1),h.Ac("matTooltip",h.uc(12,10,"buttons.edit")),h.Lb(3),h.Ac("ngIf",null!=e.course.code)}}function ii(e,t){if(1&e&&(h.gc(0,"div",51),h.gc(1,"div",52),h.gc(2,"div",53),h.ed(3),h.tc(4,"translate"),h.gc(5,"span",54),h.ed(6),h.fc(),h.fc(),h.fc(),h.fc()),2&e){const e=h.sc(2);h.Lb(3),h.gd("",h.uc(4,2,"pages.course.students"),": "),h.Lb(3),h.fd(e.course.count_students||0)}}function si(e,t){if(1&e){const e=h.hc();h.ec(0),h.gc(1,"div",2),h.gc(2,"div",3),h.gc(3,"div",4),h.gc(4,"a",5),h.ed(5),h.cd(6,Go,2,1,"span",0),h.fc(),h.gc(7,"div",6),h.gc(8,"span",7),h.oc("click",(function(){h.Sc(e);const t=h.sc();return t.copyCode(t.course.code)})),h.ed(9),h.fc(),h.gc(10,"span",8),h.ed(11,"\u2022"),h.fc(),h.ed(12),h.fc(),h.fc(),h.fc(),h.gc(13,"div",9),h.gc(14,"div",10),h.bc(15,"img",11),h.fc(),h.gc(16,"a",12),h.ed(17),h.fc(),h.bc(18,"div",13),h.fc(),h.cd(19,Zo,20,18,"div",14),h.gc(20,"div",15),h.gc(21,"div",16),h.cd(22,Jo,2,2,"div",17),h.fc(),h.cd(23,oi,15,12,"ion-fab",18),h.fc(),h.cd(24,ii,7,4,"div",19),h.fc(),h.dc()}if(2&e){const e=h.sc();h.Lb(1),h.Ac("ngClass","border_status_color_"+e.course.status),h.Lb(3),h.Ac("routerLink",e.course_route+e.course.uuid+"/"+e.course.uuid+(e.course.is_my?"/dashboard":"/posts")),h.Lb(1),h.gd("",e.course.name," "),h.Lb(1),h.Ac("ngIf",e.course.section),h.Lb(3),h.fd(e.course.code),h.Lb(3),h.gd(" ",e.moment(e.course.date_created).format("d/m/Y")," "),h.Lb(3),h.Bc("src",e.course.theme_url,h.Vc),h.Lb(1),h.Ac("routerLink",e.course_route+e.course.uuid+"/"+e.course.uuid+(e.course.is_my?"/dashboard":"/posts")),h.Lb(1),h.fd(e.course.subject),h.Lb(2),h.Ac("ngIf",e.show_options_routes),h.Lb(3),h.Ac("ngForOf",e.course.integrants),h.Lb(1),h.Ac("ngIf",e.course.is_my),h.Lb(1),h.Ac("ngIf",e.show_list_students)}}const{Clipboard:ci}=Yo.c;let ai=(()=>{class e{constructor(e,t,n,o,i){this.alertCtrl=e,this.courseService=t,this.modalCtrl=n,this.controlerroresService=o,this.toastService=i,this.moment=A,this.loadingPresent=!1,this.img_url="https://images.unsplash.com/photo-1627483262769-04d0a1401487?ixid=MnwxMjA3fDF8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80",this.course_route=r.h.one_course,this.index=-1,this.show_options_routes=!0,this.show_list_students=!0,this.course=null,this.itemDeleteEvent=new h.r,this.itemLoadEvent=new h.r,this.parentRoute=r.h.one_course}ngOnInit(){}deleteCourse(e,t){return Object(P.b)(this,void 0,void 0,(function*(){const n=yield this.alertCtrl.create({cssClass:"my-custom-class",header:"\xa1Confirmar o cancelar!",message:"\xbfEst\xe1 seguro que desea eliminar este curso?",buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary",handler:e=>{}},{text:"Eliminar",role:"destructive",handler:()=>{this.itemLoadEvent.emit(!0),this.courseService.delete(e.uuid).subscribe(e=>{"success"==e.status&&this.itemDeleteEvent.emit(t),this.itemLoadEvent.emit(!1),this.toastService.presentToast(e.message,e.status)},e=>{this.itemLoadEvent.emit(!1),this.controlerroresService.control(e)})}}]});yield n.present()}))}archiveCourse(e,t){return Object(P.b)(this,void 0,void 0,(function*(){const n=yield this.alertCtrl.create({cssClass:"my-custom-class",header:"\xa1Confirmar o cancelar!",message:"\xbfEst\xe1 seguro que desea archivar este curso?",buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary",handler:e=>{}},{text:"Archivar",role:"warning",handler:()=>{this.itemLoadEvent.emit(!0),this.courseService.archive(e.uuid).subscribe(e=>{"success"==e.status&&this.itemDeleteEvent.emit(t),this.itemLoadEvent.emit(!1),this.toastService.presentToast(e.message,e.status)},e=>{this.itemLoadEvent.emit(!1),this.controlerroresService.control(e)})}}]});yield n.present()}))}restoreCourse(e,t){return Object(P.b)(this,void 0,void 0,(function*(){const n=yield this.alertCtrl.create({cssClass:"my-custom-class",header:"\xa1Confirmar o cancelar!",message:"\xbfEst\xe1 seguro que desea restaurar este curso?",buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary",handler:e=>{}},{text:"Si, activar",role:"warning",handler:()=>{this.itemLoadEvent.emit(!0),this.courseService.restore(e.uuid).subscribe(e=>{"success"==e.status&&this.itemDeleteEvent.emit(t),this.itemLoadEvent.emit(!1),this.toastService.presentToast(e.message,e.status)},e=>{this.itemLoadEvent.emit(!1),this.controlerroresService.control(e)})}}]});yield n.present()}))}edit(e){return Object(P.b)(this,void 0,void 0,(function*(){const t=yield this.modalCtrl.create({component:Xo.a,cssClass:"modal-fullscreen",swipeToClose:!0,componentProps:{course_id:e.uuid}});yield t.present();const{data:n}=yield t.onWillDismiss();n&&(this.loadingPresent=!0,setTimeout(()=>{this.loadingPresent=!1},1e3),console.log(n),this.course.code=n.code,this.course.name=n.name,this.course.section=n.section,this.course.subject=n.subject,this.course.room=n.room)}))}copyCode(e){return Object(P.b)(this,void 0,void 0,(function*(){yield ci.write({string:e})}))}}return e.\u0275fac=function(t){return new(t||e)(h.ac(s.b),h.ac(To.a),h.ac(s.Db),h.ac(l.a),h.ac(p.a))},e.\u0275cmp=h.Ub({type:e,selectors:[["card-course"]],inputs:{index:"index",show_options_routes:"show_options_routes",show_list_students:"show_list_students",course:"course"},outputs:{itemDeleteEvent:"itemDeleteEvent",itemLoadEvent:"itemLoadEvent"},decls:2,vars:2,consts:[[4,"ngIf"],[3,"count","all_width"],[1,"intro-y","box",3,"ngClass"],[1,"flex","items-center","border-b","border-gray-200","dark:border-dark-5"],[1,"ml-3","mr-auto"],[1,"font-medium",3,"routerLink"],[1,"flex","text-gray-600","truncate","text-xs","mt-0.5"],[1,"text-theme-1","dark:text-theme-10","inline-block","truncate","c-pointer",2,"font-size","1.2em",3,"click"],[1,"mx-1"],[1,"p-2"],[1,"h-40","xxl:h-56","image-fit"],["alt","--",1,"rounded-md",3,"src"],[1,"block","font-medium","text-base","mt-2","ml-2",3,"routerLink"],[1,"text-gray-700","dark:text-gray-600","mt-2"],["class","flex-center","style","display: flex;flex-wrap: wrap;",4,"ngIf"],[1,"flex","items-center","p-2","py-3","border-t","border-gray-200","dark:border-dark-5"],[1,"intro-x","flex","mr-2"],["class","intro-x w-8 h-8 image-fit",4,"ngFor","ngForOf"],["slot","fixed","vertical","bottom","horizontal","end",4,"ngIf"],["class","px-5 pt-3 pb-5 border-t border-gray-200 dark:border-dark-5",4,"ngIf"],[1,"flex-center",2,"display","flex","flex-wrap","wrap"],["fill","outline","shape","round","size","small",3,"matTooltip","routerLink"],["name","home-outline"],["name","planet-outline"],["name","book-outline"],["name","albums-outline"],["fill","outline","shape","round","size","small","target","_blank",3,"matTooltip","href",4,"ngIf"],["name","pie-chart-outline"],["fill","outline","shape","round","size","small","target","_blank",3,"matTooltip","href"],["target","_blank",3,"href"],["name","laptop-outline"],[1,"intro-x","w-8","h-8","image-fit"],["alt","--",1,"rounded-full","border","border-white","zoom-in",3,"src","title"],["slot","fixed","vertical","bottom","horizontal","end"],["fab",""],["size","small",3,"matTooltip"],["name","settings-outline"],["side","top"],["color","danger",3,"matTooltip","click"],["name","trash-outline"],["color","warning",3,"matTooltip","click",4,"ngIf"],["color","primary",3,"matTooltip","click",4,"ngIf"],["color","twitter",3,"matTooltip","click"],["name","create-outline"],["color","light",3,"matTooltip","click",4,"ngIf"],["color","warning",3,"matTooltip","click"],["name","archive-outline"],["color","primary",3,"matTooltip","click"],["name","refresh-outline"],["color","light",3,"matTooltip","click"],["name","clipboard-outline"],[1,"px-5","pt-3","pb-5","border-t","border-gray-200","dark:border-dark-5"],[1,"w-full","flex","text-gray-600","text-xs","sm:text-sm"],[1,"mr-2"],[1,"font-medium"]],template:function(e,t){1&e&&(h.cd(0,Qo,2,2,"ng-container",0),h.cd(1,si,25,13,"ng-container",0)),2&e&&(h.Ac("ngIf",t.loadingPresent),h.Lb(1),h.Ac("ngIf",!t.loadingPresent))},directives:[o.t,Vo.a,o.q,c.i,s.Kb,o.s,s.k,v.a,c.g,s.C,s.w,s.x,s.y],pipes:[f.d],styles:[".border_status_color_archived[_ngcontent-%COMP%]{border:1px solid var(--ion-color-warning)}.border_status_color_active[_ngcontent-%COMP%]{border:1px solid var(--ion-color-primary)}"]}),e})();function ri(e,t){1&e&&(h.gc(0,"ion-buttons",20),h.bc(1,"ion-menu-button"),h.fc())}function li(e,t){1&e&&(h.gc(0,"ion-title"),h.ed(1),h.tc(2,"translate"),h.fc()),2&e&&(h.Lb(1),h.fd(h.uc(2,1,"menu.courses")))}function di(e,t){if(1&e){const e=h.hc();h.gc(0,"ion-searchbar",21),h.oc("ngModelChange",(function(t){return h.Sc(e),h.sc().queryText=t}))("ionChange",(function(){return h.Sc(e),h.sc().search(!0)}))("ionCancel",(function(){return h.Sc(e),h.sc().showSearchbar=!1})),h.tc(1,"translate"),h.fc()}if(2&e){const e=h.sc();h.Bc("placeholder",h.uc(1,2,"forms.search")),h.Ac("ngModel",e.queryText)}}function gi(e,t){if(1&e){const e=h.hc();h.gc(0,"ion-button",22),h.oc("click",(function(){return h.Sc(e),h.sc().getCoursesByStatus("archived")})),h.tc(1,"translate"),h.bc(2,"ion-icon",23),h.fc()}2&e&&h.Ac("matTooltip",h.uc(1,1,"pages.course.get_archived_courses"))}function ui(e,t){if(1&e){const e=h.hc();h.gc(0,"ion-button",24),h.oc("click",(function(){return h.Sc(e),h.sc().getCoursesByStatus("active")})),h.tc(1,"translate"),h.bc(2,"ion-icon",25),h.fc()}2&e&&h.Ac("matTooltip",h.uc(1,1,"pages.course.get_active_courses"))}function pi(e,t){1&e&&(h.gc(0,"div",26),h.gc(1,"div",27),h.bc(2,"img",28),h.fc(),h.gc(3,"div",29),h.gc(4,"ion-label",30),h.ed(5),h.tc(6,"translate"),h.fc(),h.fc(),h.fc()),2&e&&(h.Lb(5),h.fd(h.uc(6,1,"pages.course.create_class_or_join")))}function hi(e,t){1&e&&h.bc(0,"mat-progress-bar",31)}function fi(e,t){1&e&&h.bc(0,"card-load-animation",32),2&e&&h.Ac("count",8)}function bi(e,t){if(1&e){const e=h.hc();h.gc(0,"ion-col",33),h.gc(1,"card-course",34),h.oc("itemDeleteEvent",(function(t){return h.Sc(e),h.sc().deleteItem(t)}))("itemLoadEvent",(function(t){return h.Sc(e),h.sc().loading=t})),h.fc(),h.fc()}if(2&e){const e=t.$implicit,n=t.index;h.Lb(1),h.Ac("course",e)("index",n)}}function mi(e,t){1&e&&(h.gc(0,"ion-grid",16),h.gc(1,"ion-row",35),h.gc(2,"ion-col",36),h.bc(3,"img",37),h.gc(4,"p",38),h.ed(5),h.tc(6,"translate"),h.fc(),h.fc(),h.fc(),h.fc()),2&e&&(h.Lb(5),h.fd(h.uc(6,1,"pages.course.no_have_course")))}let _i=(()=>{class e{constructor(e,t,n,o,i,s,c,r,l,d){this.actionSheetCtrl=e,this.modalCtrl=t,this.routerOutlet=n,this.toastService=o,this.courseService=i,this.controlErroresService=s,this.tourService=c,this.alertController=r,this.redirectService=l,this.router=d,this.loadingCourses=!1,this.scrollbarStyle=a.a.scrollbarStyle,this.showSearchbar=!1,this.queryText="",this.courses=[],this.img_url="https://images.unsplash.com/photo-1627483262769-04d0a1401487?ixid=MnwxMjA3fDF8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80",this.loading=!1,this.permissions=null,this.status_course="active",this.navigationSubscription=this.router.events.subscribe(e=>{})}ngOnInit(){this.getCourses(),this.initGogleAuth(),this.tourService.tour("clickAddCourse"),this.courseService.getPermissions().subscribe(e=>{this.permissions=e.data},e=>{this.controlErroresService.control(e)})}createActionSheetCrtl(e){return Object(P.b)(this,void 0,void 0,(function*(){let t=[];"yes"==this.permissions.create_course&&(t.push({text:"Crear una clase",handler:()=>{this.showModalAddNewClass()}}),t.push({text:"Importar desde classroom",handler:()=>{this.loadClient()}})),"yes"==this.permissions.join_course&&t.push({text:"Unirme a una clase",handler:()=>{this.openFormJoinClass()}}),t.push({text:"Cancelar",role:"cancel"});const n=yield this.actionSheetCtrl.create({header:e,buttons:t});yield n.present()}))}openAddCourse(e){return Object(P.b)(this,void 0,void 0,(function*(){null!=this.permissions?this.createActionSheetCrtl(e):this.courseService.getPermissions().subscribe(t=>{this.permissions=t.data,this.createActionSheetCrtl(e)},e=>{this.controlErroresService.control(e)})}))}initGogleAuth(){return new Promise(e=>{gapi.load("client:auth2",e)}).then(()=>Object(P.b)(this,void 0,void 0,(function*(){yield gapi.auth2.init({client_id:a.a.google.client_id}).then(e=>{this.gapiSetup=!0,this.authInstance=e})})))}getCourses(){this.loadingCourses=!0,this.courseService.courses(this.status_course).subscribe(e=>{this.loadingCourses=!1,this.courses=Array.isArray(e.data)?e.data:[]},e=>{this.loadingCourses=!1,this.controlErroresService.control(e)})}search(){this.courses=this.courses.map(e=>(e.hidden=e.name.indexOf(this.queryText.toUpperCase())>=0,e))}getCoursesByStatus(e){this.status_course=e,this.getCourses()}authenticate(){return gapi.auth2.getAuthInstance().signIn({scope:"https://www.googleapis.com/auth/classroom.courses https://www.googleapis.com/auth/classroom.courses.readonly"}).then((function(){console.log("Sign-in successful")}),(function(e){console.error("Error signing in",e)}))}loadClient(){return this.loading=!0,gapi.client.setApiKey(a.a.google.api_key),gapi.client.load("https://classroom.googleapis.com/$discovery/rest?version=v1").then(()=>{console.log("GAPI client loaded for API"),this.execute()},(function(e){this.loading=!1,console.error("Error loading GAPI client for API",e)}))}execute(){return gapi.client.classroom.courses.list({}).then(e=>{let t=e.result.courses;Array.isArray(t)?(t=t.map(e=>({classroom_link:e.alternateLink,description:e.description,section:e.section,reference_id:e.id,reference_url:e.alternateLink,name:e.name,code:e.enrollmentCode,room:e.room,reference:"GOOGLE",folders:[{folder_url:e.teacherFolder?e.teacherFolder.alternateLink:"",reference_id:e.teacherFolder?e.teacherFolder.id:"",name:e.teacherFolder?e.teacherFolder.title:""}]})),this.loading=!1,this.showModalAddClassOfProvider(t)):this.toastService.presentToast("No hay aulas para importar","warning")},(function(e){console.error("Execute error",e)}))}showModalAddClassOfProvider(e){return Object(P.b)(this,void 0,void 0,(function*(){const t=yield this.modalCtrl.create({component:qo,cssClass:"modal-fullscreen",swipeToClose:!0,presentingElement:this.routerOutlet.nativeEl,componentProps:{courses:e}});yield t.present();const{data:n}=yield t.onWillDismiss();n&&(console.log(n),Array.isArray(n)&&n.forEach(e=>{this.courses.unshift(e)}))}))}showModalAddNewClass(){return Object(P.b)(this,void 0,void 0,(function*(){const e=yield this.modalCtrl.create({component:Do,cssClass:"modal-fullscreen",swipeToClose:!0,presentingElement:this.routerOutlet.nativeEl,componentProps:{}});yield e.present();const{data:t}=yield e.onWillDismiss();t&&this.courses.unshift(t)}))}deleteItem(e){e>=0&&this.courses.splice(e,1)}openFormJoinClass(){return Object(P.b)(this,void 0,void 0,(function*(){const e=yield this.alertController.create({cssClass:"",header:"Unirme a una clase",inputs:[{name:"code",value:"",type:"text",placeholder:"C\xf3digo del aula virtual"}],buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:()=>{}},{text:"Registrarme",handler:e=>{e.code&&(this.loading=!0,this.courseService.prepareJoin(e).subscribe(e=>Object(P.b)(this,void 0,void 0,(function*(){if(e.data){this.loading=!1;const t=yield this.modalCtrl.create({component:Ho.a,cssClass:"modal-fullscreen-100",swipeToClose:!0,presentingElement:this.routerOutlet.nativeEl,componentProps:{course:e.data}});yield t.present();const{data:n}=yield t.onWillDismiss();n&&this.getCourses()}else this.toastService.presentToast(e.message,e.status)})),e=>{this.loading=!1,this.controlErroresService.control(e)}))}}]});yield e.present()}))}enableTour(){this.tourService.tour("clickAddCourse",!0)}ngOnDestroy(){this.navigationSubscription&&this.navigationSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(h.ac(s.a),h.ac(s.Db),h.ac(s.fb),h.ac(p.a),h.ac(To.a),h.ac(l.a),h.ac(g.a),h.ac(s.b),h.ac(u.a),h.ac(c.f))},e.\u0275cmp=h.Ub({type:e,selectors:[["app-my-courses"]],decls:26,vars:14,consts:[["translucent","true"],["slot","start",4,"ngIf"],[4,"ngIf"],["showCancelButton","always",3,"ngModel","placeholder","ngModelChange","ionChange","ionCancel",4,"ngIf"],["slot","end"],["color","secondary","size","small",3,"matTooltip","click"],["name","help-buoy-outline"],["color","warning",3,"matTooltip","click",4,"ngIf"],["color","primary",3,"matTooltip","click",4,"ngIf"],[1,"btn-create-c",3,"click"],["slot","icon-only","name","add-circle-outline"],["class","parent-item-help-add btn-create-c",4,"ngIf"],["mode","indeterminate",4,"ngIf"],["fullscreen","true",3,"scrollbar"],[3,"count",4,"ngIf"],[1,"container"],[1,"grid-shuffle"],["id","grid",1,"row"],["size","12","size-sm","6","size-md","4","size-xl","3","class","",4,"ngFor","ngForOf"],["class","grid-shuffle",4,"ngIf"],["slot","start"],["showCancelButton","always",3,"ngModel","placeholder","ngModelChange","ionChange","ionCancel"],["color","warning",3,"matTooltip","click"],["name","archive-outline"],["color","primary",3,"matTooltip","click"],["name","school-outline"],[1,"parent-item-help-add","btn-create-c"],[1,"c-c-ad-d"],["src","/assets/img/dark_create_class_arrow.svg","alt","",1,"call-class-item-help"],[1,""],[1,"color-text","mr-10px"],["mode","indeterminate"],[3,"count"],["size","12","size-sm","6","size-md","4","size-xl","3",1,""],[1,"m-1",3,"course","index","itemDeleteEvent","itemLoadEvent"],["id","grid",1,"row","flex","flex-center"],["size","12","size-sm","8","size-md","8","size-xl","6",1,""],["src","/assets/img/class.jpg","alt","",2,"width","100%"],[1,"text-center","bold"]],template:function(e,t){1&e&&(h.gc(0,"ion-header",0),h.gc(1,"ion-toolbar"),h.cd(2,ri,2,0,"ion-buttons",1),h.cd(3,li,3,3,"ion-title",2),h.cd(4,di,2,4,"ion-searchbar",3),h.gc(5,"ion-buttons",4),h.gc(6,"ion-button",5),h.oc("click",(function(){return t.enableTour()})),h.tc(7,"translate"),h.bc(8,"ion-icon",6),h.fc(),h.cd(9,gi,3,3,"ion-button",7),h.cd(10,ui,3,3,"ion-button",8),h.gc(11,"ion-button",9),h.oc("click",(function(){return t.openAddCourse("Agregar nuevo curso")})),h.bc(12,"ion-icon",10),h.fc(),h.fc(),h.fc(),h.cd(13,pi,7,3,"div",11),h.cd(14,hi,1,0,"mat-progress-bar",12),h.fc(),h.gc(15,"ion-content",13),h.cd(16,fi,1,1,"card-load-animation",14),h.gc(17,"div",15),h.gc(18,"ion-grid",16),h.gc(19,"ion-row",17),h.cd(20,bi,2,2,"ion-col",18),h.fc(),h.fc(),h.fc(),h.cd(21,mi,7,3,"ion-grid",19),h.fc(),h.gc(22,"ion-footer",0),h.gc(23,"ion-toolbar"),h.gc(24,"ion-buttons",4),h.ed(25,"\xa92022 Ediciones Holgu\xedn"),h.fc(),h.fc(),h.fc()),2&e&&(h.Lb(2),h.Ac("ngIf",!t.showSearchbar),h.Lb(1),h.Ac("ngIf",!t.showSearchbar),h.Lb(1),h.Ac("ngIf",t.showSearchbar),h.Lb(2),h.Ac("matTooltip",h.uc(7,12,"buttons.tour")),h.Lb(3),h.Ac("ngIf",null!=t.permissions&&t.permissions.show_archived_course&&"active"==t.status_course),h.Lb(1),h.Ac("ngIf","archived"==t.status_course),h.Lb(3),h.Ac("ngIf",0==t.courses.length),h.Lb(1),h.Ac("ngIf",t.loading),h.Lb(1),h.Bc("scrollbar",t.scrollbarStyle),h.Lb(1),h.Ac("ngIf",t.loadingCourses),h.Lb(4),h.Ac("ngForOf",t.courses),h.Lb(1),h.Ac("ngIf",0==t.courses.length&&!t.loadingCourses))},directives:[s.B,s.zb,o.t,s.l,s.k,v.a,s.C,s.u,b.b,s.A,s.gb,o.s,s.z,s.R,s.xb,s.hb,s.Mb,i.r,i.u,s.N,Pe.a,Vo.a,s.t,ai],pipes:[f.d],styles:[".parent-item-help-add[_ngcontent-%COMP%]{position:absolute;right:0;top:3.4em;z-index:1000}.parent-item-help-add[_ngcontent-%COMP%]   .c-c-ad-d[_ngcontent-%COMP%]{display:flex;justify-content:right}.parent-item-help-add[_ngcontent-%COMP%]   .c-c-ad-d[_ngcontent-%COMP%]   .call-class-item-help[_ngcontent-%COMP%]{color:var(--ion-text-color);margin-right:1.1875rem;width:3.5rem}.color-text[_ngcontent-%COMP%]{color:var(--ion-text-color)}.mr-10px[_ngcontent-%COMP%]{margin-right:10px}"]}),e})();var vi=n("y2f/"),ki=n("p74H"),Ci=n("X+KH"),yi=n("EYf3"),xi=n("6tnU"),wi=n("e9RB"),Mi=n("tk/3");let Oi=(()=>{class e{constructor(e,t){this.httpClient=e,this.tokenService=t,this.url=r.i.messenger}send(e,t){if(t){const n=new Mi.e({Authorization:this.tokenService.getToken(),"X-Socket-ID":t});return this.httpClient.post(this.url+"send",e,{headers:n})}return this.httpClient.post(this.url+"send",e)}response(e,t){if(t){const n=new Mi.e({Authorization:this.tokenService.getToken(),"X-Socket-ID":t});return this.httpClient.post(this.url+"response",e,{headers:n})}return this.httpClient.post(this.url+"response",e)}sendDirect(e,t){const n=new Mi.e({Authorization:this.tokenService.getToken(),"X-Socket-ID":t});return this.httpClient.post(this.url+"send/direct",e,{headers:n})}myMessages(e=1,t){return console.log(t),this.httpClient.get(this.url+"my"+this.buildFilters(e,t))}getMessage(e){return this.httpClient.get(this.url+"get/"+e)}getMessagesById(e){return this.httpClient.get(this.url+"get-all/"+e)}buildFilters(e,t){let n="?page="+e+"&";return t.status&&(n+="status="+t.status+"&"),t.search&&(n+="search="+t.search+"&"),t.range&&t.range.start&&(n+="start="+A(t.range.start).set("hour",0).format("YYYY-MM-DD")+"&"),t.range&&t.range.end&&(n+="end="+A(t.range.end).set("hour",23).format("YYYY-MM-DD")+"&"),n}uploadFile(e,t){return this.httpClient.post(this.url+"upload-file/"+t,e)}changeRead(e,t){return this.httpClient.post(this.url+"change-read/"+e,t)}delete(e){return this.httpClient.delete(this.url+"delete/"+e)}archive(e){return this.httpClient.get(this.url+"archive/"+e)}}return e.\u0275fac=function(t){return new(t||e)(h.kc(Mi.b),h.kc(we.a))},e.\u0275prov=h.Wb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Pi=(()=>{class e{constructor(){this.messengerService$=new m.a}appendMessage(e){this.messengerService$.next(e)}getMessenger$(){return this.messengerService$.asObservable()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=h.Wb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Si=(()=>{class e{constructor(){this.message=""}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=h.Ub({type:e,selectors:[["not-fount-component"]],inputs:{message:"message"},decls:31,vars:1,consts:[[1,"preloader",2,"opacity","1"],["version","1.1","id","sun","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","x","0px","y","0px","width","10px","height","10px","viewBox","0 0 10 10","enable-background","new 0 0 10 10",0,"xml","space","preserve",2,"opacity","1","margin-left","0px","margin-top","0px"],["fill","none","d","M6.942,3.876c-0.4-0.692-1.146-1.123-1.946-1.123c-0.392,0-0.779,0.104-1.121,0.301c-1.072,0.619-1.44,1.994-0.821,3.067C3.454,6.815,4.2,7.245,5,7.245c0.392,0,0.779-0.104,1.121-0.301C6.64,6.644,7.013,6.159,7.167,5.581C7.321,5,7.243,4.396,6.942,3.876z M6.88,5.505C6.745,6.007,6.423,6.427,5.973,6.688C5.676,6.858,5.34,6.948,5,6.948c-0.695,0-1.343-0.373-1.69-0.975C2.774,5.043,3.093,3.849,4.024,3.312C4.32,3.14,4.656,3.05,4.996,3.05c0.695,0,1.342,0.374,1.69,0.975C6.946,4.476,7.015,5,6.88,5.505z"],["fill","none","d","M8.759,2.828C8.718,2.757,8.626,2.732,8.556,2.774L7.345,3.473c-0.07,0.041-0.094,0.132-0.053,0.202C7.319,3.723,7.368,3.75,7.419,3.75c0.025,0,0.053-0.007,0.074-0.02l1.211-0.699C8.774,2.989,8.8,2.899,8.759,2.828z"],["fill","none","d","M1.238,7.171c0.027,0.047,0.077,0.074,0.128,0.074c0.025,0,0.051-0.008,0.074-0.02l1.211-0.699c0.071-0.041,0.095-0.133,0.054-0.203S2.574,6.228,2.503,6.269l-1.21,0.699C1.221,7.009,1.197,7.101,1.238,7.171z"],["fill","none","d","M6.396,2.726c0.052,0,0.102-0.026,0.13-0.075l0.349-0.605C6.915,1.976,6.89,1.885,6.819,1.844c-0.07-0.042-0.162-0.017-0.202,0.054L6.269,2.503C6.228,2.574,6.251,2.666,6.322,2.706C6.346,2.719,6.371,2.726,6.396,2.726z"],["fill","none","d","M3.472,7.347L3.123,7.952c-0.041,0.07-0.017,0.162,0.054,0.203C3.2,8.169,3.226,8.175,3.25,8.175c0.052,0,0.102-0.027,0.129-0.074l0.349-0.605c0.041-0.07,0.017-0.16-0.054-0.203C3.603,7.251,3.513,7.276,3.472,7.347z"],["fill","none","d","M3.601,2.726c0.025,0,0.051-0.007,0.074-0.02C3.746,2.666,3.77,2.574,3.729,2.503l-0.35-0.604C3.338,1.828,3.248,1.804,3.177,1.844C3.106,1.886,3.082,1.976,3.123,2.047l0.35,0.604C3.5,2.7,3.549,2.726,3.601,2.726z"],["fill","none","d","M6.321,7.292c-0.07,0.043-0.094,0.133-0.054,0.203l0.351,0.605c0.026,0.047,0.076,0.074,0.127,0.074c0.025,0,0.051-0.006,0.074-0.02c0.072-0.041,0.096-0.133,0.055-0.203l-0.35-0.605C6.483,7.276,6.393,7.253,6.321,7.292z"],["fill","none","d","M2.202,5.146c0.082,0,0.149-0.065,0.149-0.147S2.284,4.851,2.202,4.851H1.503c-0.082,0-0.148,0.066-0.148,0.148s0.066,0.147,0.148,0.147H2.202z"],["fill","none","d","M8.493,4.851H7.794c-0.082,0-0.148,0.066-0.148,0.148s0.066,0.147,0.148,0.147l0,0h0.699c0.082,0,0.148-0.065,0.148-0.147S8.575,4.851,8.493,4.851L8.493,4.851z"],["fill","none","d","M5.146,2.203V0.805c0-0.082-0.066-0.148-0.148-0.148c-0.082,0-0.148,0.066-0.148,0.148v1.398c0,0.082,0.066,0.149,0.148,0.149C5.08,2.352,5.146,2.285,5.146,2.203z"],["fill","none","d","M4.85,7.796v1.396c0,0.082,0.066,0.15,0.148,0.15c0.082,0,0.148-0.068,0.148-0.15V7.796c0-0.082-0.066-0.148-0.148-0.148C4.917,7.647,4.85,7.714,4.85,7.796z"],["fill","none","d","M2.651,3.473L1.44,2.774C1.369,2.732,1.279,2.757,1.238,2.828C1.197,2.899,1.221,2.989,1.292,3.031l1.21,0.699c0.023,0.013,0.049,0.02,0.074,0.02c0.051,0,0.101-0.026,0.129-0.075C2.747,3.604,2.722,3.514,2.651,3.473z"],["fill","none","d","M8.704,6.968L7.493,6.269c-0.07-0.041-0.162-0.016-0.201,0.055c-0.041,0.07-0.018,0.162,0.053,0.203l1.211,0.699c0.023,0.012,0.049,0.02,0.074,0.02c0.051,0,0.102-0.027,0.129-0.074C8.8,7.101,8.776,7.009,8.704,6.968z"],["version","1.1","id","cloud","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","x","0px","y","0px","width","10px","height","10px","viewBox","0 0 10 10","enable-background","new 0 0 10 10",0,"xml","space","preserve"],["fill","none","d","M8.528,5.624H8.247c-0.085,0-0.156-0.068-0.156-0.154c0-0.694-0.563-1.257-1.257-1.257c-0.098,0-0.197,0.013-0.3,0.038C6.493,4.259,6.45,4.252,6.415,4.229C6.38,4.208,6.356,4.172,6.348,4.131C6.117,3.032,5.135,2.235,4.01,2.235c-1.252,0-2.297,0.979-2.379,2.23c-0.004,0.056-0.039,0.108-0.093,0.13C1.076,4.793,0.776,5.249,0.776,5.752c0,0.693,0.564,1.257,1.257,1.257h6.495c0.383,0,0.695-0.31,0.695-0.692S8.911,5.624,8.528,5.624z"],[1,"rain"],[1,"drop"],[1,"text",2,"color","#7f7f7f"]],template:function(e,t){1&e&&(h.gc(0,"div",0),h.rc(),h.gc(1,"svg",1),h.gc(2,"g"),h.bc(3,"path",2),h.bc(4,"path",3),h.bc(5,"path",4),h.bc(6,"path",5),h.bc(7,"path",6),h.bc(8,"path",7),h.bc(9,"path",8),h.bc(10,"path",9),h.bc(11,"path",10),h.bc(12,"path",11),h.bc(13,"path",12),h.bc(14,"path",13),h.bc(15,"path",14),h.fc(),h.fc(),h.gc(16,"svg",15),h.bc(17,"path",16),h.fc(),h.qc(),h.gc(18,"div",17),h.bc(19,"span",18),h.bc(20,"span",18),h.bc(21,"span",18),h.bc(22,"span",18),h.bc(23,"span",18),h.bc(24,"span",18),h.bc(25,"span",18),h.bc(26,"span",18),h.bc(27,"span",18),h.bc(28,"span",18),h.fc(),h.gc(29,"div",19),h.ed(30),h.fc(),h.fc()),2&e&&(h.Lb(30),h.gd(" ",t.message," "))},styles:[".preloader[_ngcontent-%COMP%]{position:absolute;margin-left:-55px;margin-top:-100px;left:50%;top:50%}.preloader[_ngcontent-%COMP%], svg[_ngcontent-%COMP%]{height:110px;width:110px}path[_ngcontent-%COMP%]{stroke:#7f7f7f;stroke-width:.25;fill:#241e20}#cloud[_ngcontent-%COMP%]{position:relative;z-index:2}#cloud[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#efefef}#sun[_ngcontent-%COMP%]{margin-left:-10px;margin-top:6px;opacity:0;width:60px;height:60px;position:absolute;left:45px;top:15px;z-index:1;-webkit-animation-name:rotate;animation-name:rotate;-webkit-animation-duration:16s;animation-duration:16s;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite;-webkit-animation-timing-function:linear;animation-timing-function:linear}#sun[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{stroke-width:.18;fill:#7f7f7f}@-webkit-keyframes rotate{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes rotate{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.rain[_ngcontent-%COMP%]{position:absolute;width:70px;height:70px;margin-top:-32px;margin-left:19px}.drop[_ngcontent-%COMP%]{opacity:1;background:#7f7f7f;display:block;float:left;width:3px;height:10px;margin-left:4px;border-radius:0 0 6px 6px;-webkit-animation-name:drop;animation-name:drop;-webkit-animation-duration:.35s;animation-duration:.35s;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite}.drop[_ngcontent-%COMP%]:first-child{-webkit-animation-delay:-.13s;animation-delay:-.13s}.drop[_ngcontent-%COMP%]:nth-child(2){-webkit-animation-delay:-.24s;animation-delay:-.24s}.drop[_ngcontent-%COMP%]:nth-child(3){-webkit-animation-delay:-.39s;animation-delay:-.39s}.drop[_ngcontent-%COMP%]:nth-child(4){-webkit-animation-delay:-525ms;animation-delay:-525ms}.drop[_ngcontent-%COMP%]:nth-child(5){-webkit-animation-delay:-.64s;animation-delay:-.64s}.drop[_ngcontent-%COMP%]:nth-child(6){-webkit-animation-delay:-.79s;animation-delay:-.79s}.drop[_ngcontent-%COMP%]:nth-child(7){-webkit-animation-delay:-.9s;animation-delay:-.9s}.drop[_ngcontent-%COMP%]:nth-child(8){-webkit-animation-delay:-1.05s;animation-delay:-1.05s}.drop[_ngcontent-%COMP%]:nth-child(9){-webkit-animation-delay:-1.13s;animation-delay:-1.13s}.drop[_ngcontent-%COMP%]:nth-child(10){-webkit-animation-delay:-1.3s;animation-delay:-1.3s}@-webkit-keyframes drop{50%{height:45px;opacity:0}51%{opacity:0}to{height:1px;opacity:0}}@keyframes drop{50%{height:45px;opacity:0}51%{opacity:0}to{height:1px;opacity:0}}.text[_ngcontent-%COMP%]{font-family:Helvetica,Helvetica Neue,sans-serif;letter-spacing:1px;text-align:center;margin-left:-43px;font-weight:700;margin-top:20px;font-size:11px;color:#a0a0a0;width:200px}"]}),e})();const Li=["theLastReference"];function Ai(e,t){if(1&e){const e=h.hc();h.gc(0,"a",36),h.oc("click",(function(){h.Sc(e);const t=h.sc().$implicit;return h.sc().showMessage(t)})),h.ed(1),h.fc()}if(2&e){const e=h.sc().$implicit;h.Lb(1),h.fd(e.send?(e.send.last_names||" ")+" "+(e.send.name||e.send.email):"-")}}function Ii(e,t){if(1&e&&(h.gc(0,"span",39),h.ed(1),h.fc()),2&e){const e=h.sc(2).$implicit;h.Lb(1),h.hd(" ",e.last_names," ",e.name,"")}}function Ti(e,t){1&e&&(h.gc(0,"span"),h.ed(1,";"),h.fc())}function zi(e,t){if(1&e&&(h.gc(0,"span"),h.cd(1,Ii,2,2,"span",38),h.cd(2,Ti,2,0,"span",35),h.fc()),2&e){const e=h.sc().index,t=h.sc(2).$implicit;h.Lb(1),h.Ac("ngIf",e<5),h.Lb(1),h.Ac("ngIf",t.message.users.length>e+1)}}function Ei(e,t){if(1&e&&(h.gc(0,"span"),h.cd(1,zi,3,2,"span",35),h.fc()),2&e){const e=t.index;h.Lb(1),h.Ac("ngIf",e<=5)}}function Ri(e,t){if(1&e){const e=h.hc();h.gc(0,"a",36),h.oc("click",(function(){h.Sc(e);const t=h.sc().$implicit;return h.sc().showMessage(t)})),h.gc(1,"strong"),h.ed(2,"Para: "),h.fc(),h.cd(3,Ei,2,1,"span",37),h.fc()}if(2&e){const e=h.sc().$implicit;h.Lb(3),h.Ac("ngForOf",e.message.users)}}function Fi(e,t){if(1&e){const e=h.hc();h.gc(0,"button",40),h.oc("click",(function(){h.Sc(e);const t=h.sc(),n=t.$implicit,o=t.index;return h.sc().archive(n,o)})),h.bc(1,"i",14),h.fc()}}function Bi(e,t){if(1&e){const e=h.hc();h.gc(0,"button",41),h.oc("click",(function(){h.Sc(e);const t=h.sc(),n=t.$implicit,o=t.index;return h.sc().archive(n,o)})),h.bc(1,"i",42),h.fc()}}function ji(e,t){if(1&e){const e=h.hc();h.gc(0,"li",43),h.gc(1,"button",44),h.gc(2,"i",45),h.oc("click",(function(){h.Sc(e);const t=h.sc().$implicit;return h.sc().changeRead(t)})),h.fc(),h.fc(),h.fc()}}function Di(e,t){if(1&e){const e=h.hc();h.gc(0,"li",43),h.gc(1,"button",46),h.gc(2,"i",47),h.oc("click",(function(){h.Sc(e);const t=h.sc().$implicit;return h.sc().changeRead(t)})),h.fc(),h.fc(),h.fc()}}function Ui(e,t){1&e&&h.bc(0,"span",null,48)}function $i(e,t){if(1&e){const e=h.hc();h.gc(0,"div",20),h.gc(1,"div",21),h.cd(2,Ai,2,1,"a",22),h.cd(3,Ri,4,1,"a",22),h.gc(4,"a",23),h.oc("click",(function(){h.Sc(e);const n=t.$implicit;return h.sc().showMessage(n)})),h.ed(5),h.fc(),h.gc(6,"p",24),h.gc(7,"span"),h.ed(8),h.fc(),h.gc(9,"button",25),h.bc(10,"i",26),h.fc(),h.fc(),h.gc(11,"div",27),h.gc(12,"ul",28),h.gc(13,"li",29),h.cd(14,Fi,2,0,"button",30),h.fc(),h.gc(15,"li",29),h.cd(16,Bi,2,0,"button",31),h.fc(),h.gc(17,"li",32),h.gc(18,"button",33),h.oc("click",(function(){h.Sc(e);const n=t.$implicit,o=t.index;return h.sc().deleteElem(n,o)})),h.bc(19,"i",16),h.fc(),h.fc(),h.cd(20,ji,3,0,"li",34),h.cd(21,Di,3,0,"li",34),h.fc(),h.fc(),h.fc(),h.cd(22,Ui,2,0,"span",35),h.fc()}if(2&e){const e=t.$implicit,n=t.index,o=h.sc();h.Lb(1),h.Ac("ngClass",e.is_read?"":"all-txt-bold"),h.Lb(1),h.Ac("ngIf","send"!=e.status),h.Lb(1),h.Ac("ngIf","send"==e.status),h.Lb(2),h.fd(e.message?e.message.subject:"-"),h.Lb(3),h.fd(o.moment(e.created_at).format("D/MM/YYYY")),h.Lb(6),h.Ac("ngIf","active"==e.status||"send"==e.status),h.Lb(2),h.Ac("ngIf","archived"==e.status),h.Lb(4),h.Ac("ngIf",0==e.is_read),h.Lb(1),h.Ac("ngIf",1==e.is_read),h.Lb(1),h.Ac("ngIf",n+1==o.messages.length)}}function Ni(e,t){1&e&&h.bc(0,"img",52)}function qi(e,t){1&e&&(h.gc(0,"div"),h.bc(1,"not-fount-component",53),h.fc()),2&e&&(h.Lb(1),h.Ac("message","Lo sentimos, no hemos encontrado ni un mensaje."))}function Hi(e,t){if(1&e&&(h.gc(0,"div",49),h.gc(1,"div",50),h.cd(2,Ni,1,0,"img",51),h.fc(),h.cd(3,qi,2,1,"div",35),h.bc(4,"p"),h.fc()),2&e){const e=h.sc();h.Lb(2),h.Ac("ngIf",e.searching),h.Lb(1),h.Ac("ngIf",e.search_find&&0==e.messages.length)}}let Vi=(()=>{class e{constructor(e,t,n,o,i,s,c,l,d){this.controlErroresService=e,this.courseService=t,this.toastService=n,this.modalCrl=o,this.userData=i,this.messageService=s,this.translate=c,this.authService=l,this.messengerS$=d,this.loading=!1,this.openFilter=!1,this.moment=A,this.courses=[],this.users=[],this.usersSelected=[],this.search_find=!1,this.searching=!1,this.fieldEmitChange=new h.r,this.auth=null,this.pageMessage=1,this.allMessage=1,this.decodeURIComponent=decodeURIComponent,this.scrollbarStyle=a.a.scrollbarStyle,this.messages=[],this.filter={status:"active",search:"",range:{start:null,end:null}},this.panel_show="messages",this.timeoutID=null,c.setDefaultLang(r.e.lang),this.webSocket()}webSocket(){this.echo=this.authService.echoPush()}ngOnInit(){return Object(P.b)(this,void 0,void 0,(function*(){this.auth=yield this.userData.getUser(),this.resetLoadMessages(),this.intersectionObserver(),this.messengerS$.getMessenger$().subscribe(e=>{this.messages.unshift(e)})}))}ngAfterViewInit(){this.theLastReference.changes.subscribe(e=>{console.log(e),e.last&&this.observer.observe(e.last.nativeElement)})}intersectionObserver(){this.observer=new IntersectionObserver(e=>{e[0].isIntersecting&&this.allMessage>=this.pageMessage&&this.loadAllMessages()},{root:null,rootMargin:"0px",threshold:.5})}resetLoadMessages(e=!1){e&&(this.filter.search="",this.filter.range.start=null,this.filter.range.end=null),this.pageMessage=1,this.search_find=!1,this.messages=[],this.loadAllMessages()}loadAllMessages(){this.searching=!0,this.messageService.myMessages(this.pageMessage,this.filter).subscribe(e=>{this.pageMessage++,this.allMessage=e.last,this.messages=this.messages.concat(e.data),this.searching=!1,this.search_find=!0},e=>{this.searching=!1,this.controlErroresService.control(e)})}changeRead(e){this.messageService.changeRead(e.uuid,{is_read:!e.is_read}).subscribe(t=>{e.is_read=t.is_read,console.log(e.is_read,t)},e=>{this.controlErroresService.control(e)})}deleteElem(e,t){confirm("\xbfEst\xe1 seguro de eliminar este elemento?")&&this.messageService.delete(e.uuid).subscribe(e=>{this.messages.splice(t,1),this.toastService.warning(e.message)},e=>{this.controlErroresService.control(e)})}archive(e,t){this.messageService.archive(e.uuid).subscribe(e=>{this.messages.splice(t,1),this.toastService.info(e.message)},e=>{this.controlErroresService.control(e)})}inputModeKeyUp(){this.timeoutID&&clearTimeout(this.timeoutID),this.timeoutID=setTimeout(()=>this.resetLoadMessages(),1e3)}openPanelNewMessage(e){this.panel_show=e}dismiss(){this.modalCrl.dismiss()}recibeMessage(e){this.panel_show="messages"}showMessage(e){this.fieldEmitChange.emit(e)}}return e.\u0275fac=function(t){return new(t||e)(h.ac(l.a),h.ac(To.a),h.ac(Cn.b),h.ac(s.Db),h.ac(Ci.a),h.ac(Oi),h.ac(f.e),h.ac(wi.a),h.ac(Pi))},e.\u0275cmp=h.Ub({type:e,selectors:[["chat-messages"]],viewQuery:function(e,t){var n;1&e&&h.ld(Li,!0,h.o),2&e&&h.Nc(n=h.pc())&&(t.theLastReference=n)},outputs:{fieldEmitChange:"fieldEmitChange"},decls:24,vars:7,consts:[[1,"container"],[1,"row","mt-4"],[1,"form-search-items",2,"width","100%"],[1,"form-group","relative"],["type","text","placeholder","Buscar Mensaje",1,"form-control","input-item-search",3,"ngModel","input","ngModelChange","keydown.enter"],[1,"btn","btn-search-item",2,"height","100%",3,"click"],[1,"fas","fa-search"],[1,"row","rounded-lg"],[1,"col-12","mb-2"],[1,"btn","btn--principal","mr-2","info-btn-active",3,"ngClass","click"],[1,"fas","fa-inbox"],[1,"btn","btn--principal","mr-2","info-btn-green",3,"ngClass","click"],[1,"fas","fa-paper-plane"],[1,"btn","btn--principal","mr-2","info-btn-archived",3,"ngClass","click"],[1,"fas","fa-archive"],[1,"btn","btn--principal","mr-2","info-btn-deleted",3,"ngClass","click"],[1,"fas","fa-trash"],[1,"col-12"],["class","card card-chat-messsage relative",4,"ngFor","ngForOf"],["class","chat-box bg-white","id","scrollContentMessage",4,"ngIf"],[1,"card","card-chat-messsage","relative"],[1,"card-body","row","p-0","w-100",3,"ngClass"],["class","mb-0 mt-2 col-4 elem-text-larg",3,"click",4,"ngIf"],[1,"mb-0","mt-2","col-5","col-md-6","elem-text-larg",3,"click"],[1,"mb-0","mt-2","col-3","col-md-2","flex","p-0"],[1,"btn","btn-rel-mess","m-0"],[1,"fas","fa-caret-square-left"],[1,"abs-libre-right"],[1,"mb-0","mt-2","list-group-buttons"],[1,"bqX","brq"],["matTooltip","Archivar","matTooltipPosition","above","class","btn",3,"click",4,"ngIf"],["matTooltip","Mover a bandeja de entrada","matTooltipPosition","above","class","btn",3,"click",4,"ngIf"],[1,"bqX","bru"],["matTooltip","Eliminar","matTooltipPosition","above",1,"btn",3,"click"],["class","bqX brs",4,"ngIf"],[4,"ngIf"],[1,"mb-0","mt-2","col-4","elem-text-larg",3,"click"],[4,"ngFor","ngForOf"],["class","text-muted",4,"ngIf"],[1,"text-muted"],["matTooltip","Archivar","matTooltipPosition","above",1,"btn",3,"click"],["matTooltip","Mover a bandeja de entrada","matTooltipPosition","above",1,"btn",3,"click"],[1,"fas","fa-envelope-open-text"],[1,"bqX","brs"],["matTooltip","Marcar como le\xeddo","matTooltipPosition","above",1,"btn"],[1,"fas","fa-envelope-open",3,"click"],["matTooltip","Marcar como no le\xeddo","matTooltipPosition","above",1,"btn"],[1,"fas","fa-envelope",3,"click"],["theLastReference",""],["id","scrollContentMessage",1,"chat-box","bg-white"],[1,"text-center"],["src","assets/img/loading.gif","alt","","width","70",4,"ngIf"],["src","assets/img/loading.gif","alt","","width","70"],[3,"message"]],template:function(e,t){1&e&&(h.gc(0,"div",0),h.gc(1,"div",1),h.gc(2,"div",2),h.gc(3,"div",3),h.gc(4,"input",4),h.oc("input",(function(){return t.inputModeKeyUp()}))("ngModelChange",(function(e){return t.filter.search=e}))("keydown.enter",(function(){return t.resetLoadMessages()})),h.fc(),h.gc(5,"button",5),h.oc("click",(function(){return t.resetLoadMessages()})),h.bc(6,"i",6),h.fc(),h.fc(),h.fc(),h.fc(),h.gc(7,"div",7),h.gc(8,"div",8),h.gc(9,"button",9),h.oc("click",(function(){return t.filter.status="active",t.resetLoadMessages()})),h.bc(10,"i",10),h.ed(11," Recibidos"),h.fc(),h.gc(12,"button",11),h.oc("click",(function(){return t.filter.status="send",t.resetLoadMessages()})),h.bc(13,"i",12),h.ed(14," Enviados"),h.fc(),h.gc(15,"button",13),h.oc("click",(function(){return t.filter.status="archived",t.resetLoadMessages()})),h.bc(16,"i",14),h.ed(17," Archivados"),h.fc(),h.gc(18,"button",15),h.oc("click",(function(){return t.filter.status="deleted",t.resetLoadMessages()})),h.bc(19,"i",16),h.ed(20," Papelera"),h.fc(),h.fc(),h.gc(21,"div",17),h.cd(22,$i,23,10,"div",18),h.cd(23,Hi,5,2,"div",19),h.fc(),h.fc(),h.fc()),2&e&&(h.Lb(4),h.Ac("ngModel",t.filter.search),h.Lb(5),h.Ac("ngClass","active"==t.filter.status?"btn-active-principal":""),h.Lb(3),h.Ac("ngClass","send"==t.filter.status?"btn-active-principal":""),h.Lb(3),h.Ac("ngClass","archived"==t.filter.status?"btn-active-principal":""),h.Lb(3),h.Ac("ngClass","deleted"==t.filter.status?"btn-active-principal":""),h.Lb(4),h.Ac("ngForOf",t.messages),h.Lb(1),h.Ac("ngIf",t.searching||t.search_find&&0==t.messages.length))},directives:[i.c,i.r,i.u,o.q,o.s,o.t,v.a,Si],styles:["[_ngcontent-%COMP%]::-webkit-scrollbar{width:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{width:5px;background:#f5f5f5}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{width:1em;background-color:#ddd;outline:1px solid #708090;border-radius:1rem}.text-small[_ngcontent-%COMP%]{font-size:.9rem}.chat-box[_ngcontent-%COMP%], .messages-box[_ngcontent-%COMP%]{height:40vh;overflow-y:auto}.rounded-lg[_ngcontent-%COMP%]{border-radius:.5rem}input[_ngcontent-%COMP%]::-moz-placeholder{font-size:.9rem;color:#999}input[_ngcontent-%COMP%]::placeholder{font-size:.9rem;color:#999}.fix-bottom[_ngcontent-%COMP%]{position:absolute;bottom:0;width:100%}.btn-abs-b-r[_ngcontent-%COMP%]{position:fixed;bottom:2em;right:2em;font-size:25px;color:#fff;z-index:100}.card-chat-messsage[_ngcontent-%COMP%]{cursor:pointer;padding:5px 0 5px 10px;margin:0;box-shadow:inset 0 -1px 0 0 rgba(100,121,143,.12);display:flex;position:relative}.card-chat-messsage[_ngcontent-%COMP%]   .elem-text-larg[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:#000;text-decoration:none}.card-chat-messsage[_ngcontent-%COMP%]   .abs-libre-right[_ngcontent-%COMP%]{position:absolute;display:none;align-items:center;border:none;right:0;background:#fff;top:0;width:auto}.card-chat-messsage[_ngcontent-%COMP%]   .abs-libre-right[_ngcontent-%COMP%]   .list-group-buttons[_ngcontent-%COMP%]{display:flex;list-style:none}.card-chat-messsage[_ngcontent-%COMP%]   .abs-libre-right[_ngcontent-%COMP%]   .list-group-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{height:25px;width:25px;opacity:.54;align-items:center;border:none;display:inline-flex;justify-content:center;outline:none;position:relative;z-index:0;cursor:pointer;list-style:none;margin:0 10px;border-radius:5px;padding:5px}.card-chat-messsage[_ngcontent-%COMP%]   .abs-libre-right[_ngcontent-%COMP%]   .list-group-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{background:#e4e4e4;opacity:1}.card-chat-messsage[_ngcontent-%COMP%]:hover{box-shadow:inset 1px 0 0 #dadce0,inset -1px 0 0 #dadce0,0 1px 2px 0 rgba(60,64,67,.3),0 1px 3px 1px rgba(60,64,67,.15);z-index:2}.card-chat-messsage[_ngcontent-%COMP%]:hover   .abs-libre-right[_ngcontent-%COMP%]{display:block}.all-txt-bold[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{font-weight:700}.form-search-items[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{position:relative}.form-search-items[_ngcontent-%COMP%]   .btn-search-item[_ngcontent-%COMP%]{position:absolute;top:2px;left:5px}.form-search-items[_ngcontent-%COMP%]   .input-item-search[_ngcontent-%COMP%]{padding-left:40px}.relative[_ngcontent-%COMP%]{position:relative}.btn--principal[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#999}.btn--principal.btn-active-principal[_ngcontent-%COMP%]{outline:none}.btn--principal.btn-active-principal.info-btn-active[_ngcontent-%COMP%]{background:rgba(142,201,255,.651);color:#00255e}.btn--principal.btn-active-principal.info-btn-active[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#00255e}.btn--principal.btn-active-principal.info-btn-archived[_ngcontent-%COMP%]{background:rgba(255,238,142,.651);color:#5e3800}.btn--principal.btn-active-principal.info-btn-archived[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#5e3200}.btn--principal.btn-active-principal.info-btn-deleted[_ngcontent-%COMP%]{background:rgba(255,142,142,.651);color:#5e0000}.btn--principal.btn-active-principal.info-btn-deleted[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#5e0000}.btn--principal.btn-active-principal.info-btn-green[_ngcontent-%COMP%]{background:rgba(142,255,170,.651);color:#0b5e00}.btn--principal.btn-active-principal.info-btn-green[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#0b5e00}.btn-rel-mess[_ngcontent-%COMP%]{height:25px;width:25px;opacity:.54;align-items:center;border:none;display:inline-flex;justify-content:center;outline:none;position:relative;z-index:0;cursor:pointer;list-style:none;border-radius:5px;padding:5px}.btn-rel-mess[_ngcontent-%COMP%]:hover{background:#e4e4e4;opacity:1}.abs-r-t[_ngcontent-%COMP%]{position:absolute;right:1px;top:0}"]}),e})();var Yi=n("jhN1");function Xi(e,t){if(1&e&&h.bc(0,"img",5),2&e){const e=h.sc(2);h.bd("width",e.bgLogoUrlSize,"px")("height",e.bgLogoUrlSize,"px")("top",e.logoTop),h.Ac("ngClass",e.bgLogoUrlPosition)("src",e.trustedLogoUrl,h.Vc)}}function Qi(e,t){1&e&&h.bc(0,"div")}function Gi(e,t){if(1&e&&(h.gc(0,"div"),h.gc(1,"div",1),h.cd(2,Xi,1,8,"img",2),h.gc(3,"div",3),h.gc(4,"div"),h.cd(5,Qi,1,0,"div",4),h.fc(),h.fc(),h.fc(),h.fc()),2&e){const e=h.sc();h.Lb(1),h.bd("background-color",e.bgColor)("opacity",e.bgOpacity),h.Lb(1),h.Ac("ngIf",e.bgLogoUrl),h.Lb(1),h.bd("color",e.spinnerColor)("width",e.spinnerSize,"px")("height",e.spinnerSize,"px")("top",e.spinnerTop),h.Ac("ngClass",e.spinnerPosition),h.Lb(1),h.Ob(e.spinnerClass),h.Lb(1),h.Ac("ngForOf",e.spinnerDivs)}}var Wi=function(e){return e.xWanderingCubes="x-wandering-cubes",e.xBallSpin="x-ball-spin",e.xChasingDots="x-chasing-dots",e.xElapsis="x-elapsis",e.circleSpinner="circle-spinner",e.threeStrings="three-strings",e.wanderingCubes="wandering-cubes",e}({}),Ki=function(e){return e.bottomCenter="bottom-center",e.bottomLeft="bottom-left",e.bottomRight="bottom-right",e.centerCenter="center-center",e.centerLeft="center-left",e.centerRight="center-right",e.topCenter="top-center",e.topLeft="top-left",e.topRight="top-right",e}({});const Zi=new h.u("ngxLoadingXConfig.config"),Ji={show:!1,bgBlur:5,bgColor:"rgba(40, 40, 40, 0.5)",bgOpacity:5,bgLogoUrl:"",bgLogoUrlPosition:Ki.bottomRight,bgLogoUrlSize:100,spinnerType:Wi.wanderingCubes,spinnerSize:120,spinnerColor:"#dd1b16",spinnerPosition:Ki.centerCenter},es={"x-wandering-cubes":{divs:2,class:"x-wandering-cubes"},"x-ball-spin":{divs:8,class:"x-ball-spin"},"x-chasing-dots":{divs:2,class:"x-chasing-dots"},"x-elapsis":{divs:12,class:"x-elapsis"},"circle-spinner":{divs:12,class:"circle-spinner"},"three-strings":{divs:3,class:"sk-three-strings"},"wandering-cubes":{divs:2,class:"sk-wandering-cubes"}};let ts=(()=>{let e=class{constructor(e){this.config=e,this.defaultConfig=Object.assign({},Ji),this.config&&(this.defaultConfig=Object.assign(Object.assign({},Ji),this.config))}getDefaultConfig(){return Object.assign({},this.defaultConfig)}};return e.\u0275fac=function(t){return new(t||e)(h.kc(Zi,8))},e.\u0275prov=Object(h.Wb)({factory:function(){return new e(Object(h.kc)(Zi,8))},token:e,providedIn:"root"}),e})(),ns=(()=>{let e=class{constructor(e,t,n){this.renderer=e,this.elementRef=t,this.ngxLoadingXService=n,this.defaultConfig=this.ngxLoadingXService.getDefaultConfig(),this.blur=this.defaultConfig.bgBlur,this.show=this.defaultConfig.show}ngOnChanges(){if(this.show){const e=`blur(${this.blur}px)`;this.renderer.setStyle(this.elementRef.nativeElement,"-webkit-filter",e),this.renderer.setStyle(this.elementRef.nativeElement,"filter",e)}else{const e="none";this.renderer.setStyle(this.elementRef.nativeElement,"-webkit-filter",e),this.renderer.setStyle(this.elementRef.nativeElement,"filter",e)}}};return e.\u0275fac=function(t){return new(t||e)(h.ac(h.M),h.ac(h.o),h.ac(ts))},e.\u0275dir=h.Vb({type:e,selectors:[["","NgxLoadingXBlur",""]],inputs:{blur:"blur",show:"show"},features:[h.Jb]}),e})(),os=(()=>{let e=class{constructor(e,t){this.domSanitizer=e,this.ngxLoadingXService=t,this.defaultConfig=this.ngxLoadingXService.getDefaultConfig(),this.show=this.defaultConfig.show,this.bgBlur=this.defaultConfig.bgBlur,this.bgColor=this.defaultConfig.bgColor,this.bgOpacity=this.defaultConfig.bgOpacity,this.bgLogoUrl=this.defaultConfig.bgLogoUrl,this.bgLogoUrlPosition=this.defaultConfig.bgLogoUrlPosition,this.bgLogoUrlSize=this.defaultConfig.bgLogoUrlSize,this.spinnerType=this.defaultConfig.spinnerType,this.spinnerSize=this.defaultConfig.spinnerSize,this.spinnerColor=this.defaultConfig.spinnerColor,this.spinnerPosition=this.defaultConfig.spinnerPosition}initializeSpinners(){this.spinnerDivs=Array(es[this.spinnerType].divs).fill(1),this.spinnerClass=es[this.spinnerType].class}determineCenterPositions(){this.bgLogoUrlPosition===Ki.centerCenter&&this.spinnerPosition===Ki.centerCenter&&(this.spinnerTop=this.domSanitizer.bypassSecurityTrustStyle("calc(50% + 88px)"),this.logoTop=this.domSanitizer.bypassSecurityTrustStyle("calc(50% - 88px)"))}ngOnInit(){this.trustedLogoUrl=this.domSanitizer.bypassSecurityTrustResourceUrl(this.bgLogoUrl),this.initializeSpinners(),this.determineCenterPositions()}};return e.\u0275fac=function(t){return new(t||e)(h.ac(Yi.b),h.ac(ts))},e.\u0275cmp=h.Ub({type:e,selectors:[["ngx-loading-x"]],inputs:{show:"show",bgBlur:"bgBlur",bgColor:"bgColor",bgOpacity:"bgOpacity",bgLogoUrl:"bgLogoUrl",bgLogoUrlPosition:"bgLogoUrlPosition",bgLogoUrlSize:"bgLogoUrlSize",spinnerType:"spinnerType",spinnerSize:"spinnerSize",spinnerColor:"spinnerColor",spinnerPosition:"spinnerPosition"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"ngx-overlay"],["class","ngx-loading-x-logo",3,"ngClass","src","width","height","top",4,"ngIf"],[1,"ngx-foreground-spinner",3,"ngClass"],[4,"ngFor","ngForOf"],[1,"ngx-loading-x-logo",3,"ngClass","src"]],template:function(e,t){1&e&&h.cd(0,Gi,6,17,"div",0),2&e&&h.Ac("ngIf",t.show)},directives:[o.t,o.q,o.s],styles:['.ngx-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;z-index:99998!important;cursor:progress;transition:5s ease-out}.ngx-overlay[_ngcontent-%COMP%] > .ngx-foreground-spinner[_ngcontent-%COMP%], .ngx-overlay[_ngcontent-%COMP%] > .ngx-loading-x-logo[_ngcontent-%COMP%]{position:fixed;margin:0}.ngx-background-spinner[_ngcontent-%COMP%]{position:fixed;z-index:99997!important;margin:0;opacity:.6}.ngx-position-absolute[_ngcontent-%COMP%], .ngx-position-absolute[_ngcontent-%COMP%] > .ngx-foreground-spinner[_ngcontent-%COMP%], .ngx-position-absolute[_ngcontent-%COMP%] > .ngx-loading-x-logo[_ngcontent-%COMP%]{position:absolute!important}.ngx-position-absolute.ngx-overlay[_ngcontent-%COMP%]{z-index:99995!important}.ngx-position-absolute.ngx-background-spinner[_ngcontent-%COMP%]{z-index:99994!important}.top-left[_ngcontent-%COMP%]{top:30px;left:30px}.top-center[_ngcontent-%COMP%]{top:30px;left:50%;transform:translateX(-50%)}.top-right[_ngcontent-%COMP%]{top:30px;right:30px}.center-left[_ngcontent-%COMP%]{top:50%;left:30px;transform:translateY(-50%)}.center-center[_ngcontent-%COMP%]{top:50%;left:50%;transform:translate(-50%,-50%)}.center-right[_ngcontent-%COMP%]{top:50%;right:30px;transform:translateY(-50%)}.bottom-left[_ngcontent-%COMP%]{bottom:30px;left:30px}.bottom-center[_ngcontent-%COMP%]{bottom:30px;left:50%;transform:translateX(-50%)}.bottom-right[_ngcontent-%COMP%]{bottom:30px;right:30px}.x-ball-spin[_ngcontent-%COMP%], .x-ball-spin[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;box-sizing:border-box}.x-ball-spin[_ngcontent-%COMP%]{width:100%;height:100%;font-size:0}.x-ball-spin[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-block;float:none;background-color:currentColor;border:0 solid currentColor;position:absolute;top:50%;left:50%;width:25%;height:25%;margin-top:-12.5%;margin-left:-12.5%;border-radius:100%;-webkit-animation:1s ease-in-out infinite ball-spin;animation:1s ease-in-out infinite ball-spin}.x-ball-spin[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(1){top:5%;left:50%;-webkit-animation-delay:-1.125s;animation-delay:-1.125s}.x-ball-spin[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){top:18.1801948466%;left:81.8198051534%;-webkit-animation-delay:-1.25s;animation-delay:-1.25s}.x-ball-spin[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3){top:50%;left:95%;-webkit-animation-delay:-1.375s;animation-delay:-1.375s}.x-ball-spin[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(4){top:81.8198051534%;left:81.8198051534%;-webkit-animation-delay:-1.5s;animation-delay:-1.5s}.x-ball-spin[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(5){top:94.9999999966%;left:50.0000000005%;-webkit-animation-delay:-1.625s;animation-delay:-1.625s}.x-ball-spin[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(6){top:81.8198046966%;left:18.1801949248%;-webkit-animation-delay:-1.75s;animation-delay:-1.75s}.x-ball-spin[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(7){top:49.9999750815%;left:5.0000051215%;-webkit-animation-delay:-1.875s;animation-delay:-1.875s}.x-ball-spin[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(8){top:18.179464974%;left:18.1803700518%;-webkit-animation-delay:-2s;animation-delay:-2s}@-webkit-keyframes ball-spin{0%,100%{opacity:1;transform:scale(1)}20%{opacity:1}80%{opacity:0;transform:scale(0)}}@keyframes ball-spin{0%,100%{opacity:1;transform:scale(1)}20%{opacity:1}80%{opacity:0;transform:scale(0)}}.x-chasing-dots[_ngcontent-%COMP%]{margin:auto;width:100%;height:100%;position:absolute;text-align:center;-webkit-animation:2s linear infinite x-chasingDots-rotate;animation:2s linear infinite x-chasingDots-rotate}.x-chasing-dots[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:60%;height:60%;display:inline-block;position:absolute;top:0;background-color:currentColor;border-radius:100%;-webkit-animation:2s ease-in-out infinite x-chasingDots-bounce;animation:2s ease-in-out infinite x-chasingDots-bounce}.x-chasing-dots[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){top:auto;bottom:0;-webkit-animation-delay:-1s;animation-delay:-1s}@-webkit-keyframes x-chasingDots-rotate{100%{transform:rotate(360deg)}}@keyframes x-chasingDots-rotate{100%{transform:rotate(360deg)}}@-webkit-keyframes x-chasingDots-bounce{0%,100%{transform:scale(0)}50%{transform:scale(1)}}@keyframes x-chasingDots-bounce{0%,100%{transform:scale(0)}50%{transform:scale(1)}}.x-elapsis[_ngcontent-%COMP%]{display:inline-block;position:relative;width:80px;height:80px}.x-elapsis[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;top:33px;width:13px;height:13px;border-radius:50%;background:currentColor;-webkit-animation-timing-function:cubic-bezier(0,1,1,0);animation-timing-function:cubic-bezier(0,1,1,0)}.x-elapsis[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){left:8px;-webkit-animation:.6s infinite lds-ellipsis1;animation:.6s infinite lds-ellipsis1}.x-elapsis[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){left:8px;-webkit-animation:.6s infinite lds-ellipsis2;animation:.6s infinite lds-ellipsis2}.x-elapsis[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){left:32px;-webkit-animation:.6s infinite lds-ellipsis2;animation:.6s infinite lds-ellipsis2}.x-elapsis[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(4){left:56px;-webkit-animation:.6s infinite lds-ellipsis3;animation:.6s infinite lds-ellipsis3}@-webkit-keyframes lds-ellipsis1{0%{transform:scale(0)}100%{transform:scale(1)}}@keyframes lds-ellipsis1{0%{transform:scale(0)}100%{transform:scale(1)}}@-webkit-keyframes lds-ellipsis3{0%{transform:scale(1)}100%{transform:scale(0)}}@keyframes lds-ellipsis3{0%{transform:scale(1)}100%{transform:scale(0)}}@-webkit-keyframes lds-ellipsis2{0%{transform:translate(0,0)}100%{transform:translate(24px,0)}}@keyframes lds-ellipsis2{0%{transform:translate(0,0)}100%{transform:translate(24px,0)}}.circle-spinner[_ngcontent-%COMP%]{color:official;display:inline-block;position:relative;width:80px;height:80px}.circle-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{transform-origin:40px 40px;-webkit-animation:1.2s linear infinite circle-spinner;animation:1.2s linear infinite circle-spinner}.circle-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:after{content:" ";display:block;position:absolute;top:3px;left:37px;width:6px;height:18px;border-radius:20%;background:currentColor}.circle-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){transform:rotate(0);-webkit-animation-delay:-1.1s;animation-delay:-1.1s}.circle-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){transform:rotate(30deg);-webkit-animation-delay:-1s;animation-delay:-1s}.circle-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){transform:rotate(60deg);-webkit-animation-delay:-.9s;animation-delay:-.9s}.circle-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(4){transform:rotate(90deg);-webkit-animation-delay:-.8s;animation-delay:-.8s}.circle-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(5){transform:rotate(120deg);-webkit-animation-delay:-.7s;animation-delay:-.7s}.circle-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(6){transform:rotate(150deg);-webkit-animation-delay:-.6s;animation-delay:-.6s}.circle-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(7){transform:rotate(180deg);-webkit-animation-delay:-.5s;animation-delay:-.5s}.circle-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(8){transform:rotate(210deg);-webkit-animation-delay:-.4s;animation-delay:-.4s}.circle-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(9){transform:rotate(240deg);-webkit-animation-delay:-.3s;animation-delay:-.3s}.circle-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(10){transform:rotate(270deg);-webkit-animation-delay:-.2s;animation-delay:-.2s}.circle-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(11){transform:rotate(300deg);-webkit-animation-delay:-.1s;animation-delay:-.1s}.circle-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(12){transform:rotate(330deg);-webkit-animation-delay:0s;animation-delay:0s}@-webkit-keyframes circle-spinner{0%{opacity:1}100%{opacity:0}}@keyframes circle-spinner{0%{opacity:1}100%{opacity:0}}.sk-three-strings[_ngcontent-%COMP%]{width:100%;height:100%}.sk-three-strings[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:absolute;box-sizing:border-box;width:100%;height:100%;border-radius:50%}.sk-three-strings[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(1){left:0;top:0;-webkit-animation:1s linear infinite sk-threeStrings-rotateOne;animation:1s linear infinite sk-threeStrings-rotateOne;border-bottom:3px solid currentColor}.sk-three-strings[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){right:0;top:0;-webkit-animation:1s linear infinite sk-threeStrings-rotateTwo;animation:1s linear infinite sk-threeStrings-rotateTwo;border-right:3px solid currentColor}.sk-three-strings[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3){right:0;bottom:0;-webkit-animation:1s linear infinite sk-threeStrings-rotateThree;animation:1s linear infinite sk-threeStrings-rotateThree;border-top:3px solid currentColor}@-webkit-keyframes sk-threeStrings-rotateOne{0%{transform:rotateX(35deg) rotateY(-45deg) rotateZ(0)}100%{transform:rotateX(35deg) rotateY(-45deg) rotateZ(360deg)}}@keyframes sk-threeStrings-rotateOne{0%{transform:rotateX(35deg) rotateY(-45deg) rotateZ(0)}100%{transform:rotateX(35deg) rotateY(-45deg) rotateZ(360deg)}}@-webkit-keyframes sk-threeStrings-rotateTwo{0%{transform:rotateX(50deg) rotateY(10deg) rotateZ(0)}100%{transform:rotateX(50deg) rotateY(10deg) rotateZ(360deg)}}@keyframes sk-threeStrings-rotateTwo{0%{transform:rotateX(50deg) rotateY(10deg) rotateZ(0)}100%{transform:rotateX(50deg) rotateY(10deg) rotateZ(360deg)}}@-webkit-keyframes sk-threeStrings-rotateThree{0%{transform:rotateX(35deg) rotateY(55deg) rotateZ(0)}100%{transform:rotateX(35deg) rotateY(55deg) rotateZ(360deg)}}@keyframes sk-threeStrings-rotateThree{0%{transform:rotateX(35deg) rotateY(55deg) rotateZ(0)}100%{transform:rotateX(35deg) rotateY(55deg) rotateZ(360deg)}}.sk-wandering-cubes[_ngcontent-%COMP%]{margin:auto;width:100%;height:100%;position:relative;text-align:center}.sk-wandering-cubes[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{background-color:currentColor;width:25%;height:25%;position:absolute;top:0;left:0;-webkit-animation:1.8s ease-in-out infinite sk-wanderingCubes-cubeMove;animation:1.8s ease-in-out infinite sk-wanderingCubes-cubeMove}.sk-wandering-cubes[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){-webkit-animation-delay:-.9s;animation-delay:-.9s}@-webkit-keyframes sk-wanderingCubes-cubeMove{25%{transform:translateX(290%) rotate(-90deg) scale(.5)}50%{transform:translateX(290%) translateY(290%) rotate(-179deg)}50.1%{transform:translateX(290%) translateY(290%) rotate(-180deg)}75%{transform:translateX(0) translateY(290%) rotate(-270deg) scale(.5)}100%{transform:rotate(-360deg)}}@keyframes sk-wanderingCubes-cubeMove{25%{transform:translateX(290%) rotate(-90deg) scale(.5)}50%{transform:translateX(290%) translateY(290%) rotate(-179deg)}50.1%{transform:translateX(290%) translateY(290%) rotate(-180deg)}75%{transform:translateX(0) translateY(290%) rotate(-270deg) scale(.5)}100%{transform:rotate(-360deg)}}.x-wandering-cubes[_ngcontent-%COMP%]{margin:auto;width:100%;height:100%;position:relative;transform:rotateZ(45deg)}.x-wandering-cubes[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{float:left;width:50%;height:50%;position:relative;transform:scale(1.1)}.x-wandering-cubes[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]::before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background-color:currentColor;-webkit-animation:2.4s linear infinite both sk-foldingCube-angle;animation:2.4s linear infinite both sk-foldingCube-angle;transform-origin:100% 100%}.x-wandering-cubes[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){transform:scale(1.1) rotateZ(90deg)}.x-wandering-cubes[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3){transform:scale(1.1) rotateZ(270deg)}.x-wandering-cubes[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(4){transform:scale(1.1) rotateZ(180deg)}.x-wandering-cubes[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2)::before{-webkit-animation-delay:.3s;animation-delay:.3s}.x-wandering-cubes[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3)::before{-webkit-animation-delay:.9s;animation-delay:.9s}.x-wandering-cubes[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(4)::before{-webkit-animation-delay:.6s;animation-delay:.6s}@-webkit-keyframes sk-foldingCube-angle{0%,10%{transform:perspective(140px) rotateX(-180deg);opacity:0}25%,75%{transform:perspective(140px) rotateX(0);opacity:1}100%,90%{transform:perspective(140px) rotateY(180deg);opacity:0}}@keyframes sk-foldingCube-angle{0%,10%{transform:perspective(140px) rotateX(-180deg);opacity:0}25%,75%{transform:perspective(140px) rotateX(0);opacity:1}100%,90%{transform:perspective(140px) rotateY(180deg);opacity:0}}'],changeDetection:0}),e})();var is;let ss=(()=>{let e=is=class{static forRoot(e){return{ngModule:is,providers:[{provide:Zi,useValue:e}]}}};return e.\u0275mod=h.Yb({type:e}),e.\u0275inj=h.Xb({factory:function(t){return new(t||e)},imports:[[o.c]]}),e})();var cs=n("bSwM");const as=["valuesUsersSelect"],rs=["theLastReferenceUsers"];function ls(e,t){if(1&e&&(h.gc(0,"ng-option",27),h.ed(1),h.fc()),2&e){const e=t.$implicit;h.Ac("value",e.uuid),h.Lb(1),h.fd(e.name)}}function ds(e,t){if(1&e){const e=h.hc();h.gc(0,"div",1),h.gc(1,"div",7),h.gc(2,"p",8),h.gc(3,"ion-label"),h.ed(4),h.tc(5,"translate"),h.fc(),h.fc(),h.gc(6,"ng-select",25),h.oc("ngModelChange",(function(t){return h.Sc(e),h.sc().courseSelect=t}))("change",(function(){return h.Sc(e),h.sc().loadAllUsers(!0,"course")})),h.cd(7,ls,2,2,"ng-option",26),h.fc(),h.fc(),h.fc()}if(2&e){const e=h.sc();h.Lb(4),h.fd(h.uc(5,3,"pages.course.name_course")),h.Lb(2),h.Ac("ngModel",e.courseSelect),h.Lb(1),h.Ac("ngForOf",e.courses)}}function gs(e,t){if(1&e&&(h.gc(0,"ng-option",27),h.ed(1),h.fc()),2&e){const e=t.$implicit;h.Ac("value",e.uuid),h.Lb(1),h.fd(e.description)}}function us(e,t){if(1&e){const e=h.hc();h.gc(0,"div",1),h.gc(1,"div",7),h.gc(2,"p",8),h.gc(3,"ion-label"),h.ed(4),h.tc(5,"translate"),h.fc(),h.fc(),h.gc(6,"ng-select",28),h.oc("ngModelChange",(function(t){return h.Sc(e),h.sc().rolesSelected=t}))("change",(function(){return h.Sc(e),h.sc().loadAllUsers(!0,"roles")})),h.cd(7,gs,2,2,"ng-option",26),h.fc(),h.fc(),h.fc()}if(2&e){const e=h.sc();h.Lb(4),h.fd(h.uc(5,3,"pages.messenger.type_users")),h.Lb(2),h.Ac("ngModel",e.rolesSelected),h.Lb(1),h.Ac("ngForOf",e.roles)}}function ps(e,t){if(1&e){const e=h.hc();h.gc(0,"div"),h.gc(1,"mat-checkbox",29),h.oc("ngModelChange",(function(t){return h.Sc(e),h.sc().all_integrants=t})),h.gc(2,"span",30),h.ed(3),h.tc(4,"translate"),h.fc(),h.fc(),h.fc()}if(2&e){const e=h.sc();h.Lb(1),h.Ac("ngModel",e.all_integrants),h.Lb(2),h.fd(h.uc(4,2,"pages.messenger.all_integrants"))}}function hs(e,t){if(1&e){const e=h.hc();h.gc(0,"button",36),h.oc("click",(function(){return h.Sc(e),h.sc(2).selectAll("users")})),h.ed(1),h.tc(2,"translate"),h.fc(),h.gc(3,"button",36),h.oc("click",(function(){return h.Sc(e),h.sc(2).unselectAll("users")})),h.ed(4),h.tc(5,"translate"),h.fc()}2&e&&(h.Lb(1),h.fd(h.uc(2,2,"buttons.select_all")),h.Lb(3),h.fd(h.uc(5,4,"buttons.disselect_all")))}function fs(e,t){if(1&e&&(h.gc(0,"p",37),h.ed(1),h.fc()),2&e){const e=t.item;h.Lb(1),h.gd(" ",e.rol_name||"----"," ")}}function bs(e,t){1&e&&h.bc(0,"span",null,38)}function ms(e,t){if(1&e&&(h.ed(0),h.cd(1,bs,2,0,"span",10)),2&e){const e=t.item,n=t.index,o=h.sc(2);h.gd("",e.name," "),h.Lb(1),h.Ac("ngIf",n==o.users.length-1)}}function _s(e,t){if(1&e){const e=h.hc();h.gc(0,"ng-select",31,32),h.oc("ngModelChange",(function(t){return h.Sc(e),h.sc().users_select=t}))("search",(function(){h.Sc(e);const t=h.sc();return t.loadAllUsers(!0,t.modeFilterUsers)})),h.tc(2,"translate"),h.cd(3,hs,6,6,"ng-template",33),h.cd(4,fs,2,1,"ng-template",34),h.cd(5,ms,2,2,"ng-template",35),h.fc()}if(2&e){const e=h.sc();h.Ac("items",e.users)("ngModel",e.users_select)("placeholder",h.uc(2,5,"pages.course.select_dest"))("closeOnSelect",!1)("loading",e.usersLoading)}}function vs(e,t){1&e&&h.bc(0,"mat-progress-bar",48)}function ks(e,t){if(1&e&&h.bc(0,"img",49),2&e){const e=h.sc().$implicit;h.Bc("src",e.picture||e.file_url,h.Vc)}}function Cs(e,t){1&e&&h.bc(0,"img",50)}function ys(e,t){if(1&e){const e=h.hc();h.gc(0,"div",51),h.oc("click",(function(){h.Sc(e);const t=h.sc().index;return h.sc(2).removeImage(t)})),h.bc(1,"ion-icon",52),h.fc()}}function xs(e,t){if(1&e&&(h.gc(0,"div",43),h.cd(1,vs,1,0,"mat-progress-bar",44),h.cd(2,ks,1,1,"img",45),h.cd(3,Cs,1,0,"img",46),h.cd(4,ys,2,0,"div",47),h.fc()),2&e){const e=t.$implicit,n=h.sc(2);h.Ac("matTooltip",e.name),h.Lb(1),h.Ac("ngIf",e.uploading),h.Lb(1),h.Ac("ngIf",e.is_image),h.Lb(1),h.Ac("ngIf",!e.is_image),h.Lb(1),h.Ac("ngIf",!n.is_send_message_parent)}}function ws(e,t){if(1&e&&(h.gc(0,"div",39),h.gc(1,"h3",40),h.ed(2),h.tc(3,"translate"),h.fc(),h.gc(4,"div",41),h.cd(5,xs,5,5,"div",42),h.fc(),h.fc()),2&e){const e=h.sc();h.Lb(2),h.fd(h.uc(3,2,"pages.course.upload_image")),h.Lb(3),h.Ac("ngForOf",e.images)}}function Ms(e,t){if(1&e){const e=h.hc();h.gc(0,"div"),h.gc(1,"mat-checkbox",53),h.oc("ngModelChange",(function(t){return h.Sc(e),h.sc().notify_message=t})),h.gc(2,"span",30),h.ed(3),h.tc(4,"translate"),h.fc(),h.fc(),h.fc()}if(2&e){const e=h.sc();h.Lb(1),h.Ac("ngModel",e.notify_message),h.Lb(2),h.fd(h.uc(4,2,"pages.messenger.notify_message"))}}function Os(e,t){if(1&e){const e=h.hc();h.gc(0,"section"),h.gc(1,"mat-checkbox",13),h.oc("ngModelChange",(function(t){return h.Sc(e),h.sc().allow_answer=t})),h.ed(2),h.tc(3,"translate"),h.fc(),h.fc()}if(2&e){const e=h.sc();h.Lb(1),h.Ac("ngModel",e.allow_answer),h.Lb(1),h.fd(h.uc(3,2,"pages.course.allow_answer"))}}function Ps(e,t){if(1&e&&(h.gc(0,"div",54),h.gc(1,"div",55),h.gc(2,"p",8),h.ed(3),h.tc(4,"translate"),h.fc(),h.bc(5,"progress",56),h.gc(6,"p",8),h.ed(7),h.fc(),h.fc(),h.fc()),2&e){const e=h.sc();h.Lb(3),h.fd(h.uc(4,5,"pages.course.upload_files")),h.Lb(2),h.Ac("value",e.file_upload_cant)("max",e.images.length),h.Lb(2),h.hd("",e.file_upload_cant," de ",e.images.length,"")}}let Ss=(()=>{class e{constructor(e,t,n,o,i,s,c,a,l){this.authService=e,this.courseService=t,this.redireccionService=n,this.controlErroresService=o,this.toastService=i,this.messageService=s,this.config=c,this.publicService=a,this.profileService=l,this.max_size_file=r.g,this.usersLoading=!1,this.permissions={},this.rolesSelected=[],this.file_upload_cant=0,this.allow_answer=1,this.is_send_message=!1,this.is_send_message_parent=!1,this.users=[],this.mostrarTodasImagenes=!1,this.cols_img=5,this.userList=[],this.notify_message=!1,this.roles=[],this.parallel_select=[],this.modeFilterUsers="course",this.message="",this.users_select=[],this.images=[],this.subject="",this.institution=0,this.pageUser=1,this.allPagesUser=1,this.courses=[],this.courseSelect=null,this.all_integrants=!1,this.messages=[],this.fieldEmitChange=new h.r,this.totalPagesUsers=1,this.this_page_users=1,this.config.notFoundText="Datos No encontrados",this.config.appendTo="body",this.echo=this.authService.echoPush()}ngOnInit(){this.getModeMessenger()}getModeMessenger(e=0){this.authService.getMyModeSendMessage().subscribe(e=>{this.permissions=e.data,this.permissions.access_mssg_roles&&(this.modeFilterUsers="roles",this.getRoles()),this.permissions.access_mssg_courses&&(this.modeFilterUsers="course",this.getCourses())},t=>{e<4&&this.getModeMessenger(e+1)})}ngAfterViewInit(){setTimeout(()=>{this.intersectionObserver(),this.theLastReferenceUsers.changes.subscribe(e=>{e.last&&this.observer.observe(e.last.nativeElement)})})}intersectionObserver(){this.observer=new IntersectionObserver(e=>{e[0].isIntersecting&&this.totalPagesUsers>=this.this_page_users&&this.loadAllUsers(!1,this.modeFilterUsers)},{root:null,rootMargin:"0px",threshold:.5})}getRoles(){this.publicService.getRoles().subscribe(e=>{this.roles=e.data},e=>{})}sendMessage(){if(!this.message)return void this.toastService.warning("Escriba el mensaje");if(!this.subject)return void this.toastService.warning("Escriba el t\xedtulo mensaje");let e={to:this.users_select,message:this.message,subject:this.subject,data_modes_send:{courses:this.courseSelect?[this.courseSelect]:[],roles:this.rolesSelected},institution_id:this.institution,allow_answer:this.allow_answer,all_integrants:this.all_integrants?"yes":"no",mode_send:this.modeFilterUsers,notify_message:this.notify_message?"yes":"no"};this.is_send_message_parent=!0,this.messageService.send(e,this.echo?this.echo.socketId():"0").subscribe(e=>{this.message="",0==this.images.length?(this.is_send_message_parent=!1,this.is_send_message=!0,this.fieldEmitChange.emit(e.data),this.toastService.success(e.message)):this.uploadFile(e,e.uuid)},e=>{console.log(e),this.controlErroresService.control(e),this.is_send_message_parent=!1})}uploadImageLocal(e){if(e.target.files&&e.target.files[0]){for(const n of e.target.files){if(n.size>r.g){this.toastService.warning(n.name,"El archivo excede el peso establecido de "+r.g/1e6+"mb");continue}var t=new FileReader;let o={file_url:"",file:n,type:n.type,size:n.size,name:n.name,is_image:e.target.files[0].type.indexOf("image")>=0,content_type:e.target.files[0].type||"unknown"};t.onload=e=>{o.file_url=e.target.result},this.images.push(o),t.readAsDataURL(n)}document.querySelector(".file-mm-input").value=""}}getCourses(){this.courseService.courses().subscribe(e=>{this.courses=e.data},e=>{this.controlErroresService.control(e)})}loadUsers(){this.pageUser=1,this.users=[],this.loadAllUsers()}loadAllUsers(e=!0,t="course"){e&&(this.this_page_users=1,this.users=[]),this.usersLoading=!0,this.modeFilterUsers=t,"course"==t?this.courseService.getStudents(this.courseSelect,this.valuesUsersSelect.searchInput.nativeElement.value).subscribe(e=>{this.users=e.data.map(e=>(e.rol_name="Estudiantes",e)),this.users=this.users.concat(e.principals.map(e=>(e.rol_name="Profesor",e))),this.usersLoading=!1},e=>{this.usersLoading=!1,this.controlErroresService.control(e)}):"roles"==t&&this.profileService.getUsersByRole({roles:this.rolesSelected,q:this.valuesUsersSelect.searchInput.nativeElement.value,page:this.this_page_users}).subscribe(e=>{this.usersLoading=!1,this.users=this.users.concat(e.items),this.users=this.deleteRepeatItem(this.users,"id"),this.totalPagesUsers=e.last_page,this.this_page_users++},e=>{this.usersLoading=!1})}deleteRepeatItem(e,t){const n=e.map(e=>[e[t],e]);return[...new Map(n).values()]}selectAll(e){switch(e){case"users":this.users_select=this.users.map(e=>e.uuid)}}unselectAll(e){switch(e){case"users":this.users_select=[]}}uploadFile(e,t){for(const n of this.images)n.file_url=null,this.messageService.uploadFile(Object(r.c)(n),t).subscribe(t=>{n.uploading=!1,this.file_upload_cant++,this.checkUploadPost(e)},t=>{this.file_upload_cant++,this.checkUploadPost(e),this.controlErroresService.control(t)})}checkUploadPost(e){this.file_upload_cant>=this.images.length&&(this.is_send_message_parent=!1,this.is_send_message=!0,this.toastService.success(e.message),this.fieldEmitChange.emit(e.data))}removeImage(e){e<0||this.images.splice(e,1)}triggerButtonFileOpen(){$("#button-file-message-upload").click()}}return e.\u0275fac=function(t){return new(t||e)(h.ac(wi.a),h.ac(To.a),h.ac(u.a),h.ac(l.a),h.ac(Cn.b),h.ac(Oi),h.ac(Se.b),h.ac(ke.a),h.ac(ve.a))},e.\u0275cmp=h.Ub({type:e,selectors:[["new-message"]],viewQuery:function(e,t){var n;1&e&&(h.ld(as,!0),h.ld(rs,!0,h.o)),2&e&&(h.Nc(n=h.pc())&&(t.valuesUsersSelect=n.first),h.Nc(n=h.pc())&&(t.theLastReferenceUsers=n))},outputs:{fieldEmitChange:"fieldEmitChange"},decls:35,vars:19,consts:[[1,"card"],[1,"card-body"],[1,"pb-2"],[1,"card-header"],[1,"text-center","bold"],["class"," card-body",4,"ngIf"],[1,"card","p-3"],[1,"col-12","flex","flex-center","flex-y"],[1,"text-center"],["for",""],[4,"ngIf"],["bindValue","uuid","groupBy","rol_name","bindLabel","name","multiple","true",3,"items","ngModel","placeholder","closeOnSelect","loading","ngModelChange","search",4,"ngIf"],["type","text","placeholder","Asunto",1,"form-control",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],["class","border-2 border-dashed dark:border-dark-5 rounded-md pt-4","style","margin-top: 10px;",4,"ngIf"],[1,"card-footer"],[1,"form-group"],[1,"input-group-append"],["type","submit","color","success","size","small",1,"mr-2",3,"disabled","click"],["name","send-outline"],["size","small",3,"disabled","click"],["name","cloud-upload-outline"],["id","button-file-message-upload","type","file","multiple","",1,"hidden","file-mm-input",3,"change"],[3,"show"],["class","bck_fileUpload",4,"ngIf"],[3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["multiple","true",3,"ngModel","ngModelChange","change"],["color","primary","name","all_integrants",3,"ngModel","ngModelChange"],[1,"ml-2"],["bindValue","uuid","groupBy","rol_name","bindLabel","name","multiple","true",3,"items","ngModel","placeholder","closeOnSelect","loading","ngModelChange","search"],["valuesUsersSelect",""],["ng-header-tmp",""],["ng-optgroup-tmp",""],["ng-option-tmp",""],[1,"btn","btn-sm","btn-secondary",3,"click"],[2,"padding","5px","background-color","rgba(0, 116, 224, 0.712)","color","#fff"],["theLastReferenceUsers",""],[1,"border-2","border-dashed","dark:border-dark-5","rounded-md","pt-4",2,"margin-top","10px"],[2,"margin","0","padding-left","20px"],[1,"flex","flex-wrap","px-4"],["class","w-24 h-24 relative image-fit mb-5 mr-5 cursor-pointer zoom-in","tooltip","Call","navTooltip","",3,"matTooltip",4,"ngFor","ngForOf"],["tooltip","Call","navTooltip","",1,"w-24","h-24","relative","image-fit","mb-5","mr-5","cursor-pointer","zoom-in",3,"matTooltip"],["mode","indeterminate",4,"ngIf"],["class","rounded-md","alt","Imagen",3,"src",4,"ngIf"],["class","rounded-md","alt","File","src","/assets/img/document-file-icon.png",4,"ngIf"],["title","Remove this image?","class"," w-5 h-5 flex items-center justify-center absolute rounded-full text-white bg-theme-6 right-0 top-0 -mr-2 -mt-2",3,"click",4,"ngIf"],["mode","indeterminate"],["alt","Imagen",1,"rounded-md",3,"src"],["alt","File","src","/assets/img/document-file-icon.png",1,"rounded-md"],["title","Remove this image?",1,"w-5","h-5","flex","items-center","justify-center","absolute","rounded-full","text-white","bg-theme-6","right-0","top-0","-mr-2","-mt-2",3,"click"],["name","trash-outline"],["color","primary","name","notify_message",3,"ngModel","ngModelChange"],[1,"bck_fileUpload"],[1,"fileUpload"],[3,"value","max"]],template:function(e,t){1&e&&(h.gc(0,"div",0),h.gc(1,"div",1),h.gc(2,"div",0),h.gc(3,"div",2),h.gc(4,"div",3),h.gc(5,"h3",4),h.ed(6),h.tc(7,"translate"),h.fc(),h.fc(),h.cd(8,ds,8,5,"div",5),h.cd(9,us,8,5,"div",5),h.fc(),h.fc(),h.gc(10,"div",6),h.gc(11,"div",2),h.gc(12,"div",7),h.gc(13,"p",8),h.gc(14,"label",9),h.ed(15),h.tc(16,"translate"),h.fc(),h.fc(),h.cd(17,ps,5,4,"div",10),h.cd(18,_s,6,7,"ng-select",11),h.fc(),h.fc(),h.gc(19,"input",12),h.oc("ngModelChange",(function(e){return t.subject=e})),h.fc(),h.gc(20,"ckeditor",13),h.oc("ngModelChange",(function(e){return t.message=e})),h.fc(),h.cd(21,ws,6,4,"div",14),h.fc(),h.fc(),h.gc(22,"div",15),h.cd(23,Ms,5,4,"div",10),h.gc(24,"div",16),h.cd(25,Os,4,4,"section",10),h.gc(26,"div",17),h.gc(27,"ion-button",18),h.oc("click",(function(){return t.sendMessage()})),h.ed(28,"Enviar | "),h.bc(29,"ion-icon",19),h.fc(),h.gc(30,"ion-button",20),h.oc("click",(function(){return t.triggerButtonFileOpen()})),h.bc(31,"ion-icon",21),h.gc(32,"input",22),h.oc("change",(function(e){return t.uploadImageLocal(e)})),h.fc(),h.fc(),h.fc(),h.fc(),h.fc(),h.fc(),h.bc(33,"ngx-loading-x",23),h.cd(34,Ps,8,7,"div",24)),2&e&&(h.Lb(6),h.fd(h.uc(7,15,"buttons.new_message")),h.Lb(2),h.Ac("ngIf",t.permissions.access_mssg_courses),h.Lb(1),h.Ac("ngIf",t.permissions.access_mssg_roles),h.Lb(6),h.fd(h.uc(16,17,"pages.course.integrants")),h.Lb(2),h.Ac("ngIf",t.permissions.access_mssg_sendmass),h.Lb(1),h.Ac("ngIf",!t.all_integrants),h.Lb(1),h.Ac("ngModel",t.subject),h.Lb(1),h.Ac("ngModel",t.message),h.Lb(1),h.Ac("ngIf",t.images.length>0),h.Lb(2),h.Ac("ngIf",t.permissions.access_mssg_notify),h.Lb(2),h.Ac("ngIf",t.permissions.response_option),h.Lb(2),h.Ac("disabled",t.is_send_message_parent),h.Lb(3),h.Ac("disabled",t.is_send_message_parent),h.Lb(3),h.Ac("show",t.is_send_message_parent),h.Lb(1),h.Ac("ngIf",t.file_upload_cant<t.images.length&&t.is_send_message))},directives:[o.t,i.c,i.r,i.u,Xe.a,s.k,s.C,os,s.N,Se.a,o.s,Se.o,cs.a,Se.h,Se.e,Se.d,v.a,Pe.a],pipes:[f.d],styles:["input[type=file][_ngcontent-%COMP%]{display:none}.custom-image[_ngcontent-%COMP%]{cursor:pointer;position:absolute;top:10px;right:10px}.container-input-file[_ngcontent-%COMP%]{margin:2rem 0}.icon[_ngcontent-%COMP%]{background:#489eff;color:#fff;width:40px;height:40px;border-radius:50%;cursor:pointer;padding:10px}.blur-pic-letter[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{filter:blur(5px)}.blur-pic-letter[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{z-index:100}.grid-template-gallery[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr)}@media (min-width:750px){.grid-template-gallery[_ngcontent-%COMP%]{grid-template-columns:repeat(6,1fr)}}@media (min-width:900px){.grid-template-gallery[_ngcontent-%COMP%]{grid-template-columns:repeat(8,1fr)}}.centrado-absoluto[_ngcontent-%COMP%]{left:50%;top:50%;transform:translate(-50%,-50%);-webkit-transform:translate(-50%,-50%)}.absolute[_ngcontent-%COMP%]{position:absolute}.icon-size-show-pres[_ngcontent-%COMP%]{font-size:5em}.text-more-files[_ngcontent-%COMP%]{background:#fff;color:#00f;padding:10px;border-radius:5px}.btn-r-t-rw[_ngcontent-%COMP%]{position:absolute;right:5px;top:5px}.color-danger[_ngcontent-%COMP%]{color:#a80000}.color-info[_ngcontent-%COMP%]{color:#0065a8}.name-file-show[_ngcontent-%COMP%]{background:rgba(96,96,96,.5098039215686274);color:#fff;width:100%;position:absolute;bottom:0;display:none}"]}),e})();function Ls(e,t){if(1&e&&(h.gc(0,"span",19),h.ed(1),h.fc()),2&e){const e=h.sc(2).$implicit;h.Lb(1),h.hd(" ",e.last_names," ",e.name,"")}}function As(e,t){if(1&e){const e=h.hc();h.gc(0,"strong",20),h.oc("click",(function(){h.Sc(e);const t=h.sc(3);return t.showAllUsers=!t.showAllUsers})),h.ed(1),h.fc()}if(2&e){const e=h.sc(3);h.Lb(1),h.gd(" y ",e.users.length-6," m\xe1s")}}function Is(e,t){1&e&&(h.gc(0,"span"),h.ed(1,";"),h.fc())}function Ts(e,t){if(1&e&&(h.gc(0,"span"),h.cd(1,Ls,2,2,"span",17),h.cd(2,As,2,1,"strong",18),h.cd(3,Is,2,0,"span",16),h.fc()),2&e){const e=h.sc().index,t=h.sc();h.Lb(1),h.Ac("ngIf",e<5||t.showAllUsers),h.Lb(1),h.Ac("ngIf",5==e&&0==t.showAllUsers),h.Lb(1),h.Ac("ngIf",t.users.length>e+1)}}function zs(e,t){if(1&e&&(h.gc(0,"span"),h.cd(1,Ts,4,3,"span",16),h.fc()),2&e){const e=t.index,n=h.sc();h.Lb(1),h.Ac("ngIf",e<=5||n.showAllUsers)}}function Es(e,t){1&e&&h.bc(0,"mat-progress-bar",30)}function Rs(e,t){if(1&e&&h.bc(0,"img",31),2&e){const e=h.sc().$implicit;h.Bc("src",e.picture||e.file_url,h.Vc)}}function Fs(e,t){1&e&&h.bc(0,"img",32)}function Bs(e,t){if(1&e){const e=h.hc();h.gc(0,"div",33),h.oc("click",(function(){h.Sc(e);const t=h.sc().index;return h.sc(2).tashImage(t)})),h.bc(1,"ion-icon",34),h.fc()}}function js(e,t){if(1&e&&(h.gc(0,"div",25),h.cd(1,Es,1,0,"mat-progress-bar",26),h.cd(2,Rs,1,1,"img",27),h.cd(3,Fs,1,0,"img",28),h.cd(4,Bs,2,0,"div",29),h.fc()),2&e){const e=t.$implicit,n=h.sc(2);h.Ac("matTooltip",e.name),h.Lb(1),h.Ac("ngIf",e.uploading),h.Lb(1),h.Ac("ngIf",e.is_image),h.Lb(1),h.Ac("ngIf",!e.is_image),h.Lb(1),h.Ac("ngIf",!n.is_send_message_parent)}}function Ds(e,t){if(1&e&&(h.gc(0,"div",21),h.gc(1,"h3",22),h.ed(2),h.tc(3,"translate"),h.fc(),h.gc(4,"div",23),h.cd(5,js,5,5,"div",24),h.fc(),h.fc()),2&e){const e=h.sc();h.Lb(2),h.fd(h.uc(3,2,"pages.course.upload_image")),h.Lb(3),h.Ac("ngForOf",e.images)}}function Us(e,t){if(1&e&&(h.gc(0,"div",35),h.gc(1,"div",36),h.gc(2,"p",37),h.ed(3,"Subiendo Archivos"),h.fc(),h.bc(4,"progress",38),h.gc(5,"p",37),h.ed(6),h.fc(),h.fc(),h.fc()),2&e){const e=h.sc();h.Lb(4),h.Ac("value",e.file_upload_cant)("max",e.images.length),h.Lb(2),h.hd("",e.file_upload_cant," de ",e.images.length,"")}}let $s=(()=>{class e{constructor(e,t,n,o,i){this.messageService=e,this.controlErroresService=t,this.toastService=n,this.authService=o,this.redireccionService=i,this.images=[],this.cols_img=5,this.valueResponse=new h.r,this.users=[],this.showAllUsers=!1,this.allow_answer=0,this.message="",this.is_send_message_parent=!1,this.is_send_message=!1,this.response={mode:"one"},this.id=0,this.fieldEmitChange=new h.r,this.file_upload_cant=0,this.echo=this.authService.echoPush()}ngOnInit(){}uploadImageLocal(e){if(e.target.files&&e.target.files[0]){for(const n of e.target.files){if(n.size>r.g){this.toastService.warning(n.name,"El archivo excede el peso establecido de "+r.g/1e6+"mb");continue}var t=new FileReader;let e={file_url:"",file:n,type:n.type,size:n.size,name:n.name};t.onload=t=>{e.file_url=t.target.result},this.images.push(e),t.readAsDataURL(n)}document.querySelector(".file-mm-input").value=""}}tashImage(e){this.images.splice(e,1)}uploadFile(e,t){for(const n of this.images)n.file_url=null,this.messageService.uploadFile(Object(r.c)(n),t).subscribe(t=>{n.uploading=!1,this.file_upload_cant++,this.checkUploadPost(e)},t=>{this.file_upload_cant++,this.checkUploadPost(e),this.controlErroresService.control(t)})}checkUploadPost(e){this.file_upload_cant>=this.images.length&&(this.is_send_message_parent=!1,this.is_send_message=!0,this.toastService.success(e.message),this.fieldEmitChange.emit(e.data),this.response.mode="",this.valueResponse.emit())}sendMessage(){if(!this.message)return void this.toastService.warning("Escriba el mensaje");let e={to:this.users.map(e=>e.uuid),mode:this.response.mode,parent_id:this.id,message:this.message,allow_answer:this.allow_answer};this.is_send_message_parent=!0,this.messageService.response(e,this.echo?this.echo.socketId():0).subscribe(e=>{0==this.images.length?(this.is_send_message_parent=!1,this.is_send_message=!0,this.fieldEmitChange.emit(e.data),this.toastService.success(e.message),this.response.mode="",this.valueResponse.emit()):this.uploadFile(e,e.uuid)},e=>{this.controlErroresService.control(e),this.is_send_message_parent=!1})}triggerButtonFileOpen(){$("#button-file-message-upload").click()}}return e.\u0275fac=function(t){return new(t||e)(h.ac(Oi),h.ac(l.a),h.ac(Cn.b),h.ac(wi.a),h.ac(u.a))},e.\u0275cmp=h.Ub({type:e,selectors:[["response-message"]],inputs:{users:"users",showAllUsers:"showAllUsers",response:"response",id:"id"},outputs:{valueResponse:"valueResponse",fieldEmitChange:"fieldEmitChange"},decls:22,vars:8,consts:[[1,"p-0","m-0"],[4,"ngFor","ngForOf"],[3,"ngModel","ngModelChange"],["class","border-2 border-dashed dark:border-dark-5 rounded-md pt-4","style","margin-top: 10px;",4,"ngIf"],[1,"form-group"],[1,"mt-2"],[1,"input-group-append","mt-2"],["type","submit","color","success","size","small",1,"mr-2",3,"disabled","click"],["name","send-outline"],["size","small",3,"disabled","click"],["name","cloud-upload-outline"],["id","button-file-message-upload","type","file","multiple","",1,"hidden","file-mm-input",3,"change"],["matTooltip","No responder","size","small","color","danger",1,"mr-2","ml-2",3,"click"],["name","close-outline"],[3,"show"],["class","bck_fileUpload",4,"ngIf"],[4,"ngIf"],["class","text-muted",4,"ngIf"],["class","c-pointer",3,"click",4,"ngIf"],[1,"text-muted"],[1,"c-pointer",3,"click"],[1,"border-2","border-dashed","dark:border-dark-5","rounded-md","pt-4",2,"margin-top","10px"],[2,"margin","0","padding-left","20px"],[1,"flex","flex-wrap","px-4"],["class","w-24 h-24 relative image-fit mb-5 mr-5 cursor-pointer zoom-in","tooltip","Call","navTooltip","",3,"matTooltip",4,"ngFor","ngForOf"],["tooltip","Call","navTooltip","",1,"w-24","h-24","relative","image-fit","mb-5","mr-5","cursor-pointer","zoom-in",3,"matTooltip"],["mode","indeterminate",4,"ngIf"],["class","rounded-md","alt","Imagen",3,"src",4,"ngIf"],["class","rounded-md","alt","File","src","/assets/img/document-file-icon.png",4,"ngIf"],["title","Remove this image?","class"," w-5 h-5 flex items-center justify-center absolute rounded-full text-white bg-theme-6 right-0 top-0 -mr-2 -mt-2",3,"click",4,"ngIf"],["mode","indeterminate"],["alt","Imagen",1,"rounded-md",3,"src"],["alt","File","src","/assets/img/document-file-icon.png",1,"rounded-md"],["title","Remove this image?",1,"w-5","h-5","flex","items-center","justify-center","absolute","rounded-full","text-white","bg-theme-6","right-0","top-0","-mr-2","-mt-2",3,"click"],["name","trash-outline"],[1,"bck_fileUpload"],[1,"fileUpload"],[1,"text-center"],[3,"value","max"]],template:function(e,t){1&e&&(h.gc(0,"p",0),h.gc(1,"small"),h.gc(2,"strong"),h.ed(3,"Para: "),h.fc(),h.cd(4,zs,2,1,"span",1),h.fc(),h.fc(),h.gc(5,"ckeditor",2),h.oc("ngModelChange",(function(e){return t.message=e})),h.fc(),h.cd(6,Ds,6,4,"div",3),h.gc(7,"div",4),h.gc(8,"section",5),h.gc(9,"mat-checkbox",2),h.oc("ngModelChange",(function(e){return t.allow_answer=e})),h.ed(10,"Se permite responder este mensaje"),h.fc(),h.fc(),h.gc(11,"div",6),h.gc(12,"ion-button",7),h.oc("click",(function(){return t.sendMessage()})),h.ed(13,"Enviar | "),h.bc(14,"ion-icon",8),h.fc(),h.gc(15,"ion-button",9),h.oc("click",(function(){return t.triggerButtonFileOpen()})),h.bc(16,"ion-icon",10),h.gc(17,"input",11),h.oc("change",(function(e){return t.uploadImageLocal(e)})),h.fc(),h.fc(),h.gc(18,"ion-button",12),h.oc("click",(function(){return t.response.mode="",t.valueResponse.emit("Bienvenido!!!")})),h.bc(19,"ion-icon",13),h.fc(),h.fc(),h.fc(),h.bc(20,"ngx-loading-x",14),h.cd(21,Us,7,4,"div",15)),2&e&&(h.Lb(4),h.Ac("ngForOf",t.users),h.Lb(1),h.Ac("ngModel",t.message),h.Lb(1),h.Ac("ngIf",t.images.length>0),h.Lb(3),h.Ac("ngModel",t.allow_answer),h.Lb(3),h.Ac("disabled",t.is_send_message_parent),h.Lb(3),h.Ac("disabled",t.is_send_message_parent),h.Lb(5),h.Ac("show",t.is_send_message_parent),h.Lb(1),h.Ac("ngIf",t.file_upload_cant<t.images.length&&t.is_send_message))},directives:[o.s,Xe.a,i.r,i.u,o.t,cs.a,s.k,s.C,v.a,os,Pe.a],pipes:[f.d],styles:['@charset "UTF-8";input[type=file][_ngcontent-%COMP%]{display:none}.custom-image[_ngcontent-%COMP%]{cursor:pointer;position:absolute;top:10px;right:10px}.container-input-file[_ngcontent-%COMP%]{margin:2rem 0}.icon[_ngcontent-%COMP%]{background:#489eff;color:#fff;width:40px;height:40px;border-radius:50%;cursor:pointer;padding:10px}.blur-pic-letter[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{filter:blur(5px)}.blur-pic-letter[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{z-index:100}.grid-template-gallery[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr)}@media (min-width:750px){.grid-template-gallery[_ngcontent-%COMP%]{grid-template-columns:repeat(5,1fr)}}@media (min-width:900px){.grid-template-gallery[_ngcontent-%COMP%]{grid-template-columns:repeat(6,1fr)}}.centrado-absoluto[_ngcontent-%COMP%]{left:50%;top:50%;transform:translate(-50%,-50%);-webkit-transform:translate(-50%,-50%)}.absolute[_ngcontent-%COMP%]{position:absolute}.icon-size-show-pres[_ngcontent-%COMP%]{font-size:5em}.text-more-files[_ngcontent-%COMP%]{background:#fff;color:#00f;padding:10px;border-radius:5px}.btn-r-t-rw[_ngcontent-%COMP%]{position:absolute;right:5px;top:5px}.color-danger[_ngcontent-%COMP%]{color:#a80000}.color-info[_ngcontent-%COMP%]{color:#0065a8}.name-file-show[_ngcontent-%COMP%]{background:rgba(96,96,96,.5098039215686274);color:#fff;width:100%;position:absolute;bottom:0;display:none}.container-lw-img[_ngcontent-%COMP%]{overflow:hidden;transition:padding-bottom 1s}.container-lw-img[_ngcontent-%COMP%]:hover{padding-bottom:40px}.container-lw-img[_ngcontent-%COMP%]:hover > .name-file-show[_ngcontent-%COMP%]{display:block}.bck_fileUpload[_ngcontent-%COMP%]{background:rgba(0,0,0,.4);z-index:10000;top:0;width:100%;height:100%;position:fixed}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]{position:fixed;z-index:19000;top:25%;margin:5% auto;left:0;right:0;box-shadow:0 0 2px rgba(0,0,0,.3);background-color:#eef2f6;width:300px;padding:30px}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:18px;font-weight:400;margin:20px 0 5px;padding:0}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]   progress[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:0;width:100%;height:15px;color:#51aded;background-color:#ccc;border-radius:10px}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]   progress[_ngcontent-%COMP%]::-moz-progress-bar{background-color:#51aded;border-radius:10px}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]   progress[_ngcontent-%COMP%]::-webkit-progress-bar{background-color:#ccc;border-radius:10px}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]   progress[_ngcontent-%COMP%]::-webkit-progress-value{position:relative;background-color:#51aded;border-radius:10px}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:80%;padding:0;margin:0;text-align:center}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]   .fileElem[_ngcontent-%COMP%]{width:300px;position:absolute;top:30px;left:30px;z-index:1;height:50px;opacity:0;cursor:pointer}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]   .fileElem[_ngcontent-%COMP%]:focus{outline:none}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]   .fileSelect[_ngcontent-%COMP%]{display:inline-block;text-align:left;padding-left:110px;width:100%;height:50px;background-color:#51aded;border-radius:3px;border-bottom:3px solid rgba(0,0,0,.1);position:relative;font-size:20px;line-height:50px;color:#fff}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]   .fileSelect[_ngcontent-%COMP%]:before{font-family:Entypo;content:"\ue711";position:absolute;top:0;left:80px}']}),e})();function Ns(e,t){if(1&e&&(h.gc(0,"div",12),h.gc(1,"h3",13),h.ed(2),h.fc(),h.fc()),2&e){const e=h.sc();h.Lb(2),h.fd(e.message.message.subject)}}function qs(e,t){if(1&e&&(h.gc(0,"span",16),h.ed(1),h.fc()),2&e){const e=h.sc(2).$implicit;h.Ac("matTooltip",e.is_read?"Le\xeddo":"Sin leer")("ngClass",e.is_read?"bck-ss-d":""),h.Lb(1),h.hd(" ",e.last_names," ",e.name,"")}}function Hs(e,t){if(1&e){const e=h.hc();h.gc(0,"strong",17),h.oc("click",(function(){h.Sc(e);const t=h.sc(3);return t.showAllUsers=!t.showAllUsers})),h.ed(1),h.fc()}if(2&e){const e=h.sc(3);h.Lb(1),h.gd(" y ",e.message.message.users.length-6," m\xe1s")}}function Vs(e,t){1&e&&(h.gc(0,"span"),h.ed(1,";"),h.fc())}function Ys(e,t){if(1&e&&(h.gc(0,"span"),h.cd(1,qs,2,4,"span",14),h.cd(2,Hs,2,1,"strong",15),h.cd(3,Vs,2,0,"span",8),h.fc()),2&e){const e=h.sc().index,t=h.sc();h.Lb(1),h.Ac("ngIf",e<5||t.showAllUsers),h.Lb(1),h.Ac("ngIf",5==e&&0==t.showAllUsers),h.Lb(1),h.Ac("ngIf",t.message.message.users.length>e+1)}}function Xs(e,t){if(1&e&&(h.gc(0,"span"),h.cd(1,Ys,4,3,"span",8),h.fc()),2&e){const e=t.index,n=h.sc();h.Lb(1),h.Ac("ngIf",e<=5||n.showAllUsers)}}function Qs(e,t){if(1&e&&(h.gc(0,"div"),h.gc(1,"p",18),h.ed(2),h.fc(),h.fc()),2&e){const e=h.sc();h.Lb(2),h.fd(e.message.details?e.message.details:"")}}function Gs(e,t){1&e&&h.bc(0,"i",24)}function Ws(e,t){1&e&&h.bc(0,"i",25)}function Ks(e,t){1&e&&h.bc(0,"i",26)}function Zs(e,t){if(1&e&&(h.gc(0,"a",19),h.cd(1,Gs,1,0,"i",20),h.cd(2,Ws,1,0,"i",21),h.cd(3,Ks,1,0,"i",22),h.gc(4,"p",23),h.ed(5),h.fc(),h.fc()),2&e){const e=t.$implicit;h.Ac("href",e.file_path,h.Vc),h.Lb(1),h.Ac("ngIf",e.content_type.indexOf("image")>=0),h.Lb(1),h.Ac("ngIf","application/pdf"==e.content_type),h.Lb(1),h.Ac("ngIf","application/pdf"!=e.content_type&&e.content_type.indexOf("image")<0),h.Lb(2),h.fd(e.name)}}function Js(e,t){if(1&e){const e=h.hc();h.gc(0,"div",29),h.gc(1,"div",30),h.gc(2,"button",31),h.oc("click",(function(){return h.Sc(e),h.sc(2).responseMode.mode="one"})),h.bc(3,"i",32),h.ed(4," Responder"),h.fc(),h.gc(5,"button",31),h.oc("click",(function(){return h.Sc(e),h.sc(2).responseMode.mode="all"})),h.bc(6,"i",33),h.ed(7," Responder a todos"),h.fc(),h.fc(),h.fc()}}const ec=function(e){return[e]};function tc(e,t){if(1&e){const e=h.hc();h.gc(0,"div",29),h.gc(1,"response-message",34),h.oc("fieldEmitChange",(function(t){return h.Sc(e),h.sc(2).recibeMessage(t)}))("valueResponse",(function(){return h.Sc(e),h.sc(2).responseMode.mode=""})),h.fc(),h.fc()}if(2&e){const e=h.sc(2);h.Lb(1),h.Ac("mode",e.responseMode)("id",e.message.message.id)("users","all"==e.responseMode.mode?e.message.message.users:h.Fc(4,ec,e.message.send))("id",e.parent_id)}}function nc(e,t){if(1&e&&(h.gc(0,"div",27),h.cd(1,Js,8,0,"div",28),h.cd(2,tc,2,6,"div",28),h.fc()),2&e){const e=h.sc();h.Lb(1),h.Ac("ngIf",!e.responseMode.mode),h.Lb(1),h.Ac("ngIf",e.responseMode.mode)}}let oc=(()=>{class e{constructor(){this.message=null,this.images=[],this.parent_id=null,this.headShow=!0,this.bottomShow=!0,this.moment=A,this.rsFieldEmitChange=new h.r,this.responseMode={mode:""}}ngOnInit(){}recibeMessage(e){this.rsFieldEmitChange.emit(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=h.Ub({type:e,selectors:[["show-one-message"]],inputs:{message:"message",images:"images",parent_id:"parent_id",headShow:"headShow",bottomShow:"bottomShow"},outputs:{rsFieldEmitChange:"rsFieldEmitChange"},decls:19,vars:9,consts:[[1,"card","mt-3"],["class","card-header",4,"ngIf"],[1,"card-body"],[1,"mb-0","text-muted"],[1,"p-0","m-0"],[4,"ngFor","ngForOf"],[1,"mt-3","mb-3"],[3,"innerHTML"],[4,"ngIf"],[1,"grid-template-gallery"],["target","_blank","class","row flex flex-center container-lw-img card c-pointer ml-2 mr-2","style","flex-direction: row;",3,"href",4,"ngFor","ngForOf"],["class","card-footer","style","background: #fff;",4,"ngIf"],[1,"card-header"],[1,"card-title","mb-0",2,"display","inline-block"],["class","text-muted c-pointer","matTooltipPosition","above",3,"matTooltip","ngClass",4,"ngIf"],["class","c-pointer",3,"click",4,"ngIf"],["matTooltipPosition","above",1,"text-muted","c-pointer",3,"matTooltip","ngClass"],[1,"c-pointer",3,"click"],[1,"text-muted",2,"border","1px solid #c5c5c5","padding","5px","border-radius","5px"],["target","_blank",1,"row","flex","flex-center","container-lw-img","card","c-pointer","ml-2","mr-2",2,"flex-direction","row",3,"href"],["class","m-0 col-3 color-warning far fa-images icon-size-show-pres text-center",4,"ngIf"],["class","m-0 col-3 color-danger fas fa-file-pdf icon-size-show-pres text-center",4,"ngIf"],["class","m-0 col-3 color-info far fa-file-alt icon-size-show-pres text-center",4,"ngIf"],[1,"name-file-show","col-9","m-0"],[1,"m-0","col-3","color-warning","far","fa-images","icon-size-show-pres","text-center"],[1,"m-0","col-3","color-danger","fas","fa-file-pdf","icon-size-show-pres","text-center"],[1,"m-0","col-3","color-info","far","fa-file-alt","icon-size-show-pres","text-center"],[1,"card-footer",2,"background","#fff"],["class","rounded-lg",4,"ngIf"],[1,"rounded-lg"],[1,"col-12","mb-2"],[1,"btn","btn--principal","mr-2",3,"click"],[1,"fas","fa-reply"],[1,"fas","fa-reply-all"],[3,"mode","id","users","fieldEmitChange","valueResponse"]],template:function(e,t){1&e&&(h.gc(0,"div",0),h.cd(1,Ns,3,1,"div",1),h.gc(2,"div",2),h.gc(3,"h3",3),h.ed(4),h.fc(),h.gc(5,"p",4),h.gc(6,"small"),h.ed(7),h.fc(),h.fc(),h.gc(8,"p",4),h.gc(9,"small"),h.gc(10,"strong"),h.ed(11,"Para: "),h.fc(),h.cd(12,Xs,2,1,"span",5),h.fc(),h.fc(),h.gc(13,"div",6),h.bc(14,"p",7),h.fc(),h.cd(15,Qs,3,1,"div",8),h.gc(16,"div",9),h.cd(17,Zs,6,5,"a",10),h.fc(),h.fc(),h.cd(18,nc,3,2,"div",11),h.fc()),2&e&&(h.Lb(1),h.Ac("ngIf",t.headShow),h.Lb(3),h.hd("",t.message.send?(t.message.send.last_names||" ")+" "+(t.message.send.name||""):"-","<",t.message.send.email,"> "),h.Lb(3),h.fd(t.message.date_created),h.Lb(5),h.Ac("ngForOf",t.message.message.users),h.Lb(2),h.Ac("innerHTML",t.message.message.message,h.Tc),h.Lb(1),h.Ac("ngIf",t.message.details),h.Lb(2),h.Ac("ngForOf",t.images),h.Lb(1),h.Ac("ngIf",t.bottomShow&&t.message.message.allow_answer))},directives:[o.t,o.s,v.a,o.q,$s],styles:['@charset "UTF-8";input[type=file][_ngcontent-%COMP%]{display:none}.custom-image[_ngcontent-%COMP%]{cursor:pointer;position:absolute;top:10px;right:10px}.container-input-file[_ngcontent-%COMP%]{margin:2rem 0}.icon[_ngcontent-%COMP%]{background:#489eff;color:#fff;width:40px;height:40px;border-radius:50%;cursor:pointer;padding:10px}.blur-pic-letter[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{filter:blur(5px)}.blur-pic-letter[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{z-index:100}.grid-template-gallery[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr)}@media (min-width:950px){.grid-template-gallery[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media (min-width:1000px){.grid-template-gallery[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)}}.centrado-absoluto[_ngcontent-%COMP%]{left:50%;top:50%;transform:translate(-50%,-50%);-webkit-transform:translate(-50%,-50%)}.absolute[_ngcontent-%COMP%]{position:absolute}.icon-size-show-pres[_ngcontent-%COMP%]{font-size:40px}.text-more-files[_ngcontent-%COMP%]{background:#fff;color:#00f;padding:10px;border-radius:5px}.btn-r-t-rw[_ngcontent-%COMP%]{position:absolute;right:5px;top:5px}.color-danger[_ngcontent-%COMP%]{color:#a80000}.color-info[_ngcontent-%COMP%]{color:#0065a8}.color-warning[_ngcontent-%COMP%]{color:#a84300}.container-lw-img[_ngcontent-%COMP%]{overflow:hidden;transition:padding-bottom 1s;padding:10px;cursor:pointer}.bck_fileUpload[_ngcontent-%COMP%]{background:rgba(0,0,0,.4);z-index:10000;top:0;width:100%;height:100%;position:fixed}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]{position:fixed;z-index:19000;top:25%;margin:5% auto;left:0;right:0;box-shadow:0 0 2px rgba(0,0,0,.3);background-color:#eef2f6;width:300px;padding:30px}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:18px;font-weight:400;margin:20px 0 5px;padding:0}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]   progress[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:0;width:100%;height:15px;color:#51aded;background-color:#ccc;border-radius:10px}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]   progress[_ngcontent-%COMP%]::-moz-progress-bar{background-color:#51aded;border-radius:10px}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]   progress[_ngcontent-%COMP%]::-webkit-progress-bar{background-color:#ccc;border-radius:10px}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]   progress[_ngcontent-%COMP%]::-webkit-progress-value{position:relative;background-color:#51aded;border-radius:10px}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:80%;padding:0;margin:0;text-align:center}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]   .fileElem[_ngcontent-%COMP%]{width:300px;position:absolute;top:30px;left:30px;z-index:1;height:50px;opacity:0;cursor:pointer}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]   .fileElem[_ngcontent-%COMP%]:focus{outline:none}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]   .fileSelect[_ngcontent-%COMP%]{display:inline-block;text-align:left;padding-left:110px;width:100%;height:50px;background-color:#51aded;border-radius:3px;border-bottom:3px solid rgba(0,0,0,.1);position:relative;font-size:20px;line-height:50px;color:#fff}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]   .fileSelect[_ngcontent-%COMP%]:before{font-family:Entypo;content:"\ue711";position:absolute;top:0;left:80px}.c-pointer[_ngcontent-%COMP%]{cursor:pointer}.btn--principal[_ngcontent-%COMP%]{color:#5f6368;background:#fff;border:1px solid #5f6368}.bck-ss-d[_ngcontent-%COMP%]{background:rgba(127,247,255,.3686274509803922)}']}),e})(),ic=(()=>{class e{constructor(){this.message=""}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=h.Ub({type:e,selectors:[["efect-card"]],inputs:{message:"message"},decls:5,vars:1,consts:[[1,"card-load-mul",2,"background","#fff !important"],["version","1.1","id","Layer_1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","x","0px","y","0px","width","400px","height","95px","viewBox","0 0 100 71","enable-background","new 0 0 100 71",0,"xml","space","preserve"],["fill","#E72C55","d","M70.374,19.633H30.428c-1.264,0-2.293,1.029-2.293,2.294v26.781c0,1.265,1.029,2.293,2.293,2.293h39.946\n\tc1.265,0,2.293-1.028,2.293-2.293V21.927C72.667,20.663,71.639,19.633,70.374,19.633z M70.374,20.749\n\tc0.111,0,0.219,0.017,0.321,0.046L50.757,38.642L30.21,20.771c0.071-0.013,0.144-0.021,0.218-0.021H70.374z M71.55,48.708\n\tc0,0.648-0.527,1.177-1.176,1.177H30.428c-0.649,0-1.177-0.528-1.177-1.177V21.927c0-0.155,0.031-0.303,0.085-0.438L50.08,39.532\n\tc0.191,0.167,0.434,0.249,0.677,0.249c0.247,0,0.497-0.086,0.688-0.258l20.053-17.947c0.034,0.11,0.052,0.229,0.052,0.352V48.708z",1,"message"],[1,"text-center","text-abs-bottom"]],template:function(e,t){1&e&&(h.gc(0,"div",0),h.rc(),h.gc(1,"svg",1),h.bc(2,"path",2),h.fc(),h.qc(),h.gc(3,"h3",3),h.ed(4),h.fc(),h.fc()),2&e&&(h.Lb(4),h.fd(t.message))},styles:["svg[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;margin:auto}.message[_ngcontent-%COMP%]{transform-origin:50% 50%;opacity:0;-webkit-animation:message-animation 8s infinite;animation:message-animation 8s infinite}@-webkit-keyframes message-animation{0%{opacity:0}15%{fill:#e72c55;opacity:1}20%{transform:scale(1.8);fill:#e72c55;opacity:1}30%{transform:scale(1.5);fill:#fff;opacity:1}50%{transform:scale(1.8);fill:#e72c55;opacity:1}60%{transform:scale(1.5);fill:#fff;opacity:1}80%{transform:scale(1.8);fill:#e72c55;opacity:1}to{transform:scale(.2);opacity:0}}@keyframes message-animation{0%{opacity:0}15%{fill:#e72c55;opacity:1}20%{transform:scale(1.8);fill:#e72c55;opacity:1}30%{transform:scale(1.5);fill:#fff;opacity:1}50%{transform:scale(1.8);fill:#e72c55;opacity:1}60%{transform:scale(1.5);fill:#fff;opacity:1}80%{transform:scale(1.8);fill:#e72c55;opacity:1}to{transform:scale(.2);opacity:0}}.text-abs-bottom[_ngcontent-%COMP%]{position:absolute;bottom:25vh;left:0;right:0;margin:auto;font-weight:800}"]}),e})();function sc(e,t){if(1&e){const e=h.hc();h.gc(0,"show-one-message",4),h.oc("rsFieldEmitChange",(function(t){return h.Sc(e),h.sc().recibeMessage(t)})),h.fc()}if(2&e){const e=h.sc();h.Ac("headShow",!0)("bottomShow",!0)("message",e.message)("parent_id",e.message.message_uuid)("images",e.message.message.images)}}function cc(e,t){if(1&e&&h.bc(0,"show-one-message",14),2&e){const e=h.sc().$implicit,t=h.sc(2);h.Ac("parent_id",t.message.message_uuid)("headShow",!1)("bottomShow",!1)("message",e)("images",e.message.images)}}const ac=function(e){return{background:e}};function rc(e,t){if(1&e&&(h.gc(0,"div",7),h.gc(1,"div",8),h.gc(2,"h5",9),h.gc(3,"button",10),h.oc("click",(function(){const e=t.$implicit;return e.show=!e.show})),h.ed(4),h.fc(),h.fc(),h.fc(),h.gc(5,"div",11),h.gc(6,"div",12),h.cd(7,cc,1,5,"show-one-message",13),h.fc(),h.fc(),h.fc()),2&e){const e=t.$implicit;h.Lb(1),h.Ac("ngStyle",h.Fc(4,ac,"send"==e.status?"#e8fff9;":"")),h.Lb(3),h.fd(e.message.subject),h.Lb(1),h.Ac("ngClass",e.show?"show":""),h.Lb(2),h.Ac("ngIf",null!=e)}}function lc(e,t){if(1&e&&(h.gc(0,"div",5),h.cd(1,rc,8,6,"div",6),h.fc()),2&e){const e=h.sc();h.Lb(1),h.Ac("ngForOf",e.messages_previous)}}function dc(e,t){1&e&&h.bc(0,"efect-card",15),2&e&&h.Ac("message","Cargando Mensaje")}let gc=(()=>{class e{constructor(e,t,n,o){this.activeRoute=e,this.messageService=t,this.controlErroresService=n,this.redireccionService=o,this.images=[],this.messages_previous=[],this.id=0,this.message=null,this.loadMessage=!1,this.showAllUsers=!1,this.isCollapsed=!1,this.msFieldEmitChange=new h.r,this.responseMode={mode:""},this.moment=A,console.log(this.id)}ngOnInit(){this.getMessage()}getMessage(){this.loadMessage=!0,this.messageService.getMessage(this.id).subscribe(e=>{this.loadMessage=!1,this.message=e.data,this.images=this.message.message.images||[],this.getHistorialMessages(this.message.message.uuid)},e=>{this.loadMessage=!1,this.controlErroresService.control(e)})}getHistorialMessages(e){this.messageService.getMessagesById(e).subscribe(e=>{this.messages_previous=e.data},e=>{this.controlErroresService.control(e)})}recibeMessage(e){this.getHistorialMessages(this.message.message_uuid)}}return e.\u0275fac=function(t){return new(t||e)(h.ac(c.a),h.ac(Oi),h.ac(l.a),h.ac(u.a))},e.\u0275cmp=h.Ub({type:e,selectors:[["show-message"]],inputs:{id:"id"},outputs:{msFieldEmitChange:"msFieldEmitChange"},decls:4,vars:3,consts:[[1,"container"],[3,"headShow","bottomShow","message","parent_id","images","rsFieldEmitChange",4,"ngIf"],["id","accordion","class","mt-4",4,"ngIf"],[3,"message",4,"ngIf"],[3,"headShow","bottomShow","message","parent_id","images","rsFieldEmitChange"],["id","accordion",1,"mt-4"],["class","mt-3","style","background: #fff",4,"ngFor","ngForOf"],[1,"mt-3",2,"background","#fff"],[1,"card-header",3,"ngStyle"],[1,"mb-0"],["data-toggle","collapse","aria-expanded","true",1,"btn",3,"click"],["aria-labelledby","headingOne","data-parent","#accordion",1,"collapse",3,"ngClass"],[1,""],[3,"parent_id","headShow","bottomShow","message","images",4,"ngIf"],[3,"parent_id","headShow","bottomShow","message","images"],[3,"message"]],template:function(e,t){1&e&&(h.gc(0,"div",0),h.cd(1,sc,1,5,"show-one-message",1),h.cd(2,lc,2,1,"div",2),h.fc(),h.cd(3,dc,1,1,"efect-card",3)),2&e&&(h.Lb(1),h.Ac("ngIf",0==t.loadMessage&&null!=t.message),h.Lb(1),h.Ac("ngIf",t.message),h.Lb(1),h.Ac("ngIf",t.loadMessage))},directives:[o.t,oc,o.s,o.w,o.q,ic],styles:['@charset "UTF-8";input[type=file][_ngcontent-%COMP%]{display:none}.custom-image[_ngcontent-%COMP%]{cursor:pointer;position:absolute;top:10px;right:10px}.container-input-file[_ngcontent-%COMP%]{margin:2rem 0}.icon[_ngcontent-%COMP%]{background:#489eff;color:#fff;width:40px;height:40px;border-radius:50%;cursor:pointer;padding:10px}.blur-pic-letter[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{filter:blur(5px)}.blur-pic-letter[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{z-index:100}.grid-template-gallery[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr)}@media (min-width:950px){.grid-template-gallery[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media (min-width:1000px){.grid-template-gallery[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)}}.centrado-absoluto[_ngcontent-%COMP%]{left:50%;top:50%;transform:translate(-50%,-50%);-webkit-transform:translate(-50%,-50%)}.absolute[_ngcontent-%COMP%]{position:absolute}.icon-size-show-pres[_ngcontent-%COMP%]{font-size:40px}.text-more-files[_ngcontent-%COMP%]{background:#fff;color:#00f;padding:10px;border-radius:5px}.btn-r-t-rw[_ngcontent-%COMP%]{position:absolute;right:5px;top:5px}.color-danger[_ngcontent-%COMP%]{color:#a80000}.color-info[_ngcontent-%COMP%]{color:#0065a8}.color-warning[_ngcontent-%COMP%]{color:#a84300}.container-lw-img[_ngcontent-%COMP%]{overflow:hidden;transition:padding-bottom 1s;padding:10px;cursor:pointer}.bck_fileUpload[_ngcontent-%COMP%]{background:rgba(0,0,0,.4);z-index:10000;top:0;width:100%;height:100%;position:fixed}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]{position:fixed;z-index:19000;top:25%;margin:5% auto;left:0;right:0;box-shadow:0 0 2px rgba(0,0,0,.3);background-color:#eef2f6;width:300px;padding:30px}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:18px;font-weight:400;margin:20px 0 5px;padding:0}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]   progress[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:0;width:100%;height:15px;color:#51aded;background-color:#ccc;border-radius:10px}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]   progress[_ngcontent-%COMP%]::-moz-progress-bar{background-color:#51aded;border-radius:10px}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]   progress[_ngcontent-%COMP%]::-webkit-progress-bar{background-color:#ccc;border-radius:10px}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]   progress[_ngcontent-%COMP%]::-webkit-progress-value{position:relative;background-color:#51aded;border-radius:10px}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:80%;padding:0;margin:0;text-align:center}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]   .fileElem[_ngcontent-%COMP%]{width:300px;position:absolute;top:30px;left:30px;z-index:1;height:50px;opacity:0;cursor:pointer}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]   .fileElem[_ngcontent-%COMP%]:focus{outline:none}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]   .fileSelect[_ngcontent-%COMP%]{display:inline-block;text-align:left;padding-left:110px;width:100%;height:50px;background-color:#51aded;border-radius:3px;border-bottom:3px solid rgba(0,0,0,.1);position:relative;font-size:20px;line-height:50px;color:#fff}.bck_fileUpload[_ngcontent-%COMP%]   .fileUpload[_ngcontent-%COMP%]   .fileSelect[_ngcontent-%COMP%]:before{font-family:Entypo;content:"\ue711";position:absolute;top:0;left:80px}.c-pointer[_ngcontent-%COMP%]{cursor:pointer}.btn--principal[_ngcontent-%COMP%]{color:#5f6368;background:#fff;border:1px solid #5f6368}']}),e})();function uc(e,t){1&e&&h.bc(0,"mat-progress-bar",10)}function pc(e,t){if(1&e){const e=h.hc();h.gc(0,"div"),h.gc(1,"chat-messages",11),h.oc("fieldEmitChange",(function(t){return h.Sc(e),h.sc().showMessage(t)})),h.fc(),h.fc()}}function hc(e,t){if(1&e){const e=h.hc();h.gc(0,"div",12),h.gc(1,"new-message",11),h.oc("fieldEmitChange",(function(t){return h.Sc(e),h.sc().recibeMessage(t)})),h.fc(),h.fc()}}function fc(e,t){if(1&e){const e=h.hc();h.gc(0,"div"),h.gc(1,"show-message",13),h.oc("msFieldEmitChange",(function(t){return h.Sc(e),h.sc().recibeMessage(t)})),h.fc(),h.fc()}if(2&e){const e=h.sc();h.Lb(1),h.Ac("id",e.selectedId)}}function bc(e,t){if(1&e){const e=h.hc();h.gc(0,"button",14),h.oc("click",(function(){return h.Sc(e),h.sc().openPanelNewMessage("new-message")})),h.ed(1),h.tc(2,"translate"),h.bc(3,"ion-icon",15),h.fc()}2&e&&(h.Lb(1),h.gd("",h.uc(2,1,"buttons.new_message")," "))}function mc(e,t){if(1&e){const e=h.hc();h.gc(0,"button",16),h.oc("click",(function(){return h.Sc(e),h.sc().openPanelNewMessage("messages")})),h.bc(1,"ion-icon",17),h.ed(2),h.tc(3,"translate"),h.fc()}2&e&&(h.Lb(2),h.gd(" ",h.uc(3,1,"buttons.inbox"),""))}let _c=(()=>{class e{constructor(e,t,n,o){this.modalCrl=e,this.userData=t,this.navParams=n,this.translate=o,this.selectedId=null,this.loading=!1,this.openFilter=!1,this.moment=A,this.courses=[],this.users=[],this.usersSelected=[],this.search_find=!1,this.searching=!1,this.auth=null,this.pageMessage=1,this.allMessage=1,this.decodeURIComponent=decodeURIComponent,this.scrollbarStyle=a.a.scrollbarStyle,this.messages=[],this.filter={status:"active",search:"",range:{start:null,end:null}},this.panel_show="messages",o.setDefaultLang(r.e.lang),this.show_id=n.data.show_id}ngOnInit(){return Object(P.b)(this,void 0,void 0,(function*(){this.auth=yield this.userData.getUser()}))}ngAfterViewInit(){this.show_id&&this.showMessage({uuid:this.show_id})}openPanelNewMessage(e){this.panel_show=e}dismiss(){this.modalCrl.dismiss()}recibeMessage(e){console.log(e),this.panel_show="messages"}showMessage(e){this.selectedId=e.uuid,this.panel_show="show"}}return e.\u0275fac=function(t){return new(t||e)(h.ac(s.Db),h.ac(Ci.a),h.ac(s.Fb),h.ac(f.e))},e.\u0275cmp=h.Ub({type:e,selectors:[["app-panel-chat-master"]],decls:17,vars:11,consts:[["translucent","true"],["slot","end"],[3,"disabled","click"],["name","close-outline"],["mode","indeterminate",4,"ngIf"],["fullscreen","true",3,"scrollbar"],[4,"ngIf"],["class","container",4,"ngIf"],["slot","end","mat-button","","size","small","color","primary",3,"click",4,"ngIf"],["slot","end","mat-button","","size","small","color","danger",3,"click",4,"ngIf"],["mode","indeterminate"],[3,"fieldEmitChange"],[1,"container"],[3,"id","msFieldEmitChange"],["slot","end","mat-button","","size","small","color","primary",3,"click"],["name","send-outline"],["slot","end","mat-button","","size","small","color","danger",3,"click"],["name","arrow-back-outline"]],template:function(e,t){1&e&&(h.gc(0,"ion-header",0),h.gc(1,"ion-toolbar"),h.gc(2,"ion-title"),h.ed(3),h.tc(4,"translate"),h.fc(),h.gc(5,"ion-buttons",1),h.gc(6,"ion-button",2),h.oc("click",(function(){return t.dismiss()})),h.bc(7,"ion-icon",3),h.fc(),h.fc(),h.fc(),h.cd(8,uc,1,0,"mat-progress-bar",4),h.fc(),h.gc(9,"ion-content",5),h.cd(10,pc,2,0,"div",6),h.cd(11,hc,2,0,"div",7),h.cd(12,fc,2,1,"div",6),h.fc(),h.gc(13,"ion-footer",0),h.gc(14,"ion-toolbar"),h.cd(15,bc,4,3,"button",8),h.cd(16,mc,4,3,"button",9),h.fc(),h.fc()),2&e&&(h.Lb(3),h.gd(" ",h.uc(4,9,"pages.messenger.messenger")," "),h.Lb(3),h.Ac("disabled",t.loading),h.Lb(2),h.Ac("ngIf",t.loading),h.Lb(1),h.Bc("scrollbar",t.scrollbarStyle),h.Lb(1),h.Ac("ngIf","messages"==t.panel_show),h.Lb(1),h.Ac("ngIf","new-message"==t.panel_show),h.Lb(1),h.Ac("ngIf","show"==t.panel_show),h.Lb(3),h.Ac("ngIf","messages"==t.panel_show),h.Lb(1),h.Ac("ngIf","new-message"==t.panel_show||"show"==t.panel_show))},directives:[s.B,s.zb,s.xb,s.l,s.k,s.C,o.t,s.u,b.b,s.z,Pe.a,Vi,Ss,gc,Ze.b],pipes:[f.d],styles:[""]}),e})();var vc=n("AnNS"),kc=n("AkM1");function Cc(e,t){1&e&&h.bc(0,"mat-progress-bar",11)}const yc=function(e){return{"image-active":e}};function xc(e,t){if(1&e&&h.bc(0,"img",20),2&e){const e=t.$implicit,n=t.index,o=h.sc(2);h.Ac("src",e.file_url,h.Vc)("alt",e.name)("ngClass",h.Fc(3,yc,o.selectecIndex==n))}}const wc=function(e){return{active:e}};function Mc(e,t){if(1&e){const e=h.hc();h.gc(0,"span",21),h.oc("click",(function(){h.Sc(e);const n=t.index;return h.sc(2).selectImage(n)})),h.fc()}if(2&e){const e=t.index,n=h.sc(2);h.Ac("ngClass",h.Fc(1,wc,n.selectedIndex==e))}}function Oc(e,t){if(1&e){const e=h.hc();h.gc(0,"div",12),h.cd(1,xc,1,5,"img",13),h.gc(2,"div",14),h.cd(3,Mc,1,3,"span",15),h.fc(),h.gc(4,"button",16),h.gc(5,"ion-icon",17),h.oc("click",(function(){return h.Sc(e),h.sc().onPrevClick()})),h.fc(),h.fc(),h.gc(6,"button",18),h.gc(7,"ion-icon",19),h.oc("click",(function(){return h.Sc(e),h.sc().onNextClick()})),h.fc(),h.fc(),h.fc()}if(2&e){const e=h.sc();h.Lb(1),h.Ac("ngForOf",e.images),h.Lb(2),h.Ac("ngForOf",e.images)}}function Pc(e,t){if(1&e){const e=h.hc();h.gc(0,"ion-card-header",22),h.gc(1,"ion-button",23),h.oc("click",(function(){return h.Sc(e),h.sc().leftObjectMove()})),h.bc(2,"ion-icon",24),h.fc(),h.gc(3,"ion-button",23),h.oc("click",(function(){return h.Sc(e),h.sc().rightObjectMode()})),h.bc(4,"ion-icon",25),h.fc(),h.fc()}}let Sc=(()=>{class e{constructor(e,t){this.navParams=e,this.modalCtrl=t,this.data=[],this.scrollbarStyle=a.a.scrollbarStyle,this.loading=!1,this.selectecIndex=0,this.slideInterval=7e3,this.indexObject=0,this.images=[],this.indicators=!0,this.itemPosition=null,this.intervalSlide=null,this.data=this.navParams.data.data}ngOnInit(){(!Array.isArray(this.data)||this.data.length<=0)&&this.dismiss(),this.itemPosition=this.data[this.indexObject],this.images=this.itemPosition.images,this.autoSlideImages()}autoSlideImages(){this.intervalSlide=setInterval(()=>{this.onNextClick(),console.log(2222)},this.slideInterval)}ngOnDestroy(){clearInterval(this.intervalSlide)}dismiss(e){this.modalCtrl.dismiss()}selectImage(e){this.selectecIndex=e}onPrevClick(){0==this.selectecIndex?this.selectecIndex=this.images.length-1:this.selectecIndex--}onNextClick(){this.selectecIndex==this.images.length-1?this.selectecIndex=0:this.selectecIndex++}rightObjectMode(){this.indexObject==this.data.length-1?this.indexObject=0:this.indexObject++,this.itemPosition=this.data[this.indexObject],this.images=this.itemPosition.images}leftObjectMove(){0==this.indexObject?this.indexObject=this.data.length-1:this.indexObject--,this.itemPosition=this.data[this.indexObject],this.images=this.itemPosition.images}}return e.\u0275fac=function(t){return new(t||e)(h.ac(s.Fb),h.ac(s.Db))},e.\u0275cmp=h.Ub({type:e,selectors:[["app-modal-notifications"]],decls:16,vars:9,consts:[["translucent","true"],["slot","start",2,"width","100px","margin","0 auto",3,"src"],["slot","end"],[3,"disabled","click"],["name","close-outline"],["mode","indeterminate",4,"ngIf"],[3,"scrollbar"],[2,"position","relative"],["class","carousel-container container",4,"ngIf","ngIfOf"],[3,"innerHTML"],["class","space-btw",4,"ngIf"],["mode","indeterminate"],[1,"carousel-container","container"],[3,"src","alt","ngClass",4,"ngFor","ngForOf"],[1,"carousel-dot-container"],["class","dot",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"btn-carousel","btn-prev"],["name","chevron-back-outline",1,"icon-prev","icon-carousel",3,"click"],[1,"btn-carousel","btn-next"],["name","chevron-forward-outline",1,"icon-next","icon-carousel",3,"click"],[3,"src","alt","ngClass"],[1,"dot",3,"ngClass","click"],[1,"space-btw"],["color","warning","size","small",3,"click"],["name","arrow-back-outline"],["name","arrow-forward-outline"]],template:function(e,t){1&e&&(h.gc(0,"ion-header",0),h.gc(1,"ion-toolbar"),h.bc(2,"ion-img",1),h.gc(3,"ion-title"),h.ed(4),h.fc(),h.gc(5,"ion-buttons",2),h.gc(6,"ion-button",3),h.oc("click",(function(){return t.dismiss()})),h.bc(7,"ion-icon",4),h.fc(),h.fc(),h.fc(),h.cd(8,Cc,1,0,"mat-progress-bar",5),h.fc(),h.gc(9,"ion-content",6),h.bc(10,"div",7),h.cd(11,Oc,8,2,"div",8),h.gc(12,"ion-card"),h.gc(13,"ion-card-content"),h.bc(14,"div",9),h.fc(),h.cd(15,Pc,5,0,"ion-card-header",10),h.fc(),h.fc()),2&e&&(h.Lb(2),h.Ac("src","/assets/img/puente-digital.png"),h.Lb(2),h.gd(" ",null!=t.itemPosition?t.itemPosition.title:"-"," "),h.Lb(2),h.Ac("disabled",t.loading),h.Lb(2),h.Ac("ngIf",t.loading),h.Lb(1),h.Bc("scrollbar",t.scrollbarStyle),h.Lb(2),h.Ac("ngIf",t.images)("ngIfOf",t.images.length>0),h.Lb(3),h.Ac("innerHTML",null!=t.itemPosition?t.itemPosition.description:"",h.Tc),h.Lb(1),h.Ac("ngIf",t.data.length>1))},directives:[s.B,s.zb,s.D,s.xb,s.l,s.k,s.C,o.t,s.u,b.b,s.m,s.n,Pe.a,o.s,o.q,s.o],styles:[".carousel-container[_ngcontent-%COMP%]{position:relative;margin:auto;text-align:center;border-radius:15px;box-shadow:0 6px 12px #dce1e1}.carousel-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:none;border-radius:15px}.carousel-container[_ngcontent-%COMP%]   img.image-active[_ngcontent-%COMP%]{display:block;width:100%;height:400px}.carousel-dot-container[_ngcontent-%COMP%]{position:absolute;right:0;left:0;bottom:0;display:flex;justify-content:center;padding:0;margin-bottom:1 rem}.dot[_ngcontent-%COMP%]{cursor:pointer;height:13px;width:13px;margin:0 5px;background-color:#fff;border-radius:50%;display:inline-block;transition:opacity .6s}.active[_ngcontent-%COMP%], .dot[_ngcontent-%COMP%]:hover{opacity:1}.fade[_ngcontent-%COMP%]{-webkit-animation-name:fade;animation-name:fade;-webkit-animation-duration:1.5s;animation-duration:1.5s}.btn-carousel[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;display:flex;align-items:center;justify-content:center;width:15%;padding:0;color:#fff;text-align:center;background:0 0;border:0;cursor:pointer}.btn-prev[_ngcontent-%COMP%]{left:0}.icon-carousel[_ngcontent-%COMP%]{color:#fff;opacity:.5;transition:all .15s ease}.icon-carousel[_ngcontent-%COMP%]:hover{opacity:.9}.icon-carousel[_ngcontent-%COMP%]:active{opacity:.5}.btn-next[_ngcontent-%COMP%], .icon-prev[_ngcontent-%COMP%]{font-size:35px}.btn-next[_ngcontent-%COMP%]{right:0}@-webkit-keyframes fade{0%{opacity:.4}to{opacity:1}}@keyframes fade{0%{opacity:.4}to{opacity:1}}"]}),e})();var Lc=n("2Vo4");const{Network:Ac}=Yo.c;let Ic=(()=>{class e{constructor(e,t){this.toastService=e,this.toastController=t,this.online=null,this.hasConnection=new Lc.a(!1),this.networkListener||(this.networkListener=Ac.addListener("networkStatusChange",e=>Object(P.b)(this,void 0,void 0,(function*(){this.networkStatus=e,console.log(this.networkStatus);const t=yield this.toastController.create({message:e.connected?'<ion-icon name="wifi-outline"></ion-icon> Conexi\xf3n a internet restablecida':'<ion-icon name="wifi-outline"></ion-icon> ha perdido la conexi\xf3n a internet',duration:2e3,color:e.connected?"success":"warning",position:"top",cssClass:"w-10p"});console.log("hol"),t.present()})))),console.log("NETWORK",this.networkListener)}getNetWorkStatus(e){return Object(P.b)(this,void 0,void 0,(function*(){return e.networkStatus=yield Ac.getStatus(),this.networkStatus=e.networkStatus,console.log(e.networkStatus),this.networkStatus}))}endNetworkListener(){this.networkListener&&this.networkListener.remove()}networkDestroy(){this.networkListener&&this.networkListener.remove()}}return e.\u0275fac=function(t){return new(t||e)(h.kc(p.a),h.kc(s.Nb))},e.\u0275prov=h.Wb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Tc=n("e8h1"),zc=n("Jho9");function Ec(e,t){if(1&e&&(h.gc(0,"ion-badge",15),h.ed(1),h.fc()),2&e){const e=h.sc(3).$implicit,t=h.sc(3);h.Lb(1),h.fd(t.badgetContents[e.badge_content])}}function Rc(e,t){if(1&e&&(h.gc(0,"ion-item",12),h.bc(1,"ion-icon",13),h.gc(2,"ion-label"),h.ed(3),h.tc(4,"translate"),h.cd(5,Ec,2,1,"ion-badge",14),h.fc(),h.fc()),2&e){const e=h.sc(2).$implicit;h.Ac("routerLink",e.route),h.Lb(1),h.Ac("name",e.icon+"-outline"),h.Lb(2),h.gd(" ",h.uc(4,4,e.title)," "),h.Lb(2),h.Ac("ngIf",e.show_badge)}}function Fc(e,t){if(1&e&&(h.gc(0,"ion-badge",15),h.ed(1),h.fc()),2&e){const e=h.sc(3).$implicit,t=h.sc(3);h.Lb(1),h.fd(t.badgetContents[e.badge_content])}}function Bc(e,t){if(1&e){const e=h.hc();h.gc(0,"ion-item",16),h.oc("click",(function(){return h.Sc(e),h.sc(2).$implicit.action()})),h.bc(1,"ion-icon",13),h.gc(2,"ion-label"),h.ed(3),h.tc(4,"translate"),h.cd(5,Fc,2,1,"ion-badge",14),h.fc(),h.fc()}if(2&e){const e=h.sc(2).$implicit;h.Lb(1),h.Ac("name",e.icon),h.Lb(2),h.gd(" ",h.uc(4,3,e.title)," "),h.Lb(2),h.Ac("ngIf",e.show_badge)}}function jc(e,t){if(1&e&&(h.gc(0,"ion-menu-toggle",9),h.cd(1,Rc,6,6,"ion-item",10),h.cd(2,Bc,6,5,"ion-item",11),h.fc()),2&e){const e=h.sc().$implicit;h.Lb(1),h.Ac("ngIf","route"==e.type),h.Lb(1),h.Ac("ngIf","action"==e.type)}}function Dc(e,t){if(1&e&&(h.ec(0),h.cd(1,jc,3,2,"ion-menu-toggle",8),h.dc()),2&e){const e=t.$implicit;h.Lb(1),h.Ac("ngIf",e.show)}}function Uc(e,t){if(1&e&&(h.gc(0,"ion-list",7),h.gc(1,"ion-list-header"),h.ed(2),h.tc(3,"translate"),h.fc(),h.cd(4,Dc,2,1,"ng-container",4),h.fc()),2&e){const e=h.sc().$implicit;h.Lb(2),h.gd(" ",h.uc(3,2,e.title)," "),h.Lb(2),h.Ac("ngForOf",e.items)}}function $c(e,t){if(1&e&&(h.ec(0),h.cd(1,Uc,5,4,"ion-list",6),h.dc()),2&e){const e=t.$implicit;h.Lb(1),h.Ac("ngIf",e.show)}}let Nc=(()=>{class e{constructor(e,t,n,o,i,s,c,l,d,g,u,p,h,f,b,m,_,v,k,C,y,x,w){this.menu=e,this.platform=t,this.router=n,this.splashScreen=o,this.statusBar=i,this.storage=s,this.userData=c,this.swUpdate=l,this.toastCtrl=d,this.translate=g,this.darkService=u,this.tourService=p,this.routerOutlet=h,this.modalCtrl=f,this.profileService=b,this.panelSizeService=m,this.authService=_,this.toastR=v,this.messengerService=k,this.addOrSubNotificationService=C,this.publicService=y,this.netWorkService=x,this.tokenService=w,this.size_pane="lg",this.loggedIn=!1,this.pagesContent=[{title:"menu.books_site",type:"principal",permission:"access_my_group_books",show:!1,items:[{title:"menu.my_books",permission:"access_my_books",icon:"book",route:r.h.books,type:"route",show:!1},{title:"menu.library",permission:"access_my_library",icon:"library",route:r.h.library,type:"route",show:!1},{permission:"access_my_addpines",title:"menu.active_pin",icon:"key",route:r.h.active_pin,type:"route",show:!1}]},{title:"menu.course_sections",type:"principal",show:!1,permission:"access_my_group_courses",items:[{title:"menu.courses",icon:"school",route:r.h.course,type:"route",show:!1,permission:"access_my_courses"},{title:"menu.calendar",icon:"calendar",route:r.h.calendar,type:"route",show:!1,permission:"access_my_calendar"}]},{title:"menu.reports",type:"reports",show:!1,permission:"access_my_group_report",items:[{title:"menu.report-users",icon:"person",route:r.h.reportUsers,type:"route",show:!1,permission:"access_my_adminreport"},{title:"menu.activity-report",icon:"albums",route:r.h.reportActivity,type:"route",show:!1,permission:"access_my_admin_report_activity"},{title:"menu.post_books",icon:"book",route:r.h.reportPostBook,type:"route",show:!1,permission:"access_my_adminreportbook"}]},{title:"menu.account",type:"principal",show:!1,permission:"access_my_group_account",items:[{title:"menu.profile",icon:"person",route:r.h.profile,type:"route",show:!1,permission:"access_my_group_account"},{title:"menu.notification",icon:"megaphone-outline",show_badge:!0,badge_content:"notifications_count",permission:"access_my_notifications",type:"action",show:!1,action:()=>{this.showNotifications()}},{title:"menu.messenger",icon:"file-tray-full-outline",show_badge:!0,permission:"access_my_messenger",type:"action",show:!1,action:()=>{this.showMessages()}}]},{title:"menu.session",type:"principal",show:!0,permission:!1,items:[{title:"menu.logout",icon:"log-out",permission:!1,type:"action",show:!0,action:()=>{this.logout()}}]}],this.badgetContents={notifications_count:0},this.auth=null,this.dark=!1,this.scrollbarStyle=a.a.scrollbarStyle,this.listOfEvents=[],this.multiTabsOpened=!1,this.hasInizialitedSys=!1,"no"==is_loaded&&(this.tokenService.rmeoveTimerUUid(),is_loaded="yes"),g.setDefaultLang(r.e.lang),this.initializeApp(),this.initializeDetection(),this.echo=this.authService.echoPush(),C.get$().subscribe(e=>{console.log(e),this.badgetContents.notifications_count+=e}),C.getReset$().subscribe(e=>{console.log(e,"all"),this.badgetContents.notifications_count=e}),this.netWorkService.getNetWorkStatus(this)}initializeDetection(){this.multiTabDetection=new kc.MultiTabDetection;const e=this;this.multiTabDetection.ExistingTabDetectedEvent.subscribe({next:()=>Object(P.b)(this,void 0,void 0,(function*(){const t=new Date;e.listOfEvents.push(t.toLocaleString()+" - Existing Tab Detected"),this.multiTabsOpened=!0,console.log(e.multiTabDetection.NumberOfTabsOpened+" tabs opened")}))}),this.multiTabDetection.NewTabDetectedEvent.subscribe({next:t=>{const n=new Date;this.hasInizialitedSys=!0,console.clear(),console.log(e.listOfEvents),e.listOfEvents.push(n.toLocaleString()+" - New Tab Detected. totalNumberOfTabsOpened = "+t)}}),setTimeout(()=>{this.multiTabsOpened&&null!=this.tokenService.getTimerUUid()||this.sendTimerToServer({action:"in_system",start_date:A().format("YYYY-MM-DD HH:mm:ss"),context:"Entro al sistema"})},1e3)}sendTimerToServer(e,t=0){this.profileService.initTimer(e).subscribe(e=>{e.uuid&&localStorage.setItem(r.d.timer_uuid,e.uuid)},n=>{(t+=1)<=3&&this.sendTimerToServer(e,t)})}ngOnDestroy(){this.rxjsGlobal.unsubscribe()}getDirectMessage(){this.echo.private("channel-direct-message."+this.auth.uuid).listen("DirectNewMessageEvent",e=>{console.log(e),this.toastR.info(e.response.message.message.subject,"Mensaje de "+(e.response.message.send?e.response.message.send.name:"")),this.messengerService.appendMessage(e.response.message)})}loadCarouselNotify(){"1"==localStorage.getItem("new_login_notify")&&this.publicService.getNotificationGlobal().subscribe(e=>Object(P.b)(this,void 0,void 0,(function*(){if("show"==e.show){localStorage.removeItem("new_login_notify");const t=yield this.modalCtrl.create({component:Sc,cssClass:"modal-fullscreen",swipeToClose:!0,componentProps:{data:e.data}});yield t.present()}})),e=>{})}ngOnInit(){return Object(P.b)(this,void 0,void 0,(function*(){this.checkLoginStatus(),this.listenForLoginEvents(),this.auth=yield this.userData.getUser(),this.getPermissionsMainMenu(),this.tourService.getTourOptions(),this.countNotificationsNoRead(),this.rxjsGlobal=this.panelSizeService.getSizePanel$().subscribe(e=>this.size_pane=e),this.getDirectNotification(),this.getDirectMessage(),setTimeout(()=>{this.loadCarouselNotify()},1e3)}))}startLog(){}getPermissionsMainMenu(){return Object(P.b)(this,void 0,void 0,(function*(){let e=yield this.storage.get(r.d.my_permissions);if(Array.isArray(e)&&0!=e.length){for(const t of this.pagesContent)if(e.includes(t.permission)){t.show=!0;for(const n of t.items)e.includes(n.permission)&&(n.show=!0)}}else this.getMyPermissions()}))}getMyPermissions(){this.profileService.getMyPermissions().subscribe(e=>{for(const t of this.pagesContent)if(e.data.includes(t.permission)){t.show=!0;for(const n of t.items)e.data.includes(n.permission)&&(n.show=!0)}this.storage.set(r.d.my_permissions,e.data)})}listenChannelPrivate(){}getDirectNotification(){this.echo.private("channel-direct-notification."+this.auth.uuid).listen("DirectNotifyEvent",e=>Object(P.b)(this,void 0,void 0,(function*(){if(console.log(e),e.response&&e.response.data){let t=e.response.data;const n=yield this.toastCtrl.create({message:t.title,duration:7e3,color:"primary",buttons:[{text:"Ver",handler:()=>{this.router.navigateByUrl(t.route),this.addOrSubNotificationService.send(-1)}}]});this.addOrSubNotificationService.send(1),n.present()}})))}initializeApp(){this.platform.ready().then(()=>{this.statusBar.styleDefault(),this.splashScreen.hide()})}checkLoginStatus(){return this.userData.isLoggedIn().then(e=>this.updateLoggedInStatus(e))}updateLoggedInStatus(e){setTimeout(()=>{this.loggedIn=e},300)}listenForLoginEvents(){window.addEventListener("user:login",()=>{this.updateLoggedInStatus(!0)}),window.addEventListener("user:signup",()=>{this.updateLoggedInStatus(!0)}),window.addEventListener("user:logout",()=>{this.updateLoggedInStatus(!1)})}logout(){this.userData.logout()}showNotifications(){return Object(P.b)(this,void 0,void 0,(function*(){const e=yield this.modalCtrl.create({component:xi.a,cssClass:"modal-fullscreen",swipeToClose:!0,presentingElement:this.routerOutlet.nativeEl,componentProps:{}});yield e.present();const{data:t}=yield e.onWillDismiss();if(t)switch(t.action){case"open-message":console.log(t),this.showMessages(t.uuid)}}))}showMessages(e){return Object(P.b)(this,void 0,void 0,(function*(){const t=yield this.modalCtrl.create({component:_c,cssClass:"modal-fullscreen",swipeToClose:!0,presentingElement:this.routerOutlet.nativeEl,componentProps:{show_id:e}});yield t.present()}))}countNotificationsNoRead(){return Object(P.b)(this,void 0,void 0,(function*(){this.profileService.countNotificationsNoRead().subscribe(e=>{this.badgetContents.notifications_count=e.data.count})}))}openTutorial(){this.menu.enable(!1),this.storage.set("ion_did_tutorial",!1),this.router.navigateByUrl("/tutorial")}toggleButton(){this.dark=!this.dark,this.darkService.changeDarkMode(this.dark)}}return e.\u0275fac=function(t){return new(t||e)(h.ac(s.Cb),h.ac(s.Hb),h.ac(c.f),h.ac(vi.a),h.ac(ki.a),h.ac(Tc.b),h.ac(Ci.a),h.ac(zc.b),h.ac(s.Nb),h.ac(f.e),h.ac(yi.a),h.ac(g.a),h.ac(s.fb),h.ac(s.Db),h.ac(ve.a),h.ac(ye.a),h.ac(wi.a),h.ac(Cn.b),h.ac(Pi),h.ac(vc.a),h.ac(ke.a),h.ac(Ic),h.ac(we.a))},e.\u0275cmp=h.Ub({type:e,selectors:[["app-main-menu"]],decls:6,vars:4,consts:[["contentId","main-content",3,"when"],["contentId","main-content",1,"scrollbar"],[3,"scrollbar"],[2,"width","70%","margin","0 auto",3,"src"],[4,"ngFor","ngForOf"],["id","main-content"],["lines","none",4,"ngIf"],["lines","none"],["autoHide","false",4,"ngIf"],["autoHide","false"],["routerLinkActive","selected","routerDirection","root","detail","false",3,"routerLink",4,"ngIf"],["button","","detail","false",3,"click",4,"ngIf"],["routerLinkActive","selected","routerDirection","root","detail","false",3,"routerLink"],["slot","start",3,"name"],["color","danger",4,"ngIf"],["color","danger"],["button","","detail","false",3,"click"]],template:function(e,t){1&e&&(h.gc(0,"ion-split-pane",0),h.gc(1,"ion-menu",1),h.gc(2,"ion-content",2),h.bc(3,"ion-img",3),h.cd(4,$c,2,1,"ng-container",4),h.fc(),h.fc(),h.bc(5,"ion-router-outlet",5),h.fc()),2&e&&(h.Ac("when",t.size_pane),h.Lb(2),h.Bc("scrollbar",t.scrollbarStyle),h.Lb(1),h.Ac("src","/assets/img/puente-digital.png"),h.Lb(1),h.Ac("ngForOf",t.pagesContent))},directives:[s.qb,s.Q,s.u,b.b,s.D,o.s,s.fb,o.t,s.O,s.P,s.S,s.H,c.h,s.Kb,c.g,s.C,s.N,s.j],pipes:[f.d],styles:["[_ngcontent-%COMP%]:root, ion-menu[_ngcontent-%COMP%]{--side-max-width:50px}.scroll-type-1[_ngcontent-%COMP%]::-webkit-scrollbar{width:1px}.scroll-type-1[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#fff}.scroll-type-1[_ngcontent-%COMP%]::-webkit-scrollbar-track:hover{background:#f7f7f7}.scroll-type-1[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ccc}.scroll-type-1[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#888}.inner-scroll[_ngcontent-%COMP%]{scrollbar-width:thin}"]}),e})();const qc=[{path:"main",component:Nc,children:[{path:"my-books",component:J},{path:"my-books/:library_id",component:J},{path:"pin-active",component:O},{path:"library",component:be},{path:"library/book/:library_id",component:J},{path:"visor/:book_id/:part_id",component:Io},{path:"visor/:book_id/:page_id/:token",component:Io},{path:"courses",component:_i,runGuardsAndResolvers:"always"},{path:"visor/:book_id",component:Io},{path:"course",loadChildren:()=>n.e(4).then(n.bind(null,"+J/j")).then(e=>e.CoursePanelPageModule)},{path:"reports",loadChildren:()=>n.e(5).then(n.bind(null,"g37K")).then(e=>e.MainReportsPageModule)},{path:"account",children:[{path:"",loadChildren:()=>n.e(16).then(n.bind(null,"f1Ab")).then(e=>e.AccountModule)}]},{path:"",redirectTo:"/app/main/my-books",pathMatch:"full"}]}];let Hc=(()=>{class e{}return e.\u0275mod=h.Yb({type:e}),e.\u0275inj=h.Xb({factory:function(t){return new(t||e)},imports:[[c.j.forChild(qc)],c.j]}),e})(),Vc=(()=>{class e{constructor(e){this.popoverCtrl=e}support(){this.popoverCtrl.dismiss()}close(e){window.open(e,"_blank"),this.popoverCtrl.dismiss()}}return e.\u0275fac=function(t){return new(t||e)(h.ac(s.Ib))},e.\u0275cmp=h.Ub({type:e,selectors:[["ng-component"]],decls:16,vars:0,consts:[["button","",3,"click"]],template:function(e,t){1&e&&(h.gc(0,"ion-list"),h.gc(1,"ion-item",0),h.oc("click",(function(){return t.close("https://ionicframework.com/getting-started")})),h.gc(2,"ion-label"),h.ed(3,"Learn Ionic"),h.fc(),h.fc(),h.gc(4,"ion-item",0),h.oc("click",(function(){return t.close("https://ionicframework.com/docs/")})),h.gc(5,"ion-label"),h.ed(6,"Documentation"),h.fc(),h.fc(),h.gc(7,"ion-item",0),h.oc("click",(function(){return t.close("https://showcase.ionicframework.com")})),h.gc(8,"ion-label"),h.ed(9,"Showcase"),h.fc(),h.fc(),h.gc(10,"ion-item",0),h.oc("click",(function(){return t.close("https://github.com/ionic-team/ionic")})),h.gc(11,"ion-label"),h.ed(12,"GitHub Repo"),h.fc(),h.fc(),h.gc(13,"ion-item",0),h.oc("click",(function(){return t.support()})),h.gc(14,"ion-label"),h.ed(15,"Support"),h.fc(),h.fc(),h.fc())},directives:[s.O,s.H,s.N],encapsulation:2}),e})();const Yc=function(){return{opacity:"1"}};let Xc=(()=>{class e{constructor(e){this.popoverCtrl=e,this.location="madison",this.conferenceDate="2047-05-17",this.selectOptions={header:"Select a Location"}}presentPopover(e){return Object(P.b)(this,void 0,void 0,(function*(){const t=yield this.popoverCtrl.create({component:Vc,event:e});yield t.present()}))}}return e.\u0275fac=function(t){return new(t||e)(h.ac(s.Ib))},e.\u0275cmp=h.Ub({type:e,selectors:[["page-about"]],decls:52,vars:19,consts:[[1,"ion-no-border"],["slot","start"],["slot","end"],[3,"click"],["slot","icon-only","ios","ellipsis-horizontal","md","ellipsis-vertical"],[1,"about-header"],[1,"about-image","madison",3,"ngStyle"],[1,"about-image","austin",3,"ngStyle"],[1,"about-image","chicago",3,"ngStyle"],[1,"about-image","seattle",3,"ngStyle"],[1,"about-info"],[1,"ion-padding-top","ion-padding-start"],[1,"ion-padding-start","ion-padding-end"],["lines","none"],[3,"ngModel","interfaceOptions","ngModelChange"],["value","madison"],["value","austin"],["value","chicago"],["value","seattle"],["displayFormat","MMM DD, YYYY","max","2056",3,"ngModel","ngModelChange"],[1,"ion-text-end"]],template:function(e,t){1&e&&(h.gc(0,"ion-content"),h.gc(1,"ion-header",0),h.gc(2,"ion-toolbar"),h.gc(3,"ion-buttons",1),h.bc(4,"ion-menu-button"),h.fc(),h.gc(5,"ion-buttons",2),h.gc(6,"ion-button",3),h.oc("click",(function(e){return t.presentPopover(e)})),h.bc(7,"ion-icon",4),h.fc(),h.fc(),h.fc(),h.fc(),h.gc(8,"div",5),h.bc(9,"div",6),h.bc(10,"div",7),h.bc(11,"div",8),h.bc(12,"div",9),h.fc(),h.gc(13,"div",10),h.gc(14,"h3",11),h.ed(15,"About"),h.fc(),h.gc(16,"p",12),h.ed(17),h.tc(18,"date"),h.fc(),h.gc(19,"h3",11),h.ed(20,"Details"),h.fc(),h.gc(21,"ion-list",13),h.gc(22,"ion-item"),h.gc(23,"ion-label"),h.ed(24," Location "),h.fc(),h.gc(25,"ion-select",14),h.oc("ngModelChange",(function(e){return t.location=e})),h.gc(26,"ion-select-option",15),h.ed(27,"Madison, WI"),h.fc(),h.gc(28,"ion-select-option",16),h.ed(29,"Austin, TX"),h.fc(),h.gc(30,"ion-select-option",17),h.ed(31,"Chicago, IL"),h.fc(),h.gc(32,"ion-select-option",18),h.ed(33,"Seattle, WA"),h.fc(),h.fc(),h.fc(),h.gc(34,"ion-item"),h.gc(35,"ion-label"),h.ed(36," Date "),h.fc(),h.gc(37,"ion-datetime",19),h.oc("ngModelChange",(function(e){return t.conferenceDate=e})),h.fc(),h.fc(),h.fc(),h.gc(38,"h3",11),h.ed(39,"Internet"),h.fc(),h.gc(40,"ion-list",13),h.gc(41,"ion-item"),h.gc(42,"ion-label"),h.ed(43," Wifi network "),h.fc(),h.gc(44,"ion-label",20),h.ed(45),h.tc(46,"date"),h.fc(),h.fc(),h.gc(47,"ion-item"),h.gc(48,"ion-label"),h.ed(49," Password "),h.fc(),h.gc(50,"ion-label",20),h.ed(51," makegoodthings "),h.fc(),h.fc(),h.fc(),h.fc(),h.fc()),2&e&&(h.Lb(9),h.Ac("ngStyle","madison"===t.location&&h.Ec(15,Yc)),h.Lb(1),h.Ac("ngStyle","austin"===t.location&&h.Ec(16,Yc)),h.Lb(1),h.Ac("ngStyle","chicago"===t.location&&h.Ec(17,Yc)),h.Lb(1),h.Ac("ngStyle","seattle"===t.location&&h.Ec(18,Yc)),h.Lb(5),h.gd(" The Ionic Conference is a one-day conference on ",h.vc(18,9,t.conferenceDate,"mediumDate")," featuring talks from the Ionic team. It is focused on Ionic applications being built with Ionic Framework. This includes migrating apps to the latest version of the framework, Angular concepts, Webpack, Sass, and many other technologies used in Ionic 2. Tickets are completely sold out, and we\u2019re expecting more than 1000 developers \u2013 making this the largest Ionic conference ever! "),h.Lb(8),h.Ac("ngModel",t.location)("interfaceOptions",t.selectOptions),h.Lb(12),h.Ac("ngModel",t.conferenceDate),h.Lb(8),h.gd(" ica",h.vc(46,12,t.conferenceDate,"y")," "))},directives:[s.u,s.B,s.zb,s.l,s.R,s.k,s.C,o.w,s.O,s.H,s.N,s.kb,s.Lb,i.r,i.u,s.lb,s.v],pipes:[o.f],styles:["ion-toolbar[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;--background:transparent}ion-toolbar[_ngcontent-%COMP%], ion-toolbar[_ngcontent-%COMP%]   ion-back-button[_ngcontent-%COMP%], ion-toolbar[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%], ion-toolbar[_ngcontent-%COMP%]   ion-menu-button[_ngcontent-%COMP%]{--color:#fff}.about-header[_ngcontent-%COMP%]{position:relative;width:100%;height:30%}.about-header[_ngcontent-%COMP%]   .about-image[_ngcontent-%COMP%]{position:absolute;top:0;left:0;bottom:0;right:0;background-position:50%;background-size:cover;background-repeat:no-repeat;opacity:0;transition:opacity .5s ease-in-out}.about-header[_ngcontent-%COMP%]   .madison[_ngcontent-%COMP%]{background-image:url(/assets/img/about/madison.jpg)}.about-header[_ngcontent-%COMP%]   .austin[_ngcontent-%COMP%]{background-image:url(/assets/img/about/austin.jpg)}.about-header[_ngcontent-%COMP%]   .chicago[_ngcontent-%COMP%]{background-image:url(/assets/img/about/chicago.jpg)}.about-header[_ngcontent-%COMP%]   .seattle[_ngcontent-%COMP%]{background-image:url(/assets/img/about/seattle.jpg)}.about-info[_ngcontent-%COMP%]{position:absolute;margin-top:-10px;border-radius:10px;background:var(--ion-background-color,#fff)}.about-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0}.about-info[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{padding-top:0}.about-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:130%;color:var(--ion-color-dark)}.about-info[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{-webkit-margin-end:32px;margin-inline-end:32px}.ios[_ngcontent-%COMP%]   .about-info[_ngcontent-%COMP%]{--ion-padding:19px}.ios[_ngcontent-%COMP%]   .about-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:700}"]}),e})();const Qc=[{path:"",component:Xc}];let Gc=(()=>{class e{}return e.\u0275mod=h.Yb({type:e}),e.\u0275inj=h.Xb({factory:function(t){return new(t||e)},imports:[[c.j.forChild(Qc)],c.j]}),e})(),Wc=(()=>{class e{}return e.\u0275mod=h.Yb({type:e,bootstrap:[Xc]}),e.\u0275inj=h.Xb({factory:function(t){return new(t||e)},imports:[[o.c,i.l,s.Bb,Gc]]}),e})();var Kc=n("1I5t");const Zc=[{elementType:"geometry",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.fill",stylers:[{color:"#746855"}]},{elementType:"labels.text.stroke",stylers:[{color:"#242f3e"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#263c3f"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#6b9a76"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#38414e"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{color:"#212a37"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#9ca5b3"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#746855"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#1f2835"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#f3d19c"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#2f3948"}]},{featureType:"transit.station",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#17263c"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#515c6d"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{color:"#17263c"}]}],Jc=["mapCanvas"],ea=[{path:"",component:(()=>{class e{constructor(e,t,n){this.doc=e,this.confData=t,this.platform=n}ngOnInit(){}ngAfterViewInit(){return Object(P.b)(this,void 0,void 0,(function*(){const e=this.doc.querySelector("ion-app");let t=!1,n=[];e.classList.contains("dark-theme")&&(n=Zc);const o=yield function(e){const t=window,n=t.google;return n&&n.maps?Promise.resolve(n.maps):new Promise((e,n)=>{const o=document.createElement("script");o.src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY_HERE&v=3.31",o.async=!0,o.defer=!0,document.body.appendChild(o),o.onload=()=>{const o=t.google;o&&o.maps?e(o.maps):n("google maps not available")}})}();let i;this.confData.getMap().subscribe(e=>{const t=this.mapElement.nativeElement;i=new o.Map(t,{center:e.find(e=>e.center),zoom:16,styles:n}),e.forEach(e=>{const t=new o.InfoWindow({content:`<h5>${e.name}</h5>`}),n=new o.Marker({position:e,map:i,title:e.name});n.addListener("click",()=>{t.open(i,n)})}),o.event.addListenerOnce(i,"idle",()=>{t.classList.add("show-map")})}),new MutationObserver(e=>{e.forEach(e=>{"class"===e.attributeName&&(t=e.target.classList.contains("dark-theme"),i&&t?i.setOptions({styles:Zc}):i&&i.setOptions({styles:[]}))})}).observe(e,{attributes:!0})}))}}return e.\u0275fac=function(t){return new(t||e)(h.ac(o.e),h.ac(Kc.a),h.ac(s.Hb))},e.\u0275cmp=h.Ub({type:e,selectors:[["page-map"]],viewQuery:function(e,t){var n;1&e&&h.Zc(Jc,!0),2&e&&h.Nc(n=h.pc())&&(t.mapElement=n.first)},decls:9,vars:0,consts:[["slot","start"],[1,"map-canvas"],["mapCanvas",""]],template:function(e,t){1&e&&(h.gc(0,"ion-header"),h.gc(1,"ion-toolbar"),h.gc(2,"ion-buttons",0),h.bc(3,"ion-menu-button"),h.fc(),h.gc(4,"ion-title"),h.ed(5,"Map"),h.fc(),h.fc(),h.fc(),h.gc(6,"ion-content"),h.bc(7,"div",1,2),h.fc())},directives:[s.B,s.zb,s.l,s.R,s.xb,s.u],styles:[".map-canvas[_ngcontent-%COMP%]{position:absolute;height:100%;width:100%;background-color:transparent;opacity:0;transition:opacity .15s ease-in}.show-map[_ngcontent-%COMP%]{opacity:1}"]}),e})()}];let ta=(()=>{class e{}return e.\u0275mod=h.Yb({type:e}),e.\u0275inj=h.Xb({factory:function(t){return new(t||e)},imports:[[c.j.forChild(ea)],c.j]}),e})(),na=(()=>{class e{}return e.\u0275mod=h.Yb({type:e}),e.\u0275inj=h.Xb({factory:function(t){return new(t||e)},imports:[[o.c,s.Bb,ta]]}),e})();var oa=n("9B/o");function ia(e,t){if(1&e){const e=h.hc();h.gc(0,"ion-buttons",14),h.gc(1,"ion-button",15),h.oc("click",(function(){h.Sc(e);const t=h.sc();return t.openContact(t.speaker)})),h.bc(2,"ion-icon",16),h.fc(),h.gc(3,"ion-button",15),h.oc("click",(function(){h.Sc(e);const t=h.sc();return t.openSpeakerShare(t.speaker)})),h.bc(4,"ion-icon",17),h.fc(),h.fc()}}const sa=[{path:"",component:(()=>{class e{constructor(e,t,n,o,i){this.dataProvider=e,this.route=t,this.actionSheetCtrl=n,this.confData=o,this.inAppBrowser=i}ionViewWillEnter(){this.dataProvider.load().subscribe(e=>{const t=this.route.snapshot.paramMap.get("speakerId");if(e&&e.speakers)for(const n of e.speakers)if(n&&n.id===t){this.speaker=n;break}})}openExternalUrl(e){this.inAppBrowser.create(e,"_blank")}openSpeakerShare(e){return Object(P.b)(this,void 0,void 0,(function*(){const t=yield this.actionSheetCtrl.create({header:"Share "+e.name,buttons:[{text:"Copy Link",handler:()=>{console.log("Copy link clicked on https://twitter.com/"+e.twitter),window.cordova&&window.cordova.plugins.clipboard&&window.cordova.plugins.clipboard.copy("https://twitter.com/"+e.twitter)}},{text:"Share via ..."},{text:"Cancel",role:"cancel"}]});yield t.present()}))}openContact(e){return Object(P.b)(this,void 0,void 0,(function*(){const t=yield this.actionSheetCtrl.create({header:"Contact "+e.name,buttons:[{text:`Email ( ${e.email} )`,icon:null,handler:()=>{window.open("mailto:"+e.email)}},{text:`Call ( ${e.phone} )`,icon:null,handler:()=>{window.open("tel:"+e.phone)}},{text:"Cancel",role:"cancel"}]});yield t.present()}))}}return e.\u0275fac=function(t){return new(t||e)(h.ac(Kc.a),h.ac(c.a),h.ac(s.a),h.ac(Kc.a),h.ac(oa.a))},e.\u0275cmp=h.Ub({type:e,selectors:[["page-speaker-detail"]],decls:26,vars:5,consts:[[1,"speaker-detail"],[1,"ion-no-border"],["slot","start"],["defaultHref","/app/main/speakers"],["slot","end",4,"ngIf"],[1,"speaker-background"],[3,"src","alt"],[1,"ion-padding","speaker-detail"],["color","twitter","button","",3,"click"],["name","logo-twitter"],["color","dark","button","",3,"click"],["name","logo-github"],["color","instagram","button","",3,"click"],["name","logo-instagram"],["slot","end"],[3,"click"],["slot","icon-only","ios","call-outline","md","call-sharp"],["slot","icon-only","ios","share-outline","md","share-sharp"]],template:function(e,t){1&e&&(h.gc(0,"ion-content",0),h.gc(1,"ion-header",1),h.gc(2,"ion-toolbar"),h.gc(3,"ion-buttons",2),h.bc(4,"ion-back-button",3),h.fc(),h.cd(5,ia,5,0,"ion-buttons",4),h.fc(),h.fc(),h.gc(6,"div",5),h.bc(7,"img",6),h.gc(8,"h2"),h.ed(9),h.fc(),h.fc(),h.gc(10,"div",7),h.gc(11,"p"),h.ed(12),h.fc(),h.bc(13,"hr"),h.gc(14,"ion-chip",8),h.oc("click",(function(){return t.openExternalUrl("https://twitter.com/"+t.speaker.twitter)})),h.bc(15,"ion-icon",9),h.gc(16,"ion-label"),h.ed(17,"Twitter"),h.fc(),h.fc(),h.gc(18,"ion-chip",10),h.oc("click",(function(){return t.openExternalUrl("https://github.com/ionic-team/ionic")})),h.bc(19,"ion-icon",11),h.gc(20,"ion-label"),h.ed(21,"GitHub"),h.fc(),h.fc(),h.gc(22,"ion-chip",12),h.oc("click",(function(){return t.openExternalUrl("https://instagram.com/ionicframework")})),h.bc(23,"ion-icon",13),h.gc(24,"ion-label"),h.ed(25,"Instagram"),h.fc(),h.fc(),h.fc(),h.fc()),2&e&&(h.Lb(5),h.Ac("ngIf",t.speaker),h.Lb(2),h.Ac("src",null==t.speaker?null:t.speaker.profilePic,h.Vc)("alt",null==t.speaker?null:t.speaker.name),h.Lb(2),h.fd(null==t.speaker?null:t.speaker.name),h.Lb(3),h.gd("",null==t.speaker?null:t.speaker.about," Say hello on social media!"))},directives:[s.u,s.B,s.zb,s.l,s.g,s.h,o.t,s.s,s.C,s.N,s.k],styles:["ion-toolbar[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;--background:transparent}ion-toolbar[_ngcontent-%COMP%], ion-toolbar[_ngcontent-%COMP%]   ion-back-button[_ngcontent-%COMP%], ion-toolbar[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%], ion-toolbar[_ngcontent-%COMP%]   ion-menu-button[_ngcontent-%COMP%]{--color:#fff}.speaker-background[_ngcontent-%COMP%]{position:relative;display:flex;padding-top:var(--ion-safe-area-top);align-items:center;justify-content:center;flex-direction:column;height:calc(250px + var(--ion-safe-area-top));background:50%/cover url(/assets/img/speaker-background.png) no-repeat}.speaker-background[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:70px;border-radius:50%;margin-top:calc(var(--ion-safe-area-top)*-1)}.speaker-background[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{position:absolute;bottom:10px;color:#fff}.md[_ngcontent-%COMP%]   .speaker-background[_ngcontent-%COMP%]{box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.ios[_ngcontent-%COMP%]   .speaker-background[_ngcontent-%COMP%]{box-shadow:0 4px 16px rgba(0,0,0,.12)}.speaker-detail[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-left:6px;margin-right:6px}.speaker-detail[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:20px;background:var(--ion-color-step-150,#d7d8da)}"]}),e})()}];let ca=(()=>{class e{}return e.\u0275mod=h.Yb({type:e}),e.\u0275inj=h.Xb({factory:function(t){return new(t||e)},imports:[[c.j.forChild(sa)],c.j]}),e})(),aa=(()=>{class e{}return e.\u0275mod=h.Yb({type:e}),e.\u0275inj=h.Xb({factory:function(t){return new(t||e)},imports:[[o.c,s.Bb,ca]]}),e})();function ra(e,t){1&e&&h.bc(0,"ion-icon",11)}function la(e,t){1&e&&h.bc(0,"ion-icon",12)}function da(e,t){if(1&e&&(h.gc(0,"span"),h.ed(1),h.fc()),2&e){const e=t.$implicit;h.Ob("session-track-"+e.toLowerCase()),h.Lb(1),h.fd(e)}}function ga(e,t){if(1&e&&(h.gc(0,"div",13),h.gc(1,"h1"),h.ed(2),h.fc(),h.cd(3,da,2,3,"span",14),h.gc(4,"p"),h.ed(5),h.fc(),h.gc(6,"ion-text",15),h.ed(7),h.bc(8,"br"),h.ed(9),h.fc(),h.fc()),2&e){const e=h.sc();h.Lb(2),h.fd(e.session.name),h.Lb(1),h.Ac("ngForOf",null==e.session?null:e.session.tracks),h.Lb(2),h.fd(e.session.description),h.Lb(2),h.hd(" ",e.session.timeStart," \u2013 ",e.session.timeEnd," "),h.Lb(2),h.gd(" ",e.session.location," ")}}const ua=[{path:"",component:(()=>{class e{constructor(e,t,n){this.dataProvider=e,this.userProvider=t,this.route=n,this.isFavorite=!1,this.defaultHref=""}ionViewWillEnter(){this.dataProvider.load().subscribe(e=>{if(e&&e.schedule&&e.schedule[0]&&e.schedule[0].groups){const t=this.route.snapshot.paramMap.get("sessionId");for(const n of e.schedule[0].groups)if(n&&n.sessions)for(const e of n.sessions)if(e&&e.id===t){this.session=e,this.isFavorite=this.userProvider.hasFavorite(this.session.name);break}}})}ionViewDidEnter(){this.defaultHref="/app/main/schedule"}sessionClick(e){console.log("Clicked",e)}toggleFavorite(){this.userProvider.hasFavorite(this.session.name)?(this.userProvider.removeFavorite(this.session.name),this.isFavorite=!1):(this.userProvider.addFavorite(this.session.name),this.isFavorite=!0)}shareSession(){console.log("Clicked share session")}}return e.\u0275fac=function(t){return new(t||e)(h.ac(Kc.a),h.ac(Ci.a),h.ac(c.a))},e.\u0275cmp=h.Ub({type:e,selectors:[["page-session-detail"]],decls:29,vars:4,consts:[["slot","start"],[3,"defaultHref"],["slot","end"],[3,"click"],["slot","icon-only","name","star-outline",4,"ngIf"],["slot","icon-only","name","star",4,"ngIf"],["slot","icon-only","name","share"],["class","ion-padding",4,"ngIf"],["button","",3,"click"],["color","primary"],["slot","end","color","primary","size","small","name","cloud-download"],["slot","icon-only","name","star-outline"],["slot","icon-only","name","star"],[1,"ion-padding"],[3,"class",4,"ngFor","ngForOf"],["color","medium"]],template:function(e,t){1&e&&(h.gc(0,"ion-header"),h.gc(1,"ion-toolbar"),h.gc(2,"ion-buttons",0),h.bc(3,"ion-back-button",1),h.fc(),h.gc(4,"ion-buttons",2),h.gc(5,"ion-button",3),h.oc("click",(function(){return t.toggleFavorite()})),h.cd(6,ra,1,0,"ion-icon",4),h.cd(7,la,1,0,"ion-icon",5),h.fc(),h.gc(8,"ion-button",3),h.oc("click",(function(){return t.shareSession()})),h.bc(9,"ion-icon",6),h.fc(),h.fc(),h.fc(),h.fc(),h.gc(10,"ion-content"),h.cd(11,ga,10,6,"div",7),h.gc(12,"ion-list"),h.gc(13,"ion-item",8),h.oc("click",(function(){return t.sessionClick("watch")})),h.gc(14,"ion-label",9),h.ed(15,"Watch"),h.fc(),h.fc(),h.gc(16,"ion-item",8),h.oc("click",(function(){return t.sessionClick("add to calendar")})),h.gc(17,"ion-label",9),h.ed(18,"Add to Calendar"),h.fc(),h.fc(),h.gc(19,"ion-item",8),h.oc("click",(function(){return t.sessionClick("mark as unwatched")})),h.gc(20,"ion-label",9),h.ed(21,"Mark as Unwatched"),h.fc(),h.fc(),h.gc(22,"ion-item",8),h.oc("click",(function(){return t.sessionClick("download video")})),h.gc(23,"ion-label",9),h.ed(24,"Download Video"),h.fc(),h.bc(25,"ion-icon",10),h.fc(),h.gc(26,"ion-item",8),h.oc("click",(function(){return t.sessionClick("leave feedback")})),h.gc(27,"ion-label",9),h.ed(28,"Leave Feedback"),h.fc(),h.fc(),h.fc(),h.fc()),2&e&&(h.Lb(3),h.Ac("defaultHref",t.defaultHref),h.Lb(3),h.Ac("ngIf",!t.isFavorite),h.Lb(1),h.Ac("ngIf",t.isFavorite),h.Lb(4),h.Ac("ngIf",t.session))},directives:[s.B,s.zb,s.l,s.g,s.h,s.k,o.t,s.C,s.u,s.O,s.H,s.N,o.s,s.ub],styles:[".session-track-ionic[_ngcontent-%COMP%]{color:var(--ion-color-primary)}.session-track-angular[_ngcontent-%COMP%]{color:var(--ion-color-angular)}.session-track-communication[_ngcontent-%COMP%]{color:var(--ion-color-communication)}.session-track-tooling[_ngcontent-%COMP%]{color:var(--ion-color-tooling)}.session-track-services[_ngcontent-%COMP%]{color:var(--ion-color-services)}.session-track-design[_ngcontent-%COMP%]{color:var(--ion-color-design)}.session-track-workshop[_ngcontent-%COMP%]{color:var(--ion-color-workshop)}.session-track-food[_ngcontent-%COMP%]{color:var(--ion-color-food)}.session-track-documentation[_ngcontent-%COMP%]{color:var(--ion-color-documentation)}.session-track-navigation[_ngcontent-%COMP%]{color:var(--ion-color-navigation)}.show-favorite[_ngcontent-%COMP%]{position:relative}.icon-heart[_ngcontent-%COMP%], .icon-heart-empty[_ngcontent-%COMP%]{--border-radius:50%;--padding-start:0;--padding-end:0;position:absolute;top:5px;right:5px;width:48px;height:48px;font-size:16px;transition:transform .3s ease}.icon-heart-empty[_ngcontent-%COMP%]{transform:scale(1)}.icon-heart[_ngcontent-%COMP%]{transform:scale(0)}.show-favorite[_ngcontent-%COMP%]   .icon-heart[_ngcontent-%COMP%]{transform:scale(1)}.show-favorite[_ngcontent-%COMP%]   .icon-heart-empty[_ngcontent-%COMP%]{transform:scale(0)}h1[_ngcontent-%COMP%]{margin:0}"]}),e})()}];let pa=(()=>{class e{}return e.\u0275mod=h.Yb({type:e}),e.\u0275inj=h.Xb({factory:function(t){return new(t||e)},imports:[[c.j.forChild(ua)],c.j]}),e})(),ha=(()=>{class e{}return e.\u0275mod=h.Yb({type:e}),e.\u0275inj=h.Xb({factory:function(t){return new(t||e)},imports:[[o.c,s.Bb,pa]]}),e})();var fa=n("H5xr"),ba=n("vvyD"),ma=n("uD9u"),_a=n("iadO"),va=n("3giC"),ka=n("nYnr"),Ca=n("NITd"),ya=n("KQg/"),xa=n("hKmA"),wa=n("zTdJ"),Ma=n("oNBn"),Oa=n("qIrB"),Pa=n("oAto"),Sa=n("D7rP"),La=n("YQRf"),Aa=n("CbmF"),Ia=n("w0c1"),Ta=n("wx9n"),za=n("cH1L"),Ea=n("vxfF"),Ra=n("Wp6s"),Fa=n("ihCf"),Ba=n("NFeN"),ja=n("+0xr"),Da=n("M9IT"),Ua=n("0IaG"),$a=n("STbY"),Na=n("/1cH"),qa=n("Dh3D"),Ha=n("QibW"),Va=n("A5z7"),Ya=n("/t3+"),Xa=n("MutI"),Qa=n("f0Cb"),Ga=n("wZkO"),Wa=n("Xa2L"),Ka=n("SNkt"),Za=n("g31X");let Ja=(()=>{class e{}return e.\u0275mod=h.Yb({type:e}),e.\u0275inj=h.Xb({factory:function(t){return new(t||e)},providers:[_a.g],imports:[[o.c,i.B,i.l,s.Bb,Hc,Wc,na,ha,aa,f.c,b.a,fa.a,E.a,ba.a,me.g,un.b,_a.g,Ge.m,Xe.b,ss,Se.c,We.U,qe.e,He.c]]}),e})();h.Wc(kn.a,[o.q,o.r,o.s,o.t,o.A,o.w,o.x,o.y,o.z,o.u,o.v,i.H,i.w,i.G,i.c,i.x,i.A,i.a,i.D,i.E,i.z,i.r,i.s,i.C,i.n,i.m,i.y,i.b,i.d,i.h,i.j,i.i,i.k,i.e,i.u,i.v,i.t,s.e,s.f,s.g,s.i,s.j,s.k,s.l,s.m,s.n,s.o,s.p,s.q,s.r,s.s,s.t,s.u,s.v,s.w,s.x,s.y,s.z,s.A,s.B,s.C,s.D,s.E,s.F,s.G,s.H,s.I,s.J,s.K,s.L,s.M,s.N,s.O,s.P,s.Q,s.R,s.S,s.T,s.U,s.V,s.W,s.X,s.Y,s.Z,s.ab,s.bb,s.cb,s.db,s.eb,s.gb,s.hb,s.ib,s.jb,s.kb,s.lb,s.mb,s.nb,s.ob,s.pb,s.qb,s.rb,s.sb,s.ub,s.vb,s.wb,s.yb,s.zb,s.xb,s.tb,s.c,s.Gb,s.Jb,s.Lb,s.Mb,s.fb,s.h,s.Eb,s.Kb,s.Ob,s.Pb,s.Qb,s.Ab,c.k,c.g,c.i,c.h,c.m,f.a,b.b,ee.a,k.a,C.a,z.a,Vo.a,Xo.a,xi.a,ka.a,Ue.a,Ca.a,ya.a,xa.a,wa.a,Ma.a,Oa.a,Pa.a,T.a,Sa.a,La.a,Aa.a,xn.a,Ia.a,Ta.a,E.c,E.d,za.b,qe.b,qe.c,qe.f,qe.g,qe.h,qe.i,qe.j,Ea.a,Qe.a,Qe.c,Ge.o,Ge.n,Ra.a,Ra.f,Ra.n,Ra.d,Ra.m,Ra.l,Ra.b,Ra.e,Ra.k,Ra.i,Ra.h,Ra.g,Ra.o,Ra.c,Ze.b,Ze.a,Fa.b,Fa.c,He.b,He.d,Ba.a,ja.n,ja.i,ja.k,ja.c,ja.b,ja.m,ja.e,ja.g,ja.h,ja.a,ja.d,ja.j,ja.l,ja.f,ja.p,Da.a,_a.a,_a.b,_a.d,_a.e,_a.f,_a.h,_a.i,_a.j,_a.l,_a.k,_a.c,Ye.a,Ye.c,Ye.d,Ye.g,Ye.h,Ye.f,Ye.e,Ua.e,Ua.d,Ua.i,Ua.f,Ua.c,$a.e,$a.b,$a.d,$a.a,Na.a,Na.d,Na.c,qa.a,qa.b,cs.a,cs.c,v.a,v.c,Ha.b,Ha.a,Va.d,Va.a,Va.c,Va.e,Va.b,Va.f,Ya.a,Ya.c,yn.a,yn.b,yn.c,yn.d,yn.e,yn.f,Xa.a,Xa.h,Xa.d,Xa.b,Ge.k,Xa.c,Xa.g,Ge.r,Xa.i,Xa.f,Qa.a,Pe.a,Ne.a,Ne.j,Ne.b,Ne.d,Ne.e,Ne.h,Ne.i,Ne.c,Ne.f,Ga.c,Ga.d,Ga.a,Ga.f,Ga.e,Ga.b,Wa.a,Wa.c,me.e,me.f,me.a,me.b,me.d,me.c,un.a,Xe.a,os,ns,Se.a,Se.o,Se.e,Se.d,Se.f,Se.g,Se.h,Se.i,Se.j,Se.k,Se.l,Se.m,Se.n,We.a,We.b,We.c,We.d,We.e,We.f,We.g,We.h,We.i,We.j,We.k,We.l,We.m,We.n,We.o,We.p,We.q,We.r,We.s,We.t,We.u,We.v,We.w,We.x,We.y,We.z,We.A,We.B,We.C,We.D,We.E,We.F,We.G,We.H,We.I,We.J,We.K,We.L,We.M,We.N,We.O,We.P,We.Q,We.R,We.S,We.T,We.V,We.W,We.X,Nc,be,J,O,M,Io,_i,qo,Be,I.a,ai,Do,ma.a,L.a,wn,gn,an.a,kn.a,vn,sn,Vi,Si,Ss,_c,oc,$s,ic,gc,va.a,Ho.a,Sc],[o.b,o.G,o.p,o.k,o.E,o.g,o.C,o.F,o.d,o.f,o.i,o.j,o.l,f.d,Ka.a,Za.a,E.b])},gI9T:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("qCKp"),i=function(){function e(){this.NewTabDetectedEvent=new o.Subject,this.ExistingTabDetectedEvent=new o.Subject,this.ClosedTabDetectedEvent=new o.Subject,this.prefix="mtd-",this.initiatedNewTabMessage=!1,this.numberOfTabsOpened=1,this.newTabValue=null,this.addListener(),this.setNewTab(),this.initiatedNewTabMessage=!0}return Object.defineProperty(e.prototype,"NumberOfTabsOpened",{get:function(){return this.numberOfTabsOpened},enumerable:!0,configurable:!0}),e.prototype.addListener=function(){var e=this;window.addEventListener("storage",(function(t){t.key===e.newTabKey?(e.incrementNumberOfTabsOpened(),e.NewTabDetectedEvent.next(e.numberOfTabsOpened),e.setKey(e.existingTabKey)):t.key===e.existingTabKey?e.getLocalStorageValue(e.newTabKey)===e.newTabValue&&(e.initiatedNewTabMessage&&(e.initiatedNewTabMessage=!1,e.numberOfTabsOpened=1,e.ExistingTabDetectedEvent.next()),e.incrementNumberOfTabsOpened()):t.key===e.closingTabKey&&(e.decrementNumberOfTabsOpened(),e.ClosedTabDetectedEvent.next(e.numberOfTabsOpened))}),!1),window.addEventListener("beforeunload",(function(t){e.setKey(e.closingTabKey)}),!1)},e.prototype.setNewTab=function(){this.newTabValue=this.createUniqueValue(),this.setLocalStorageKeyValue(this.newTabKey,this.newTabValue)},Object.defineProperty(e.prototype,"newTabKey",{get:function(){return this.createUniqueKey("new-tab")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"existingTabKey",{get:function(){return this.createUniqueKey("existing-tab")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"closingTabKey",{get:function(){return this.createUniqueKey("closing-tab")},enumerable:!0,configurable:!0}),e.prototype.incrementNumberOfTabsOpened=function(){this.numberOfTabsOpened++},e.prototype.decrementNumberOfTabsOpened=function(){this.numberOfTabsOpened>0&&this.numberOfTabsOpened--},e.prototype.setKey=function(e){this.setLocalStorageKeyValue(e,this.createUniqueValue())},e.prototype.setLocalStorageKeyValue=function(e,t){window.localStorage.setItem(e,t)},e.prototype.getLocalStorageValue=function(e){return window.localStorage.getItem(e)},e.prototype.createUniqueKey=function(e){return""+this.prefix+e},e.prototype.createUniqueValue=function(){var e=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);return Date.now().toString()+e},e}();t.MultiTabDetection=i},qCKp:function(e,t,n){"use strict";n.r(t),n.d(t,"Observable",(function(){return o.a})),n.d(t,"ConnectableObservable",(function(){return i.a})),n.d(t,"GroupedObservable",(function(){return r})),n.d(t,"observable",(function(){return d.a})),n.d(t,"Subject",(function(){return a.a})),n.d(t,"BehaviorSubject",(function(){return g.a})),n.d(t,"ReplaySubject",(function(){return u.a})),n.d(t,"AsyncSubject",(function(){return p})),n.d(t,"asap",(function(){return h.a})),n.d(t,"asapScheduler",(function(){return h.b})),n.d(t,"async",(function(){return f.a})),n.d(t,"asyncScheduler",(function(){return f.b})),n.d(t,"queue",(function(){return b.a})),n.d(t,"queueScheduler",(function(){return b.b})),n.d(t,"animationFrame",(function(){return m.a})),n.d(t,"animationFrameScheduler",(function(){return m.b})),n.d(t,"VirtualTimeScheduler",(function(){return k})),n.d(t,"VirtualAction",(function(){return C})),n.d(t,"Scheduler",(function(){return y.a})),n.d(t,"Subscription",(function(){return c.a})),n.d(t,"Subscriber",(function(){return s.a})),n.d(t,"Notification",(function(){return x.a})),n.d(t,"NotificationKind",(function(){return x.b})),n.d(t,"pipe",(function(){return w.a})),n.d(t,"noop",(function(){return M.a})),n.d(t,"identity",(function(){return O.a})),n.d(t,"isObservable",(function(){return P.a})),n.d(t,"ArgumentOutOfRangeError",(function(){return S.a})),n.d(t,"EmptyError",(function(){return L.a})),n.d(t,"ObjectUnsubscribedError",(function(){return A.a})),n.d(t,"UnsubscriptionError",(function(){return I.a})),n.d(t,"TimeoutError",(function(){return T})),n.d(t,"bindCallback",(function(){return B})),n.d(t,"bindNodeCallback",(function(){return U})),n.d(t,"combineLatest",(function(){return H.a})),n.d(t,"concat",(function(){return V.a})),n.d(t,"defer",(function(){return Y.a})),n.d(t,"empty",(function(){return X.b})),n.d(t,"forkJoin",(function(){return Q.a})),n.d(t,"from",(function(){return G.a})),n.d(t,"fromEvent",(function(){return W.a})),n.d(t,"fromEventPattern",(function(){return Z})),n.d(t,"generate",(function(){return J})),n.d(t,"iif",(function(){return te})),n.d(t,"interval",(function(){return ne.a})),n.d(t,"merge",(function(){return oe.a})),n.d(t,"never",(function(){return ie.b})),n.d(t,"of",(function(){return se.a})),n.d(t,"onErrorResumeNext",(function(){return ce})),n.d(t,"pairs",(function(){return ae})),n.d(t,"partition",(function(){return ue})),n.d(t,"race",(function(){return be})),n.d(t,"range",(function(){return ve})),n.d(t,"throwError",(function(){return Ce.a})),n.d(t,"timer",(function(){return ye.a})),n.d(t,"using",(function(){return xe})),n.d(t,"zip",(function(){return Oe})),n.d(t,"scheduled",(function(){return Te.a})),n.d(t,"EMPTY",(function(){return X.a})),n.d(t,"NEVER",(function(){return ie.a})),n.d(t,"config",(function(){return ze.a}));var o=n("HDdC"),i=n("EQ5u"),s=n("7o/Q"),c=n("quSY"),a=n("XNiG");class r extends o.a{constructor(e,t,n){super(),this.key=e,this.groupSubject=t,this.refCountSubscription=n}_subscribe(e){const t=new c.a,{refCountSubscription:n,groupSubject:o}=this;return n&&!n.closed&&t.add(new l(n)),t.add(o.subscribe(e)),t}}class l extends c.a{constructor(e){super(),this.parent=e,e.count++}unsubscribe(){const e=this.parent;e.closed||this.closed||(super.unsubscribe(),e.count-=1,0===e.count&&e.attemptedToUnsubscribe&&e.unsubscribe())}}var d=n("kJWO"),g=n("2Vo4"),u=n("jtHE");class p extends a.a{constructor(){super(...arguments),this.value=null,this.hasNext=!1,this.hasCompleted=!1}_subscribe(e){return this.hasError?(e.error(this.thrownError),c.a.EMPTY):this.hasCompleted&&this.hasNext?(e.next(this.value),e.complete(),c.a.EMPTY):super._subscribe(e)}next(e){this.hasCompleted||(this.value=e,this.hasNext=!0)}error(e){this.hasCompleted||super.error(e)}complete(){this.hasCompleted=!0,this.hasNext&&super.next(this.value),super.complete()}}var h=n("7Hc7"),f=n("D0XW"),b=n("qgXg"),m=n("eNwd"),_=n("3N8a"),v=n("IjjT");let k=(()=>{class e extends v.a{constructor(e=C,t=Number.POSITIVE_INFINITY){super(e,()=>this.frame),this.maxFrames=t,this.frame=0,this.index=-1}flush(){const{actions:e,maxFrames:t}=this;let n,o;for(;(o=e[0])&&o.delay<=t&&(e.shift(),this.frame=o.delay,!(n=o.execute(o.state,o.delay))););if(n){for(;o=e.shift();)o.unsubscribe();throw n}}}return e.frameTimeFactor=10,e})();class C extends _.a{constructor(e,t,n=(e.index+=1)){super(e,t),this.scheduler=e,this.work=t,this.index=n,this.active=!0,this.index=e.index=n}schedule(e,t=0){if(!this.id)return super.schedule(e,t);this.active=!1;const n=new C(this.scheduler,this.work);return this.add(n),n.schedule(e,t)}requestAsyncId(e,t,n=0){this.delay=e.frame+n;const{actions:o}=e;return o.push(this),o.sort(C.sortActions),!0}recycleAsyncId(e,t,n=0){}_execute(e,t){if(!0===this.active)return super._execute(e,t)}static sortActions(e,t){return e.delay===t.delay?e.index===t.index?0:e.index>t.index?1:-1:e.delay>t.delay?1:-1}}var y=n("Y/cZ"),x=n("WMd4"),w=n("mCNh"),M=n("KqfI"),O=n("SpAZ"),P=n("7+OI"),S=n("4I5i"),L=n("sVev"),A=n("9ppp"),I=n("pjAE");const T=(()=>{function e(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return e.prototype=Object.create(Error.prototype),e})();var z=n("lJxs"),E=n("8Qeq"),R=n("DH7j"),F=n("z+Ro");function B(e,t,n){if(t){if(!Object(F.a)(t))return(...o)=>B(e,n)(...o).pipe(Object(z.a)(e=>Object(R.a)(e)?t(...e):t(e)));n=t}return function(...t){const i=this;let s;const c={context:i,subject:s,callbackFunc:e,scheduler:n};return new o.a(o=>{if(n)return n.schedule(j,0,{args:t,subscriber:o,params:c});if(!s){s=new p;const n=(...e)=>{s.next(e.length<=1?e[0]:e),s.complete()};try{e.apply(i,[...t,n])}catch(a){Object(E.a)(s)?s.error(a):console.warn(a)}}return s.subscribe(o)})}}function j(e){const{args:t,subscriber:n,params:o}=e,{callbackFunc:i,context:s,scheduler:c}=o;let{subject:a}=o;if(!a){a=o.subject=new p;const e=(...e)=>{this.add(c.schedule(D,0,{value:e.length<=1?e[0]:e,subject:a}))};try{i.apply(s,[...t,e])}catch(r){a.error(r)}}this.add(a.subscribe(n))}function D(e){const{value:t,subject:n}=e;n.next(t),n.complete()}function U(e,t,n){if(t){if(!Object(F.a)(t))return(...o)=>U(e,n)(...o).pipe(Object(z.a)(e=>Object(R.a)(e)?t(...e):t(e)));n=t}return function(...t){const i={subject:void 0,args:t,callbackFunc:e,scheduler:n,context:this};return new o.a(o=>{const{context:s}=i;let{subject:c}=i;if(n)return n.schedule($,0,{params:i,subscriber:o,context:s});if(!c){c=i.subject=new p;const n=(...e)=>{const t=e.shift();t?c.error(t):(c.next(e.length<=1?e[0]:e),c.complete())};try{e.apply(s,[...t,n])}catch(a){Object(E.a)(c)?c.error(a):console.warn(a)}}return c.subscribe(o)})}}function $(e){const{params:t,subscriber:n,context:o}=e,{callbackFunc:i,args:s,scheduler:c}=t;let a=t.subject;if(!a){a=t.subject=new p;const e=(...e)=>{const t=e.shift();this.add(t?c.schedule(q,0,{err:t,subject:a}):c.schedule(N,0,{value:e.length<=1?e[0]:e,subject:a}))};try{i.apply(o,[...s,e])}catch(r){this.add(c.schedule(q,0,{err:r,subject:a}))}}this.add(a.subscribe(n))}function N(e){const{value:t,subject:n}=e;n.next(t),n.complete()}function q(e){const{err:t,subject:n}=e;n.error(t)}var H=n("itXk"),V=n("GyhO"),Y=n("NXyV"),X=n("EY2u"),Q=n("cp0P"),G=n("Cfvw"),W=n("xgIS"),K=n("n6bG");function Z(e,t,n){return n?Z(e,t).pipe(Object(z.a)(e=>Object(R.a)(e)?n(...e):n(e))):new o.a(n=>{const o=(...e)=>n.next(1===e.length?e[0]:e);let i;try{i=e(o)}catch(s){return void n.error(s)}if(Object(K.a)(t))return()=>t(o,i)})}function J(e,t,n,i,s){let c,a;return 1==arguments.length?(a=e.initialState,t=e.condition,n=e.iterate,c=e.resultSelector||O.a,s=e.scheduler):void 0===i||Object(F.a)(i)?(a=e,c=O.a,s=i):(a=e,c=i),new o.a(e=>{let o=a;if(s)return s.schedule(ee,0,{subscriber:e,iterate:n,condition:t,resultSelector:c,state:o});for(;;){if(t){let n;try{n=t(o)}catch(i){return void e.error(i)}if(!n){e.complete();break}}let s;try{s=c(o)}catch(i){return void e.error(i)}if(e.next(s),e.closed)break;try{o=n(o)}catch(i){return void e.error(i)}}})}function ee(e){const{subscriber:t,condition:n}=e;if(t.closed)return;if(e.needIterate)try{e.state=e.iterate(e.state)}catch(i){return void t.error(i)}else e.needIterate=!0;if(n){let o;try{o=n(e.state)}catch(i){return void t.error(i)}if(!o)return void t.complete();if(t.closed)return}let o;try{o=e.resultSelector(e.state)}catch(i){return void t.error(i)}return t.closed||(t.next(o),t.closed)?void 0:this.schedule(e)}function te(e,t=X.a,n=X.a){return Object(Y.a)(()=>e()?t:n)}var ne=n("l5mm"),oe=n("VRyK"),ie=n("5yfJ"),se=n("LRne");function ce(...e){if(0===e.length)return X.a;const[t,...n]=e;return 1===e.length&&Object(R.a)(t)?ce(...t):new o.a(e=>{const o=()=>e.add(ce(...n).subscribe(e));return Object(G.a)(t).subscribe({next(t){e.next(t)},error:o,complete:o})})}function ae(e,t){return new o.a(t?n=>{const o=Object.keys(e),i=new c.a;return i.add(t.schedule(re,0,{keys:o,index:0,subscriber:n,subscription:i,obj:e})),i}:t=>{const n=Object.keys(e);for(let o=0;o<n.length&&!t.closed;o++){const i=n[o];e.hasOwnProperty(i)&&t.next([i,e[i]])}t.complete()})}function re(e){const{keys:t,index:n,subscriber:o,subscription:i,obj:s}=e;if(!o.closed)if(n<t.length){const e=t[n];o.next([e,s[e]]),i.add(this.schedule({keys:t,index:n+1,subscriber:o,subscription:i,obj:s}))}else o.complete()}function le(e,t){function n(){return!n.pred.apply(n.thisArg,arguments)}return n.pred=e,n.thisArg=t,n}var de=n("SeVD"),ge=n("pLZG");function ue(e,t,n){return[Object(ge.a)(t,n)(new o.a(Object(de.a)(e))),Object(ge.a)(le(t,n))(new o.a(Object(de.a)(e)))]}var pe=n("yCtX"),he=n("l7GE"),fe=n("ZUHj");function be(...e){if(1===e.length){if(!Object(R.a)(e[0]))return e[0];e=e[0]}return Object(pe.a)(e,void 0).lift(new me)}class me{call(e,t){return t.subscribe(new _e(e))}}class _e extends he.a{constructor(e){super(e),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}_next(e){this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(let n=0;n<t&&!this.hasFirst;n++){const t=e[n],o=Object(fe.a)(this,t,void 0,n);this.subscriptions&&this.subscriptions.push(o),this.add(o)}this.observables=null}}notifyNext(e,t,n){if(!this.hasFirst){this.hasFirst=!0;for(let e=0;e<this.subscriptions.length;e++)if(e!==n){let t=this.subscriptions[e];t.unsubscribe(),this.remove(t)}this.subscriptions=null}this.destination.next(t)}}function ve(e=0,t,n){return new o.a(o=>{void 0===t&&(t=e,e=0);let i=0,s=e;if(n)return n.schedule(ke,0,{index:i,count:t,start:e,subscriber:o});for(;;){if(i++>=t){o.complete();break}if(o.next(s++),o.closed)break}})}function ke(e){const{start:t,index:n,count:o,subscriber:i}=e;n>=o?i.complete():(i.next(t),i.closed||(e.index=n+1,e.start=t+1,this.schedule(e)))}var Ce=n("z6cu"),ye=n("PqYM");function xe(e,t){return new o.a(n=>{let o,i;try{o=e()}catch(c){return void n.error(c)}try{i=t(o)}catch(c){return void n.error(c)}const s=(i?Object(G.a)(i):X.a).subscribe(n);return()=>{s.unsubscribe(),o&&o.unsubscribe()}})}var we=n("Lhse"),Me=n("zx2A");function Oe(...e){const t=e[e.length-1];return"function"==typeof t&&e.pop(),Object(pe.a)(e,void 0).lift(new Pe(t))}class Pe{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new Se(e,this.resultSelector))}}class Se extends s.a{constructor(e,t,n=Object.create(null)){super(e),this.resultSelector=t,this.iterators=[],this.active=0,this.resultSelector="function"==typeof t?t:void 0}_next(e){const t=this.iterators;Object(R.a)(e)?t.push(new Ae(e)):t.push("function"==typeof e[we.a]?new Le(e[we.a]()):new Ie(this.destination,this,e))}_complete(){const e=this.iterators,t=e.length;if(this.unsubscribe(),0!==t){this.active=t;for(let n=0;n<t;n++){let t=e[n];t.stillUnsubscribed?this.destination.add(t.subscribe()):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const e=this.iterators,t=e.length,n=this.destination;for(let s=0;s<t;s++){let t=e[s];if("function"==typeof t.hasValue&&!t.hasValue())return}let o=!1;const i=[];for(let s=0;s<t;s++){let t=e[s],c=t.next();if(t.hasCompleted()&&(o=!0),c.done)return void n.complete();i.push(c.value)}this.resultSelector?this._tryresultSelector(i):n.next(i),o&&n.complete()}_tryresultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}class Le{constructor(e){this.iterator=e,this.nextResult=e.next()}hasValue(){return!0}next(){const e=this.nextResult;return this.nextResult=this.iterator.next(),e}hasCompleted(){const e=this.nextResult;return Boolean(e&&e.done)}}class Ae{constructor(e){this.array=e,this.index=0,this.length=0,this.length=e.length}[we.a](){return this}next(e){const t=this.index++;return t<this.length?{value:this.array[t],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class Ie extends Me.b{constructor(e,t,n){super(e),this.parent=t,this.observable=n,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[we.a](){return this}next(){const e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(e){this.buffer.push(e),this.parent.checkIterators()}subscribe(){return Object(Me.c)(this.observable,new Me.a(this))}}var Te=n("7HRe"),ze=n("2fFW")}}]);