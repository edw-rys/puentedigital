(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"+J/j":function(t,e,i){"use strict";i.r(e),i.d(e,"momentAdapterFactory",(function(){return lo})),i.d(e,"CoursePanelPageModule",(function(){return uo}));var c=i("ofXK"),s=i("3Pt+"),n=i("TEn/"),o=i("tyNb"),a=i("mrSG"),r=i("ITIy"),l=i("m8mU"),d=i("iX7+"),u=i("DnI1"),g=i("wd/R"),m=i("p9xo"),f=i("mNEo"),h=i("Yc22"),p=i("X+KH"),b=i("PkRB"),v=i("cxbk"),_=i("fXoL"),y=i("tk/3");let k=(()=>{class t{constructor(t){this.httpClient=t,this.url=m.i.homework}get(t){return this.httpClient.get(this.url+"get/"+t)}first(t){return this.httpClient.get(this.url+"first/"+t)}save(t,e){return this.httpClient.post(this.url+"store/"+t,e)}savePunctucaction(t,e){return this.httpClient.post(this.url+"update-punctuaction/"+t,e)}saveFiles(t,e){return this.httpClient.post(this.url+"upload-file/"+e,t)}update(t,e){return this.httpClient.put(this.url+"update/"+e,t)}returnHomework(t,e){return this.httpClient.put(this.url+"return-homework/"+t,{id:e})}delete(t){return this.httpClient.delete(this.url+"delete/"+t)}storeComment(t,e={}){return this.httpClient.post(this.url+"store-comment/"+t,e)}deleteComment(t){return this.httpClient.delete(this.url+"delete-comment/"+t)}}return t.\u0275fac=function(e){return new(e||t)(_.kc(y.b))},t.\u0275prov=_.Wb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var L=i("bJYY"),x=i("6f/U"),w=i("bv9b"),A=i("NITd"),S=i("7EHt"),C=i("STbY"),I=i("bTqV"),O=i("Qu3c"),P=i("sYmb"),M=i("SNkt");function T(t,e){1&t&&_.bc(0,"mat-progress-bar",9)}function F(t,e){if(1&t){const t=_.hc();_.gc(0,"p",2),_.oc("click",(function(){_.Sc(t);const e=_.sc(3);return e.openQualificationPane(e.assignment)})),_.ed(1),_.fc()}if(2&t){const t=_.sc(3);_.Lb(1),_.hd("",t.assignment.qualification||"____","/",t.activity.qualification,"")}}function z(t,e){if(1&t){const t=_.hc();_.gc(0,"input",21),_.oc("keypress",(function(e){_.Sc(t);const i=_.sc(3);return i.saveQualificationAssigment(i.assignment,"key",e)}))("ngModelChange",(function(e){return _.Sc(t),_.sc(3).assignment.cpy_qualification=e})),_.fc()}if(2&t){const t=_.sc(3);_.Bc("max",t.activity.qualification-0),_.Ac("ngModel",t.assignment.cpy_qualification)}}function D(t,e){if(1&t){const t=_.hc();_.gc(0,"ion-button",22),_.oc("click",(function(e){_.Sc(t);const i=_.sc(3);return i.saveQualificationAssigment(i.assignment,"",e)})),_.bc(1,"ion-icon",23),_.fc()}}function q(t,e){if(1&t){const t=_.hc();_.gc(0,"ion-button",24),_.oc("click",(function(){_.Sc(t);const e=_.sc(3);return e.assignment.open_qualification=!e.assignment.open_qualification})),_.bc(1,"ion-icon",25),_.fc()}}function E(t,e){if(1&t&&(_.gc(0,"div",16),_.cd(1,F,2,2,"p",17),_.cd(2,z,1,2,"input",18),_.cd(3,D,2,0,"ion-button",19),_.cd(4,q,2,0,"ion-button",20),_.fc()),2&t){const t=_.sc(2);_.Lb(1),_.Ac("ngIf",!t.assignment.open_qualification),_.Lb(1),_.Ac("ngIf",t.assignment.open_qualification),_.Lb(1),_.Ac("ngIf",t.assignment.open_qualification),_.Lb(1),_.Ac("ngIf",t.assignment.open_qualification)}}function j(t,e){if(1&t&&(_.gc(0,"ion-card"),_.gc(1,"ion-card-content",10),_.gc(2,"ion-item"),_.gc(3,"div",11),_.gc(4,"div",12),_.bc(5,"img",13),_.fc(),_.fc(),_.gc(6,"div",14),_.gc(7,"small"),_.ed(8),_.fc(),_.fc(),_.cd(9,E,5,4,"div",15),_.fc(),_.fc(),_.fc()),2&t){const t=_.sc();_.Lb(5),_.Ac("src",null!=t.assignment.user&&null!=t.assignment.user.information?t.assignment.user.information.image_url:t.profile_img_route,_.Vc),_.Lb(3),_.gd("",null!=t.assignment.user?t.assignment.user.name:"-"," "),_.Lb(1),_.Ac("ngIf",t.activity.is_my)}}function B(t,e){if(1&t&&_.bc(0,"panel-instructions-activity",26),2&t){const t=_.sc();_.Ac("activity",t.assignment.homework)("show_points",!1)("show_button_open",!1)("expanded_panel",!0)("show_status",!0)}}function R(t,e){if(1&t){const t=_.hc();_.gc(0,"ion-card"),_.gc(1,"ion-card-content"),_.gc(2,"ion-button",27),_.oc("click",(function(){_.Sc(t);const e=_.sc();return e.returnHomework(e.assignment.uuid,e.assignment.homework.uuid)})),_.ed(3),_.tc(4,"translate"),_.fc(),_.fc(),_.fc()}if(2&t){const t=_.sc();_.Lb(2),_.Ac("disabled","returned"==t.assignment.status_task),_.Lb(1),_.gd(" ",_.uc(4,2,"buttons.return")," ")}}function Q(t,e){if(1&t&&(_.gc(0,"button",51),_.rc(),_.gc(1,"svg",52),_.bc(2,"path",53),_.fc(),_.fc()),2&t){_.sc();const t=_.Oc(11);_.Ac("matMenuTriggerFor",t)}}function V(t,e){if(1&t){const t=_.hc();_.gc(0,"ion-icon",54),_.oc("click",(function(){_.Sc(t);const e=_.sc(2).$implicit;return _.sc(2).updateComment(e)})),_.tc(1,"translate"),_.fc()}2&t&&_.Ac("matTooltip",_.uc(1,1,"buttons.publish"))}function U(t,e){1&t&&_.bc(0,"ion-icon",55)}function N(t,e){if(1&t){const t=_.hc();_.gc(0,"div",34),_.gc(1,"input",35),_.oc("ngModelChange",(function(e){return _.Sc(t),_.sc().$implicit.aux_text=e}))("keyup.enter",(function(){_.Sc(t);const e=_.sc().$implicit;return _.sc(2).updateComment(e)})),_.tc(2,"translate"),_.fc(),_.cd(3,V,2,3,"ion-icon",36),_.cd(4,U,1,0,"ion-icon",37),_.fc()}if(2&t){const t=_.sc().$implicit;_.Lb(1),_.Bc("placeholder",_.uc(2,5,"pages.course.please_comment")),_.Ac("disabled",t.comment_upload)("ngModel",t.aux_text),_.Lb(2),_.Ac("ngIf",!t.comment_upload),_.Lb(1),_.Ac("ngIf",t.comment_upload)}}function H(t,e){if(1&t&&_.bc(0,"p",56),2&t){const t=_.sc().$implicit;_.Ac("innerHTML",t.text,_.Tc)}}function J(t,e){if(1&t){const t=_.hc();_.gc(0,"div",38),_.gc(1,"div",39),_.gc(2,"div",11),_.bc(3,"img",40),_.fc(),_.gc(4,"div",41),_.gc(5,"div",42),_.gc(6,"span",43),_.ed(7),_.fc(),_.gc(8,"span",44),_.cd(9,Q,3,1,"button",45),_.fc(),_.gc(10,"mat-menu",null,46),_.gc(12,"button",47),_.oc("click",(function(){_.Sc(t);const i=e.$implicit,c=e.index,s=_.sc(2);return s.removeComment(s.assignment,i,c)})),_.bc(13,"ion-icon",25),_.ed(14),_.tc(15,"translate"),_.fc(),_.fc(),_.fc(),_.gc(16,"div",48),_.ed(17),_.tc(18,"formatDatesTime"),_.fc(),_.gc(19,"div",28),_.gc(20,"div",32),_.cd(21,N,5,7,"div",49),_.fc(),_.cd(22,H,1,1,"p",50),_.fc(),_.fc(),_.fc(),_.fc()}if(2&t){const t=e.$implicit,i=_.sc(2);_.Lb(3),_.Ac("alt",null!=t.user_create?t.user_create.name:"-")("src",null!=t.user_create&&null!=t.user_create.information?t.user_create.information.image_url:i.profile_img_route,_.Vc),_.Lb(4),_.fd(null!=t.user_create?t.user_create.name:"-"),_.Lb(2),_.Ac("ngIf",t.is_my),_.Lb(5),_.gd(" ",_.uc(15,8,"buttons.delete")," "),_.Lb(3),_.gd("",_.uc(18,10,t.date_created)," "),_.Lb(4),_.Ac("ngIf",t.edit_mode),_.Lb(1),_.Ac("ngIf",!t.edit_mode)}}function Y(t,e){if(1&t){const t=_.hc();_.gc(0,"ion-icon",54),_.oc("click",(function(){_.Sc(t);const e=_.sc(2);return e.submitComment(e.assignment)})),_.tc(1,"translate"),_.fc()}2&t&&_.Ac("matTooltip",_.uc(1,1,"buttons.publish"))}function W(t,e){1&t&&_.bc(0,"ion-icon",55)}function G(t,e){if(1&t){const t=_.hc();_.gc(0,"ion-card",28),_.gc(1,"mat-expansion-panel",29),_.gc(2,"mat-expansion-panel-header",30),_.gc(3,"ion-card-header"),_.gc(4,"ion-card-title"),_.gc(5,"mat-panel-subtitle"),_.ed(6),_.tc(7,"translate"),_.fc(),_.fc(),_.fc(),_.fc(),_.gc(8,"div"),_.cd(9,J,23,12,"div",31),_.gc(10,"div",32),_.gc(11,"div",33),_.bc(12,"img",13),_.fc(),_.gc(13,"div",34),_.gc(14,"input",35),_.oc("ngModelChange",(function(e){return _.Sc(t),_.sc().assignment.comment_input=e}))("keyup.enter",(function(){_.Sc(t);const e=_.sc();return e.submitComment(e.assignment)})),_.tc(15,"translate"),_.fc(),_.cd(16,Y,2,3,"ion-icon",36),_.cd(17,W,1,0,"ion-icon",37),_.fc(),_.fc(),_.fc(),_.fc(),_.fc()}if(2&t){const t=_.sc();_.Lb(6),_.hd(" ",_.uc(7,9,"pages.course.comments")," ",t.assignment.total_comments," "),_.Lb(3),_.Ac("ngForOf",t.assignment.comments),_.Lb(3),_.Bc("src",t.user_profile,_.Vc),_.Lb(2),_.Bc("placeholder",_.uc(15,11,"pages.course.please_comment_activity")),_.Ac("disabled",t.assignment.comment_upload)("ngModel",t.assignment.comment_input),_.Lb(2),_.Ac("ngIf",!t.assignment.comment_upload),_.Lb(1),_.Ac("ngIf",t.assignment.comment_upload)}}function K(t,e){if(1&t){const t=_.hc();_.gc(0,"ion-button",24),_.oc("click",(function(){_.Sc(t);const i=e.$implicit;return _.sc(3).openQuestionary(i.uuid)})),_.ed(1),_.tc(2,"translate"),_.tc(3,"translate"),_.fc()}if(2&t){const t=e.$implicit,i=e.index;_.Lb(1),_.jd("",_.uc(2,4,"forms.attempt_num")," ",i+1,", ",_.uc(3,6,"forms.qualificated"),": (",t.qualification,")")}}function X(t,e){if(1&t&&(_.gc(0,"div"),_.cd(1,K,4,8,"ion-button",58),_.fc()),2&t){const t=_.sc(2);_.Lb(1),_.Ac("ngForOf",t.assignment.resolves_questionary_ids)}}function Z(t,e){if(1&t&&(_.gc(0,"div"),_.gc(1,"ion-card"),_.gc(2,"ion-card-header"),_.gc(3,"ion-card-title",57),_.ed(4),_.fc(),_.fc(),_.gc(5,"ion-card-content"),_.gc(6,"p"),_.gc(7,"strong"),_.ed(8),_.tc(9,"translate"),_.fc(),_.ed(10,": "),_.gc(11,"span"),_.ed(12),_.tc(13,"translate"),_.fc(),_.fc(),_.gc(14,"p"),_.gc(15,"strong"),_.ed(16),_.tc(17,"translate"),_.fc(),_.ed(18,": "),_.gc(19,"span"),_.ed(20),_.tc(21,"translate"),_.fc(),_.fc(),_.gc(22,"p"),_.gc(23,"strong"),_.ed(24),_.tc(25,"translate"),_.fc(),_.ed(26,": "),_.gc(27,"span"),_.ed(28),_.tc(29,"translate"),_.fc(),_.fc(),_.gc(30,"p"),_.gc(31,"strong"),_.ed(32),_.tc(33,"translate"),_.fc(),_.ed(34,": "),_.gc(35,"span"),_.ed(36),_.tc(37,"translate"),_.fc(),_.fc(),_.gc(38,"p"),_.gc(39,"strong"),_.ed(40),_.tc(41,"translate"),_.fc(),_.ed(42,": "),_.gc(43,"span"),_.ed(44),_.fc(),_.fc(),_.gc(45,"p"),_.gc(46,"strong"),_.ed(47),_.tc(48,"translate"),_.fc(),_.ed(49,": "),_.gc(50,"span"),_.ed(51),_.fc(),_.fc(),_.gc(52,"p"),_.gc(53,"strong"),_.ed(54),_.tc(55,"translate"),_.fc(),_.ed(56,": "),_.gc(57,"span"),_.ed(58),_.fc(),_.fc(),_.cd(59,X,2,1,"div",6),_.fc(),_.fc(),_.fc()),2&t){const t=_.sc();_.Lb(4),_.fd(t.activity.questionary.title),_.Lb(4),_.fd(_.uc(9,16,"forms.qualification_method")),_.Lb(4),_.gd("",_.uc(13,18,"forms."+t.activity.questionary.application_methods)," "),_.Lb(4),_.fd(_.uc(17,20,"forms.question_order")),_.Lb(4),_.gd("",_.uc(21,22,"forms."+t.activity.questionary.question_order)," "),_.Lb(4),_.fd(_.uc(25,24,"forms.items_per_page_title")),_.Lb(4),_.gd("","all"==t.activity.questionary.items_per_page?_.uc(29,26,"forms.all"):t.activity.questionary.items_per_page," "),_.Lb(4),_.fd(_.uc(33,28,"forms.order_answers_random")),_.Lb(4),_.gd("",_.uc(37,30,"forms."+t.activity.questionary.order_answers_random)," "),_.Lb(4),_.fd(_.uc(41,32,"forms.time_limit")),_.Lb(4),_.gd("",t.activity.questionary.max_time," "),_.Lb(3),_.fd(_.uc(48,34,"forms.attempts_allowed")),_.Lb(4),_.gd("",t.activity.questionary.attempts_allowed," "),_.Lb(3),_.fd(_.uc(55,36,"forms.attempts_made")),_.Lb(4),_.gd("",t.assignment.resolves_questionary_ids?t.assignment.resolves_questionary_ids.length:0," "),_.Lb(1),_.Ac("ngIf",t.assignment.resolves_questionary_ids)}}let tt=(()=>{class t{constructor(t,e,i,c,s,n,o){this.modalCtrl=t,this.navParams=e,this.activitiesService=i,this.toastService=c,this.alertController=s,this.homeworkActivitiesService=n,this.controlErroresService=o,this.scrollbarStyle=v.a.scrollbarStyle,this.activity=null,this.loading=!0,this.loadingPanel=!0,this.profile_img_route="/assets/images/profile-8.jpg",this.user_profile="/assets/images/profile-8.jpg",this.resolves_questionary_ids=[],this.activity=this.navParams.data.activity,this.user_profile=this.navParams.data.user_profile,this.profile_img_route=this.navParams.data.profile_img_route,this.assignment=this.navParams.data.assignment}ngOnInit(){this.getHomework(this.assignment),"1"==this.activity.can_comment&&this.getComments()}getComments(){this.activitiesService.getComments(this.activity.assignments[0].uuid).subscribe(t=>{this.assignment.comments=t.data})}dismiss(){this.modalCtrl.dismiss()}getHomework(t){this.loadingPanel=!0,this.homeworkActivitiesService.first(t.uuid).subscribe(t=>{this.loadingPanel=!1,this.assignment.homework=t.data,this.assignment.homework.title="Entrega del estudiante",this.assignment.status_task=this.assignment.homework.assignment.status_task,this.assignment.status_task=this.assignment.homework.assignment.status_task,this.assignment.qualification=this.assignment.homework.assignment.qualification},t=>{this.loadingPanel=!1,this.controlErroresService.control(t)})}openQualificationPane(t){t.open_qualification=!t.open_qualification,t.cpy_qualification=t.qualification}saveQualificationAssigment(t,e="",i){return"key"==e&&13!=i.keyCode?i.keyCode:t.cpy_qualification>+this.activity.qualification||t.cpy_qualification<0?(this.toastService.presentToast("Calificaci\xf3n no admitida","warning"),!1):void this.activitiesService.saveQualification(t.uuid,{qualification:t.cpy_qualification}).subscribe(e=>{t.open_qualification=!t.open_qualification,t.status_task="qualificated",t.qualification=t.cpy_qualification},t=>{this.controlErroresService.control(t)})}submitComment(t){t.comment_input?(t.comment_upload=!0,this.activitiesService.storeComment(t.uuid,{text:t.comment_input}).subscribe(e=>{t.comment_input="",isNaN(t.total_comments)?t.total_comments=1:t.total_comments++,t.comment_upload=!1,Array.isArray(t.comments)&&t.comments.push(e.data)},e=>{t.comment_upload=!1,this.controlErroresService.control(e)})):this.toastService.presentToast("\xa1Agregue un comentario para poder publicarlo!","warning")}removeComment(t,e,i){return Object(a.b)(this,void 0,void 0,(function*(){const c=yield this.alertController.create({header:"Eliminar",message:"\xbfDesea eliminar este comentario?",buttons:[{text:"Cancelar",role:"cancel"},{text:"Eliminar",role:"destructive",handler:()=>{this.loading=!0,this.activitiesService.deleteComment(e.uuid).subscribe(e=>{this.loading=!1,t.comments.splice(i,1),isNaN(t.total_comments)||t.total_comments--,this.toastService.presentToast(e.message,e.status)},t=>{this.loading=!1,this.controlErroresService.control(t)})}}]});yield c.present()}))}returnHomework(t,e){return Object(a.b)(this,void 0,void 0,(function*(){const i=yield this.alertController.create({header:"Eliminar",message:"Est\xe1 seguro(a) de devolver esta tarea?",buttons:[{text:"Cancelar",role:"cancel"},{text:"Devolver",role:"destructive",handler:()=>{this.loadingPanel=!0,this.homeworkActivitiesService.returnHomework(t,e).subscribe(t=>{this.loadingPanel=!1,this.toastService.presentToast(t.message,t.status),this.assignment.status_task=t.assignment_status,this.assignment.homework.status=t.homework_status},t=>{this.loadingPanel=!1,this.controlErroresService.control(t)})}}]});yield i.present()}))}openQuestionary(t){return Object(a.b)(this,void 0,void 0,(function*(){const e=yield this.modalCtrl.create({component:L.a,cssClass:"modal-fullscreen-100",swipeToClose:!0,componentProps:{activity_uuid:this.activity.uuid,response_uuid:t}});yield e.present();const{data:i}=yield e.onWillDismiss();console.log(i)}))}}return t.\u0275fac=function(e){return new(e||t)(_.ac(n.Db),_.ac(n.Fb),_.ac(r.a),_.ac(b.a),_.ac(n.b),_.ac(k),_.ac(l.a))},t.\u0275cmp=_.Ub({type:t,selectors:[["app-panel-task-delivery-students"]],decls:15,vars:10,consts:[["translucent","true"],["slot","end"],[3,"click"],["name","close-outline"],["mode","indeterminate",4,"ngIf"],["fullscreen","true",3,"scrollbar"],[4,"ngIf"],[3,"activity","show_points","show_button_open","expanded_panel","show_status",4,"ngIf"],["class","mt-2",4,"ngIf"],["mode","indeterminate"],[1,"item-sub-assignment",2,"padding","0"],[1,"w-10","h-10","sm:w-12","sm:h-12","flex-none","image-fit"],[1,"w-10","h-10","flex-none","image-fit"],["alt","--",1,"rounded-full",3,"src"],[1,"ml-3","mr-auto"],["class","ml-auto",4,"ngIf"],[1,"ml-auto"],[3,"click",4,"ngIf"],["type","number","name","title","class","intro-x login__input form-control py-3 px-4 border-gray-300 block","min","0",3,"ngModel","max","keypress","ngModelChange",4,"ngIf"],["size","small","color","success",3,"click",4,"ngIf"],["size","small","color","danger",3,"click",4,"ngIf"],["type","number","name","title","min","0",1,"intro-x","login__input","form-control","py-3","px-4","border-gray-300","block",3,"ngModel","max","keypress","ngModelChange"],["size","small","color","success",3,"click"],["name","checkmark-outline"],["size","small","color","danger",3,"click"],["name","trash-outline"],[3,"activity","show_points","show_button_open","expanded_panel","show_status"],["color","warning","size","small",3,"disabled","click"],[1,"mt-2"],["hideToggle",""],[2,"padding","0"],["class","pt-5",4,"ngFor","ngForOf"],[1,"w-full","flex","items-center","mt-3"],[1,"w-8","h-8","flex-none","image-fit","mr-3"],[1,"flex-1","relative","text-gray-700"],["type","text",1,"form-control","form-control-rounded","border-transparent","bg-gray-200","pr-10","placeholder-theme-13",3,"disabled","ngModel","placeholder","ngModelChange","keyup.enter"],["name","send-outline","class","c-pointer absolute my-auto inset-y-0 mr-3 right-0","fill","outline",3,"matTooltip","click",4,"ngIf"],["name","cloud-upload-outline","class","c-pointer absolute my-auto inset-y-0 mr-3 right-0","fill","outline",4,"ngIf"],[1,"pt-5"],[1,"flex"],[1,"rounded-full",3,"alt","src"],[1,"ml-3","flex-1"],[1,"flex","items-center"],[1,"font-medium"],["href","",1,"ml-auto","text-xs","text-gray-600"],["mat-button","",3,"matMenuTriggerFor",4,"ngIf"],["menuCommentPost","matMenu"],["mat-menu-item","",3,"click"],[1,"text-gray-600","text-xs","sm:text-sm"],["class","flex-1 relative text-gray-700",4,"ngIf"],[3,"innerHTML",4,"ngIf"],["mat-button","",3,"matMenuTriggerFor"],["focusable","false","width","24","height","24","viewBox","0 0 24 24",1,"NMm5M"],["d","M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"],["name","send-outline","fill","outline",1,"c-pointer","absolute","my-auto","inset-y-0","mr-3","right-0",3,"matTooltip","click"],["name","cloud-upload-outline","fill","outline",1,"c-pointer","absolute","my-auto","inset-y-0","mr-3","right-0"],[3,"innerHTML"],[1,"text-center"],["size","small","color","danger",3,"click",4,"ngFor","ngForOf"]],template:function(t,e){1&t&&(_.gc(0,"ion-header",0),_.gc(1,"ion-toolbar"),_.gc(2,"ion-title"),_.ed(3),_.tc(4,"translate"),_.fc(),_.gc(5,"ion-buttons",1),_.gc(6,"ion-button",2),_.oc("click",(function(){return e.dismiss()})),_.bc(7,"ion-icon",3),_.fc(),_.fc(),_.fc(),_.cd(8,T,1,0,"mat-progress-bar",4),_.fc(),_.gc(9,"ion-content",5),_.cd(10,j,10,3,"ion-card",6),_.cd(11,B,1,5,"panel-instructions-activity",7),_.cd(12,R,5,4,"ion-card",6),_.cd(13,G,18,13,"ion-card",8),_.cd(14,Z,60,38,"div",6),_.fc()),2&t&&(_.Lb(3),_.fd(_.uc(4,8,"forms.visor_delivery")),_.Lb(5),_.Ac("ngIf",e.loadingPanel),_.Lb(1),_.Bc("scrollbar",e.scrollbarStyle),_.Lb(1),_.Ac("ngIf",e.assignment),_.Lb(1),_.Ac("ngIf",e.assignment&&e.assignment.homework),_.Lb(1),_.Ac("ngIf",e.assignment&&e.assignment.homework&&e.activity.is_my),_.Lb(1),_.Ac("ngIf",e.assignment&&e.assignment.comments&&"1"==e.activity.can_comment),_.Lb(1),_.Ac("ngIf",e.activity.questionary&&e.assignment))},directives:[n.B,n.zb,n.xb,n.l,n.k,n.C,c.t,n.u,x.b,w.a,n.m,n.n,n.H,s.x,s.c,s.r,s.u,A.a,S.c,S.g,n.o,n.q,c.s,C.e,C.b,I.b,C.d,O.a],pipes:[P.d,M.a],styles:[""]}),t})();var et=i("lsO8"),it=i("YQMm"),ct=i("oAto"),st=i("5eHb"),nt=i("eIsa");function ot(t,e){if(1&t){const t=_.hc();_.gc(0,"ion-button",5),_.oc("click",(function(){return _.Sc(t),_.sc().startTourJS()})),_.bc(1,"ion-icon",6),_.ed(2),_.tc(3,"translate"),_.fc()}2&t&&(_.Lb(2),_.gd(" ",_.uc(3,1,"menu.start_tour"),"\n"))}function at(t,e){if(1&t){const t=_.hc();_.gc(0,"ion-button",7),_.oc("click",(function(){_.Sc(t);const e=_.sc();return e.openGraphQuestionary(e.activity)})),_.bc(1,"ion-icon",8),_.gc(2,"span",9),_.ed(3),_.tc(4,"translate"),_.fc(),_.fc()}2&t&&(_.Lb(3),_.fd(_.uc(4,1,"menu.reports")))}function rt(t,e){1&t&&(_.gc(0,"ion-segment-button",16),_.ed(1),_.tc(2,"translate"),_.fc()),2&t&&(_.Lb(1),_.gd(" ",_.uc(2,1,"pages.course.integrants_in_quiz")," "))}function lt(t,e){if(1&t){const t=_.hc();_.gc(0,"p",34),_.oc("click",(function(){_.Sc(t);const e=_.sc().$implicit;return _.sc(4).openQualificationPane(e)})),_.ed(1),_.fc()}if(2&t){const t=_.sc().$implicit,e=_.sc(4);_.Lb(1),_.hd("",t.qualification||"____","/",e.activity.qualification,"")}}function dt(t,e){if(1&t){const t=_.hc();_.gc(0,"input",35),_.oc("keypress",(function(e){_.Sc(t);const i=_.sc().$implicit;return _.sc(4).saveQualificationAssigment(i,"key",e)}))("ngModelChange",(function(e){return _.Sc(t),_.sc().$implicit.cpy_qualification=e})),_.fc()}if(2&t){const t=_.sc().$implicit,e=_.sc(4);_.Bc("max",e.activity.qualification-0),_.Ac("ngModel",t.cpy_qualification)}}function ut(t,e){if(1&t){const t=_.hc();_.gc(0,"ion-button",36),_.oc("click",(function(e){_.Sc(t);const i=_.sc().$implicit;return _.sc(4).saveQualificationAssigment(i,"",e)})),_.bc(1,"ion-icon",37),_.fc()}}function gt(t,e){if(1&t){const t=_.hc();_.gc(0,"ion-button",38),_.oc("click",(function(){_.Sc(t);const e=_.sc().$implicit;return e.open_qualification=!e.open_qualification})),_.bc(1,"ion-icon",39),_.fc()}}function mt(t,e){if(1&t){const t=_.hc();_.gc(0,"ion-card"),_.gc(1,"ion-card-content",23),_.gc(2,"ion-item",24),_.gc(3,"div",25),_.oc("click",(function(){_.Sc(t);const i=e.$implicit;return _.sc(4).openAsignmentModal(i)})),_.gc(4,"div",26),_.bc(5,"img",27),_.fc(),_.fc(),_.gc(6,"div",28),_.oc("click",(function(){_.Sc(t);const i=e.$implicit;return _.sc(4).openAsignmentModal(i)})),_.gc(7,"small"),_.ed(8),_.fc(),_.fc(),_.gc(9,"div",28),_.oc("click",(function(){_.Sc(t);const i=e.$implicit;return _.sc(4).openAsignmentModal(i)})),_.gc(10,"small",24),_.ed(11),_.tc(12,"translate"),_.fc(),_.fc(),_.gc(13,"div",29),_.cd(14,lt,2,2,"p",30),_.cd(15,dt,1,2,"input",31),_.cd(16,ut,2,0,"ion-button",32),_.cd(17,gt,2,0,"ion-button",33),_.fc(),_.fc(),_.fc(),_.fc()}if(2&t){const t=e.$implicit,i=e.index,c=_.sc(4);_.Lb(2),_.Ac("ngClass",0==i?"first-assignmet":""),_.Lb(3),_.Ac("src",null!=t.user&&null!=t.user.information?t.user.information.image_url:c.profile_img_route,_.Vc),_.Lb(3),_.gd("",null!=t.user?t.user.name:"-"," "),_.Lb(2),_.Ac("ngClass","badge badge-ng-pers color-"+t.status_task),_.Lb(1),_.gd("",_.uc(12,10,"statuses."+t.status_task)," "),_.Lb(2),_.Ac("ngClass",0==i?"first-assignmet-qualification":""),_.Lb(1),_.Ac("ngIf",!t.open_qualification),_.Lb(1),_.Ac("ngIf",t.open_qualification),_.Lb(1),_.Ac("ngIf",t.open_qualification),_.Lb(1),_.Ac("ngIf",t.open_qualification)}}function ft(t,e){if(1&t&&(_.gc(0,"div",17),_.gc(1,"ion-grid",18),_.gc(2,"ion-row",19),_.gc(3,"ion-col",20),_.gc(4,"ion-list",21),_.cd(5,mt,18,12,"ion-card",22),_.fc(),_.fc(),_.fc(),_.fc(),_.fc()),2&t){const t=_.sc(3);_.Lb(5),_.Ac("ngForOf",t.activity.assignments)}}function ht(t,e){if(1&t&&(_.gc(0,"p"),_.ed(1),_.fc()),2&t){const t=_.sc().$implicit,e=_.sc(4);_.Lb(1),_.hd("",t.qualification||"____","/",e.activity.qualification,"")}}function pt(t,e){if(1&t){const t=_.hc();_.gc(0,"ion-card",34),_.oc("click",(function(){_.Sc(t);const i=e.$implicit;return _.sc(4).openQuestionaryVisor(i.uuid,i.status)})),_.gc(1,"ion-card-content",23),_.gc(2,"ion-item",24),_.gc(3,"div",41),_.gc(4,"div",26),_.bc(5,"img",27),_.fc(),_.fc(),_.gc(6,"div",42),_.gc(7,"small"),_.ed(8),_.fc(),_.fc(),_.gc(9,"div",42),_.gc(10,"small",24),_.ed(11),_.tc(12,"translate"),_.fc(),_.fc(),_.gc(13,"div",29),_.cd(14,ht,2,2,"p",4),_.fc(),_.fc(),_.fc(),_.fc()}if(2&t){const t=e.$implicit,i=e.index,c=_.sc(4);_.Lb(2),_.Ac("ngClass",0==i?"first-assignmet":""),_.Lb(3),_.Ac("src",null!=t.user&&null!=t.user.information?t.user.information.image_url:c.profile_img_route,_.Vc),_.Lb(3),_.gd("",null!=t.user?t.user.name:"-"," "),_.Lb(2),_.Ac("ngClass","badge badge-ng-pers color-"+t.status),_.Lb(1),_.gd("",_.uc(12,7,"statuses."+t.status)," "),_.Lb(2),_.Ac("ngClass",0==i?"first-assignmet-qualification":""),_.Lb(1),_.Ac("ngIf",!t.open_qualification)}}function bt(t,e){if(1&t&&(_.gc(0,"div",17),_.gc(1,"ion-grid",18),_.gc(2,"ion-row",19),_.gc(3,"ion-col",20),_.gc(4,"ion-list",21),_.cd(5,pt,15,9,"ion-card",40),_.fc(),_.fc(),_.fc(),_.fc(),_.fc()),2&t){const t=_.sc(3);_.Lb(5),_.Ac("ngForOf",t.integrantsInQuizzres)}}function vt(t,e){if(1&t){const t=_.hc();_.gc(0,"ion-button",46),_.oc("click",(function(){_.Sc(t);const e=_.sc(5);return e.openVideoQuizVisor(e.activity)})),_.bc(1,"ion-icon",49),_.ed(2),_.tc(3,"translate"),_.fc()}2&t&&(_.Lb(2),_.gd(" ",_.uc(3,1,"pages.course.show_video_quiz"),""))}function _t(t,e){if(1&t){const t=_.hc();_.gc(0,"div"),_.gc(1,"ion-card"),_.gc(2,"ion-card-header"),_.gc(3,"ion-card-title",45),_.ed(4),_.fc(),_.fc(),_.gc(5,"ion-card-content"),_.gc(6,"p"),_.gc(7,"strong"),_.ed(8),_.tc(9,"translate"),_.fc(),_.ed(10,": "),_.gc(11,"span"),_.ed(12),_.tc(13,"translate"),_.fc(),_.fc(),_.gc(14,"p"),_.gc(15,"strong"),_.ed(16),_.tc(17,"translate"),_.fc(),_.ed(18,": "),_.gc(19,"span"),_.ed(20),_.tc(21,"translate"),_.fc(),_.fc(),_.gc(22,"p"),_.gc(23,"strong"),_.ed(24),_.tc(25,"translate"),_.fc(),_.ed(26,": "),_.gc(27,"span"),_.ed(28),_.tc(29,"translate"),_.fc(),_.fc(),_.gc(30,"p"),_.gc(31,"strong"),_.ed(32),_.tc(33,"translate"),_.fc(),_.ed(34,": "),_.gc(35,"span"),_.ed(36),_.tc(37,"translate"),_.fc(),_.fc(),_.gc(38,"p"),_.gc(39,"strong"),_.ed(40),_.tc(41,"translate"),_.fc(),_.ed(42,": "),_.gc(43,"span"),_.ed(44),_.tc(45,"translate"),_.fc(),_.fc(),_.gc(46,"p"),_.gc(47,"strong"),_.ed(48),_.tc(49,"translate"),_.fc(),_.ed(50,": "),_.gc(51,"span"),_.ed(52),_.tc(53,"translate"),_.fc(),_.fc(),_.gc(54,"p"),_.gc(55,"strong"),_.ed(56),_.tc(57,"translate"),_.fc(),_.ed(58,": "),_.gc(59,"span"),_.ed(60),_.fc(),_.fc(),_.gc(61,"p"),_.gc(62,"strong"),_.ed(63),_.tc(64,"translate"),_.fc(),_.ed(65,": "),_.gc(66,"span"),_.ed(67),_.fc(),_.fc(),_.gc(68,"ion-button",46),_.oc("click",(function(){return _.Sc(t),_.sc(4).openQuestionary()})),_.bc(69,"ion-icon",47),_.ed(70),_.tc(71,"translate"),_.fc(),_.cd(72,vt,4,3,"ion-button",48),_.fc(),_.fc(),_.fc()}if(2&t){const t=_.sc(4);_.Lb(4),_.fd(t.activity.questionary.title),_.Lb(4),_.fd(_.uc(9,19,"forms.qualification_method")),_.Lb(4),_.gd("",_.uc(13,21,"forms."+t.activity.questionary.application_methods)," "),_.Lb(4),_.fd(_.uc(17,23,"forms.question_order")),_.Lb(4),_.gd("",_.uc(21,25,"forms."+t.activity.questionary.question_order)," "),_.Lb(4),_.fd(_.uc(25,27,"forms.items_per_page_title")),_.Lb(4),_.gd("","all"==t.activity.questionary.items_per_page?_.uc(29,29,"forms.all"):t.activity.questionary.items_per_page," "),_.Lb(4),_.fd(_.uc(33,31,"forms.order_answers_random")),_.Lb(4),_.gd("",_.uc(37,33,"forms."+t.activity.questionary.order_answers_random)," "),_.Lb(4),_.fd(_.uc(41,35,"forms.show_answers_student")),_.Lb(4),_.gd("",_.uc(45,37,"forms."+t.activity.questionary.option_show_answer)," "),_.Lb(4),_.fd(_.uc(49,39,"forms.correct_answers_show")),_.Lb(4),_.gd("",_.uc(53,41,"forms."+t.activity.questionary.option_show_correct_as)," "),_.Lb(4),_.fd(_.uc(57,43,"forms.time_limit")),_.Lb(4),_.gd("",t.activity.questionary.max_time," "),_.Lb(3),_.fd(_.uc(64,45,"forms.attempts_allowed")),_.Lb(4),_.gd("",t.activity.questionary.attempts_allowed," "),_.Lb(3),_.gd(" ",_.uc(71,47,"pages.course.show_questionary"),""),_.Lb(2),_.Ac("ngIf","video-quiz"==t.activity.type)}}function yt(t,e){if(1&t&&(_.gc(0,"div",43),_.bc(1,"panel-instructions-activity",44),_.cd(2,_t,73,49,"div",4),_.fc()),2&t){const t=_.sc(3);_.Lb(1),_.Ac("activity",t.activity)("show_button_open",!1)("expanded_panel",!0),_.Lb(1),_.Ac("ngIf",t.activity.questionary)}}function kt(t,e){if(1&t){const t=_.hc();_.gc(0,"div"),_.gc(1,"ion-segment",10),_.oc("ngModelChange",(function(e){return _.Sc(t),_.sc(2).segment=e})),_.gc(2,"ion-segment-button",11),_.ed(3),_.tc(4,"translate"),_.fc(),_.cd(5,rt,3,3,"ion-segment-button",12),_.gc(6,"ion-segment-button",13),_.ed(7),_.tc(8,"translate"),_.fc(),_.fc(),_.cd(9,ft,6,1,"div",14),_.cd(10,bt,6,1,"div",14),_.cd(11,yt,3,4,"div",15),_.fc()}if(2&t){const t=_.sc(2);_.Lb(1),_.Ac("ngModel",t.segment),_.Lb(2),_.gd(" ",_.uc(4,7,"pages.course.instructions")," "),_.Lb(2),_.Ac("ngIf",null!=t.activity.questionary),_.Lb(2),_.gd(" ",_.uc(8,9,"pages.course.works_makes")," "),_.Lb(2),_.Ac("ngIf","assignments"==t.segment),_.Lb(1),_.Ac("ngIf","integrants_in_quiz"==t.segment&&null!=t.activity.questionary),_.Lb(1),_.Ac("ngIf","instruction"==t.segment)}}function Lt(t,e){1&t&&_.bc(0,"mat-progress-bar",84)}function xt(t,e){if(1&t&&_.bc(0,"img",85),2&t){const t=_.sc().$implicit;_.Bc("src",t.picture,_.Vc)}}function wt(t,e){1&t&&_.bc(0,"img",86)}function At(t,e){if(1&t){const t=_.hc();_.gc(0,"div",87),_.oc("click",(function(){_.Sc(t);const e=_.sc().index;return _.sc(5).removeImage(e)})),_.bc(1,"ion-icon",39),_.fc()}}function St(t,e){if(1&t){const t=_.hc();_.gc(0,"div",79),_.oc("click",(function(){_.Sc(t);const i=e.$implicit;return _.sc(5).showDocument(i.picture||i.link)})),_.cd(1,Lt,1,0,"mat-progress-bar",80),_.cd(2,xt,1,1,"img",81),_.cd(3,wt,1,0,"img",82),_.cd(4,At,2,0,"div",83),_.fc()}if(2&t){const t=e.$implicit,i=_.sc(5);_.Ac("matTooltip",t.name),_.Lb(1),_.Ac("ngIf",t.uploading),_.Lb(1),_.Ac("ngIf",t.is_image),_.Lb(1),_.Ac("ngIf",!t.is_image),_.Lb(1),_.Ac("ngIf",!i.saving)}}function Ct(t,e){if(1&t&&(_.gc(0,"div",75),_.gc(1,"h3",76),_.ed(2),_.tc(3,"translate"),_.fc(),_.gc(4,"div",77),_.cd(5,St,5,5,"div",78),_.fc(),_.fc()),2&t){const t=_.sc(4);_.Lb(2),_.fd(_.uc(3,2,"pages.course.upload_image")),_.Lb(3),_.Ac("ngForOf",t.formCreate.images)}}function It(t,e){if(1&t){const t=_.hc();_.gc(0,"div",90),_.gc(1,"a",91),_.gc(2,"div",92),_.gc(3,"a",93),_.ed(4),_.fc(),_.fc(),_.gc(5,"div",94),_.oc("click",(function(){_.Sc(t);const i=e.index;return _.sc(5).deleteLink(i)})),_.bc(6,"ion-icon",39),_.fc(),_.fc(),_.fc()}if(2&t){const t=e.$implicit;_.Lb(3),_.Bc("href",t,_.Vc),_.Lb(1),_.fd(t)}}function Ot(t,e){if(1&t&&(_.gc(0,"div",75),_.gc(1,"h3",88),_.ed(2),_.tc(3,"translate"),_.fc(),_.cd(4,It,7,2,"div",89),_.fc()),2&t){const t=_.sc(4);_.Lb(2),_.fd(_.uc(3,2,"pages.course.links_externals")),_.Lb(2),_.Ac("ngForOf",t.formCreate.links)}}function Pt(t,e){if(1&t){const t=_.hc();_.gc(0,"ion-card",60),_.gc(1,"mat-expansion-panel",61),_.gc(2,"mat-expansion-panel-header",62),_.gc(3,"ion-card-header"),_.gc(4,"ion-card-title"),_.ed(5),_.tc(6,"translate"),_.fc(),_.fc(),_.fc(),_.gc(7,"ion-card-content"),_.gc(8,"ckeditor",10),_.oc("ngModelChange",(function(e){return _.Sc(t),_.sc(3).formCreate.model=e})),_.fc(),_.cd(9,Ct,6,4,"div",63),_.cd(10,Ot,5,4,"div",63),_.gc(11,"ion-item"),_.gc(12,"ion-item"),_.gc(13,"label",64),_.gc(14,"ion-tab-button",65),_.tc(15,"translate"),_.gc(16,"input",66),_.oc("change",(function(e){return _.Sc(t),_.sc(3).changeFile(e)})),_.fc(),_.bc(17,"ion-icon",67),_.fc(),_.fc(),_.gc(18,"ion-tab-button",68),_.oc("click",(function(){return _.Sc(t),_.sc(3).typingLink(!0)})),_.tc(19,"translate"),_.bc(20,"ion-icon",69),_.fc(),_.gc(21,"ion-tab-button",70),_.oc("click",(function(){return _.Sc(t),_.sc(3).typingLink()})),_.tc(22,"translate"),_.bc(23,"ion-icon",71),_.fc(),_.fc(),_.fc(),_.gc(24,"ion-item"),_.gc(25,"ion-item",72),_.gc(26,"ion-button",73),_.oc("click",(function(){return _.Sc(t),_.sc(3).saveHomework()})),_.ed(27),_.tc(28,"translate"),_.tc(29,"translate"),_.bc(30,"ion-icon",74),_.fc(),_.fc(),_.fc(),_.fc(),_.fc(),_.fc()}if(2&t){const t=_.sc(3);_.Lb(1),_.Ac("expanded",null==t.myAssignment.homework),_.Lb(4),_.gd(" ",_.uc(6,14,null==t.myAssignment.homework?"pages.course.your_work":"pages.course.resend_homework")," "),_.Lb(3),_.Ac("ngModel",t.formCreate.model),_.Lb(1),_.Ac("ngIf",t.formCreate.images.length>0),_.Lb(1),_.Ac("ngIf",t.formCreate.links.length>0),_.Lb(4),_.Ac("disabled",t.saving)("matTooltip",_.uc(15,16,"pages.course.upload_image")),_.Lb(2),_.Ac("disabled",t.saving),_.Lb(2),_.Ac("matTooltip",_.uc(19,18,"pages.course.google_documents"))("disabled",t.saving),_.Lb(3),_.Ac("matTooltip",_.uc(22,20,"pages.course.links_externals"))("disabled",t.saving),_.Lb(5),_.Ac("disabled",t.saving),_.Lb(1),_.gd(" ",t.saving?_.uc(28,22,"buttons.uploading"):_.uc(29,24,"buttons.deliver")," ")}}function Mt(t,e){if(1&t){const t=_.hc();_.gc(0,"ion-button",96),_.oc("click",(function(){return _.Sc(t),_.sc(5).openQuestionary(!0)})),_.bc(1,"ion-icon",47),_.ed(2),_.tc(3,"translate"),_.fc()}if(2&t){const t=_.sc(5);_.Ac("disabled",!(t.moment()<=t.moment(t.activity.date_delivery)&&t.moment(t.activity.open_date)<=t.moment())),_.Lb(2),_.gd(" ",_.uc(3,2,t.resolves_questionary_ids.length>0?"pages.course.attempt_other":"pages.course.resolve_questionary")," ")}}function Tt(t,e){if(1&t){const t=_.hc();_.gc(0,"ion-button",46),_.oc("click",(function(){return _.Sc(t),_.sc(5).openQuestionary(!0,!0)})),_.bc(1,"ion-icon",47),_.ed(2),_.tc(3,"translate"),_.fc()}2&t&&(_.Lb(2),_.gd(" ",_.uc(3,1,"pages.course.continue_resolve_questionary"),""))}function Ft(t,e){if(1&t){const t=_.hc();_.gc(0,"ion-button",38),_.oc("click",(function(){_.Sc(t);const i=e.$implicit;return _.sc(6).openQuestionary(!1,!1,i.uuid)})),_.ed(1),_.tc(2,"translate"),_.tc(3,"translate"),_.fc()}if(2&t){const t=e.$implicit,i=e.index;_.Lb(1),_.jd("",_.uc(2,4,"forms.my_attempt")," ",i+1,", ",_.uc(3,6,"forms.qualificated"),": (",t.qualification,")")}}function zt(t,e){if(1&t&&(_.gc(0,"div"),_.cd(1,Ft,4,8,"ion-button",97),_.fc()),2&t){const t=_.sc(5);_.Lb(1),_.Ac("ngForOf",t.resolves_questionary_ids)}}function Dt(t,e){if(1&t&&(_.ec(0),_.cd(1,Mt,4,4,"ion-button",95),_.cd(2,Tt,4,3,"ion-button",48),_.cd(3,zt,2,1,"div",4),_.dc()),2&t){const t=_.sc(4);_.Lb(1),_.Ac("ngIf",!t.continueQuestionary&&t.showResponseButton&&t.resolves_questionary_ids.length<t.activity.questionary.attempts_allowed),_.Lb(1),_.Ac("ngIf",t.continueQuestionary&&t.showResponseButton),_.Lb(1),_.Ac("ngIf","show_answers_finished_quiz"==t.activity.questionary.option_show_answer||"show_answers_finished_time"==t.activity.questionary.option_show_answer&&t.moment()>=t.moment(t.activity.date_delivery))}}function qt(t,e){if(1&t){const t=_.hc();_.gc(0,"ion-button",96),_.oc("click",(function(){_.Sc(t);const e=_.sc(5);return e.openVideoQuizVisor(e.activity)})),_.bc(1,"ion-icon",47),_.ed(2),_.tc(3,"translate"),_.fc()}if(2&t){const t=_.sc(5);_.Ac("disabled",!(t.moment()<=t.moment(t.activity.date_delivery)&&t.moment(t.activity.open_date)<=t.moment())),_.Lb(2),_.gd(" ",_.uc(3,2,t.resolves_questionary_ids.length>0?"pages.course.attempt_other":"pages.course.resolve_video_quiz")," ")}}function Et(t,e){if(1&t){const t=_.hc();_.gc(0,"ion-button",46),_.oc("click",(function(){_.Sc(t);const e=_.sc(5);return e.openVideoQuizVisor(e.activity,!0)})),_.bc(1,"ion-icon",47),_.ed(2),_.tc(3,"translate"),_.fc()}2&t&&(_.Lb(2),_.gd(" ",_.uc(3,1,"pages.course.continue_resolve_video_quiz"),""))}function $t(t,e){if(1&t){const t=_.hc();_.gc(0,"ion-button",38),_.oc("click",(function(){_.Sc(t);const i=e.$implicit;return _.sc(6).openQuestionary(!1,!1,i.uuid)})),_.ed(1),_.tc(2,"translate"),_.tc(3,"translate"),_.fc()}if(2&t){const t=e.$implicit,i=e.index;_.Lb(1),_.jd("",_.uc(2,4,"forms.my_attempt")," ",i+1,", ",_.uc(3,6,"forms.qualificated"),": (",t.qualification,")")}}function jt(t,e){if(1&t&&(_.gc(0,"div"),_.cd(1,$t,4,8,"ion-button",97),_.fc()),2&t){const t=_.sc(5);_.Lb(1),_.Ac("ngForOf",t.resolves_questionary_ids)}}function Bt(t,e){if(1&t&&(_.ec(0),_.cd(1,qt,4,4,"ion-button",95),_.cd(2,Et,4,3,"ion-button",48),_.cd(3,jt,2,1,"div",4),_.dc()),2&t){const t=_.sc(4);_.Lb(1),_.Ac("ngIf",!t.continueQuestionary&&t.showResponseButton&&t.resolves_questionary_ids.length<t.activity.questionary.attempts_allowed),_.Lb(1),_.Ac("ngIf",t.continueQuestionary&&t.showResponseButton),_.Lb(1),_.Ac("ngIf","show_answers_finished_quiz"==t.activity.questionary.option_show_answer||"show_answers_finished_time"==t.activity.questionary.option_show_answer&&t.moment()>=t.moment(t.activity.date_delivery))}}function Rt(t,e){if(1&t&&(_.gc(0,"div"),_.gc(1,"ion-card"),_.gc(2,"ion-card-header"),_.gc(3,"ion-card-title",45),_.ed(4),_.fc(),_.fc(),_.gc(5,"ion-card-content"),_.gc(6,"p"),_.gc(7,"strong"),_.ed(8),_.tc(9,"translate"),_.fc(),_.ed(10,": "),_.gc(11,"span"),_.ed(12),_.tc(13,"translate"),_.fc(),_.fc(),_.gc(14,"p"),_.gc(15,"strong"),_.ed(16),_.tc(17,"translate"),_.fc(),_.ed(18,": "),_.gc(19,"span"),_.ed(20),_.tc(21,"translate"),_.fc(),_.fc(),_.gc(22,"p"),_.gc(23,"strong"),_.ed(24),_.tc(25,"translate"),_.fc(),_.ed(26,": "),_.gc(27,"span"),_.ed(28),_.tc(29,"translate"),_.fc(),_.fc(),_.gc(30,"p"),_.gc(31,"strong"),_.ed(32),_.tc(33,"translate"),_.fc(),_.ed(34,": "),_.gc(35,"span"),_.ed(36),_.tc(37,"translate"),_.fc(),_.fc(),_.gc(38,"p"),_.gc(39,"strong"),_.ed(40),_.tc(41,"translate"),_.fc(),_.ed(42,": "),_.gc(43,"span"),_.ed(44),_.fc(),_.fc(),_.gc(45,"p"),_.gc(46,"strong"),_.ed(47),_.tc(48,"translate"),_.fc(),_.ed(49,": "),_.gc(50,"span"),_.ed(51),_.fc(),_.fc(),_.gc(52,"p"),_.gc(53,"strong"),_.ed(54),_.tc(55,"translate"),_.fc(),_.ed(56,": "),_.gc(57,"span"),_.ed(58),_.fc(),_.fc(),_.cd(59,Dt,4,3,"ng-container",4),_.cd(60,Bt,4,3,"ng-container",4),_.fc(),_.fc(),_.fc()),2&t){const t=_.sc(3);_.Lb(4),_.fd(t.activity.questionary.title),_.Lb(4),_.fd(_.uc(9,17,"forms.qualification_method")),_.Lb(4),_.gd("",_.uc(13,19,"forms."+t.activity.questionary.application_methods)," "),_.Lb(4),_.fd(_.uc(17,21,"forms.question_order")),_.Lb(4),_.gd("",_.uc(21,23,"forms."+t.activity.questionary.question_order)," "),_.Lb(4),_.fd(_.uc(25,25,"forms.items_per_page_title")),_.Lb(4),_.gd("","all"==t.activity.questionary.items_per_page?_.uc(29,27,"forms.all"):t.activity.questionary.items_per_page," "),_.Lb(4),_.fd(_.uc(33,29,"forms.order_answers_random")),_.Lb(4),_.gd("",_.uc(37,31,"forms."+t.activity.questionary.order_answers_random)," "),_.Lb(4),_.fd(_.uc(41,33,"forms.time_limit")),_.Lb(4),_.gd("",t.activity.questionary.max_time," "),_.Lb(3),_.fd(_.uc(48,35,"forms.attempts_allowed")),_.Lb(4),_.gd("",t.activity.questionary.attempts_allowed," "),_.Lb(3),_.fd(_.uc(55,37,"forms.attempts_made")),_.Lb(4),_.gd("",t.resolves_questionary_ids.length," "),_.Lb(1),_.Ac("ngIf","questions"==t.activity.type),_.Lb(1),_.Ac("ngIf","video-quiz"==t.activity.type)}}function Qt(t,e){if(1&t){const t=_.hc();_.ec(0),_.gc(1,"ion-button",98),_.oc("click",(function(){_.Sc(t);const i=e.$implicit;return _.sc(3).formCreate.punctuaction=i.number})),_.bc(2,"ion-icon",99),_.gc(3,"span",9),_.ed(4),_.fc(),_.fc(),_.dc()}if(2&t){const t=e.$implicit,i=_.sc(3);_.Lb(1),_.Ac("color",i.formCreate.punctuaction>=t.number?"warning":"light"),_.Lb(1),_.Ac("name",t.icon),_.Lb(2),_.fd(t.number)}}function Vt(t,e){if(1&t&&_.bc(0,"panel-instructions-activity",100),2&t){const t=_.sc(3);_.Ac("activity",t.myAssignment.homework)("show_points",!1)("show_button_open",!1)("expanded_panel",!0)("show_status",!0)}}function Ut(t,e){if(1&t&&(_.gc(0,"button",124),_.rc(),_.gc(1,"svg",125),_.bc(2,"path",126),_.fc(),_.fc()),2&t){_.sc();const t=_.Oc(11);_.Ac("matMenuTriggerFor",t)}}function Nt(t,e){if(1&t){const t=_.hc();_.gc(0,"ion-icon",127),_.oc("click",(function(){_.Sc(t);const e=_.sc(2).$implicit;return _.sc(4).updateComment(e)})),_.tc(1,"translate"),_.fc()}2&t&&_.Ac("matTooltip",_.uc(1,1,"buttons.publish"))}function Ht(t,e){1&t&&_.bc(0,"ion-icon",128)}function Jt(t,e){if(1&t){const t=_.hc();_.gc(0,"div",106),_.gc(1,"input",107),_.oc("ngModelChange",(function(e){return _.Sc(t),_.sc().$implicit.aux_text=e}))("keyup.enter",(function(){_.Sc(t);const e=_.sc().$implicit;return _.sc(4).updateComment(e)})),_.tc(2,"translate"),_.fc(),_.cd(3,Nt,2,3,"ion-icon",108),_.cd(4,Ht,1,0,"ion-icon",109),_.fc()}if(2&t){const t=_.sc().$implicit;_.Lb(1),_.Bc("placeholder",_.uc(2,5,"pages.course.please_comment")),_.Ac("disabled",t.comment_upload)("ngModel",t.aux_text),_.Lb(2),_.Ac("ngIf",!t.comment_upload),_.Lb(1),_.Ac("ngIf",t.comment_upload)}}function Yt(t,e){if(1&t&&_.bc(0,"p",129),2&t){const t=_.sc().$implicit;_.Ac("innerHTML",t.text,_.Tc)}}function Wt(t,e){if(1&t){const t=_.hc();_.gc(0,"div",110),_.gc(1,"div",111),_.gc(2,"div",41),_.bc(3,"img",112),_.fc(),_.gc(4,"div",113),_.gc(5,"div",114),_.gc(6,"span",115),_.ed(7),_.fc(),_.gc(8,"span",116),_.cd(9,Ut,3,1,"button",117),_.fc(),_.gc(10,"mat-menu",null,118),_.gc(12,"button",119),_.oc("click",(function(){_.Sc(t);const i=e.$implicit,c=e.index,s=_.sc(4);return s.removeComment(s.myAssignment,i,c)})),_.bc(13,"ion-icon",39),_.ed(14),_.tc(15,"translate"),_.fc(),_.fc(),_.fc(),_.gc(16,"div",120),_.ed(17),_.tc(18,"formatDatesTime"),_.fc(),_.gc(19,"div",121),_.gc(20,"div",104),_.cd(21,Jt,5,7,"div",122),_.fc(),_.cd(22,Yt,1,1,"p",123),_.fc(),_.fc(),_.fc(),_.fc()}if(2&t){const t=e.$implicit,i=_.sc(4);_.Lb(3),_.Ac("alt",null!=t.user_create?t.user_create.name:"-")("src",null!=t.user_create&&null!=t.user_create.information?t.user_create.information.image_url:i.profile_img_route,_.Vc),_.Lb(4),_.fd(null!=t.user_create?t.user_create.name:"-"),_.Lb(2),_.Ac("ngIf",t.is_my),_.Lb(5),_.gd(" ",_.uc(15,8,"buttons.delete")," "),_.Lb(3),_.gd("",_.uc(18,10,t.date_created)," "),_.Lb(4),_.Ac("ngIf",t.edit_mode),_.Lb(1),_.Ac("ngIf",!t.edit_mode)}}function Gt(t,e){if(1&t){const t=_.hc();_.gc(0,"ion-icon",127),_.oc("click",(function(){_.Sc(t);const e=_.sc(4);return e.submitComment(e.myAssignment)})),_.tc(1,"translate"),_.fc()}2&t&&_.Ac("matTooltip",_.uc(1,1,"buttons.publish"))}function Kt(t,e){1&t&&_.bc(0,"ion-icon",128)}function Xt(t,e){if(1&t){const t=_.hc();_.gc(0,"ion-card",101),_.gc(1,"mat-expansion-panel",102),_.gc(2,"mat-expansion-panel-header",62),_.gc(3,"ion-card-header"),_.gc(4,"ion-card-subtitle"),_.ed(5),_.tc(6,"translate"),_.fc(),_.fc(),_.fc(),_.gc(7,"div"),_.cd(8,Wt,23,12,"div",103),_.gc(9,"div",104),_.gc(10,"div",105),_.bc(11,"img",27),_.fc(),_.gc(12,"div",106),_.gc(13,"input",107),_.oc("ngModelChange",(function(e){return _.Sc(t),_.sc(3).myAssignment.comment_input=e}))("keyup.enter",(function(){_.Sc(t);const e=_.sc(3);return e.submitComment(e.myAssignment)})),_.tc(14,"translate"),_.fc(),_.cd(15,Gt,2,3,"ion-icon",108),_.cd(16,Kt,1,0,"ion-icon",109),_.fc(),_.fc(),_.fc(),_.fc(),_.fc()}if(2&t){const t=_.sc(3);_.Lb(5),_.hd(" ",_.uc(6,9,"pages.course.comments")," ",t.myAssignment.total_comments," "),_.Lb(3),_.Ac("ngForOf",t.myAssignment.comments),_.Lb(3),_.Bc("src",t.user_profile,_.Vc),_.Lb(2),_.Bc("placeholder",_.uc(14,11,"pages.course.please_comment_activity")),_.Ac("disabled",t.myAssignment.comment_upload)("ngModel",t.myAssignment.comment_input),_.Lb(2),_.Ac("ngIf",!t.myAssignment.comment_upload),_.Lb(1),_.Ac("ngIf",t.myAssignment.comment_upload)}}function Zt(t,e){if(1&t){const t=_.hc();_.gc(0,"div"),_.cd(1,Pt,31,26,"ion-card",50),_.bc(2,"panel-instructions-activity",51),_.cd(3,Rt,61,39,"div",4),_.gc(4,"ion-item",52),_.gc(5,"div",53),_.gc(6,"h4",54),_.ed(7),_.tc(8,"translate"),_.fc(),_.gc(9,"section",55),_.cd(10,Qt,5,3,"ng-container",22),_.fc(),_.gc(11,"div",56),_.gc(12,"ion-button",57),_.oc("click",(function(){return _.Sc(t),_.sc(2).savePunctuaction()})),_.ed(13),_.tc(14,"translate"),_.fc(),_.fc(),_.gc(15,"small"),_.ed(16),_.tc(17,"translate"),_.fc(),_.fc(),_.fc(),_.cd(18,Vt,1,5,"panel-instructions-activity",58),_.cd(19,Xt,17,13,"ion-card",59),_.fc()}if(2&t){const t=_.sc(2);_.Lb(1),_.Ac("ngIf","task"==t.activity.type&&t.myAssignment&&(t.activity.allow_arrears||t.moment()<=t.moment(t.activity.date_delivery))&&t.moment(t.activity.open_date)<=t.moment()),_.Lb(1),_.Ac("activity",t.activity)("show_button_open",!1)("expanded_panel",!0)("show_details_assignments",!0),_.Lb(1),_.Ac("ngIf",t.activity.questionary),_.Lb(4),_.fd(_.uc(8,12,"pages.course.qualificated_activity_range_docente")),_.Lb(3),_.Ac("ngForOf",t.punctuactions),_.Lb(3),_.fd(_.uc(14,14,"buttons.save")),_.Lb(3),_.fd(_.uc(17,16,"pages.course.qualificated_small_message")),_.Lb(2),_.Ac("ngIf",t.myAssignment.homework),_.Lb(1),_.Ac("ngIf",t.myAssignment&&t.myAssignment.comments&&"1"==t.activity.can_comment)}}function te(t,e){if(1&t&&(_.gc(0,"div"),_.cd(1,kt,12,11,"div",4),_.cd(2,Zt,20,18,"div",4),_.fc()),2&t){const t=_.sc();_.Lb(1),_.Ac("ngIf",t.activity.is_my),_.Lb(1),_.Ac("ngIf",!t.activity.is_my)}}let ee=(()=>{class t{constructor(t,e,i,c,s,n,o,a,r,l,d,u,f,h,p){this.activeRoute=t,this.loadingService=e,this.controlErroresService=i,this.courseService=c,this.routerOutlet=s,this.modalCtrl=n,this.userData=o,this.activitiesService=a,this.tourService=r,this.toastService=l,this.alertController=d,this.homeworkActivitiesService=u,this.controlErrores=f,this.questionaryService=h,this.toastr=p,this.moment=g,this.course_route=m.h.one_course,this.profile_img_route="/assets/images/profile-8.jpg",this.user_profile="/assets/images/profile-8.jpg",this.activity_id=null,this.segment="assignments",this.saving=!1,this.assignment_id=0,this.listQuestions=[],this.continueQuestionary=!1,this.showResponseButton=!1,this.resolves_questionary_ids=[],this.punctuactions=[],this.formCreate={model:"",images:[],punctuaction:0,links:[]},this.integrantsInQuizzres=[],this.totalFilesUploaded=0,this.moment.locale("es"),g.locale("es"),this.course_id=t.snapshot.params.uuid,this.activity_id=t.snapshot.params.activity_id,this.assignment_id=t.snapshot.params.assignment_id;let b=this.activeRoute.snapshot.params.open_w||this.activeRoute.snapshot.queryParams.open_w;b&&(this.segment=b),t.snapshot.queryParams&&t.snapshot.queryParams.ref&&t.snapshot.queryParams.ref&&(this.timerIdServer=t.snapshot.queryParams.ref),this.timerIdServer||(this.timerIdServer=ref_cc_id),this.getLeftOptions()}ngOnInit(){return Object(a.b)(this,void 0,void 0,(function*(){let t=yield this.userData.getUser();t&&t.information&&(this.user_profile=t.information.image_url)}))}ngAfterViewInit(){this.getActivity(),setTimeout(()=>{})}getCourse(){this.loadingService.change(!0),this.courseService.course(this.course_id).subscribe(t=>{this.loadingService.change(!1),this.course=t.data},t=>{this.loadingService.change(!1),this.controlErroresService.control(t)})}getActivity(){this.loadingService.change(!0),this.activitiesService.get(this.activity_id,this.timerIdServer).subscribe(t=>{if(this.loadingService.change(!1),this.activity=t.data,this.activity.questionary&&(this.showResponseButton=!0,Array.isArray(this.activity.questionary.questions)&&(this.listQuestions=this.questionaryService.refactorListQuestionary(this.activity.questionary.questions,!1)),this.activity.questionary.pending_response&&this.activity.questionary.pending_response.uuid&&(this.continueQuestionary=!0),this.activity.questionary.resolves_questionary_ids&&Array.isArray(this.activity.questionary.resolves_questionary_ids)&&(this.resolves_questionary_ids=this.activity.questionary.resolves_questionary_ids)),this.activity.is_my){if(Array.isArray(this.activity.assignments)&&this.assignment_id){console.log(this.assignment_id);let t=this.activity.assignments.find(t=>t.uuid==this.assignment_id);this.openAsignmentModal(t)}this.activity.questionary&&this.getStudentsInQuizz(this.activity.questionary)}else this.activity.assignments[0]&&(this.myAssignment=this.activity.assignments[0],this.myAssignment.comments=[],this.formCreate.punctuaction=this.myAssignment.punctuaction,this.activitiesService.getComments(this.activity.assignments[0].uuid).subscribe(t=>{this.myAssignment.comments=t.data}),this.getHomework(this.myAssignment))},t=>{this.loadingService.change(!1),this.controlErroresService.control(t)})}getStudentsInQuizz(t){t&&this.questionaryService.getIntegrantQuestionaries(t.uuid).subscribe(t=>{this.integrantsInQuizzres=t.data||[]})}openQuestionaryVisor(t,e){return Object(a.b)(this,void 0,void 0,(function*(){if("in_progress"==e)return this.toastr.info("No se puede acceder a este \xedtem, el studiante est\xe1 resolviendo el quiz.","",{positionClass:"toast-bottom-left"}),!1;const i=yield this.modalCtrl.create({component:L.a,cssClass:"modal-fullscreen-100",swipeToClose:!0,componentProps:{activity_uuid:this.activity.uuid,response_uuid:t}});yield i.present(),yield i.onWillDismiss()}))}openQualificationPane(t){t.open_qualification=!t.open_qualification,t.cpy_qualification=t.qualification}saveQualificationAssigment(t,e="",i){return"key"==e&&13!=i.keyCode?i.keyCode:t.cpy_qualification>+this.activity.qualification||t.cpy_qualification<0?(this.toastService.presentToast("Calificaci\xf3n no admitida","warning"),!1):void this.activitiesService.saveQualification(t.uuid,{qualification:t.cpy_qualification}).subscribe(e=>{t.status_task="qualificated",t.open_qualification=!t.open_qualification,t.qualification=t.cpy_qualification},t=>{this.controlErroresService.control(t)})}showDocument(t){return Object(a.b)(this,void 0,void 0,(function*(){const e=yield this.modalCtrl.create({component:f.a,cssClass:"modal-fullscreen-100",swipeToClose:!0,presentingElement:this.routerOutlet.nativeEl,componentProps:{route_file:t}});yield e.present(),yield e.onWillDismiss()}))}submitComment(t){t.comment_input?(t.comment_upload=!0,this.activitiesService.storeComment(t.uuid,{text:t.comment_input}).subscribe(e=>{t.comment_input="",isNaN(t.total_comments)?t.total_comments=1:t.total_comments++,t.comment_upload=!1,Array.isArray(t.comments)&&t.comments.push(e.data)},e=>{t.comment_upload=!1,this.controlErroresService.control(e)})):this.toastService.presentToast("\xa1Agregue un comentario para poder publicarlo!","warning")}removeComment(t,e,i){return Object(a.b)(this,void 0,void 0,(function*(){const c=yield this.alertController.create({header:"Eliminar",message:"\xbfDesea eliminar este comentario?",buttons:[{text:"Cancelar",role:"cancel"},{text:"Eliminar",role:"destructive",handler:()=>{this.loadingService.change(!0),this.activitiesService.deleteComment(e.uuid).subscribe(e=>{this.loadingService.change(!1),t.comments.splice(i,1),isNaN(t.total_comments)||t.total_comments--,this.toastService.presentToast(e.message,e.status)},t=>{this.loadingService.change(!1),this.controlErroresService.control(t)})}}]});yield c.present()}))}openAsignmentModal(t){return Object(a.b)(this,void 0,void 0,(function*(){const e=yield this.modalCtrl.create({component:tt,cssClass:"modal-fullscreen-100",swipeToClose:!0,presentingElement:this.routerOutlet.nativeEl,componentProps:{assignment:t,activity:this.activity,user_profile:this.user_profile,profile_img_route:this.profile_img_route}});yield e.present(),yield e.onWillDismiss()}))}typingLink(t){return Object(a.b)(this,void 0,void 0,(function*(){let e=[{name:"link",value:"",type:"url",placeholder:"Enlace"}];t&&e.push({name:"title",value:"",type:"text",placeholder:"T\xedtulo"});const i=yield this.alertController.create({cssClass:"",header:t?"Agregar enlace del archivo":"A\xf1adir enlace",inputs:e,buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:()=>{}},{text:"A\xf1adir",handler:e=>{e.link&&(t?e.title&&this.formCreate.images.push({photo:null,name:e.title,size:"0",picture:"",is_image:0,content_type:"link",external:"1",link:e.link}):this.formCreate.links.push(e.link))}}]});yield i.present()}))}changeFile(t){if(t.target.files&&t.target.files[0]){var e=new FileReader;let i={photo:t.target.files[0],name:t.target.files[0].name,size:t.target.files[0].size,picture:"",is_image:t.target.files[0].type.indexOf("image")>=0,content_type:t.target.files[0].type||"unknown"};if(t.target.files[0].size>1e6*v.a.max_size_img)return void this.toastService.presentToast("Peso m\xe1ximo "+v.a.max_size_img+"MB","warning");e.onload=t=>{i.picture=t.target.result},this.formCreate.images.push(i),e.readAsDataURL(t.target.files[0])}}removeImage(t){t<0||this.formCreate.images.splice(t,1)}deleteLink(t){t<0||this.formCreate.links.splice(t,1)}getHomework(t){this.loadingService.change(!0),this.homeworkActivitiesService.first(t.uuid).subscribe(t=>{this.loadingService.change(!1),this.myAssignment.homework=t.data,this.myAssignment.homework.title="Tu entrega"},t=>{this.loadingService.change(!1),this.controlErroresService.control(t)})}saveHomework(){!this.formCreate.model&&this.formCreate.images.length<=0&&this.formCreate.links.length<=0?this.toastService.presentToast("Agregue contenido para entregar la tarea","warning"):(this.saving=!0,this.totalFilesUploaded=0,this.loadingService.change(!0),this.homeworkActivitiesService.save(this.myAssignment.uuid,{text:this.formCreate.model,links:this.formCreate.links}).subscribe(t=>{t.data?0==this.formCreate.images.length?(this.checkUploadPost(t),this.toastService.presentToast(t.message,t.status)):this.saveImagesPost(t.data.uuid,t):(this.toastService.presentToast(t.message,t.status),this.saving=!1,this.loadingService.change(!1))},t=>{this.saving=!1,this.loadingService.change(!1),this.controlErrores.control(t)}))}savePunctuaction(){this.formCreate.punctuaction?(this.loadingService.change(!0),this.homeworkActivitiesService.savePunctucaction(this.myAssignment.uuid,{punctuaction:this.formCreate.punctuaction}).subscribe(t=>{this.toastService.presentToast(t.message,t.status),this.loadingService.change(!1)},t=>{this.loadingService.change(!1),this.controlErrores.control(t)})):this.toastService.presentToast("Seleccione un valor v\xe1lido","warning")}saveImagesPost(t,e){for(const i of this.formCreate.images)i.uploading=!0,this.homeworkActivitiesService.saveFiles(Object(m.c)({file:i.photo,content_type:i.content_type,name:i.name,size:i.size,external:i.external,link:i.link}),t).subscribe(t=>{i.uploading=!1,this.totalFilesUploaded++,this.checkUploadPost(e)},t=>{i.uploading=!1,this.totalFilesUploaded++,this.controlErrores.control(t),this.checkUploadPost(e)})}checkUploadPost(t){this.totalFilesUploaded>=this.formCreate.images.length&&(this.saving=!1,this.loadingService.change(!1),this.toastService.presentToast(t.message,t.status),this.getHomework(this.myAssignment))}waitResolveQuestionary(t){return Object(a.b)(this,void 0,void 0,(function*(){const e=yield this.modalCtrl.create({component:L.a,cssClass:"modal-fullscreen-100",swipeToClose:!0,componentProps:t});yield e.present();const{data:i}=yield e.onWillDismiss();console.log(i),i&&(i.destroy_response_button&&(this.showResponseButton=!1),i.response_uuid&&this.resolves_questionary_ids.push(i.response_uuid))}))}openQuestionary(t=!1,e=!1,i=!1){return Object(a.b)(this,void 0,void 0,(function*(){if(i)return void this.waitResolveQuestionary({activity_uuid:this.activity.uuid,response_uuid:i});if(!t)return void this.waitResolveQuestionary({activity_uuid:this.activity.uuid});if(e)return void this.waitResolveQuestionary({activity_uuid:this.activity.uuid,resolve:!0});const c=yield this.alertController.create({cssClass:"my-custom-class",header:"\xa1Confirmar o denegar!",message:"\xbfEst\xe1 seguro de empezar a resolver el cuestionario?",buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary",handler:t=>{}},{text:"Confirmar",handler:()=>{this.waitResolveQuestionary({activity_uuid:this.activity.uuid,resolve:!0})}}]});yield c.present()}))}openVideoQuizVisor(t,e=!1){return Object(a.b)(this,void 0,void 0,(function*(){const i=yield this.modalCtrl.create({component:it.a,cssClass:"modal-fullscreen-100",swipeToClose:!0,componentProps:{activity_uuid:t.uuid,resource_type:"activity",resolve:e}});yield i.present();const{data:c}=yield i.onWillDismiss();c&&(c.destroy_response_button&&(this.showResponseButton=!1),c.response_uuid&&this.resolves_questionary_ids.push(c.response_uuid))}))}startTourJS(){let t=[];this.activity.is_my?(t=[{"next .instruction-segment-clss":"Con este bot\xf3n podr\xe1 visualizar las instrucciones de la actividad.",skipButton:{className:"mySkip",text:"Omitir"}},{"next .work-segment-clss":"Con este bot\xf3n podr\xe1 visualizar la lista de estudiantes y entregas."}],Array.isArray(this.activity.assignments)&&this.activity.assignments.length&&null!=document.querySelector(".delivered-panel-task")?(t.push({"next .delivered-panel-task":"Usted podr\xe1 realizar la entrega de su tarea en el siguiente panel."}),t.push({"next .first-assignmet":"Al dar clic en el nombre o imagen podremos viaulizar la entrega o comentarios privados."}),t.push({"skipt .first-assignmet-qualification":"Al dar clic aqu\xed podremos calificar la actividad, igualmente podr\xe1 hacerlo dentro del panel de entrega de tareas."})):null!=document.querySelector(".panel-task-details-s")&&t.push({"skipt .panel-task-details-s":"En este panel podr\xe1 ver el detalle de la actividad."})):(this.myAssignment&&(this.activity.allow_arrears||g()<=g(this.activity.date_delivery))&&g(this.activity.open_date)<=g()&&(t.push({"next .delivered-panel-task":"Usted podr\xe1 realizar la entrega de su tarea en el siguiente panel."}),t.push({"next .delivered-panel-task-images":"Este bot\xf3n sirve para subir archivos."}),t.push({"next .delivered-panel-task-google-link":"Este bot\xf3n sirve para los deberes subidos en google drive y office (tienen que ser p\xfablicos)."}),t.push({"next .delivered-panel-task-other-link":"Este bot\xf3n sirve para insertar links de otros sitios webs."})),t.push({"next .container-description-task":"En esta tarjeta podr\xe1 ver las instrucciones de la actividad a realizarse en donde podr\xe1 ver la descripci\xf3n, archivos y links."})),this.tourService.presetTour(t)}getLeftOptions(){this.loadingService.change(!0),this.courseService.getOptionsQualification(this.course_id,"alone_punc=1").subscribe(t=>{this.punctuactions=t.punctuactions},t=>{this.controlErroresService.control(t),this.loadingService.change(!1)})}openGraphQuestionary(t){return Object(a.b)(this,void 0,void 0,(function*(){if(null==t.questionary)return!1;const e=yield this.modalCtrl.create({component:ct.a,cssClass:"modal-fullscreen-100",swipeToClose:!0,componentProps:{activity:t,course:this.course}});yield e.present(),yield e.onWillDismiss()}))}}return t.\u0275fac=function(e){return new(e||t)(_.ac(o.a),_.ac(u.a),_.ac(l.a),_.ac(d.a),_.ac(n.fb),_.ac(n.Db),_.ac(p.a),_.ac(r.a),_.ac(h.a),_.ac(b.a),_.ac(n.b),_.ac(k),_.ac(l.a),_.ac(et.a),_.ac(st.b))},t.\u0275cmp=_.Ub({type:t,selectors:[["app-show-details-activity"]],decls:7,vars:7,consts:[["size","small","color","warning",3,"routerLink"],["name","backspace-outline"],["color","primary","size","small",3,"click",4,"ngIf"],["color","danger","size","small",3,"click",4,"ngIf"],[4,"ngIf"],["color","primary","size","small",3,"click"],["name","navigate-outline"],["color","danger","size","small",3,"click"],["name","bar-chart-outline"],[1,"ml-2"],[3,"ngModel","ngModelChange"],["value","instruction",1,"instruction-segment-clss"],["value","integrants_in_quiz","class","integrants-quiz",4,"ngIf"],["value","assignments",1,"work-segment-clss"],["class","",4,"ngIf"],["class","panel-task-details-s",4,"ngIf"],["value","integrants_in_quiz",1,"integrants-quiz"],[1,""],[1,"grid-shuffle"],["id","grid",1,"row","flex","flex-center"],["size","12","size-sm","11","size-md","9","size-xl","9"],[1,"delivered-panel-task"],[4,"ngFor","ngForOf"],[1,"item-sub-assignment",2,"padding","0"],[3,"ngClass"],[1,"w-10","h-10","sm:w-12","sm:h-12","flex-none","image-fit",3,"click"],[1,"w-10","h-10","flex-none","image-fit"],["alt","--",1,"rounded-full",3,"src"],[1,"ml-3","mr-auto",3,"click"],[1,"ml-auto",3,"ngClass"],[3,"click",4,"ngIf"],["type","number","name","title","class","intro-x login__input form-control py-3 px-4 border-gray-300 block","min","0",3,"ngModel","max","keypress","ngModelChange",4,"ngIf"],["size","small","color","success",3,"click",4,"ngIf"],["size","small","color","danger",3,"click",4,"ngIf"],[3,"click"],["type","number","name","title","min","0",1,"intro-x","login__input","form-control","py-3","px-4","border-gray-300","block",3,"ngModel","max","keypress","ngModelChange"],["size","small","color","success",3,"click"],["name","checkmark-outline"],["size","small","color","danger",3,"click"],["name","trash-outline"],[3,"click",4,"ngFor","ngForOf"],[1,"w-10","h-10","sm:w-12","sm:h-12","flex-none","image-fit"],[1,"ml-3","mr-auto"],[1,"panel-task-details-s"],[3,"activity","show_button_open","expanded_panel"],[1,"text-center"],["size","small","color","warning",3,"click"],["name","document-attach-outline"],["size","small","color","warning",3,"click",4,"ngIf"],["name","film-outline"],["class","mt-2 delivered-panel-task",4,"ngIf"],[1,"container-description-task",3,"activity","show_button_open","expanded_panel","show_details_assignments"],[2,"width","100%"],[1,"mt-4","mb-4","w-100"],[1,"bold"],[1,"example-section"],[1,"mt-2","mb-2"],["color","primary",3,"click"],["class","my-homework-panel-in",3,"activity","show_points","show_button_open","expanded_panel","show_status",4,"ngIf"],["class","mt-2 comment-section-one-panel",4,"ngIf"],[1,"mt-2","delivered-panel-task"],["hideToggle","",3,"expanded"],[2,"padding","0"],["class","border-2 border-dashed dark:border-dark-5 rounded-md pt-4","style","margin-top: 10px;",4,"ngIf"],["for","file-add-rs-post"],[1,"delivered-panel-task-images",3,"disabled","matTooltip"],["type","file","id","file-add-rs-post",1,"d-none",3,"disabled","change"],["name","images-outline"],[1,"delivered-panel-task-google-link",3,"matTooltip","disabled","click"],["name","file-tray-full-outline"],[1,"delivered-panel-task-other-link",3,"matTooltip","disabled","click"],["name","link-outline"],["slot","end"],["color","success",3,"disabled","click"],["name","arrow-redo-outline"],[1,"border-2","border-dashed","dark:border-dark-5","rounded-md","pt-4",2,"margin-top","10px"],[2,"margin","0","padding-left","20px"],[1,"flex","flex-wrap","px-4"],["class","w-24 h-24 relative image-fit mb-5 mr-5 cursor-pointer zoom-in","tooltip","Call","navTooltip","",3,"matTooltip","click",4,"ngFor","ngForOf"],["tooltip","Call","navTooltip","",1,"w-24","h-24","relative","image-fit","mb-5","mr-5","cursor-pointer","zoom-in",3,"matTooltip","click"],["mode","indeterminate",4,"ngIf"],["class","rounded-md","alt","Imagen",3,"src",4,"ngIf"],["class","rounded-md","alt","File","src","/assets/img/document-file-icon.png",4,"ngIf"],["title","Remove this image?","class"," w-5 h-5 flex items-center justify-center absolute rounded-full text-white bg-theme-6 right-0 top-0 -mr-2 -mt-2",3,"click",4,"ngIf"],["mode","indeterminate"],["alt","Imagen",1,"rounded-md",3,"src"],["alt","File","src","/assets/img/document-file-icon.png",1,"rounded-md"],["title","Remove this image?",1,"w-5","h-5","flex","items-center","justify-center","absolute","rounded-full","text-white","bg-theme-6","right-0","top-0","-mr-2","-mt-2",3,"click"],[1,"ml-1",2,"margin","0","padding-left","20px"],["class","pos__ticket box p-2",4,"ngFor","ngForOf"],[1,"pos__ticket","box","p-2"],["href","javascript:;","data-toggle","modal","data-target","#add-item-modal",1,"flex","items-center","p-3","cursor-pointer","transition","duration-300","ease-in-out","bg-white","dark:bg-dark-3","hover:bg-gray-200","dark:hover:bg-dark-1","rounded-md"],[1,"pos__ticket__item-name","truncate","mr-1"],["target","_blank",3,"href"],[1,"ml-auto","font-medium",3,"click"],["size","small","color","success",3,"disabled","click",4,"ngIf"],["size","small","color","success",3,"disabled","click"],["size","small","color","danger",3,"click",4,"ngFor","ngForOf"],["size","small",3,"color","click"],[3,"name"],[1,"my-homework-panel-in",3,"activity","show_points","show_button_open","expanded_panel","show_status"],[1,"mt-2","comment-section-one-panel"],["hideToggle",""],["class","pt-5",4,"ngFor","ngForOf"],[1,"w-full","flex","items-center","mt-3"],[1,"w-8","h-8","flex-none","image-fit","mr-3"],[1,"flex-1","relative","text-gray-700"],["type","text",1,"form-control","form-control-rounded","border-transparent","bg-gray-200","pr-10","placeholder-theme-13",3,"disabled","ngModel","placeholder","ngModelChange","keyup.enter"],["name","send-outline","class","c-pointer absolute my-auto inset-y-0 mr-3 right-0","fill","outline",3,"matTooltip","click",4,"ngIf"],["name","cloud-upload-outline","class","c-pointer absolute my-auto inset-y-0 mr-3 right-0","fill","outline",4,"ngIf"],[1,"pt-5"],[1,"flex"],[1,"rounded-full",3,"alt","src"],[1,"ml-3","flex-1"],[1,"flex","items-center"],[1,"font-medium"],["href","",1,"ml-auto","text-xs","text-gray-600"],["mat-button","",3,"matMenuTriggerFor",4,"ngIf"],["menuCommentPost","matMenu"],["mat-menu-item","",3,"click"],[1,"text-gray-600","text-xs","sm:text-sm"],[1,"mt-2"],["class","flex-1 relative text-gray-700",4,"ngIf"],[3,"innerHTML",4,"ngIf"],["mat-button","",3,"matMenuTriggerFor"],["focusable","false","width","24","height","24","viewBox","0 0 24 24",1,"NMm5M"],["d","M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"],["name","send-outline","fill","outline",1,"c-pointer","absolute","my-auto","inset-y-0","mr-3","right-0",3,"matTooltip","click"],["name","cloud-upload-outline","fill","outline",1,"c-pointer","absolute","my-auto","inset-y-0","mr-3","right-0"],[3,"innerHTML"]],template:function(t,e){1&t&&(_.gc(0,"ion-button",0),_.bc(1,"ion-icon",1),_.ed(2),_.tc(3,"translate"),_.fc(),_.cd(4,ot,4,3,"ion-button",2),_.cd(5,at,5,3,"ion-button",3),_.cd(6,te,3,2,"div",4)),2&t&&(_.Ac("routerLink",e.course_route+e.course_id+"/"+e.course_id+"/activities"),_.Lb(2),_.gd(" ",_.uc(3,5,"buttons.back"),"\n"),_.Lb(2),_.Ac("ngIf",e.activity),_.Lb(1),_.Ac("ngIf",e.activity&&e.activity.is_my&&null!=e.activity.questionary),_.Lb(1),_.Ac("ngIf",e.activity))},directives:[n.k,n.Kb,o.g,n.C,c.t,n.ib,n.Lb,s.r,s.u,n.jb,n.A,n.gb,n.t,n.O,c.s,n.m,n.n,n.H,c.q,s.x,s.c,A.a,n.o,n.q,S.c,S.g,nt.a,n.sb,O.a,w.a,n.p,C.e,C.b,I.b,C.d],pipes:[P.d,M.a],styles:[".item-sub-assignment[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.item-sub-assignment[_ngcontent-%COMP%]{cursor:pointer}.fsz-ac-ads[_ngcontent-%COMP%]{font-size:3em;text-align:center;margin:0}.p-2[_ngcontent-%COMP%]{padding:20px}.m-0[_ngcontent-%COMP%]{margin:0}.badge-ng-pers[_ngcontent-%COMP%]{padding:3px 5px;border-radius:5px}.color-delivered_late[_ngcontent-%COMP%]{background:#ff9f22}.color-delivered_on_time[_ngcontent-%COMP%], .color-qualificated[_ngcontent-%COMP%]{background:#73ff22}.color-delivered[_ngcontent-%COMP%]{background:#57d0ff}.color-pending[_ngcontent-%COMP%]{background:#d1d1d1}.color-late[_ngcontent-%COMP%]{background:#fcaa1d}.color-returned[_ngcontent-%COMP%]{background:#ffc409}.color-finished[_ngcontent-%COMP%]{background:#4deb8f}.color-in_progress[_ngcontent-%COMP%]{background:#7acaff}"]}),t})();function ie(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function ce(t){ie(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||"object"==typeof t&&"[object Date]"===e?new Date(t.getTime()):"number"==typeof t||"[object Number]"===e?new Date(t):("string"!=typeof t&&"[object String]"!==e||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function se(t){ie(1,arguments);var e=ce(t);return e.setHours(0,0,0,0),e}var ne=i("kRoH"),oe=i("XNiG");function ae(t,e){1&t&&_.bc(0,"mat-progress-bar",8)}function re(t,e){if(1&t){const t=_.hc();_.gc(0,"panel-instructions-activity",9),_.oc("emmitPressButtonRoute",(function(e){return _.Sc(t),_.sc().dismiss(e)})),_.fc()}if(2&t){const t=_.sc();_.Ac("show_details_assignments",!0)("show_points",!0)("expanded_panel",!0)("show_actions",!1)("route_activity",t.route_activity)("show_button_open",!0)("activity",t.activity)}}let le=(()=>{class t{constructor(t,e,i,c){this.navParams=t,this.activitiesService=e,this.controlErroresService=i,this.modalCtrl=c,this.loadingPanel=!1,this.activity=null,this.scrollbarStyle=v.a.scrollbarStyle,this.route_activity=m.h.show_activity,this.uuid=this.navParams.data.uuid}ngOnInit(){this.loadActivity()}loadActivity(){this.loadingPanel=!0,this.activitiesService.get(this.uuid).subscribe(t=>{this.loadingPanel=!1,this.activity=t.data,this.route_activity=this.route_activity.replace(":id",""+this.activity.course_uuid).replace(":id",""+this.activity.course_uuid)},t=>{this.loadingPanel=!1,this.controlErroresService.control(t)})}dismiss(){this.modalCtrl.dismiss()}}return t.\u0275fac=function(e){return new(e||t)(_.ac(n.Fb),_.ac(r.a),_.ac(l.a),_.ac(n.Db))},t.\u0275cmp=_.Ub({type:t,selectors:[["show-item-calendar"]],decls:13,vars:6,consts:[["translucent","true"],["slot","start"],["slot","end"],[3,"click"],["name","close-outline"],["mode","indeterminate",4,"ngIf"],["fullscreen","true",3,"scrollbar"],[3,"show_details_assignments","show_points","expanded_panel","show_actions","route_activity","show_button_open","activity","emmitPressButtonRoute",4,"ngIf"],["mode","indeterminate"],[3,"show_details_assignments","show_points","expanded_panel","show_actions","route_activity","show_button_open","activity","emmitPressButtonRoute"]],template:function(t,e){1&t&&(_.gc(0,"ion-header",0),_.gc(1,"ion-toolbar"),_.gc(2,"ion-buttons",1),_.bc(3,"ion-menu-button"),_.fc(),_.gc(4,"ion-title"),_.ed(5),_.tc(6,"translate"),_.fc(),_.gc(7,"ion-buttons",2),_.gc(8,"ion-button",3),_.oc("click",(function(){return e.dismiss()})),_.bc(9,"ion-icon",4),_.fc(),_.fc(),_.fc(),_.cd(10,ae,1,0,"mat-progress-bar",5),_.fc(),_.gc(11,"ion-content",6),_.cd(12,re,1,7,"panel-instructions-activity",7),_.fc()),2&t&&(_.Lb(5),_.fd(_.uc(6,4,"forms.visor_delivery")),_.Lb(5),_.Ac("ngIf",e.loadingPanel),_.Lb(1),_.Bc("scrollbar",e.scrollbarStyle),_.Lb(1),_.Ac("ngIf",e.activity))},directives:[n.B,n.zb,n.l,n.R,n.xb,n.k,n.C,c.t,n.u,x.b,w.a,A.a],pipes:[P.d],styles:[""]}),t})();const de=["modalContent"];function ue(t,e){if(1&t){const t=_.hc();_.gc(0,"div"),_.gc(1,"mwl-calendar-month-view",13),_.oc("dayClicked",(function(e){return _.Sc(t),_.sc().dayClicked(e.day)}))("eventClicked",(function(e){return _.Sc(t),_.sc().handleEvent("Clicked",e.event)}))("eventTimesChanged",(function(e){return _.Sc(t),_.sc().eventTimesChanged(e)})),_.fc(),_.fc()}if(2&t){const t=_.sc();_.Lb(1),_.Ac("viewDate",t.viewDate)("events",t.events)("refresh",t.refresh)("activeDayIsOpen",t.activeDayIsOpen)}}function ge(t,e){if(1&t){const t=_.hc();_.gc(0,"div"),_.gc(1,"mwl-calendar-week-view",14),_.oc("eventClicked",(function(e){return _.Sc(t),_.sc().handleEvent("Clicked",e.event)}))("eventTimesChanged",(function(e){return _.Sc(t),_.sc().eventTimesChanged(e)})),_.fc(),_.fc()}if(2&t){const t=_.sc();_.Lb(1),_.Ac("viewDate",t.viewDate)("events",t.events)("refresh",t.refresh)}}function me(t,e){if(1&t){const t=_.hc();_.gc(0,"div"),_.gc(1,"mwl-calendar-day-view",14),_.oc("eventClicked",(function(e){return _.Sc(t),_.sc().handleEvent("Clicked",e.event)}))("eventTimesChanged",(function(e){return _.Sc(t),_.sc().eventTimesChanged(e)})),_.fc(),_.fc()}if(2&t){const t=_.sc();_.Lb(1),_.Ac("viewDate",t.viewDate)("events",t.events)("refresh",t.refresh)}}const fe={red:{primary:"#ad2121",secondary:"#FAE3E3"},blue:{primary:"#1e90ff",secondary:"#D1E8FF"},yellow:{primary:"#e3bc08",secondary:"#FDF1BA"}};let he=(()=>{class t{constructor(t,e,i){this.activityService=t,this.modalCtrl=e,this.controlErroresService=i,this.view=ne.d.Week,this.CalendarView=ne.d,this.scrollbarStyle=v.a.scrollbarStyle,this.viewDate=new Date,this.dateLoaded=[],this.refresh=new oe.a,this.events=[],this.activeDayIsOpen=!0}ngOnInit(){this.getCalendarData((new Date).getMonth()+1,(new Date).getFullYear())}dayClicked({date:t,events:e}){console.log("dayClicked"),function(t,e){ie(2,arguments);var i=ce(t),c=ce(e);return i.getFullYear()===c.getFullYear()&&i.getMonth()===c.getMonth()}(t,this.viewDate)&&(this.activeDayIsOpen=!(function(t,e){ie(2,arguments);var i=se(t),c=se(e);return i.getTime()===c.getTime()}(this.viewDate,t)&&!0===this.activeDayIsOpen||0===e.length),this.viewDate=t)}eventTimesChanged({event:t,newStart:e,newEnd:i}){console.log("eventTimesChanged"),this.events=this.events.map(c=>c===t?Object.assign(Object.assign({},t),{start:e,end:i}):c),this.handleEvent("Dropped or resized",t)}handleEvent(t,e){return Object(a.b)(this,void 0,void 0,(function*(){this.modalData={event:e,action:t};const i=yield this.modalCtrl.create({component:le,cssClass:"modal-fullscreen",swipeToClose:!0,componentProps:{uuid:e.id}});yield i.present()}))}setView(t){this.view=t}closeOpenMonthViewDay(t){this.getCalendarData(this.viewDate.getMonth()+1,this.viewDate.getFullYear()),this.activeDayIsOpen=!1}getCalendarData(t,e){this.dateLoaded.find(i=>i.month==t&&i.year==e)||(this.dateLoaded.push({month:t,year:e}),this.activityService.getCalendar(t,e).subscribe(t=>{if(t.data&&Array.isArray(t.data))for(const i of t.data){var e=g.duration(g(i.date_delivery).diff(g(i.open_date))).asHours();let t={start:g(i.open_date).toDate(),end:e>1?g(i.date_delivery).toDate():null,title:'<p class="text-white"><strong>'+i.title+"</strong><br><strong>Curso: </strong>"+(i.course?i.course.name:"-")+"<p>",color:i.course?{primary:i.course.color,secondary:i.course.color}:fe.yellow,allDay:e>24,draggable:!1,id:i.uuid};this.events.push(t),this.refresh.next()}},t=>{this.controlErroresService.control(t)}))}}return t.\u0275fac=function(e){return new(e||t)(_.ac(r.a),_.ac(n.Db),_.ac(l.a))},t.\u0275cmp=_.Ub({type:t,selectors:[["app-show-calendar"]],viewQuery:function(t,e){var i;1&t&&_.Zc(de,!0),2&t&&_.Nc(i=_.pc())&&(e.modalContent=i.first)},decls:44,vars:42,consts:[["translucent","true"],["slot","start"],["fullscreen","true",3,"scrollbar"],[1,"row","text-center",2,"margin-top","10px"],[1,"col-md-4"],[1,"btn-group"],["mwlCalendarPreviousView","",1,"btn","btn-primary",3,"view","viewDate","viewDateChange"],["mwlCalendarToday","",1,"btn","btn-outline-secondary",3,"viewDate","viewDateChange"],["mwlCalendarNextView","",1,"btn","btn-primary",3,"view","viewDate","viewDateChange"],[1,"btn","btn-primary",3,"click"],[3,"ngSwitch"],[4,"ngSwitchCase"],["slot","end"],[3,"viewDate","events","refresh","activeDayIsOpen","dayClicked","eventClicked","eventTimesChanged"],[3,"viewDate","events","refresh","eventClicked","eventTimesChanged"]],template:function(t,e){1&t&&(_.gc(0,"ion-header",0),_.gc(1,"ion-toolbar"),_.gc(2,"ion-buttons",1),_.bc(3,"ion-menu-button"),_.fc(),_.gc(4,"ion-title"),_.ed(5),_.tc(6,"translate"),_.fc(),_.fc(),_.fc(),_.gc(7,"ion-content",2),_.gc(8,"div",3),_.gc(9,"div",4),_.gc(10,"div",5),_.gc(11,"div",6),_.oc("viewDateChange",(function(t){return e.viewDate=t}))("viewDateChange",(function(t){return e.closeOpenMonthViewDay(t)})),_.ed(12),_.tc(13,"translate"),_.fc(),_.gc(14,"div",7),_.oc("viewDateChange",(function(t){return e.viewDate=t})),_.ed(15),_.tc(16,"translate"),_.fc(),_.gc(17,"div",8),_.oc("viewDateChange",(function(t){return e.viewDate=t}))("viewDateChange",(function(t){return e.closeOpenMonthViewDay(t)})),_.ed(18),_.tc(19,"translate"),_.fc(),_.fc(),_.fc(),_.gc(20,"div",4),_.gc(21,"h2"),_.ed(22),_.tc(23,"calendarDate"),_.fc(),_.fc(),_.gc(24,"div",4),_.gc(25,"div",5),_.gc(26,"div",9),_.oc("click",(function(){return e.setView(e.CalendarView.Month)})),_.ed(27),_.tc(28,"translate"),_.fc(),_.gc(29,"div",9),_.oc("click",(function(){return e.setView(e.CalendarView.Week)})),_.ed(30),_.tc(31,"translate"),_.fc(),_.gc(32,"div",9),_.oc("click",(function(){return e.setView(e.CalendarView.Day)})),_.ed(33),_.tc(34,"translate"),_.fc(),_.fc(),_.fc(),_.fc(),_.bc(35,"br"),_.gc(36,"div",10),_.cd(37,ue,2,4,"div",11),_.cd(38,ge,2,3,"div",11),_.cd(39,me,2,3,"div",11),_.fc(),_.fc(),_.gc(40,"ion-footer",0),_.gc(41,"ion-toolbar"),_.gc(42,"ion-buttons",12),_.ed(43,"\xa92022 Ediciones Holgu\xedn"),_.fc(),_.fc(),_.fc()),2&t&&(_.Lb(5),_.fd(_.uc(6,24,"menu.calendar")),_.Lb(2),_.Bc("scrollbar",e.scrollbarStyle),_.Lb(4),_.Ac("view",e.view)("viewDate",e.viewDate),_.Lb(1),_.gd(" ",_.uc(13,26,"paginate.previous")," "),_.Lb(2),_.Ac("viewDate",e.viewDate),_.Lb(1),_.gd(" ",_.uc(16,28,"forms.today")," "),_.Lb(2),_.Ac("view",e.view)("viewDate",e.viewDate),_.Lb(1),_.gd(" ",_.uc(19,30,"paginate.next")," "),_.Lb(4),_.fd(_.wc(23,32,e.viewDate,e.view+"ViewTitle","Es")),_.Lb(4),_.Qb("active",e.view===e.CalendarView.Month),_.Lb(1),_.gd(" ",_.uc(28,36,"forms.month")," "),_.Lb(2),_.Qb("active",e.view===e.CalendarView.Week),_.Lb(1),_.gd(" ",_.uc(31,38,"forms.week")," "),_.Lb(2),_.Qb("active",e.view===e.CalendarView.Day),_.Lb(1),_.gd(" ",_.uc(34,40,"forms.day")," "),_.Lb(3),_.Ac("ngSwitch",e.view),_.Lb(1),_.Ac("ngSwitchCase",e.CalendarView.Month),_.Lb(1),_.Ac("ngSwitchCase",e.CalendarView.Week),_.Lb(1),_.Ac("ngSwitchCase",e.CalendarView.Day))},directives:[n.B,n.zb,n.l,n.R,n.xb,n.u,x.b,ne.g,ne.i,ne.h,c.x,c.y,n.z,ne.c,ne.e,ne.a],pipes:[P.d,ne.j],styles:[""]}),t})();var pe=i("zTdJ"),be=i("bSwM");function ve(t,e){1&t&&_.bc(0,"mat-progress-bar",10)}function _e(t,e){if(1&t){const t=_.hc();_.gc(0,"div",22),_.gc(1,"input",23),_.oc("ngModelChange",(function(e){return _.Sc(t),_.sc(2).title=e})),_.tc(2,"translate"),_.fc(),_.fc()}if(2&t){const t=_.sc(2);_.Lb(1),_.Bc("placeholder",_.uc(2,3,"forms.title")),_.Ac("ngModel",t.title)("disabled",t.saving)}}function ye(t,e){1&t&&_.bc(0,"mat-progress-bar",10)}function ke(t,e){if(1&t&&_.bc(0,"img",32),2&t){const t=_.sc().$implicit;_.Bc("src",t.picture||t.file_url,_.Vc)}}function Le(t,e){1&t&&_.bc(0,"img",33)}function xe(t,e){if(1&t){const t=_.hc();_.gc(0,"div",34),_.oc("click",(function(){_.Sc(t);const e=_.sc(),i=e.index,c=e.$implicit;return _.sc(3).removeImage(i,c.uuid)})),_.bc(1,"ion-icon",35),_.fc()}}function we(t,e){if(1&t&&(_.gc(0,"div",28),_.cd(1,ye,1,0,"mat-progress-bar",4),_.cd(2,ke,1,1,"img",29),_.cd(3,Le,1,0,"img",30),_.cd(4,xe,2,0,"div",31),_.fc()),2&t){const t=e.$implicit,i=_.sc(3);_.Ac("matTooltip",t.name),_.Lb(1),_.Ac("ngIf",t.uploading),_.Lb(1),_.Ac("ngIf",t.is_image),_.Lb(1),_.Ac("ngIf",!t.is_image),_.Lb(1),_.Ac("ngIf",!i.saving)}}function Ae(t,e){if(1&t&&(_.gc(0,"div",24),_.gc(1,"h3",25),_.ed(2),_.tc(3,"translate"),_.fc(),_.gc(4,"div",26),_.cd(5,we,5,5,"div",27),_.fc(),_.fc()),2&t){const t=_.sc(2);_.Lb(2),_.fd(_.uc(3,2,"pages.course.upload_image")),_.Lb(3),_.Ac("ngForOf",t.images)}}function Se(t,e){if(1&t){const t=_.hc();_.gc(0,"div",38),_.gc(1,"a",39),_.gc(2,"div",40),_.gc(3,"a",41),_.ed(4),_.fc(),_.fc(),_.gc(5,"div",42),_.oc("click",(function(){_.Sc(t);const i=e.index;return _.sc(3).deleteLink(i)})),_.bc(6,"ion-icon",35),_.fc(),_.fc(),_.fc()}if(2&t){const t=e.$implicit;_.Lb(3),_.Bc("href",t,_.Vc),_.Lb(1),_.fd(t)}}function Ce(t,e){if(1&t&&(_.gc(0,"div",24),_.gc(1,"h3",36),_.ed(2),_.tc(3,"translate"),_.fc(),_.cd(4,Se,7,2,"div",37),_.fc()),2&t){const t=_.sc(2);_.Lb(2),_.fd(_.uc(3,2,"pages.course.links_externals")),_.Lb(2),_.Ac("ngForOf",t.links)}}function Ie(t,e){if(1&t){const t=_.hc();_.gc(0,"div"),_.cd(1,_e,3,5,"div",11),_.gc(2,"div",12),_.gc(3,"textarea",13),_.oc("ngModelChange",(function(e){return _.Sc(t),_.sc().model=e})),_.fc(),_.fc(),_.cd(4,Ae,6,4,"div",14),_.cd(5,Ce,5,4,"div",14),_.gc(6,"ion-item"),_.gc(7,"ion-item"),_.gc(8,"section",15),_.gc(9,"mat-checkbox",16),_.oc("ngModelChange",(function(e){return _.Sc(t),_.sc().can_comment=e})),_.ed(10),_.tc(11,"translate"),_.fc(),_.fc(),_.fc(),_.gc(12,"ion-item"),_.gc(13,"label",17),_.gc(14,"ion-tab-button",18),_.gc(15,"input",19),_.oc("change",(function(e){return _.Sc(t),_.sc().changeFile(e)})),_.fc(),_.bc(16,"ion-icon",20),_.fc(),_.fc(),_.gc(17,"ion-tab-button",2),_.oc("click",(function(){return _.Sc(t),_.sc().typingLink()})),_.bc(18,"ion-icon",21),_.fc(),_.fc(),_.fc(),_.fc()}if(2&t){const t=_.sc();_.Lb(1),_.Ac("ngIf",t.title_show),_.Lb(2),_.Ac("ngModel",t.model),_.Lb(1),_.Ac("ngIf",t.images.length>0),_.Lb(1),_.Ac("ngIf",t.links.length>0),_.Lb(4),_.Ac("ngModel",t.can_comment),_.Lb(1),_.fd(_.uc(11,9,"pages.course.can_comment")),_.Lb(4),_.Ac("disabled",t.saving),_.Lb(1),_.Ac("disabled",t.saving),_.Lb(2),_.Ac("disabled",t.saving)}}let Oe=(()=>{class t{constructor(t,e,i,c,s,n){this.modalCtrl=t,this.controlErroresService=e,this.navParams=i,this.courseService=c,this.alertController=s,this.toastService=n,this.post_id=0,this.scrollbarStyle=v.a.scrollbarStyle,this.loading=!0,this.post=null,this.links=[],this.images=[],this.saving=!1,this.type="post",this.model="",this.title="",this.can_comment=0,this.filesDeleted=[],this.title_show=!1,this.totalFilesUploaded=0,this.post_id=this.navParams.data.post_id,this.title_show=this.navParams.data.title_show,this.type=this.navParams.data.type||"post"}startEditor(){setTimeout(()=>{let t=document.getElementById("text-model-post-edit");CKEDITOR.replace(t),CKEDITOR.instances["text-model-post-edit"].setData(this.post.text)},500)}ngOnInit(){this.loadPost()}loadPost(){this.loading=!0,this.courseService.getOnePost(this.post_id).subscribe(t=>{this.loading=!1,this.post=t.data,this.can_comment=this.post.can_comment,this.post&&Array.isArray(this.post.links)&&this.post.links.forEach(t=>{this.links.push(t.text)}),this.post&&Array.isArray(this.post.images)&&(this.images=this.post.images),this.title=this.post.title,this.startEditor()},t=>{this.loading=!1,this.controlErroresService.control(t),this.dismiss()})}changeFile(t){if(t.target.files&&t.target.files[0]){var e=new FileReader;let i={photo:t.target.files[0],name:t.target.files[0].name,size:t.target.files[0].size,picture:"",is_image:t.target.files[0].type.indexOf("image")>=0,content_type:t.target.files[0].type||"unknown"};if(e.onload=t=>{i.picture=t.target.result},t.target.files[0].size>1e6*v.a.max_size_img)return void this.toastService.presentToast("Peso m\xe1ximo "+v.a.max_size_img+"MB","warning");this.images.push(i),e.readAsDataURL(t.target.files[0])}}removeImage(t,e){t<0||(this.images.splice(t,1),e&&this.filesDeleted.push(e))}deleteLink(t){t<0||this.links.splice(t,1)}typingLink(){return Object(a.b)(this,void 0,void 0,(function*(){const t=yield this.alertController.create({cssClass:"",header:"A\xf1adir enlace",inputs:[{name:"link",value:"",type:"url",placeholder:"Enlace"}],buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:()=>{}},{text:"A\xf1adir",handler:t=>{console.log(t),t.link&&this.links.push(t.link)}}]});yield t.present()}))}save(t=null){this.model=CKEDITOR.instances["text-model-post-edit"].getData(),this.model?(this.saving=!0,this.totalFilesUploaded=0,this.courseService.updatePost({text:this.model,title:this.title,type:this.type,links:this.links,status:t,files_deleted:this.filesDeleted,can_comment:this.can_comment},this.post_id).subscribe(t=>{t.data?(this.post=t.data,0==this.images.filter(t=>t.photo).length?(this.checkUploadPost(),this.saving=!1,this.toastService.presentToast(t.message,t.status)):this.saveImagesPost(t.data.uuid)):(this.toastService.presentToast(t.message,t.status),this.saving=!1)},t=>{this.saving=!1,this.controlErroresService.control(t)})):this.toastService.presentToast("Agregue su comentario","warning")}saveImagesPost(t){let e=this.images.filter(t=>t.photo);for(const i of e)i.uploading=!0,this.courseService.saveImagePost(Object(m.c)({file:i.photo,content_type:i.content_type,name:i.name,size:i.size}),t).subscribe(t=>{i.uploading=!1,this.totalFilesUploaded++,this.post.images.push(t.data),this.checkUploadPost()},t=>{i.uploading=!1,this.totalFilesUploaded++,this.controlErroresService.control(t),this.checkUploadPost()})}checkUploadPost(){let t=this.images.filter(t=>t.photo);this.totalFilesUploaded>=t.length&&(this.saving=!1,this.dismiss(this.post))}dismiss(t){this.modalCtrl.dismiss(t)}}return t.\u0275fac=function(e){return new(e||t)(_.ac(n.Db),_.ac(l.a),_.ac(n.Fb),_.ac(d.a),_.ac(n.b),_.ac(b.a))},t.\u0275cmp=_.Ub({type:t,selectors:[["app-edit-post-course"]],decls:26,vars:23,consts:[["translucent","true"],["slot","end"],[3,"disabled","click"],["name","close-outline"],["mode","indeterminate",4,"ngIf"],["fullscreen","true",3,"scrollbar"],[4,"ngIf"],["color","light",3,"disabled","click"],["color","warning",3,"disabled","click"],["color","success",3,"disabled","click"],["mode","indeterminate"],["class","intro-x mt-8","style","display: flex;margin-bottom: 1em;",4,"ngIf"],[1,"m-1"],["rows","5","id","text-model-post-edit",3,"ngModel","ngModelChange"],["class","border-2 border-dashed dark:border-dark-5 rounded-md pt-4","style","margin-top: 10px;",4,"ngIf"],[1,"example-section"],[1,"example-margin",3,"ngModel","ngModelChange"],["for","file-add-rs-post"],[3,"disabled"],["type","file","id","file-add-rs-post",1,"d-none",3,"disabled","change"],["name","images-outline"],["name","link-outline"],[1,"intro-x","mt-8",2,"display","flex","margin-bottom","1em"],["type","text","name","title",1,"pin-input","intro-x","login__input","form-control","py-3","px-4","border-gray-300","block",3,"ngModel","disabled","placeholder","ngModelChange"],[1,"border-2","border-dashed","dark:border-dark-5","rounded-md","pt-4",2,"margin-top","10px"],[2,"margin","0","padding-left","20px"],[1,"flex","flex-wrap","px-4"],["class","w-24 h-24 relative image-fit mb-5 mr-5 cursor-pointer zoom-in","tooltip","Call","navTooltip","",3,"matTooltip",4,"ngFor","ngForOf"],["tooltip","Call","navTooltip","",1,"w-24","h-24","relative","image-fit","mb-5","mr-5","cursor-pointer","zoom-in",3,"matTooltip"],["class","rounded-md","alt","Imagen",3,"src",4,"ngIf"],["class","rounded-md","alt","File","src","/assets/img/document-file-icon.png",4,"ngIf"],["title","Remove this image?","class"," w-5 h-5 flex items-center justify-center absolute rounded-full text-white bg-theme-6 right-0 top-0 -mr-2 -mt-2",3,"click",4,"ngIf"],["alt","Imagen",1,"rounded-md",3,"src"],["alt","File","src","/assets/img/document-file-icon.png",1,"rounded-md"],["title","Remove this image?",1,"w-5","h-5","flex","items-center","justify-center","absolute","rounded-full","text-white","bg-theme-6","right-0","top-0","-mr-2","-mt-2",3,"click"],["name","trash-outline"],[1,"ml-1",2,"margin","0","padding-left","20px"],["class","pos__ticket box p-2",4,"ngFor","ngForOf"],[1,"pos__ticket","box","p-2"],["href","javascript:;","data-toggle","modal","data-target","#add-item-modal",1,"flex","items-center","p-3","cursor-pointer","transition","duration-300","ease-in-out","bg-white","dark:bg-dark-3","hover:bg-gray-200","dark:hover:bg-dark-1","rounded-md"],[1,"pos__ticket__item-name","truncate","mr-1"],["target","_blank",3,"href"],[1,"ml-auto","font-medium",3,"click"]],template:function(t,e){1&t&&(_.gc(0,"ion-header",0),_.gc(1,"ion-toolbar"),_.gc(2,"ion-title"),_.ed(3),_.tc(4,"translate"),_.fc(),_.gc(5,"ion-buttons",1),_.gc(6,"ion-button",2),_.oc("click",(function(){return e.dismiss()})),_.bc(7,"ion-icon",3),_.fc(),_.fc(),_.fc(),_.cd(8,ve,1,0,"mat-progress-bar",4),_.fc(),_.gc(9,"ion-content",5),_.cd(10,Ie,19,11,"div",6),_.fc(),_.gc(11,"ion-footer",0),_.gc(12,"ion-toolbar"),_.gc(13,"ion-item"),_.gc(14,"ion-item",1),_.gc(15,"ion-button",7),_.oc("click",(function(){return e.dismiss()})),_.ed(16),_.tc(17,"translate"),_.fc(),_.gc(18,"ion-button",8),_.oc("click",(function(){return e.save("draft")})),_.ed(19),_.tc(20,"translate"),_.tc(21,"translate"),_.fc(),_.gc(22,"ion-button",9),_.oc("click",(function(){return e.save()})),_.ed(23),_.tc(24,"translate"),_.tc(25,"translate"),_.fc(),_.fc(),_.fc(),_.fc(),_.fc()),2&t&&(_.Lb(3),_.gd(" ",_.uc(4,11,"pages.course.edit_post")," "),_.Lb(3),_.Ac("disabled",e.loading),_.Lb(2),_.Ac("ngIf",e.loading),_.Lb(1),_.Bc("scrollbar",e.scrollbarStyle),_.Lb(1),_.Ac("ngIf",e.post),_.Lb(5),_.Ac("disabled",e.saving),_.Lb(1),_.gd(" ",_.uc(17,13,"buttons.cancel")," "),_.Lb(2),_.Ac("disabled",e.saving),_.Lb(1),_.gd(" ",e.saving?_.uc(20,15,"buttons.uploading"):_.uc(21,17,"buttons.save_eraser")," "),_.Lb(3),_.Ac("disabled",e.saving),_.Lb(1),_.gd(" ",e.saving?_.uc(24,19,"buttons.uploading"):_.uc(25,21,"buttons.save")," "))},directives:[n.B,n.zb,n.xb,n.l,n.k,n.C,c.t,n.u,x.b,n.z,n.H,w.a,s.c,s.r,s.u,be.a,n.sb,c.s,O.a],pipes:[P.d],styles:[""]}),t})();var Pe=i("Gs5E");function Me(t,e){1&t&&_.bc(0,"mat-progress-bar",9)}function Te(t,e){if(1&t){const t=_.hc();_.gc(0,"div"),_.gc(1,"div",10),_.gc(2,"textarea",11),_.oc("ngModelChange",(function(e){return _.Sc(t),_.sc().model=e})),_.fc(),_.fc(),_.fc()}if(2&t){const t=_.sc();_.Lb(2),_.Ac("ngModel",t.model)}}let Fe=(()=>{class t{constructor(t,e,i,c,s){this.modalCtrl=t,this.controlErroresService=e,this.navParams=i,this.courseService=c,this.toastService=s,this.post_id=0,this.scrollbarStyle=v.a.scrollbarStyle,this.loading=!1,this.comment=null,this.saving=!1,this.model="",this.comment=this.navParams.data.comment,this.startEditor()}startEditor(){setTimeout(()=>{let t=document.getElementById("text-model-post-edit");CKEDITOR.replace(t),CKEDITOR.instances["text-model-post-edit"].setData(this.comment.text)},500)}ngOnInit(){}save(t=null){this.model=CKEDITOR.instances["text-model-post-edit"].getData(),this.model?(this.saving=!0,this.courseService.updateCommentPost(this.comment.uuid,{text:this.model}).subscribe(t=>{t.data?(this.comment=t.data,this.saving=!1,this.toastService.presentToast(t.message,t.status),this.dismiss(this.comment)):(this.toastService.presentToast(t.message,t.status),this.saving=!1)},t=>{this.saving=!1,this.controlErroresService.control(t)})):this.toastService.presentToast("Agregue su comentario","warning")}dismiss(t){this.modalCtrl.dismiss(t)}}return t.\u0275fac=function(e){return new(e||t)(_.ac(n.Db),_.ac(l.a),_.ac(n.Fb),_.ac(d.a),_.ac(b.a))},t.\u0275cmp=_.Ub({type:t,selectors:[["app-edit-comment"]],decls:22,vars:17,consts:[["translucent","true"],["slot","end"],[3,"disabled","click"],["name","close-outline"],["mode","indeterminate",4,"ngIf"],["fullscreen","true",3,"scrollbar"],[4,"ngIf"],["color","light",3,"disabled","click"],["color","success",3,"disabled","click"],["mode","indeterminate"],[1,"m-1"],["rows","5","id","text-model-post-edit",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(_.gc(0,"ion-header",0),_.gc(1,"ion-toolbar"),_.gc(2,"ion-title"),_.ed(3),_.tc(4,"translate"),_.fc(),_.gc(5,"ion-buttons",1),_.gc(6,"ion-button",2),_.oc("click",(function(){return e.dismiss()})),_.bc(7,"ion-icon",3),_.fc(),_.fc(),_.fc(),_.cd(8,Me,1,0,"mat-progress-bar",4),_.fc(),_.gc(9,"ion-content",5),_.cd(10,Te,3,1,"div",6),_.fc(),_.gc(11,"ion-footer",0),_.gc(12,"ion-toolbar"),_.gc(13,"ion-item"),_.gc(14,"ion-item",1),_.gc(15,"ion-button",7),_.oc("click",(function(){return e.dismiss()})),_.ed(16),_.tc(17,"translate"),_.fc(),_.gc(18,"ion-button",8),_.oc("click",(function(){return e.save()})),_.ed(19),_.tc(20,"translate"),_.tc(21,"translate"),_.fc(),_.fc(),_.fc(),_.fc(),_.fc()),2&t&&(_.Lb(3),_.gd(" ",_.uc(4,9,"pages.course.edit_comment")," "),_.Lb(3),_.Ac("disabled",e.loading),_.Lb(2),_.Ac("ngIf",e.loading),_.Lb(1),_.Bc("scrollbar",e.scrollbarStyle),_.Lb(1),_.Ac("ngIf",e.comment),_.Lb(5),_.Ac("disabled",e.saving),_.Lb(1),_.gd(" ",_.uc(17,11,"buttons.cancel")," "),_.Lb(2),_.Ac("disabled",e.saving),_.Lb(1),_.gd(" ",e.saving?_.uc(20,13,"buttons.uploading"):_.uc(21,15,"buttons.save")," "))},directives:[n.B,n.zb,n.xb,n.l,n.k,n.C,c.t,n.u,x.b,n.z,n.H,w.a,s.c,s.r,s.u],pipes:[P.d],styles:[""]}),t})();const ze=["theLastReferencePost"];function De(t,e){if(1&t){const t=_.hc();_.gc(0,"div",27),_.gc(1,"ion-button",28),_.oc("click",(function(){_.Sc(t);const e=_.sc(2);return e.editPost(e.post)})),_.bc(2,"ion-icon",29),_.fc(),_.gc(3,"ion-button",30),_.oc("click",(function(){return _.Sc(t),_.sc(2).removePost()})),_.bc(4,"ion-icon",31),_.fc(),_.fc()}}function qe(t,e){if(1&t&&(_.gc(0,"div",35),_.gc(1,"a",36),_.gc(2,"div",37),_.gc(3,"a",38),_.ed(4),_.fc(),_.fc(),_.fc(),_.fc()),2&t){const t=e.$implicit;_.Lb(3),_.Bc("href",t.text,_.Vc),_.Lb(1),_.fd(t.text)}}function Ee(t,e){if(1&t&&(_.gc(0,"div",32),_.gc(1,"h3",33),_.ed(2),_.tc(3,"translate"),_.fc(),_.cd(4,qe,5,2,"div",34),_.fc()),2&t){const t=_.sc(2);_.Lb(2),_.fd(_.uc(3,2,"pages.course.links_externals")),_.Lb(2),_.Ac("ngForOf",t.post.links)}}function $e(t,e){if(1&t&&_.bc(0,"img",45),2&t){const t=_.sc().$implicit;_.Bc("src",t.file_url,_.Vc)}}function je(t,e){1&t&&_.bc(0,"img",46)}function Be(t,e){if(1&t&&(_.gc(0,"a",42),_.cd(1,$e,1,1,"img",43),_.cd(2,je,1,0,"img",44),_.fc()),2&t){const t=e.$implicit;_.Bc("href",t.file_url,_.Vc),_.Ac("matTooltip",t.name),_.Lb(1),_.Ac("ngIf",t.is_image),_.Lb(1),_.Ac("ngIf",!t.is_image)}}function Re(t,e){if(1&t&&(_.gc(0,"div",32),_.gc(1,"h3",39),_.ed(2),_.tc(3,"translate"),_.fc(),_.gc(4,"div",40),_.cd(5,Be,3,4,"a",41),_.fc(),_.fc()),2&t){const t=_.sc(2);_.Lb(2),_.fd(_.uc(3,2,"pages.course.files")),_.Lb(3),_.Ac("ngForOf",t.post.images)}}function Qe(t,e){if(1&t&&(_.gc(0,"div",59,60),_.bc(2,"img",61),_.fc()),2&t){const t=_.sc().$implicit,e=_.sc(2);_.Lb(2),_.Ac("alt",null!=t.user_create?t.user_create.name:"-")("src",null!=t.user_create&&null!=t.user_create.information?t.user_create.information.image_url:e.profile_img_route,_.Vc)}}function Ve(t,e){if(1&t&&(_.gc(0,"div",59),_.bc(1,"img",61),_.fc()),2&t){const t=_.sc().$implicit,e=_.sc(2);_.Lb(1),_.Ac("alt",null!=t.user_create?t.user_create.name:"-")("src",null!=t.user_create&&null!=t.user_create.information?t.user_create.information.image_url:e.profile_img_route,_.Vc)}}function Ue(t,e){if(1&t&&(_.gc(0,"button",62),_.rc(),_.gc(1,"svg",63),_.bc(2,"path",64),_.fc(),_.fc()),2&t){_.sc();const t=_.Oc(11);_.Ac("matMenuTriggerFor",t)}}function Ne(t,e){if(1&t){const t=_.hc();_.gc(0,"div",47),_.gc(1,"div",48),_.cd(2,Qe,3,2,"div",49),_.cd(3,Ve,2,2,"div",49),_.gc(4,"div",50),_.gc(5,"div",6),_.gc(6,"a",51),_.ed(7),_.fc(),_.bc(8,"a",52),_.cd(9,Ue,3,1,"button",53),_.gc(10,"mat-menu",null,54),_.gc(12,"button",55),_.oc("click",(function(){_.Sc(t);const i=e.$implicit;return _.sc(2).enableModeEdit(i)})),_.bc(13,"ion-icon",29),_.ed(14),_.tc(15,"translate"),_.fc(),_.gc(16,"button",55),_.oc("click",(function(){_.Sc(t);const i=e.$implicit,c=e.index,s=_.sc(2);return s.removeComment(s.post,i,c)})),_.bc(17,"ion-icon",56),_.ed(18),_.tc(19,"translate"),_.fc(),_.fc(),_.fc(),_.gc(20,"div",57),_.ed(21),_.fc(),_.bc(22,"div",58),_.fc(),_.fc(),_.fc()}if(2&t){const t=e.$implicit,i=e.index,c=_.sc(2);_.Lb(2),_.Ac("ngIf",c.comments.length==i+1),_.Lb(1),_.Ac("ngIf",c.comments.length!=i+1),_.Lb(4),_.fd(null!=t.user_create?t.user_create.name:"-"),_.Lb(2),_.Ac("ngIf",t.is_my),_.Lb(5),_.gd(" ",_.uc(15,8,"buttons.edit")," "),_.Lb(4),_.gd(" ",_.uc(19,10,"buttons.delete")," "),_.Lb(3),_.fd(c.moment(t.date_created).fromNow()),_.Lb(1),_.Ac("innerHTML",t.text,_.Tc)}}function He(t,e){if(1&t){const t=_.hc();_.gc(0,"ion-grid"),_.gc(1,"ion-row"),_.gc(2,"ion-col",3),_.gc(3,"div",4),_.gc(4,"div",5),_.gc(5,"div",6),_.gc(6,"div",7),_.bc(7,"img",8),_.fc(),_.gc(8,"div",9),_.gc(9,"a",10),_.ed(10),_.fc(),_.ed(11),_.tc(12,"translate"),_.gc(13,"div",11),_.ed(14,"Senior Frontend Engineer"),_.fc(),_.fc(),_.fc(),_.cd(15,De,5,0,"div",12),_.fc(),_.gc(16,"h2",13),_.ed(17),_.fc(),_.gc(18,"div",14),_.ed(19),_.fc(),_.gc(20,"div",15),_.bc(21,"p",16),_.fc(),_.cd(22,Ee,5,4,"div",17),_.cd(23,Re,6,4,"div",17),_.gc(24,"div",18),_.gc(25,"div",19),_.ed(26),_.tc(27,"translate"),_.fc(),_.gc(28,"div",20),_.bc(29,"i",21),_.gc(30,"textarea",22),_.oc("ngModelChange",(function(e){return _.Sc(t),_.sc().model=e})),_.fc(),_.fc(),_.gc(31,"ion-item"),_.gc(32,"ion-item",23),_.gc(33,"ion-button",24),_.oc("click",(function(){return _.Sc(t),_.sc().submitComment()})),_.ed(34),_.tc(35,"translate"),_.tc(36,"translate"),_.fc(),_.fc(),_.fc(),_.fc(),_.gc(37,"div",25),_.cd(38,Ne,23,12,"div",26),_.fc(),_.fc(),_.fc(),_.fc(),_.fc()}if(2&t){const t=_.sc();_.Lb(7),_.Ac("src",null!=t.post.user_create&&null!=t.post.user_create.information?t.post.user_create.information.image_url:t.profile_img_route,_.Vc),_.Lb(3),_.gd("",null!=t.post.user_create?t.post.user_create.name:"-"," "),_.Lb(1),_.gd(", ",_.uc(12,16,"forms.author")," "),_.Lb(4),_.Ac("ngIf",t.post.is_my),_.Lb(2),_.gd(" ",t.post.title," "),_.Lb(2),_.gd(" ",t.moment(t.post.date_created).format("DD/MM/YYYY")," "),_.Lb(2),_.Ac("innerHTML",t.post.text,_.Tc),_.Lb(1),_.Ac("ngIf",t.post.links&&t.post.links.length>0),_.Lb(1),_.Ac("ngIf",t.post.images&&t.post.images.length>0),_.Lb(1),_.Ac("ngClass","1"==t.post.can_comment?"":"d-none"),_.Lb(2),_.hd("",t.post.total_comments||0," ",_.uc(27,18,"forms.responses"),""),_.Lb(4),_.Ac("ngModel",t.model),_.Lb(3),_.Ac("disabled",t.saving),_.Lb(1),_.gd(" ",t.saving?_.uc(35,20,"buttons.uploading"):_.uc(36,22,"buttons.publish")," "),_.Lb(4),_.Ac("ngForOf",t.comments)}}let Je=(()=>{class t{constructor(t,e,i,c,s,n,o,a,r){this.modalCtrl=t,this.controlErroresService=e,this.activeRoute=i,this.routerOutlet=c,this.courseService=s,this.alertController=n,this.toastService=o,this.loadingService=a,this.redirectService=r,this.totalPages=0,this.this_page=0,this.model="",this.profile_img_route="/assets/images/profile-8.jpg",this.post=null,this.moment=g,this.number_paginate=0,this.post_id=0,this.course_id=0,this.loading=!0,this.comments=[],this.saving=!1,this.type="post",this.title_show=!1,this.post_id=i.snapshot.params.post_id,this.type=i.snapshot.params.type,this.course_id=i.snapshot.params.uuid,this.moment.locale("es"),g.locale("es")}ngOnInit(){this.loadPost(),this.intersectionObserver()}ngAfterViewInit(){this.theLastReferencePost.changes.subscribe(t=>{t.last&&this.observer.observe(t.last.nativeElement)})}removePost(){return Object(a.b)(this,void 0,void 0,(function*(){const t=yield this.alertController.create({header:"Eliminar",message:"\xbfDesea eliminar este post?",buttons:[{text:"Cancelar",role:"cancel"},{text:"Eliminar",role:"destructive",handler:()=>{this.loadingService.change(!0),this.courseService.deletePost(this.post.uuid).subscribe(t=>{this.loadingService.change(!1),this.redirectService.redirect(t.message,m.h.one_course+this.course_id+"/"+this.course_id+"/"+this.type,t.status)},t=>{this.loadingService.change(!1),this.controlErroresService.control(t)})}}]});yield t.present()}))}editPost(t){return Object(a.b)(this,void 0,void 0,(function*(){const e=yield this.modalCtrl.create({component:Oe,cssClass:"modal-fullscreen",swipeToClose:!0,presentingElement:this.routerOutlet.nativeEl,componentProps:{post_id:t.uuid,title_show:!0}});yield e.present();const{data:i}=yield e.onWillDismiss();console.log(i),i&&(t.text=i.text,t.date_created=i.date_created,t.can_comment=i.can_comment,t.images=i.images,t.status=i.status,t.total_comments=i.total_comments,t.links=i.links,t.type=i.type,t.title=i.title)}))}intersectionObserver(){this.observer=new IntersectionObserver(t=>{t[0].isIntersecting&&this.totalPages>=this.this_page&&this.loadComments()},{root:null,rootMargin:"0px",threshold:.5})}loadComments(){this.this_page++,this.loadingService.change(!0),this.courseService.getCommentPost(this.post_id,this.this_page||1).subscribe(t=>{this.loadingService.change(!1),this.comments=this.comments.concat(t.data),this.this_page=t.here,this.totalPages=t.last_page,this.number_paginate=t.number_paginate},t=>{this.loadingService.change(!1),this.controlErroresService.control(t)})}loadPost(){this.loadingService.change(!0),this.courseService.getOnePost(this.post_id).subscribe(t=>{this.loadingService.change(!1),this.post=t.data,this.loadComments(),setTimeout(()=>{let t=document.getElementById("text-model-post");CKEDITOR.replace(t)},200)},t=>{this.loadingService.change(!1),this.controlErroresService.control(t),this.redirectService.redirect("null",m.h.one_course+this.course_id+"/"+this.course_id+"/"+this.type)})}submitComment(){this.model=CKEDITOR.instances["text-model-post"].getData(),this.model?(this.loadingService.change(!0),this.saving=!0,this.courseService.commentPost(this.post_id,{text:this.model}).subscribe(t=>{this.model="",isNaN(this.post.total_comments)?this.post.total_comments=1:this.post.total_comments++,this.loading=!1,Array.isArray(this.comments)&&this.comments.unshift(t.data),this.loadingService.change(!1),this.model=CKEDITOR.instances["text-model-post"].setData("")},t=>{this.loadingService.change(!1),this.saving=!1,this.controlErroresService.control(t)})):this.toastService.presentToast("\xa1Agregue un comentario para poder publicarlo!","warning")}removeComment(t,e,i){return Object(a.b)(this,void 0,void 0,(function*(){const c=yield this.alertController.create({header:"Eliminar",message:"\xbfDesea eliminar este comentario?",buttons:[{text:"Cancelar",role:"cancel"},{text:"Eliminar",role:"destructive",handler:()=>{this.loadingService.change(!0),this.courseService.deleteCommentPost(e.uuid).subscribe(e=>{this.loadingService.change(!1),this.comments.splice(i,1),isNaN(t.total_comments)||t.total_comments--,this.toastService.presentToast(e.message,e.status)},t=>{this.loadingService.change(!1),this.controlErroresService.control(t)})}}]});yield c.present()}))}updateComment(t){t.aux_text&&(t.comment_upload=!0,this.courseService.updateCommentPost(t.uuid,{text:t.aux_text}).subscribe(e=>{t.comment_upload=!1,t.text=t.aux_text,this.toastService.presentToast(e.message,e.status),t.edit_mode=!1},e=>{t.comment_upload=!1,this.controlErroresService.control(e)}))}enableModeEdit(t){return Object(a.b)(this,void 0,void 0,(function*(){const e=yield this.modalCtrl.create({component:Fe,cssClass:"modal-fullscreen",swipeToClose:!0,presentingElement:this.routerOutlet.nativeEl,componentProps:{comment:t}});yield e.present();const{data:i}=yield e.onWillDismiss();console.log(i),i&&(t.text=i.text)}))}}return t.\u0275fac=function(e){return new(e||t)(_.ac(n.Db),_.ac(l.a),_.ac(o.a),_.ac(n.fb),_.ac(d.a),_.ac(n.b),_.ac(b.a),_.ac(u.a),_.ac(Pe.a))},t.\u0275cmp=_.Ub({type:t,selectors:[["app-show-item-post"]],viewQuery:function(t,e){var i;1&t&&_.ld(ze,!0,_.o),2&t&&_.Nc(i=_.pc())&&(e.theLastReferencePost=i)},decls:4,vars:1,consts:[[1,"flex","flex-center"],["size","12","size-sm","11","size-md","10","size-xl","9"],[4,"ngIf"],["size","12","size-sm","12","size-md","12","size-xl","12",1,"container-add-post"],[1,"intro-y","news","p-2","box","mt-8","p-3"],[1,"intro-y","flex","text-xs","sm:text-sm","flex-col","sm:flex-row","items-center","mb-2","pb-2","border-t","border-gray-200","dark:border-dark-5"],[1,"flex","items-center"],[1,"w-12","h-12","flex-none","image-fit"],["alt","--",1,"rounded-full",3,"src"],[1,"ml-3","mr-auto"],["href","",1,"font-medium"],[1,"text-gray-600"],["class","flex items-center text-gray-700 dark:text-gray-600 sm:ml-auto mt-5 sm:mt-0",4,"ngIf"],[1,"intro-y","font-medium","text-xl","sm:text-2xl"],[1,"intro-y","mt-3","text-xs","sm:text-sm"],[1,"intro-y","text-justify","leading-relaxed","mt-2","mb-2"],[3,"innerHTML"],["class","border-2 border-dashed dark:border-dark-5 rounded-md pt-4","style","margin-top: 10px;",4,"ngIf"],[1,"intro-y","border-t","border-gray-200","dark:border-dark-5",3,"ngClass"],[1,"text-base","sm:text-lg","font-medium"],[1,"relative","mt-5"],["data-feather","message-circle",1,"w-5","h-5","absolute","my-auto","inset-y-0","ml-6","left-0","text-gray-600"],["rows","5","id","text-model-post",3,"ngModel","ngModelChange"],["slot","end"],["color","success",3,"disabled","click"],[1,"intro-y","mt-5","pb-10"],["class","mt-2 pt-2 border-t border-gray-200 dark:border-dark-5",4,"ngFor","ngForOf"],[1,"flex","items-center","text-gray-700","dark:text-gray-600","sm:ml-auto","mt-5","sm:mt-0"],["fill","outline","color","success",3,"click"],["name","create-outline"],["fill","outline",3,"click"],["color","danger","name","trash-outline"],[1,"border-2","border-dashed","dark:border-dark-5","rounded-md","pt-4",2,"margin-top","10px"],[1,"ml-1",2,"margin","0","padding-left","20px"],["class","pos__ticket box p-2",4,"ngFor","ngForOf"],[1,"pos__ticket","box","p-2"],["href","javascript:;","data-toggle","modal","data-target","#add-item-modal",1,"flex","items-center","p-3","cursor-pointer","transition","duration-300","ease-in-out","dark:bg-dark-3","hover:bg-gray-200","dark:hover:bg-dark-1","rounded-md"],[1,"pos__ticket__item-name","truncate","mr-1"],["target","_blank",3,"href"],[2,"margin","0","padding-left","20px"],[1,"flex","flex-wrap","px-4"],["target","_blank","class","w-24 h-24 relative image-fit mb-5 mr-5 cursor-pointer zoom-in","tooltip","Call","navTooltip","",3,"href","matTooltip",4,"ngFor","ngForOf"],["target","_blank","tooltip","Call","navTooltip","",1,"w-24","h-24","relative","image-fit","mb-5","mr-5","cursor-pointer","zoom-in",3,"href","matTooltip"],["class","rounded-md","alt","Imagen",3,"src",4,"ngIf"],["class","rounded-md","alt","File","src","/assets/img/document-file-icon.png",4,"ngIf"],["alt","Imagen",1,"rounded-md",3,"src"],["alt","File","src","/assets/img/document-file-icon.png",1,"rounded-md"],[1,"mt-2","pt-2","border-t","border-gray-200","dark:border-dark-5"],[1,"flex"],["class","w-10 h-10 sm:w-12 sm:h-12 flex-none image-fit",4,"ngIf"],[1,"ml-3","flex-1"],["href","javascript:void(0)",1,"font-medium"],["href","",1,"ml-auto","text-xs","text-gray-600"],["mat-button","","class","ml-auto text-xs text-gray-600",3,"matMenuTriggerFor",4,"ngIf"],["menuCommentPost","matMenu"],["mat-menu-item","",3,"click"],["name","trash-outline"],[1,"text-gray-600","text-xs","sm:text-sm"],[1,"mt-2",3,"innerHTML"],[1,"w-10","h-10","sm:w-12","sm:h-12","flex-none","image-fit"],["theLastReferencePost",""],[1,"rounded-full",3,"alt","src"],["mat-button","",1,"ml-auto","text-xs","text-gray-600",3,"matMenuTriggerFor"],["focusable","false","width","24","height","24","viewBox","0 0 24 24",1,"NMm5M"],["d","M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"]],template:function(t,e){1&t&&(_.gc(0,"ion-grid"),_.gc(1,"ion-row",0),_.gc(2,"ion-col",1),_.cd(3,He,39,24,"ion-grid",2),_.fc(),_.fc(),_.fc()),2&t&&(_.Lb(3),_.Ac("ngIf",e.post))},directives:[n.A,n.gb,n.t,c.t,c.q,s.c,s.r,s.u,n.H,n.k,c.s,n.C,O.a,C.e,C.b,I.b,C.d],pipes:[P.d],styles:[""]}),t})();var Ye=i("+CSD"),We=i("bO4D"),Ge=i("qIrB");const Ke=["theLastReferencePost"];function Xe(t,e){1&t&&(_.gc(0,"small"),_.ed(1),_.tc(2,"translate"),_.fc()),2&t&&(_.Lb(1),_.gd(" : ",_.uc(2,1,"pages.course.no_last_works")," "))}function Ze(t,e){1&t&&(_.gc(0,"small"),_.ed(1),_.tc(2,"translate"),_.fc()),2&t&&(_.Lb(1),_.gd(" ",_.uc(2,1,"pages.course.no_last_works")," "))}function ti(t,e){if(1&t){const t=_.hc();_.gc(0,"a",18),_.oc("click",(function(){_.Sc(t);const i=e.$implicit;return _.sc(6).getItemsActivities(!0,{theme_id:i.uuid})})),_.gc(1,"div",19),_.ed(2),_.fc(),_.fc()}if(2&t){const t=e.$implicit;_.Lb(2),_.fd(t.title)}}function ei(t,e){if(1&t){const t=_.hc();_.gc(0,"div",22),_.gc(1,"a",23),_.oc("click",(function(){_.Sc(t);const i=e.$implicit;return _.sc(5).getItemsActivities(!0,{block_id:i.uuid})})),_.gc(2,"div",19),_.ed(3),_.fc(),_.fc(),_.bc(4,"hr"),_.gc(5,"div",24),_.gc(6,"div"),_.gc(7,"small"),_.ed(8),_.tc(9,"translate"),_.fc(),_.cd(10,Ze,3,3,"small",0),_.fc(),_.cd(11,ti,3,1,"a",25),_.fc(),_.fc()}if(2&t){const t=e.$implicit;_.Lb(3),_.fd(t.title),_.Lb(5),_.fd(_.uc(9,4,"pages.course.themes")),_.Lb(2),_.Ac("ngIf",!t.themes_activity||0==t.themes_activity.length),_.Lb(1),_.Ac("ngForOf",t.themes_activity)}}function ii(t,e){if(1&t){const t=_.hc();_.gc(0,"div",17),_.gc(1,"a",18),_.oc("click",(function(){_.Sc(t);const i=e.$implicit;return _.sc(4).getItemsActivities(!0,{semester_id:i.uuid})})),_.gc(2,"div",19),_.ed(3),_.fc(),_.fc(),_.gc(4,"div",20),_.gc(5,"small"),_.ed(6),_.tc(7,"translate"),_.fc(),_.cd(8,Xe,3,3,"small",0),_.fc(),_.cd(9,ei,12,6,"div",21),_.fc()}if(2&t){const t=e.$implicit;_.Lb(3),_.fd(t.title),_.Lb(3),_.fd(_.uc(7,4,"pages.course.blocks")),_.Lb(2),_.Ac("ngIf",!t.blocks||0==t.blocks.length),_.Lb(1),_.Ac("ngForOf",t.blocks)}}function ci(t,e){1&t&&(_.gc(0,"p",26),_.gc(1,"small"),_.ed(2),_.tc(3,"translate"),_.fc(),_.fc()),2&t&&(_.Lb(2),_.gd(" ",_.uc(3,1,"pages.course.no_last_works")," "))}function si(t,e){if(1&t&&(_.gc(0,"ion-card",13),_.gc(1,"ion-card-header"),_.gc(2,"ion-card-title"),_.ed(3),_.tc(4,"translate"),_.fc(),_.fc(),_.gc(5,"ion-card-content",14),_.cd(6,ii,10,6,"div",15),_.cd(7,ci,4,3,"p",16),_.fc(),_.fc()),2&t){const t=_.sc(3);_.Lb(3),_.gd(" ",_.uc(4,3,"pages.course.all_themes")," "),_.Lb(3),_.Ac("ngForOf",t.semesters),_.Lb(1),_.Ac("ngIf",!t.semesters||0==t.semesters.length)}}function ni(t,e){if(1&t){const t=_.hc();_.gc(0,"div",17),_.gc(1,"a",18),_.oc("click",(function(){_.Sc(t);const i=e.$implicit;return _.sc(4).getItemsActivities(!0,{theme_id:i.uuid})})),_.gc(2,"div",19),_.ed(3),_.fc(),_.fc(),_.fc()}if(2&t){const t=e.$implicit;_.Lb(3),_.fd(t.title)}}function oi(t,e){if(1&t&&(_.gc(0,"ion-card",13),_.gc(1,"ion-card-header"),_.gc(2,"ion-card-title"),_.ed(3),_.tc(4,"translate"),_.fc(),_.fc(),_.gc(5,"ion-card-content",14),_.cd(6,ni,4,1,"div",15),_.fc(),_.fc()),2&t){const t=_.sc(3);_.Lb(3),_.gd(" ",_.uc(4,2,"pages.course.others_themes")," "),_.Lb(3),_.Ac("ngForOf",t.otherActivityThemes)}}function ai(t,e){if(1&t){const t=_.hc();_.gc(0,"div",17),_.gc(1,"a",18),_.oc("click",(function(){_.Sc(t);const i=e.$implicit;return _.sc(4).getItemsActivities(!0,{theme_id:i.uuid})})),_.gc(2,"div",19),_.ed(3),_.fc(),_.fc(),_.fc()}if(2&t){const t=e.$implicit;_.Lb(3),_.fd(t.title)}}function ri(t,e){1&t&&(_.gc(0,"p",26),_.gc(1,"small"),_.ed(2),_.tc(3,"translate"),_.fc(),_.fc()),2&t&&(_.Lb(2),_.gd(" ",_.uc(3,1,"pages.course.no_last_works")," "))}function li(t,e){if(1&t&&(_.gc(0,"ion-card",13),_.gc(1,"ion-card-header"),_.gc(2,"ion-card-title"),_.ed(3),_.tc(4,"translate"),_.fc(),_.fc(),_.gc(5,"ion-card-content",14),_.cd(6,ai,4,1,"div",15),_.cd(7,ri,4,3,"p",16),_.fc(),_.fc()),2&t){const t=_.sc(3);_.Lb(3),_.gd(" ",_.uc(4,3,"pages.course.all_themes")," "),_.Lb(3),_.Ac("ngForOf",t.activityThemes),_.Lb(1),_.Ac("ngIf",!t.activityThemes||0==t.activityThemes.length)}}function di(t,e){if(1&t&&(_.gc(0,"ion-col",11),_.cd(1,si,8,5,"ion-card",12),_.cd(2,oi,7,4,"ion-card",12),_.cd(3,li,8,5,"ion-card",12),_.fc()),2&t){const t=_.sc(2);_.Lb(1),_.Ac("ngIf",1==t.course.active_mode_partials),_.Lb(1),_.Ac("ngIf",1==t.course.active_mode_partials&&0!=t.otherActivityThemes.length),_.Lb(1),_.Ac("ngIf",1!=t.course.active_mode_partials)}}function ui(t,e){if(1&t&&(_.gc(0,"ion-button",30),_.bc(1,"i",31),_.ed(2),_.tc(3,"translate"),_.bc(4,"ion-icon",32),_.fc()),2&t){_.sc();const t=_.Oc(4);_.Ac("matMenuTriggerFor",t),_.Lb(2),_.gd(" ",_.uc(3,2,"buttons.create")," ")}}function gi(t,e){if(1&t&&(_.gc(0,"button",33),_.bc(1,"ion-icon",34),_.ed(2),_.tc(3,"translate"),_.fc()),2&t){const t=e.$implicit;_.Ac("routerLink","create/form/"+t.param),_.Lb(1),_.Ac("name",t.icon),_.Lb(1),_.gd(" ",_.uc(3,3,t.title)," ")}}function mi(t,e){if(1&t&&(_.gc(0,"ion-col",8),_.gc(1,"ion-card"),_.cd(2,ui,5,4,"ion-button",27),_.gc(3,"mat-menu",null,28),_.cd(5,gi,4,5,"button",29),_.fc(),_.fc(),_.fc()),2&t){const t=_.sc(2);_.Lb(2),_.Ac("ngIf",t.course.is_my),_.Lb(3),_.Ac("ngForOf",t.listCreateItems)}}function fi(t,e){if(1&t&&_.bc(0,"panel-instructions-activity",35),2&t){const t=e.$implicit,i=_.sc(2);_.Ac("activity",t)("show_button_open",!0)("expanded_panel",!1)("route_activity",i.route_activity)("show_details_assignments",!0)}}function hi(t,e){1&t&&(_.gc(0,"ion-card-title",37),_.ed(1),_.tc(2,"translate"),_.fc()),2&t&&(_.Lb(1),_.fd(_.uc(2,1,"pages.course.activities_crate_welcome")))}function pi(t,e){1&t&&(_.gc(0,"ion-card-title",37),_.ed(1),_.tc(2,"translate"),_.fc()),2&t&&(_.Lb(1),_.fd(_.uc(2,1,"pages.course.activities_crate_welcome_student")))}function bi(t,e){1&t&&(_.gc(0,"ion-card-subtitle"),_.bc(1,"ion-icon",38),_.ed(2),_.tc(3,"translate"),_.fc()),2&t&&(_.Lb(2),_.gd(" ",_.uc(3,1,"pages.course.create_and_programing_act")," "))}function vi(t,e){1&t&&(_.gc(0,"ion-card-subtitle"),_.bc(1,"ion-icon",39),_.ed(2),_.tc(3,"translate"),_.fc()),2&t&&(_.Lb(2),_.gd(" ",_.uc(3,1,"pages.course.response_activities_post")," "))}function _i(t,e){if(1&t&&(_.gc(0,"ion-card"),_.gc(1,"ion-card-header"),_.cd(2,hi,3,3,"ion-card-title",36),_.cd(3,pi,3,3,"ion-card-title",36),_.cd(4,bi,4,3,"ion-card-subtitle",0),_.cd(5,vi,4,3,"ion-card-subtitle",0),_.fc(),_.fc()),2&t){const t=_.sc(2);_.Lb(2),_.Ac("ngIf",1==t.course.is_my),_.Lb(1),_.Ac("ngIf",1!=t.course.is_my),_.Lb(1),_.Ac("ngIf",1==t.course.is_my),_.Lb(1),_.Ac("ngIf",1!=t.course.is_my)}}function yi(t,e){if(1&t&&(_.gc(0,"ion-grid"),_.gc(1,"ion-row",1),_.gc(2,"ion-col",2),_.gc(3,"ion-grid"),_.gc(4,"ion-row"),_.cd(5,di,4,3,"ion-col",3),_.gc(6,"ion-col",4),_.gc(7,"ion-grid"),_.gc(8,"ion-row"),_.gc(9,"ion-col",5),_.bc(10,"filters-course",6),_.fc(),_.cd(11,mi,6,2,"ion-col",7),_.fc(),_.gc(12,"ion-col",8),_.cd(13,fi,1,5,"panel-instructions-activity",9),_.bc(14,"span",null,10),_.cd(16,_i,6,4,"ion-card",0),_.fc(),_.fc(),_.fc(),_.fc(),_.fc(),_.fc(),_.fc(),_.fc()),2&t){const t=_.sc();_.Lb(5),_.Ac("ngIf",!1),_.Lb(5),_.Ac("required",t.allowFilters)("course_id",t.course.uuid)("buttons",t.buttons_all),_.Lb(1),_.Ac("ngIf",1==t.course.is_my),_.Lb(2),_.Ac("ngForOf",t.activities),_.Lb(3),_.Ac("ngIf",0==t.activities.length)}}let ki=(()=>{class t{constructor(t,e,i,c,s,n,o,a,r,l){this.applyFiltersModeService=t,this.controlErroresService=e,this.activityEventService=i,this.activitiesService=c,this.loadingService=s,this.courseService=n,this.routerOutlet=o,this.activeRoute=a,this.modalCtrl=r,this.tourService=l,this.moment=g,this.listCreateItems=[{title:"pages.course.task",param:"task",icon:"document-text-outline"},{title:"pages.course.task_question",param:"questions",icon:"document-text-outline"},{title:"pages.course.video_quiz",param:"video-quiz",icon:"logo-youtube"}],this.activities=[],this.semesters=[],this.otherActivityThemes=[],this.activityThemes=[],this.totalPages=0,this.this_page=1,this.block_id=1,this.semester_id=1,this.type="all",this.profile_img_route="/assets/images/profile-8.jpg",this.user_profile="/assets/images/profile-8.jpg",this.route_activity=m.h.show_activity,this.eventsActivity$={itemsRemoved$:null},this.rxjsGlobal=null,this.button_search_all={color:"warning",size:"small",mode:"search-act-course",disabled:!1,title:"buttons.search",icon:"search-outline"},this.buttons_all=[this.button_search_all],this.rxjsFilter=null,this.loadingData=!1,this.moment.locale("es"),g.locale("es"),this.course_id=a.snapshot.params.uuid,this.paramsFilters={type:"all",block_id:null,semester_id:null},this.allowFilters={start_publish_at:1,end_publish_at:1,end_created_at:1,start_created_at:1,theme:1,block:1,title:1,semester:1,type_activity:1},this.route_activity=this.route_activity.replace(":id",""+this.course_id).replace(":id",""+this.course_id),a.snapshot.queryParams&&a.snapshot.queryParams.ref&&a.snapshot.queryParams.ref&&(this.timerIdServer=a.snapshot.queryParams.ref),this.rxjsFilter=this.applyFiltersModeService.get$().subscribe(t=>{this.applyFilters(t)})}ngOnInit(){this.rxjsGlobal=this.activityEventService.getItemsRemoved$().subscribe(t=>{let e=this.activities.findIndex(e=>e.uuid==t);e>=0&&this.activities.splice(e,1)}),this.getItemsActivities(!0,this.paramsFilters)}ngOnDestroy(){this.rxjsGlobal.unsubscribe(),this.rxjsFilter.unsubscribe()}applyFilters(t){if(!t)return!1;if(!t.mode||!t.filters)return!1;switch(t.mode){case"search-act-course":this.getItemsActivities(!0,t.filters)}}ngAfterViewInit(){setTimeout(()=>{this.getCourse(),this.intersectionObserver(),this.theLastReferencePost.changes.subscribe(t=>{t.last&&this.observer.observe(t.last.nativeElement)})})}getCourse(){this.loadingService.change(!0),this.courseService.course(this.course_id).subscribe(t=>{this.loadingService.change(!1),this.course=t.data,this.getLeftOptions()},t=>{this.loadingService.change(!1),this.controlErroresService.control(t)})}intersectionObserver(){this.observer=new IntersectionObserver(t=>{t[0].isIntersecting&&this.totalPages>=this.this_page&&!this.loadingData&&this.getItemsActivities(!1,this.paramsFilters)},{root:null,rootMargin:"0px",threshold:.5})}getLeftOptions(){this.loadingService.change(!0),this.courseService.getOptionsQualification(this.course_id).subscribe(t=>{this.activityThemes=t.themes,this.otherActivityThemes=t.others_themes,this.semesters=t.semesters,this.loadingService.change(!1),this.tourService.tour(this.course.is_my?"show_list_creator":"show_list_invited")},t=>{this.controlErroresService.control(t),this.loadingService.change(!1)})}getItemsActivities(t=!1,e={}){this.loadingData=!0,t&&(this.activities=[],this.this_page=1),this.paramsFilters=e,e.page=this.this_page,e.timerIdServer=this.timerIdServer,this.loadingService.change(!0),this.activitiesService.getGroup(this.course_id,e).subscribe(t=>{this.activities=this.activities.concat(t.data),this.totalPages=t.last_page,this.loadingService.change(!1),this.loadingData=!1,this.this_page++},t=>{this.loadingService.change(!1),this.controlErroresService.control(t),this.loadingData=!1})}showDocument(t){return Object(a.b)(this,void 0,void 0,(function*(){const e=yield this.modalCtrl.create({component:f.a,cssClass:"modal-fullscreen-100",swipeToClose:!0,presentingElement:this.routerOutlet.nativeEl,componentProps:{route_file:t}});yield e.present(),yield e.onWillDismiss()}))}}return t.\u0275fac=function(e){return new(e||t)(_.ac(We.a),_.ac(l.a),_.ac(Ye.a),_.ac(r.a),_.ac(u.a),_.ac(d.a),_.ac(n.fb),_.ac(o.a),_.ac(n.Db),_.ac(h.a))},t.\u0275cmp=_.Ub({type:t,selectors:[["app-course-activities"]],viewQuery:function(t,e){var i;1&t&&_.ld(Ke,!0,_.o),2&t&&_.Nc(i=_.pc())&&(e.theLastReferencePost=i)},decls:1,vars:1,consts:[[4,"ngIf"],[1,"flex","flex-center"],["size","12","size-sm","11","size-md","10","size-xl","10"],["size","12","size-md","4","size-xl","3","class","list-all-themes",4,"ngIf"],["size","12",1,"all-activities-panel"],["size","12","size-sm","12"],[3,"required","course_id","buttons"],["size","12",4,"ngIf"],["size","12"],[3,"activity","show_button_open","expanded_panel","route_activity","show_details_assignments",4,"ngFor","ngForOf"],["theLastReferencePost",""],["size","12","size-md","4","size-xl","3",1,"list-all-themes"],["class","m-0",4,"ngIf"],[1,"m-0"],[1,"p-0"],["class","border-2 border-dashed dark:border-dark-5 pos__ticket p-2",4,"ngFor","ngForOf"],["style","margin-left: 5px;",4,"ngIf"],[1,"border-2","border-dashed","dark:border-dark-5","pos__ticket","p-2"],["href","javascript:;","data-toggle","modal","data-target","#add-item-modal",1,"flex","space-btw","p-3","cursor-pointer","transition","duration-300","ease-in-out","bg-white","dark:bg-dark-3","hover:bg-gray-200","dark:hover:bg-dark-1","rounded-md",3,"click"],[1,"pos__ticket__item-name","truncate","mr-1"],[1,"ml-3"],["class","pos__ticket box p-2",4,"ngFor","ngForOf"],[1,"pos__ticket","box","p-2"],["href","javascript:;","data-toggle","modal","data-target","#add-item-modal",1,"flex","space-btw","p-3","cursor-pointer","transition","duration-300","ease-in-out","bg-white","dark:bg-dark-3","hover:bg-gray-200","dark:hover:bg-dark-1","rounded-md",2,"border","1px solid",3,"click"],[2,"border","1px solid"],["href","javascript:;","data-toggle","modal","data-target","#add-item-modal","class","flex space-btw p-3 cursor-pointer transition duration-300 ease-in-out bg-white dark:bg-dark-3 hover:bg-gray-200 dark:hover:bg-dark-1 rounded-md",3,"click",4,"ngFor","ngForOf"],[2,"margin-left","5px"],["size","small","color","success",3,"matMenuTriggerFor",4,"ngIf"],["menu_personalize","matMenu"],["mat-menu-item","",3,"routerLink",4,"ngFor","ngForOf"],["size","small","color","success",3,"matMenuTriggerFor"],[1,"fas","fa-folder-plus","ic-format-global"],["name","caret-down-outline"],["mat-menu-item","",3,"routerLink"],[3,"name"],[3,"activity","show_button_open","expanded_panel","route_activity","show_details_assignments"],["style","color: var(--ion-color-primary)",4,"ngIf"],[2,"color","var(--ion-color-primary)"],["name","chatbox-outline"],["name","chatbox-ellipses-outline"]],template:function(t,e){1&t&&_.cd(0,yi,17,7,"ion-grid",0),2&t&&_.Ac("ngIf",e.course)},directives:[c.t,n.A,n.gb,n.t,Ge.a,c.s,n.m,n.o,n.q,n.n,C.e,n.k,C.d,n.C,C.b,n.Kb,o.g,A.a,n.p],pipes:[P.d],styles:[".fsz-ac-ads[_ngcontent-%COMP%]{font-size:3em;text-align:center;margin:0}.p-2[_ngcontent-%COMP%]{padding:20px}.m-0[_ngcontent-%COMP%]{margin:0}"]}),t})();var Li=i("oNBn"),xi=i("gcOT");const wi=["theLastReference"];function Ai(t,e){if(1&t){const t=_.hc();_.gc(0,"ion-buttons",8),_.gc(1,"ion-button",3),_.oc("click",(function(){return _.Sc(t),_.sc().back()})),_.bc(2,"ion-icon",12),_.fc(),_.fc()}if(2&t){const t=_.sc();_.Lb(1),_.Ac("disabled",t.loading)}}function Si(t,e){1&t&&_.bc(0,"mat-progress-bar",13)}function Ci(t,e){if(1&t){const t=_.hc();_.gc(0,"div",18),_.gc(1,"a",19),_.gc(2,"div",20),_.oc("click",(function(){_.Sc(t);const i=e.$implicit;return _.sc(2).loadPosts(!0,i.uuid)})),_.gc(3,"a",21),_.gc(4,"span",22),_.ed(5),_.fc(),_.gc(6,"span",23),_.ed(7),_.fc(),_.gc(8,"span",23),_.ed(9),_.fc(),_.fc(),_.fc(),_.fc(),_.fc()}if(2&t){const t=e.$implicit,i=_.sc(2);_.Lb(5),_.fd(t.name),_.Lb(2),_.fd(t.user_create?t.user_create.name:"-"),_.Lb(2),_.fd(i.moment(t.date_created).format("DD/MM/YYYY"))}}function Ii(t,e){if(1&t&&(_.gc(0,"div",14),_.gc(1,"div",15),_.gc(2,"h3",16),_.ed(3),_.tc(4,"translate"),_.fc(),_.gc(5,"h3",16),_.ed(6),_.tc(7,"translate"),_.fc(),_.gc(8,"h3",16),_.ed(9),_.tc(10,"translate"),_.fc(),_.fc(),_.cd(11,Ci,10,3,"div",17),_.fc()),2&t){const t=_.sc();_.Lb(3),_.fd(_.uc(4,4,"pages.course.name_course")),_.Lb(3),_.fd(_.uc(7,6,"pages.course.teacher")),_.Lb(3),_.fd(_.uc(10,8,"pages.course.date_created")),_.Lb(2),_.Ac("ngForOf",t.courses)}}function Oi(t,e){1&t&&(_.gc(0,"ion-button",29),_.bc(1,"ion-icon",30),_.fc())}function Pi(t,e){if(1&t){const t=_.hc();_.gc(0,"a",19),_.gc(1,"div",20),_.oc("click",(function(){_.Sc(t);const e=_.sc().$implicit;return _.sc(2).post_selected=e.uuid})),_.gc(2,"a",21),_.bc(3,"span",26),_.gc(4,"span",23),_.ed(5),_.fc(),_.gc(6,"span",27),_.ed(7),_.cd(8,Oi,2,0,"ion-button",28),_.fc(),_.fc(),_.fc(),_.fc()}if(2&t){const t=_.sc().$implicit,e=_.sc(2);_.Lb(3),_.Ac("innerHTML",t.text,_.Tc),_.Lb(2),_.fd(t.user_create?t.user_create.name:"-"),_.Lb(2),_.gd("",e.moment(t.date_created).format("DD/MM/YYYY")," "),_.Lb(1),_.Ac("ngIf",e.post_selected==t.uuid)}}function Mi(t,e){1&t&&(_.gc(0,"ion-button",29),_.bc(1,"ion-icon",30),_.fc())}function Ti(t,e){if(1&t){const t=_.hc();_.gc(0,"a",19,31),_.gc(2,"div",20),_.oc("click",(function(){_.Sc(t);const e=_.sc().$implicit;return _.sc(2).post_selected=e.uuid})),_.gc(3,"a",21),_.bc(4,"span",26),_.gc(5,"span",23),_.ed(6),_.fc(),_.gc(7,"span",27),_.ed(8),_.cd(9,Mi,2,0,"ion-button",28),_.fc(),_.fc(),_.fc(),_.fc()}if(2&t){const t=_.sc().$implicit,e=_.sc(2);_.Lb(4),_.Ac("innerHTML",t.text,_.Tc),_.Lb(2),_.fd(t.user_create?t.user_create.name:"-"),_.Lb(2),_.gd("",e.moment(t.date_created).format("DD/MM/YYYY")," "),_.Lb(1),_.Ac("ngIf",e.post_selected==t.uuid)}}function Fi(t,e){if(1&t&&(_.gc(0,"div",18),_.cd(1,Pi,9,4,"a",25),_.cd(2,Ti,10,4,"a",25),_.fc()),2&t){const t=e.index,i=_.sc(2);_.Lb(1),_.Ac("ngIf",t!=i.posts.length-1),_.Lb(1),_.Ac("ngIf",t==i.posts.length-1)}}function zi(t,e){1&t&&(_.gc(0,"p",32),_.ed(1),_.tc(2,"translate"),_.fc()),2&t&&(_.Lb(1),_.fd(_.uc(2,1,"pages.course.no_post")))}function Di(t,e){if(1&t&&(_.gc(0,"div",14),_.gc(1,"div",15),_.gc(2,"h3",16),_.ed(3),_.tc(4,"translate"),_.fc(),_.gc(5,"h3",16),_.ed(6),_.tc(7,"translate"),_.fc(),_.gc(8,"h3",16),_.ed(9),_.tc(10,"translate"),_.fc(),_.fc(),_.cd(11,Fi,3,2,"div",17),_.cd(12,zi,3,3,"p",24),_.fc()),2&t){const t=_.sc();_.Lb(3),_.fd(_.uc(4,5,"pages.course.title")),_.Lb(3),_.fd(_.uc(7,7,"pages.course.teacher")),_.Lb(3),_.fd(_.uc(10,9,"pages.course.date_created")),_.Lb(2),_.Ac("ngForOf",t.posts),_.Lb(1),_.Ac("ngIf",0==t.posts.length&&!t.loading)}}let qi=(()=>{class t{constructor(t,e,i,c){this.modalCtrl=t,this.controlErroresService=e,this.navParams=i,this.courseService=c,this.pageBook=0,this.totalPages=0,this.posts=[],this.scrollbarStyle=v.a.scrollbarStyle,this.loading=!1,this.course_id=null,this.this_page=1,this.courses=[],this.moment=g,this.mode_panel="course",this.post_selected=null,this.copy_images=!1,this.uuid=null,this.type="post",this.displayedColumns=["name","user_create","date_created"],this.clickedRows=new Set,this.uuid=this.navParams.data.course_id,this.type=this.navParams.data.type}ngOnInit(){this.getCourses(),this.intersectionObserver()}ngAfterViewInit(){this.theLastReferencePost.changes.subscribe(t=>{t.last&&this.observer.observe(t.last.nativeElement)})}intersectionObserver(){this.observer=new IntersectionObserver(t=>{t[0].isIntersecting&&this.totalPages>=this.this_page&&this.loadPosts(!1,this.course_id)},{root:null,rootMargin:"0px",threshold:.5})}saveItems(){this.loading=!0,this.courseService.clonePost(this.post_selected,this.uuid,{copy_images:this.copy_images,type:this.type}).subscribe(t=>{this.modalCtrl.dismiss(t.data),this.loading=!1},t=>{this.loading=!1})}getCourses(){this.loading=!0,this.courseService.courses().subscribe(t=>{this.loading=!1,this.courses=Array.isArray(t.data)?t.data:[]},t=>{this.loading=!1,this.controlErroresService.control(t)})}loadPosts(t=!1,e){t&&(this.mode_panel=this.type,this.course_id=e,this.posts=[],this.this_page=1),this.loading=!0,this.courseService.getPostsByCourse(this.course_id,this.type,this.this_page).subscribe(t=>{this.posts=this.posts.concat(t.data),this.totalPages=t.last_page,this.loading=!1,this.this_page++},t=>{this.loading=!1,this.controlErroresService.control(t)})}back(){this.mode_panel="course",this.post_selected=null,this.posts=[]}dismiss(){this.modalCtrl.dismiss()}}return t.\u0275fac=function(e){return new(e||t)(_.ac(n.Db),_.ac(l.a),_.ac(n.Fb),_.ac(d.a))},t.\u0275cmp=_.Ub({type:t,selectors:[["app-clone-post-course"]],viewQuery:function(t,e){var i;1&t&&_.ld(wi,!0,_.o),2&t&&_.Nc(i=_.pc())&&(e.theLastReferencePost=i)},decls:26,vars:19,consts:[["translucent","true"],["slot","start",4,"ngIf"],["slot","end"],[3,"disabled","click"],["name","close-outline"],["mode","indeterminate",4,"ngIf"],["fullscreen","true",3,"scrollbar"],["class","border-2 border-dashed dark:border-dark-5 rounded-md pt-4","style","margin-top: 10px;",4,"ngIf"],["slot","start"],[1,"example-section"],[1,"example-margin",3,"ngModel","ngModelChange"],["size","small","strong","",1,"step-add-btn-save-f-2",3,"disabled","click"],["name","arrow-back-outline"],["mode","indeterminate"],[1,"border-2","border-dashed","dark:border-dark-5","rounded-md","pt-4",2,"margin-top","10px"],[2,"display","grid","grid-template-columns","repeat(3, 1fr)"],[1,"ml-1",2,"margin","0","padding-left","20px"],["class","pos__ticket box p-2",4,"ngFor","ngForOf"],[1,"pos__ticket","box","p-2"],["href","javascript:;","data-toggle","modal","data-target","#add-item-modal",1,"flex","items-center","p-3","cursor-pointer","transition","w-100","duration-300","ease-in-out","dark:bg-dark-3","hover:bg-gray-200","dark:hover:bg-dark-1","rounded-md"],[1,"pos__ticket__item-name","truncate","mr-1","w-100",3,"click"],["href","javascript:void(0)",1,"w-100",2,"display","grid","grid-template-columns","repeat(3, 1fr)"],[1,"overflow-hidden"],[1,"text-center"],["class","mt-2 ml-1",4,"ngIf"],["href","javascript:;","data-toggle","modal","data-target","#add-item-modal","class","flex items-center p-3 cursor-pointer transition w-100 duration-300 ease-in-out dark:bg-dark-3 hover:bg-gray-200 dark:hover:bg-dark-1 rounded-md",4,"ngIf"],[1,"overflow-hidden","overflow-txt",3,"innerHTML"],[1,"space-btw"],["color","success",4,"ngIf"],["color","success"],["name","checkmark-outline"],["theLastReference",""],[1,"mt-2","ml-1"]],template:function(t,e){1&t&&(_.gc(0,"ion-header",0),_.gc(1,"ion-toolbar"),_.cd(2,Ai,3,1,"ion-buttons",1),_.gc(3,"ion-title"),_.ed(4),_.tc(5,"translate"),_.tc(6,"translate"),_.fc(),_.gc(7,"ion-buttons",2),_.gc(8,"ion-button",3),_.oc("click",(function(){return e.dismiss()})),_.bc(9,"ion-icon",4),_.fc(),_.fc(),_.fc(),_.cd(10,Si,1,0,"mat-progress-bar",5),_.fc(),_.gc(11,"ion-content",6),_.cd(12,Ii,12,10,"div",7),_.cd(13,Di,13,11,"div",7),_.fc(),_.gc(14,"ion-footer",0),_.gc(15,"ion-toolbar"),_.gc(16,"ion-item"),_.gc(17,"ion-item",8),_.gc(18,"section",9),_.gc(19,"mat-checkbox",10),_.oc("ngModelChange",(function(t){return e.copy_images=t})),_.ed(20),_.tc(21,"translate"),_.fc(),_.fc(),_.fc(),_.gc(22,"ion-item",2),_.gc(23,"ion-button",11),_.oc("click",(function(){return e.saveItems()})),_.ed(24),_.tc(25,"translate"),_.fc(),_.fc(),_.fc(),_.fc(),_.fc()),2&t&&(_.Lb(2),_.Ac("ngIf",e.mode_panel==e.type),_.Lb(2),_.gd(" ","course"==e.mode_panel?_.uc(5,11,"pages.course.select_class"):_.uc(6,13,"pages.course.select_post")," "),_.Lb(4),_.Ac("disabled",e.loading),_.Lb(2),_.Ac("ngIf",e.loading),_.Lb(1),_.Bc("scrollbar",e.scrollbarStyle),_.Lb(1),_.Ac("ngIf","course"==e.mode_panel),_.Lb(1),_.Ac("ngIf",e.mode_panel==e.type),_.Lb(6),_.Ac("ngModel",e.copy_images),_.Lb(1),_.fd(_.uc(21,15,"pages.course.create_copy")),_.Lb(3),_.Ac("disabled",e.loading||null==e.post_selected),_.Lb(1),_.fd(_.uc(25,17,"buttons.reuse")))},directives:[n.B,n.zb,c.t,n.xb,n.l,n.k,n.C,n.u,x.b,n.z,n.H,be.a,s.r,s.u,w.a,c.s],pipes:[P.d],styles:[""]}),t})();var Ei=i("6Zxx");function $i(t,e){if(1&t){const t=_.hc();_.gc(0,"ion-col",5),_.gc(1,"ion-button",6),_.oc("click",(function(){return _.Sc(t),_.sc(2).availablePostPanel()})),_.tc(2,"translate"),_.bc(3,"ion-icon",7),_.fc(),_.fc()}2&t&&(_.Lb(1),_.Ac("matTooltip",_.uc(2,1,"pages.course.reuse_post")))}function ji(t,e){if(1&t){const t=_.hc();_.gc(0,"ion-card"),_.gc(1,"ion-card-content",1),_.gc(2,"ion-grid"),_.gc(3,"ion-row"),_.gc(4,"ion-col",2),_.oc("click",(function(){return _.Sc(t),_.sc().startEditor()})),_.gc(5,"ion-label",3),_.ed(6),_.tc(7,"translate"),_.fc(),_.fc(),_.cd(8,$i,4,3,"ion-col",4),_.fc(),_.fc(),_.fc(),_.fc()}if(2&t){const t=_.sc();_.Lb(6),_.fd(_.uc(7,2,"pages.course.create_post")),_.Lb(2),_.Ac("ngIf",t.repply)}}function Bi(t,e){if(1&t){const t=_.hc();_.gc(0,"div",27),_.gc(1,"input",28),_.oc("ngModelChange",(function(e){return _.Sc(t),_.sc(2).title=e})),_.tc(2,"translate"),_.fc(),_.fc()}if(2&t){const t=_.sc(2);_.Lb(1),_.Bc("placeholder",_.uc(2,3,"forms.title")),_.Ac("ngModel",t.title)("disabled",t.saving)}}function Ri(t,e){1&t&&_.bc(0,"mat-progress-bar",38)}function Qi(t,e){if(1&t&&_.bc(0,"img",39),2&t){const t=_.sc().$implicit;_.Bc("src",t.picture,_.Vc)}}function Vi(t,e){1&t&&_.bc(0,"img",40)}function Ui(t,e){if(1&t){const t=_.hc();_.gc(0,"div",41),_.oc("click",(function(){_.Sc(t);const e=_.sc().index;return _.sc(3).removeImage(e)})),_.bc(1,"ion-icon",42),_.fc()}}function Ni(t,e){if(1&t&&(_.gc(0,"div",33),_.cd(1,Ri,1,0,"mat-progress-bar",34),_.cd(2,Qi,1,1,"img",35),_.cd(3,Vi,1,0,"img",36),_.cd(4,Ui,2,0,"div",37),_.fc()),2&t){const t=e.$implicit,i=_.sc(3);_.Ac("matTooltip",t.name),_.Lb(1),_.Ac("ngIf",t.uploading),_.Lb(1),_.Ac("ngIf",t.is_image),_.Lb(1),_.Ac("ngIf",!t.is_image),_.Lb(1),_.Ac("ngIf",!i.saving)}}function Hi(t,e){if(1&t&&(_.gc(0,"div",29),_.gc(1,"h3",30),_.ed(2),_.tc(3,"translate"),_.fc(),_.gc(4,"div",31),_.cd(5,Ni,5,5,"div",32),_.fc(),_.fc()),2&t){const t=_.sc(2);_.Lb(2),_.fd(_.uc(3,2,"pages.course.upload_image")),_.Lb(3),_.Ac("ngForOf",t.images)}}function Ji(t,e){if(1&t){const t=_.hc();_.gc(0,"div",45),_.gc(1,"a",46),_.gc(2,"div",47),_.gc(3,"a",48),_.ed(4),_.fc(),_.fc(),_.gc(5,"div",49),_.oc("click",(function(){_.Sc(t);const i=e.index;return _.sc(3).deleteLink(i)})),_.bc(6,"ion-icon",42),_.fc(),_.fc(),_.fc()}if(2&t){const t=e.$implicit;_.Lb(3),_.Bc("href",t,_.Vc),_.Lb(1),_.fd(t)}}function Yi(t,e){if(1&t&&(_.gc(0,"div",29),_.gc(1,"h3",43),_.ed(2),_.tc(3,"translate"),_.fc(),_.cd(4,Ji,7,2,"div",44),_.fc()),2&t){const t=_.sc(2);_.Lb(2),_.fd(_.uc(3,2,"pages.course.links_externals")),_.Lb(2),_.Ac("ngForOf",t.links)}}function Wi(t,e){if(1&t){const t=_.hc();_.gc(0,"ion-card"),_.gc(1,"ion-card-content"),_.cd(2,Bi,3,5,"div",8),_.gc(3,"textarea",9),_.oc("ngModelChange",(function(e){return _.Sc(t),_.sc().model=e})),_.fc(),_.cd(4,Hi,6,4,"div",10),_.cd(5,Yi,5,4,"div",10),_.gc(6,"ion-item"),_.gc(7,"ion-item"),_.gc(8,"section",11),_.gc(9,"mat-checkbox",12),_.oc("ngModelChange",(function(e){return _.Sc(t),_.sc().can_comment=e})),_.ed(10),_.tc(11,"translate"),_.fc(),_.fc(),_.fc(),_.gc(12,"ion-item"),_.gc(13,"label",13),_.gc(14,"ion-tab-button",14),_.tc(15,"translate"),_.gc(16,"input",15),_.oc("change",(function(e){return _.Sc(t),_.sc().changeFile(e)})),_.fc(),_.bc(17,"ion-icon",16),_.fc(),_.fc(),_.gc(18,"ion-tab-button",17),_.oc("click",(function(){return _.Sc(t),_.sc().typingLink()})),_.bc(19,"ion-icon",18),_.fc(),_.fc(),_.fc(),_.gc(20,"ion-item"),_.gc(21,"ion-item",19),_.gc(22,"ion-button",20),_.oc("click",(function(){return _.Sc(t),_.sc().cancelPanel()})),_.ed(23),_.tc(24,"translate"),_.fc(),_.gc(25,"ion-button",21),_.oc("click",(function(){return _.Sc(t),_.sc().savePost()})),_.ed(26),_.tc(27,"translate"),_.tc(28,"translate"),_.fc(),_.gc(29,"ion-button",22),_.bc(30,"ion-icon",23),_.fc(),_.gc(31,"mat-menu",null,24),_.gc(33,"button",25),_.oc("click",(function(){return _.Sc(t),_.sc().savePost()})),_.ed(34),_.tc(35,"translate"),_.tc(36,"translate"),_.fc(),_.gc(37,"button",25),_.oc("click",(function(){return _.Sc(t),_.sc().programingPost()})),_.ed(38),_.tc(39,"translate"),_.tc(40,"translate"),_.fc(),_.gc(41,"button",26),_.oc("click",(function(){return _.Sc(t),_.sc().savePost("draft")})),_.ed(42),_.tc(43,"translate"),_.tc(44,"translate"),_.fc(),_.fc(),_.fc(),_.fc(),_.fc(),_.fc()}if(2&t){const t=_.Oc(32),e=_.sc();_.Lb(2),_.Ac("ngIf",e.title_show),_.Lb(1),_.Ac("ngModel",e.model),_.Lb(1),_.Ac("ngIf",e.images.length>0),_.Lb(1),_.Ac("ngIf",e.links.length>0),_.Lb(4),_.Ac("ngModel",e.can_comment),_.Lb(1),_.fd(_.uc(11,22,"pages.course.can_comment")),_.Lb(4),_.Ac("disabled",e.saving)("matTooltip",_.uc(15,24,"pages.course.files_size_reference")),_.Lb(2),_.Ac("disabled",e.saving),_.Lb(2),_.Ac("disabled",e.saving),_.Lb(4),_.Ac("disabled",e.saving),_.Lb(1),_.gd(" ",_.uc(24,26,"buttons.cancel")," "),_.Lb(2),_.Ac("disabled",e.saving),_.Lb(1),_.gd(" ",e.saving?_.uc(27,28,"buttons.uploading"):_.uc(28,30,"buttons.publish")," "),_.Lb(3),_.Ac("disabled",e.saving)("matMenuTriggerFor",t),_.Lb(4),_.Ac("disabled",e.saving),_.Lb(1),_.gd(" ",e.saving?_.uc(35,32,"buttons.uploading"):_.uc(36,34,"buttons.publish")," "),_.Lb(3),_.Ac("disabled",e.saving),_.Lb(1),_.gd(" ",e.saving?_.uc(39,36,"buttons.uploading"):_.uc(40,38,"buttons.programing")," "),_.Lb(3),_.Ac("disabled",e.saving),_.Lb(1),_.gd(" ",e.saving?_.uc(43,40,"buttons.uploading"):_.uc(44,42,"buttons.save_eraser")," ")}}let Gi=(()=>{class t{constructor(t,e,i,c,s,n,o){this.loadingService=t,this.alertController=e,this.toastService=i,this.courseService=c,this.controlErrores=s,this.routerOutlet=n,this.modalCtrl=o,this.title_show=!1,this.repply=!0,this.model="",this.showPostPanel=!1,this.saving=!1,this.images=[],this.can_comment=!1,this.links=[],this.course_id=0,this.type="post",this.uuidCreate=new _.r,this.post_id=null,this.totalFilesUploaded=0}ngOnInit(){this.totalFilesUploaded=0}startEditor(){this.loadingService.change(!0),this.showPostPanel=!0,setTimeout(()=>{let t=document.getElementById("text-model-post");CKEDITOR.replace(t),this.loadingService.change(!1)},500)}takePhoto(){return Object(a.b)(this,void 0,void 0,(function*(){const t=yield xi.c.Camera.getPhoto({quality:50,allowEditing:!1,resultType:xi.a.DataUrl,source:xi.b.Prompt,promptLabelCancel:"Cancelar",promptLabelPhoto:"Galer\xeda",promptLabelPicture:"Tomar una foto"});this.images.push({file_b64:t.dataUrl})}))}changeFile(t){if(t.target.files&&t.target.files[0]){if(t.target.files[0].size>1e6*v.a.max_size_img)return void this.toastService.presentToast("Peso m\xe1ximo "+v.a.max_size_img+"MB","warning");var e=new FileReader;let i={photo:t.target.files[0],name:t.target.files[0].name,size:t.target.files[0].size,picture:"",is_image:t.target.files[0].type.indexOf("image")>=0,content_type:t.target.files[0].type||"unknown"};if(e.onload=t=>{i.picture=t.target.result},t.target.files[0].size>1e6*v.a.max_size_img)return void this.toastService.presentToast("Peso m\xe1ximo "+v.a.max_size_img+"MB","warning");this.images.push(i),e.readAsDataURL(t.target.files[0])}}removeImage(t){t<0||this.images.splice(t,1)}deleteLink(t){t<0||this.links.splice(t,1)}cancelPanel(){this.showPostPanel=!this.showPostPanel,this.images=[],this.links=[]}typingLink(){return Object(a.b)(this,void 0,void 0,(function*(){const t=yield this.alertController.create({cssClass:"",header:"A\xf1adir enlace",inputs:[{name:"link",value:"",type:"url",placeholder:"Enlace"}],buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:()=>{}},{text:"A\xf1adir",handler:t=>{console.log(t),t.link&&this.links.push(t.link)}}]});yield t.present()}))}savePost(t=null,e=null){this.model=CKEDITOR.instances["text-model-post"].getData(),this.model?(this.saving=!0,this.totalFilesUploaded=0,this.loadingService.change(!0),this.courseService.savePost({text:this.model,type:this.type,links:this.links,status:t,can_comment:this.can_comment,publish_at:e,title:this.title},this.course_id).subscribe(t=>{t.data?(this.post_id=t.data.uuid,0==this.images.length?(this.checkUploadPost(),this.toastService.presentToast(t.message,t.status)):this.saveImagesPost(t.data.uuid)):(this.toastService.presentToast(t.message,t.status),this.saving=!1,this.loadingService.change(!1))},t=>{this.saving=!1,this.loadingService.change(!1),this.controlErrores.control(t)})):this.toastService.presentToast("Agregue su comentario","warning")}saveImagesPost(t){for(const e of this.images)e.uploading=!0,this.courseService.saveImagePost(Object(m.c)({file:e.photo,content_type:e.content_type,name:e.name,size:e.size}),t).subscribe(t=>{e.uploading=!1,this.totalFilesUploaded++,this.checkUploadPost()},t=>{e.uploading=!1,this.totalFilesUploaded++,this.controlErrores.control(t),this.checkUploadPost()})}checkUploadPost(){this.totalFilesUploaded>=this.images.length&&(this.saving=!1,this.loadingService.change(!1),this.cancelPanel(),this.uuidCreate.emit(this.post_id),this.post_id=null,this.model="",$("#text-model-post").val(""))}availablePostPanel(){return Object(a.b)(this,void 0,void 0,(function*(){const t=yield this.modalCtrl.create({component:qi,cssClass:"modal-fullscreen",swipeToClose:!0,presentingElement:this.routerOutlet.nativeEl,componentProps:{course_id:this.course_id,type:this.type}});yield t.present();const{data:e}=yield t.onWillDismiss();e&&e.uuid&&this.uuidCreate.emit(e.uuid)}))}programingPost(){return Object(a.b)(this,void 0,void 0,(function*(){if(this.model=CKEDITOR.instances["text-model-post"].getData(),!this.model)return void this.toastService.presentToast("Agregue su comentario","warning");const t=yield this.modalCtrl.create({component:Ei.a,cssClass:"",swipeToClose:!0,presentingElement:this.routerOutlet.nativeEl,componentProps:{}});yield t.present();const{data:e}=yield t.onWillDismiss();e&&this.savePost(null,e.date)}))}}return t.\u0275fac=function(e){return new(e||t)(_.ac(u.a),_.ac(n.b),_.ac(b.a),_.ac(d.a),_.ac(l.a),_.ac(n.fb),_.ac(n.Db))},t.\u0275cmp=_.Ub({type:t,selectors:[["add-post"]],inputs:{title_show:"title_show",course_id:"course_id",type:"type"},outputs:{uuidCreate:"uuidCreate"},decls:2,vars:2,consts:[[4,"ngIf"],[2,"padding","0"],["size","10",1,"container-add-post-one-method","hover-text-primary","flex","flex-center-y",3,"click"],[1,""],["size","2",4,"ngIf"],["size","2"],[1,"container-add-post-two-method",3,"matTooltip","click"],["name","clipboard-outline"],["class","intro-x mt-8","style","display: flex;margin-bottom: 1em;",4,"ngIf"],["rows","5","id","text-model-post",3,"ngModel","ngModelChange"],["class","border-2 border-dashed dark:border-dark-5 rounded-md pt-4","style","margin-top: 10px;",4,"ngIf"],[1,"example-section"],[1,"example-margin",3,"ngModel","ngModelChange"],["for","file-add-rs-post"],[3,"disabled","matTooltip"],["type","file","id","file-add-rs-post",1,"d-none",3,"disabled","change"],["name","images-outline"],[3,"disabled","click"],["name","link-outline"],["slot","end"],["color","light",3,"disabled","click"],["color","success",3,"disabled","click"],["color","success",3,"disabled","matMenuTriggerFor"],["name","caret-down-outline"],["menu_other_options_save","matMenu"],["mat-menu-item","","color","success",3,"disabled","click"],["mat-menu-item","","color","warning",3,"disabled","click"],[1,"intro-x","mt-8",2,"display","flex","margin-bottom","1em"],["type","text","name","title",1,"pin-input","intro-x","login__input","form-control","py-3","px-4","border-gray-300","block",3,"ngModel","disabled","placeholder","ngModelChange"],[1,"border-2","border-dashed","dark:border-dark-5","rounded-md","pt-4",2,"margin-top","10px"],[2,"margin","0","padding-left","20px"],[1,"flex","flex-wrap","px-4"],["class","w-24 h-24 relative image-fit mb-5 mr-5 cursor-pointer zoom-in","tooltip","Call","navTooltip","",3,"matTooltip",4,"ngFor","ngForOf"],["tooltip","Call","navTooltip","",1,"w-24","h-24","relative","image-fit","mb-5","mr-5","cursor-pointer","zoom-in",3,"matTooltip"],["mode","indeterminate",4,"ngIf"],["class","rounded-md","alt","Imagen",3,"src",4,"ngIf"],["class","rounded-md","alt","File","src","/assets/img/document-file-icon.png",4,"ngIf"],["title","Remove this image?","class"," w-5 h-5 flex items-center justify-center absolute rounded-full text-white bg-theme-6 right-0 top-0 -mr-2 -mt-2",3,"click",4,"ngIf"],["mode","indeterminate"],["alt","Imagen",1,"rounded-md",3,"src"],["alt","File","src","/assets/img/document-file-icon.png",1,"rounded-md"],["title","Remove this image?",1,"w-5","h-5","flex","items-center","justify-center","absolute","rounded-full","text-white","bg-theme-6","right-0","top-0","-mr-2","-mt-2",3,"click"],["name","trash-outline"],[1,"ml-1",2,"margin","0","padding-left","20px"],["class","pos__ticket box p-2",4,"ngFor","ngForOf"],[1,"pos__ticket","box","p-2"],["href","javascript:;","data-toggle","modal","data-target","#add-item-modal",1,"flex","items-center","p-3","cursor-pointer","transition","duration-300","ease-in-out","bg-white","dark:bg-dark-3","hover:bg-gray-200","dark:hover:bg-dark-1","rounded-md"],[1,"pos__ticket__item-name","truncate","mr-1"],["target","_blank",3,"href"],[1,"ml-auto","font-medium",3,"click"]],template:function(t,e){1&t&&(_.cd(0,ji,9,4,"ion-card",0),_.cd(1,Wi,45,44,"ion-card",0)),2&t&&(_.Ac("ngIf",!e.showPostPanel),_.Lb(1),_.Ac("ngIf",e.showPostPanel))},directives:[c.t,n.m,n.n,n.A,n.gb,n.t,n.N,n.k,O.a,n.C,s.c,s.r,s.u,n.H,be.a,n.sb,C.d,C.e,C.b,c.s,w.a],pipes:[P.d],styles:[".hover-text-primary[_ngcontent-%COMP%]:hover{color:var(--ion-color-primary)}.hover-text-primary[_ngcontent-%COMP%]{cursor:pointer}"]}),t})();const Ki=["theLastReferencePost"];function Xi(t,e){if(1&t){const t=_.hc();_.gc(0,"add-post",7),_.oc("uuidCreate",(function(e){return _.Sc(t),_.sc(2).findOneAndPusPost(e)})),_.fc()}if(2&t){const t=_.sc(2);_.Ac("title_show",!0)("course_id",t.course_id)("repply",!1)("type","foro")}}function Zi(t,e){1&t&&(_.gc(0,"ion-card"),_.gc(1,"ion-card-header"),_.gc(2,"ion-card-title",8),_.ed(3),_.tc(4,"translate"),_.fc(),_.gc(5,"ion-card-subtitle"),_.bc(6,"ion-icon",9),_.ed(7),_.tc(8,"translate"),_.fc(),_.gc(9,"ion-card-subtitle"),_.bc(10,"ion-icon",10),_.ed(11),_.tc(12,"translate"),_.fc(),_.fc(),_.fc()),2&t&&(_.Lb(3),_.gd("",_.uc(4,3,"pages.course.post_welcome")," "),_.Lb(4),_.gd(" ",_.uc(8,5,"pages.course.create_and_programing")," "),_.Lb(4),_.gd(" ",_.uc(12,7,"pages.course.response_post")," "))}function tc(t,e){if(1&t&&(_.gc(0,"button",31),_.rc(),_.gc(1,"svg",32),_.bc(2,"path",33),_.fc(),_.fc()),2&t){_.sc();const t=_.Oc(17);_.Ac("matMenuTriggerFor",t)}}function ec(t,e){if(1&t){const t=_.hc();_.gc(0,"ion-item",null,18),_.gc(2,"div",19),_.bc(3,"img",20),_.gc(4,"div",21),_.gc(5,"a",22),_.ed(6,"Photography"),_.fc(),_.gc(7,"span",23),_.ed(8,"\u2022"),_.fc(),_.ed(9," 14 seconds ago "),_.fc(),_.fc(),_.gc(10,"div",24),_.gc(11,"a",25),_.ed(12),_.fc(),_.gc(13,"div",21),_.ed(14),_.fc(),_.fc(),_.cd(15,tc,3,1,"button",26),_.gc(16,"mat-menu",null,27),_.gc(18,"button",28),_.oc("click",(function(){_.Sc(t);const e=_.sc().$implicit;return _.sc(2).editPost(e)})),_.bc(19,"ion-icon",29),_.ed(20),_.tc(21,"translate"),_.fc(),_.gc(22,"button",28),_.oc("click",(function(){_.Sc(t);const e=_.sc(),i=e.$implicit,c=e.index;return _.sc(2).removePost(i,c)})),_.bc(23,"ion-icon",30),_.ed(24),_.tc(25,"translate"),_.fc(),_.fc(),_.fc()}if(2&t){const t=_.sc().$implicit,e=_.sc(2);_.Lb(3),_.Ac("src",null!=t.user_create&&null!=t.user_create.information?t.user_create.information.image_url:e.profile_img_route,_.Vc),_.Lb(9),_.gd("",null!=t.user_create?t.user_create.name:"-"," "),_.Lb(2),_.gd(" ",e.moment(t.date_created).fromNow(),""),_.Lb(1),_.Ac("ngIf",t.is_my),_.Lb(5),_.gd(" ",_.uc(21,6,"buttons.edit")," "),_.Lb(4),_.gd(" ",_.uc(25,8,"buttons.delete")," ")}}function ic(t,e){if(1&t&&(_.gc(0,"button",31),_.rc(),_.gc(1,"svg",32),_.bc(2,"path",33),_.fc(),_.fc()),2&t){_.sc();const t=_.Oc(10);_.Ac("matMenuTriggerFor",t)}}function cc(t,e){if(1&t){const t=_.hc();_.gc(0,"ion-item"),_.gc(1,"div",19),_.bc(2,"img",20),_.fc(),_.gc(3,"div",24),_.gc(4,"a",25),_.ed(5),_.fc(),_.gc(6,"div",21),_.ed(7),_.fc(),_.fc(),_.cd(8,ic,3,1,"button",26),_.gc(9,"mat-menu",null,27),_.gc(11,"button",28),_.oc("click",(function(){_.Sc(t);const e=_.sc().$implicit;return _.sc(2).editPost(e)})),_.bc(12,"ion-icon",29),_.ed(13),_.tc(14,"translate"),_.fc(),_.gc(15,"button",28),_.oc("click",(function(){_.Sc(t);const e=_.sc(),i=e.$implicit,c=e.index;return _.sc(2).removePost(i,c)})),_.bc(16,"ion-icon",30),_.ed(17),_.tc(18,"translate"),_.fc(),_.fc(),_.fc()}if(2&t){const t=_.sc().$implicit,e=_.sc(2);_.Lb(2),_.Ac("src",null!=t.user_create&&null!=t.user_create.information?t.user_create.information.image_url:e.profile_img_route,_.Vc),_.Lb(3),_.gd("",null!=t.user_create?t.user_create.name:"-"," "),_.Lb(2),_.gd(" ",e.moment(t.date_created).fromNow(),""),_.Lb(1),_.Ac("ngIf",t.is_my),_.Lb(5),_.gd(" ",_.uc(14,6,"buttons.edit")," "),_.Lb(4),_.gd(" ",_.uc(18,8,"buttons.delete")," ")}}function sc(t,e){1&t&&(_.gc(0,"ion-button"),_.bc(1,"ion-icon",34),_.fc())}function nc(t,e){if(1&t&&(_.gc(0,"div",38),_.gc(1,"a",39),_.gc(2,"div",40),_.gc(3,"a",41),_.ed(4),_.fc(),_.fc(),_.fc(),_.fc()),2&t){const t=e.$implicit;_.Lb(3),_.Bc("href",t.text,_.Vc),_.Lb(1),_.fd(t.text)}}function oc(t,e){if(1&t&&(_.gc(0,"div",35),_.gc(1,"h3",36),_.ed(2),_.tc(3,"translate"),_.fc(),_.cd(4,nc,5,2,"div",37),_.fc()),2&t){const t=_.sc().$implicit;_.Lb(2),_.fd(_.uc(3,2,"pages.course.links_externals")),_.Lb(2),_.Ac("ngForOf",t.links)}}function ac(t,e){if(1&t&&_.bc(0,"img",48),2&t){const t=_.sc().$implicit;_.Bc("src",t.file_url,_.Vc)}}function rc(t,e){1&t&&_.bc(0,"img",49)}function lc(t,e){if(1&t&&(_.gc(0,"a",45),_.cd(1,ac,1,1,"img",46),_.cd(2,rc,1,0,"img",47),_.fc()),2&t){const t=e.$implicit;_.Bc("href",t.file_url,_.Vc),_.Ac("matTooltip",t.name),_.Lb(1),_.Ac("ngIf",t.is_image),_.Lb(1),_.Ac("ngIf",!t.is_image)}}function dc(t,e){if(1&t&&(_.gc(0,"div",35),_.gc(1,"h3",42),_.ed(2),_.tc(3,"translate"),_.fc(),_.gc(4,"div",43),_.cd(5,lc,3,4,"a",44),_.fc(),_.fc()),2&t){const t=_.sc().$implicit;_.Lb(2),_.fd(_.uc(3,2,"pages.course.files")),_.Lb(3),_.Ac("ngForOf",t.images)}}function uc(t,e){if(1&t){const t=_.hc();_.gc(0,"div",50),_.gc(1,"div",51),_.oc("click",(function(){_.Sc(t);const e=_.sc().$implicit;return _.sc(2).loadComments(e)})),_.ed(2),_.tc(3,"translate"),_.gc(4,"span",52),_.ed(5),_.fc(),_.fc(),_.fc()}if(2&t){const t=_.sc().$implicit;_.Lb(2),_.gd(" ",_.uc(3,2,"pages.course.comments"),": "),_.Lb(3),_.fd(t.total_comments||0)}}function gc(t,e){if(1&t){const t=_.hc();_.gc(0,"ion-icon",59),_.oc("click",(function(){_.Sc(t);const e=_.sc(2).$implicit;return _.sc(2).submitComment(e)})),_.tc(1,"translate"),_.fc()}2&t&&_.Ac("matTooltip",_.uc(1,1,"buttons.publish"))}function mc(t,e){1&t&&_.bc(0,"ion-icon",60)}function fc(t,e){if(1&t){const t=_.hc();_.gc(0,"div",53),_.gc(1,"div",54),_.bc(2,"img",20),_.fc(),_.gc(3,"div",55),_.gc(4,"input",56),_.oc("ngModelChange",(function(e){return _.Sc(t),_.sc().$implicit.comment_input=e}))("keyup.enter",(function(){_.Sc(t);const e=_.sc().$implicit;return _.sc(2).submitComment(e)})),_.tc(5,"translate"),_.fc(),_.cd(6,gc,2,3,"ion-icon",57),_.cd(7,mc,1,0,"ion-icon",58),_.fc(),_.fc()}if(2&t){const t=_.sc().$implicit,e=_.sc(2);_.Lb(2),_.Bc("src",e.user_profile,_.Vc),_.Lb(2),_.Bc("placeholder",_.uc(5,6,"pages.course.please_comment")),_.Ac("disabled",t.comment_upload)("ngModel",t.comment_input),_.Lb(2),_.Ac("ngIf",!t.comment_upload),_.Lb(1),_.Ac("ngIf",t.comment_upload)}}function hc(t,e){if(1&t&&(_.gc(0,"ion-card",11),_.cd(1,ec,26,10,"ion-item",2),_.cd(2,cc,19,10,"ion-item",2),_.gc(3,"ion-card-content"),_.gc(4,"h4",12),_.gc(5,"a",13),_.ed(6),_.fc(),_.cd(7,sc,2,0,"ion-button",2),_.fc(),_.bc(8,"p",14),_.cd(9,oc,5,4,"div",15),_.cd(10,dc,6,4,"div",15),_.gc(11,"ion-item"),_.cd(12,uc,6,4,"div",16),_.fc(),_.cd(13,fc,8,8,"div",17),_.fc(),_.fc()),2&t){const t=e.$implicit,i=e.index,c=_.sc(2);_.Lb(1),_.Ac("ngIf",c.posts.length==i+1),_.Lb(1),_.Ac("ngIf",c.posts.length!=i+1),_.Lb(2),_.Ac("routerLink",c.routeParent+t.uuid),_.Lb(2),_.fd(t.title),_.Lb(1),_.Ac("ngIf",null==t.title||""==t.title),_.Lb(1),_.Ac("innerHTML",t.text,_.Tc),_.Lb(1),_.Ac("ngIf",t.links&&t.links.length>0),_.Lb(1),_.Ac("ngIf",t.images&&t.images.length>0),_.Lb(2),_.Ac("ngIf","1"==t.can_comment),_.Lb(1),_.Ac("ngIf","1"==t.can_comment)}}function pc(t,e){if(1&t&&(_.gc(0,"ion-grid"),_.gc(1,"ion-row"),_.gc(2,"ion-col",3),_.cd(3,Xi,1,4,"add-post",4),_.gc(4,"div",5),_.cd(5,Zi,13,9,"ion-card",2),_.cd(6,hc,14,10,"ion-card",6),_.fc(),_.fc(),_.fc(),_.fc()),2&t){const t=_.sc();_.Lb(3),_.Ac("ngIf","all"==t.course.post_by||"me"==t.course.post_by&&t.course.is_my),_.Lb(2),_.Ac("ngIf",0==t.posts.length),_.Lb(1),_.Ac("ngForOf",t.posts)}}let bc=(()=>{class t{constructor(t,e,i,c,s,n,o,a,r,l){this.courseService=t,this.activeRoute=e,this.controlErroresService=i,this.toastService=c,this.loadingService=s,this.tourService=n,this.userData=o,this.routerOutlet=a,this.alertCtrl=r,this.modalCtrl=l,this.type_page="foro",this.totalPages=0,this.posts=[],this.this_page=1,this.profile_img_route="/assets/images/profile-8.jpg",this.user_profile="/assets/images/profile-8.jpg",this.moment=g,this.routeParent=m.h.show_course,this.course=null,this.loading=!1,this.course_id=0,this.last_works=[],this.course_id=e.snapshot.params.uuid,this.routeParent=this.routeParent.replace(":id",""+this.course_id).replace(":id",""+this.course_id).replace(":type",this.type_page),e.snapshot.queryParams&&e.snapshot.queryParams.ref&&e.snapshot.queryParams.ref&&(this.timerIdServer=e.snapshot.queryParams.ref),this.moment.locale("es"),g.locale("es")}ngOnInit(){return Object(a.b)(this,void 0,void 0,(function*(){this.getCourse(),this.intersectionObserver();let t=yield this.userData.getUser();t&&t.information&&(this.user_profile=t.information.image_url)}))}getCourse(){this.loading=!0,this.courseService.course(this.course_id).subscribe(t=>{this.loading=!1,this.course=t.data,this.loadPosts(),("all"==this.course.post_by||"me"==this.course.post_by&&this.course.is_my)&&setTimeout(()=>{},500)},t=>{this.loading=!1,this.controlErroresService.control(t)})}ngAfterViewInit(){this.theLastReferencePost.changes.subscribe(t=>{t.last&&this.observer.observe(t.last.nativeElement)})}intersectionObserver(){this.observer=new IntersectionObserver(t=>{t[0].isIntersecting&&this.totalPages>=this.this_page&&this.loadPosts()},{root:null,rootMargin:"0px",threshold:.5})}loadPosts(t=!1){t&&(this.posts=[],this.this_page=1),this.loadingService.change(!0),this.courseService.getPostsByCourse(this.course_id,this.type_page,this.this_page,this.timerIdServer).subscribe(t=>{this.posts=this.posts.concat(t.data),this.totalPages=t.last_page,this.loadingService.change(!1),this.this_page++},t=>{this.loadingService.change(!1),this.controlErroresService.control(t)})}findOneAndPusPost(t){this.courseService.getOnePost(t).subscribe(t=>{t.data&&this.posts.unshift(t.data)},t=>{})}is_array(t){return Array.isArray(t)}removePost(t,e){return Object(a.b)(this,void 0,void 0,(function*(){const i=yield this.alertCtrl.create({header:"Eliminar",message:"\xbfDesea eliminar este post?",buttons:[{text:"Cancelar",role:"cancel"},{text:"Eliminar",role:"destructive",handler:()=>{this.loadingService.change(!0),this.courseService.deletePost(t.uuid).subscribe(t=>{this.loadingService.change(!1),this.posts.splice(e,1),this.toastService.presentToast(t.message,t.status)},t=>{this.loadingService.change(!1),this.controlErroresService.control(t)})}}]});yield i.present()}))}editPost(t){return Object(a.b)(this,void 0,void 0,(function*(){const e=yield this.modalCtrl.create({component:Oe,cssClass:"modal-fullscreen",swipeToClose:!0,presentingElement:this.routerOutlet.nativeEl,componentProps:{post_id:t.uuid,title_show:!0}});yield e.present();const{data:i}=yield e.onWillDismiss();console.log(i),i&&(t.text=i.text,t.date_created=i.date_created,t.can_comment=i.can_comment,t.images=i.images,t.status=i.status,t.total_comments=i.total_comments,t.links=i.links,t.type=i.type,t.title=i.title)}))}submitComment(t){t.comment_input?(t.comment_upload=!0,this.courseService.commentPost(t.uuid,{text:t.comment_input}).subscribe(e=>{t.comment_input="",isNaN(t.total_comments)?t.total_comments=1:t.total_comments++,t.comment_upload=!1,Array.isArray(t.comments)&&t.comments.unshift(e.data)},e=>{t.comment_upload=!1,this.controlErroresService.control(e)})):this.toastService.presentToast("\xa1Agregue un comentario para poder publicarlo!","warning")}}return t.\u0275fac=function(e){return new(e||t)(_.ac(d.a),_.ac(o.a),_.ac(l.a),_.ac(b.a),_.ac(u.a),_.ac(h.a),_.ac(p.a),_.ac(n.fb),_.ac(n.b),_.ac(n.Db))},t.\u0275cmp=_.Ub({type:t,selectors:[["app-course-foro"]],viewQuery:function(t,e){var i;1&t&&_.ld(Ki,!0,_.o),2&t&&_.Nc(i=_.pc())&&(e.theLastReferencePost=i)},decls:4,vars:1,consts:[[1,"flex","flex-center"],["size","12","size-sm","11","size-md","10","size-xl","9"],[4,"ngIf"],["size","12","size-sm","12","size-md","12","size-xl","12",1,"container-add-post"],[3,"title_show","course_id","repply","type","uuidCreate",4,"ngIf"],[1,"all-postss","container-add-post-show-posts"],["class","mt-2",4,"ngFor","ngForOf"],[3,"title_show","course_id","repply","type","uuidCreate"],[2,"color","var(--ion-color-primary)"],["name","chatbox-outline"],["name","chatbox-ellipses-outline"],[1,"mt-2"],[1,"bold",3,"routerLink"],["href","",1,"font-medium","text-xl","mt-3"],[3,"innerHTML"],["class","border-2 border-dashed dark:border-dark-5 rounded-md pt-4","style","margin-top: 10px;",4,"ngIf"],["class","w-full flex text-gray-600 text-xs sm:text-sm mt-1",4,"ngIf"],["class","w-full flex items-center mt-3",4,"ngIf"],["theLastReferencePost",""],[1,"w-10","h-10","flex-none","image-fit"],["alt","--",1,"rounded-full",3,"src"],[1,"flex","text-gray-600","truncate","text-xs","mt-0.5"],["href","",1,"text-theme-1","dark:text-theme-10","inline-block","truncate"],[1,"mx-1"],[1,"ml-3","mr-auto"],["href","javascript:void(0)",1,"font-medium"],["mat-button","",3,"matMenuTriggerFor",4,"ngIf"],["menuPost","matMenu"],["mat-menu-item","",3,"click"],["name","create-outline"],["name","trash-outline"],["mat-button","",3,"matMenuTriggerFor"],["focusable","false","width","24","height","24","viewBox","0 0 24 24",1,"NMm5M"],["d","M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"],["name","eye-outline"],[1,"border-2","border-dashed","dark:border-dark-5","rounded-md","pt-4",2,"margin-top","10px"],[1,"ml-1",2,"margin","0","padding-left","20px"],["class","pos__ticket box p-2",4,"ngFor","ngForOf"],[1,"pos__ticket","box","p-2"],["href","javascript:;","data-toggle","modal","data-target","#add-item-modal",1,"flex","items-center","p-3","cursor-pointer","transition","duration-300","ease-in-out","dark:bg-dark-3","hover:bg-gray-200","dark:hover:bg-dark-1","rounded-md"],[1,"pos__ticket__item-name","truncate","mr-1"],["target","_blank",3,"href"],[2,"margin","0","padding-left","20px"],[1,"flex","flex-wrap","px-4"],["target","_blank","class","w-24 h-24 relative image-fit mb-5 mr-5 cursor-pointer zoom-in","tooltip","Call","navTooltip","",3,"href","matTooltip",4,"ngFor","ngForOf"],["target","_blank","tooltip","Call","navTooltip","",1,"w-24","h-24","relative","image-fit","mb-5","mr-5","cursor-pointer","zoom-in",3,"href","matTooltip"],["class","rounded-md","alt","Imagen",3,"src",4,"ngIf"],["class","rounded-md","alt","File","src","/assets/img/document-file-icon.png",4,"ngIf"],["alt","Imagen",1,"rounded-md",3,"src"],["alt","File","src","/assets/img/document-file-icon.png",1,"rounded-md"],[1,"w-full","flex","text-gray-600","text-xs","sm:text-sm","mt-1"],[1,"mr-2","c-pointer",3,"click"],[1,"font-medium"],[1,"w-full","flex","items-center","mt-3"],[1,"w-8","h-8","flex-none","image-fit","mr-3"],[1,"flex-1","relative","text-gray-700"],["type","text",1,"form-control","form-control-rounded","border-transparent","bg-gray-200","pr-10","placeholder-theme-13",3,"disabled","ngModel","placeholder","ngModelChange","keyup.enter"],["name","send-outline","class","c-pointer absolute my-auto inset-y-0 mr-3 right-0","fill","outline",3,"matTooltip","click",4,"ngIf"],["name","cloud-upload-outline","class","c-pointer absolute my-auto inset-y-0 mr-3 right-0","fill","outline",4,"ngIf"],["name","send-outline","fill","outline",1,"c-pointer","absolute","my-auto","inset-y-0","mr-3","right-0",3,"matTooltip","click"],["name","cloud-upload-outline","fill","outline",1,"c-pointer","absolute","my-auto","inset-y-0","mr-3","right-0"]],template:function(t,e){1&t&&(_.gc(0,"ion-grid"),_.gc(1,"ion-row",0),_.gc(2,"ion-col",1),_.cd(3,pc,7,3,"ion-grid",2),_.fc(),_.fc(),_.fc()),2&t&&(_.Lb(3),_.Ac("ngIf",e.course))},directives:[n.A,n.gb,n.t,c.t,c.s,Gi,n.m,n.o,n.q,n.p,n.C,n.n,n.Kb,o.g,n.H,C.e,C.b,I.b,C.d,n.k,O.a,s.c,s.r,s.u],pipes:[P.d],styles:[""]}),t})();var vc=i("uD9u");function _c(t,e){1&t&&_.bc(0,"mat-progress-bar",9)}function yc(t,e){if(1&t&&(_.gc(0,"ion-segment-button",10),_.ed(1),_.fc()),2&t){const t=e.$implicit;_.Ac("value",t.uuid),_.Lb(1),_.gd(" ",t.name," ")}}function kc(t,e){if(1&t){const t=_.hc();_.gc(0,"ion-col",11),_.oc("click",(function(){_.Sc(t);const i=e.$implicit;return _.sc().themeSelected=i.uuid})),_.gc(1,"a",12),_.gc(2,"div",13),_.bc(3,"img",14),_.fc(),_.fc(),_.fc()}if(2&t){const t=e.$implicit,i=_.sc();_.Lb(1),_.Ac("ngClass",i.themeSelected==t.uuid?"theme-selected":""),_.Lb(2),_.Bc("src",t.theme_url,_.Vc)}}let Lc=(()=>{class t{constructor(t,e,i,c){this.courseService=t,this.navParams=e,this.modalCtrl=i,this.controlErroresService=c,this.loading=!1,this.menus=[],this.themes=[],this.segment=null,this.course_id=null,this.themeSelected=null,this.scrollbarStyle=v.a.scrollbarStyle,this.course_id=this.navParams.data.course_id}ngOnInit(){this.loadTypes()}loadTypes(){this.loading=!0,this.courseService.getTypesTheme().subscribe(t=>{this.loading=!1,this.menus=t.data,this.menus.length>0&&(this.segment=this.menus[0].uuid)},t=>{this.loading=!1,this.modalCtrl.dismiss(),this.controlErroresService.control(t)})}changeThemes(){this.themes=[],this.loading=!0,this.courseService.getThemeByType(this.segment).subscribe(t=>{this.loading=!1,this.themes=t.data},t=>{this.loading=!1,this.controlErroresService.control(t)})}dismiss(t){this.modalCtrl.dismiss()}updateThemeCourse(){let t=this.themes.find(t=>t.uuid==this.themeSelected);null!=t&&(this.loading=!0,this.courseService.update({theme:t.route,default_null:1},this.course_id).subscribe(e=>{this.loading=!1,this.modalCtrl.dismiss({theme:t.route,theme_url:t.theme_url})},t=>{this.loading=!1,this.controlErroresService.control(t)}))}}return t.\u0275fac=function(e){return new(e||t)(_.ac(d.a),_.ac(n.Fb),_.ac(n.Db),_.ac(l.a))},t.\u0275cmp=_.Ub({type:t,selectors:[["app-select-themes"]],decls:23,vars:15,consts:[["translucent","true"],["slot","start"],["mode","indeterminate",4,"ngIf"],[3,"ngModel","ngModelChange","ionChange"],[3,"value",4,"ngFor","ngForOf"],["fullscreen","true",3,"scrollbar"],["size","12","size-sm","12","size-md","6","size-xl","4",3,"click",4,"ngFor","ngForOf"],["size","small",3,"disabled","click"],["size","small","color","light",3,"click"],["mode","indeterminate"],[3,"value"],["size","12","size-sm","12","size-md","6","size-xl","4",3,"click"],["href","javascript:;",1,"flex","items-center","p-3","cursor-pointer","transition","duration-300","ease-in-out","dark:bg-dark-3","hover:bg-gray-200","dark:hover:bg-dark-1","rounded-md",3,"ngClass"],[1,"pos__ticket__item-name","truncate","mr-1"],[3,"src"]],template:function(t,e){1&t&&(_.gc(0,"ion-header",0),_.gc(1,"ion-toolbar"),_.gc(2,"ion-buttons",1),_.bc(3,"ion-menu-button"),_.fc(),_.gc(4,"ion-title"),_.ed(5),_.tc(6,"translate"),_.fc(),_.fc(),_.cd(7,_c,1,0,"mat-progress-bar",2),_.gc(8,"ion-toolbar"),_.gc(9,"ion-segment",3),_.oc("ngModelChange",(function(t){return e.segment=t}))("ionChange",(function(){return e.changeThemes()})),_.cd(10,yc,2,2,"ion-segment-button",4),_.fc(),_.fc(),_.fc(),_.gc(11,"ion-content",5),_.gc(12,"ion-grid"),_.gc(13,"ion-row"),_.cd(14,kc,4,2,"ion-col",6),_.fc(),_.fc(),_.fc(),_.gc(15,"ion-footer",0),_.gc(16,"ion-toolbar"),_.gc(17,"ion-button",7),_.oc("click",(function(){return e.updateThemeCourse()})),_.ed(18),_.tc(19,"translate"),_.fc(),_.gc(20,"ion-button",8),_.oc("click",(function(){return e.dismiss()})),_.ed(21),_.tc(22,"translate"),_.fc(),_.fc(),_.fc()),2&t&&(_.Lb(5),_.fd(_.uc(6,9,"pages.course.gallery")),_.Lb(2),_.Ac("ngIf",e.loading),_.Lb(2),_.Ac("ngModel",e.segment),_.Lb(1),_.Ac("ngForOf",e.menus),_.Lb(1),_.Bc("scrollbar",e.scrollbarStyle),_.Lb(3),_.Ac("ngForOf",e.themes),_.Lb(3),_.Ac("disabled",null==e.themeSelected),_.Lb(1),_.fd(_.uc(19,11,"buttons.save")),_.Lb(3),_.fd(_.uc(22,13,"buttons.cancel")))},directives:[n.B,n.zb,n.l,n.R,n.xb,c.t,n.ib,n.Lb,s.r,s.u,c.s,n.u,x.b,n.A,n.gb,n.z,n.k,w.a,n.jb,n.t,c.q],pipes:[P.d],styles:[".item-img-theme[_ngcontent-%COMP%]{min-width:300px;max-width:300px;max-height:130px;min-height:130px}.item-img-theme[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;overflow:hidden}.fl-wrap[_ngcontent-%COMP%]{flex-wrap:wrap}.theme-selected[_ngcontent-%COMP%]{background-color:#a1d0ff}"]}),t})();var xc=i("pyb/");const wc=["theLastReferencePost"];function Ac(t,e){if(1&t&&(_.gc(0,"ion-button",20),_.ed(1),_.tc(2,"translate"),_.bc(3,"ion-icon",21),_.fc()),2&t){_.sc();const t=_.Oc(8);_.Ac("matMenuTriggerFor",t),_.Lb(1),_.gd("",_.uc(2,2,"buttons.personalize")," ")}}function Sc(t,e){if(1&t&&(_.gc(0,"ion-card"),_.gc(1,"ion-card-header"),_.gc(2,"ion-card-subtitle",22),_.gc(3,"a",23),_.bc(4,"ion-icon",24),_.gc(5,"span",25),_.ed(6),_.tc(7,"translate"),_.fc(),_.fc(),_.fc(),_.fc(),_.fc()),2&t){const t=_.sc(2);_.Lb(3),_.Bc("href",t.course.reference_url,_.Vc),_.Lb(3),_.fd(_.uc(7,2,"pages.course.virtual_class"))}}function Cc(t,e){if(1&t&&(_.gc(0,"button",32),_.rc(),_.gc(1,"svg",33),_.bc(2,"path",34),_.fc(),_.fc()),2&t){_.sc();const t=_.Oc(8);_.Ac("matMenuTriggerFor",t)}}function Ic(t,e){if(1&t){const t=_.hc();_.gc(0,"ion-card-title"),_.gc(1,"ion-button",35),_.oc("click",(function(){return _.Sc(t),_.sc(3).updateCode({code:1})})),_.ed(2),_.tc(3,"translate"),_.fc(),_.fc()}2&t&&(_.Lb(2),_.fd(_.uc(3,1,"buttons.generate_code")))}function Oc(t,e){if(1&t&&(_.gc(0,"ion-card-title"),_.gc(1,"h2"),_.gc(2,"strong"),_.ed(3),_.fc(),_.fc(),_.fc()),2&t){const t=_.sc(3);_.Lb(3),_.fd(t.course?t.course.code:"-")}}function Pc(t,e){if(1&t){const t=_.hc();_.gc(0,"ion-card"),_.gc(1,"ion-card-header"),_.gc(2,"ion-card-subtitle",22),_.gc(3,"ion-label"),_.ed(4),_.tc(5,"translate"),_.fc(),_.cd(6,Cc,3,1,"button",26),_.gc(7,"mat-menu",null,27),_.gc(9,"button",8),_.oc("click",(function(){_.Sc(t);const e=_.sc(2);return e.copyLink(e.course.code)})),_.bc(10,"ion-icon",28),_.ed(11),_.tc(12,"translate"),_.fc(),_.gc(13,"button",8),_.oc("click",(function(){_.Sc(t);const e=_.sc(2);return e.copyCode(e.course.code)})),_.bc(14,"ion-icon",29),_.ed(15),_.tc(16,"translate"),_.fc(),_.gc(17,"button",8),_.oc("click",(function(){return _.Sc(t),_.sc(2).updateCode({code:1})})),_.bc(18,"ion-icon",30),_.ed(19),_.tc(20,"translate"),_.fc(),_.gc(21,"button",8),_.oc("click",(function(){return _.Sc(t),_.sc(2).updateCode({destroy_code:1})})),_.bc(22,"ion-icon",31),_.ed(23),_.tc(24,"translate"),_.fc(),_.fc(),_.fc(),_.cd(25,Ic,4,3,"ion-card-title",2),_.cd(26,Oc,4,1,"ion-card-title",2),_.fc(),_.bc(27,"ion-card-content"),_.fc()}if(2&t){const t=_.sc(2);_.Lb(4),_.gd(" ",_.uc(5,8,"pages.course.class_code")," "),_.Lb(2),_.Ac("ngIf",null!=t.course.code),_.Lb(5),_.gd(" ",_.uc(12,10,"pages.course.copy_link_class")," "),_.Lb(4),_.gd(" ",_.uc(16,12,"pages.course.copy_code_class")," "),_.Lb(4),_.gd(" ",_.uc(20,14,"pages.course.change_code_class")," "),_.Lb(4),_.gd("",_.uc(24,16,"pages.course.desactive")," "),_.Lb(2),_.Ac("ngIf",null==t.course.code),_.Lb(1),_.Ac("ngIf",null!=t.course.code)}}function Mc(t,e){1&t&&_.bc(0,"ion-card-content")}function Tc(t,e){1&t&&(_.gc(0,"ion-card-content"),_.gc(1,"p"),_.ed(2),_.tc(3,"translate"),_.fc(),_.fc()),2&t&&(_.Lb(2),_.fd(_.uc(3,1,"pages.course.no_last_works")))}function Fc(t,e){if(1&t){const t=_.hc();_.gc(0,"add-post",36),_.oc("uuidCreate",(function(e){return _.Sc(t),_.sc(2).findOneAndPusPost(e)})),_.fc()}if(2&t){const t=_.sc(2);_.Ac("course_id",t.course_id)}}function zc(t,e){1&t&&(_.gc(0,"ion-card"),_.gc(1,"ion-card-header"),_.gc(2,"ion-card-title",37),_.ed(3),_.tc(4,"translate"),_.fc(),_.gc(5,"ion-card-subtitle"),_.bc(6,"ion-icon",38),_.ed(7),_.tc(8,"translate"),_.fc(),_.gc(9,"ion-card-subtitle"),_.bc(10,"ion-icon",39),_.ed(11),_.tc(12,"translate"),_.fc(),_.fc(),_.fc()),2&t&&(_.Lb(3),_.gd("",_.uc(4,3,"pages.course.post_welcome")," "),_.Lb(4),_.gd(" ",_.uc(8,5,"pages.course.create_and_programing")," "),_.Lb(4),_.gd(" ",_.uc(12,7,"pages.course.response_post")," "))}function Dc(t,e){1&t&&_.bc(0,"span",null,55)}function qc(t,e){if(1&t&&(_.gc(0,"div",56),_.gc(1,"span",57),_.ed(2),_.tc(3,"translate"),_.fc(),_.fc()),2&t){const t=_.sc().$implicit;_.Lb(2),_.gd(" ",_.uc(3,1,"statuses."+t.status)," ")}}function Ec(t,e){if(1&t&&(_.gc(0,"button",32),_.rc(),_.gc(1,"svg",33),_.bc(2,"path",34),_.fc(),_.fc()),2&t){_.sc();const t=_.Oc(13);_.Ac("matMenuTriggerFor",t)}}function $c(t,e){if(1&t&&(_.gc(0,"div",61),_.gc(1,"a",62),_.gc(2,"div",63),_.gc(3,"a",64),_.ed(4),_.fc(),_.fc(),_.fc(),_.fc()),2&t){const t=e.$implicit;_.Lb(3),_.Bc("href",t.text,_.Vc),_.Lb(1),_.fd(t.text)}}function jc(t,e){if(1&t&&(_.gc(0,"div",58),_.gc(1,"h3",59),_.ed(2),_.tc(3,"translate"),_.fc(),_.cd(4,$c,5,2,"div",60),_.fc()),2&t){const t=_.sc().$implicit;_.Lb(2),_.fd(_.uc(3,2,"pages.course.links_externals")),_.Lb(2),_.Ac("ngForOf",t.links)}}function Bc(t,e){if(1&t&&_.bc(0,"img",71),2&t){const t=_.sc().$implicit;_.Bc("src",t.file_url,_.Vc)}}function Rc(t,e){1&t&&_.bc(0,"img",72)}function Qc(t,e){if(1&t&&(_.gc(0,"a",68),_.cd(1,Bc,1,1,"img",69),_.cd(2,Rc,1,0,"img",70),_.fc()),2&t){const t=e.$implicit;_.Bc("href",t.file_url,_.Vc),_.Ac("matTooltip",t.name),_.Lb(1),_.Ac("ngIf",t.is_image),_.Lb(1),_.Ac("ngIf",!t.is_image)}}function Vc(t,e){if(1&t&&(_.gc(0,"div",58),_.gc(1,"h3",65),_.ed(2),_.tc(3,"translate"),_.fc(),_.gc(4,"div",66),_.cd(5,Qc,3,4,"a",67),_.fc(),_.fc()),2&t){const t=_.sc().$implicit;_.Lb(2),_.fd(_.uc(3,2,"pages.course.files")),_.Lb(3),_.Ac("ngForOf",t.images)}}function Uc(t,e){if(1&t){const t=_.hc();_.gc(0,"div",73),_.gc(1,"div",74),_.oc("click",(function(){_.Sc(t);const e=_.sc().$implicit;return _.sc(2).loadComments(e)})),_.ed(2),_.tc(3,"translate"),_.gc(4,"span",75),_.ed(5),_.fc(),_.fc(),_.fc()}if(2&t){const t=_.sc().$implicit;_.Lb(2),_.gd(" ",_.uc(3,2,"pages.course.comments"),": "),_.Lb(3),_.fd(t.total_comments||0)}}function Nc(t,e){if(1&t){const t=_.hc();_.gc(0,"ion-icon",82),_.oc("click",(function(){_.Sc(t);const e=_.sc(2).$implicit;return _.sc(2).submitComment(e)})),_.tc(1,"translate"),_.fc()}2&t&&_.Ac("matTooltip",_.uc(1,1,"buttons.publish"))}function Hc(t,e){1&t&&_.bc(0,"ion-icon",83)}function Jc(t,e){if(1&t){const t=_.hc();_.gc(0,"div",76),_.gc(1,"div",77),_.bc(2,"img",43),_.fc(),_.gc(3,"div",78),_.gc(4,"input",79),_.oc("ngModelChange",(function(e){return _.Sc(t),_.sc().$implicit.comment_input=e}))("keyup.enter",(function(){_.Sc(t);const e=_.sc().$implicit;return _.sc(2).submitComment(e)})),_.tc(5,"translate"),_.fc(),_.cd(6,Nc,2,3,"ion-icon",80),_.cd(7,Hc,1,0,"ion-icon",81),_.fc(),_.fc()}if(2&t){const t=_.sc().$implicit,e=_.sc(2);_.Lb(2),_.Bc("src",e.user_profile,_.Vc),_.Lb(2),_.Bc("placeholder",_.uc(5,6,"pages.course.please_comment")),_.Ac("disabled",t.comment_upload)("ngModel",t.comment_input),_.Lb(2),_.Ac("ngIf",!t.comment_upload),_.Lb(1),_.Ac("ngIf",t.comment_upload)}}function Yc(t,e){if(1&t){const t=_.hc();_.gc(0,"div",87),_.oc("click",(function(){_.Sc(t);const e=_.sc(2).$implicit;return _.sc(2).loadComments(e)})),_.gc(1,"span",75),_.ed(2),_.tc(3,"translate"),_.fc(),_.fc()}2&t&&(_.Lb(2),_.fd(_.uc(3,1,"pages.course.loadmorecomments")))}function Wc(t,e){if(1&t&&(_.gc(0,"button",32),_.rc(),_.gc(1,"svg",33),_.bc(2,"path",34),_.fc(),_.fc()),2&t){_.sc();const t=_.Oc(11);_.Ac("matMenuTriggerFor",t)}}function Gc(t,e){if(1&t){const t=_.hc();_.gc(0,"ion-icon",82),_.oc("click",(function(){_.Sc(t);const e=_.sc(2).$implicit;return _.sc(4).updateComment(e)})),_.tc(1,"translate"),_.fc()}2&t&&_.Ac("matTooltip",_.uc(1,1,"buttons.publish"))}function Kc(t,e){1&t&&_.bc(0,"ion-icon",83)}function Xc(t,e){if(1&t){const t=_.hc();_.gc(0,"div",78),_.gc(1,"input",79),_.oc("ngModelChange",(function(e){return _.Sc(t),_.sc().$implicit.aux_text=e}))("keyup.enter",(function(){_.Sc(t);const e=_.sc().$implicit;return _.sc(4).updateComment(e)})),_.tc(2,"translate"),_.fc(),_.cd(3,Gc,2,3,"ion-icon",80),_.cd(4,Kc,1,0,"ion-icon",81),_.fc()}if(2&t){const t=_.sc().$implicit;_.Lb(1),_.Bc("placeholder",_.uc(2,5,"pages.course.please_comment")),_.Ac("disabled",t.comment_upload)("ngModel",t.aux_text),_.Lb(2),_.Ac("ngIf",!t.comment_upload),_.Lb(1),_.Ac("ngIf",t.comment_upload)}}function Zc(t,e){if(1&t&&_.bc(0,"p",50),2&t){const t=_.sc().$implicit;_.Ac("innerHTML",t.text,_.Tc)}}function ts(t,e){if(1&t){const t=_.hc();_.gc(0,"div",88),_.gc(1,"div",22),_.gc(2,"div",89),_.bc(3,"img",90),_.fc(),_.gc(4,"div",91),_.gc(5,"div",92),_.gc(6,"span",75),_.ed(7),_.fc(),_.gc(8,"span",93),_.cd(9,Wc,3,1,"button",26),_.fc(),_.gc(10,"mat-menu",null,94),_.gc(12,"button",8),_.oc("click",(function(){_.Sc(t);const i=e.$implicit;return _.sc(4).enableModeEdit(i)})),_.bc(13,"ion-icon",49),_.ed(14),_.tc(15,"translate"),_.fc(),_.gc(16,"button",8),_.oc("click",(function(){_.Sc(t);const i=e.$implicit,c=e.index,s=_.sc(2).$implicit;return _.sc(2).removeComment(s,i,c)})),_.bc(17,"ion-icon",31),_.ed(18),_.tc(19,"translate"),_.fc(),_.fc(),_.fc(),_.gc(20,"div",95),_.ed(21),_.fc(),_.gc(22,"div",40),_.gc(23,"div",76),_.cd(24,Xc,5,7,"div",96),_.fc(),_.cd(25,Zc,1,1,"p",97),_.fc(),_.fc(),_.fc(),_.fc()}if(2&t){const t=e.$implicit,i=_.sc(4);_.Lb(3),_.Ac("alt",null!=t.user_create?t.user_create.name:"-")("src",null!=t.user_create&&null!=t.user_create.information?t.user_create.information.image_url:i.profile_img_route,_.Vc),_.Lb(4),_.fd(null!=t.user_create?t.user_create.name:"-"),_.Lb(2),_.Ac("ngIf",t.is_my),_.Lb(5),_.gd(" ",_.uc(15,9,"buttons.edit")," "),_.Lb(4),_.gd(" ",_.uc(19,11,"buttons.delete")," "),_.Lb(3),_.gd("",i.moment(t.date_created).fromNow()," "),_.Lb(3),_.Ac("ngIf",t.edit_mode),_.Lb(1),_.Ac("ngIf",!t.edit_mode)}}function es(t,e){if(1&t&&(_.gc(0,"div",84),_.cd(1,Yc,4,3,"div",85),_.cd(2,ts,26,13,"div",86),_.fc()),2&t){const t=_.sc().$implicit;_.Lb(1),_.Ac("ngIf",t.comment_here_page<=t.comment_last_page),_.Lb(1),_.Ac("ngForOf",t.comments)}}function is(t,e){if(1&t){const t=_.hc();_.gc(0,"ion-card",40),_.gc(1,"ion-item",41),_.cd(2,Dc,2,0,"span",2),_.gc(3,"div",42),_.bc(4,"img",43),_.fc(),_.gc(5,"div",44),_.gc(6,"a",45),_.ed(7),_.fc(),_.gc(8,"div",46),_.ed(9),_.fc(),_.fc(),_.cd(10,qc,4,3,"div",47),_.cd(11,Ec,3,1,"button",26),_.gc(12,"mat-menu",null,48),_.gc(14,"button",8),_.oc("click",(function(){_.Sc(t);const i=e.$implicit;return _.sc(2).editPost(i)})),_.bc(15,"ion-icon",49),_.ed(16),_.tc(17,"translate"),_.fc(),_.gc(18,"button",8),_.oc("click",(function(){_.Sc(t);const i=e.$implicit,c=e.index;return _.sc(2).removePost(i,c)})),_.bc(19,"ion-icon",31),_.ed(20),_.tc(21,"translate"),_.fc(),_.fc(),_.fc(),_.gc(22,"ion-card-content"),_.bc(23,"p",50),_.cd(24,jc,5,4,"div",51),_.cd(25,Vc,6,4,"div",51),_.cd(26,Uc,6,4,"div",52),_.cd(27,Jc,8,8,"div",53),_.cd(28,es,3,2,"div",54),_.fc(),_.fc()}if(2&t){const t=e.$implicit,i=e.index,c=_.sc(2);_.Lb(1),_.Ac("id","post-resource-item-"+t.uuid),_.Lb(1),_.Ac("ngIf",c.posts.length==i+1),_.Lb(2),_.Ac("src",null!=t.user_create&&null!=t.user_create.information?t.user_create.information.image_url:c.profile_img_route,_.Vc),_.Lb(3),_.gd("",null!=t.user_create?t.user_create.name:"-"," "),_.Lb(2),_.gd(" ",c.moment(t.date_created).fromNow(),""),_.Lb(1),_.Ac("ngIf","draft"==t.status),_.Lb(1),_.Ac("ngIf",t.is_my),_.Lb(5),_.gd(" ",_.uc(17,15,"buttons.edit")," "),_.Lb(4),_.gd(" ",_.uc(21,17,"buttons.delete")," "),_.Lb(3),_.Ac("innerHTML",t.text,_.Tc),_.Lb(1),_.Ac("ngIf",t.links&&t.links.length>0),_.Lb(1),_.Ac("ngIf",t.images&&t.images.length>0),_.Lb(1),_.Ac("ngIf","1"==t.can_comment),_.Lb(1),_.Ac("ngIf","1"==t.can_comment),_.Lb(1),_.Ac("ngIf",c.is_array(t.comments))}}const cs=function(t){return{backgroundImage:t,backgroundSize:"100% 100%"}};function ss(t,e){if(1&t){const t=_.hc();_.gc(0,"ion-grid"),_.gc(1,"ion-row"),_.gc(2,"ion-col",3),_.gc(3,"ion-card"),_.gc(4,"ion-card-content",4),_.gc(5,"div",5),_.cd(6,Ac,4,4,"ion-button",6),_.gc(7,"mat-menu",null,7),_.gc(9,"button",8),_.oc("click",(function(){return _.Sc(t),_.sc().openModalThemes()})),_.bc(10,"ion-icon",9),_.ed(11),_.tc(12,"translate"),_.fc(),_.gc(13,"button",10),_.gc(14,"label",11),_.bc(15,"ion-icon",12),_.gc(16,"span"),_.ed(17),_.tc(18,"translate"),_.fc(),_.fc(),_.gc(19,"input",13),_.oc("change",(function(e){return _.Sc(t),_.sc().changeFile(e)})),_.fc(),_.fc(),_.fc(),_.gc(20,"h1",14),_.ed(21),_.gc(22,"span"),_.ed(23),_.fc(),_.ed(24),_.fc(),_.fc(),_.fc(),_.fc(),_.fc(),_.gc(25,"ion-col",15),_.cd(26,Sc,8,4,"ion-card",2),_.cd(27,Pc,28,18,"ion-card",2),_.gc(28,"ion-card"),_.gc(29,"ion-card-header"),_.gc(30,"ion-card-subtitle"),_.ed(31),_.tc(32,"translate"),_.fc(),_.fc(),_.cd(33,Mc,1,0,"ion-card-content",2),_.cd(34,Tc,4,3,"ion-card-content",2),_.fc(),_.fc(),_.gc(35,"ion-col",16),_.cd(36,Fc,1,1,"add-post",17),_.gc(37,"div",18),_.cd(38,zc,13,9,"ion-card",2),_.cd(39,is,29,19,"ion-card",19),_.fc(),_.fc(),_.fc(),_.fc()}if(2&t){const t=_.sc();_.Lb(4),_.Ac("ngStyle",_.Fc(21,cs,"url("+(t.course?t.course.theme_url:"")+")")),_.Lb(2),_.Ac("ngIf",t.course.is_my),_.Lb(5),_.gd(" ",_.uc(12,15,"pages.course.select_theme")," "),_.Lb(6),_.fd(_.uc(18,17,"pages.course.upload_picture")),_.Lb(4),_.gd("",t.course?t.course.name:"-"," "),_.Lb(2),_.gd("",t.course.section," "),_.Lb(1),_.gd("| ",t.course?t.course.subject:"-",""),_.Lb(2),_.Ac("ngIf",t.course.reference_url),_.Lb(1),_.Ac("ngIf",t.course.is_my),_.Lb(4),_.fd(_.uc(32,19,"pages.course.next_works")),_.Lb(2),_.Ac("ngIf",t.last_works.length>=0),_.Lb(1),_.Ac("ngIf",0==t.last_works.length),_.Lb(2),_.Ac("ngIf","all"==t.course.post_by||"me"==t.course.post_by&&t.course.is_my),_.Lb(2),_.Ac("ngIf",0==t.posts.length),_.Lb(1),_.Ac("ngForOf",t.posts)}}const{Clipboard:ns}=xi.c;let os=(()=>{class t{constructor(t,e,i,c,s,n,o,a,r,l,d){this.courseService=t,this.activeRoute=e,this.controlErroresService=i,this.toastService=c,this.loadingService=s,this.tourService=n,this.userData=o,this.routerOutlet=a,this.alertCtrl=r,this.modalCtrl=l,this.updateCourseEventService=d,this.totalPages=0,this.this_page=1,this.posts=[],this.profile_img_route="/assets/images/profile-8.jpg",this.user_profile="/assets/images/profile-8.jpg",this.moment=g,this.course=null,this.loading=!1,this.course_id=0,this.last_works=[],this.moment.locale("es"),g.locale("es"),this.course_id=e.snapshot.params.uuid,e.snapshot.queryParams&&e.snapshot.queryParams.ref&&e.snapshot.queryParams.ref&&(this.timerIdServer=e.snapshot.queryParams.ref),this.rxjsGlobal=d.get$().subscribe(t=>{t&&(this.course=t)})}ngOnInit(){return Object(a.b)(this,void 0,void 0,(function*(){this.getCourse(),this.intersectionObserver();let t=yield this.userData.getUser();t&&t.information&&(this.user_profile=t.information.image_url)}))}ngAfterViewInit(){this.theLastReferencePost.changes.subscribe(t=>{t.last&&this.observer.observe(t.last.nativeElement)})}getCourse(){this.loading=!0,this.courseService.course(this.course_id).subscribe(t=>{this.loading=!1,this.course=t.data,this.loadPosts(),("all"==this.course.post_by||"me"==this.course.post_by&&this.course.is_my)&&setTimeout(()=>{this.tourService.tour("form_post_welcome")},500)},t=>{this.loading=!1,this.controlErroresService.control(t)})}intersectionObserver(){this.observer=new IntersectionObserver(t=>{t[0].isIntersecting&&this.totalPages>=this.this_page&&this.loadPosts()},{root:null,rootMargin:"0px",threshold:.5})}copyCode(t){return Object(a.b)(this,void 0,void 0,(function*(){yield ns.write({string:t}),this.toastService.showToast("C\xf3digo copiado")}))}copyLink(t){return Object(a.b)(this,void 0,void 0,(function*(){yield ns.write({string:location.origin+"/"+m.h.one_course+this.course_id+"?code="+t}),this.toastService.showToast("Link copiado")}))}updateCode(t){this.loadingService.change(!0),this.courseService.update(t,this.course_id).subscribe(t=>{this.loadingService.change(!1),this.course.code=t.data.code},t=>{this.loadingService.change(!1),this.controlErroresService.control(t)})}findOneAndPusPost(t){this.courseService.getOnePost(t).subscribe(t=>{t.data&&this.posts.unshift(t.data)},t=>{})}loadPosts(t=!1){t&&(this.posts=[],this.this_page=1),this.loadingService.change(!0),this.courseService.getPostsByCourse(this.course_id,"post",this.this_page,this.timerIdServer).subscribe(t=>{this.posts=this.posts.concat(t.data),this.totalPages=t.last_page,this.loadingService.change(!1),this.this_page++},t=>{this.loadingService.change(!1),this.controlErroresService.control(t)})}submitComment(t){t.comment_input?(t.comment_upload=!0,this.courseService.commentPost(t.uuid,{text:t.comment_input}).subscribe(e=>{t.comment_input="",isNaN(t.total_comments)?t.total_comments=1:t.total_comments++,t.comment_upload=!1,Array.isArray(t.comments)&&t.comments.unshift(e.data)},e=>{t.comment_upload=!1,this.controlErroresService.control(e)})):this.toastService.presentToast("\xa1Agregue un comentario para poder publicarlo!","warning")}loadComments(t){Array.isArray(t.comments)||(t.comments=[]),t.comment_here_page||(t.comment_here_page=0),t.comment_here_page++,this.courseService.getCommentPost(t.uuid,t.comment_here_page||1).subscribe(e=>{t.comments=t.comments.concat(e.data),t.comment_here_page=e.here,t.comment_last_page=e.last_page,t.number_paginate=e.number_paginate},t=>{this.controlErroresService.control(t)})}is_array(t){return Array.isArray(t)}openModalThemes(){return Object(a.b)(this,void 0,void 0,(function*(){const t=yield this.modalCtrl.create({component:Lc,cssClass:"modal-fullscreen",swipeToClose:!0,presentingElement:this.routerOutlet.nativeEl,componentProps:{course_id:this.course_id}});yield t.present();const{data:e}=yield t.onWillDismiss();e&&(console.log(e),e.theme&&(this.course.theme=e.theme),e.theme_url&&(this.course.theme_url=e.theme_url))}))}changeFile(t){if(t.target.files&&t.target.files[0]){var e=new FileReader;if(t.target.files[0].size>1e6*v.a.max_size_img)return void this.toastService.presentToast("Peso m\xe1ximo "+v.a.max_size_img+"MB","warning");this.loadingService.change(!0),this.courseService.uploadTheme(Object(m.c)({image:t.target.files[0],default_null:1}),this.course_id).subscribe(t=>{this.loadingService.change(!1),this.course.theme_url=t.data.theme_url},t=>{this.loadingService.change(!1),this.controlErroresService.control(t)}),e.readAsDataURL(t.target.files[0])}}removePost(t,e){return Object(a.b)(this,void 0,void 0,(function*(){const i=yield this.alertCtrl.create({header:"Eliminar",message:"\xbfDesea eliminar este post?",buttons:[{text:"Cancelar",role:"cancel"},{text:"Eliminar",role:"destructive",handler:()=>{this.loadingService.change(!0),this.courseService.deletePost(t.uuid).subscribe(t=>{this.loadingService.change(!1),this.posts.splice(e,1),this.toastService.presentToast(t.message,t.status)},t=>{this.loadingService.change(!1),this.controlErroresService.control(t)})}}]});yield i.present()}))}removeComment(t,e,i){return Object(a.b)(this,void 0,void 0,(function*(){const c=yield this.alertCtrl.create({header:"Eliminar",message:"\xbfDesea eliminar este comentario?",buttons:[{text:"Cancelar",role:"cancel"},{text:"Eliminar",role:"destructive",handler:()=>{this.loadingService.change(!0),this.courseService.deleteCommentPost(e.uuid).subscribe(e=>{this.loadingService.change(!1),t.comments.splice(i,1),isNaN(t.total_comments)||t.total_comments--,this.toastService.presentToast(e.message,e.status)},t=>{this.loadingService.change(!1),this.controlErroresService.control(t)})}}]});yield c.present()}))}updateComment(t){t.aux_text&&(t.comment_upload=!0,this.courseService.updateCommentPost(t.uuid,{text:t.aux_text}).subscribe(e=>{t.comment_upload=!1,t.text=t.aux_text,this.toastService.presentToast(e.message,e.status),t.edit_mode=!1},e=>{t.comment_upload=!1,this.controlErroresService.control(e)}))}enableModeEdit(t){t.aux_text=t.text,t.edit_mode=!0}editPost(t){return Object(a.b)(this,void 0,void 0,(function*(){const e=yield this.modalCtrl.create({component:Oe,cssClass:"modal-fullscreen",swipeToClose:!0,presentingElement:this.routerOutlet.nativeEl,componentProps:{post_id:t.uuid}});yield e.present();const{data:i}=yield e.onWillDismiss();console.log(i),i&&(t.text=i.text,t.date_created=i.date_created,t.can_comment=i.can_comment,t.images=i.images,t.status=i.status,t.total_comments=i.total_comments,t.links=i.links,t.type=i.type)}))}}return t.\u0275fac=function(e){return new(e||t)(_.ac(d.a),_.ac(o.a),_.ac(l.a),_.ac(b.a),_.ac(u.a),_.ac(h.a),_.ac(p.a),_.ac(n.fb),_.ac(n.b),_.ac(n.Db),_.ac(xc.a))},t.\u0275cmp=_.Ub({type:t,selectors:[["app-course-posts"]],viewQuery:function(t,e){var i;1&t&&_.ld(wc,!0,_.o),2&t&&_.Nc(i=_.pc())&&(e.theLastReferencePost=i)},decls:4,vars:1,consts:[[1,"flex","flex-center"],["size","12","size-sm","11","size-md","10","size-xl","9"],[4,"ngIf"],["size","12"],[3,"ngStyle"],[1,"overflow-hidden","mxh-240px","relative","font-image-bck-theme"],["size","small","color","light",3,"matMenuTriggerFor",4,"ngIf"],["menu_personalize","matMenu"],["mat-menu-item","",3,"click"],["name","color-palette-outline"],["mat-menu-item",""],["for","input-file-course-item-upload",2,"color","var(--ion-color-dark)"],["name","cloud-upload-outline"],["type","file","accept","image/*","id","input-file-course-item-upload",1,"d-none","hidden",3,"change"],[1,"bold-w-9","text-white","abs-bottom-left",2,"font-size","3em"],["size","12","size-sm","4","size-md","4","size-xl","3"],["size","12","size-sm","8","size-md","8","size-xl","9",1,"container-add-post"],[3,"course_id","uuidCreate",4,"ngIf"],[1,"all-postss","container-add-post-show-posts"],["class","mt-2",4,"ngFor","ngForOf"],["size","small","color","light",3,"matMenuTriggerFor"],["name","caret-down-outline"],[1,"flex"],["target","_blank",1,"p-3","cursor-pointer","transition","duration-300","ease-in-out","dark:bg-dark-3","hover:bg-gray-200","dark:hover:bg-dark-1","rounded-md",3,"href"],["name","laptop-outline"],[2,"margin-left","10px"],["mat-button","",3,"matMenuTriggerFor",4,"ngIf"],["menu","matMenu"],["name","link-outline"],["name","copy-outline"],["name","refresh-outline"],["name","trash-outline"],["mat-button","",3,"matMenuTriggerFor"],["focusable","false","width","24","height","24","viewBox","0 0 24 24",1,"NMm5M"],["d","M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"],[3,"click"],[3,"course_id","uuidCreate"],[2,"color","var(--ion-color-primary)"],["name","chatbox-outline"],["name","chatbox-ellipses-outline"],[1,"mt-2"],[3,"id"],[1,"w-10","h-10","flex-none","image-fit"],["alt","--",1,"rounded-full",3,"src"],[1,"ml-3","mr-auto"],["href","javascript:void(0)",1,"font-medium"],[1,"flex","text-gray-600","truncate","text-xs","mt-0.5"],["class"," h-10 flex-none",4,"ngIf"],["menuPost","matMenu"],["name","create-outline"],[3,"innerHTML"],["class","border-2 border-dashed dark:border-dark-5 rounded-md pt-4","style","margin-top: 10px;",4,"ngIf"],["class","w-full flex text-gray-600 text-xs sm:text-sm mt-1",4,"ngIf"],["class","w-full flex items-center mt-3",4,"ngIf"],["class","intro-y mt-5 pb-10",4,"ngIf"],["theLastReferencePost",""],[1,"h-10","flex-none"],[1,"badge","badge-warning"],[1,"border-2","border-dashed","dark:border-dark-5","rounded-md","pt-4",2,"margin-top","10px"],[1,"ml-1",2,"margin","0","padding-left","20px"],["class","pos__ticket box p-2",4,"ngFor","ngForOf"],[1,"pos__ticket","box","p-2"],["href","javascript:;","data-toggle","modal","data-target","#add-item-modal",1,"flex","items-center","p-3","cursor-pointer","transition","duration-300","ease-in-out","dark:bg-dark-3","hover:bg-gray-200","dark:hover:bg-dark-1","rounded-md"],[1,"pos__ticket__item-name","truncate","mr-1"],["target","_blank",3,"href"],[2,"margin","0","padding-left","20px"],[1,"flex","flex-wrap","px-4"],["target","_blank","class","w-24 h-24 relative image-fit mb-5 mr-5 cursor-pointer zoom-in","tooltip","Call","navTooltip","",3,"href","matTooltip",4,"ngFor","ngForOf"],["target","_blank","tooltip","Call","navTooltip","",1,"w-24","h-24","relative","image-fit","mb-5","mr-5","cursor-pointer","zoom-in",3,"href","matTooltip"],["class","rounded-md","alt","Imagen",3,"src",4,"ngIf"],["class","rounded-md","alt","File","src","/assets/img/document-file-icon.png",4,"ngIf"],["alt","Imagen",1,"rounded-md",3,"src"],["alt","File","src","/assets/img/document-file-icon.png",1,"rounded-md"],[1,"w-full","flex","text-gray-600","text-xs","sm:text-sm","mt-1"],[1,"mr-2","c-pointer",3,"click"],[1,"font-medium"],[1,"w-full","flex","items-center","mt-3"],[1,"w-8","h-8","flex-none","image-fit","mr-3"],[1,"flex-1","relative","text-gray-700"],["type","text",1,"form-control","form-control-rounded","border-transparent","bg-gray-200","pr-10","placeholder-theme-13",3,"disabled","ngModel","placeholder","ngModelChange","keyup.enter"],["name","send-outline","class","c-pointer absolute my-auto inset-y-0 mr-3 right-0","fill","outline",3,"matTooltip","click",4,"ngIf"],["name","cloud-upload-outline","class","c-pointer absolute my-auto inset-y-0 mr-3 right-0","fill","outline",4,"ngIf"],["name","send-outline","fill","outline",1,"c-pointer","absolute","my-auto","inset-y-0","mr-3","right-0",3,"matTooltip","click"],["name","cloud-upload-outline","fill","outline",1,"c-pointer","absolute","my-auto","inset-y-0","mr-3","right-0"],[1,"intro-y","mt-5","pb-10"],["class","flex items-center c-pointer",3,"click",4,"ngIf"],["class","pt-5",4,"ngFor","ngForOf"],[1,"flex","items-center","c-pointer",3,"click"],[1,"pt-5"],[1,"w-10","h-10","sm:w-12","sm:h-12","flex-none","image-fit"],[1,"rounded-full",3,"alt","src"],[1,"ml-3","flex-1"],[1,"flex","items-center"],["href","",1,"ml-auto","text-xs","text-gray-600"],["menuCommentPost","matMenu"],[1,"text-gray-600","text-xs","sm:text-sm"],["class","flex-1 relative text-gray-700",4,"ngIf"],[3,"innerHTML",4,"ngIf"]],template:function(t,e){1&t&&(_.gc(0,"ion-grid"),_.gc(1,"ion-row",0),_.gc(2,"ion-col",1),_.cd(3,ss,40,23,"ion-grid",2),_.fc(),_.fc(),_.fc()),2&t&&(_.Lb(3),_.Ac("ngIf",e.course))},directives:[n.A,n.gb,n.t,c.t,n.m,n.n,c.w,C.e,C.b,n.C,n.o,n.p,c.s,n.k,C.d,n.N,I.b,n.q,Gi,n.H,O.a,s.c,s.r,s.u],pipes:[P.d],styles:["[type=radio][_ngcontent-%COMP%]{position:absolute;opacity:0;width:0;height:0}[type=radio][_ngcontent-%COMP%] + img[_ngcontent-%COMP%]{cursor:pointer}[type=radio][_ngcontent-%COMP%]:checked + img[_ngcontent-%COMP%]{outline:2px solid red}"]}),t})();var as=i("OMi/"),rs=i("Iab2");function ls(t,e){if(1&t&&(_.ec(0),_.gc(1,"th",9),_.gc(2,"ion-label",10),_.ed(3),_.fc(),_.fc(),_.dc()),2&t){const t=_.sc().$implicit;_.Lb(1),_.Ac("colSpan",t.span),_.Lb(2),_.fd(t.title)}}function ds(t,e){if(1&t&&(_.ec(0),_.cd(1,ls,4,2,"ng-container",8),_.dc()),2&t){const t=e.$implicit;_.Lb(1),_.Ac("ngIf",t.span>0&&t.blocks&&t.blocks.length>0)}}function us(t,e){if(1&t&&(_.ec(0),_.gc(1,"th",9),_.gc(2,"p",10),_.ed(3),_.fc(),_.fc(),_.dc()),2&t){const t=_.sc().$implicit;_.Lb(1),_.Ac("colSpan",t.span),_.Lb(2),_.fd(t.title)}}function gs(t,e){if(1&t&&(_.ec(0),_.cd(1,us,4,2,"ng-container",8),_.dc()),2&t){const t=e.$implicit;_.Lb(1),_.Ac("ngIf",t.span>0)}}function ms(t,e){if(1&t&&(_.ec(0),_.cd(1,gs,2,1,"ng-container",7),_.dc()),2&t){const t=_.sc().$implicit;_.Lb(1),_.Ac("ngForOf",t.blocks)}}function fs(t,e){if(1&t&&(_.ec(0),_.cd(1,ms,2,1,"ng-container",8),_.dc()),2&t){const t=e.$implicit;_.Lb(1),_.Ac("ngIf",t.span>0&&t.blocks&&t.blocks.length>0)}}function hs(t,e){if(1&t&&(_.ec(0),_.gc(1,"th",11),_.gc(2,"p",10),_.ed(3),_.fc(),_.fc(),_.dc()),2&t){const t=_.sc().$implicit;_.Lb(1),_.Ac("colSpan",t.span),_.Lb(2),_.fd(t.title)}}function ps(t,e){if(1&t&&(_.ec(0),_.cd(1,hs,4,2,"ng-container",8),_.dc()),2&t){const t=e.$implicit;_.Lb(1),_.Ac("ngIf",t.span>0)}}function bs(t,e){if(1&t&&(_.ec(0),_.cd(1,ps,2,1,"ng-container",7),_.dc()),2&t){const t=_.sc().$implicit;_.Lb(1),_.Ac("ngForOf",t.themes_activity)}}function vs(t,e){if(1&t&&(_.ec(0),_.cd(1,bs,2,1,"ng-container",8),_.dc()),2&t){const t=e.$implicit;_.Lb(1),_.Ac("ngIf",t.span>0&&t.themes_activity&&t.themes_activity.length>0)}}function _s(t,e){if(1&t&&(_.ec(0),_.cd(1,vs,2,1,"ng-container",7),_.dc()),2&t){const t=_.sc().$implicit;_.Lb(1),_.Ac("ngForOf",t.blocks)}}function ys(t,e){if(1&t&&(_.ec(0),_.cd(1,_s,2,1,"ng-container",8),_.dc()),2&t){const t=e.$implicit;_.Lb(1),_.Ac("ngIf",t.span>0&&t.blocks&&t.blocks.length>0)}}function ks(t,e){if(1&t&&(_.ec(0),_.gc(1,"th"),_.gc(2,"a",12),_.ed(3),_.fc(),_.fc(),_.dc()),2&t){const t=e.$implicit,i=_.sc(9);_.Lb(2),_.Ac("routerLink",i.route_activity+t.uuid),_.Lb(1),_.fd(t.title)}}function Ls(t,e){if(1&t&&(_.ec(0),_.cd(1,ks,4,2,"ng-container",7),_.dc()),2&t){const t=_.sc().$implicit;_.Lb(1),_.Ac("ngForOf",t.activities)}}function xs(t,e){if(1&t&&(_.ec(0),_.cd(1,Ls,2,1,"ng-container",8),_.dc()),2&t){const t=e.$implicit;_.Lb(1),_.Ac("ngIf",t.span>0&&t.activities&&t.activities.length>0)}}function ws(t,e){if(1&t&&(_.ec(0),_.cd(1,xs,2,1,"ng-container",7),_.dc()),2&t){const t=_.sc().$implicit;_.Lb(1),_.Ac("ngForOf",t.themes_activity)}}function As(t,e){if(1&t&&(_.ec(0),_.cd(1,ws,2,1,"ng-container",8),_.dc()),2&t){const t=e.$implicit;_.Lb(1),_.Ac("ngIf",t.themes_activity&&t.themes_activity.length>0)}}function Ss(t,e){if(1&t&&(_.ec(0),_.cd(1,As,2,1,"ng-container",7),_.dc()),2&t){const t=_.sc().$implicit;_.Lb(1),_.Ac("ngForOf",t.blocks)}}function Cs(t,e){if(1&t&&(_.ec(0),_.cd(1,Ss,2,1,"ng-container",8),_.dc()),2&t){const t=e.$implicit;_.Lb(1),_.Ac("ngIf",t.blocks&&t.blocks.length>0)}}function Is(t,e){if(1&t&&(_.gc(0,"tr"),_.cd(1,Cs,2,1,"ng-container",7),_.fc()),2&t){const t=_.sc(2);_.Lb(1),_.Ac("ngForOf",t.dataHeader)}}function Os(t,e){if(1&t){const t=_.hc();_.ec(0),_.gc(1,"td",18),_.gc(2,"div",19),_.gc(3,"ion-label",20),_.ed(4),_.fc(),_.rc(),_.gc(5,"svg",21),_.bc(6,"path",22),_.fc(),_.qc(),_.gc(7,"mat-menu",null,23),_.gc(9,"button",24),_.oc("click",(function(){_.Sc(t);const e=_.sc().$implicit;return _.sc(6).openInNewWindow(e.activity_uuid,e.uuid)})),_.bc(10,"ion-icon",25),_.ed(11),_.tc(12,"translate"),_.fc(),_.fc(),_.fc(),_.fc(),_.dc()}if(2&t){const t=_.Oc(8),e=_.sc().$implicit;_.Lb(4),_.fd(e.qualification),_.Lb(1),_.Ac("matMenuTriggerFor",t),_.Lb(6),_.gd(" ",_.uc(12,3,"buttons.show_delivered")," ")}}function Ps(t,e){1&t&&(_.ec(0),_.gc(1,"td",18),_.gc(2,"div",19),_.ed(3),_.tc(4,"translate"),_.fc(),_.fc(),_.dc()),2&t&&(_.Lb(3),_.gd(" ",_.uc(4,1,"pages.course.not_assigned")," "))}function Ms(t,e){if(1&t&&(_.ec(0),_.cd(1,Os,13,5,"ng-container",8),_.cd(2,Ps,5,3,"ng-container",8),_.dc()),2&t){const t=e.$implicit;_.Lb(1),_.Ac("ngIf",null!=t),_.Lb(1),_.Ac("ngIf",null==t)}}function Ts(t,e){if(1&t&&(_.ec(0),_.cd(1,Ms,3,2,"ng-container",7),_.dc()),2&t){const t=e.$implicit;_.Lb(1),_.Ac("ngForOf",t.assignments)}}function Fs(t,e){if(1&t&&(_.ec(0),_.cd(1,Ts,2,1,"ng-container",7),_.dc()),2&t){const t=e.$implicit;_.Lb(1),_.Ac("ngForOf",t.list_themes)}}function zs(t,e){if(1&t&&(_.ec(0),_.cd(1,Fs,2,1,"ng-container",7),_.dc()),2&t){const t=e.$implicit;_.Lb(1),_.Ac("ngForOf",t.blocks)}}function Ds(t,e){if(1&t&&(_.gc(0,"tr"),_.gc(1,"td",13),_.gc(2,"ion-item"),_.gc(3,"div",14),_.bc(4,"img",15),_.fc(),_.gc(5,"div",16),_.gc(6,"a",17),_.ed(7),_.fc(),_.fc(),_.fc(),_.fc(),_.cd(8,zs,2,1,"ng-container",7),_.fc()),2&t){const t=e.$implicit,i=_.sc(2);_.Lb(4),_.Ac("src",null!=t&&null!=t.information?t.information.image_url:i.profile_img_route,_.Vc),_.Lb(3),_.hd("",t.last_name," ",t.first_name," "),_.Lb(1),_.Ac("ngForOf",t.semesters)}}function qs(t,e){if(1&t&&(_.gc(0,"table",4),_.gc(1,"thead"),_.gc(2,"tr"),_.gc(3,"th",5),_.gc(4,"p",6),_.ed(5),_.tc(6,"translate"),_.fc(),_.fc(),_.cd(7,ds,2,1,"ng-container",7),_.fc(),_.gc(8,"tr"),_.cd(9,fs,2,1,"ng-container",7),_.fc(),_.gc(10,"tr"),_.cd(11,ys,2,1,"ng-container",7),_.fc(),_.cd(12,Is,2,1,"tr",8),_.fc(),_.gc(13,"tbody"),_.cd(14,Ds,9,4,"tr",7),_.fc(),_.fc()),2&t){const t=_.sc();_.Lb(5),_.fd(_.uc(6,6,"pages.course.students")),_.Lb(2),_.Ac("ngForOf",t.dataHeader),_.Lb(2),_.Ac("ngForOf",t.dataHeader),_.Lb(2),_.Ac("ngForOf",t.dataHeader),_.Lb(1),_.Ac("ngIf",t.show_activities),_.Lb(2),_.Ac("ngForOf",t.dataBody)}}function Es(t,e){if(1&t&&(_.ec(0),_.gc(1,"th",11),_.gc(2,"p",10),_.ed(3),_.fc(),_.fc(),_.dc()),2&t){const t=_.sc().$implicit;_.Lb(1),_.Ac("colSpan",t.span),_.Lb(2),_.fd(t.title)}}function $s(t,e){if(1&t&&(_.ec(0),_.cd(1,Es,4,2,"ng-container",8),_.dc()),2&t){const t=e.$implicit;_.Lb(1),_.Ac("ngIf",t.span>0)}}function js(t,e){if(1&t&&(_.ec(0),_.gc(1,"th"),_.gc(2,"a",12),_.ed(3),_.fc(),_.fc(),_.dc()),2&t){const t=e.$implicit,i=_.sc(3);_.Lb(2),_.Ac("routerLink",i.route_activity+t.uuid),_.Lb(1),_.fd(t.title)}}function Bs(t,e){if(1&t&&(_.ec(0),_.cd(1,js,4,2,"ng-container",7),_.dc()),2&t){const t=e.$implicit;_.Lb(1),_.Ac("ngForOf",t.activities)}}function Rs(t,e){if(1&t){const t=_.hc();_.ec(0),_.gc(1,"td",18),_.gc(2,"div",19),_.gc(3,"ion-label",20),_.ed(4),_.fc(),_.rc(),_.gc(5,"svg",21),_.bc(6,"path",22),_.fc(),_.qc(),_.gc(7,"mat-menu",null,23),_.gc(9,"button",24),_.oc("click",(function(){_.Sc(t);const e=_.sc().$implicit;return _.sc(4).openInNewWindow(e.activity_uuid,e.uuid)})),_.bc(10,"ion-icon",25),_.ed(11),_.tc(12,"translate"),_.fc(),_.fc(),_.fc(),_.fc(),_.dc()}if(2&t){const t=_.Oc(8),e=_.sc().$implicit;_.Lb(4),_.fd(e.qualification),_.Lb(1),_.Ac("matMenuTriggerFor",t),_.Lb(6),_.gd(" ",_.uc(12,3,"buttons.show_delivered")," ")}}function Qs(t,e){1&t&&(_.ec(0),_.gc(1,"td",18),_.gc(2,"div",19),_.ed(3),_.tc(4,"translate"),_.fc(),_.fc(),_.dc()),2&t&&(_.Lb(3),_.gd(" ",_.uc(4,1,"pages.course.not_assigned")," "))}function Vs(t,e){if(1&t&&(_.ec(0),_.cd(1,Rs,13,5,"ng-container",8),_.cd(2,Qs,5,3,"ng-container",8),_.dc()),2&t){const t=e.$implicit;_.Lb(1),_.Ac("ngIf",null!=t),_.Lb(1),_.Ac("ngIf",null==t)}}function Us(t,e){if(1&t&&(_.ec(0),_.cd(1,Vs,3,2,"ng-container",7),_.dc()),2&t){const t=e.$implicit;_.Lb(1),_.Ac("ngForOf",t.assignments)}}function Ns(t,e){if(1&t&&(_.gc(0,"tr"),_.gc(1,"td",13),_.gc(2,"ion-item"),_.gc(3,"div",14),_.bc(4,"img",15),_.fc(),_.gc(5,"div",16),_.gc(6,"a",17),_.ed(7),_.fc(),_.fc(),_.fc(),_.fc(),_.cd(8,Us,2,1,"ng-container",7),_.fc()),2&t){const t=e.$implicit,i=_.sc(2);_.Lb(4),_.Ac("src",null!=t&&null!=t.information?t.information.image_url:i.profile_img_route,_.Vc),_.Lb(3),_.hd("",t.last_name," ",t.first_name," "),_.Lb(1),_.Ac("ngForOf",t.list_themes)}}function Hs(t,e){if(1&t&&(_.gc(0,"table",4),_.gc(1,"thead"),_.gc(2,"tr"),_.gc(3,"th",26),_.gc(4,"p",6),_.ed(5),_.tc(6,"translate"),_.fc(),_.fc(),_.cd(7,$s,2,1,"ng-container",7),_.fc(),_.gc(8,"tr"),_.cd(9,Bs,2,1,"ng-container",7),_.fc(),_.fc(),_.gc(10,"tbody"),_.cd(11,Ns,9,4,"tr",7),_.fc(),_.fc()),2&t){const t=_.sc();_.Lb(5),_.fd(_.uc(6,4,"pages.course.students")),_.Lb(2),_.Ac("ngForOf",t.dataHeader),_.Lb(2),_.Ac("ngForOf",t.dataHeader),_.Lb(2),_.Ac("ngForOf",t.dataBody)}}let Js=(()=>{class t{constructor(t,e,i,c,s,n){this.activeRoute=t,this.activitiesService=e,this.controlErroresService=i,this.loadingService=c,this.router=s,this.sizePanelService=n,this.displayedColumns=["position","name","weight","symbol","symbol_1","symbol_2","symbol_3","symbol_4","symbol_5","other","other2","other3","other4"],this.dataSource=[{position:1,name:"Hydrogen",weight:1.0079,symbol:"DJADJDAJ ADJDAJ",symbol_1:"DJADJDAJ ADJDAJ",symbol_2:"DJADJDAJ ADJDAJ",symbol_3:"DJADJDAJ ADJDAJ",symbol_4:"DJADJDAJ ADJDAJ",symbol_5:"DJADJDAJ ADJDAJ",other:"DJADJDAJ ADJDAJ",other2:"DJADJDAJ ADJDAJ",other3:"DJADJDAJ ADJDAJ",other4:"DJADJDAJ ADJDAJ"}],this.show_activities=!0,this.route_activity=m.h.show_activity,this.course_id=null,this.dataHeader=[],this.dataBody=[],this.modeShowQualifications="no_loaded",this.loading=!1,this.profile_img_route="/assets/images/profile-8.jpg",this.course_id=t.snapshot.params.uuid,this.route_activity=this.route_activity.replace(":id",""+this.course_id).replace(":id",""+this.course_id),this.sizePanelService.changeSizePanel("2000px"),t.snapshot.queryParams&&t.snapshot.queryParams.ref&&t.snapshot.queryParams.ref&&(this.timerIdServer=t.snapshot.queryParams.ref)}ngOnInit(){this.getQualifications()}ngOnDestroy(){this.sizePanelService.changeSizePanel("lg")}getQualifications(){this.loadingService.change(!0),this.loading=!1,this.activitiesService.getQualifications(this.course_id,this.timerIdServer).subscribe(t=>{this.modeShowQualifications=t.mode,this.dataHeader=t.headers,this.dataBody=t.integrants,this.loading=!1,this.loadingService.change(!1)},t=>{this.controlErroresService.control(t),this.loadingService.change(!1),this.loading=!1})}exportQualifications(){this.loadingService.change(!0),this.loading=!1,this.activitiesService.exportQualifications(this.course_id).subscribe(t=>{this.loading=!1,this.loadingService.change(!1);const e=new Blob([t],{type:t.type});var i=this.toExportFileName("Calificaciones","xlsx");Object(rs.saveAs)(e,i)},t=>{this.controlErroresService.control(t),this.loadingService.change(!1),this.loading=!1})}toExportFileName(t,e){return`${t}_${(new Date).getTime()}.${e}`}openInNewWindow(t,e){const i=this.router.serializeUrl(this.router.createUrlTree([`/app/main/course/${this.course_id}/${this.course_id}/activities/details/${t}/${e}`]));window.open(i,"_blank")}}return t.\u0275fac=function(e){return new(e||t)(_.ac(o.a),_.ac(r.a),_.ac(l.a),_.ac(u.a),_.ac(o.f),_.ac(as.a))},t.\u0275cmp=_.Ub({type:t,selectors:[["app-course-qualifications"]],decls:8,vars:5,consts:[[2,"width","100%","overflow-x","auto"],["class","table table-bordered","border","1",4,"ngIf"],["size","small","color","success",3,"click"],["name","download-outline"],["border","1",1,"table","table-bordered"],["rowspan","4",1,"sticky-col"],[1,"flex","flex-center","m-0","p-0"],[4,"ngFor","ngForOf"],[4,"ngIf"],["scope","col",1,"text-center",3,"colSpan"],[1,"m-0","p-0"],[1,"text-center",3,"colSpan"],["href","javascript:void(0)",3,"routerLink"],[1,"p-0","sticky-col"],[1,"w-10","h-10","flex-none","image-fit"],["alt","--",1,"rounded-full",3,"src"],[1,"ml-3",2,"min-width","200px"],["href","javascript:void(0)",1,"font-medium"],[1,"p-0"],[1,"m-auto","flex","flex-center"],[1,"text-center"],["mat-button","","focusable","false","width","24","height","24","viewBox","0 0 24 24",1,"NMm5M","c-pointer",3,"matMenuTriggerFor"],["d","M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"],["menuPost","matMenu"],["mat-menu-item","",3,"click"],["name","create-outline"],["rowspan","2",1,"sticky-col"]],template:function(t,e){1&t&&(_.gc(0,"div",0),_.cd(1,qs,15,8,"table",1),_.fc(),_.gc(2,"div",0),_.cd(3,Hs,12,6,"table",1),_.gc(4,"ion-button",2),_.oc("click",(function(){return e.exportQualifications()})),_.bc(5,"ion-icon",3),_.ed(6),_.tc(7,"translate"),_.fc(),_.fc()),2&t&&(_.Lb(1),_.Ac("ngIf","semesters"==e.modeShowQualifications&&!e.loading),_.Lb(2),_.Ac("ngIf","themes"==e.modeShowQualifications&&!e.loading),_.Lb(3),_.gd(" ",_.uc(7,3,"buttons.export"),""))},directives:[c.t,n.k,n.C,c.s,n.N,o.i,n.Kb,n.H,C.d,C.e,C.b],pipes:[P.d],styles:[".table[_ngcontent-%COMP%]{color:var(--color)!important}.c-pointer[_ngcontent-%COMP%]{cursor:pointer}.sticky-col[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;background-color:#fff}"]}),t})();var Ys=i("3WHO"),Ws=i("YTC1"),Gs=i("g31X");function Ks(t,e){1&t&&(_.ec(0),_.ed(1," PROHIBIDO\n"),_.dc())}const Xs=function(t){return{height:t}};function Zs(t,e){if(1&t&&(_.gc(0,"td",20),_.gc(1,"div",21),_.bc(2,"div",22),_.gc(3,"div",23),_.tc(4,"formatTimeStr"),_.ed(5," ."),_.fc(),_.gc(6,"p",24),_.ed(7),_.fc(),_.gc(8,"p",24),_.ed(9),_.tc(10,"formatTimeStr"),_.fc(),_.fc(),_.fc()),2&t){const t=e.$implicit,i=_.sc().$implicit,c=_.sc(3);_.Lb(2),_.Ac("ngStyle",_.Fc(10,Xs,300-t.avg_height)),_.Lb(1),_.Ac("ngStyle",_.Fc(12,Xs,t.avg_height+"px"))("matTooltip",_.uc(4,5,t.time_avg)),_.Lb(4),_.fd("month"==i.mode?c.moment(t.date,"YYYY-MM").format("MMM-YYYY"):t.day_of_weeK),_.Lb(2),_.fd(_.vc(10,7,t.time_avg,"minimal"))}}function tn(t,e){if(1&t&&(_.ec(0),_.gc(1,"ion-col",15),_.gc(2,"ion-card"),_.gc(3,"ion-card-content",16),_.gc(4,"h3",17),_.ed(5),_.fc(),_.gc(6,"ion-grid"),_.gc(7,"ion-row"),_.gc(8,"ion-col",18),_.gc(9,"p"),_.ed(10),_.tc(11,"translate"),_.gc(12,"strong"),_.ed(13),_.fc(),_.ed(14,": "),_.gc(15,"strong"),_.ed(16),_.tc(17,"formatTimeStr"),_.fc(),_.fc(),_.fc(),_.fc(),_.fc(),_.gc(18,"table",3),_.gc(19,"tr"),_.cd(20,Zs,11,14,"td",19),_.fc(),_.fc(),_.fc(),_.fc(),_.fc(),_.dc()),2&t){const t=e.$implicit;_.Lb(1),_.Ac("size",t.sizes?t.sizes.size:"12")("sizeSm",t.sizes?t.sizes.sm:"12")("sizeMd",t.sizes?t.sizes.md:"12")("sizeLg",t.sizes?t.sizes.lg:"12"),_.Lb(4),_.fd(t.title),_.Lb(5),_.gd("",_.uc(11,9,"pages.reports.avg_this_year")," "),_.Lb(3),_.fd(t.this_year),_.Lb(3),_.fd(_.uc(17,11,t.avg_time)),_.Lb(4),_.Ac("ngForOf",t.time_week)}}function en(t,e){if(1&t&&(_.gc(0,"ion-grid"),_.gc(1,"ion-row"),_.cd(2,tn,21,13,"ng-container",14),_.fc(),_.fc()),2&t){const t=_.sc(2);_.Lb(2),_.Ac("ngForOf",t.timerGraph.items)}}function cn(t,e){1&t&&_.bc(0,"card-load-animation",25),2&t&&_.Ac("count",1)("all_width",!0)}function sn(t,e){1&t&&_.bc(0,"card-load-animation",25),2&t&&_.Ac("count",1)("all_width",!0)}function nn(t,e){1&t&&_.bc(0,"card-load-animation",25),2&t&&_.Ac("count",1)("all_width",!0)}function on(t,e){1&t&&(_.gc(0,"h2",17),_.ed(1),_.tc(2,"translate"),_.fc()),2&t&&(_.Lb(1),_.fd(_.uc(2,1,"forms.no_data")))}function an(t,e){if(1&t&&(_.gc(0,"ion-col",28),_.gc(1,"ion-card",7),_.gc(2,"ion-card-header"),_.gc(3,"ion-card-title"),_.ed(4),_.tc(5,"translate"),_.fc(),_.fc(),_.gc(6,"ion-card-content",8),_.cd(7,nn,1,2,"card-load-animation",9),_.gc(8,"div",10),_.gc(9,"canvas",11),_.ed(10),_.fc(),_.fc(),_.cd(11,on,3,3,"h2",29),_.fc(),_.fc(),_.fc()),2&t){const t=e.$implicit,i=_.sc(3);_.Lb(4),_.gd(" ",_.uc(5,6,t.title)," "),_.Lb(3),_.Ac("ngIf",i.loading||i.loadingChartsSecond&&null==t.chart_graph),_.Lb(1),_.Ac("ngClass",i.loading||null==t.chart_graph||0==t.data.length?"d-none":""),_.Lb(1),_.Ac("id",t._id),_.Lb(1),_.fd(t.chart_graph),_.Lb(1),_.Ac("ngIf",0==t.data.length)}}function rn(t,e){if(1&t&&(_.gc(0,"ion-row"),_.gc(1,"ion-col",18),_.gc(2,"h3",26),_.ed(3),_.tc(4,"translate"),_.fc(),_.fc(),_.cd(5,an,12,8,"ion-col",27),_.fc()),2&t){const t=e.$implicit;_.Lb(3),_.fd(_.uc(4,2,t.title)),_.Lb(2),_.Ac("ngForOf",t.items)}}function ln(t,e){if(1&t&&(_.ec(0),_.cd(1,en,3,1,"ion-grid",0),_.gc(2,"mat-expansion-panel",1),_.gc(3,"mat-expansion-panel-header",2),_.gc(4,"mat-panel-title"),_.gc(5,"ion-item",3),_.bc(6,"ion-icon",4),_.ed(7),_.tc(8,"translate"),_.tc(9,"translate"),_.fc(),_.fc(),_.fc(),_.gc(10,"ion-grid"),_.gc(11,"ion-row"),_.gc(12,"ion-col"),_.bc(13,"filters-course",5),_.fc(),_.fc(),_.gc(14,"ion-row"),_.gc(15,"ion-col",6),_.gc(16,"ion-card",7),_.gc(17,"ion-card-header"),_.gc(18,"ion-card-title"),_.ed(19),_.tc(20,"translate"),_.fc(),_.fc(),_.gc(21,"ion-card-content",8),_.cd(22,cn,1,2,"card-load-animation",9),_.gc(23,"div",10),_.gc(24,"canvas",11),_.ed(25),_.fc(),_.fc(),_.fc(),_.fc(),_.fc(),_.gc(26,"ion-col",6),_.gc(27,"ion-card",7),_.gc(28,"ion-card-header"),_.gc(29,"ion-card-title"),_.ed(30),_.tc(31,"translate"),_.fc(),_.fc(),_.gc(32,"ion-card-content",8),_.cd(33,sn,1,2,"card-load-animation",9),_.gc(34,"div",10),_.gc(35,"canvas",11),_.ed(36),_.fc(),_.fc(),_.fc(),_.fc(),_.fc(),_.fc(),_.fc(),_.fc(),_.gc(37,"mat-expansion-panel",1),_.gc(38,"mat-expansion-panel-header",2),_.gc(39,"mat-panel-title"),_.gc(40,"ion-item",3),_.bc(41,"ion-icon",12),_.ed(42),_.tc(43,"translate"),_.fc(),_.fc(),_.fc(),_.gc(44,"div"),_.bc(45,"filters-course",13),_.gc(46,"ion-grid"),_.cd(47,rn,6,4,"ion-row",14),_.fc(),_.fc(),_.fc(),_.dc()),2&t){const t=_.sc();_.Lb(1),_.Ac("ngIf",t.timerGraph&&t.timerGraph.items),_.Lb(6),_.hd(" ",_.uc(8,21,"pages.reports.title_evolution_time")," ",_.uc(9,23,"pages.reports.of_the_course")," "),_.Lb(6),_.Ac("required",t.allowFilters)("course_id",t.course_id)("buttons",t.buttons_all),_.Lb(6),_.gd(" ",_.uc(20,25,"pages.reports.activities_qualificated")," "),_.Lb(3),_.Ac("ngIf",t.loading||t.loadingCharts&&null==t.charts.course_qualificated),_.Lb(1),_.Ac("ngClass",t.loading||null==t.charts.course_qualificated?"d-none":""),_.Lb(1),_.Ac("id","chart_course_qualificated"),_.Lb(1),_.fd(t.charts.course_qualificated),_.Lb(5),_.gd(" ",_.uc(31,27,"pages.reports.activities_unqualified")," "),_.Lb(3),_.Ac("ngIf",t.loading||t.loadingCharts&&null==t.charts.course_unqualified),_.Lb(1),_.Ac("ngClass",t.loading||null==t.charts.course_unqualified?"d-none":""),_.Lb(1),_.Ac("id","chart_course_unqualified"),_.Lb(1),_.fd(t.charts.course_unqualified),_.Lb(6),_.gd(" ",_.uc(43,29,"pages.reports.group_by_qualification")," "),_.Lb(3),_.Ac("course_id",t.course_id)("required",t.allowFilters)("buttons",t.buttons_filters_teacher),_.Lb(2),_.Ac("ngForOf",t.graphsCircles.teacher)}}let dn=(()=>{class t{constructor(t,e,i,c,s){this.courseService=t,this.controlErroresService=e,this.applyFiltersModeService=i,this.loadingService=c,this.activeRoute=s,this.systemStatus=0,this.moment=g,this.chartsGroup=[],this.charts={course_qualificated:null,course_unqualified:null},this.loadingCharts=!1,this.loadingChartsSecond=!1,this.button_search_teacher={color:"warning",size:"small",mode:"search-teacher",disabled:!1,title:"buttons.search",icon:"search-outline"},this.button_search_all={color:"warning",size:"small",mode:"search",disabled:!1,title:"buttons.search",icon:"search-outline"},this.button_download_teacher={color:"danger",size:"small",mode:"download-teacher",icon:"cloud-download-outline",disabled:!1,title:"buttons.download"},this.button_export_teacher={color:"success",size:"small",mode:"export-teacher",icon:"download-outline",disabled:!1,title:"buttons.export"},this.button_download_all={color:"danger",size:"small",mode:"download",icon:"cloud-download-outline",disabled:!1,title:"buttons.download"},this.button_export_all={color:"success",size:"small",mode:"export",icon:"download-outline",disabled:!1,title:"buttons.export"},this.buttons_filters_teacher=[this.button_search_teacher,this.button_download_teacher,this.button_export_teacher],this.buttons_all=[this.button_search_all,this.button_download_all,this.button_export_all],this.graphsCircles={holguin:[],teacher:[]},this.loading=!1,this.rxjsFilter=null,Ys.a.register(...Ys.b),g.locale("es"),this.course_id=s.snapshot.params.uuid,this.allowFilters={end_date:1,start_date:1,theme:1,block:1,semester:1}}ngOnInit(){this.getTimers(),this.getDataQualifications(),this.rxjsFilter=this.applyFiltersModeService.get$().subscribe(t=>{this.applyFilters(t)}),this.getAvgGroupQualifications("teacher",{})}ngOnDestroy(){this.rxjsFilter.unsubscribe()}applyFilters(t){if(!t)return!1;if(!t.mode||!t.filters)return!1;switch(t.mode){case"search":this.getDataQualifications(t.filters);break;case"download":this.downloadData(this.courseService.downloadAvgSeries(this.course_id,t.filters),"Serie de tiempo de la evoluci\xf3n del aprendizaje");break;case"export":this.exportData(this.courseService.exportAvgSeries(this.course_id,t.filters),"Serie de tiempo de la evoluci\xf3n del aprendizaje");break;case"download-teacher":this.downloadData(this.courseService.downloadAvgGroupQualifications(this.course_id,t.filters)," Agrupado por calificaciones ");break;case"export-teacher":this.exportData(this.courseService.exportAvgGroupQualifications(this.course_id,t.filters)," Agrupado por calificaciones ");break;case"search-teacher":this.getAvgGroupQualifications("teacher",t.filters)}}exportData(t,e){this.loadingService.change(!0),t.subscribe(t=>{this.loadingService.change(!1);const i=new Blob([t],{type:t.type});var c=this.toExportFileName(e,"xlsx");Object(rs.saveAs)(i,c)},t=>{this.controlErroresService.control(t),this.loadingService.change(!1)})}downloadData(t,e){this.loadingService.change(!0),t.subscribe(t=>{this.loadingService.change(!1);const i=new Blob([t],{type:t.type});var c=this.toExportFileName(e,"pdf");Object(rs.saveAs)(i,c)},t=>{this.controlErroresService.control(t),this.loadingService.change(!1)})}toExportFileName(t,e){return`${t}_${(new Date).getTime()}.${e}`}getCourse(){this.loadingService.change(!0),this.courseService.course(this.course_id).subscribe(t=>{this.course=t.data,this.loadingService.change(!1)},t=>{this.controlErroresService.control(t),this.loadingService.change(!1)})}getTimers(){this.loadingService.change(!0),this.courseService.getTimeData(this.course_id).subscribe(t=>{this.systemStatus=t.status,this.timerGraph=t.data,this.loadingService.change(!1)},t=>{this.controlErroresService.control(t),this.systemStatus=t.error.code,this.loadingService.change(!1)})}getDataQualifications(t={}){this.loadingService.change(!0),this.courseService.geAvgSeries(this.course_id,t).subscribe(t=>{this.loadingService.change(!1),this.loadingCharts=!0,setTimeout(()=>{for(const e of t.data)this.loadGraficoGeneral(e._el,e.data.map(t=>t.date_format),e.data.map(t=>t.avg),e.title,e._id);this.loadingCharts=!1},1e3),this.loadingService.change(!1)},t=>{this.loadingService.change(!1),this.controlErroresService.control(t)})}getAvgGroupQualifications(t,e={}){this.loadingService.change(!0),this.loadingChartsSecond=!0,this.courseService.getAvgGroupQualifications(this.course_id,e).subscribe(e=>{this.graphsCircles[t]=e.data,this.loadingChartsSecond=!0,setTimeout(()=>{for(const i of this.graphsCircles[t])for(const t of i.items)try{this.loadGraficoGeneralPie(t,t.data.map(t=>t.qualification_range),t.data.map(t=>t.count),t.data.map(t=>t.color))}catch(e){}this.loadingChartsSecond=!1},2e3),this.loadingService.change(!1)},t=>{this.loadingService.change(!1),this.controlErroresService.control(t)})}loadGraficoGeneral(t,e,i,c,s){null!=this.charts[t]&&this.charts[t].destroy(),this.charts[t]=new Ys.a(s,{type:"line",data:{labels:e,datasets:[{label:c,data:i,backgroundColor:"rgba(0, 156, 224, 1)",borderColor:"rgba(0, 156, 224, 1)",borderWidth:1}]},options:{scales:{y:{beginAtZero:!0}}}}),this.charts[t].update()}loadGraficoGeneralPie(t,e,i,c){null!=t.chart_graph&&t.chart_graph.destroy(),t.chart_graph=new Ys.a(t._id,{type:"pie",data:{labels:e,datasets:[{label:t.title,data:i,backgroundColor:c,borderColor:"rgba(0, 156, 224, 1)",borderWidth:1}]},options:{responsive:!0,plugins:{legend:{position:"top"},tooltip:{callbacks:{label:function(t){return t.parsed+""}}}}}}),t.chart_graph.update()}}return t.\u0275fac=function(e){return new(e||t)(_.ac(d.a),_.ac(l.a),_.ac(We.a),_.ac(u.a),_.ac(o.a))},t.\u0275cmp=_.Ub({type:t,selectors:[["app-dashboard-course"]],decls:2,vars:2,consts:[[4,"ngIf"],["hideToggle","","expanded","true"],[2,"padding","0"],[2,"width","100%"],["name","bar-chart-outline"],[3,"required","course_id","buttons"],["size","12","size-sm","6"],[1,"mt-2","no-padding-small-500"],[1,"padding-small-sm"],[3,"count","all_width",4,"ngIf"],[3,"ngClass"],[3,"id"],["name","pie-chart-outline"],[3,"course_id","required","buttons"],[4,"ngFor","ngForOf"],[3,"size","sizeSm","sizeMd","sizeLg"],[1,"padding-small-sm","overflow-auto"],[1,"text-center"],["size","12"],["class","col-item-linebar",4,"ngFor","ngForOf"],[1,"col-item-linebar"],[1,"col-line-fx","flex-fend-axis-y","flex-y",2,"margin","0 15px"],[3,"ngStyle"],[1,"col-line-fx-inter",3,"ngStyle","matTooltip"],[2,"text-align","center","margin","0 auto"],[3,"count","all_width"],[1,"text-center","bold"],["size","12","size-sm","6","size-md","4","size-xl","3",4,"ngFor","ngForOf"],["size","12","size-sm","6","size-md","4","size-xl","3"],["class","text-center",4,"ngIf"]],template:function(t,e){1&t&&(_.cd(0,Ks,2,0,"ng-container",0),_.cd(1,ln,48,31,"ng-container",0)),2&t&&(_.Ac("ngIf",403==e.systemStatus),_.Lb(1),_.Ac("ngIf",200==e.systemStatus))},directives:[c.t,S.c,S.g,S.h,n.H,n.C,n.A,n.gb,n.t,Ge.a,n.m,n.o,n.q,n.n,c.q,c.s,c.w,O.a,Ws.a],pipes:[P.d,Gs.a],styles:['@media (max-width:575px){.text-center-small[_ngcontent-%COMP%]{text-align:center}}.col-line-fx[_ngcontent-%COMP%]{min-width:2.5EM;height:300px}.col-item-linebar[_ngcontent-%COMP%]{height:300px}.col-line-fx-inter[_ngcontent-%COMP%]{width:10px;border-radius:5px;background:var(--ion-color-primary);text-align:"center";margin:auto auto 0}.flex-fend-axis-y[_ngcontent-%COMP%]{align-items:flex-end;display:flex}']}),t})();var un=i("8BQX"),gn=i("dZ1v"),mn=i("ZOsW");function fn(t,e){if(1&t&&(_.gc(0,"ng-option",13),_.ed(1),_.fc()),2&t){const t=e.$implicit;_.Ac("value",t.uuid),_.Lb(1),_.fd(t.title)}}let hn=(()=>{class t{constructor(t,e,i,c,s){this.modalCtrl=t,this.navParams=e,this.courseService=i,this.toastService=c,this.controlErroresService=s,this.blocks=[],this.mode="create",this.item=this.navParams.data.item,this.course_id=this.navParams.data.course_id,null!=this.item&&(this.title=this.item.title,this.item.block&&(this.block_id=this.item.block.uuid),this.mode="edit"),this.blocks=this.navParams.data.block||[]}ngOnInit(){}dismiss(t){this.modalCtrl.dismiss(t)}save(){switch(this.mode){case"create":this.courseService.storeActivityTheme({title:this.title,block_id:this.block_id},this.course_id).subscribe(t=>{this.dismiss(t.data)},t=>{this.controlErroresService.control(t)});break;case"edit":this.courseService.updateActivityTheme({title:this.title,block_id:this.block_id},this.item.uuid).subscribe(t=>{this.dismiss(t.data)},t=>{this.controlErroresService.control(t)})}}}return t.\u0275fac=function(e){return new(e||t)(_.ac(n.Db),_.ac(n.Fb),_.ac(d.a),_.ac(b.a),_.ac(l.a))},t.\u0275cmp=_.Ub({type:t,selectors:[["add-activity-theme"]],decls:26,vars:18,consts:[["translucent","true"],["slot","end"],[3,"click"],["name","close-outline"],["fullscreen","true"],[1,"m-2",3,"submit"],[1,"intro-x","mt-2","text-gray-700","xl:hidden","text-center"],[1,"flex","flex-center","mt-1"],["type","text","name","title",1,"intro-x","login__input","form-control","py-3","px-4","border-gray-300","block",3,"ngModel","placeholder","ngModelChange"],[1,"mt-3"],["name","block_id",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["type","submit","size","small"],[3,"value"]],template:function(t,e){1&t&&(_.gc(0,"ion-header",0),_.gc(1,"ion-toolbar"),_.gc(2,"ion-title"),_.ed(3),_.tc(4,"translate"),_.fc(),_.gc(5,"ion-buttons",1),_.gc(6,"ion-button",2),_.oc("click",(function(){return e.dismiss()})),_.bc(7,"ion-icon",3),_.fc(),_.fc(),_.fc(),_.fc(),_.gc(8,"ion-content",4),_.gc(9,"form",5),_.oc("submit",(function(){return e.save()})),_.gc(10,"h3",6),_.ed(11),_.tc(12,"translate"),_.fc(),_.gc(13,"div",7),_.gc(14,"input",8),_.oc("ngModelChange",(function(t){return e.title=t})),_.tc(15,"translate"),_.fc(),_.fc(),_.gc(16,"div",9),_.gc(17,"h3",6),_.ed(18),_.tc(19,"translate"),_.fc(),_.gc(20,"ng-select",10),_.oc("ngModelChange",(function(t){return e.block_id=t})),_.cd(21,fn,2,2,"ng-option",11),_.fc(),_.fc(),_.gc(22,"div",7),_.gc(23,"ion-button",12),_.ed(24),_.tc(25,"translate"),_.fc(),_.fc(),_.fc(),_.fc()),2&t&&(_.Lb(3),_.gd(" ",_.uc(4,8,"pages.course.themes")," "),_.Lb(8),_.fd(_.uc(12,10,"forms.title")),_.Lb(3),_.Bc("placeholder",_.uc(15,12,"forms.title")),_.Ac("ngModel",e.title),_.Lb(4),_.fd(_.uc(19,14,"pages.course.block")),_.Lb(2),_.Ac("ngModel",e.block_id),_.Lb(1),_.Ac("ngForOf",e.blocks),_.Lb(3),_.fd(_.uc(25,16,"buttons.save")))},directives:[n.B,n.zb,n.xb,n.l,n.k,n.C,n.u,s.H,s.s,s.t,s.c,s.r,s.u,mn.a,c.s,mn.o],pipes:[P.d],styles:[""]}),t})();function pn(t,e){1&t&&_.bc(0,"mat-progress-bar",7)}function bn(t,e){1&t&&(_.gc(0,"small"),_.ed(1),_.tc(2,"translate"),_.fc()),2&t&&(_.Lb(1),_.gd(" : ",_.uc(2,1,"pages.course.no_last_works")," "))}function vn(t,e){if(1&t&&(_.gc(0,"ion-card-header"),_.gc(1,"ion-card-subtitle"),_.ed(2),_.tc(3,"translate"),_.tc(4,"translate"),_.cd(5,bn,3,3,"small",6),_.fc(),_.fc()),2&t){const t=_.sc(2);_.Lb(2),_.hd("",_.uc(3,3,"pages.course.semesters")," - ",_.uc(4,5,"pages.course.blocks")," "),_.Lb(3),_.Ac("ngIf",!t.course.semesters||0==t.course.semesters.length)}}function _n(t,e){1&t&&(_.gc(0,"small"),_.ed(1),_.tc(2,"translate"),_.fc()),2&t&&(_.Lb(1),_.gd(" : ",_.uc(2,1,"pages.course.no_last_works")," "))}function yn(t,e){if(1&t){const t=_.hc();_.gc(0,"div",21),_.gc(1,"a",12),_.gc(2,"div",13),_.ed(3),_.fc(),_.gc(4,"div"),_.gc(5,"ion-button",14),_.oc("click",(function(){_.Sc(t);const i=e.$implicit;return _.sc(4).editItem("Actualizar parcial","block",i)})),_.bc(6,"ion-icon",15),_.fc(),_.gc(7,"ion-button",16),_.oc("click",(function(){_.Sc(t);const i=e.$implicit,c=e.index,s=_.sc().index;return _.sc(3).deleteItem("block",i.uuid,c,s)})),_.bc(8,"ion-icon",17),_.fc(),_.fc(),_.fc(),_.fc()}if(2&t){const t=e.$implicit;_.Lb(3),_.fd(t.title)}}function kn(t,e){if(1&t){const t=_.hc();_.gc(0,"div",11),_.gc(1,"a",12),_.gc(2,"div",13),_.ed(3),_.fc(),_.gc(4,"div"),_.gc(5,"ion-button",14),_.oc("click",(function(){_.Sc(t);const i=e.$implicit;return _.sc(3).editItem("Actualizar semestre","semester",i)})),_.bc(6,"ion-icon",15),_.fc(),_.gc(7,"ion-button",16),_.oc("click",(function(){_.Sc(t);const i=e.$implicit,c=e.index;return _.sc(3).deleteItem("semester",i.uuid,c,0)})),_.bc(8,"ion-icon",17),_.fc(),_.fc(),_.fc(),_.gc(9,"div",18),_.gc(10,"small"),_.ed(11),_.tc(12,"translate"),_.fc(),_.cd(13,_n,3,3,"small",6),_.fc(),_.cd(14,yn,9,1,"div",19),_.gc(15,"ion-list"),_.gc(16,"ion-item"),_.gc(17,"ion-button",20),_.oc("click",(function(){_.Sc(t);const i=e.index,c=e.$implicit,s=_.sc(3);return s.addItemCtg("Agregar Parcial","block",s.course.uuid,{position:i,semester_id:c.uuid})})),_.ed(18),_.tc(19,"translate"),_.tc(20,"translate"),_.fc(),_.fc(),_.fc(),_.fc()}if(2&t){const t=e.$implicit;_.Lb(3),_.fd(t.title),_.Lb(8),_.fd(_.uc(12,6,"pages.course.blocks")),_.Lb(2),_.Ac("ngIf",!t.blocks||0==t.blocks.length),_.Lb(1),_.Ac("ngForOf",t.blocks),_.Lb(4),_.hd("",_.uc(19,8,"buttons.add")," ",_.uc(20,10,"buttons.block"),"")}}function Ln(t,e){if(1&t){const t=_.hc();_.gc(0,"ion-card-content"),_.cd(1,kn,21,12,"div",9),_.gc(2,"ion-button",10),_.oc("click",(function(){_.Sc(t);const e=_.sc(2);return e.addItemCtg("Agregar Semestre","semester",e.course.uuid,{})})),_.ed(3),_.tc(4,"translate"),_.tc(5,"translate"),_.fc(),_.fc()}if(2&t){const t=_.sc(2);_.Lb(1),_.Ac("ngForOf",t.course.semesters),_.Lb(2),_.hd("",_.uc(4,3,"buttons.add")," ",_.uc(5,5,"buttons.semester"),"")}}function xn(t,e){if(1&t){const t=_.hc();_.gc(0,"ion-card"),_.gc(1,"ion-card-header"),_.gc(2,"ion-card-title"),_.gc(3,"ion-list"),_.gc(4,"ion-item"),_.gc(5,"ion-label"),_.ed(6),_.tc(7,"translate"),_.fc(),_.gc(8,"ion-toggle",8),_.oc("ionChange",(function(){return _.Sc(t),_.sc().updateModePartial()}))("ngModelChange",(function(e){return _.Sc(t),_.sc().course.active_mode_partials=e})),_.fc(),_.fc(),_.fc(),_.fc(),_.fc(),_.cd(9,vn,6,7,"ion-card-header",6),_.cd(10,Ln,6,7,"ion-card-content",6),_.fc()}if(2&t){const t=_.sc();_.Lb(6),_.fd(_.uc(7,4,"buttons.enable_or_disabled")),_.Lb(2),_.Ac("ngModel",t.course.active_mode_partials),_.Lb(1),_.Ac("ngIf",t.course.active_mode_partials),_.Lb(1),_.Ac("ngIf",t.course.active_mode_partials)}}function wn(t,e){if(1&t&&(_.gc(0,"span"),_.ed(1),_.fc()),2&t){const t=_.sc(2).$implicit;_.Lb(1),_.gd(" - ",t.block.semester.title," ")}}function An(t,e){if(1&t&&(_.gc(0,"div"),_.bc(1,"hr"),_.gc(2,"span"),_.ed(3),_.fc(),_.cd(4,wn,2,1,"span",6),_.fc()),2&t){const t=_.sc().$implicit;_.Lb(3),_.gd("",t.block.title," "),_.Lb(1),_.Ac("ngIf",t.block.semester)}}function Sn(t,e){if(1&t){const t=_.hc();_.gc(0,"div",11),_.gc(1,"a",12),_.gc(2,"div",13),_.ed(3),_.cd(4,An,5,2,"div",6),_.fc(),_.gc(5,"div"),_.gc(6,"ion-button",14),_.oc("click",(function(){_.Sc(t);const i=e.$implicit;return _.sc(2).addOrEditTheme(i)})),_.bc(7,"ion-icon",15),_.fc(),_.gc(8,"ion-button",16),_.oc("click",(function(){_.Sc(t);const i=e.$implicit,c=e.index;return _.sc(2).deleteItem("theme",i.uuid,c,0)})),_.bc(9,"ion-icon",17),_.fc(),_.fc(),_.fc(),_.fc()}if(2&t){const t=e.$implicit;_.Lb(3),_.gd(" ",t.title," "),_.Lb(1),_.Ac("ngIf",t.block)}}function Cn(t,e){if(1&t){const t=_.hc();_.gc(0,"ion-card"),_.gc(1,"ion-card-header"),_.gc(2,"ion-card-title"),_.ed(3),_.tc(4,"translate"),_.fc(),_.fc(),_.gc(5,"ion-card-content",22),_.cd(6,Sn,10,2,"div",9),_.gc(7,"ion-button",10),_.oc("click",(function(){return _.Sc(t),_.sc().addOrEditTheme()})),_.ed(8),_.tc(9,"translate"),_.fc(),_.fc(),_.fc()}if(2&t){const t=_.sc();_.Lb(3),_.fd(_.uc(4,3,"pages.course.themes")),_.Lb(3),_.Ac("ngForOf",t.course.themes_course),_.Lb(2),_.fd(_.uc(9,5,"buttons.add"))}}let In=(()=>{class t{constructor(t,e,i,c,s,n){this.courseService=t,this.navParams=e,this.modalCtrl=i,this.controlErroresService=c,this.alertController=s,this.toastService=n,this.enableSemester=!1,this.course=null,this.course_id=0,this.loading=!0,this.scrollbarStyle=v.a.scrollbarStyle,this.saving=!1,this.code_option=1,this.link_class=location.origin+"/"+m.h.one_course+this.course_id+"?code=",this.course_id=this.navParams.data.course_id}ngOnInit(){this.getCourse()}getCourse(){this.loading=!0,this.courseService.course(this.course_id,"?show_partials=1&show_themes=1").subscribe(t=>{this.loading=!1,this.course=t.data},t=>{this.loading=!1,this.controlErroresService.control(t),this.dismiss()})}updateModePartial(){this.saving=!0,this.courseService.updateModePartial({mode_p:this.course.active_mode_partials?"si":"no"},this.course_id).subscribe(t=>{this.toastService.presentToast(t.message,t.status),this.saving=!1},t=>{this.saving=!1,this.course.active_mode_partials=!this.course.active_mode_partials,this.controlErroresService.control(t)})}dismiss(t){this.modalCtrl.dismiss()}addItemCtg(t,e,i,c){return Object(a.b)(this,void 0,void 0,(function*(){const s=yield this.alertController.create({cssClass:"",header:t,inputs:[{name:"title",value:"",type:"text",placeholder:"T\xedtulo"}],buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:()=>{}},{text:"A\xf1adir",handler:t=>{switch(e){case"semester":this.saving=!0,this.courseService.storeSemester({title:t.title},i).subscribe(t=>{t.data&&(this.course.semesters.push(t.data),this.saving=!1)},t=>{this.controlErroresService.control(t),this.saving=!1});break;case"block":this.saving=!0,this.courseService.storeBlock({title:t.title,semester_id:c.semester_id},i).subscribe(t=>{t.data&&this.course.semesters[c.position].blocks.push(t.data),this.saving=!1},t=>{this.controlErroresService.control(t),this.saving=!1})}}}]});yield s.present()}))}deleteItem(t,e,i,c){return Object(a.b)(this,void 0,void 0,(function*(){const s=yield this.alertController.create({cssClass:"my-custom-class",header:"Eliminar",message:"\xbfEst\xe1 seguro de eliminar este elemento?",buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary",handler:t=>{}},{text:"Eliminar",role:"delete",handler:()=>{switch(t){case"semester":this.saving=!0,this.courseService.deleteSemester(e).subscribe(t=>{this.toastService.presentToast(t.message,"success"),this.course.semesters.splice(i,1),this.saving=!1},t=>{this.controlErroresService.control(t),this.saving=!1});break;case"block":this.saving=!0,this.courseService.deleteBlock(e).subscribe(t=>{this.toastService.presentToast(t.message,"success"),this.course.semesters[c].blocks.splice(i,1),this.saving=!1},t=>{this.controlErroresService.control(t),this.saving=!1});break;case"theme":this.saving=!0,this.courseService.deleteActivityTheme(e).subscribe(t=>{this.toastService.presentToast(t.message,"success"),this.course.themes_course.splice(i,1),this.saving=!1},t=>{this.controlErroresService.control(t),this.saving=!1})}}}]});yield s.present()}))}editItem(t,e,i){return Object(a.b)(this,void 0,void 0,(function*(){const c=yield this.alertController.create({cssClass:"",header:t,inputs:[{name:"title",value:i.title,type:"text",placeholder:"T\xedtulo"}],buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:()=>{}},{text:"Guardar",handler:t=>{switch(e){case"semester":this.saving=!0,this.courseService.updateSemester({title:t.title},i.uuid).subscribe(e=>{i.title=t.title,this.saving=!1},t=>{this.controlErroresService.control(t),this.saving=!1});break;case"block":this.saving=!0,this.courseService.updateBlock({title:t.title},i.uuid).subscribe(e=>{i.title=t.title,this.saving=!1},t=>{this.controlErroresService.control(t),this.saving=!1})}}}]});yield c.present()}))}addOrEditTheme(t){return Object(a.b)(this,void 0,void 0,(function*(){let e=[];for(const t of this.course.semesters)for(let i of t.blocks)i=JSON.parse(JSON.stringify(i)),i.title+=" - "+t.title,e.push(i);const i=yield this.modalCtrl.create({component:hn,cssClass:"modal-fullscreen",swipeToClose:!0,componentProps:{item:t,course_id:this.course_id,blocks:e}});yield i.present();const{data:c}=yield i.onWillDismiss();c&&(null!=t?(t.block=c.block,t.title=c.title):this.course.themes_course.push(c),console.log(c))}))}}return t.\u0275fac=function(e){return new(e||t)(_.ac(d.a),_.ac(n.Fb),_.ac(n.Db),_.ac(l.a),_.ac(n.b),_.ac(b.a))},t.\u0275cmp=_.Ub({type:t,selectors:[["modal-edit-mode-qualification"]],decls:12,vars:8,consts:[["translucent","true"],["slot","end"],[3,"disabled","click"],["name","close-outline"],["mode","indeterminate",4,"ngIf"],[3,"scrollbar"],[4,"ngIf"],["mode","indeterminate"],[3,"ngModel","ionChange","ngModelChange"],["class","border-2 border-dashed dark:border-dark-5 pos__ticket p-2",4,"ngFor","ngForOf"],["size","small",3,"click"],[1,"border-2","border-dashed","dark:border-dark-5","pos__ticket","p-2"],["href","javascript:;","data-toggle","modal","data-target","#add-item-modal",1,"flex","space-btw","p-3","cursor-pointer","transition","duration-300","ease-in-out","bg-white","dark:bg-dark-3","hover:bg-gray-200","dark:hover:bg-dark-1","rounded-md"],[1,"pos__ticket__item-name","truncate","mr-1"],["size","small","color","success","shape","round",3,"click"],["name","create-outline"],["size","small","color","danger","shape","round",3,"click"],["name","trash-outline"],[1,"ml-3"],["class","pos__ticket box p-2",4,"ngFor","ngForOf"],["slot","end","size","small","color","warning",3,"click"],[1,"pos__ticket","box","p-2"],[2,"margin-left","10px","margin-right","10px"]],template:function(t,e){1&t&&(_.gc(0,"ion-header",0),_.gc(1,"ion-toolbar"),_.gc(2,"ion-title"),_.ed(3),_.tc(4,"translate"),_.fc(),_.gc(5,"ion-buttons",1),_.gc(6,"ion-button",2),_.oc("click",(function(){return e.dismiss()})),_.bc(7,"ion-icon",3),_.fc(),_.fc(),_.fc(),_.cd(8,pn,1,0,"mat-progress-bar",4),_.fc(),_.gc(9,"ion-content",5),_.cd(10,xn,11,6,"ion-card",6),_.cd(11,Cn,10,7,"ion-card",6),_.fc()),2&t&&(_.Lb(3),_.gd(" ",_.uc(4,6,"pages.course.setting_qualification")," "),_.Lb(3),_.Ac("disabled",e.saving),_.Lb(2),_.Ac("ngIf",e.loading||e.saving),_.Lb(1),_.Bc("scrollbar",e.scrollbarStyle),_.Lb(1),_.Ac("ngIf",e.course),_.Lb(1),_.Ac("ngIf",e.course))},directives:[n.B,n.zb,n.xb,n.l,n.k,n.C,c.t,n.u,x.b,w.a,n.m,n.o,n.q,n.O,n.H,n.N,n.yb,n.c,s.r,s.u,n.p,n.n,c.s],pipes:[P.d],styles:[".bg-color-active[_ngcontent-%COMP%]{background-color:rgba(237,242,247,var(--tw-bg-opacity))}.text-color-no-active[_ngcontent-%COMP%]{color:var(--ion-color-medium)}"]}),t})();var On=i("Jcxb");const Pn=["theLastReferencePost"];function Mn(t,e){1&t&&_.bc(0,"mat-progress-bar",7)}function Tn(t,e){if(1&t&&_.bc(0,"panel-instructions-activity",17),2&t){const t=e.$implicit,i=_.sc(2);_.Ac("activity",t)("show_button_open",!1)("expanded_panel",!1)("route_activity",i.route_activity)("force_show_qualification",!0)("show_details_assignments",!0)}}function Fn(t,e){1&t&&(_.gc(0,"ion-card"),_.gc(1,"ion-card-header"),_.gc(2,"ion-card-title",18),_.ed(3),_.tc(4,"translate"),_.fc(),_.gc(5,"ion-card-subtitle"),_.bc(6,"ion-icon",19),_.ed(7),_.tc(8,"translate"),_.fc(),_.fc(),_.fc()),2&t&&(_.Lb(3),_.fd(_.uc(4,2,"pages.course.activities_crate_welcome_student")),_.Lb(4),_.gd(" ",_.uc(8,4,"pages.course.response_activities_post")," "))}function zn(t,e){if(1&t&&(_.gc(0,"ion-grid",8),_.gc(1,"ion-row",9),_.gc(2,"ion-col",10),_.bc(3,"filters-course",11),_.fc(),_.gc(4,"ion-col",12),_.gc(5,"ion-grid"),_.gc(6,"ion-col",13),_.cd(7,Tn,1,6,"panel-instructions-activity",14),_.bc(8,"span",null,15),_.cd(10,Fn,9,6,"ion-card",16),_.fc(),_.fc(),_.fc(),_.fc(),_.fc()),2&t){const t=_.sc();_.Lb(3),_.Ac("required",t.allowFilters)("course_id",t.course.uuid)("buttons",t.buttons_all),_.Lb(4),_.Ac("ngForOf",t.activities),_.Lb(3),_.Ac("ngIf",0==t.activities.length)}}let Dn=(()=>{class t{constructor(t,e,i,c,s){this.modalCtrl=t,this.navParams=e,this.courseService=i,this.controlErroresService=c,this.applyFiltersModeService=s,this.scrollbarStyle=v.a.scrollbarStyle,this.loading=!1,this.activities=[],this.totalPages=0,this.this_page=1,this.button_search_all={color:"warning",size:"small",mode:"search-act",disabled:!1,title:"buttons.search",icon:"search-outline"},this.buttons_all=[this.button_search_all],this.rxjsFilter=null,this.allowFilters={start_publish_at:1,end_publish_at:1,end_created_at:1,start_created_at:1,theme:1,block:1,title:1,semester:1,min_qualification_percentage:1,max_qualification_percentage:1},this.rxjsFilter=this.applyFiltersModeService.get$().subscribe(t=>{this.applyFilters(t)})}ngOnDestroy(){this.rxjsFilter.unsubscribe()}applyFilters(t){if(!t)return!1;if(!t.mode||!t.filters)return!1;switch(t.mode){case"search-act":this.getActivitesCourseByUser(!0,t.filters)}}ngOnInit(){this.getActivitesCourseByUser(!0)}ngAfterViewInit(){setTimeout(()=>{this.intersectionObserver(),this.theLastReferencePost.changes.subscribe(t=>{t.last&&this.observer.observe(t.last.nativeElement)})})}intersectionObserver(){this.observer=new IntersectionObserver(t=>{t[0].isIntersecting&&this.totalPages>=this.this_page&&this.getActivitesCourseByUser(!1,this.paramsFilters)},{root:null,rootMargin:"0px",threshold:.5})}getActivitesCourseByUser(t=!1,e={}){t&&(this.activities=[],this.this_page=1),this.loading=!0,this.courseService.getActivitesCourseByUser(this.user.uuid,this.course.uuid,e).subscribe(t=>{this.activities=this.activities.concat(t.data),this.totalPages=t.last_page,this.loading=!1,this.this_page++},t=>{this.loading=!1})}dismiss(){this.modalCtrl.dismiss()}}return t.\u0275fac=function(e){return new(e||t)(_.ac(n.Db),_.ac(n.Fb),_.ac(d.a),_.ac(l.a),_.ac(We.a))},t.\u0275cmp=_.Ub({type:t,selectors:[["app-show-activities"]],viewQuery:function(t,e){var i;1&t&&_.ld(Pn,!0,_.o),2&t&&_.Nc(i=_.pc())&&(e.theLastReferencePost=i)},decls:12,vars:9,consts:[["translucent","true"],["slot","end"],[3,"click"],["name","close-outline"],["mode","indeterminate",4,"ngIf"],["fullscreen","true",3,"scrollbar"],["class","w-100 flex flex-center",4,"ngIf"],["mode","indeterminate"],[1,"w-100","flex","flex-center"],[1,"w-100"],["size","12","size-sm","12"],[3,"required","course_id","buttons"],["size","12","size-sm","12",1,"all-activities-panel"],["size","12"],[3,"activity","show_button_open","expanded_panel","route_activity","force_show_qualification","show_details_assignments",4,"ngFor","ngForOf"],["theLastReferencePost",""],[4,"ngIf"],[3,"activity","show_button_open","expanded_panel","route_activity","force_show_qualification","show_details_assignments"],[2,"color","var(--ion-color-primary)"],["name","chatbox-ellipses-outline"]],template:function(t,e){1&t&&(_.gc(0,"ion-header",0),_.gc(1,"ion-toolbar"),_.gc(2,"ion-title"),_.ed(3),_.tc(4,"translate"),_.tc(5,"translate"),_.fc(),_.gc(6,"ion-buttons",1),_.gc(7,"ion-button",2),_.oc("click",(function(){return e.dismiss()})),_.bc(8,"ion-icon",3),_.fc(),_.fc(),_.fc(),_.cd(9,Mn,1,0,"mat-progress-bar",4),_.fc(),_.gc(10,"ion-content",5),_.cd(11,zn,11,5,"ion-grid",6),_.fc()),2&t&&(_.Lb(3),_.hd("",e.user?e.user.name:_.uc(4,5,"loading")," - ",null!=e.course?e.course.name:_.uc(5,7,"loading"),""),_.Lb(6),_.Ac("ngIf",e.loading),_.Lb(1),_.Bc("scrollbar",e.scrollbarStyle),_.Lb(1),_.Ac("ngIf",e.course))},directives:[n.B,n.zb,n.xb,n.l,n.k,n.C,c.t,n.u,x.b,w.a,n.A,n.gb,n.t,Ge.a,c.s,A.a,n.m,n.o,n.q,n.p],pipes:[P.d],styles:[""]}),t})();var qn=i("w0c1");function En(t,e){1&t&&_.bc(0,"mat-progress-bar",9)}function $n(t,e){if(1&t&&(_.gc(0,"ion-item"),_.gc(1,"div",10),_.bc(2,"img",11),_.fc(),_.gc(3,"div",12),_.gc(4,"a",13),_.ed(5),_.fc(),_.fc(),_.fc()),2&t){const t=e.$implicit,i=_.sc();_.Lb(2),_.Ac("src",t.image_url||i.user_profile,_.Vc),_.Lb(3),_.hd("",t.last_name," ",t.first_name," ")}}function jn(t,e){if(1&t){const t=_.hc();_.gc(0,"ion-col",17),_.gc(1,"ion-button",18),_.oc("click",(function(){_.Sc(t);const e=_.sc().$implicit,i=_.sc();return i.showDataGraph(i.course,e)})),_.bc(2,"ion-icon",19),_.fc(),_.gc(3,"ion-button",20),_.oc("click",(function(){_.Sc(t);const e=_.sc().$implicit,i=_.sc();return i.showActivities(i.course,e)})),_.bc(4,"ion-icon",21),_.fc(),_.fc()}}function Bn(t,e){if(1&t&&(_.gc(0,"ion-item"),_.gc(1,"div",10),_.bc(2,"img",11),_.fc(),_.gc(3,"div",14),_.gc(4,"ion-grid"),_.gc(5,"ion-row"),_.gc(6,"ion-col",15),_.gc(7,"a",13),_.ed(8),_.fc(),_.fc(),_.cd(9,jn,5,0,"ion-col",16),_.fc(),_.fc(),_.fc(),_.fc()),2&t){const t=e.$implicit,i=_.sc();_.Lb(2),_.Ac("src",t.image_url||i.user_profile,_.Vc),_.Lb(4),_.Ac("size",i.course.is_my?8:12)("sizeMd",i.course.is_my?10:12),_.Lb(2),_.hd("",t.last_name," ",t.first_name," "),_.Lb(1),_.Ac("ngIf",i.course.is_my)}}let Rn=(()=>{class t{constructor(t,e,i,c){this.navParams=t,this.courseService=e,this.controlErroresService=i,this.modalCtrl=c,this.course_id=null,this.scrollbarStyle=v.a.scrollbarStyle,this.loading=!1,this.intengrants={principals:[],students:[]},this.user_profile="/assets/images/profile-8.jpg",this.course_id=this.navParams.data.course_id}ngOnInit(){this.getIntegrants()}getIntegrants(){this.loading=!0,this.courseService.getStudents(this.course_id).subscribe(t=>{this.loading=!1,this.intengrants.students=t.data,this.intengrants.principals=t.principals,this.course=t.course},t=>{this.loading=!1,this.controlErroresService.control(t)})}showDataGraph(t,e){return Object(a.b)(this,void 0,void 0,(function*(){const i=yield this.modalCtrl.create({component:qn.a,cssClass:"modal-fullscreen-100",swipeToClose:!0,componentProps:{course:t,user:e}});yield i.present()}))}showActivities(t,e){return Object(a.b)(this,void 0,void 0,(function*(){const i=yield this.modalCtrl.create({component:Dn,cssClass:"modal-fullscreen-100",swipeToClose:!0,componentProps:{course:t,user:e}});yield i.present()}))}dismiss(){this.modalCtrl.dismiss()}}return t.\u0275fac=function(e){return new(e||t)(_.ac(n.Fb),_.ac(d.a),_.ac(l.a),_.ac(n.Db))},t.\u0275cmp=_.Ub({type:t,selectors:[["app-integrants"]],decls:27,vars:16,consts:[["translucent","true"],["slot","end"],[3,"click"],["name","close-outline"],["mode","indeterminate",4,"ngIf"],["fullscreen","true",3,"scrollbar"],[1,"mt-2"],[4,"ngFor","ngForOf"],[1,"no-padding-small-500"],["mode","indeterminate"],[1,"w-10","h-10","flex-none","image-fit"],["alt","--",1,"rounded-full",3,"src"],[1,"ml-3","mr-auto"],["href","javascript:void(0)",1,"font-medium"],[1,"ml-3","w-100","mr-auto"],[3,"size","sizeMd"],["size","4","size-sm","2",4,"ngIf"],["size","4","size-sm","2"],["color","danger","size","small",3,"click"],["name","stats-chart-outline"],["color","warning","size","small",3,"click"],["name","albums-outline"]],template:function(t,e){1&t&&(_.gc(0,"ion-header",0),_.gc(1,"ion-toolbar"),_.gc(2,"ion-title"),_.ed(3),_.tc(4,"translate"),_.tc(5,"translate"),_.fc(),_.gc(6,"ion-buttons",1),_.gc(7,"ion-button",2),_.oc("click",(function(){return e.dismiss()})),_.bc(8,"ion-icon",3),_.fc(),_.fc(),_.fc(),_.cd(9,En,1,0,"mat-progress-bar",4),_.fc(),_.gc(10,"ion-content",5),_.gc(11,"ion-card",6),_.gc(12,"ion-card-header"),_.gc(13,"ion-card-subtitle"),_.ed(14),_.tc(15,"translate"),_.fc(),_.fc(),_.gc(16,"ion-card-content"),_.gc(17,"ion-list"),_.cd(18,$n,6,3,"ion-item",7),_.fc(),_.fc(),_.fc(),_.gc(19,"ion-card",6),_.gc(20,"ion-card-header"),_.gc(21,"ion-card-subtitle"),_.ed(22),_.tc(23,"translate"),_.fc(),_.fc(),_.gc(24,"ion-card-content",8),_.gc(25,"ion-list"),_.cd(26,Bn,10,6,"ion-item",7),_.fc(),_.fc(),_.fc(),_.fc()),2&t&&(_.Lb(3),_.hd("",_.uc(4,8,"pages.course.integrants")," - ",null!=e.course?e.course.name:_.uc(5,10,"loading"),""),_.Lb(6),_.Ac("ngIf",e.loading),_.Lb(1),_.Bc("scrollbar",e.scrollbarStyle),_.Lb(4),_.fd(_.uc(15,12,"pages.course.teachers")),_.Lb(4),_.Ac("ngForOf",e.intengrants.principals),_.Lb(4),_.fd(_.uc(23,14,"pages.course.students")),_.Lb(4),_.Ac("ngForOf",e.intengrants.students))},directives:[n.B,n.zb,n.xb,n.l,n.k,n.C,c.t,n.u,x.b,n.m,n.o,n.p,n.n,n.O,c.s,w.a,n.H,n.A,n.gb,n.t],pipes:[P.d],styles:[""]}),t})();var Qn=i("5Uy/"),Vn=i("wZkO");const Un=["content"];function Nn(t,e){if(1&t){const t=_.hc();_.gc(0,"ion-button",5),_.oc("click",(function(){return _.Sc(t),_.sc().editModeQ()})),_.tc(1,"translate"),_.bc(2,"ion-icon",12),_.fc()}2&t&&_.Ac("matTooltip",_.uc(1,1,"pages.course.setting_qualification"))}function Hn(t,e){if(1&t){const t=_.hc();_.gc(0,"ion-button",5),_.oc("click",(function(){return _.Sc(t),_.sc().edit()})),_.tc(1,"translate"),_.bc(2,"ion-icon",13),_.fc()}2&t&&_.Ac("matTooltip",_.uc(1,1,"forms.edit_course"))}function Jn(t,e){1&t&&_.bc(0,"mat-progress-bar",14)}function Yn(t,e){if(1&t&&(_.ec(0),_.bc(1,"mat-tab",17),_.tc(2,"translate"),_.dc()),2&t){const t=_.sc().$implicit,e=_.sc(2);_.Lb(1),_.Ac("active",t.index==e.indexRoute.value)("routerLink",t.route)("label",_.uc(2,3,t.title))}}function Wn(t,e){if(1&t&&(_.ec(0),_.cd(1,Yn,3,5,"ng-container",9),_.dc()),2&t){const t=e.$implicit;_.Lb(1),_.Ac("ngIf",t.show)}}function Gn(t,e){if(1&t){const t=_.hc();_.gc(0,"ion-toolbar"),_.gc(1,"mat-tab-group",15),_.oc("selectedIndexChange",(function(e){return _.Sc(t),_.sc().navigateUrl(e)})),_.cd(2,Wn,2,1,"ng-container",16),_.fc(),_.fc()}if(2&t){const t=_.sc();_.Lb(1),_.Ac("selectedIndex",t.indexRoute.value),_.Lb(1),_.Ac("ngForOf",t.navLinks)}}const Kn=function(){return{v:"1.1"}},Xn=[{path:"calendar",component:he},{path:":uuid",component:(()=>{class t{constructor(t,e,i,c,n,o,a,r,l,d,u,g){this.router=t,this.cdRef=e,this.modalCtrl=i,this.activeRoute=c,this.routerOutlet=n,this.courseService=o,this.alertController=a,this.loadingService=r,this.profileService=l,this.scrolBottomService=d,this.controlErroresService=u,this.updateCourseEventService=g,this.loading=!1,this.scrollbarStyle=v.a.scrollbarStyle,this.indexRoute=new s.g(0),this.navLinks=[{index:1,title:"pages.course.posts",route:"posts",key:"posts",show:!0},{index:2,title:"pages.course.activities",route:"activities",key:"activities",show:!0},{index:3,title:"pages.course.my_books",route:"my_books",key:"my_books",show:!0},{index:4,title:"pages.course.library",route:"library",key:"library",show:!0},{index:5,title:"pages.course.foro",route:"foro",key:"foro",show:!0},{index:6,title:"pages.course.qualifications",route:"qualifications",key:"qualifications",show:!0}],this.loadMenus=!1,this.parentRoute=m.h.course,this.route_active="",this.course_id=0,this.course=null,this.code=null,this.timerIdServer=null,this.course_id=c.snapshot.params.uuid,this.code=c.snapshot.queryParams.code,this.getCourse(),this.sendTimerToServer()}ngOnInit(){let t=this.router.url.split("?")[0].split("/");this.route_active=t[t.length-1],this.loading$=this.loadingService.get$(),this.loading$.subscribe(t=>{this.loading=t}),this.scrolBottomService.get$().subscribe(t=>{this.scrollToBottom(t)}),$("mat-tooltip-component").remove()}sendTimerToServer(t=0){this.profileService.initTimer({action:"course",context:"course",resource_uuid:this.course_id}).subscribe(t=>{t.uuid&&(this.timerIdServer=t.uuid,ref_cc_id=this.timerIdServer)},e=>{(t+=1)<=3&&this.sendTimerToServer(t)})}navigateUrl(t){this.router.navigate([m.h.one_course+this.course_id+"/"+this.course_id+"/"+this.navLinks[t].route],{queryParams:{ref:this.timerIdServer}})}getCourse(){this.loading=!0,this.courseService.course(this.course_id).subscribe(t=>{this.loading=!1,this.course=t.data,this.course.is_my&&this.navLinks.unshift({index:0,title:"pages.course.dashboard",route:"dashboard",key:"dashboard",show:!0});let e=this.navLinks.findIndex(t=>t.key==this.route_active);console.log(e,"index"),e>=0&&e<this.navLinks.length&&this.indexRoute.setValue(e),this.updateCourseEventService.sendData(t.data),this.loadMenus=!0},t=>{null==this.code?(this.loading=!1,this.controlErroresService.control(t),this.router.navigate([m.h.course])):this.courseService.prepareJoin({code:this.code,no_join:1}).subscribe(t=>Object(a.b)(this,void 0,void 0,(function*(){if(t.data)return this.loading=!1,void this.openFormJoinClass(t.data)})),t=>{this.loading=!1,this.controlErroresService.control(t),this.router.navigate([m.h.course])})})}openFormJoinClass(t){return Object(a.b)(this,void 0,void 0,(function*(){const e=yield this.alertController.create({cssClass:"",header:"Unirme a esta clase: "+t.name+" - "+(t.subject||"|"),buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary",handler:()=>{this.router.navigate([m.h.course])}},{text:"Registrarme",handler:e=>Object(a.b)(this,void 0,void 0,(function*(){this.loading=!0;const e=yield this.modalCtrl.create({component:Qn.a,cssClass:"modal-fullscreen-100",swipeToClose:!0,presentingElement:this.routerOutlet.nativeEl,componentProps:{course:t}});yield e.present()}))}]});yield e.present()}))}edit(){return Object(a.b)(this,void 0,void 0,(function*(){const t=yield this.modalCtrl.create({component:On.a,cssClass:"modal-fullscreen",swipeToClose:!0,presentingElement:this.routerOutlet.nativeEl,componentProps:{course_id:this.course_id}});yield t.present();const{data:e}=yield t.onWillDismiss();e&&(console.log(e),this.getCourse())}))}editModeQ(){return Object(a.b)(this,void 0,void 0,(function*(){const t=yield this.modalCtrl.create({component:In,cssClass:"modal-fullscreen",swipeToClose:!0,presentingElement:this.routerOutlet.nativeEl,componentProps:{course_id:this.course_id}});yield t.present()}))}openModalInterants(){return Object(a.b)(this,void 0,void 0,(function*(){const t=yield this.modalCtrl.create({component:Rn,cssClass:"modal-fullscreen",swipeToClose:!0,presentingElement:this.routerOutlet.nativeEl,componentProps:{course_id:this.course_id}});yield t.present()}))}scrollToBottom(t=300){this.content.scrollToBottom(t)}}return t.\u0275fac=function(e){return new(e||t)(_.ac(o.f),_.ac(_.i),_.ac(n.Db),_.ac(o.a),_.ac(n.fb),_.ac(d.a),_.ac(n.b),_.ac(u.a),_.ac(un.a),_.ac(gn.a),_.ac(l.a),_.ac(xc.a))},t.\u0275cmp=_.Ub({type:t,selectors:[["app-course-panel"]],viewQuery:function(t,e){var i;1&t&&_.ld(Un,!0),2&t&&_.Nc(i=_.pc())&&(e.content=i.first)},decls:20,vars:15,consts:[["translucent","true"],["slot","start"],[3,"disabled","routerLink","queryParams"],["name","arrow-back-outline"],["slot","end"],[3,"matTooltip","click"],["name","people-outline"],[3,"matTooltip","click",4,"ngIf"],["mode","indeterminate",4,"ngIf"],[4,"ngIf"],["fullscreen","true",3,"scrollbar"],["content",""],["name","document-attach-outline"],["name","settings-outline"],["mode","indeterminate"],["mat-align-tabs","center",3,"selectedIndex","selectedIndexChange"],[4,"ngFor","ngForOf"],[3,"active","routerLink","label"]],template:function(t,e){1&t&&(_.gc(0,"ion-header",0),_.gc(1,"ion-toolbar"),_.gc(2,"ion-buttons",1),_.bc(3,"ion-menu-button"),_.gc(4,"ion-button",2),_.bc(5,"ion-icon",3),_.fc(),_.fc(),_.gc(6,"ion-title"),_.ed(7),_.tc(8,"translate"),_.fc(),_.gc(9,"ion-buttons",4),_.gc(10,"ion-button",5),_.oc("click",(function(){return e.openModalInterants()})),_.tc(11,"translate"),_.bc(12,"ion-icon",6),_.fc(),_.cd(13,Nn,3,3,"ion-button",7),_.cd(14,Hn,3,3,"ion-button",7),_.fc(),_.fc(),_.cd(15,Jn,1,0,"mat-progress-bar",8),_.cd(16,Gn,3,2,"ion-toolbar",9),_.fc(),_.gc(17,"ion-content",10,11),_.bc(19,"router-outlet"),_.fc()),2&t&&(_.Lb(4),_.Ac("disabled",e.loading)("routerLink",e.parentRoute)("queryParams",_.Ec(14,Kn)),_.Lb(3),_.fd(null!=e.course?e.course.name+" - "+(e.course.subject||"|"):_.uc(8,10,"menu.courses")),_.Lb(3),_.Ac("matTooltip",_.uc(11,12,"pages.course.integrants")),_.Lb(3),_.Ac("ngIf",!!e.course&&e.course.is_my),_.Lb(1),_.Ac("ngIf",!!e.course&&e.course.is_my),_.Lb(1),_.Ac("ngIf",e.loading),_.Lb(1),_.Ac("ngIf",e.loadMenus),_.Lb(1),_.Bc("scrollbar",e.scrollbarStyle))},directives:[n.B,n.zb,n.l,n.R,n.k,n.Kb,o.g,n.C,n.xb,O.a,c.t,n.u,x.b,o.k,w.a,Vn.c,c.s,Vn.a],pipes:[P.d],styles:["[_nghost-%COMP%]     .mat-tab-label{height:3rem!important;min-width:8rem!important}[_nghost-%COMP%]     .mat-tab-label.mat-tab-label-active{border-bottom:4px solid var(--ion-color-primary);box-sizing:border-box;border-radius:2px}[_nghost-%COMP%]     .mat-ink-bar{display:none!important}"]}),t})(),children:[{path:":uuid/dashboard",component:dn,runGuardsAndResolvers:"always"},{path:":uuid/posts",component:os},{path:":uuid/activities",component:ki},{path:":uuid/my_books",component:Li.a},{path:":uuid/library",component:vc.a},{path:":uuid/foro",component:bc},{path:":uuid/qualifications",component:Js},{path:":uuid/:type/post/:post_id",component:Je},{path:":uuid/activities/create/form/:type_form",component:pe.a},{path:":uuid/activities/create/form/:type_form/:activity_id",component:pe.a},{path:":uuid/activities/details/:activity_id",component:ee},{path:":uuid/activities/details/:activity_id/:assignment_id",component:ee}]}];let Zn=(()=>{class t{}return t.\u0275mod=_.Yb({type:t}),t.\u0275inj=_.Xb({factory:function(e){return new(e||t)},imports:[[o.j.forChild(Xn)],o.j]}),t})();var to=i("H5xr"),eo=i("oOf3"),io=i("vvyD"),co=i("zwmB"),so=i("WehO"),no=i("2Yyj"),oo=i.n(no),ao=i("FKr1"),ro=i("1yaQ");function lo(){return Object(so.a)(g)}Object(c.L)(oo.a);let uo=(()=>{class t{}return t.\u0275mod=_.Yb({type:t}),t.\u0275inj=_.Xb({factory:function(e){return new(e||t)},providers:[{provide:ao.f,useValue:"es-EC"},{provide:ao.e,useValue:ro.b}],imports:[[c.c,s.B,s.l,n.Bb,P.c,x.a,to.a,eo.a,io.a,Zn,nt.b,mn.c,ne.b.forRoot({provide:ne.f,useFactory:lo}),co.b]]}),t})()},"1yaQ":function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return d})),i.d(e,"c",(function(){return l}));var c=i("fXoL"),s=i("FKr1"),n=i("wd/R");const o=i.n(n).a||n,a=new c.u("MAT_MOMENT_DATE_ADAPTER_OPTIONS",{providedIn:"root",factory:function(){return{useUtc:!1}}});function r(t,e){const i=Array(t);for(let c=0;c<t;c++)i[c]=e(c);return i}let l=(()=>{class t extends s.c{constructor(t,e){super(),this._options=e,this.setLocale(t||o.locale())}setLocale(t){super.setLocale(t);let e=o.localeData(t);this._localeData={firstDayOfWeek:e.firstDayOfWeek(),longMonths:e.months(),shortMonths:e.monthsShort(),dates:r(31,t=>this.createDate(2017,0,t+1).format("D")),longDaysOfWeek:e.weekdays(),shortDaysOfWeek:e.weekdaysShort(),narrowDaysOfWeek:e.weekdaysMin()}}getYear(t){return this.clone(t).year()}getMonth(t){return this.clone(t).month()}getDate(t){return this.clone(t).date()}getDayOfWeek(t){return this.clone(t).day()}getMonthNames(t){return"long"==t?this._localeData.longMonths:this._localeData.shortMonths}getDateNames(){return this._localeData.dates}getDayOfWeekNames(t){return"long"==t?this._localeData.longDaysOfWeek:"short"==t?this._localeData.shortDaysOfWeek:this._localeData.narrowDaysOfWeek}getYearName(t){return this.clone(t).format("YYYY")}getFirstDayOfWeek(){return this._localeData.firstDayOfWeek}getNumDaysInMonth(t){return this.clone(t).daysInMonth()}clone(t){return t.clone().locale(this.locale)}createDate(t,e,i){if(e<0||e>11)throw Error(`Invalid month index "${e}". Month index has to be between 0 and 11.`);if(i<1)throw Error(`Invalid date "${i}". Date has to be greater than 0.`);const c=this._createMoment({year:t,month:e,date:i}).locale(this.locale);if(!c.isValid())throw Error(`Invalid date "${i}" for month with index "${e}".`);return c}today(){return this._createMoment().locale(this.locale)}parse(t,e){return t&&"string"==typeof t?this._createMoment(t,e,this.locale):t?this._createMoment(t).locale(this.locale):null}format(t,e){if(t=this.clone(t),!this.isValid(t))throw Error("MomentDateAdapter: Cannot format invalid date.");return t.format(e)}addCalendarYears(t,e){return this.clone(t).add({years:e})}addCalendarMonths(t,e){return this.clone(t).add({months:e})}addCalendarDays(t,e){return this.clone(t).add({days:e})}toIso8601(t){return this.clone(t).format()}deserialize(t){let e;if(t instanceof Date)e=this._createMoment(t).locale(this.locale);else if(this.isDateInstance(t))return this.clone(t);if("string"==typeof t){if(!t)return null;e=this._createMoment(t,o.ISO_8601).locale(this.locale)}return e&&this.isValid(e)?this._createMoment(e).locale(this.locale):super.deserialize(t)}isDateInstance(t){return o.isMoment(t)}isValid(t){return this.clone(t).isValid()}invalid(){return o.invalid()}_createMoment(t,e,i){const{strict:c,useUtc:s}=this._options||{};return s?o.utc(t,e,i,c):o(t,e,i,c)}}return t.\u0275fac=function(e){return new(e||t)(c.kc(s.f,8),c.kc(a,8))},t.\u0275prov=c.Wb({token:t,factory:t.\u0275fac}),t})();const d={parse:{dateInput:"l"},display:{dateInput:"l",monthYearLabel:"MMM YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"MMMM YYYY"}}},"2Yyj":function(t,e,i){var c,s,n;!function(o){if("object"==typeof t.exports){var a=o(0,e);void 0!==a&&(t.exports=a)}else s=[i,e],void 0===(n="function"==typeof(c=o)?c.apply(e,s):c)||(t.exports=n)}((function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=void 0;e.default=["es",[["a.\xa0m.","p.\xa0m."],i,i],i,[["D","L","M","X","J","V","S"],["dom.","lun.","mar.","mi\xe9.","jue.","vie.","s\xe1b."],["domingo","lunes","martes","mi\xe9rcoles","jueves","viernes","s\xe1bado"],["DO","LU","MA","MI","JU","VI","SA"]],i,[["E","F","M","A","M","J","J","A","S","O","N","D"],["ene.","feb.","mar.","abr.","may.","jun.","jul.","ago.","sept.","oct.","nov.","dic."],["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]],i,[["a. C.","d. C."],i,["antes de Cristo","despu\xe9s de Cristo"]],1,[6,0],["d/M/yy","d MMM y","d 'de' MMMM 'de' y","EEEE, d 'de' MMMM 'de' y"],["H:mm","H:mm:ss","H:mm:ss z","H:mm:ss (zzzz)"],["{1} {0}",i,"{1}, {0}",i],[",",".",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0\xa0%","#,##0.00\xa0\xa4","#E0"],"EUR","\u20ac","euro",{AUD:[i,"$"],BRL:[i,"R$"],CNY:[i,"\xa5"],EGP:[],ESP:["\u20a7"],GBP:[i,"\xa3"],HKD:[i,"$"],ILS:[i,"\u20aa"],INR:[i,"\u20b9"],JPY:[i,"\xa5"],KRW:[i,"\u20a9"],MXN:[i,"$"],NZD:[i,"$"],RON:[i,"L"],THB:["\u0e3f"],TWD:[i,"NT$"],USD:["US$","$"],XAF:[],XCD:[i,"$"],XOF:[]},"ltr",function(t){return 1===t?1:5}]}))}}]);